/*! For license information please see main.373f7a2c.js.LICENSE.txt */
!function(){var e={7228:function(e){e.exports=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r},e.exports.__esModule=!0,e.exports.default=e.exports},2858:function(e){e.exports=function(e){if(Array.isArray(e))return e},e.exports.__esModule=!0,e.exports.default=e.exports},8926:function(e){function t(e,t,n,r,a,o,i){try{var s=e[o](i),u=s.value}catch(c){return void n(c)}s.done?t(u):Promise.resolve(u).then(r,a)}e.exports=function(e){return function(){var n=this,r=arguments;return new Promise((function(a,o){var i=e.apply(n,r);function s(e){t(i,a,o,s,u,"next",e)}function u(e){t(i,a,o,s,u,"throw",e)}s(void 0)}))}},e.exports.__esModule=!0,e.exports.default=e.exports},4575:function(e){e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},e.exports.__esModule=!0,e.exports.default=e.exports},3913:function(e){function t(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}e.exports=function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e},e.exports.__esModule=!0,e.exports.default=e.exports},9713:function(e){e.exports=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e},e.exports.__esModule=!0,e.exports.default=e.exports},3884:function(e){e.exports=function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o=[],i=!0,s=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(u){s=!0,a=u}finally{try{i||null==n.return||n.return()}finally{if(s)throw a}}return o}},e.exports.__esModule=!0,e.exports.default=e.exports},521:function(e){e.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},e.exports.__esModule=!0,e.exports.default=e.exports},1109:function(e,t,n){var r=n(9713);function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}e.exports=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e},e.exports.__esModule=!0,e.exports.default=e.exports},3038:function(e,t,n){var r=n(2858),a=n(3884),o=n(379),i=n(521);e.exports=function(e,t){return r(e)||a(e,t)||o(e,t)||i()},e.exports.__esModule=!0,e.exports.default=e.exports},379:function(e,t,n){var r=n(7228);e.exports=function(e,t){if(e){if("string"===typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}},e.exports.__esModule=!0,e.exports.default=e.exports},7757:function(e,t,n){e.exports=n(9727)},2504:function(e,t,n){"use strict";var r,a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=n(2791),i=(r=o)&&r.__esModule?r:{default:r};t.Z=function(e){var t=e.fill,n=void 0===t?"currentColor":t,r=e.width,o=void 0===r?24:r,s=e.height,u=void 0===s?24:s,c=e.style,l=void 0===c?{}:c,f=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(e,["fill","width","height","style"]);return i.default.createElement("svg",a({viewBox:"0 0 24 24",style:a({fill:n,width:o,height:u},l)},f),i.default.createElement("path",{d:"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"}))}},2403:function(e,t,n){"use strict";var r,a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=n(2791),i=(r=o)&&r.__esModule?r:{default:r};t.Z=function(e){var t=e.fill,n=void 0===t?"currentColor":t,r=e.width,o=void 0===r?24:r,s=e.height,u=void 0===s?24:s,c=e.style,l=void 0===c?{}:c,f=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(e,["fill","width","height","style"]);return i.default.createElement("svg",a({viewBox:"0 0 24 24",style:a({fill:n,width:o,height:u},l)},f),i.default.createElement("path",{d:"M12,18.17L8.83,15L7.42,16.41L12,21L16.59,16.41L15.17,15M12,5.83L15.17,9L16.58,7.59L12,3L7.41,7.59L8.83,9L12,5.83Z"}))}},8377:function(e,t,n){var r=n(3038).default,a=n(7757),o=n(8926).default,i=n(4575).default,s=n(3913).default;!function(e,t,n){"use strict";var u={1:{name:"/m/01g317",id:1,displayName:"person"},2:{name:"/m/0199g",id:2,displayName:"bicycle"},3:{name:"/m/0k4j",id:3,displayName:"car"},4:{name:"/m/04_sv",id:4,displayName:"motorcycle"},5:{name:"/m/05czz6l",id:5,displayName:"airplane"},6:{name:"/m/01bjv",id:6,displayName:"bus"},7:{name:"/m/07jdr",id:7,displayName:"train"},8:{name:"/m/07r04",id:8,displayName:"truck"},9:{name:"/m/019jd",id:9,displayName:"boat"},10:{name:"/m/015qff",id:10,displayName:"traffic light"},11:{name:"/m/01pns0",id:11,displayName:"fire hydrant"},13:{name:"/m/02pv19",id:13,displayName:"stop sign"},14:{name:"/m/015qbp",id:14,displayName:"parking meter"},15:{name:"/m/0cvnqh",id:15,displayName:"bench"},16:{name:"/m/015p6",id:16,displayName:"bird"},17:{name:"/m/01yrx",id:17,displayName:"cat"},18:{name:"/m/0bt9lr",id:18,displayName:"dog"},19:{name:"/m/03k3r",id:19,displayName:"horse"},20:{name:"/m/07bgp",id:20,displayName:"sheep"},21:{name:"/m/01xq0k1",id:21,displayName:"cow"},22:{name:"/m/0bwd_0j",id:22,displayName:"elephant"},23:{name:"/m/01dws",id:23,displayName:"bear"},24:{name:"/m/0898b",id:24,displayName:"zebra"},25:{name:"/m/03bk1",id:25,displayName:"giraffe"},27:{name:"/m/01940j",id:27,displayName:"backpack"},28:{name:"/m/0hnnb",id:28,displayName:"umbrella"},31:{name:"/m/080hkjn",id:31,displayName:"handbag"},32:{name:"/m/01rkbr",id:32,displayName:"tie"},33:{name:"/m/01s55n",id:33,displayName:"suitcase"},34:{name:"/m/02wmf",id:34,displayName:"frisbee"},35:{name:"/m/071p9",id:35,displayName:"skis"},36:{name:"/m/06__v",id:36,displayName:"snowboard"},37:{name:"/m/018xm",id:37,displayName:"sports ball"},38:{name:"/m/02zt3",id:38,displayName:"kite"},39:{name:"/m/03g8mr",id:39,displayName:"baseball bat"},40:{name:"/m/03grzl",id:40,displayName:"baseball glove"},41:{name:"/m/06_fw",id:41,displayName:"skateboard"},42:{name:"/m/019w40",id:42,displayName:"surfboard"},43:{name:"/m/0dv9c",id:43,displayName:"tennis racket"},44:{name:"/m/04dr76w",id:44,displayName:"bottle"},46:{name:"/m/09tvcd",id:46,displayName:"wine glass"},47:{name:"/m/08gqpm",id:47,displayName:"cup"},48:{name:"/m/0dt3t",id:48,displayName:"fork"},49:{name:"/m/04ctx",id:49,displayName:"knife"},50:{name:"/m/0cmx8",id:50,displayName:"spoon"},51:{name:"/m/04kkgm",id:51,displayName:"bowl"},52:{name:"/m/09qck",id:52,displayName:"banana"},53:{name:"/m/014j1m",id:53,displayName:"apple"},54:{name:"/m/0l515",id:54,displayName:"sandwich"},55:{name:"/m/0cyhj_",id:55,displayName:"orange"},56:{name:"/m/0hkxq",id:56,displayName:"broccoli"},57:{name:"/m/0fj52s",id:57,displayName:"carrot"},58:{name:"/m/01b9xk",id:58,displayName:"hot dog"},59:{name:"/m/0663v",id:59,displayName:"pizza"},60:{name:"/m/0jy4k",id:60,displayName:"donut"},61:{name:"/m/0fszt",id:61,displayName:"cake"},62:{name:"/m/01mzpv",id:62,displayName:"chair"},63:{name:"/m/02crq1",id:63,displayName:"couch"},64:{name:"/m/03fp41",id:64,displayName:"potted plant"},65:{name:"/m/03ssj5",id:65,displayName:"bed"},67:{name:"/m/04bcr3",id:67,displayName:"dining table"},70:{name:"/m/09g1w",id:70,displayName:"toilet"},72:{name:"/m/07c52",id:72,displayName:"tv"},73:{name:"/m/01c648",id:73,displayName:"laptop"},74:{name:"/m/020lf",id:74,displayName:"mouse"},75:{name:"/m/0qjjc",id:75,displayName:"remote"},76:{name:"/m/01m2v",id:76,displayName:"keyboard"},77:{name:"/m/050k8",id:77,displayName:"cell phone"},78:{name:"/m/0fx9l",id:78,displayName:"microwave"},79:{name:"/m/029bxz",id:79,displayName:"oven"},80:{name:"/m/01k6s3",id:80,displayName:"toaster"},81:{name:"/m/0130jx",id:81,displayName:"sink"},82:{name:"/m/040b_t",id:82,displayName:"refrigerator"},84:{name:"/m/0bt_c3",id:84,displayName:"book"},85:{name:"/m/01x3z",id:85,displayName:"clock"},86:{name:"/m/02s195",id:86,displayName:"vase"},87:{name:"/m/01lsmm",id:87,displayName:"scissors"},88:{name:"/m/0kmg4",id:88,displayName:"teddy bear"},89:{name:"/m/03wvsk",id:89,displayName:"hair drier"},90:{name:"/m/012xff",id:90,displayName:"toothbrush"}},c=function(){function e(t,n){i(this,e),this.modelPath=n||"https://storage.googleapis.com/tfjs-models/savedmodel/".concat(this.getPrefix(t),"/model.json")}return s(e,[{key:"getPrefix",value:function(e){return"lite_mobilenet_v2"===e?"ssd".concat(e):"ssd_".concat(e)}},{key:"load",value:function(){var e=o(a.mark((function e(){var r,o;return a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.loadGraphModel(this.modelPath);case 2:return this.model=e.sent,r=n.zeros([1,300,300,3],"int32"),e.next=6,this.model.executeAsync(r);case 6:return o=e.sent,e.next=9,Promise.all(o.map((function(e){return e.data()})));case 9:o.map((function(e){return e.dispose()})),r.dispose();case 11:case"end":return e.stop()}}),e,this)})));function r(){return e.apply(this,arguments)}return r}()},{key:"infer",value:function(){var e=o(a.mark((function e(t,o,i){var s,u,c,l,f,d,p,h,m,v,g,y,b;return a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=n.tidy((function(){return t instanceof n.Tensor||(t=n.browser.fromPixels(t)),n.expandDims(t)})),u=s.shape[1],c=s.shape[2],e.next=5,this.model.executeAsync(s);case 5:return l=e.sent,f=l[0].dataSync(),d=l[1].dataSync(),s.dispose(),n.dispose(l),p=this.calculateMaxScores(f,l[0].shape[1],l[0].shape[2]),h=r(p,2),m=h[0],v=h[1],g=n.getBackend(),"webgl"===n.getBackend()&&n.setBackend("cpu"),y=n.tidy((function(){var e=n.tensor2d(d,[l[1].shape[1],l[1].shape[3]]);return n.image.nonMaxSuppression(e,m,o,i,i)})),b=y.dataSync(),e.abrupt("return",(y.dispose(),g!==n.getBackend()&&n.setBackend(g),this.buildDetectedObjects(c,u,d,m,b,v)));case 13:case"end":return e.stop()}}),e,this)})));function t(t,n,r){return e.apply(this,arguments)}return t}()},{key:"buildDetectedObjects",value:function(e,t,n,r,a,o){for(var i=a.length,s=[],c=0;c<i;c++){for(var l=[],f=0;f<4;f++)l[f]=n[4*a[c]+f];var d=l[0]*t,p=l[1]*e,h=l[2]*t,m=l[3]*e;l[0]=p,l[1]=d,l[2]=m-p,l[3]=h-d,s.push({bbox:l,class:u[o[a[c]]+1].displayName,score:r[a[c]]})}return s}},{key:"calculateMaxScores",value:function(e,t,n){for(var r=[],a=[],o=0;o<t;o++){for(var i=Number.MIN_VALUE,s=-1,u=0;u<n;u++)e[o*n+u]>i&&(i=e[o*n+u],s=u);r[o]=i,a[o]=s}return[r,a]}},{key:"detect",value:function(){var e=o(a.mark((function e(t){var n,r,o=arguments;return a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=o.length>1&&void 0!==o[1]?o[1]:20,r=o.length>2&&void 0!==o[2]?o[2]:.5,e.abrupt("return",this.infer(t,n,r));case 3:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"dispose",value:function(){null!=this.model&&this.model.dispose()}}]),e}();e.ObjectDetection=c,e.load=o(a.mark((function e(){var t,r,o,i,s=arguments;return a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=s.length>0&&void 0!==s[0]?s[0]:{},null!=n){e.next=3;break}throw new Error("Cannot find TensorFlow.js. If you are using a <script> tag, please also include @tensorflow/tfjs on the page before using this model.");case 3:if(r=t.base||"lite_mobilenet_v2",o=t.modelUrl,-1!==["mobilenet_v1","mobilenet_v2","lite_mobilenet_v2"].indexOf(r)){e.next=6;break}throw new Error("ObjectDetection constructed with invalid base model ".concat(r,". Valid names are 'mobilenet_v1', 'mobilenet_v2' and 'lite_mobilenet_v2'."));case 6:return i=new c(r,o),e.next=9,i.load();case 9:return e.abrupt("return",i);case 10:case"end":return e.stop()}}),e)}))),e.version="2.2.2",Object.defineProperty(e,"__esModule",{value:!0})}(t,n(2652),n(3772))},2652:function(e,t,n){"use strict";n.r(t),n.d(t,{GraphModel:function(){return Dr},deregisterOp:function(){return j},loadGraphModel:function(){return Mr},registerOp:function(){return R},version_converter:function(){return Pr}});var r={};n.r(r),n.d(r,{json:function(){return q}});var a={};n.r(a),n.d(a,{json:function(){return W}});var o={};n.r(o),n.d(o,{json:function(){return H}});var i={};n.r(i),n.d(i,{json:function(){return G}});var s={};n.r(s),n.d(s,{json:function(){return K}});var u={};n.r(u),n.d(u,{json:function(){return X}});var c={};n.r(c),n.d(c,{json:function(){return Y}});var l={};n.r(l),n.d(l,{json:function(){return $}});var f={};n.r(f),n.d(f,{json:function(){return J}});var d={};n.r(d),n.d(d,{json:function(){return Q}});var p={};n.r(p),n.d(p,{json:function(){return ee}});var h={};n.r(h),n.d(h,{json:function(){return te}});var m={};n.r(m),n.d(m,{json:function(){return ne}});var v={};n.r(v),n.d(v,{json:function(){return re}});var g={};n.r(g),n.d(g,{json:function(){return ae}});var y={};n.r(y),n.d(y,{json:function(){return oe}});var b={};n.r(b),n.d(b,{json:function(){return ie}});var x={};n.r(x),n.d(x,{json:function(){return se}});var w={};n.r(w),n.d(w,{json:function(){return ue}});var k={};n.r(k),n.d(k,{OP_SCOPE_SUFFIX:function(){return sn.zvA},abs:function(){return sn.WnP},acos:function(){return sn.Khb},acosh:function(){return sn.__u},add:function(){return sn.IHx},addN:function(){return sn.QBD},all:function(){return sn.$6P},any:function(){return sn.YjB},argMax:function(){return sn.NqF},argMin:function(){return sn.vHJ},asin:function(){return sn.ZRM},asinh:function(){return sn.VfV},atan:function(){return sn.z4N},atan2:function(){return sn.fvJ},atanh:function(){return sn.C80},avgPool:function(){return sn.wS1},avgPool3d:function(){return sn.uR5},basicLSTMCell:function(){return sn.zEQ},batchNorm:function(){return sn.tgs},batchNorm2d:function(){return sn.Dxk},batchNorm3d:function(){return sn.JY5},batchNorm4d:function(){return sn.p3b},batchToSpaceND:function(){return sn.E4h},bincount:function(){return sn.yE8},booleanMaskAsync:function(){return sn.anm},broadcastArgs:function(){return sn.XsQ},broadcastTo:function(){return sn.UFq},buffer:function(){return sn.f3b},cast:function(){return sn.pju},ceil:function(){return sn.mDi},clipByValue:function(){return sn.iUl},clone:function(){return sn.d9v},complex:function(){return sn.PYB},concat:function(){return sn.zoF},concat1d:function(){return sn.gME},concat2d:function(){return sn.Izb},concat3d:function(){return sn.MNy},concat4d:function(){return sn.ZaL},conv1d:function(){return sn.PAt},conv2d:function(){return sn.Tek},conv2dTranspose:function(){return sn.bc},conv3d:function(){return sn.pdZ},conv3dTranspose:function(){return sn.$QV},cos:function(){return sn.mCk},cosh:function(){return sn.f9Y},cosineWindow:function(){return sn.mew},cumsum:function(){return sn.zbp},denseBincount:function(){return sn.ppE},depthToSpace:function(){return sn.nTT},depthwiseConv2d:function(){return sn.B10},diag:function(){return sn.Ka3},dilation2d:function(){return sn.WmZ},div:function(){return sn.hiC},divNoNan:function(){return sn.NTj},dot:function(){return sn.AKD},dropout:function(){return sn.rvX},einsum:function(){return sn.WYO},elu:function(){return sn.pyx},enclosingPowerOfTwo:function(){return sn.GRh},equal:function(){return sn.DgJ},erf:function(){return sn.qNN},exp:function(){return sn.Qqt},expandDims:function(){return sn.dt4},expm1:function(){return sn.t$B},eye:function(){return sn.iyy},fft:function(){return sn.kp_},fill:function(){return sn.hlL},floor:function(){return sn.GWj},floorDiv:function(){return sn.qPi},fused:function(){return sn.imm},gather:function(){return sn.Iqj},gatherND:function(){return sn.dbB},greater:function(){return sn.pjt},greaterEqual:function(){return sn.brS},ifft:function(){return sn.Sxn},imag:function(){return sn.asL},image:function(){return sn.BHj},inTopKAsync:function(){return sn.V3u},irfft:function(){return sn.wx0},isFinite:function(){return sn.xVT},isInf:function(){return sn.UWc},isNaN:function(){return sn.i2d},leakyRelu:function(){return sn.hi7},less:function(){return sn.d9m},lessEqual:function(){return sn.zN1},linalg:function(){return sn.$r2},linspace:function(){return sn.SX3},localResponseNormalization:function(){return sn.G9k},log:function(){return sn.cM7},log1p:function(){return sn.Krr},logSigmoid:function(){return sn.e_t},logSoftmax:function(){return sn.CmS},logSumExp:function(){return sn.l_t},logicalAnd:function(){return sn.HvI},logicalNot:function(){return sn.hJK},logicalOr:function(){return sn.K5V},logicalXor:function(){return sn.egP},losses:function(){return sn.MB5},matMul:function(){return sn.OI3},max:function(){return sn.Fp7},maxPool:function(){return sn._sB},maxPool3d:function(){return sn.YQQ},maxPoolWithArgmax:function(){return sn.Ip$},maximum:function(){return sn.gWQ},mean:function(){return sn.J69},meshgrid:function(){return sn.ry_},min:function(){return sn.VV$},minimum:function(){return sn.LTh},mirrorPad:function(){return sn.VdP},mod:function(){return sn.wQq},moments:function(){return sn.Gi7},movingAverage:function(){return sn.p_},mul:function(){return sn.dC7},multiRNNCell:function(){return sn.rq4},multinomial:function(){return sn.SJ_},neg:function(){return sn.W76},norm:function(){return sn.KOy},notEqual:function(){return sn.Quu},oneHot:function(){return sn.lfX},ones:function(){return sn.iUs},onesLike:function(){return sn.JpU},op:function(){return sn.op},outerProduct:function(){return sn.N2O},pad:function(){return sn.vku},pad1d:function(){return sn.pNR},pad2d:function(){return sn.koy},pad3d:function(){return sn.t1L},pad4d:function(){return sn.lGY},pool:function(){return sn.d_R},pow:function(){return sn.sQ3},prelu:function(){return sn.AL3},print:function(){return sn.S0v},prod:function(){return sn.WVs},rand:function(){return sn.TN_},randomGamma:function(){return sn.wzB},randomNormal:function(){return sn.nGf},randomUniform:function(){return sn.LGj},range:function(){return sn.w6H},real:function(){return sn.kwC},reciprocal:function(){return sn.M25},relu:function(){return sn.UYe},relu6:function(){return sn.btT},reshape:function(){return sn.XLQ},reverse:function(){return sn.GYS},reverse1d:function(){return sn.SDf},reverse2d:function(){return sn.diP},reverse3d:function(){return sn.sx7},reverse4d:function(){return sn.mG2},rfft:function(){return sn.QEs},round:function(){return sn.NMM},rsqrt:function(){return sn.bp0},scalar:function(){return sn.iD$},scatterND:function(){return sn.snQ},selu:function(){return sn.U8D},separableConv2d:function(){return sn.U_I},setdiff1dAsync:function(){return sn.ODp},sigmoid:function(){return sn.XD2},sign:function(){return sn.Xxe},signal:function(){return sn.tdS},sin:function(){return sn.O$l},sinh:function(){return sn.R_K},slice:function(){return sn.tPi},slice1d:function(){return sn.jZU},slice2d:function(){return sn.SmN},slice3d:function(){return sn.CnO},slice4d:function(){return sn.p0P},softmax:function(){return sn.XAC},softplus:function(){return sn.Wvh},spaceToBatchND:function(){return sn.fBT},sparse:function(){return sn.rVs},sparseToDense:function(){return sn.ers},spectral:function(){return sn.uN7},split:function(){return sn.Vl2},sqrt:function(){return sn._b3},square:function(){return sn.h62},squaredDifference:function(){return sn.$i},squeeze:function(){return sn.L9e},stack:function(){return sn.knu},step:function(){return sn.Nbs},stridedSlice:function(){return sn.NXj},string:function(){return sn.Z_8},sub:function(){return sn.luU},sum:function(){return sn.Smz},tan:function(){return sn.ORZ},tanh:function(){return sn.AEp},tensor:function(){return sn.XeE},tensor1d:function(){return sn.RRF},tensor2d:function(){return sn.odF},tensor3d:function(){return sn.wOQ},tensor4d:function(){return sn.yXz},tensor5d:function(){return sn.Bfx},tensor6d:function(){return sn.xZs},tile:function(){return sn.Gg6},topk:function(){return sn.hg7},transpose:function(){return sn.p4s},truncatedNormal:function(){return sn.Xu6},unique:function(){return sn.Two},unsortedSegmentSum:function(){return sn.pUJ},unstack:function(){return sn.HHK},variable:function(){return sn.VD$},where:function(){return sn.arb},whereAsync:function(){return sn.itS},zeros:function(){return sn.lls},zerosLike:function(){return sn.P84}});var S=n(3772);(0,S.env)().registerFlag("KEEP_INTERMEDIATE_TENSORS",(function(){return!1}),(function(e){e&&console.warn("Keep intermediate tensors is ON. This will print the values of all intermediate tensors during model inference. Not all models support this mode. For details, check e2e/benchmarks/ model_config.js. This significantly impacts performance.")}));var _,N,E=n(5861),C=n(5671),T=n(3144),I=n(7757),O=n.n(I),A=n(9439),D=n(3433);!function(e){e[e.DT_INVALID=0]="DT_INVALID",e[e.DT_FLOAT=1]="DT_FLOAT",e[e.DT_DOUBLE=2]="DT_DOUBLE",e[e.DT_INT32=3]="DT_INT32",e[e.DT_UINT8=4]="DT_UINT8",e[e.DT_INT16=5]="DT_INT16",e[e.DT_INT8=6]="DT_INT8",e[e.DT_STRING=7]="DT_STRING",e[e.DT_COMPLEX64=8]="DT_COMPLEX64",e[e.DT_INT64=9]="DT_INT64",e[e.DT_BOOL=10]="DT_BOOL",e[e.DT_QINT8=11]="DT_QINT8",e[e.DT_QUINT8=12]="DT_QUINT8",e[e.DT_QINT32=13]="DT_QINT32",e[e.DT_BFLOAT16=14]="DT_BFLOAT16",e[e.DT_QINT16=15]="DT_QINT16",e[e.DT_QUINT16=16]="DT_QUINT16",e[e.DT_UINT16=17]="DT_UINT16",e[e.DT_COMPLEX128=18]="DT_COMPLEX128",e[e.DT_HALF=19]="DT_HALF",e[e.DT_RESOURCE=20]="DT_RESOURCE",e[e.DT_VARIANT=21]="DT_VARIANT",e[e.DT_UINT32=22]="DT_UINT32",e[e.DT_UINT64=23]="DT_UINT64",e[e.DT_FLOAT_REF=101]="DT_FLOAT_REF",e[e.DT_DOUBLE_REF=102]="DT_DOUBLE_REF",e[e.DT_INT32_REF=103]="DT_INT32_REF",e[e.DT_UINT8_REF=104]="DT_UINT8_REF",e[e.DT_INT16_REF=105]="DT_INT16_REF",e[e.DT_INT8_REF=106]="DT_INT8_REF",e[e.DT_STRING_REF=107]="DT_STRING_REF",e[e.DT_COMPLEX64_REF=108]="DT_COMPLEX64_REF",e[e.DT_INT64_REF=109]="DT_INT64_REF",e[e.DT_BOOL_REF=110]="DT_BOOL_REF",e[e.DT_QINT8_REF=111]="DT_QINT8_REF",e[e.DT_QUINT8_REF=112]="DT_QUINT8_REF",e[e.DT_QINT32_REF=113]="DT_QINT32_REF",e[e.DT_BFLOAT16_REF=114]="DT_BFLOAT16_REF",e[e.DT_QINT16_REF=115]="DT_QINT16_REF",e[e.DT_QUINT16_REF=116]="DT_QUINT16_REF",e[e.DT_UINT16_REF=117]="DT_UINT16_REF",e[e.DT_COMPLEX128_REF=118]="DT_COMPLEX128_REF",e[e.DT_HALF_REF=119]="DT_HALF_REF",e[e.DT_RESOURCE_REF=120]="DT_RESOURCE_REF",e[e.DT_VARIANT_REF=121]="DT_VARIANT_REF",e[e.DT_UINT32_REF=122]="DT_UINT32_REF",e[e.DT_UINT64_REF=123]="DT_UINT64_REF"}(_||(_={})),function(e){!function(e){e[e.LEGACY=0]="LEGACY",e[e.V1=1]="V1",e[e.V2=2]="V2"}(e.CheckpointFormatVersion||(e.CheckpointFormatVersion={}))}(N||(N={}));var M={};function R(e,t){var n={tfOpName:e,category:"custom",inputs:[],attrs:[],customExecutor:t};M[e]=n}function P(e){return M[e]}function j(e){delete M[e]}function F(e,t,n,r,a){var o=t.inputParams[e];if(o&&void 0!==o.inputIndexStart){var i=o.inputIndexStart,s=0===o.inputIndexEnd?void 0:void 0===o.inputIndexEnd?i+1:o.inputIndexEnd;if("tensor"===o.type)return L(t.inputNames[o.inputIndexStart],n,r,a);if("tensors"===o.type)return t.inputNames.slice(i,s).map((function(e){return L(e,n,r,a)}));var u=L(t.inputNames.slice(i)[0],n,r,a),c=u.dataSync();return"number"===o.type?c[0]:S.util.toNestedArray(u.shape,c)}var l=t.attrParams[e];return l&&l.value}function L(e,t,n,r){var a=Z(e),o=(0,A.Z)(a,2),i=o[0],s=o[1];if(null!=r){var u=r.getHashTableHandleByName(i);if(null!=u)return u}var c=n.currentContextIds.find((function(e){return!!t[z(i,e)]}));return void 0!==c?t[z(i,c)][s]:void 0}function B(e,t){var n=Z(e),r=(0,A.Z)(n,3),a=r[0],o=r[1],i=r[2];return[z(a,t&&t.currentContextId),o,i]}function z(e,t){return t?"".concat(e,"-").concat(t):e}function Z(e){var t=e.split(":");if(1===t.length)return[e,0,void 0];var n=t[0],r=3===t.length?t[1]:void 0;return[n,Number(t[t.length-1]),r]}function V(e,t,n){var r=F("pad",e,t,n);if("explicit"===r){r=F("explicitPaddings",e,t,n);for(var a=[[0,0],[0,0],[0,0],[0,0]],o=0;o<4;o++)a[o][0]=r[2*o],a[o][1]=r[2*o+1];return a}return r}function U(e){return e.kept?e:(0,S.clone)(e)}var q=[{tfOpName:"Add",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AddV2",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AddN",category:"arithmetic",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}]},{tfOpName:"BiasAdd",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"Sub",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"RealDiv",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Div",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"DivNoNan",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"FloorDiv",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Mul",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Maximum",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Minimum",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Pow",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SquaredDifference",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Mod",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"FloorMod",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],W=[{tfOpName:"Abs",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Acos",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Asin",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atan2",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Ceil",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ClipByValue",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"clipValueMin",type:"number"},{start:2,name:"clipValueMax",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Complex",category:"basic_math",inputs:[{start:0,name:"real",type:"tensor"},{start:1,name:"imag",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ComplexAbs",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cos",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cosh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Elu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Exp",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Floor",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Log",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Imag",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"Tout",name:"outputType",type:"dtype",notSupported:!0}]},{tfOpName:"Neg",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Real",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"Tout",name:"outputType",type:"dtype",notSupported:!0}]},{tfOpName:"Prelu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"alpha",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Relu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Relu6",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Selu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sigmoid",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sin",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sinh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sqrt",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Rsqrt",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Square",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Tan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Tanh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sign",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Round",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Expm1",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Log1p",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Reciprocal",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Softplus",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Asinh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Acosh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atanh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Erf",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Prod",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axes",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool",notSupported:!0},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LeakyRelu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"alpha",name:"alpha",type:"number",defaultValue:.2},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"IsNan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],H=[{tfOpName:"EmptyTensorList",category:"control",inputs:[{start:0,name:"elementShape",type:"shape"},{start:1,name:"maxNumElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"LoopCond",category:"control",inputs:[{start:0,name:"pred",type:"tensor"}]},{tfOpName:"Switch",category:"control",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"pred",type:"tensor"}]},{tfOpName:"Merge",category:"control",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}]},{tfOpName:"Enter",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"frame_name",name:"frameName",type:"string"},{tfName:"is_constant",name:"isConstant",type:"bool"}]},{tfOpName:"Exit",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"NextIteration",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayV3",category:"control",inputs:[{start:0,name:"size",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"dynamic_size",name:"dynamicSize",type:"bool"},{tfName:"clear_after_read",name:"clearAfterRead",type:"bool"},{tfName:"identical_element_shapes",name:"identicalElementShapes",type:"bool"},{tfName:"tensor_array_name",name:"name",type:"string"}]},{tfOpName:"TensorArrayWriteV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"tensor",type:"tensor"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayReadV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayGatherV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape",name:"elementShape",type:"shape"}]},{tfOpName:"TensorArrayScatterV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"tensor",type:"tensor"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"TensorArrayConcatV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape_except0",name:"elementShapeExcept0",type:"shape",notSupported:!0}]},{tfOpName:"TensorArraySplitV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"tensor",type:"tensor"},{start:2,name:"lengths",type:"number[]"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"TensorArraySizeV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"flowIn",type:"number"}]},{tfOpName:"TensorArrayCloseV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"}]},{tfOpName:"StatelessIf",category:"control",inputs:[{start:0,name:"cond",type:"tensor"},{start:1,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"then_branch",name:"thenBranch",type:"func"},{tfName:"else_branch",name:"elseBranch",type:"func"}]},{tfOpName:"If",category:"control",inputs:[{start:0,name:"cond",type:"tensor"},{start:1,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"then_branch",name:"thenBranch",type:"func"},{tfName:"else_branch",name:"elseBranch",type:"func"}]},{tfOpName:"StatelessWhile",category:"control",inputs:[{start:0,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"cond",name:"cond",type:"func"},{tfName:"body",name:"body",type:"func"}]},{tfOpName:"While",category:"control",inputs:[{start:0,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"cond",name:"cond",type:"func"},{tfName:"body",name:"body",type:"func"}]},{tfOpName:"TensorListScatter",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListScatterV2",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"},{start:3,name:"numElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListGather",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListGetItem",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListSetItem",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"tensor",type:"tensor"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListReserve",category:"control",inputs:[{start:0,name:"elementShape",type:"shape"},{start:1,name:"numElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListFromTensor",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListStack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"},{tfName:"num_elements",name:"numElements",type:"dtype"}]},{tfOpName:"TensorListSplit",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"elementShape",type:"shape"},{start:2,name:"lengths",type:"number[]"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListConcat",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}],attrs:[{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListPopBack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListPushBack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"tensor",type:"tensor"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]}],G=[{tfOpName:"AvgPool",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPool",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[],notSupported:!0},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPoolWithArgmax",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"include_batch_in_index",name:"includeBatchInIndex",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AvgPool3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPool3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Conv1D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"stride",name:"stride",type:"number"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NWC"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"dilation",name:"dilation",type:"number",defaultValue:1}]},{tfOpName:"Conv2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"useCudnnOnGpu",name:"useCudnnOnGpu",type:"bool"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"_FusedConv2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"use_cudnn_on_gpu",name:"useCudnnOnGpu",type:"bool",defaultValue:!0},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]",defaultValue:[1,1,1,1]},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:1e-4},{tfName:"leakyrelu_alpha",name:"leakyreluAlpha",type:"number"}]},{tfOpName:"Conv2DBackpropInput",category:"convolution",inputs:[{start:2,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:0,name:"outputShape",type:"number[]"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]",notSupported:!0}]},{tfOpName:"DepthwiseConv2d",category:"convolution",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"DepthwiseConv2dNative",category:"convolution",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"FusedDepthwiseConv2dNative",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]",defaultValue:[1,1,1,1]},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]}]},{tfOpName:"Conv3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"Dilation2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"rates",name:"dilations",type:"number[]"},{tfName:"padding",name:"pad",type:"string"}]}],K=[{tfOpName:"Fill",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"},{start:1,name:"value",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"LinSpace",category:"creation",inputs:[{start:0,name:"start",type:"number"},{start:1,name:"stop",type:"number"},{start:2,name:"num",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"OneHot",category:"creation",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"depth",type:"number"},{start:2,name:"onValue",type:"number",defaultValue:1},{start:3,name:"offValue",type:"number",defaultValue:0}],attrs:[{tfName:"axis",name:"axis",type:"number",notSupported:!0},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Ones",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"OnesLike",category:"creation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"RandomUniform",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"minval",name:"minval",type:"number",defaultValue:0},{tfName:"maxval",name:"maxval",type:"number",defaultValue:1},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"seed",name:"seed",type:"number",defaultValue:0},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"Range",category:"creation",inputs:[{start:0,name:"start",type:"number"},{start:1,name:"stop",type:"number"},{start:2,name:"step",type:"number",defaultValue:0}],attrs:[{tfName:"Tidx",name:"dtype",type:"dtype"}]},{tfOpName:"TruncatedNormal",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"means",name:"mean",type:"number",defaultValue:0},{tfName:"stddev",name:"stdDev",type:"number",defaultValue:1},{tfName:"seed",name:"seed",type:"number"},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"Zeros",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"ZerosLike",category:"creation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"Multinomial",category:"creation",inputs:[{start:0,name:"logits",type:"tensor"},{start:1,name:"numSamples",type:"number"}],attrs:[{tfName:"seed",name:"seed",type:"number"},{tfName:"seed2",name:"seed2",type:"number"},{tfName:"T",name:"dtype",type:"dtype"},{tfName:"output_dtype",name:"output_dtype",type:"dtype"}]}],X=[{tfOpName:"NonMaxSuppressionV2",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"}]},{tfOpName:"NonMaxSuppressionV3",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"}]},{tfOpName:"NonMaxSuppressionV4",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"T_threshold",name:"threshold",type:"dtype",notSupported:!0},{tfName:"pad_to_max_output_size",name:"padToMaxOutputSize",type:"bool"}]},{tfOpName:"NonMaxSuppressionV5",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"},{start:5,name:"softNmsSigma",type:"number"}]},{tfOpName:"Where",category:"dynamic",inputs:[{start:0,name:"condition",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ListDiff",category:"dynamic",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],Y=[{tfOpName:"TopKV2",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"k",type:"number"}],attrs:[{tfName:"sorted",name:"sorted",type:"bool"}]},{tfOpName:"Unique",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"UniqueV2",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]}],$=[{tfOpName:"PlaceholderWithDefault",category:"graph",inputs:[{start:0,name:"default",type:"tensor"}],attrs:[{tfName:"shape",name:"shape",type:"shape"},{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"Placeholder",category:"graph",attrs:[{tfName:"shape",name:"shape",type:"shape"},{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"Const",category:"graph"},{tfOpName:"Identity",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"IdentityN",category:"graph",inputs:[{start:0,end:0,name:"x",type:"tensors"}]},{tfOpName:"Snapshot",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Rank",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Size",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Shape",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"ShapeN",category:"graph",inputs:[{start:0,end:0,name:"x",type:"tensors"}]},{tfOpName:"Print",category:"graph",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"data",type:"tensors"}],attrs:[{tfName:"message",name:"message",type:"string"},{tfName:"first_n",name:"firstN",type:"number",notSupported:!0},{tfName:"summarize",name:"summarize",type:"number",defaultValue:3}]},{tfOpName:"NoOp",category:"graph",inputs:[]},{tfOpName:"StopGradient",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"FakeQuantWithMinMaxVars",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"min",name:"min",type:"number"},{tfName:"max",name:"max",type:"number"}]}],J=[{tfOpName:"HashTable",category:"hash_table",inputs:[],attrs:[{tfName:"shared_name",name:"sharedName",type:"string"},{tfName:"use_node_name_sharing",name:"useNodeNameSharing",type:"bool"},{tfName:"key_dtype",name:"keyDType",type:"dtype"},{tfName:"value_dtype",name:"valueDType",type:"dtype"}]},{tfOpName:"HashTableV2",category:"hash_table",inputs:[],attrs:[{tfName:"shared_name",name:"sharedName",type:"string"},{tfName:"use_node_name_sharing",name:"useNodeNameSharing",type:"bool"},{tfName:"key_dtype",name:"keyDType",type:"dtype"},{tfName:"value_dtype",name:"valueDType",type:"dtype"}]},{tfOpName:"LookupTableImport",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableImportV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableFind",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableFindV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableSize",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"}]},{tfOpName:"LookupTableSizeV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"}]}],Q=[{tfOpName:"ResizeBilinear",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"size",type:"number[]"}],attrs:[{tfName:"align_corners",name:"alignCorners",type:"bool"},{tfName:"half_pixel_centers",name:"halfPixelCenters",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ResizeNearestNeighbor",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"size",type:"number[]"}],attrs:[{tfName:"align_corners",name:"alignCorners",type:"bool"},{tfName:"half_pixel_centers",name:"halfPixelCenters",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"CropAndResize",category:"image",inputs:[{start:0,name:"image",type:"tensor"},{start:1,name:"boxes",type:"tensor"},{start:2,name:"boxInd",type:"tensor"},{start:3,name:"cropSize",type:"number[]"}],attrs:[{tfName:"method",name:"method",type:"string"},{tfName:"extrapolation_value",name:"extrapolationValue",type:"number"}]}],ee=[{tfOpName:"Equal",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"NotEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Greater",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"GreaterEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Less",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LessEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalAnd",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalNot",category:"logical",inputs:[{start:0,name:"a",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalOr",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Select",category:"logical",inputs:[{start:0,name:"condition",type:"tensor"},{start:1,name:"a",type:"tensor"},{start:2,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SelectV2",category:"logical",inputs:[{start:0,name:"condition",type:"tensor"},{start:1,name:"a",type:"tensor"},{start:2,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],te=[{tfOpName:"_FusedMatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:1e-4},{tfName:"transpose_a",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"transpose_b",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"transpose_a",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"transpose_b",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BatchMatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"adj_x",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"adj_y",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BatchMatMulV2",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"adj_x",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"adj_y",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Transpose",category:"matrices",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"perm",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Einsum",category:"matrices",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}],attrs:[{tfName:"equation",name:"equation",type:"string"},{tfName:"N",name:"n",type:"number",defaultValue:2},{tfName:"T",name:"dtype",type:"dtype"}]}],ne=[{tfOpName:"FusedBatchNorm",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"FusedBatchNormV2",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"FusedBatchNormV3",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"LRN",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"depth_radius",name:"radius",type:"number",defaultValue:5},{tfName:"bias",name:"bias",type:"number",defaultValue:1},{tfName:"alpha",name:"alpha",type:"number",defaultValue:1},{tfName:"beta",name:"beta",type:"number",defaultValue:.5}]},{tfOpName:"Softmax",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"LogSoftmax",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"SparseToDense",category:"normalization",inputs:[{start:0,name:"sparseIndices",type:"tensor"},{start:1,name:"outputShape",type:"number[]"},{start:2,name:"sparseValues",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",defaultValue:!0,notSupported:!0}]}],re=[{tfOpName:"Bincount",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"size",type:"number"},{start:2,name:"weights",type:"tensor"}]},{tfOpName:"DenseBincount",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"size",type:"number"},{start:2,name:"weights",type:"tensor"}],attrs:[{tfName:"binary_output",name:"binaryOutput",type:"bool"}]},{tfOpName:"Max",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Mean",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Min",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Sum",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"All",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Any",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"ArgMax",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"ArgMin",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"Prod",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Cumsum",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}],attrs:[{tfName:"exclusive",name:"exclusive",type:"bool"},{tfName:"reverse",name:"reverse",type:"bool"}]}],ae=[{tfOpName:"ConcatV2",category:"slice_join",inputs:[{start:0,end:-1,name:"tensors",type:"tensors"},{start:-1,name:"axis",type:"number"}],attrs:[{tfName:"N",name:"n",type:"number",defaultValue:2}]},{tfOpName:"Concat",category:"slice_join",inputs:[{start:1,end:0,name:"tensors",type:"tensors"},{start:0,name:"axis",type:"number"}],attrs:[{tfName:"N",name:"n",type:"number",defaultValue:2}]},{tfOpName:"GatherV2",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"axis",type:"number",defaultValue:0}],attrs:[{tfName:"batch_dims",name:"batchDims",type:"number",defaultValue:0}]},{tfOpName:"Gather",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",notSupported:!0}]},{tfOpName:"Reverse",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"dims",type:"bool[]"}]},{tfOpName:"ReverseV2",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}]},{tfOpName:"Slice",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"begin",type:"number[]"},{start:2,name:"size",type:"number[]"}]},{tfOpName:"StridedSlice",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"begin",type:"number[]"},{start:2,name:"end",type:"number[]"},{start:3,name:"strides",type:"number[]"}],attrs:[{tfName:"begin_mask",name:"beginMask",type:"number",defaultValue:0},{tfName:"end_mask",name:"endMask",type:"number",defaultValue:0},{tfName:"new_axis_mask",name:"newAxisMask",type:"number",defaultValue:0},{tfName:"ellipsis_mask",name:"ellipsisMask",type:"number",defaultValue:0},{tfName:"shrink_axis_mask",name:"shrinkAxisMask",type:"number",defaultValue:0}]},{tfOpName:"Pack",category:"slice_join",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}],attrs:[{tfName:"axis",name:"axis",type:"number",defaultValue:0}]},{tfOpName:"Unpack",category:"slice_join",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"axis",name:"axis",type:"number",defaultValue:0},{tfName:"num",name:"num",type:"number",defaultValue:0,notSupported:!0}]},{tfOpName:"Tile",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"reps",type:"number[]"}]},{tfOpName:"Split",category:"slice_join",inputs:[{start:0,name:"axis",type:"number",defaultValue:0},{start:1,name:"x",type:"tensor"}],attrs:[{tfName:"num_split",name:"numOrSizeSplits",type:"number",defaultValue:1}]},{tfOpName:"SplitV",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"numOrSizeSplits",type:"number[]"},{start:2,name:"axis",type:"number",defaultValue:0}]},{tfOpName:"ScatterNd",category:"slice_join",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"values",type:"tensor"},{start:2,name:"shape",type:"number[]"}]},{tfOpName:"GatherNd",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"}]},{tfOpName:"SparseToDense",category:"slice_join",inputs:[{start:0,name:"sparseIndices",type:"tensor"},{start:1,name:"outputShape",type:"number[]"},{start:2,name:"sparseValues",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",defaultValue:!1,notSupported:!0}]}],oe=[{tfOpName:"SparseFillEmptyRows",category:"sparse",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"values",type:"tensor"},{start:2,name:"denseShape",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}]},{tfOpName:"SparseReshape",category:"sparse",inputs:[{start:0,name:"inputIndices",type:"tensor"},{start:1,name:"inputShape",type:"tensor"},{start:2,name:"newShape",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SparseSegmentMean",category:"sparse",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"segmentIds",type:"tensor"}]},{tfOpName:"SparseSegmentSum",category:"sparse",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"segmentIds",type:"tensor"}]}],ie=[{tfOpName:"FFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"IFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"RFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"fft_length",type:"number",notSupported:!0}]},{tfOpName:"IRFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"fft_length",type:"number",notSupported:!0}]}],se=[{tfOpName:"StringNGrams",category:"string",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"dataSplits",type:"tensor"}],attrs:[{tfName:"separator",name:"separator",type:"string"},{tfName:"ngram_widths",name:"nGramWidths",type:"number[]"},{tfName:"left_pad",name:"leftPad",type:"string"},{tfName:"right_pad",name:"rightPad",type:"string"},{tfName:"pad_width",name:"padWidth",type:"number"},{tfName:"preserve_short_sequences",name:"preserveShortSequences",type:"bool"}],outputs:["ngrams","ngrams_splits"]},{tfOpName:"StringSplit",category:"string",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"delimiter",type:"tensor"}],attrs:[{tfName:"skip_empty",name:"skipEmpty",type:"bool"}],outputs:["indices","values","shape"]},{tfOpName:"StringToHashBucketFast",category:"string",inputs:[{start:0,name:"input",type:"tensor"}],attrs:[{tfName:"num_buckets",name:"numBuckets",type:"number"}]}],ue=[{tfOpName:"Cast",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"SrcT",name:"sdtype",type:"dtype",notSupported:!0},{tfName:"DstT",name:"dtype",type:"dtype"}]},{tfOpName:"ExpandDims",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"MirrorPad",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"}],attrs:[{tfName:"mode",name:"mode",type:"string"}]},{tfOpName:"Pad",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"}],attrs:[{tfName:"constant_value",name:"constantValue",type:"number",defaultValue:0}]},{tfOpName:"PadV2",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"},{start:2,name:"constantValue",type:"number",defaultValue:0}]},{tfOpName:"Reshape",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}]},{tfOpName:"Squeeze",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"axis",tfDeprecatedName:"squeeze_dims",name:"axis",type:"number[]"}]},{tfOpName:"SpaceToBatchND",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"blockShape",type:"number[]"},{start:2,name:"paddings",type:"number[]"}]},{tfOpName:"BatchToSpaceND",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"blockShape",type:"number[]"},{start:2,name:"crops",type:"number[]"}]},{tfOpName:"DepthToSpace",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"block_size",name:"blockSize",type:"number"},{tfName:"data_format",name:"dataFormat",type:"string"}]},{tfOpName:"BroadcastTo",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}],attrs:[]},{tfOpName:"BroadcastArgs",category:"transformation",inputs:[{start:0,name:"s0",type:"tensor"},{start:1,name:"s1",type:"tensor"}],attrs:[]}],ce=function(){function e(){var t;(0,C.Z)(this,e);var n=[r,a,o,i,s,u,c,l,f,d,p,h,m,v,g,y,b,x,w],k=(t=[]).concat.apply(t,(0,D.Z)(n.map((function(e){return e.json}))));this.opMappers=k.reduce((function(e,t){return e[t.tfOpName]=t,e}),{})}return(0,T.Z)(e,[{key:"transformGraph",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=e.node,a=[],o=[],i=[],s=r.reduce((function(e,n){return e[n.name]=t.mapNode(n),n.op.startsWith("Placeholder")?a.push(e[n.name]):"Const"===n.op?o.push(e[n.name]):null!=n.input&&0!==n.input.length||i.push(e[n.name]),e}),{}),u=[],c=[],l={},f={};null!=n&&(l=this.mapSignatureEntries(n.inputs),f=this.mapSignatureEntries(n.outputs));var d=Object.keys(s);d.forEach((function(e){var t=s[e];t.inputNames.forEach((function(e,n){var r=B(e),a=(0,A.Z)(r,3),o=a[0],i=a[2],u=s[o];if(null!=u.outputs){var c=u.outputs.indexOf(i);if(-1!==c){var l="".concat(o,":").concat(c);t.inputNames[n]=l}}t.inputs.push(u),u.children.push(t)}))})),0===Object.keys(f).length?d.forEach((function(e){var t=s[e];0===t.children.length&&c.push(t)})):Object.keys(f).forEach((function(e){var t=B(e),n=(0,A.Z)(t,1)[0],r=s[n];null!=r&&(r.signatureKey=f[e],c.push(r))})),Object.keys(l).length>0?Object.keys(l).forEach((function(e){var t=B(e),n=(0,A.Z)(t,1)[0],r=s[n];r&&(r.signatureKey=l[e],u.push(r))})):u=a;var p={};null!=e.library&&null!=e.library.function&&(p=e.library.function.reduce((function(e,n){return e[n.signature.name]=t.mapFunction(n),e}),{}));var h={nodes:s,inputs:u,outputs:c,weights:o,placeholders:a,signature:n,functions:p};return i.length>0&&(h.initNodes=i),h}},{key:"mapSignatureEntries",value:function(e){return Object.keys(e||{}).reduce((function(t,n){return t[e[n].name]=n,t}),{})}},{key:"mapNode",value:function(e){var t=P(e.op)||this.opMappers[e.op]||{};null==e.attr&&(e.attr={});var n={name:e.name,op:e.op,category:t.category,inputNames:(e.input||[]).map((function(e){return e.startsWith("^")?e.substr(1):e})),inputs:[],children:[],inputParams:{},attrParams:{},rawAttrs:e.attr,outputs:t.outputs};return null!=t.inputs&&(n.inputParams=t.inputs.reduce((function(e,t){return e[t.name]={type:t.type,inputIndexStart:t.start,inputIndexEnd:t.end},e}),{})),null!=t.attrs&&(n.attrParams=t.attrs.reduce((function(t,n){var r=n.type,a=void 0;switch(n.type){case"string":void 0===(a=fe(e.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(a=fe(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"string[]":void 0===(a=we(e.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(a=we(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"number":void 0===(a=pe(e.attr,n.tfName,n.defaultValue||0))&&n.tfDeprecatedName&&(a=pe(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"number[]":void 0===(a=xe(e.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(a=xe(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"bool":void 0===(a=de(e.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(a=de(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"bool[]":void 0===(a=Se(e.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(a=Se(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"shape":void 0===(a=be(e.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(a=be(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"shape[]":void 0===(a=ke(e.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(a=ke(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"dtype":void 0===(a=ve(e.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(a=ve(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"dtype[]":void 0===(a=ge(e.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(a=ge(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"func":void 0===(a=me(e.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(a=me(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"tensor":case"tensors":break;default:throw new Error("Unsupported param type: ".concat(n.type," for op: ").concat(e.op))}return t[n.name]={value:a,type:r},t}),{})),n}},{key:"mapFunction",value:function(e){var t=this,n=e.nodeDef,r=[],a={};null!=n&&(a=n.reduce((function(e,n){return e[n.name]=t.mapNode(n),"Const"===n.op&&r.push(e[n.name]),e}),{}));var o=[],i=[];e.signature.inputArg.forEach((function(e){var t=B(e.name),n=(0,A.Z)(t,1)[0],r={name:n,op:"Placeholder",inputs:[],inputNames:[],category:"graph",inputParams:{},attrParams:{dtype:{value:he(e.type),type:"dtype"}},children:[]};r.signatureKey=e.name,o.push(r),a[n]=r})),Object.keys(a).forEach((function(e){var t=a[e];t.inputNames.forEach((function(e,n){var r=B(e),o=(0,A.Z)(r,3),i=o[0],s=o[2],u=a[i];if(null!=u.outputs){var c=u.outputs.indexOf(s);if(-1!==c){var l="".concat(i,":").concat(c);t.inputNames[n]=l}}t.inputs.push(u),u.children.push(t)}))}));var s=e.ret;e.signature.outputArg.forEach((function(e){var t=B(s[e.name]),n=(0,A.Z)(t,2),r=n[0],o=n[1],u=a[r];null!=u&&(u.defaultOutput=o,i.push(u))}));var u=this.mapArgsToSignature(e);return{nodes:a,inputs:o,outputs:i,weights:r,placeholders:[],signature:u}}},{key:"mapArgsToSignature",value:function(e){var t=this;return{methodName:e.signature.name,inputs:e.signature.inputArg.reduce((function(e,n){return e[n.name]=t.mapArgToTensorInfo(n),e}),{}),outputs:e.signature.outputArg.reduce((function(n,r){return n[r.name]=t.mapArgToTensorInfo(r,e.ret),n}),{})}}},{key:"mapArgToTensorInfo",value:function(e,t){var n=e.name;return null!=t&&(n=t[n]),{name:n,dtype:e.type}}}],[{key:"Instance",get:function(){return this._instance||(this._instance=new this)}}]),e}();function le(e,t){var n=Array.isArray(e)?String.fromCharCode.apply(null,e):function(e){var t=(0,S.env)().global;if("undefined"!==typeof t.atob)return t.atob(e);if("undefined"!==typeof Buffer)return new Buffer(e,"base64").toString();throw new Error("Unable to decode base64 in this environment. Missing built-in atob() or Buffer()")}(e);return t?n:n.toLowerCase()}function fe(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=e[t];return null!=a?le(a.s,r):n}function de(e,t,n){var r=e[t];return r?r.b:n}function pe(e,t,n){var r=e[t]||{},a=null!=r.i?r.i:null!=r.f?r.f:n;return"number"===typeof a?a:parseInt(a,10)}function he(e){switch("string"===typeof e&&(e=_[e]),e){case _.DT_FLOAT:case _.DT_HALF:return"float32";case _.DT_INT32:case _.DT_INT64:case _.DT_INT8:case _.DT_UINT8:return"int32";case _.DT_BOOL:return"bool";case _.DT_DOUBLE:return"float32";case _.DT_STRING:return"string";default:return null}}function me(e,t,n){var r=e[t];return r&&r.func?r.func.name:n}function ve(e,t,n){var r=e[t];return r&&r.type?he(r.type):n}function ge(e,t,n){var r=e[t];return r&&r.list&&r.list.type?r.list.type.map((function(e){return he(e)})):n}function ye(e){if(!e.unknownRank)return null!=e.dim?e.dim.map((function(e){return"number"===typeof e.size?e.size:parseInt(e.size,10)})):[]}function be(e,t,n){var r=e[t];return r&&r.shape?ye(r.shape):n}function xe(e,t,n){var r=e[t];return r?((r.list.f&&r.list.f.length?r.list.f:r.list.i)||[]).map((function(e){return"number"===typeof e?e:parseInt(e,10)})):n}function we(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=e[t];return a&&a.list&&a.list.s?a.list.s.map((function(e){return le(e,r)})):n}function ke(e,t,n){var r=e[t];return r&&r.list&&r.list.shape?r.list.shape.map((function(e){return ye(e)})):n}function Se(e,t,n){var r=e[t];return r&&r.list&&r.list.b?r.list.b:n}var _e=function(){function e(t,n,r){var a=this;(0,C.Z)(this,e),this.node=t,this.tensorMap=n,this.context=r,this.inputs=[],this.attrs={},this.inputs=t.inputNames.map((function(e){return a.getInput(e)})),null!=t.rawAttrs&&(this.attrs=Object.keys(t.rawAttrs).reduce((function(e,t){return e[t]=a.getAttr(t),e}),{}))}return(0,T.Z)(e,[{key:"getInput",value:function(e){return L(e,this.tensorMap,this.context)}},{key:"getAttr",value:function(e,t){var n=this.node.rawAttrs[e];if(null!=n.tensor)return L(e,this.tensorMap,this.context);if(null!=n.i||null!=n.f)return pe(this.node.rawAttrs,e,t);if(null!=n.s)return fe(this.node.rawAttrs,e,t);if(null!=n.b)return de(this.node.rawAttrs,e,t);if(null!=n.shape)return be(this.node.rawAttrs,e,t);if(null!=n.type)return ve(this.node.rawAttrs,e,t);if(null!=n.list){if(null!=n.list.i||null!=n.list.f)return xe(this.node.rawAttrs,e,t);if(null!=n.list.s)return we(this.node.rawAttrs,e,t);if(null!=n.list.shape)return ke(this.node.rawAttrs,e,t);if(null!=n.list.b)return Se(this.node.rawAttrs,e,t);if(null!=n.list.type)return ge(this.node.rawAttrs,e,t)}return t}}]),e}(),Ne=n(3312),Ee=n(5506),Ce=n(4645),Te=n(651),Ie=n(5750),Oe=n(5923),Ae=n(7145),De=n(4774),Me=n(2273),Re=n(705),Pe=n(4334),je=n(7993),Fe=n(7613),Le=n(1719),Be=n(4502),ze=n(3053),Ze=n(54),Ve=n(4778),Ue=n(2227),qe=n(6115),We=n(1396),He=n(9253),Ge=n(1227),Ke=n(6679),Xe=n(2353),Ye=n(3891),$e=n(411),Je=n(5682),Qe=n(2628),et=n(378),tt=n(7270),nt=n(6996),rt=n(4362),at=n(2209),ot=n(6972),it=n(7539),st=n(766),ut=n(413),ct=n(7643),lt=n(7254),ft=n(2070),dt=n(7657),pt=n(4626),ht=n(6902),mt=n(7391),vt=n(1744),gt=n(6999),yt=n(9836),bt=n(5900),xt=n(5115),wt=n(7722),kt=n(4419),St=n(6859),_t=n(7005);function Nt(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";if("number"!==typeof e&&"number"!==typeof t){S.util.assert(e.length===t.length,(function(){return n+" Shapes ".concat(e," and ").concat(t," must match")}));for(var r=0;r<e.length;r++){var a=e[r],o=t[r];S.util.assert(a<0||o<0||a===o,(function(){return n+" Shapes ".concat(e," and ").concat(t," must match")}))}}}function Et(e){return"number"!==typeof e&&!e.some((function(e){return e<0}))}function Ct(e,t,n){var r=Tt(e,n),a=!Et(r);if(a&&0===t.length)throw new Error("Tried to calculate elements of an empty list"+" with non-fully-defined elementShape: ".concat(r));if(a&&t.forEach((function(e){r=Tt(e.shape,r)})),!Et(r))throw new Error("Non-fully-defined elementShape: ".concat(r));return r}function Tt(e,t){if("number"===typeof e)return t;if("number"===typeof t)return e;if(e.length!==t.length)throw new Error("Incompatible ranks during merge: ".concat(e," vs. ").concat(t));for(var n=[],r=0;r<e.length;++r){var a=e[r],o=t[r];if(a>=0&&o>=0&&a!==o)throw new Error("Incompatible shape during merge: ".concat(e," vs. ").concat(t));n[r]=a>=0?a:o}return n}var It=function(){function e(t,n,r,a,o,i,s){(0,C.Z)(this,e),this.name=t,this.dtype=n,this.maxSize=r,this.elementShape=a,this.identicalElementShapes=o,this.dynamicSize=i,this.clearAfterRead=s,this.tensors=[],this.closed_=!1,this.idTensor=(0,S.scalar)(0),(0,S.keep)(this.idTensor)}return(0,T.Z)(e,[{key:"id",get:function(){return this.idTensor.id}},{key:"closed",get:function(){return this.closed_}},{key:"clearAndClose",value:function(e){this.tensors.forEach((function(t){null!=e&&e.has(t.tensor.id)||t.tensor.dispose()})),this.tensors=[],this.closed_=!0,this.idTensor.dispose()}},{key:"size",value:function(){return this.tensors.length}},{key:"read",value:function(e){if(this.closed_)throw new Error("TensorArray ".concat(this.name," has already been closed."));if(e<0||e>=this.size())throw new Error("Tried to read from index ".concat(e,", but array size is: ").concat(this.size()));var t=this.tensors[e];if(t.cleared)throw new Error("TensorArray ".concat(this.name,": Could not read index ").concat(e," twice because it was cleared after a previous read ")+"(perhaps try setting clear_after_read = false?).");return this.clearAfterRead&&(t.cleared=!0),t.read=!0,t.tensor}},{key:"readMany",value:function(e){var t=this;return e.map((function(e){return t.read(e)}))}},{key:"write",value:function(e,t){if(this.closed_)throw new Error("TensorArray ".concat(this.name," has already been closed."));if(e<0||!this.dynamicSize&&e>=this.maxSize)throw new Error("Tried to write to index ".concat(e,", but array is not resizeable and size is: ").concat(this.maxSize));var n=this.tensors[e]||{};if(t.dtype!==this.dtype)throw new Error("TensorArray ".concat(this.name,": Could not write to TensorArray index ").concat(e,",\n          because the value dtype is ").concat(t.dtype,", but TensorArray dtype is ").concat(this.dtype,"."));if(0!==this.size()||null!=this.elementShape&&0!==this.elementShape.length||(this.elementShape=t.shape),Nt(this.elementShape,t.shape,"TensorArray ".concat(this.name,": Could not write to TensorArray index ").concat(e,".")),n.read)throw new Error("TensorArray ".concat(this.name,": Could not write to TensorArray index ").concat(e,", because it has already been read."));if(n.written)throw new Error("TensorArray ".concat(this.name,": Could not write to TensorArray index ").concat(e,", because it has already been written."));n.tensor=t,(0,S.keep)(t),n.written=!0,this.tensors[e]=n}},{key:"writeMany",value:function(e,t){var n=this;if(e.length!==t.length)throw new Error("TensorArray ".concat(this.name,": could not write multiple tensors,")+"because the index size: ".concat(e.length," is not the same as tensors size: ").concat(t.length,"."));e.forEach((function(e,r){return n.write(e,t[r])}))}},{key:"gather",value:function(e,t){if(t&&t!==this.dtype)throw new Error("TensorArray dtype is ".concat(this.dtype," but gather requested dtype ").concat(t));if(e)e=e.slice(0,this.size());else{e=[];for(var n=0;n<this.size();n++)e.push(n)}if(0===e.length)return(0,S.tensor)([],[0].concat(this.elementShape));var r=this.readMany(e);return Nt(this.elementShape,r[0].shape,"TensorArray shape mismatch: "),(0,S.stack)(r,0)}},{key:"concat",value:function(e){if(e&&e!==this.dtype)throw new Error("TensorArray dtype is ".concat(this.dtype," but concat requested dtype ").concat(e));if(0===this.size())return(0,S.tensor)([],[0].concat(this.elementShape));for(var t=[],n=0;n<this.size();n++)t.push(n);var r=this.readMany(t);return Nt(this.elementShape,r[0].shape,"TensorArray shape mismatch: tensor array shape (".concat(this.elementShape,") vs first tensor shape (").concat(r[0].shape,")")),(0,S.concat)(r,0)}},{key:"scatter",value:function(e,t){if(t.dtype!==this.dtype)throw new Error("TensorArray dtype is ".concat(this.dtype," but tensor has dtype ").concat(t.dtype));if(e.length!==t.shape[0])throw new Error("Expected len(indices) == tensor.shape[0], but saw: ".concat(e.length," vs. ").concat(t.shape[0]));var n=Math.max.apply(Math,(0,D.Z)(e));if(!this.dynamicSize&&n>=this.maxSize)throw new Error("Max index must be < array size (".concat(n,"  vs. ").concat(this.maxSize,")"));this.writeMany(e,(0,S.unstack)(t,0))}},{key:"split",value:function(e,t){var n=this;if(t.dtype!==this.dtype)throw new Error("TensorArray dtype is ".concat(this.dtype," but tensor has dtype ").concat(t.dtype));var r=0,a=e.map((function(e){return r+=e}));if(r!==t.shape[0])throw new Error("Expected sum of lengths to be equal to\n          tensor.shape[0], but sum of lengths is\n        ".concat(r,", and tensor's shape is: ").concat(t.shape));if(!this.dynamicSize&&e.length!==this.maxSize)throw new Error("TensorArray's size is not equal to the size of lengths (".concat(this.maxSize," vs. ").concat(e.length,"), ")+"and the TensorArray is not marked as dynamically resizeable");var o=0===r?0:t.size/r,i=[];(0,S.tidy)((function(){t=(0,S.reshape)(t,[1,r,o]);for(var s=0;s<e.length;++s){var u=[0,0===s?0:a[s-1],0],c=[1,e[s],o];i[s]=(0,S.reshape)((0,S.slice)(t,u,c),n.elementShape)}return i}));for(var s=[],u=0;u<e.length;u++)s[u]=u;this.writeMany(s,i)}}]),e}(),Ot=function(){function e(t,n,r){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:-1;(0,C.Z)(this,e),this.tensors=t,this.elementShape=n,this.elementDtype=r,null!=t&&t.forEach((function(e){if(r!==e.dtype)throw new Error("Invalid data types; op elements ".concat(r,", but list elements ").concat(e.dtype));Nt(n,e.shape,"TensorList shape mismatch: "),(0,S.keep)(e)})),this.idTensor=(0,S.scalar)(0),this.maxNumElements=a,(0,S.keep)(this.idTensor)}return(0,T.Z)(e,[{key:"id",get:function(){return this.idTensor.id}},{key:"copy",value:function(){return new e((0,D.Z)(this.tensors),this.elementShape,this.elementDtype)}},{key:"clearAndClose",value:function(e){this.tensors.forEach((function(t){null!=e&&e.has(t.id)||t.dispose()})),this.tensors.length=0,this.idTensor.dispose()}},{key:"size",value:function(){return this.tensors.length}},{key:"stack",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1;if(t!==this.elementDtype)throw new Error("Invalid data types; op elements ".concat(t,", but list elements ").concat(this.elementDtype));if(-1!==r&&this.tensors.length!==r)throw new Error("Operation expected a list with ".concat(r," elements but got a list with ").concat(this.tensors.length," elements."));Nt(e,this.elementShape,"TensorList shape mismatch: ");var a=Ct(this.elementShape,this.tensors,e);return(0,S.tidy)((function(){var e=n.tensors.map((function(e){return(0,S.reshape)(e,a)}));return(0,S.stack)(e,0)}))}},{key:"popBack",value:function(e,t){if(t!==this.elementDtype)throw new Error("Invalid data types; op elements ".concat(t,", but list elements ").concat(this.elementDtype));if(0===this.size())throw new Error("Trying to pop from an empty list.");var n=Ct(this.elementShape,this.tensors,e),r=this.tensors.pop();return Nt(r.shape,e,"TensorList shape mismatch: "),(0,S.reshape)(r,n)}},{key:"pushBack",value:function(e){if(e.dtype!==this.elementDtype)throw new Error("Invalid data types; op elements ".concat(e.dtype,", but list elements ").concat(this.elementDtype));if(Nt(e.shape,this.elementShape,"TensorList shape mismatch: "),this.maxNumElements===this.size())throw new Error("Trying to push element into a full list.");(0,S.keep)(e),this.tensors.push(e)}},{key:"resize",value:function(e){if(e<0)throw new Error("TensorListResize expects size to be non-negative. Got: ".concat(e));if(-1!==this.maxNumElements&&e>this.maxNumElements)throw new Error("TensorListResize input size ".concat(e," is greater maxNumElement ").concat(this.maxNumElements,"."));this.tensors.length=e}},{key:"getItem",value:function(e,t,n){if(n!==this.elementDtype)throw new Error("Invalid data types; op elements ".concat(n,", but list elements ").concat(this.elementDtype));if(e<0||e>this.tensors.length)throw new Error("Trying to access element ".concat(e," in a list with ").concat(this.tensors.length," elements."));if(null==this.tensors[e])throw new Error("element at index ".concat(e," is null."));Nt(this.tensors[e].shape,t,"TensorList shape mismatch: ");var r=Ct(this.elementShape,this.tensors,t);return(0,S.reshape)(this.tensors[e],r)}},{key:"setItem",value:function(e,t){if(t.dtype!==this.elementDtype)throw new Error("Invalid data types; op elements ".concat(t.dtype,", but list elements ").concat(this.elementDtype));if(e<0||-1!==this.maxNumElements&&e>=this.maxNumElements)throw new Error("Trying to set element ".concat(e," in a list with max ").concat(this.maxNumElements," elements."));Nt(this.elementShape,t.shape,"TensorList shape mismatch: "),(0,S.keep)(t),this.tensors[e]=t}},{key:"gather",value:function(e,t,n){var r=this;if(t!==this.elementDtype)throw new Error("Invalid data types; op elements ".concat(t,", but list elements ").concat(this.elementDtype));Nt(this.elementShape,n,"TensorList shape mismatch: "),e=e.slice(0,this.size());var a=Ct(this.elementShape,this.tensors,n);return 0===e.length?(0,S.tensor)([],[0].concat(a)):(0,S.tidy)((function(){var t=e.map((function(e){return(0,S.reshape)(r.tensors[e],a)}));return(0,S.stack)(t,0)}))}},{key:"concat",value:function(e,t){var n=this;if(e&&e!==this.elementDtype)throw new Error("TensorList dtype is ".concat(this.elementDtype," but concat requested dtype ").concat(e));Nt(this.elementShape,t,"TensorList shape mismatch: ");var r=Ct(this.elementShape,this.tensors,t);return 0===this.size()?(0,S.tensor)([],[0].concat(r)):(0,S.tidy)((function(){var e=n.tensors.map((function(e){return(0,S.reshape)(e,r)}));return(0,S.concat)(e,0)}))}}]),e}();function At(e,t,n){var r=e.dtype;if(e.shape.length<1)throw new Error("Tensor must be at least a vector, but saw shape: ".concat(e.shape));if(e.dtype!==n)throw new Error("Invalid data types; op elements ".concat(e.dtype,", but list elements ").concat(n));Nt(e.shape.slice(1),t,"TensorList shape mismatch: ");var a=(0,S.unstack)(e);return new Ot(a,t,r)}function Dt(e,t,n){return new Ot([],e,t,n)}function Mt(e,t,n,r){if(t.length!==e.shape[0])throw new Error("Expected len(indices) == tensor.shape[0], but saw: ".concat(t.length," vs. ").concat(e.shape[0]));var a=Math.max.apply(Math,(0,D.Z)(t));if(null!=r&&-1!==r&&a>=r)throw new Error("Max index must be < array size (".concat(a,"  vs. ").concat(r,")"));var o=new Ot([],n,e.dtype,r),i=(0,S.unstack)(e,0);return t.forEach((function(e,t){o.setItem(e,i[t])})),o}function Rt(e,t,n){var r=0,a=t.map((function(e){return r+=e}));if(r!==e.shape[0])throw new Error("Expected sum of lengths to be equal to\n          tensor.shape[0], but sum of lengths is\n        ".concat(r,", and tensor's shape is: ").concat(e.shape));for(var o=Tt(e.shape.slice(1),n),i=0===r?0:e.size/r,s=(0,S.tidy)((function(){var n=[];e=(0,S.reshape)(e,[1,r,i]);for(var s=0;s<t.length;++s){var u=[0,0===s?0:a[s-1],0],c=[1,t[s],i];n[s]=(0,S.reshape)((0,S.slice)(e,u,c),o)}return e.dispose(),n})),u=new Ot([],n,e.dtype,t.length),c=0;c<s.length;c++)u.setItem(c,s[c]);return u}var Pt=function(){var e=(0,E.Z)(O().mark((function e(t,n,r){var a,o,i,s,u,c,l,f,d,p,h,m,v,g,y,b,x,w,k,_,N,E,C,T,I,A,D,M,R,P,j,B,z,Z,V,q,W,H,G,K,X,Y,$,J,Q,ee,te,ne,re,ae,oe,ie,se,ue,ce,le,fe,de,pe,he,me,ve,ge,ye,be,xe,we,ke,Se,_e,Ne,Ee,Ce,Te,Ie,Oe,Ae,De,Me,Re,Pe,je,Fe,Le,Be,ze,Ze,Ve,Ue,qe,We,He,Ge,Ke,Xe,Ye;return O().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=t.op,e.next="If"===e.t0||"StatelessIf"===e.t0?3:"While"===e.t0||"StatelessWhile"===e.t0?15:"LoopCond"===e.t0?19:"Switch"===e.t0?21:"Merge"===e.t0?32:"Enter"===e.t0?37:"Exit"===e.t0?41:"NextIteration"===e.t0?44:"TensorArrayV3"===e.t0?47:"TensorArrayWriteV3"===e.t0?57:"TensorArrayReadV3"===e.t0?63:"TensorArrayGatherV3"===e.t0?67:"TensorArrayScatterV3"===e.t0?72:"TensorArrayConcatV3"===e.t0?78:"TensorArraySplitV3"===e.t0?82:"TensorArraySizeV3"===e.t0?88:"TensorArrayCloseV3"===e.t0?91:"TensorListSetItem"===e.t0?95:"TensorListGetItem"===e.t0?101:"TensorListScatterV2"===e.t0||"TensorListScatter"===e.t0?107:"TensorListReserve"===e.t0||"EmptyTensorList"===e.t0?114:"TensorListGather"===e.t0?121:"TensorListStack"===e.t0?127:"TensorListFromTensor"===e.t0?133:"TensorListConcat"===e.t0?139:"TensorListPushBack"===e.t0?144:"TensorListPopBack"===e.t0?149:"TensorListSplit"===e.t0?154:160;break;case 3:return a=F("thenBranch",t,n,r),o=F("elseBranch",t,n,r),i=F("cond",t,n,r),s=F("args",t,n,r),e.next=9,i.data();case 9:if(!e.sent[0]){e.next=14;break}return e.abrupt("return",r.functionMap[a].executeFunctionAsync(s,r.tensorArrayMap,r.tensorListMap));case 14:return e.abrupt("return",r.functionMap[o].executeFunctionAsync(s,r.tensorArrayMap,r.tensorListMap));case 15:return e.delegateYield(O().mark((function e(){var a,o,i,s,u,c,l,f;return O().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=F("body",t,n,r),o=F("cond",t,n,r),i=F("args",t,n,r),e.next=5,r.functionMap[o].executeFunctionAsync(i,r.tensorArrayMap,r.tensorListMap);case 5:return s=e.sent,u=i.map((function(e){return e.id})),e.next=9,s[0].data();case 9:c=e.sent,s.forEach((function(e){e.kept||-1!==u.indexOf(e.id)||e.dispose()})),l=i,f=O().mark((function e(){var t,n,i;return O().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=l,e.next=3,r.functionMap[a].executeFunctionAsync(l,r.tensorArrayMap,r.tensorListMap);case 3:return l=e.sent,n=l.map((function(e){return e.id})),t.forEach((function(e){e.kept||-1!==u.indexOf(e.id)||-1!==n.indexOf(e.id)||e.dispose()})),e.next=8,r.functionMap[o].executeFunctionAsync(l,r.tensorArrayMap,r.tensorListMap);case 8:return i=e.sent,e.next=11,i[0].data();case 11:c=e.sent,i.forEach((function(e){e.kept||-1!==u.indexOf(e.id)||-1!==n.indexOf(e.id)||e.dispose()}));case 13:case"end":return e.stop()}}),e)}));case 13:if(!c[0]){e.next=17;break}return e.delegateYield(f(),"t0",15);case 15:e.next=13;break;case 17:return e.abrupt("return",{v:l});case 18:case"end":return e.stop()}}),e)}))(),"t1",16);case 16:if("object"!==typeof(u=e.t1)){e.next=19;break}return e.abrupt("return",u.v);case 19:return c=F("pred",t,n,r),e.abrupt("return",[U(c)]);case 21:return l=F("pred",t,n,r),(f=F("data",t,n,r)).kept||(f=U(f)),e.next=26,l.data();case 26:if(!e.sent[0]){e.next=30;break}e.t2=[void 0,f],e.next=31;break;case 30:e.t2=[f,void 0];case 31:return e.abrupt("return",e.t2);case 32:if(d=t.inputNames.find((function(e){return void 0!==L(e,n,r)})),!d){e.next=36;break}return p=L(d,n,r),e.abrupt("return",[U(p)]);case 36:return e.abrupt("return",void 0);case 37:return h=F("frameName",t,n,r),m=F("tensor",t,n,r),r.enterFrame(h),e.abrupt("return",[U(m)]);case 41:return v=F("tensor",t,n,r),r.exitFrame(),e.abrupt("return",[U(v)]);case 44:return g=F("tensor",t,n,r),r.nextIteration(),e.abrupt("return",[U(g)]);case 47:return y=F("size",t,n,r),b=F("dtype",t,n,r),x=F("elementShape",t,n,r),w=F("dynamicSize",t,n,r),k=F("clearAfterRead",t,n,r),_=F("identicalElementShapes",t,n,r),N=F("name",t,n,r),E=new It(N,b,y,x,_,w,k),r.addTensorArray(E),e.abrupt("return",[E.idTensor,(0,S.scalar)(1)]);case 57:return C=F("tensorArrayId",t,n,r),T=F("index",t,n,r),I=F("tensor",t,n,r),(A=r.getTensorArray(C.id)).write(T,I),e.abrupt("return",[A.idTensor]);case 63:return D=F("tensorArrayId",t,n,r),M=F("index",t,n,r),R=r.getTensorArray(D.id),e.abrupt("return",[R.read(M)]);case 67:return P=F("tensorArrayId",t,n,r),j=F("indices",t,n,r),B=F("dtype",t,n,r),z=r.getTensorArray(P.id),e.abrupt("return",[z.gather(j,B)]);case 72:return Z=F("tensorArrayId",t,n,r),V=F("indices",t,n,r),q=F("tensor",t,n,r),(W=r.getTensorArray(Z.id)).scatter(V,q),e.abrupt("return",[W.idTensor]);case 78:return H=F("tensorArrayId",t,n,r),G=r.getTensorArray(H.id),K=F("dtype",t,n,r),e.abrupt("return",[G.concat(K)]);case 82:return X=F("tensorArrayId",t,n,r),Y=F("tensor",t,n,r),$=F("lengths",t,n,r),(J=r.getTensorArray(X.id)).split($,Y),e.abrupt("return",[J.idTensor]);case 88:return Q=F("tensorArrayId",t,n,r),ee=r.getTensorArray(Q.id),e.abrupt("return",[(0,S.scalar)(ee.size(),"int32")]);case 91:return te=F("tensorArrayId",t,n,r),(ne=r.getTensorArray(te.id)).clearAndClose(),e.abrupt("return",[ne.idTensor]);case 95:return re=F("tensorListId",t,n,r),ae=F("index",t,n,r),oe=F("tensor",t,n,r),(ie=r.getTensorList(re.id)).setItem(ae,oe),e.abrupt("return",[ie.idTensor]);case 101:return se=F("tensorListId",t,n,r),ue=F("index",t,n,r),ce=F("elementShape",t,n,r),le=F("elementDType",t,n,r),fe=r.getTensorList(se.id),e.abrupt("return",[fe.getItem(ue,ce,le)]);case 107:return de=F("indices",t,n,r),pe=F("tensor",t,n,r),he=F("elementShape",t,n,r),me=F("numElements",t,n,r),ve=Mt(pe,de,he,me),r.addTensorList(ve),e.abrupt("return",[ve.idTensor]);case 114:return ge=F("elementShape",t,n,r),ye=F("elementDType",t,n,r),be="TensorListReserve"===t.op?"numElements":"maxNumElements",xe=F(be,t,n,r),we=Dt(ge,ye,xe),r.addTensorList(we),e.abrupt("return",[we.idTensor]);case 121:return ke=F("tensorListId",t,n,r),Se=F("indices",t,n,r),_e=F("elementShape",t,n,r),Ne=F("elementDType",t,n,r),Ee=r.getTensorList(ke.id),e.abrupt("return",[Ee.gather(Se,Ne,_e)]);case 127:return Ce=F("tensorListId",t,n,r),Te=F("elementShape",t,n,r),Ie=F("elementDType",t,n,r),Oe=F("numElements",t,n,r),Ae=r.getTensorList(Ce.id),e.abrupt("return",[Ae.stack(Te,Ie,Oe)]);case 133:return De=F("tensor",t,n,r),Me=F("elementShape",t,n,r),Re=F("elementDType",t,n,r),Pe=At(De,Me,Re),r.addTensorList(Pe),e.abrupt("return",[Pe.idTensor]);case 139:return je=F("tensorListId",t,n,r),Fe=r.getTensorList(je.id),Le=F("dtype",t,n,r),Be=F("elementShape",t,n,r),e.abrupt("return",[Fe.concat(Le,Be)]);case 144:return ze=F("tensorListId",t,n,r),Ze=F("tensor",t,n,r),(Ve=r.getTensorList(ze.id)).pushBack(Ze),e.abrupt("return",[Ve.idTensor]);case 149:return Ue=F("tensorListId",t,n,r),qe=F("elementShape",t,n,r),We=F("elementDType",t,n,r),He=r.getTensorList(Ue.id),e.abrupt("return",[He.popBack(qe,We)]);case 154:return Ge=F("tensor",t,n,r),Ke=F("elementShape",t,n,r),Xe=F("lengths",t,n,r),Ye=Rt(Ge,Xe,Ke),r.addTensorList(Ye),e.abrupt("return",[Ye.idTensor]);case 160:throw TypeError("Node type ".concat(t.op," is not implemented"));case 161:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),jt=n(4918),Ft=n(3457),Lt=n(6947),Bt=n(1732),zt=n(1147),Zt=n(8113),Vt=n(6573),Ut=n(5777),qt=n(8811),Wt=n(5840),Ht=n(9185),Gt=n(7580);function Kt(e,t,n){var r=F("fusedOps",e,t,n),a=(0,A.Z)(r,2),o=a[0],i=a[1],s="biasadd"===o,u=!s,c="prelu"===i,l="fusedbatchnorm"===o,f=F("numArgs",e,t,n);if(s){if(c&&2!==f)throw new Error("FusedConv2d and DepthwiseConv2d with BiasAdd and Prelu must have two extra arguments: bias and alpha.");if(!c&&s&&1!==f)throw new Error("FusedConv2d and DepthwiseConv2d with BiasAdd must have one extra argument: bias.")}if(l)throw new Error("FusedConv2d and DepthwiseConv2d with FusedBatchNorm is not supported");var d=F("strides",e,t,n),p=V(e,t,n),h=F("dataFormat",e,t,n).toUpperCase(),m=F("dilations",e,t,n),v=F("args",e,t,n),g=(0,A.Z)(v,2),y=g[0],b=g[1];return u&&(b=y,y=void 0),{stride:d,pad:p,dataFormat:h,dilations:m,biasArg:y,preluArg:b,activationFunc:i,leakyreluAlpha:F("leakyreluAlpha",e,t,n)}}var Xt=n(8582),Yt=n(2453),$t=n(4660),Jt=n(4326),Qt=n(6100),en=n(773),tn=n(6407),nn=n(422),rn=n(4849),an=n(7742),on=n(7293),sn=n(5317),un=n(9118),cn=n(1867),ln=n(4438);function fn(e,t,n){return{boxes:F("boxes",e,t,n),scores:F("scores",e,t,n),maxOutputSize:F("maxOutputSize",e,t,n),iouThreshold:F("iouThreshold",e,t,n),scoreThreshold:F("scoreThreshold",e,t,n),softNmsSigma:F("softNmsSigma",e,t,n)}}var dn=function(){var e=(0,E.Z)(O().mark((function e(t,n,r){var a,o,i,s,u,c,l,f,d,p,h,m,v,g,y,b,x,w,k,S,_,N,E,C;return O().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=t.op,e.next="NonMaxSuppressionV5"===e.t0?3:"NonMaxSuppressionV4"===e.t0?8:"NonMaxSuppressionV3"===e.t0||"NonMaxSuppressionV2"===e.t0?14:"Where"===e.t0?19:"ListDiff"===e.t0?26:27;break;case 3:return a=fn(t,n,r),o=a.boxes,i=a.scores,s=a.maxOutputSize,u=a.iouThreshold,c=a.scoreThreshold,l=a.softNmsSigma,e.next=6,sn.BHj.nonMaxSuppressionWithScoreAsync(o,i,s,u,c,l);case 6:return f=e.sent,e.abrupt("return",[f.selectedIndices,f.selectedScores]);case 8:return d=fn(t,n,r),p=d.boxes,h=d.scores,m=d.maxOutputSize,v=d.iouThreshold,g=d.scoreThreshold,y=F("padToMaxOutputSize",t,n,r),e.next=12,sn.BHj.nonMaxSuppressionPaddedAsync(p,h,m,v,g,y);case 12:return b=e.sent,e.abrupt("return",[b.selectedIndices,b.validOutputs]);case 14:return x=fn(t,n,r),w=x.boxes,k=x.scores,S=x.maxOutputSize,_=x.iouThreshold,N=x.scoreThreshold,e.next=17,sn.BHj.nonMaxSuppressionAsync(w,k,S,_,N);case 17:return e.t1=e.sent,e.abrupt("return",[e.t1]);case 19:return E=un.p(F("condition",t,n,r),"bool"),e.next=22,cn.i(E);case 22:return e.t2=e.sent,C=[e.t2],E.dispose(),e.abrupt("return",C);case 26:return e.abrupt("return",ln.O(F("x",t,n,r),F("y",t,n,r)));case 27:throw TypeError("Node type ".concat(t.op," is not implemented"));case 28:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),pn=n(9085),hn=n(4860),mn=n(2894),vn=n(7067),gn=function(){function e(t,n){(0,C.Z)(this,e),this.keyDType=t,this.valueDType=n,this.handle=(0,S.scalar)(0),this.tensorMap=new Map,(0,S.keep)(this.handle)}return(0,T.Z)(e,[{key:"id",get:function(){return this.handle.id}},{key:"clearAndClose",value:function(){this.tensorMap.forEach((function(e){return e.dispose()})),this.tensorMap.clear(),this.handle.dispose()}},{key:"size",value:function(){return this.tensorMap.size}},{key:"tensorSize",value:function(){return vn.i(this.size(),"int32")}},{key:"import",value:function(){var e=(0,E.Z)(O().mark((function e(t,n){var r,a=this;return O().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.checkKeyAndValueTensor(t,n),e.next=3,t.data();case 3:return r=e.sent,this.tensorMap.forEach((function(e){return e.dispose()})),this.tensorMap.clear(),e.abrupt("return",(0,S.tidy)((function(){var e=(0,S.unstack)(n),t=r.length,o=e.length;S.util.assert(t===o,(function(){return"The number of elements doesn't match, keys has "+"".concat(t," elements, the values has ").concat(o," ")+"elements."}));for(var i=0;i<t;i++){var s=r[i],u=e[i];(0,S.keep)(u),a.tensorMap.set(s,u)}return a.handle})));case 7:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"find",value:function(){var e=(0,E.Z)(O().mark((function e(t,n){var r,a=this;return O().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.checkKeyAndValueTensor(t,n),e.next=3,t.data();case 3:return r=e.sent,e.abrupt("return",(0,S.tidy)((function(){for(var e=[],t=0;t<r.length;t++){var o=r[t],i=a.findWithDefault(o,n);e.push(i)}return(0,S.stack)(e)})));case 5:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"findWithDefault",value:function(e,t){var n=this.tensorMap.get(e);return null!=n?n:t}},{key:"checkKeyAndValueTensor",value:function(e,t){if(e.dtype!==this.keyDType)throw new Error("Expect key dtype ".concat(this.keyDType,", but got ")+"".concat(e.dtype));if(t.dtype!==this.valueDType)throw new Error("Expect value dtype ".concat(this.valueDType,", but got ")+"".concat(t.dtype))}}]),e}(),yn=function(){var e=(0,E.Z)(O().mark((function e(t,n,r,a){var o,i,s,u,c,l,f,d,p,h,m,v,g;return O().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=t.op,e.next="HashTable"===e.t0||"HashTableV2"===e.t0?3:"LookupTableImport"===e.t0||"LookupTableImportV2"===e.t0?8:"LookupTableFind"===e.t0||"LookupTableFindV2"===e.t0?16:"LookupTableSize"===e.t0||"LookupTableSizeV2"===e.t0?24:27;break;case 3:return o=F("keyDType",t,n,r),i=F("valueDType",t,n,r),s=new gn(o,i),a.addHashTable(t.name,s),e.abrupt("return",[s.handle]);case 8:return u=F("tableHandle",t,n,r,a),c=F("keys",t,n,r),l=F("values",t,n,r),f=a.getHashTableById(u.id),e.next=14,f.import(c,l);case 14:return e.t1=e.sent,e.abrupt("return",[e.t1]);case 16:return d=F("tableHandle",t,n,r,a),p=F("keys",t,n,r),h=F("defaultValue",t,n,r),m=a.getHashTableById(d.id),e.next=22,m.find(p,h);case 22:return e.t2=e.sent,e.abrupt("return",[e.t2]);case 24:return v=F("tableHandle",t,n,r,a),g=a.getHashTableById(v.id),e.abrupt("return",[g.tensorSize()]);case 27:throw TypeError("Node type ".concat(t.op," is not implemented"));case 28:case"end":return e.stop()}}),e)})));return function(t,n,r,a){return e.apply(this,arguments)}}(),bn=n(3254),xn=n(5549),wn=n(5014),kn=n(8327),Sn=n(4920),_n=n(2642),Nn=n(2177),En=n(875),Cn=n(5117),Tn=n(329),In=n(7221),On=n(8060),An=n(1240),Dn=n(3700),Mn=n(936),Rn=n(4910),Pn=n(4561),jn=n(9991),Fn=n(6176),Ln=n(6568),Bn=n(7891),zn=n(227),Zn=n(4108),Vn=n(8543),Un=n(9995),qn=n(5157),Wn=n(8862),Hn=n(7531),Gn=n(7419),Kn=n(4836),Xn=n(9498),Yn=n(4933),$n=n(9238),Jn=n(9017),Qn=n(3931),er=n(5561),tr=n(8306),nr=n(4566),rr=n(2343),ar=n(2588),or=n(3522),ir=n(3357),sr=n(7635),ur=n(530),cr=n(4617),lr=n(774),fr=n(2975),dr=n(9719),pr=n(1970),hr=n(5696),mr=n(6994),vr=n(1878),gr=n(9742),yr=n(238);function br(e,t,n,r){var a=function(e,t,n){switch(e.category){case"arithmetic":return S.tidy((function(){return function(e,t,n){switch(e.op){case"BiasAdd":case"AddV2":case"Add":return[Ne.I(F("a",e,t,n),F("b",e,t,n))];case"AddN":return[Ee.Q(F("tensors",e,t,n))];case"FloorMod":case"Mod":return[Ce.w(F("a",e,t,n),F("b",e,t,n))];case"Mul":return[Te.d(F("a",e,t,n),F("b",e,t,n))];case"RealDiv":case"Div":return[Ie.h(F("a",e,t,n),F("b",e,t,n))];case"DivNoNan":return[Oe.N(F("a",e,t,n),F("b",e,t,n))];case"FloorDiv":return[Ae.q(F("a",e,t,n),F("b",e,t,n))];case"Sub":return[De.l(F("a",e,t,n),F("b",e,t,n))];case"Minimum":return[Me.L(F("a",e,t,n),F("b",e,t,n))];case"Maximum":return[Re.g(F("a",e,t,n),F("b",e,t,n))];case"Pow":return[Pe.s(F("a",e,t,n),F("b",e,t,n))];case"SquaredDifference":return[je.$(F("a",e,t,n),F("b",e,t,n))];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}}(e,t,n)}));case"basic_math":return S.tidy((function(){return function(e,t,n){switch(e.op){case"Abs":case"ComplexAbs":return[Fe.W(F("x",e,t,n))];case"Acos":return[Le.K(F("x",e,t,n))];case"Acosh":return[Be._(F("x",e,t,n))];case"Asin":return[ze.Z(F("x",e,t,n))];case"Asinh":return[Ze.V(F("x",e,t,n))];case"Atan":return[Ve.z(F("x",e,t,n))];case"Atan2":return[Ue.f(F("x",e,t,n),F("y",e,t,n))];case"Atanh":return[qe.C(F("x",e,t,n))];case"Ceil":return[We.m(F("x",e,t,n))];case"Complex":return[He.P(F("real",e,t,n),F("imag",e,t,n))];case"Cos":return[Ge.m(F("x",e,t,n))];case"Cosh":return[Ke.f(F("x",e,t,n))];case"Elu":return[Xe.p(F("x",e,t,n))];case"Erf":return[Ye.q(F("x",e,t,n))];case"Exp":return[$e.Q(F("x",e,t,n))];case"Expm1":return[Je.t(F("x",e,t,n))];case"Floor":return[Qe.G(F("x",e,t,n))];case"Log":return[et.c(F("x",e,t,n))];case"Log1p":return[tt.K(F("x",e,t,n))];case"Imag":return[nt.a(F("x",e,t,n))];case"Neg":return[rt.W(F("x",e,t,n))];case"Reciprocal":return[at.M(F("x",e,t,n))];case"Real":return[ot.k(F("x",e,t,n))];case"Relu":return[it.U(F("x",e,t,n))];case"Round":return[st.N(F("x",e,t,n))];case"Selu":return[ut.U(F("x",e,t,n))];case"Sigmoid":return[ct.X(F("x",e,t,n))];case"Sin":return[lt.O(F("x",e,t,n))];case"Sign":return[ft.X(F("x",e,t,n))];case"Sinh":return[dt.R(F("x",e,t,n))];case"Softplus":return[pt.W(F("x",e,t,n))];case"Sqrt":return[ht._(F("x",e,t,n))];case"Square":return[mt.h(F("x",e,t,n))];case"Tanh":return[vt.A(F("x",e,t,n))];case"Tan":return[gt.O(F("x",e,t,n))];case"ClipByValue":return[yt.i(F("x",e,t,n),F("clipValueMin",e,t,n),F("clipValueMax",e,t,n))];case"Relu6":return[bt.b(F("x",e,t,n))];case"Rsqrt":return[xt.b(L(e.inputNames[0],t,n))];case"Prod":return[wt.W(F("x",e,t,n),F("axes",e,t,n))];case"LeakyRelu":return[kt.h(F("x",e,t,n),F("alpha",e,t,n))];case"Prelu":return[St.A(F("x",e,t,n),F("alpha",e,t,n))];case"IsNan":return[_t.i(L(e.inputNames[0],t,n))];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}}(e,t,n)}));case"control":return Pt(e,t,n);case"convolution":return S.tidy((function(){return function(e,t,n){switch(e.op){case"Conv1D":var r=F("stride",e,t,n),a=F("pad",e,t,n),o=F("dataFormat",e,t,n).toUpperCase(),i=F("dilation",e,t,n);return[jt.P(F("x",e,t,n),F("filter",e,t,n),r,a,o,i)];case"Conv2D":var s=F("strides",e,t,n),u=V(e,t,n),c=F("dataFormat",e,t,n).toUpperCase(),l=F("dilations",e,t,n);return[Ft.T(F("x",e,t,n),F("filter",e,t,n),[s[1],s[2]],u,c,[l[1],l[2]])];case"_FusedConv2D":var f=Kt(e,t,n),d=f.stride,p=f.pad,h=f.dataFormat,m=f.dilations,v=f.biasArg,g=f.preluArg,y=f.activationFunc,b=f.leakyreluAlpha;return[Lt.conv2d({x:F("x",e,t,n),filter:F("filter",e,t,n),strides:[d[1],d[2]],pad:p,dataFormat:h,dilations:[m[1],m[2]],bias:v,activation:y,preluActivationWeights:g,leakyreluAlpha:b})];case"FusedDepthwiseConv2dNative":var x=Kt(e,t,n),w=x.stride,k=x.pad,S=x.dataFormat,_=x.dilations,N=x.biasArg,E=x.preluArg,C=x.activationFunc,T=x.leakyreluAlpha;return[Lt.depthwiseConv2d({x:F("x",e,t,n),filter:F("filter",e,t,n),strides:[w[1],w[2]],pad:k,dataFormat:S,dilations:[_[1],_[2]],bias:N,activation:C,preluActivationWeights:E,leakyreluAlpha:T})];case"Conv2DBackpropInput":case"Conv2dTranspose":var I=F("outputShape",e,t,n),O=F("strides",e,t,n),A=V(e,t,n);return[Bt.b(F("x",e,t,n),F("filter",e,t,n),I,[O[1],O[2]],A)];case"DepthwiseConv2dNative":case"DepthwiseConv2d":var D=F("strides",e,t,n),M=V(e,t,n),R=F("dilations",e,t,n),P=F("dataFormat",e,t,n).toUpperCase();return[zt.B(F("input",e,t,n),F("filter",e,t,n),[D[1],D[2]],M,P,[R[1],R[2]])];case"Conv3D":var j=F("strides",e,t,n),L=F("pad",e,t,n),B=F("dataFormat",e,t,n).toUpperCase(),z=F("dilations",e,t,n);return[Zt.p(F("x",e,t,n),F("filter",e,t,n),[j[1],j[2],j[3]],L,B,[z[1],z[2],z[3]])];case"AvgPool":var Z=F("strides",e,t,n),U=F("pad",e,t,n),q=F("kernelSize",e,t,n);return[Vt.w(F("x",e,t,n),[q[1],q[2]],[Z[1],Z[2]],U)];case"MaxPool":var W=F("strides",e,t,n),H=F("pad",e,t,n),G=F("kernelSize",e,t,n);return[Ut._(F("x",e,t,n),[G[1],G[2]],[W[1],W[2]],H)];case"MaxPoolWithArgmax":var K=F("strides",e,t,n),X=F("pad",e,t,n),Y=F("kernelSize",e,t,n),$=F("includeBatchInIndex",e,t,n),J=qt.I(F("x",e,t,n),[Y[1],Y[2]],[K[1],K[2]],X,$);return[J.result,J.indexes];case"AvgPool3D":var Q=F("strides",e,t,n),ee=F("pad",e,t,n),te=F("kernelSize",e,t,n);return[Wt.u(F("x",e,t,n),[te[1],te[2],te[3]],[Q[1],Q[2],Q[3]],ee)];case"MaxPool3D":var ne=F("strides",e,t,n),re=F("pad",e,t,n),ae=F("kernelSize",e,t,n);return[Ht.Y(F("x",e,t,n),[ae[1],ae[2],ae[3]],[ne[1],ne[2],ne[3]],re)];case"Dilation2D":var oe=F("strides",e,t,n),ie=F("pad",e,t,n),se=F("dilations",e,t,n),ue=oe[1],ce=oe[2],le=se[1],fe=se[2];return[Gt.W(F("x",e,t,n),F("filter",e,t,n),[ue,ce],ie,[le,fe],"NHWC")];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}}(e,t,n)}));case"creation":return S.tidy((function(){return function(e,t,n){switch(e.op){case"Fill":var r=F("shape",e,t,n),a=F("dtype",e,t,n),o=F("value",e,t,n);return[Xt.h(r,o,a)];case"LinSpace":var i=F("start",e,t,n),s=F("stop",e,t,n),u=F("num",e,t,n);return[Yt.S(i,s,u)];case"Multinomial":var c=F("logits",e,t,n),l=F("numSamples",e,t,n),f=F("seed",e,t,n);return[$t.S(c,l,f)];case"OneHot":var d=F("indices",e,t,n),p=F("depth",e,t,n),h=F("onValue",e,t,n),m=F("offValue",e,t,n);return[Jt.l(d,p,h,m)];case"Ones":return[Qt.i(F("shape",e,t,n),F("dtype",e,t,n))];case"OnesLike":return[en.J(F("x",e,t,n))];case"RandomUniform":return[tn.L(F("shape",e,t,n),F("minval",e,t,n),F("maxval",e,t,n),F("dtype",e,t,n))];case"Range":var v=F("start",e,t,n),g=F("stop",e,t,n),y=F("step",e,t,n);return[nn.w(v,g,y,F("dtype",e,t,n))];case"TruncatedNormal":var b=F("shape",e,t,n),x=F("mean",e,t,n),w=F("stdDev",e,t,n),k=F("seed",e,t,n);return[rn.X(b,x,w,F("dtype",e,t,n),k)];case"Zeros":return[an.l(F("shape",e,t,n),F("dtype",e,t,n))];case"ZerosLike":return[on.P(F("x",e,t,n))];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}}(e,t,n)}));case"dynamic":return dn(e,t,n);case"evaluation":return S.tidy((function(){return function(e,t,n){switch(e.op){case"TopKV2":var r=F("x",e,t,n),a=F("k",e,t,n),o=F("sorted",e,t,n),i=pn.h(r,a,o);return[i.values,i.indices];case"Unique":var s=F("x",e,t,n),u=hn.T(s);return[u.values,u.indices];case"UniqueV2":var c=F("x",e,t,n),l=F("axis",e,t,n),f=hn.T(c,l);return[f.values,f.indices];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}}(e,t,n)}));case"image":return S.tidy((function(){return function(e,t,n){switch(e.op){case"ResizeBilinear":var r=F("images",e,t,n),a=F("size",e,t,n),o=F("alignCorners",e,t,n),i=F("halfPixelCenters",e,t,n);return[sn.BHj.resizeBilinear(r,[a[0],a[1]],o,i)];case"ResizeNearestNeighbor":var s=F("images",e,t,n),u=F("size",e,t,n),c=F("alignCorners",e,t,n),l=F("halfPixelCenters",e,t,n);return[sn.BHj.resizeNearestNeighbor(s,[u[0],u[1]],c,l)];case"CropAndResize":var f=F("image",e,t,n),d=F("boxes",e,t,n),p=F("boxInd",e,t,n),h=F("cropSize",e,t,n),m=F("method",e,t,n),v=F("extrapolationValue",e,t,n);return[sn.BHj.cropAndResize(f,d,p,h,m,v)];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}}(e,t,n)}));case"graph":return S.tidy((function(){return function(e,t,n){switch(e.op){case"Const":return t[e.name];case"PlaceholderWithDefault":var r=F("default",e,t,n);return[L(e.name,t,n)||r];case"Placeholder":return[L(e.name,t,n)];case"Identity":case"StopGradient":case"FakeQuantWithMinMaxVars":case"Snapshot":return[U(F("x",e,t,n))];case"IdentityN":return F("x",e,t,n).map((function(e){return U(e)}));case"Shape":return[mn.R(F("x",e,t,n).shape,"int32")];case"ShapeN":return F("x",e,t,n).map((function(e){return mn.R(e.shape)}));case"Size":return[vn.i(F("x",e,t,n).size,"int32")];case"Rank":return[vn.i(F("x",e,t,n).rank,"int32")];case"NoOp":return[vn.i(1)];case"Print":var a=F("x",e,t,n),o=F("data",e,t,n),i=F("message",e,t,n),s=F("summarize",e,t,n);console.warn("The graph has a tf.print() operation,usually used for debugging, which slows down performance."),console.log(i);for(var u=0;u<o.length;u++)console.log(Array.prototype.slice.call(o[u].dataSync()).slice(0,s));return[a];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}}(e,t,n)}));case"logical":return S.tidy((function(){return function(e,t,n){switch(e.op){case"Equal":return[bn.D(F("a",e,t,n),F("b",e,t,n))];case"NotEqual":return[xn.Q(F("a",e,t,n),F("b",e,t,n))];case"Greater":return[wn.p(F("a",e,t,n),F("b",e,t,n))];case"GreaterEqual":return[kn.b(F("a",e,t,n),F("b",e,t,n))];case"Less":return[Sn.d(F("a",e,t,n),F("b",e,t,n))];case"LessEqual":return[_n.z(F("a",e,t,n),F("b",e,t,n))];case"LogicalAnd":return[Nn.H(F("a",e,t,n),F("b",e,t,n))];case"LogicalNot":return[En.h(F("a",e,t,n))];case"LogicalOr":return[Cn.K(F("a",e,t,n),F("b",e,t,n))];case"Select":case"SelectV2":return[Tn.a(F("condition",e,t,n),F("a",e,t,n),F("b",e,t,n))];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}}(e,t,n)}));case"matrices":return S.tidy((function(){return function(e,t,n){switch(e.op){case"BatchMatMul":case"BatchMatMulV2":case"MatMul":return[In.O(F("a",e,t,n),F("b",e,t,n),F("transposeA",e,t,n),F("transposeB",e,t,n))];case"Einsum":return[On.W.apply(k,[F("equation",e,t,n)].concat((0,D.Z)(F("tensors",e,t,n))))];case"Transpose":return[An.p(F("x",e,t,n),F("perm",e,t,n))];case"_FusedMatMul":var r=F("fusedOps",e,t,n),a=(0,A.Z)(r,2),o=a[0],i=a[1],s="biasadd"===o,u="prelu"===i,c=F("numArgs",e,t,n),l=F("leakyreluAlpha",e,t,n);if(s){if(u&&2!==c)throw new Error("Fused MatMul with BiasAdd and Prelu must have two extra arguments: bias and alpha.");if(!u&&1!==c)throw new Error("Fused MatMul with BiasAdd must have one extra argument: bias.")}var f=F("args",e,t,n),d=(0,A.Z)(f,2),p=d[0],h=d[1];return[Lt.matMul({a:F("a",e,t,n),b:F("b",e,t,n),transposeA:F("transposeA",e,t,n),transposeB:F("transposeB",e,t,n),bias:p,activation:i,preluActivationWeights:h,leakyreluAlpha:l})];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}}(e,t,n)}));case"normalization":return S.tidy((function(){return function(e,t,n){switch(e.op){case"FusedBatchNorm":case"FusedBatchNormV2":case"FusedBatchNormV3":return[Dn.t(F("x",e,t,n),F("mean",e,t,n),F("variance",e,t,n),F("offset",e,t,n),F("scale",e,t,n),F("epsilon",e,t,n))];case"LRN":return[Mn.G(F("x",e,t,n),F("radius",e,t,n),F("bias",e,t,n),F("alpha",e,t,n),F("beta",e,t,n))];case"Softmax":return[Rn.X(F("x",e,t,n))];case"LogSoftmax":return[Pn.C(F("x",e,t,n))];case"SparseToDense":return[jn.e(F("sparseIndices",e,t,n),F("outputShape",e,t,n),F("sparseValues",e,t,n),F("defaultValue",e,t,n))];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}}(e,t,n)}));case"reduction":return S.tidy((function(){return function(e,t,n){switch(e.op){case"Max":var r=F("axis",e,t,n),a=F("keepDims",e,t,n);return[Fn.F(F("x",e,t,n),r,a)];case"Mean":var o=F("axis",e,t,n),i=F("keepDims",e,t,n);return[Ln.J(F("x",e,t,n),o,i)];case"Min":var s=F("axis",e,t,n),u=F("keepDims",e,t,n);return[Bn.V(F("x",e,t,n),s,u)];case"Sum":var c=F("axis",e,t,n),l=F("keepDims",e,t,n);return[zn.S(F("x",e,t,n),c,l)];case"All":var f=F("axis",e,t,n),d=F("keepDims",e,t,n);return[Zn.$(F("x",e,t,n),f,d)];case"Any":var p=F("axis",e,t,n),h=F("keepDims",e,t,n);return[Vn.Y(F("x",e,t,n),p,h)];case"ArgMax":var m=F("axis",e,t,n);return[Un.N(F("x",e,t,n),m)];case"ArgMin":var v=F("axis",e,t,n);return[qn.v(F("x",e,t,n),v)];case"Prod":var g=F("axis",e,t,n),y=F("keepDims",e,t,n);return[wt.W(F("x",e,t,n),g,y)];case"Cumsum":var b=F("axis",e,t,n),x=F("exclusive",e,t,n),w=F("reverse",e,t,n);return[Wn.z(F("x",e,t,n),b,x,w)];case"Bincount":var k=F("x",e,t,n),S=F("weights",e,t,n),_=F("size",e,t,n);return[Hn.y(k,S,_)];case"DenseBincount":var N=F("x",e,t,n),E=F("weights",e,t,n),C=F("size",e,t,n),T=F("binaryOutput",e,t,n);return[Gn.p(N,E,C,T)];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}}(e,t,n)}));case"slice_join":return S.tidy((function(){return function(e,t,n){switch(e.op){case"ConcatV2":case"Concat":var r=F("n",e,t,n),a=F("axis",e,t,n),o=F("tensors",e,t,n);return o=o.slice(0,r),[Kn.z(o,a)];case"Gather":var i=F("x",e,t,n),s=F("indices",e,t,n);return[Xn.I(i,un.p(s,"int32"),0)];case"GatherV2":var u=F("axis",e,t,n),c=F("batchDims",e,t,n),l=F("x",e,t,n),f=F("indices",e,t,n);return[Xn.I(l,un.p(f,"int32"),u,c)];case"Reverse":for(var d=F("dims",e,t,n),p=[],h=0;h<d.length;h++)d[h]&&p.push(h);var m=F("x",e,t,n);return[Yn.G(m,p)];case"ReverseV2":var v=F("axis",e,t,n),g=F("x",e,t,n);return[Yn.G(g,v)];case"Slice":var y=F("begin",e,t,n),b=F("size",e,t,n);return[$n.t(F("x",e,t,n),y,b)];case"StridedSlice":var x=F("begin",e,t,n),w=F("end",e,t,n),k=F("strides",e,t,n),_=F("beginMask",e,t,n),N=F("endMask",e,t,n),E=F("ellipsisMask",e,t,n),C=F("newAxisMask",e,t,n),T=F("shrinkAxisMask",e,t,n),I=F("x",e,t,n);return[Jn.N(I,x,w,k,_,N,E,C,T)];case"Pack":return(0,S.tidy)((function(){var r=F("axis",e,t,n),a=F("tensors",e,t,n),o=a[0].shape,i=Qn.L(a[0]).shape,s=a.map((function(e){var t=S.util.arraysEqual(e.shape,o);if(!t&&!S.util.arraysEqual(Qn.L(e).shape,i))throw new Error("the input tensors shape does not match");return t?e:er.X(e,o)}));return[tr.k(s,r)]}));case"Unpack":var O=F("axis",e,t,n),A=F("tensor",e,t,n);return nr.H(A,O);case"Tile":var D=F("reps",e,t,n);return[rr.G(F("x",e,t,n),D)];case"Split":case"SplitV":var M=F("axis",e,t,n),R=F("numOrSizeSplits",e,t,n),P=F("x",e,t,n);return ar.V(P,R,M);case"ScatterNd":var j=F("indices",e,t,n),L=F("values",e,t,n),B=F("shape",e,t,n);return[or.s(j,L,B)];case"GatherNd":var z=F("x",e,t,n),Z=F("indices",e,t,n);return[ir.d(z,Z)];case"SparseToDense":var V=F("sparseIndices",e,t,n),U=F("outputShape",e,t,n),q=F("sparseValues",e,t,n),W=F("defaultValue",e,t,n);return[jn.e(V,q,U,q.dtype===W.dtype?W:un.p(W,q.dtype))];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}}(e,t,n)}));case"sparse":return S.tidy((function(){return function(e,t,n){switch(e.op){case"SparseFillEmptyRows":var r=sn.rVs.sparseFillEmptyRows(F("indices",e,t,n),F("values",e,t,n),F("denseShape",e,t,n),F("defaultValue",e,t,n));return[r.outputIndices,r.outputValues,r.emptyRowIndicator,r.reverseIndexMap];case"SparseReshape":var a=sn.rVs.sparseReshape(F("inputIndices",e,t,n),F("inputShape",e,t,n),F("newShape",e,t,n));return[a.outputIndices,a.outputShape];case"SparseSegmentMean":return[sn.rVs.sparseSegmentMean(F("data",e,t,n),F("indices",e,t,n),F("segmentIds",e,t,n))];case"SparseSegmentSum":return[sn.rVs.sparseSegmentSum(F("data",e,t,n),F("indices",e,t,n),F("segmentIds",e,t,n))];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}}(e,t,n)}));case"spectral":return S.tidy((function(){return function(e,t,n){switch(e.op){case"FFT":return[sr.k(F("x",e,t,n))];case"IFFT":return[ur.S(F("x",e,t,n))];case"RFFT":return[cr.Q(F("x",e,t,n))];case"IRFFT":return[lr.w(F("x",e,t,n))];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}}(e,t,n)}));case"string":return S.tidy((function(){return function(e,t,n){switch(e.op){case"StringNGrams":var r=sn.Z_8.stringNGrams(F("data",e,t,n),F("dataSplits",e,t,n),F("separator",e,t,n),F("nGramWidths",e,t,n),F("leftPad",e,t,n),F("rightPad",e,t,n),F("padWidth",e,t,n),F("preserveShortSequences",e,t,n));return[r.nGrams,r.nGramsSplits];case"StringSplit":var a=sn.Z_8.stringSplit(F("input",e,t,n),F("delimiter",e,t,n),F("skipEmpty",e,t,n));return[a.indices,a.values,a.shape];case"StringToHashBucketFast":return[sn.Z_8.stringToHashBucketFast(F("input",e,t,n),F("numBuckets",e,t,n))];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}}(e,t,n)}));case"transformation":return S.tidy((function(){return function(e,t,n){switch(e.op){case"Cast":return[un.p(F("x",e,t,n),F("dtype",e,t,n))];case"ExpandDims":var r=F("axis",e,t,n);return[fr.d(F("x",e,t,n),r)];case"Squeeze":var a=F("axis",e,t,n);return[Qn.L(F("x",e,t,n),a)];case"Reshape":return[er.X(F("x",e,t,n),F("shape",e,t,n))];case"MirrorPad":return[dr.V(F("x",e,t,n),F("padding",e,t,n),F("mode",e,t,n))];case"PadV2":case"Pad":return[pr.v(F("x",e,t,n),F("padding",e,t,n),F("constantValue",e,t,n))];case"SpaceToBatchND":var o=F("blockShape",e,t,n),i=F("paddings",e,t,n);return[hr.f(F("x",e,t,n),o,i)];case"BatchToSpaceND":var s=F("blockShape",e,t,n),u=F("crops",e,t,n);return[mr.E(F("x",e,t,n),s,u)];case"DepthToSpace":var c=F("blockSize",e,t,n),l=F("dataFormat",e,t,n).toUpperCase();return[vr.n(F("x",e,t,n),c,l)];case"BroadcastTo":return[gr.U(F("x",e,t,n),F("shape",e,t,n))];case"BroadcastArgs":return[yr.X(F("s0",e,t,n),F("s1",e,t,n))];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}}(e,t,n)}));case"hash_table":return yn(e,t,n,r);case"custom":var a=P(e.op);if(a&&a.customExecutor)return a.customExecutor(new _e(e,t,n));throw TypeError("Custom op ".concat(e.op," is not registered."));default:throw TypeError("Unknown op '".concat(e.op,"'. File an issue at ")+"https://github.com/tensorflow/tfjs/issues so we can add it, or register a custom execution with tf.registerOp()")}}(e,t,n);return S.util.isPromise(a)?a.then((function(e){return[].concat(e)})):[].concat(a)}var xr=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};(0,C.Z)(this,e),this.weightMap=t,this.tensorArrayMap=n,this.tensorListMap=r,this.functionMap=a,this.rootContext={id:0,frameName:"",iterationId:0},this.contexts=[this.rootContext],this.lastId=0,this.generateCurrentContextIds()}return(0,T.Z)(e,[{key:"newFrame",value:function(e,t){return{id:e,frameName:t,iterationId:0}}},{key:"currentContext",get:function(){return this.contexts},set:function(e){this.contexts!==e&&(this.contexts=e,this.generateCurrentContextIds())}},{key:"currentContextId",get:function(){return this._currentContextIds[0]}},{key:"currentContextIds",get:function(){return this._currentContextIds}},{key:"generateCurrentContextIds",value:function(){for(var e=[],t=0;t<this.contexts.length-1;t++){var n=this.contexts.slice(0,this.contexts.length-t);e.push(this.contextIdforContexts(n))}e.push(""),this._currentContextIds=e}},{key:"contextIdforContexts",value:function(e){return e?e.map((function(e){return 0===e.id&&0===e.iterationId?"":"".concat(e.frameName,"-").concat(e.iterationId)})).join("/"):""}},{key:"enterFrame",value:function(e){this.contexts&&(this.lastId++,this.contexts=this.contexts.slice(),this.contexts.push(this.newFrame(this.lastId,e)),this._currentContextIds.unshift(this.contextIdforContexts(this.contexts)))}},{key:"exitFrame",value:function(){if(!(this.contexts&&this.contexts.length>1))throw new Error("Cannot exit frame, the context is empty");this.contexts=this.contexts.slice(),this.contexts.splice(-1),this.currentContextIds.shift()}},{key:"nextIteration",value:function(){if(!(this.contexts&&this.contexts.length>0))throw new Error("Cannot increase frame iteration, the context is empty");this.contexts=this.contexts.slice(),this.lastId++;var e=Object.assign({},this.contexts[this.contexts.length-1]);e.iterationId+=1,e.id=this.lastId,this.contexts.splice(-1,1,e),this._currentContextIds.splice(0,1,this.contextIdforContexts(this.contexts))}},{key:"getWeight",value:function(e){return this.weightMap[e]}},{key:"addTensorArray",value:function(e){this.tensorArrayMap[e.id]=e}},{key:"getTensorArray",value:function(e){return this.tensorArrayMap[e]}},{key:"addTensorList",value:function(e){this.tensorListMap[e.id]=e}},{key:"getTensorList",value:function(e){return this.tensorListMap[e]}},{key:"dispose",value:function(e){for(var t in this.tensorArrayMap)this.tensorArrayMap[t].clearAndClose(e);for(var n in this.tensorListMap)this.tensorListMap[n].clearAndClose(e)}}]),e}();function wr(e,t,n,r){var a=new Set,o=[],i=null,s=null,u=new Set,c=Object.keys(e).map((function(e){return Z(e)[0]})),l=[];null!=r&&(l=r.map((function(e){return Z(e.name)[0]})));for(var f=(0,D.Z)(t);f.length>0;){var d=f.pop();(Nr(d)||Er(d)||Cr(d))&&null==i&&(s=(i=d).children.map((function(e){return e.name})).filter((function(e){return a.has(e)}))),a.add(d.name),null==n[d.name]&&(-1===c.indexOf(d.name)&&-1===l.indexOf(d.name)&&(0!==d.inputs.length?d.inputs.forEach((function(e){u.has(e.name)||(u.add(e.name),f.push(e))})):o.push(d.name)))}return{inputs:e,outputs:t,usedNodes:a,missingInputs:o,dynamicNode:i,syncInputs:s}}var kr=["Switch","Merge","Enter","Exit","NextIteration","StatelessIf","StatelessWhile","if","While"],Sr=["NonMaxSuppressionV2","NonMaxSuppressionV3","NonMaxSuppressionV5","Where"],_r=["HashTable","HashTableV2","LookupTableImport","LookupTableImportV2","LookupTableFind","LookupTableFindV2","LookupTableSize","LookupTableSizeV2"];function Nr(e){return kr.indexOf(e.op)>=0}function Er(e){return Sr.indexOf(e.op)>=0}function Cr(e){return _r.indexOf(e.op)>=0}var Tr=function(){function e(t,n){var r=this;(0,C.Z)(this,e),this.graph=t,this.parent=n,this.compiledMap=new Map,this._weightMap={},this.SEPERATOR=",",this._functions={},this._functionExecutorMap={},this.intermediateTensors={},this.keepTensorForDebug=!1,this._outputs=t.outputs,this._inputs=t.inputs,this._initNodes=t.initNodes,this._signature=t.signature,this._functions=t.functions,null!=t.functions&&Object.keys(t.functions).forEach((function(n){r._functionExecutorMap[n]=new e(t.functions[n],r)}))}return(0,T.Z)(e,[{key:"weightIds",get:function(){return this.parent?this.parent.weightIds:this._weightIds}},{key:"functionExecutorMap",get:function(){return this.parent?this.parent.functionExecutorMap:this._functionExecutorMap}},{key:"weightMap",get:function(){return this.parent?this.parent.weightMap:this._weightMap},set:function(e){var t,n=Object.keys(e).map((function(t){return e[t].map((function(e){return e.id}))}));this._weightIds=(t=[]).concat.apply(t,(0,D.Z)(n)),this._weightMap=e}},{key:"resourceManager",set:function(e){this._resourceManager=e}},{key:"inputs",get:function(){return this._inputs.map((function(e){return{name:e.name,shape:e.attrParams.shape?e.attrParams.shape.value:void 0,dtype:e.attrParams.dtype?e.attrParams.dtype.value:void 0}}))}},{key:"outputs",get:function(){return this._outputs.map((function(e){return{name:e.name,shape:e.attrParams.shape?e.attrParams.shape.value:void 0,dtype:e.attrParams.dtype?e.attrParams.dtype.value:void 0}}))}},{key:"inputNodes",get:function(){return this._inputs.map((function(e){return e.signatureKey||e.name}))}},{key:"outputNodes",get:function(){return this._outputs.map((function(e){var t=e.signatureKey||e.name;return e.defaultOutput?"".concat(t,":").concat(e.defaultOutput):t}))}},{key:"functions",get:function(){var e=this;return Object.keys(this._functions).reduce((function(t,n){return t[n]=e._functions[n].signature,t}),{})}},{key:"getCompilationKey",value:function(e,t){var n=e.map((function(e){return e.name})).sort(),r=t.map((function(e){return e.name})).sort();return n.join(this.SEPERATOR)+"--"+r.join(this.SEPERATOR)}},{key:"compile",value:function(e,t){var n=wr(e,t,this.weightMap,this._initNodes),r=n.missingInputs,a=n.dynamicNode,o=n.syncInputs;if(null!=a)throw new Error("This execution contains the node '".concat(a.name,"', which has ")+"the dynamic op '".concat(a.op,"'. Please use ")+"model.executeAsync() instead. Alternatively, to avoid the "+"dynamic ops, specify the inputs [".concat(o,"]"));if(r.length>0){var i=t.map((function(e){return e.name})),s=Object.keys(e);throw new Error("Cannot compute the outputs [".concat(i,"] from the provided inputs ")+"[".concat(s,"]. Missing the following inputs: [").concat(r,"]"))}return function(e,t,n){var r=n.usedNodes,a=n.inputs,o=[],i=Object.keys(a).map((function(e){return Z(e)[0]})).map((function(t){return e.nodes[t]})),s=e.initNodes;i.forEach((function(e){r.has(e.name)&&o.push(e)})),e.weights.forEach((function(e){r.has(e.name)&&o.push(e)})),null!=s&&s.forEach((function(e){r.has(e.name)&&o.push(e)}));for(var u=new Set,c=[];o.length>0;){var l=o.pop();u.add(l.name),t[l.name]||c.push(l),l.children.forEach((function(e){!u.has(e.name)&&r.has(e.name)&&e.inputs.every((function(e){return u.has(e.name)}))&&o.push(e)}))}return c}(this.graph,this.weightMap,n)}},{key:"execute",value:function(e,t){var n=this;e=this.mapInputs(e);var r=Object.keys(e).sort();this.checkInputs(e),this.checkInputShapeAndType(e),t=this.mapOutputs(t),this.checkOutputs(t);var a=r.map((function(e){return n.graph.nodes[Z(e)[0]]})),o=t.map((function(e){return Z(e)[0]})),i=o.map((function(e){return n.graph.nodes[e]}));this.resetIntermediateTensors(),0===i.length&&(i=this._outputs);var s=this.getCompilationKey(a,i),u=this.compiledMap.get(s);null==u&&(u=this.compile(e,i),this.compiledMap.set(s,u));var c={},l={};return(0,S.tidy)((function(){var r=new xr(n.weightMap,c,l,n.functionExecutorMap),a=Object.assign({},n.weightMap);Object.keys(e).forEach((function(t){var n=Z(t),r=(0,A.Z)(n,2),o=r[0],i=[];i[r[1]]=e[t],a[o]=i}));for(var i=n.getFrozenTensorIds(a),s={},f=0;f<u.length;f++){var d=u[f];if(!a[d.name]){var p=br(d,a,r,n._resourceManager);if(S.util.isPromise(p))throw new Error("The execution of the op '".concat(d.op,"' returned a promise. ")+"Please use model.executeAsync() instead.");a[d.name]=p,n.checkTensorForDisposal(d.name,d,a,r,i,o,s)}}return null==n.parent&&r.dispose(i),t.map((function(e){return L(e,a,r)}))}))}},{key:"getFrozenTensorIds",value:function(e){var t=[].concat.apply([],Object.keys(e).map((function(t){return e[t]})).map((function(e){return e.map((function(e){return e.id}))})));return new Set(t)}},{key:"checkTensorForDisposal",value:function(e,t,n,r,a,o,i){var s=this;"control"!==t.category&&-1===o.indexOf(e)&&(n[e].forEach((function(e){null!=e&&(i[e.id]=(i[e.id]||0)+t.children.length)})),t.inputs.forEach((function(e){if("control"!==e.category){var o=function(e,t,n){return t[z(e,n.currentContextId)]}(e.name,n,r);null!=o&&o.forEach((function(e){if(e&&!e.kept&&!a.has(e.id)){var n=i[e.id];if(1===n){if(s.keepTensorForDebug){var o=B(t.name,r),u=(0,A.Z)(o,2),c=u[0],l=u[1];s.intermediateTensors[c]||(s.intermediateTensors[c]=[]),s.intermediateTensors[c][l]=e}else e.dispose();delete i[e.id]}else null!=n&&i[e.id]--}}))}})))}},{key:"executeAsync",value:function(){var e=(0,E.Z)(O().mark((function e(t,n){return O().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._executeAsync(t,n));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"disposeIntermediateTensors",value:function(){var e=this;this.intermediateTensors&&(Object.keys(this.intermediateTensors).forEach((function(t){return e.intermediateTensors[t].forEach((function(e){return e.dispose()}))})),this.disposeTensorsMap())}},{key:"disposeTensorsMap",value:function(){var e=this;this.tensorsMap&&Object.keys(this.tensorsMap).forEach((function(t){e.tensorsMap[t].forEach((function(t){!t||t.kept||t.isDisposed||e.keepIds.has(t.id)||t.dispose()}))}))}},{key:"getIntermediateTensors",value:function(){return this.tensorsMap}},{key:"resetIntermediateTensors",value:function(){for(var e in this.intermediateTensors)this.intermediateTensors[e].forEach((function(e){return e.dispose()})),delete this.intermediateTensors[e]}},{key:"_executeAsync",value:function(){var e=(0,E.Z)(O().mark((function e(t,n){var r,a,o,i,s,u,c,l=this,f=arguments;return O().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=f.length>2&&void 0!==f[2]&&f[2],a=f.length>3&&void 0!==f[3]?f[3]:{},o=f.length>4&&void 0!==f[4]?f[4]:{},r||(t=this.mapInputs(t),this.checkInputs(t),this.checkInputShapeAndType(t),n=this.mapOutputs(n),this.checkOutputs(n));try{this.keepTensorForDebug=(0,S.env)().getBool("KEEP_INTERMEDIATE_TENSORS")}catch(d){console.warn(d.message)}return this.resetIntermediateTensors(),i=new xr(this.weightMap,a,o,this.functionExecutorMap),e.next=9,this.executeWithControlFlow(t,i,n,r);case 9:return this.tensorsMap=e.sent,s=n.map((function(e){return L(e,l.tensorsMap,i)})),u=s.map((function(e){return e.id})),c=Object.keys(t).map((function(e){return t[e].id})),this.keepIds=new Set([].concat((0,D.Z)(u),(0,D.Z)(c),(0,D.Z)(this.weightIds))),this.keepTensorForDebug||this.disposeTensorsMap(),null==this.parent&&i.dispose(this.keepIds),e.abrupt("return",s);case 17:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"executeFunctionAsync",value:function(){var e=(0,E.Z)(O().mark((function e(t,n,r){var a,o=this;return O().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.reduce((function(e,t,n){return e[o.inputs[n].name]=t,e}),{}),e.abrupt("return",this._executeAsync(a,this.outputNodes,!0,n,r));case 2:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"executeWithControlFlow",value:function(){var e=(0,E.Z)(O().mark((function e(t,n,r,a){var o,i,s,u,c,l,f,d,p,h,m,v,g,y,b,x,w,k=this;return O().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o=Object.keys(t),i=o.map((function(e){return k.graph.nodes[Z(e)[0]]})),s=r.map((function(e){return Z(e)[0]})),0===(u=s.map((function(e){return k.graph.nodes[e]}))).length&&(u=this._outputs),c=wr(t,u,this.weightMap,this._initNodes),l=c.usedNodes,f=c.missingInputs,d=c.dynamicNode,p=c.syncInputs,h=[].concat((0,D.Z)(i),(0,D.Z)(this.graph.weights),(0,D.Z)(this._initNodes||[])).map((function(e){return{node:e,contexts:n.currentContext}})),m=Object.assign({},this.weightMap),Object.keys(t).forEach((function(e){var n=Z(e),r=(0,A.Z)(n,2),a=r[0],o=[];o[r[1]]=t[e],m[a]=o})),v={},g=this.getFrozenTensorIds(m),y={};case 12:if(!(h.length>0)){e.next=18;break}return b=this.processStack(i,h,n,m,y,g,s,v,l),e.next=16,Promise.all(b);case 16:e.next=12;break;case 18:if(null!=d||a||console.warn("This model execution did not contain any nodes with control flow or dynamic output shapes. You can use model.execute() instead."),!((x=u.filter((function(e){return!Nr(e)&&!L(e.name,m,n)})).map((function(e){return e.name}))).length>0)){e.next=24;break}throw w="",null!=d&&(w="Alternatively, to avoid the dynamic ops, use model.execute() "+"and specify the inputs [".concat(p,"]")),new Error("Cannot compute the outputs [".concat(x,"] from the provided ")+"inputs [".concat(o,"]. Consider providing the following inputs: ")+"[".concat(f,"]. ").concat(w));case 24:return e.abrupt("return",m);case 25:case"end":return e.stop()}}),e,this)})));return function(t,n,r,a){return e.apply(this,arguments)}}()},{key:"processStack",value:function(e,t,n,r,a,o,i,s,u){for(var c=this,l=[],f=function(){var e=t.pop();n.currentContext=e.contexts;var f="";if("Enter"===e.node.op&&F("isConstant",e.node,r,n)){var d=B(e.node.name,n),p=(0,A.Z)(d,1);f=p[0]}if(null==r[e.node.name]){var h=br(e.node,r,n,c._resourceManager);if(!f){var m=B(e.node.name,n),v=(0,A.Z)(m,1);f=v[0]}var g=n.currentContext;S.util.isPromise(h)?l.push(h.then((function(l){return r[f]=l,n.currentContext=g,c.checkTensorForDisposal(f,e.node,r,n,o,i,s),c.processChildNodes(e.node,t,n,r,a,u),l}))):(r[f]=h,c.checkTensorForDisposal(f,e.node,r,n,o,i,s),c.processChildNodes(e.node,t,n,r,a,u))}else c.processChildNodes(e.node,t,n,r,a,u)};t.length>0;)f();return l}},{key:"processChildNodes",value:function(e,t,n,r,a,o){e.children.forEach((function(e){var i=B(e.name,n),s=(0,A.Z)(i,1)[0];!a[s]&&o.has(e.name)&&("Merge"===e.op?e.inputNames.some((function(e){return!!L(e,r,n)}))&&(a[s]=!0,t.push({contexts:n.currentContext,node:e})):e.inputNames.every((function(e){return!!L(e,r,n)}))&&(a[s]=!0,t.push({contexts:n.currentContext,node:e})))}))}},{key:"dispose",value:function(){var e=this;Object.keys(this.weightMap).forEach((function(t){return e.weightMap[t].forEach((function(e){return e.dispose()}))}))}},{key:"checkInputShapeAndType",value:function(e){var t=this;Object.keys(e).forEach((function(n){var r=e[n],a=Z(n),o=(0,A.Z)(a,1)[0],i=t.graph.nodes[o];if(i.attrParams.shape&&i.attrParams.shape.value){var s=i.attrParams.shape.value,u=s.length===r.shape.length&&r.shape.every((function(e,t){return-1===s[t]||s[t]===e}));S.util.assert(u,(function(){return"The shape of dict['".concat(i.name,"'] provided in ")+"model.execute(dict) must be [".concat(s,"], but was ")+"[".concat(r.shape,"]")}))}i.attrParams.dtype&&i.attrParams.dtype.value&&S.util.assert(r.dtype===i.attrParams.dtype.value,(function(){return"The dtype of dict['".concat(i.name,"'] provided in ")+"model.execute(dict) must be "+"".concat(i.attrParams.dtype.value,", but was ").concat(r.dtype)}))}))}},{key:"mapInputs",value:function(e){var t={};for(var n in e){if(null!=this._signature&&null!=this._signature.inputs&&null!=this._signature.inputs[n])t[this._signature.inputs[n].name]=e[n];else t[n]=e[n]}return t}},{key:"checkInputs",value:function(e){var t=this,n=Object.keys(e).filter((function(e){var n=Z(e),r=(0,A.Z)(n,1)[0];return null==t.graph.nodes[r]}));if(n.length>0)throw new Error("The dict provided in model.execute(dict) has "+"keys: [".concat(n,"] that are not part of graph"))}},{key:"mapOutputs",value:function(e){var t=this;return e.map((function(e){return null!=t._signature&&null!=t._signature.outputs&&null!=t._signature.outputs[e]?t._signature.outputs[e].name:e}),{})}},{key:"checkOutputs",value:function(e){var t=this;e.forEach((function(e){var n=Z(e),r=(0,A.Z)(n,1)[0];if(!t.graph.nodes[r])throw new Error("The output '".concat(e,"' is not found in the graph"))}))}}]),e}(),Ir=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,C.Z)(this,e),this.hashTableNameToHandle=t,this.hashTableMap=n}return(0,T.Z)(e,[{key:"addHashTable",value:function(e,t){this.hashTableNameToHandle[e]=t.handle,this.hashTableMap[t.id]=t}},{key:"getHashTableHandleByName",value:function(e){return this.hashTableNameToHandle[e]}},{key:"getHashTableById",value:function(e){return this.hashTableMap[e]}},{key:"dispose",value:function(){for(var e in this.hashTableMap)this.hashTableMap[e].clearAndClose(),delete this.hashTableMap[e];for(var t in this.hashTableNameToHandle)this.hashTableNameToHandle[t].dispose(),delete this.hashTableNameToHandle[t]}}]),e}(),Or="?tfjs-format=file",Ar="model.json",Dr=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,C.Z)(this,e),this.modelUrl=t,this.loadOptions=n,this.version="n/a",null==n&&(this.loadOptions={}),this.resourceManager=new Ir}return(0,T.Z)(e,[{key:"modelVersion",get:function(){return this.version}},{key:"inputNodes",get:function(){return this.executor.inputNodes}},{key:"outputNodes",get:function(){return this.executor.outputNodes}},{key:"inputs",get:function(){return this.executor.inputs}},{key:"outputs",get:function(){return this.executor.outputs}},{key:"weights",get:function(){return this.executor.weightMap}},{key:"metadata",get:function(){return this.artifacts.userDefinedMetadata}},{key:"modelSignature",get:function(){return this.signature}},{key:"findIOHandler",value:function(){var e=this.modelUrl;if(null!=e.load)this.handler=e;else if(null!=this.loadOptions.requestInit)this.handler=S.io.browserHTTPRequest(e,this.loadOptions);else{var t=S.io.getLoadHandlers(e,this.loadOptions);if(0===t.length)t.push(S.io.browserHTTPRequest(e,this.loadOptions));else if(t.length>1)throw new Error("Found more than one (".concat(t.length,") load handlers for ")+"URL '".concat([e],"'"));this.handler=t[0]}}},{key:"load",value:function(){var e=(0,E.Z)(O().mark((function e(){var t;return O().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.findIOHandler(),null!=this.handler.load){e.next=3;break}throw new Error("Cannot proceed with model loading because the IOHandler provided does not have the `load` method implemented.");case 3:return e.next=5,this.handler.load();case 5:return t=e.sent,e.abrupt("return",this.loadSync(t));case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"loadSync",value:function(e){this.artifacts=e;var t,n=this.artifacts.modelTopology;t=null!=this.artifacts.userDefinedMetadata&&null!=this.artifacts.userDefinedMetadata.signature?this.artifacts.userDefinedMetadata.signature:this.artifacts.signature,this.signature=t,this.version="".concat(n.versions.producer,".").concat(n.versions.minConsumer);var r=S.io.decodeWeights(this.artifacts.weightData,this.artifacts.weightSpecs);if(this.executor=new Tr(ce.Instance.transformGraph(n,this.signature)),this.executor.weightMap=this.convertTensorMapToTensorsMap(r),this.executor.resourceManager=this.resourceManager,null!=e.modelInitializer&&null!=e.modelInitializer.node){var a=ce.Instance.transformGraph(e.modelInitializer);this.initializer=new Tr(a),this.initializer.weightMap=this.executor.weightMap,this.initializer.resourceManager=this.resourceManager,this.initializer.executeAsync({},[])}return!0}},{key:"save",value:function(){var e=(0,E.Z)(O().mark((function e(t,n){var r;return O().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("string"!==typeof t){e.next=9;break}if(0!==(r=S.io.getSaveHandlers(t)).length){e.next=6;break}throw new Error("Cannot find any save handlers for URL '".concat(t,"'"));case 6:if(!(r.length>1)){e.next=8;break}throw new Error("Found more than one (".concat(r.length,") save handlers for ")+"URL '".concat(t,"'"));case 8:t=r[0];case 9:if(null!=t.save){e.next=11;break}throw new Error("GraphModel.save() cannot proceed because the IOHandler provided does not have the `save` attribute defined.");case 11:return e.abrupt("return",t.save(this.artifacts));case 12:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"predict",value:function(e,t){return this.execute(e,this.outputNodes)}},{key:"normalizeInputs",value:function(e){if(!(e instanceof S.Tensor)&&!Array.isArray(e))return e;if((e=Array.isArray(e)?e:[e]).length!==this.inputNodes.length)throw new Error("Input tensor count mismatch,"+"the graph model has ".concat(this.inputNodes.length," placeholders, ")+"while there are ".concat(e.length," input tensors."));return this.inputNodes.reduce((function(t,n,r){return t[n]=e[r],t}),{})}},{key:"normalizeOutputs",value:function(e){return e=e||this.outputNodes,Array.isArray(e)?e:[e]}},{key:"execute",value:function(e,t){e=this.normalizeInputs(e),t=this.normalizeOutputs(t);var n=this.executor.execute(e,t);return n.length>1?n:n[0]}},{key:"executeAsync",value:function(){var e=(0,E.Z)(O().mark((function e(t,n){var r;return O().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.normalizeInputs(t),n=this.normalizeOutputs(n),e.next=4,this.executor.executeAsync(t,n);case 4:return r=e.sent,e.abrupt("return",r.length>1?r:r[0]);case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getIntermediateTensors",value:function(){return this.executor.getIntermediateTensors()}},{key:"disposeIntermediateTensors",value:function(){this.executor.disposeIntermediateTensors()}},{key:"convertTensorMapToTensorsMap",value:function(e){return Object.keys(e).reduce((function(t,n){return t[n]=[e[n]],t}),{})}},{key:"dispose",value:function(){this.executor.dispose(),this.initializer&&this.initializer.dispose(),this.resourceManager.dispose()}}]),e}();function Mr(e){return Rr.apply(this,arguments)}function Rr(){return Rr=(0,E.Z)(O().mark((function e(t){var n,r,a=arguments;return O().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=a.length>1&&void 0!==a[1]?a[1]:{},null!=t){e.next=3;break}throw new Error("modelUrl in loadGraphModel() cannot be null. Please provide a url or an IOHandler that loads the model");case 3:return null==n&&(n={}),n.fromTFHub&&null==t.load&&(t.endsWith("/")||(t+="/"),t="".concat(t).concat(Ar).concat(Or)),r=new Dr(t,n),e.next=8,r.load();case 8:return e.abrupt("return",r);case 9:case"end":return e.stop()}}),e)}))),Rr.apply(this,arguments)}var Pr="3.13.0"},4679:function(e,t,n){"use strict";n.d(t,{JL:function(){return o},Zu:function(){return i}});var r=n(5671),a=n(3144),o=function(){function e(t,n){(0,r.Z)(this,e),this.backend=t,this.dataMover=n,this.data=new WeakMap,this.dataIdsCount=0}return(0,a.Z)(e,[{key:"get",value:function(e){return this.data.has(e)||this.dataMover.moveData(this.backend,e),this.data.get(e)}},{key:"set",value:function(e,t){this.dataIdsCount++,this.data.set(e,t)}},{key:"has",value:function(e){return this.data.has(e)}},{key:"delete",value:function(e){return this.dataIdsCount--,this.data.delete(e)}},{key:"numDataIds",value:function(){return this.dataIdsCount}}]),e}(),i=function(){function e(){(0,r.Z)(this,e)}return(0,a.Z)(e,[{key:"refCount",value:function(e){return s("refCount")}},{key:"incRef",value:function(e){return s("incRef")}},{key:"timerAvailable",value:function(){return!0}},{key:"time",value:function(e){return s("time")}},{key:"read",value:function(e){return s("read")}},{key:"readSync",value:function(e){return s("readSync")}},{key:"readToGPU",value:function(e,t){return s("readToGPU")}},{key:"numDataIds",value:function(){return s("numDataIds")}},{key:"disposeData",value:function(e,t){return s("disposeData")}},{key:"write",value:function(e,t,n){return s("write")}},{key:"move",value:function(e,t,n,r,a){return s("move")}},{key:"memory",value:function(){return s("memory")}},{key:"floatPrecision",value:function(){return s("floatPrecision")}},{key:"epsilon",value:function(){return 32===this.floatPrecision()?1e-7:1e-4}},{key:"dispose",value:function(){return s("dispose")}}]),e}();function s(e){throw new Error("'".concat(e,"' not yet implemented or not found in the registry. ")+"This kernel may not be supported by the tfjs backend you have chosen")}},745:function(e,t,n){"use strict";n.d(t,{GP:function(){return i},qP:function(){return s},pA:function(){return u}});var r=n(3433);function a(e,t,n){var r=function(e,t,n){return function(e,t,n){var r=0,a=e.length,o=0,i=!1;for(;r<a;){var s=n(t,e[o=r+(a-r>>>1)]);s>0?r=o+1:(a=o,i=!s)}return i?r:-r-1}(e,t,n||o)}(e,t,n),a=r<0?-(r+1):r;e.splice(a,0,t)}function o(e,t){return e>t?1:e<t?-1:0}function i(e,t,n,r,a){return c(e,t,n,r,a,0)}function s(e,t,n,r,a,o){return c(e,t,n,r,a,0,!1,o,!0)}function u(e,t,n,r,a,o){return c(e,t,n,r,a,o,!0)}function c(e,t,n,o,i,s){for(var u=arguments.length>6&&void 0!==arguments[6]&&arguments[6],c=arguments.length>7&&void 0!==arguments[7]&&arguments[7],p=arguments.length>8&&void 0!==arguments[8]&&arguments[8],h=[],m=0;m<t.length;m++)t[m]>i&&h.push({score:t[m],boxIndex:m,suppressBeginIndex:0});h.sort(d);for(var v=s>0?-.5/s:0,g=[],y=[];g.length<n&&h.length>0;){var b=h.pop(),x=b.score,w=b.boxIndex,k=b.suppressBeginIndex;if(x<i)break;for(var S=!1,_=g.length-1;_>=k;--_){var N=l(e,w,g[_]);if(N>=o){S=!0;break}if(b.score=b.score*f(o,v,N),b.score<=i)break}b.suppressBeginIndex=g.length,S||(b.score===x?(g.push(w),y.push(b.score)):b.score>i&&a(h,b,d))}var E=g.length,C=n-E;c&&C>0&&(g.push.apply(g,(0,r.Z)(new Array(C).fill(0))),y.push.apply(y,(0,r.Z)(new Array(C).fill(0))));var T={selectedIndices:g};return u&&(T.selectedScores=y),p&&(T.validOutputs=E),T}function l(e,t,n){var r=e.subarray(4*t,4*t+4),a=e.subarray(4*n,4*n+4),o=Math.min(r[0],r[2]),i=Math.min(r[1],r[3]),s=Math.max(r[0],r[2]),u=Math.max(r[1],r[3]),c=Math.min(a[0],a[2]),l=Math.min(a[1],a[3]),f=Math.max(a[0],a[2]),d=Math.max(a[1],a[3]),p=(s-o)*(u-i),h=(f-c)*(d-l);if(p<=0||h<=0)return 0;var m=Math.max(o,c),v=Math.max(i,l),g=Math.min(s,f),y=Math.min(u,d),b=Math.max(g-m,0)*Math.max(y-v,0);return b/(p+h-b)}function f(e,t,n){var r=Math.exp(t*n*n);return n<=e?r:0}function d(e,t){return e.score-t.score||e.score===t.score&&t.boxIndex-e.boxIndex}},4189:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var r=n(7039);function a(e,t){for(var n=[],a=0;a<t.length;a++)t[a]&&n.push(a);for(var o=(0,r.f)(e,"int32"),i=(0,r.f)([n.length,e.length],"int32"),s=0;s<n.length;s++){var u=o.indexToLoc(n[s]),c=s*e.length;i.values.set(u,c)}return i.toTensor()}},318:function(e,t,n){"use strict";n.d(t,{BV:function(){return I},wv:function(){return T}});var r=n(7762),a=n(3433),o=n(5861),i=n(5671),s=n(3144),u=n(7757),c=n.n(u),l=n(4679),f=n(5050),d=n(6581),p=n(2145),h=n(8864),m=n(7269),v=n(115),g=n(6147),y=function(){function e(t,n){(0,i.Z)(this,e),this.backendTimer=t,this.logger=n,null==n&&(this.logger=new b)}return(0,s.Z)(e,[{key:"profileKernel",value:function(e,t,n){var a,o,i=function(){a=n()},s=v.now();if(this.backendTimer.timerAvailable())o=this.backendTimer.time(i);else{i();var u,c=(0,r.Z)(a);try{for(c.s();!(u=c.n()).done;){u.value.dataSync()}}catch(p){c.e(p)}finally{c.f()}o=Promise.resolve({kernelMs:v.now()-s})}if((0,f.OB)().getBool("CHECK_COMPUTATION_FOR_ERRORS"))for(var l=function(t){var n=a[t];n.data().then((function(t){!function(e,t,n){if("float32"!==t)return!1;for(var r=0;r<e.length;r++){var a=e[r];if(isNaN(a)||!isFinite(a))return console.warn("Found ".concat(a," in the result of '").concat(n,"'")),!0}}(t,n.dtype,e)}))},d=0;d<a.length;d++)l(d);return{kernelName:e,outputs:a,inputs:t,timeMs:o.then((function(e){return e.kernelMs})),extraInfo:o.then((function(e){return null!=e.getExtraProfileInfo?e.getExtraProfileInfo():""}))}}},{key:"logKernelProfile",value:function(e){var t=this,n=e.kernelName,r=e.outputs,a=e.timeMs,o=e.inputs,i=e.extraInfo;r.forEach((function(e){Promise.all([e.data(),a,i]).then((function(r){t.logger.logKernelProfile(n,e,r[0],r[1],o,r[2])}))}))}}]),e}();var b=function(){function e(){(0,i.Z)(this,e)}return(0,s.Z)(e,[{key:"logKernelProfile",value:function(e,t,n,r,a,o){var i="number"===typeof r?g.oj("".concat(r,"ms"),9):r.error,s=g.oj(e,25),u=t.rank,c=t.size,l=g.oj(t.shape.toString(),14),f="";for(var d in a){var p=a[d];if(null!=p){var h=p.shape||t.shape,m=h.length;f+="".concat(d,": ").concat(m,"D ").concat(m>0?h:""," ")}}console.log("%c".concat(s,"\t%c").concat(i,"\t%c").concat(u,"D ").concat(l,"\t%c").concat(c,"\t%c").concat(f,"\t%c").concat(o),"font-weight:bold","color:red","color:blue","color: orange","color: green","color: steelblue")}}]),e}();function x(e,t,n){for(var r={},a={},o=0;o<t.length;o++)r[t[o].id]=!0;for(var i=0;i<e.length;i++){var s=e[i],u=s.inputs;for(var c in u){for(var l=u[c],f=!1,d=0;d<t.length;d++)if(r[l.id]){s.outputs.forEach((function(e){return r[e.id]=!0})),f=!0,a[s.id]=!0;break}if(f)break}}var p={};p[n.id]=!0;for(var h={},m=e.length-1;m>=0;m--)for(var v=e[m],g=v.inputs,y=0;y<v.outputs.length;y++)if(p[v.outputs[y].id]){for(var b in g)p[g[b].id]=!0,h[v.id]=!0;break}for(var x=[],w=0;w<e.length;w++){var k=e[w];if(a[k.id]&&h[k.id]){var S={};for(var _ in k.inputs){var N=k.inputs[_];r[N.id]&&(S[_]=N)}var E=Object.assign({},k);E.inputs=S,E.outputs=k.outputs,x.push(E)}}return x}function w(e,t,n,r){for(var a=function(a){var o=t[a],i=[];if(o.outputs.forEach((function(t){var n=e[t.id];null!=n?i.push(n):i.push(null)})),null==o.gradient)throw new Error("Cannot compute gradient: gradient function not found "+"for ".concat(o.kernelName,"."));var s=o.gradient(i),u=function(t){if(!(t in s))throw new Error("Cannot backprop through input ".concat(t,". ")+"Available gradients found: ".concat(Object.keys(s),"."));var a=n((function(){return s[t]()}));if("float32"!==a.dtype)throw new Error("Error in gradient for op ".concat(o.kernelName,". The gradient of input ")+"".concat(t," must have 'float32' dtype, but has '").concat(a.dtype,"'"));var i=o.inputs[t];if(!g.cO(a.shape,i.shape))throw new Error("Error in gradient for op ".concat(o.kernelName,". The gradient of input ")+"'".concat(t,"' has shape '").concat(a.shape,"', which does not match ")+"the shape of the input '".concat(i.shape,"'"));if(null==e[i.id])e[i.id]=a;else{var u=e[i.id];e[i.id]=r(u,a),u.dispose()}};for(var c in o.inputs)u(c)},o=t.length-1;o>=0;o--)a(o)}var k=n(4376),S=n(9064);function _(e){return null!=e.kernelName}var N=function(){function e(){(0,i.Z)(this,e),this.registeredVariables={},this.nextTapeNodeId=0,this.numBytes=0,this.numTensors=0,this.numStringTensors=0,this.numDataBuffers=0,this.gradientDepth=0,this.kernelDepth=0,this.scopeStack=[],this.numDataMovesStack=[],this.nextScopeId=0,this.tensorInfo=new WeakMap,this.profiling=!1,this.activeProfile={newBytes:0,newTensors:0,peakBytes:0,kernels:[],result:null,get kernelNames(){return Array.from(new Set(this.kernels.map((function(e){return e.name}))))}}}return(0,s.Z)(e,[{key:"dispose",value:function(){for(var e in this.registeredVariables)this.registeredVariables[e].dispose()}}]),e}(),E=function(){function e(t){(0,i.Z)(this,e),this.ENV=t,this.registry={},this.registryFactory={},this.pendingBackendInitId=0,this.state=new N}return(0,s.Z)(e,[{key:"ready",value:function(){var e=(0,o.Z)(c().mark((function e(){var t,n,r;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==this.pendingBackendInit){e.next=2;break}return e.abrupt("return",this.pendingBackendInit.then((function(){})));case 2:if(null==this.backendInstance){e.next=4;break}return e.abrupt("return");case 4:t=this.getSortedBackends(),n=0;case 6:if(!(n<t.length)){e.next=18;break}return r=t[n],e.next=10,this.initializeBackend(r).success;case 10:if(!e.sent){e.next=15;break}return e.next=14,this.setBackend(r);case 14:return e.abrupt("return");case 15:n++,e.next=6;break;case 18:throw new Error("Could not initialize any backends, all backend initializations failed.");case 19:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"backend",get:function(){if(null!=this.pendingBackendInit)throw new Error("Backend '".concat(this.backendName,"' has not yet been initialized. Make ")+"sure to await tf.ready() or await tf.setBackend() before calling other methods");if(null==this.backendInstance){var e=this.initializeBackendsAndReturnBest(),t=e.name;if(e.asyncInit)throw new Error("The highest priority backend '".concat(t,"' has not yet been ")+"initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods");this.setBackend(t)}return this.backendInstance}},{key:"backendNames",value:function(){return Object.keys(this.registryFactory)}},{key:"findBackend",value:function(e){if(!(e in this.registry)){if(!(e in this.registryFactory))return null;if(this.initializeBackend(e).asyncInit)return null}return this.registry[e]}},{key:"findBackendFactory",value:function(e){return e in this.registryFactory?this.registryFactory[e].factory:null}},{key:"registerBackend",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return e in this.registryFactory?(m.Z("".concat(e," backend was already registered. ")+"Reusing existing backend factory."),!1):(this.registryFactory[e]={factory:t,priority:n},!0)}},{key:"setBackend",value:function(){var e=(0,o.Z)(c().mark((function e(t){var n,r;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=this.registryFactory[t]){e.next=2;break}throw new Error("Backend name '".concat(t,"' not found in registry"));case 2:if(this.backendName=t,null!=this.registry[t]){e.next=16;break}if(this.backendInstance=null,n=this.initializeBackend(t),r=n.success,!n.asyncInit){e.next=12;break}return e.next=9,r;case 9:e.t0=e.sent,e.next=13;break;case 12:e.t0=r;case 13:if(e.t0){e.next=16;break}return e.abrupt("return",!1);case 16:return this.backendInstance=this.registry[t],this.setupRegisteredKernels(),this.profiler=new y(this.backendInstance),e.abrupt("return",!0);case 20:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"setupRegisteredKernels",value:function(){var e=this;(0,h.tr)(this.backendName).forEach((function(t){null!=t.setupFunc&&t.setupFunc(e.backendInstance)}))}},{key:"disposeRegisteredKernels",value:function(e){var t=this;(0,h.tr)(e).forEach((function(n){null!=n.disposeFunc&&n.disposeFunc(t.registry[e])}))}},{key:"initializeBackend",value:function(e){var t=this,n=this.registryFactory[e];if(null==n)throw new Error("Cannot initialize backend ".concat(e,", no registration found."));try{var r=n.factory();if(!r||r instanceof l.Zu||"function"!==typeof r.then)return this.registry[e]=r,{success:!0,asyncInit:!1};var a=++this.pendingBackendInitId,o=r.then((function(n){return!(a<t.pendingBackendInitId)&&(t.registry[e]=n,t.pendingBackendInit=null,!0)})).catch((function(n){return a<t.pendingBackendInitId||(t.pendingBackendInit=null,m.Z("Initialization of backend ".concat(e," failed")),m.Z(n.stack||n.message)),!1}));return this.pendingBackendInit=o,{success:o,asyncInit:!0}}catch(i){return m.Z("Initialization of backend ".concat(e," failed")),m.Z(i.stack||i.message),{success:!1,asyncInit:!1}}}},{key:"removeBackend",value:function(e){if(!(e in this.registryFactory))throw new Error("".concat(e," backend not found in registry"));this.backendName===e&&null!=this.pendingBackendInit&&this.pendingBackendInitId++,e in this.registry&&(this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e]),delete this.registryFactory[e],this.backendName===e&&(this.pendingBackendInit=null,this.backendName=null,this.backendInstance=null)}},{key:"getSortedBackends",value:function(){var e=this;if(0===Object.keys(this.registryFactory).length)throw new Error("No backend found in registry.");return Object.keys(this.registryFactory).sort((function(t,n){return e.registryFactory[n].priority-e.registryFactory[t].priority}))}},{key:"initializeBackendsAndReturnBest",value:function(){for(var e=this.getSortedBackends(),t=0;t<e.length;t++){var n=e[t],r=this.initializeBackend(n),a=r.success,o=r.asyncInit;if(o||a)return{name:n,asyncInit:o}}throw new Error("Could not initialize any backends, all backend initializations failed.")}},{key:"moveData",value:function(e,t){var n=this.state.tensorInfo.get(t),r=n.backend,a=this.readSync(t),o=r.refCount(t);r.disposeData(t,!0),n.backend=e,e.move(t,a,n.shape,n.dtype,o),this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack[this.state.numDataMovesStack.length-1]++}},{key:"tidy",value:function(e,t){var n,r=this,a=null;if(null==t){if("function"!==typeof e)throw new Error("Please provide a function to tidy()");t=e}else{if("string"!==typeof e&&!(e instanceof String))throw new Error("When calling with two arguments, the first argument to tidy() must be a string");if("function"!==typeof t)throw new Error("When calling with two arguments, the 2nd argument to tidy() must be a function");a=e}return this.scopedRun((function(){return r.startScope(a)}),(function(){return r.endScope(n)}),(function(){return(n=t())instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),n}))}},{key:"scopedRun",value:function(e,t,n){e();try{var r=n();return t(),r}catch(a){throw t(),a}}},{key:"nextTensorId",value:function(){return e.nextTensorId++}},{key:"nextVariableId",value:function(){return e.nextVariableId++}},{key:"clone",value:function(e){var t=I.runKernel(p.iJ,{x:e}),n={x:e};return this.addTapeNode(this.state.activeScope.name,n,[t],(function(e){return{x:function(){var t={x:e},n={dtype:"float32"};return I.runKernel(p.RF,t,n)}}}),[],{}),t}},{key:"runKernel",value:function(e,t,n){if(null==this.backendName&&this.backend,!(null!=(0,h.pI)(e,this.backendName)))throw new Error("Kernel '".concat(e,"' not registered for backend '").concat(this.backendName,"'"));return this.runKernelFunc({kernelName:e,inputs:t,attrs:n})}},{key:"shouldCheckForMemLeaks",value:function(){return this.ENV.getBool("IS_TEST")}},{key:"checkKernelForMemLeak",value:function(e,t,n){var r=this.backend.numDataIds(),a=0;n.forEach((function(e){a+="complex64"===e.dtype?3:1}));var o=this.state.numDataMovesStack[this.state.numDataMovesStack.length-1],i=r-t-a-o;if(i>0)throw new Error("Backend '".concat(this.backendName,"' has an internal memory leak ")+"(".concat(i," data ids) after running '").concat(e,"'"))}},{key:"runKernelFunc",value:function(e){var t,n,r,a=this,o=[],i=this.isTapeOn(),s=this.state.numBytes,u=this.state.numTensors;this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack.push(0),null==this.backendName&&this.backend;var c=_(e)?e.kernelName:null!=this.state.activeScope?this.state.activeScope.name:"";if(_(e)){var l=e.kernelName,f=e.inputs,d=e.attrs;null==this.backendName&&this.backend;var p=(0,h.pI)(l,this.backendName);g.hu(null!=p,(function(){return"Cannot find registered kernel '".concat(l,"' for backend '").concat(a.backendName,"'")})),n=function(){var e=a.backend.numDataIds();r=p.kernelFunc({inputs:f,attrs:d,backend:a.backend});var t=Array.isArray(r)?r:[r];a.shouldCheckForMemLeaks()&&a.checkKernelForMemLeak(l,e,t);var n=t.map((function(e){if(null!=e.rank)return e;var t=e.dataId,n=e.shape,r=e.dtype;return a.makeTensorFromDataId(t,n,r)}));if(i){var s=a.getTensorsForGradient(l,f,n);o=a.saveTensorsForBackwardMode(s)}return n}}else{var m=e.forwardFunc,v=function(e){i&&(o=e.map((function(e){return a.keep(a.clone(e))})))};n=function(){var e=a.backend.numDataIds();r=a.tidy((function(){return m(a.backend,v)}));var t=Array.isArray(r)?r:[r];return a.shouldCheckForMemLeaks()&&a.checkKernelForMemLeak(c,e,t),t}}var y,b=e.inputs,x=e.attrs,w=_(e)?null:e.backwardsFunc;return this.scopedRun((function(){return a.state.kernelDepth++}),(function(){return a.state.kernelDepth--}),(function(){a.ENV.getBool("DEBUG")||a.state.profiling?(y=a.profiler.profileKernel(c,b,(function(){return n()})),a.ENV.getBool("DEBUG")&&a.profiler.logKernelProfile(y),t=y.outputs):t=n()})),i&&this.addTapeNode(c,b,t,w,o,x),this.state.profiling&&this.state.activeProfile.kernels.push({name:c,bytesAdded:this.state.numBytes-s,totalBytesSnapshot:this.state.numBytes,tensorsAdded:this.state.numTensors-u,totalTensorsSnapshot:this.state.numTensors,inputShapes:Object.keys(b).map((function(e){return null!=b[e]?b[e].shape:null})),outputShapes:t.map((function(e){return e.shape})),kernelTimeMs:y.timeMs,extraInfo:y.extraInfo}),Array.isArray(r)?t:t[0]}},{key:"saveTensorsForBackwardMode",value:function(e){var t=this,n=e.map((function(e){return t.keep(t.clone(e))}));return n}},{key:"getTensorsForGradient",value:function(e,t,n){var r=(0,h.uk)(e);if(null!=r){var a,o=r.inputsToSave||[],i=r.outputsToSave||[];r.saveAllInputs?(g.hu(Array.isArray(t),(function(){return"saveAllInputs is true, expected inputs to be an array."})),a=Object.keys(t).map((function(e){return t[e]}))):a=o.map((function(e){return t[e]}));var s=n.filter((function(e,t){return i[t]}));return a.concat(s)}return[]}},{key:"makeTensor",value:function(e,t,n,r){if(null==e)throw new Error("Values passed to engine.makeTensor() are null");n=n||"float32",r=r||this.backend;var a=e;"string"===n&&g.HD(e[0])&&(a=e.map((function(e){return v.encodeString(e)})));var o=r.write(a,t,n),i=new k.es(t,n,o,this.nextTensorId());if(this.trackTensor(i,r),"string"===n){var s=this.state.tensorInfo.get(o),u=(0,g.Ub)(a);this.state.numBytes+=u-s.bytes,s.bytes=u}return i}},{key:"makeTensorFromDataId",value:function(e,t,n,r){n=n||"float32";var a=new k.es(t,n,e,this.nextTensorId());return this.trackTensor(a,r),a}},{key:"makeVariable",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;n=n||this.nextVariableId().toString(),null!=r&&r!==e.dtype&&(e=e.cast(r));var a=new k._w(e,t,n,this.nextTensorId());if(null!=this.state.registeredVariables[a.name])throw new Error("Variable with name ".concat(a.name," was already registered"));return this.state.registeredVariables[a.name]=a,this.incRef(a,this.backend),a}},{key:"trackTensor",value:function(e,t){this.state.numTensors++,"string"===e.dtype&&this.state.numStringTensors++;var n=0;"complex64"!==e.dtype&&"string"!==e.dtype&&(n=e.size*g.bT(e.dtype)),this.state.numBytes+=n,this.state.tensorInfo.has(e.dataId)||(this.state.numDataBuffers++,this.state.tensorInfo.set(e.dataId,{backend:t||this.backend,dtype:e.dtype,shape:e.shape,bytes:n})),e instanceof k._w||this.track(e)}},{key:"incRef",value:function(e,t){this.trackTensor(e,t),this.backend.incRef(e.dataId)}},{key:"removeDataId",value:function(e,t){this.state.tensorInfo.has(e)&&this.state.tensorInfo.get(e).backend===t&&(this.state.tensorInfo.delete(e),this.state.numDataBuffers--)}},{key:"disposeTensor",value:function(e){if(this.state.tensorInfo.has(e.dataId)){var t=this.state.tensorInfo.get(e.dataId);if(this.state.numTensors--,"string"===e.dtype&&(this.state.numStringTensors--,this.state.numBytes-=t.bytes),"complex64"!==e.dtype&&"string"!==e.dtype){var n=e.size*g.bT(e.dtype);this.state.numBytes-=n}t.backend.disposeData(e.dataId)&&this.removeDataId(e.dataId,t.backend)}}},{key:"disposeVariables",value:function(){for(var e in this.state.registeredVariables){var t=this.state.registeredVariables[e];this.disposeVariable(t)}}},{key:"disposeVariable",value:function(e){this.disposeTensor(e),null!=this.state.registeredVariables[e.name]&&delete this.state.registeredVariables[e.name]}},{key:"memory",value:function(){var e=this.backend.memory();return e.numTensors=this.state.numTensors,e.numDataBuffers=this.state.numDataBuffers,e.numBytes=this.state.numBytes,this.state.numStringTensors>0&&(e.unreliable=!0,null==e.reasons&&(e.reasons=[]),e.reasons.push("Memory usage by string tensors is approximate (2 bytes per character)")),e}},{key:"profile",value:function(){var e=(0,o.Z)(c().mark((function e(t){var n,o,i,s,u;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.state.profiling=!0,n=this.state.numBytes,o=this.state.numTensors,this.state.activeProfile.kernels=[],e.next=6,t();case 6:this.state.activeProfile.result=e.sent,this.state.profiling=!1,this.state.activeProfile.peakBytes=Math.max.apply(Math,(0,a.Z)(this.state.activeProfile.kernels.map((function(e){return e.totalBytesSnapshot})))),this.state.activeProfile.newBytes=this.state.numBytes-n,this.state.activeProfile.newTensors=this.state.numTensors-o,i=(0,r.Z)(this.state.activeProfile.kernels),e.prev=12,i.s();case 14:if((s=i.n()).done){e.next=24;break}return u=s.value,e.next=18,u.kernelTimeMs;case 18:return u.kernelTimeMs=e.sent,e.next=21,u.extraInfo;case 21:u.extraInfo=e.sent;case 22:e.next=14;break;case 24:e.next=29;break;case 26:e.prev=26,e.t0=e.catch(12),i.e(e.t0);case 29:return e.prev=29,i.f(),e.finish(29);case 32:return e.abrupt("return",this.state.activeProfile);case 33:case"end":return e.stop()}}),e,this,[[12,26,29,32]])})));return function(t){return e.apply(this,arguments)}}()},{key:"isTapeOn",value:function(){return this.state.gradientDepth>0&&0===this.state.kernelDepth}},{key:"addTapeNode",value:function(e,t,n,r,a,o){var i=this,s={id:this.state.nextTapeNodeId++,kernelName:e,inputs:t,outputs:n,saved:a},u=(0,h.uk)(e);null!=u&&(r=u.gradFunc),null!=r&&(s.gradient=function(e){return e=e.map((function(e,t){if(null==e){var r=n[t],a=g.wT(r.size,r.dtype);return i.makeTensor(a,r.shape,r.dtype)}return e})),r(e.length>1?e:e[0],a,o)}),this.state.activeTape.push(s)}},{key:"keep",value:function(e){return e.kept=!0,e}},{key:"startTape",value:function(){0===this.state.gradientDepth&&(this.state.activeTape=[]),this.state.gradientDepth++}},{key:"endTape",value:function(){this.state.gradientDepth--}},{key:"startScope",value:function(e){var t={track:[],name:"unnamed scope",id:this.state.nextScopeId++};e&&(t.name=e),this.state.scopeStack.push(t),this.state.activeScope=t}},{key:"endScope",value:function(e){for(var t=this,n=(0,S.getTensorsInContainer)(e),r=new Set(n.map((function(e){return e.id}))),a=0;a<this.state.activeScope.track.length;a++){var o=this.state.activeScope.track[a];o.kept||r.has(o.id)||o.dispose()}var i=this.state.scopeStack.pop();this.state.activeScope=0===this.state.scopeStack.length?null:this.state.scopeStack[this.state.scopeStack.length-1],n.forEach((function(e){e.kept||e.scopeId!==i.id||t.track(e)}))}},{key:"gradients",value:function(e,t,n){var a=this,o=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(g.hu(t.length>0,(function(){return"gradients() received an empty list of xs."})),null!=n&&"float32"!==n.dtype)throw new Error("dy must have 'float32' dtype, but has '".concat(n.dtype,"'"));var i=this.scopedRun((function(){return a.startTape()}),(function(){return a.endTape()}),(function(){return a.tidy("forward",e)}));g.hu(i instanceof k.es,(function(){return"The result y returned by f() must be a tensor."}));var s=x(this.state.activeTape,t,i);if(!o&&0===s.length&&t.length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that the f you passed encloses all operations that lead from x to y.");return this.tidy("backward",(function(){var e={};e[i.id]=null==n?C(i.shape):n,w(e,s,(function(e){return a.tidy(e)}),O);var o=t.map((function(t){return e[t.id]}));return 0===a.state.gradientDepth&&(a.state.activeTape.forEach((function(e){var t,n=(0,r.Z)(e.saved);try{for(n.s();!(t=n.n()).done;){t.value.dispose()}}catch(a){n.e(a)}finally{n.f()}})),a.state.activeTape=null),{value:i,grads:o}}))}},{key:"customGrad",value:function(e){var t=this;return g.hu(g.mf(e),(function(){return"The f passed in customGrad(f) must be a function."})),function(){for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];var o;g.hu(r.every((function(e){return e instanceof k.es})),(function(){return"The args passed in customGrad(f)(x1, x2,...) must all be tensors"}));var i={};r.forEach((function(e,t){i[t]=e}));var s=function(t,n){return o=e.apply(void 0,[].concat(r,[n])),g.hu(o.value instanceof k.es,(function(){return"The function f passed in customGrad(f) must return an object where `obj.value` is a tensor"})),g.hu(g.mf(o.gradFunc),(function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function."})),o.value},u=function(e,t){var n=o.gradFunc(e,t),a=Array.isArray(n)?n:[n];g.hu(a.length===r.length,(function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns the same number of tensors as inputs passed to f(...)."})),g.hu(a.every((function(e){return e instanceof k.es})),(function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns a list of only tensors."}));var i={};return a.forEach((function(e,t){i[t]=function(){return e}})),i};return t.runKernelFunc({forwardFunc:s,backwardsFunc:u,inputs:i})}}},{key:"readSync",value:function(e){return this.state.tensorInfo.get(e).backend.readSync(e)}},{key:"read",value:function(e){return this.state.tensorInfo.get(e).backend.read(e)}},{key:"readToGPU",value:function(e,t){return this.state.tensorInfo.get(e).backend.readToGPU(e,t)}},{key:"time",value:function(){var e=(0,o.Z)(c().mark((function e(t){var n,r;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=(0,v.now)(),e.next=3,this.backend.time(t);case 3:return(r=e.sent).wallMs=(0,v.now)()-n,e.abrupt("return",r);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"track",value:function(e){return null!=this.state.activeScope&&(e.scopeId=this.state.activeScope.id,this.state.activeScope.track.push(e)),e}},{key:"registeredVariables",get:function(){return this.state.registeredVariables}},{key:"reset",value:function(){for(var e in this.pendingBackendInitId++,this.state.dispose(),this.ENV.reset(),this.state=new N,this.registry)this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e];this.backendName=null,this.backendInstance=null,this.pendingBackendInit=null}}]),e}();function C(e){var t=(0,g.p8)((0,g.NA)(e),"float32");return I.makeTensor(t,e,"float32")}function T(){var e=(0,d.D)();if(null==e._tfengine){var t=new f.qA(e);e._tfengine=new E(t)}return(0,f.iG)(e._tfengine.ENV),(0,k.Vi)((function(){return e._tfengine})),e._tfengine}E.nextTensorId=0,E.nextVariableId=0;var I=T();function O(e,t){var n={a:e,b:t};return I.runKernel(p.mm,n)}},5050:function(e,t,n){"use strict";n.d(t,{qA:function(){return f},OB:function(){return h},Vi:function(){return m},iG:function(){return v}});var r=n(9439),a=n(5861),o=n(5671),i=n(3144),s=n(7757),u=n.n(s),c=n(6147),l="tfjsflags",f=function(){function e(t){(0,o.Z)(this,e),this.global=t,this.flags={},this.flagRegistry={},this.urlFlags={},this.getQueryParams=d,this.populateURLFlags()}return(0,i.Z)(e,[{key:"setPlatform",value:function(e,t){null!=this.platform&&(h().getBool("IS_TEST")||h().getBool("PROD")||console.warn("Platform ".concat(this.platformName," has already been set. ")+"Overwriting the platform with ".concat(t,"."))),this.platformName=e,this.platform=t}},{key:"registerFlag",value:function(e,t,n){if(this.flagRegistry[e]={evaluationFn:t,setHook:n},null!=this.urlFlags[e]){var r=this.urlFlags[e];h().getBool("IS_TEST")||h().getBool("PROD")||console.warn("Setting feature override from URL ".concat(e,": ").concat(r,".")),this.set(e,r)}}},{key:"getAsync",value:function(){var e=(0,a.Z)(u().mark((function e(t){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t in this.flags)){e.next=2;break}return e.abrupt("return",this.flags[t]);case 2:return e.next=4,this.evaluateFlag(t);case 4:return this.flags[t]=e.sent,e.abrupt("return",this.flags[t]);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"get",value:function(e){if(e in this.flags)return this.flags[e];var t=this.evaluateFlag(e);if((0,c.tI)(t))throw new Error("Flag ".concat(e," cannot be synchronously evaluated. ")+"Please use getAsync() instead.");return this.flags[e]=t,this.flags[e]}},{key:"getNumber",value:function(e){return this.get(e)}},{key:"getBool",value:function(e){return this.get(e)}},{key:"getFlags",value:function(){return this.flags}},{key:"features",get:function(){return this.flags}},{key:"set",value:function(e,t){if(null==this.flagRegistry[e])throw new Error("Cannot set flag ".concat(e," as it has not been registered."));this.flags[e]=t,null!=this.flagRegistry[e].setHook&&this.flagRegistry[e].setHook(t)}},{key:"evaluateFlag",value:function(e){if(null==this.flagRegistry[e])throw new Error("Cannot evaluate flag '".concat(e,"': no evaluation function found."));return this.flagRegistry[e].evaluationFn()}},{key:"setFlags",value:function(e){this.flags=Object.assign({},e)}},{key:"reset",value:function(){this.flags={},this.urlFlags={},this.populateURLFlags()}},{key:"populateURLFlags",value:function(){var e=this;if("undefined"!==typeof this.global&&"undefined"!==typeof this.global.location&&"undefined"!==typeof this.global.location.search){var t=this.getQueryParams(this.global.location.search);if(l in t)t.tfjsflags.split(",").forEach((function(t){var n=t.split(":"),a=(0,r.Z)(n,2),o=a[0],i=a[1];e.urlFlags[o]=function(e,t){if("true"===(t=t.toLowerCase())||"false"===t)return"true"===t;if("".concat(+t)===t)return+t;throw new Error("Could not parse value flag value ".concat(t," for flag ").concat(e,"."))}(o,i)}))}}}]),e}();function d(e){var t={};return e.replace(/[?&]([^=?&]+)(?:=([^&]*))?/g,(function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];return p(t,r[0],r[1]),r.join("=")})),t}function p(e,t,n){e[decodeURIComponent(t)]=decodeURIComponent(n||"")}function h(){return m}var m=null;function v(e){m=e}},6581:function(e,t,n){"use strict";var r;function a(){if(null==r){var e;if("undefined"!==typeof window)e=window;else if("undefined"!==typeof n.g)e=n.g;else if("undefined"!==typeof process)e=process;else{if("undefined"===typeof self)throw new Error("Could not find a global object");e=self}r=e}return r}function o(e,t){var n=function(){var e=a();return null==e._tfGlobals&&(e._tfGlobals=new Map),e._tfGlobals}();if(n.has(e))return n.get(e);var r=t();return n.set(e,r),n.get(e)}n.d(t,{D:function(){return a},R:function(){return o}})},5875:function(e,t,n){"use strict";n.d(t,{G4:function(){return s},R:function(){return u},cF:function(){return c},MX:function(){return l},N8:function(){return f},SR:function(){return d},sq:function(){return p},N5:function(){return h},lu:function(){return m},B9:function(){return v},Cn:function(){return g},XV:function(){return y},CQ:function(){return b},Cd:function(){return x},N_:function(){return w},cj:function(){return k},x3:function(){return S},ze:function(){return _},jq:function(){return N},y3:function(){return E},VY:function(){return C}});var r=n(318),a=n(5050),o=n(4376),i=n(9064);function s(){(0,a.OB)().set("PROD",!0)}function u(){(0,a.OB)().set("DEBUG",!0)}function c(){(0,a.OB)().set("DEPRECATION_WARNINGS_ENABLED",!1),console.warn("TensorFlow.js deprecation warnings have been disabled.")}function l(e){(0,a.OB)().getBool("DEPRECATION_WARNINGS_ENABLED")&&console.warn(e+" You can disable deprecation warnings with tf.disableDeprecationWarnings().")}function f(){r.BV.disposeVariables()}function d(){return r.BV}function p(){return r.BV.memory()}function h(e){return r.BV.profile(e)}function m(e,t){return r.BV.tidy(e,t)}function v(e){(0,i.getTensorsInContainer)(e).forEach((function(e){return e.dispose()}))}function g(e){return r.BV.keep(e)}function y(e){return r.BV.time(e)}function b(e){return r.BV.setBackend(e)}function x(){return r.BV.ready()}function w(){return r.BV.backendName}function k(e){r.BV.removeBackend(e)}function S(e){return r.BV.findBackend(e)}function _(e){return r.BV.findBackendFactory(e)}function N(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return r.BV.registerBackend(e,t,n)}function E(){return r.BV.backend}function C(e,t){(0,a.OB)().setPlatform(e,t)}(0,o.FZ)(l)},6450:function(e,t,n){"use strict";n.d(t,{cb:function(){return p},pn:function(){return d},h7:function(){return l},fN:function(){return f},UQ:function(){return u},ti:function(){return c}});var r=n(3433),a=n(318),o=n(4376),i=n(8354),s=n(6147);function u(e){return s.hu(s.mf(e),(function(){return"The f passed in grad(f) must be a function"})),function(t,n){var r=(0,i._1)(t,"x","tf.grad","string_or_numeric"),o=null!=n?(0,i._1)(n,"dy","tf.grad"):null;return a.BV.tidy((function(){var t=a.BV.gradients((function(){return e(r)}),[r],o),n=t.value,i=t.grads;return null!=o&&s.k5(n.shape,o.shape,"The shape of dy passed in grad(f)(x, dy) must match the shape returned by f(x)"),h(i),i[0]}))}}function c(e){return s.hu(s.mf(e),(function(){return"The f passed in grads(f) must be a function"})),function(t,n){s.hu(Array.isArray(t),(function(){return"The args passed in grads(f)(args) must be an array of `Tensor`s or `TensorLike`s"}));var o=(0,i.sI)(t,"args","tf.grads","string_or_numeric"),u=null!=n?(0,i._1)(n,"dy","tf.grads"):null;return a.BV.tidy((function(){var t=a.BV.gradients((function(){return e.apply(void 0,(0,r.Z)(o))}),o,u),n=t.value,i=t.grads;return null!=u&&s.k5(n.shape,u.shape,"The shape of dy passed in grads(f)([x1,...], dy) must match the shape returned by f([x1,...])"),h(i),i}))}}function l(e){return s.hu(s.mf(e),(function(){return"The f passed in valueAndGrad(f) must be a function"})),function(t,n){s.hu(t instanceof o.es,(function(){return"The x passed in valueAndGrad(f)(x) must be a tensor"})),s.hu(null==n||n instanceof o.es,(function(){return"The dy passed in valueAndGrad(f)(x, dy) must be a tensor"}));var r=a.BV.gradients((function(){return e(t)}),[t],n),i=r.grads,u=r.value;return h(i),{grad:i[0],value:u}}}function f(e){return s.hu(s.mf(e),(function(){return"The f passed in valueAndGrads(f) must be a function"})),function(t,n){s.hu(Array.isArray(t)&&t.every((function(e){return e instanceof o.es})),(function(){return"The args passed in valueAndGrads(f)(args) must be array of tensors"})),s.hu(null==n||n instanceof o.es,(function(){return"The dy passed in valueAndGrads(f)(args, dy) must be a tensor"}));var i=a.BV.gradients((function(){return e.apply(void 0,(0,r.Z)(t))}),t,n);return null!=n&&s.k5(i.value.shape,n.shape,"The shape of dy passed in valueAndGrads(f)([x1,...], dy) must match the shape returned by f([x1,...])"),h(i.grads),i}}function d(e,t){s.hu(s.mf(e),(function(){return"The f passed in variableGrads(f) must be a function"})),s.hu(null==t||Array.isArray(t)&&t.every((function(e){return e instanceof o._w})),(function(){return"The varList passed in variableGrads(f, varList) must be an array of variables"}));var n=null!=t;if(!n)for(var r in t=[],a.BV.registeredVariables)t.push(a.BV.registeredVariables[r]);var i=n?t.filter((function(e){return!e.trainable})):null,u=t.length;t=t.filter((function(e){return e.trainable})),s.hu(t.length>0,(function(){return"variableGrads() expects at least one of the input variables to "+"be trainable, but none of the ".concat(u," variables is ")+"trainable."}));var c=a.BV.gradients(e,t,null,!0),l=c.value,f=c.grads;s.hu(f.some((function(e){return null!=e})),(function(){return"Cannot find a connection between any variable and the result of the loss function y=f(x). Please make sure the operations that use variables are inside the function f passed to minimize()."})),s.hu(0===l.rank,(function(){return"The f passed in variableGrads(f) must return a scalar, but it "+"returned a rank-".concat(l.rank," tensor")}));var d={};return t.forEach((function(e,t){null!=f[t]&&(d[e.name]=f[t])})),null!=i&&i.forEach((function(e){return d[e.name]=null})),{value:l,grads:d}}function p(e){return a.BV.customGrad(e)}function h(e){if(e.filter((function(e){return null==e})).length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that\n    the f you passed encloses all operations that lead from x to y.")}},3772:function(e,t,n){"use strict";n.r(t),n.d(t,{Abs:function(){return vt.SY},Acos:function(){return vt.VG},Acosh:function(){return vt.Sp},AdadeltaOptimizer:function(){return an},AdagradOptimizer:function(){return sn},AdamOptimizer:function(){return ln},AdamaxOptimizer:function(){return pn},Add:function(){return vt.mm},AddN:function(){return vt.Xz},All:function(){return vt.oT},Any:function(){return vt.IK},ArgMax:function(){return vt.sJ},ArgMin:function(){return vt.aJ},Asin:function(){return vt.M2},Asinh:function(){return vt.qw},Atan:function(){return vt.jM},Atan2:function(){return vt.QC},Atanh:function(){return vt.Oy},AvgPool:function(){return vt.Jh},AvgPool3D:function(){return vt._k},AvgPool3DGrad:function(){return vt.IM},AvgPoolGrad:function(){return vt.RO},BatchMatMul:function(){return vt.XL},BatchToSpaceND:function(){return vt.zw},Bincount:function(){return vt.zv},BroadcastArgs:function(){return vt.eE},BroadcastTo:function(){return vt.Ly},Cast:function(){return vt.RF},Ceil:function(){return vt.gJ},ClipByValue:function(){return vt.xn},Complex:function(){return vt.Zz},ComplexAbs:function(){return vt.yj},Concat:function(){return vt.Eh},Conv2D:function(){return vt.mh},Conv2DBackpropFilter:function(){return vt.wU},Conv2DBackpropInput:function(){return vt.wm},Conv3D:function(){return vt.x1},Conv3DBackpropFilterV2:function(){return vt.o2},Conv3DBackpropInputV2:function(){return vt.ik},Cos:function(){return vt.mc},Cosh:function(){return vt.TR},CropAndResize:function(){return vt.Vc},Cumsum:function(){return vt.iH},DataStorage:function(){return Cr.JL},DenseBincount:function(){return vt.QR},DepthToSpace:function(){return vt.T0},DepthwiseConv2dNative:function(){return vt.ci},DepthwiseConv2dNativeBackpropFilter:function(){return vt.sL},DepthwiseConv2dNativeBackpropInput:function(){return vt.y7},Diag:function(){return vt.$w},Dilation2D:function(){return vt.p4},Dilation2DBackpropFilter:function(){return vt.Vn},Dilation2DBackpropInput:function(){return vt.ek},ENV:function(){return y.Vi},Einsum:function(){return vt.$g},Elu:function(){return vt.SX},EluGrad:function(){return vt.HE},Environment:function(){return y.qA},Equal:function(){return vt.hd},Erf:function(){return vt.Om},Exp:function(){return vt.NE},ExpandDims:function(){return vt.YF},Expm1:function(){return vt.Y0},FFT:function(){return vt.vw},Fill:function(){return vt.de},FlipLeftRight:function(){return vt.Uy},Floor:function(){return vt.OR},FloorDiv:function(){return vt.je},FromPixels:function(){return vt.eB},FusedBatchNorm:function(){return vt.sH},FusedConv2D:function(){return vt._V},FusedDepthwiseConv2D:function(){return vt.lu},GatherNd:function(){return vt.q1},GatherV2:function(){return vt.qi},Greater:function(){return vt.iZ},GreaterEqual:function(){return vt.Ac},IFFT:function(){return vt.Qg},Identity:function(){return vt.iJ},Imag:function(){return vt.J_},IsFinite:function(){return vt.av},IsInf:function(){return vt.iW},IsNan:function(){return vt.r7},KernelBackend:function(){return Cr.Zu},LRN:function(){return vt.eZ},LRNGrad:function(){return vt.Hh},LeakyRelu:function(){return vt.J$},Less:function(){return vt.vt},LessEqual:function(){return vt.CA},LinSpace:function(){return vt.e7},Log:function(){return vt.Zb},Log1p:function(){return vt.kU},LogSoftmax:function(){return vt.qC},LogicalAnd:function(){return vt.PY},LogicalNot:function(){return vt.Vf},LogicalOr:function(){return vt.MZ},Max:function(){return vt.Yo},MaxPool:function(){return vt.mT},MaxPool3D:function(){return vt.OA},MaxPool3DGrad:function(){return vt.OU},MaxPoolGrad:function(){return vt.OV},MaxPoolWithArgmax:function(){return vt.vF},Maximum:function(){return vt.BM},Mean:function(){return vt.q2},Min:function(){return vt.c1},Minimum:function(){return vt.q8},MirrorPad:function(){return vt.jQ},Mod:function(){return vt.Vb},MomentumOptimizer:function(){return mn},Multinomial:function(){return vt.NZ},Multiply:function(){return vt.wY},Neg:function(){return vt.ku},NonMaxSuppressionV3:function(){return vt.uv},NonMaxSuppressionV4:function(){return vt.cy},NonMaxSuppressionV5:function(){return vt.W0},NotEqual:function(){return vt.yQ},OP_SCOPE_SUFFIX:function(){return bn.zvA},OneHot:function(){return vt.we},OnesLike:function(){return vt.qW},Optimizer:function(){return rn},OptimizerConstructors:function(){return gn},Pack:function(){return vt.Qi},PadV2:function(){return vt.ly},Pool:function(){return vt.Kg},Pow:function(){return vt.pe},Prelu:function(){return vt.o0},Prod:function(){return vt.Dl},RMSPropOptimizer:function(){return vn},Range:function(){return vt.e6},Rank:function(){return yn.yw},Real:function(){return vt.xJ},RealDiv:function(){return vt.oH},Reciprocal:function(){return vt.$H},Reduction:function(){return xn.I},Relu:function(){return vt.qk},Relu6:function(){return vt.Sb},Reshape:function(){return vt.HZ},ResizeBilinear:function(){return vt._Y},ResizeBilinearGrad:function(){return vt.zb},ResizeNearestNeighbor:function(){return vt.dp},ResizeNearestNeighborGrad:function(){return vt.Hm},Reverse:function(){return vt.mK},RotateWithOffset:function(){return vt.b9},Round:function(){return vt.e0},Rsqrt:function(){return vt.bV},SGDOptimizer:function(){return hn},ScatterNd:function(){return vt.xQ},Select:function(){return vt.Ph},Selu:function(){return vt.oF},Sigmoid:function(){return vt.a5},Sign:function(){return vt.i5},Sin:function(){return vt.RQ},Sinh:function(){return vt.w3},Slice:function(){return vt.p2},Softmax:function(){return vt.Gc},Softplus:function(){return vt.MR},SpaceToBatchND:function(){return vt.TQ},SparseFillEmptyRows:function(){return vt.O3},SparseReshape:function(){return vt.nh},SparseSegmentMean:function(){return vt.YW},SparseSegmentSum:function(){return vt.Zj},SparseToDense:function(){return vt.D2},SplitV:function(){return vt.L8},Sqrt:function(){return vt.FK},Square:function(){return vt.bK},SquaredDifference:function(){return vt._t},Step:function(){return vt.h8},StridedSlice:function(){return vt.m2},StringNGrams:function(){return vt._J},StringSplit:function(){return vt.s1},StringToHashBucketFast:function(){return vt.Xk},Sub:function(){return vt.Tr},Sum:function(){return vt.GB},Tan:function(){return vt.sE},Tanh:function(){return vt.MI},Tensor:function(){return Be.es},TensorBuffer:function(){return Be.YD},Tile:function(){return vt.n9},TopK:function(){return vt.cW},Transform:function(){return vt.wx},Transpose:function(){return vt.G3},Unique:function(){return vt.kp},Unpack:function(){return vt.To},UnsortedSegmentSum:function(){return vt.Qv},Variable:function(){return Be._w},ZerosLike:function(){return vt.Ru},_FusedMatMul:function(){return vt.us},abs:function(){return bn.WnP},acos:function(){return bn.Khb},acosh:function(){return bn.__u},add:function(){return bn.IHx},addN:function(){return bn.QBD},all:function(){return bn.$6P},any:function(){return bn.YjB},argMax:function(){return bn.NqF},argMin:function(){return bn.vHJ},asin:function(){return bn.ZRM},asinh:function(){return bn.VfV},atan:function(){return bn.z4N},atan2:function(){return bn.fvJ},atanh:function(){return bn.C80},avgPool:function(){return bn.wS1},avgPool3d:function(){return bn.uR5},backend:function(){return Kt.y3},backend_util:function(){return f},basicLSTMCell:function(){return bn.zEQ},batchNorm:function(){return bn.tgs},batchNorm2d:function(){return bn.Dxk},batchNorm3d:function(){return bn.JY5},batchNorm4d:function(){return bn.p3b},batchToSpaceND:function(){return bn.E4h},bincount:function(){return bn.yE8},booleanMaskAsync:function(){return bn.anm},broadcastArgs:function(){return bn.XsQ},broadcastTo:function(){return bn.UFq},broadcast_util:function(){return mt},browser:function(){return i},buffer:function(){return bn.f3b},cast:function(){return bn.pju},ceil:function(){return bn.mDi},clipByValue:function(){return bn.iUl},clone:function(){return bn.d9v},complex:function(){return bn.PYB},concat:function(){return bn.zoF},concat1d:function(){return bn.gME},concat2d:function(){return bn.Izb},concat3d:function(){return bn.MNy},concat4d:function(){return bn.ZaL},conv1d:function(){return bn.PAt},conv2d:function(){return bn.Tek},conv2dTranspose:function(){return bn.bc},conv3d:function(){return bn.pdZ},conv3dTranspose:function(){return bn.$QV},copyRegisteredKernels:function(){return gt.T3},cos:function(){return bn.mCk},cosh:function(){return bn.f9Y},cosineWindow:function(){return bn.mew},cumsum:function(){return bn.zbp},customGrad:function(){return tn.cb},denseBincount:function(){return bn.ppE},deprecationWarn:function(){return Kt.MX},depthToSpace:function(){return bn.nTT},depthwiseConv2d:function(){return bn.B10},device_util:function(){return r},diag:function(){return bn.Ka3},dilation2d:function(){return bn.WmZ},disableDeprecationWarnings:function(){return Kt.cF},dispose:function(){return Kt.B9},disposeVariables:function(){return Kt.N8},div:function(){return bn.hiC},divNoNan:function(){return bn.NTj},dot:function(){return bn.AKD},dropout:function(){return bn.rvX},einsum:function(){return bn.WYO},elu:function(){return bn.pyx},enableDebugMode:function(){return Kt.R},enableProdMode:function(){return Kt.G4},enclosingPowerOfTwo:function(){return bn.GRh},engine:function(){return Kt.SR},env:function(){return y.OB},equal:function(){return bn.DgJ},erf:function(){return bn.qNN},exp:function(){return bn.Qqt},expandDims:function(){return bn.dt4},expm1:function(){return bn.t$B},eye:function(){return bn.iyy},fft:function(){return bn.kp_},fill:function(){return bn.hlL},findBackend:function(){return Kt.x3},findBackendFactory:function(){return Kt.ze},floor:function(){return bn.GWj},floorDiv:function(){return bn.qPi},fused:function(){return bn.imm},gather:function(){return bn.Iqj},gatherND:function(){return bn.dbB},gather_util:function(){return s},getBackend:function(){return Kt.N_},getGradient:function(){return gt.uk},getKernel:function(){return gt.pI},getKernelsForBackend:function(){return gt.tr},grad:function(){return tn.UQ},grads:function(){return tn.ti},greater:function(){return bn.pjt},greaterEqual:function(){return bn.brS},ifft:function(){return bn.Sxn},imag:function(){return bn.asL},image:function(){return bn.BHj},inTopKAsync:function(){return bn.V3u},io:function(){return a},irfft:function(){return bn.wx0},isFinite:function(){return bn.xVT},isInf:function(){return bn.UWc},isNaN:function(){return bn.i2d},keep:function(){return Kt.Cn},kernel_impls:function(){return d},leakyRelu:function(){return bn.hi7},less:function(){return bn.d9m},lessEqual:function(){return bn.zN1},linalg:function(){return bn.$r2},linspace:function(){return bn.SX3},localResponseNormalization:function(){return bn.G9k},log:function(){return bn.cM7},log1p:function(){return bn.Krr},logSigmoid:function(){return bn.e_t},logSoftmax:function(){return bn.CmS},logSumExp:function(){return bn.l_t},logicalAnd:function(){return bn.HvI},logicalNot:function(){return bn.hJK},logicalOr:function(){return bn.K5V},logicalXor:function(){return bn.egP},losses:function(){return bn.MB5},matMul:function(){return bn.OI3},math:function(){return o},max:function(){return bn.Fp7},maxPool:function(){return bn._sB},maxPool3d:function(){return bn.YQQ},maxPoolWithArgmax:function(){return bn.Ip$},maximum:function(){return bn.gWQ},mean:function(){return bn.J69},memory:function(){return Kt.sq},meshgrid:function(){return bn.ry_},min:function(){return bn.VV$},minimum:function(){return bn.LTh},mirrorPad:function(){return bn.VdP},mod:function(){return bn.wQq},moments:function(){return bn.Gi7},movingAverage:function(){return bn.p_},mul:function(){return bn.dC7},multiRNNCell:function(){return bn.rq4},multinomial:function(){return bn.SJ_},neg:function(){return bn.W76},nextFrame:function(){return Sn},norm:function(){return bn.KOy},notEqual:function(){return bn.Quu},oneHot:function(){return bn.lfX},ones:function(){return bn.iUs},onesLike:function(){return bn.JpU},op:function(){return bn.op},outerProduct:function(){return bn.N2O},pad:function(){return bn.vku},pad1d:function(){return bn.pNR},pad2d:function(){return bn.koy},pad3d:function(){return bn.t1L},pad4d:function(){return bn.lGY},pool:function(){return bn.d_R},pow:function(){return bn.sQ3},prelu:function(){return bn.AL3},print:function(){return bn.S0v},prod:function(){return bn.WVs},profile:function(){return Kt.N5},rand:function(){return bn.TN_},randomGamma:function(){return bn.wzB},randomNormal:function(){return bn.nGf},randomUniform:function(){return bn.LGj},range:function(){return bn.w6H},ready:function(){return Kt.Cd},real:function(){return bn.kwC},reciprocal:function(){return bn.M25},registerBackend:function(){return Kt.jq},registerGradient:function(){return gt.Li},registerKernel:function(){return gt.wC},relu:function(){return bn.UYe},relu6:function(){return bn.btT},removeBackend:function(){return Kt.cj},reshape:function(){return bn.XLQ},reverse:function(){return bn.GYS},reverse1d:function(){return bn.SDf},reverse2d:function(){return bn.diP},reverse3d:function(){return bn.sx7},reverse4d:function(){return bn.mG2},rfft:function(){return bn.QEs},round:function(){return bn.NMM},rsqrt:function(){return bn.bp0},scalar:function(){return bn.iD$},scatterND:function(){return bn.snQ},scatter_util:function(){return Ct},selu:function(){return bn.U8D},separableConv2d:function(){return bn.U_I},serialization:function(){return u},setBackend:function(){return Kt.CQ},setPlatform:function(){return Kt.VY},setdiff1dAsync:function(){return bn.ODp},sigmoid:function(){return bn.XD2},sign:function(){return bn.Xxe},signal:function(){return bn.tdS},sin:function(){return bn.O$l},sinh:function(){return bn.R_K},slice:function(){return bn.tPi},slice1d:function(){return bn.jZU},slice2d:function(){return bn.SmN},slice3d:function(){return bn.CnO},slice4d:function(){return bn.p0P},slice_util:function(){return Tt},softmax:function(){return bn.XAC},softplus:function(){return bn.Wvh},spaceToBatchND:function(){return bn.fBT},sparse:function(){return bn.rVs},sparseToDense:function(){return bn.ers},spectral:function(){return bn.uN7},split:function(){return bn.Vl2},sqrt:function(){return bn._b3},square:function(){return bn.h62},squaredDifference:function(){return bn.$i},squeeze:function(){return bn.L9e},stack:function(){return bn.knu},step:function(){return bn.Nbs},stridedSlice:function(){return bn.NXj},string:function(){return bn.Z_8},sub:function(){return bn.luU},sum:function(){return bn.Smz},sumOutType:function(){return yn.z4},tan:function(){return bn.ORZ},tanh:function(){return bn.AEp},tensor:function(){return bn.XeE},tensor1d:function(){return bn.RRF},tensor2d:function(){return bn.odF},tensor3d:function(){return bn.wOQ},tensor4d:function(){return bn.yXz},tensor5d:function(){return bn.Bfx},tensor6d:function(){return bn.xZs},tensor_util:function(){return Dt},test_util:function(){return c},tidy:function(){return Kt.lu},tile:function(){return bn.Gg6},time:function(){return Kt.XV},topk:function(){return bn.hg7},train:function(){return wn},transpose:function(){return bn.p4s},truncatedNormal:function(){return bn.Xu6},unique:function(){return bn.Two},unregisterGradient:function(){return gt.bt},unregisterKernel:function(){return gt.nE},unsortedSegmentSum:function(){return bn.pUJ},unstack:function(){return bn.HHK},upcastType:function(){return yn.x8},util:function(){return Mt},valueAndGrad:function(){return tn.h7},valueAndGrads:function(){return tn.fN},variable:function(){return bn.VD$},variableGrads:function(){return tn.pn},version_core:function(){return Wt},where:function(){return bn.arb},whereAsync:function(){return bn.itS},zeros:function(){return bn.lls},zerosLike:function(){return bn.P84}});var r={};n.r(r),n.d(r,{isBrowser:function(){return g},isMobile:function(){return v},mockIsMobile:function(){return m}});var a={};n.r(a),n.d(a,{browserFiles:function(){return We},browserHTTPRequest:function(){return rt},concatenateArrayBuffers:function(){return B},copyModel:function(){return Ce},decodeWeights:function(){return M},encodeWeights:function(){return A},fromMemory:function(){return it},getLoadHandlers:function(){return Y},getModelArtifactsForJSON:function(){return V},getModelArtifactsInfoForJSON:function(){return q},getSaveHandlers:function(){return X},http:function(){return nt},isHTTPScheme:function(){return et},listModels:function(){return Se},loadWeights:function(){return Xe},moveModel:function(){return Ie},registerLoadRouter:function(){return K},registerSaveRouter:function(){return G},removeModel:function(){return Ne},weightsLoaderFactory:function(){return $e},withSaveHandler:function(){return st}});var o={};n.r(o),n.d(o,{confusionMatrix:function(){return ht}});var i={};n.r(i),n.d(i,{fromPixels:function(){return Nt},fromPixelsAsync:function(){return wt},toPixels:function(){return St}});var s={};n.r(s),n.d(s,{prepareAndValidate:function(){return Et}});var u={};n.r(u),n.d(u,{Serializable:function(){return It},SerializationMap:function(){return Ot},registerClass:function(){return At}});var c={};n.r(c),n.d(c,{TEST_EPSILON_FLOAT16:function(){return Rt},encodeStrings:function(){return qt},expectArrayBuffersEqual:function(){return Ut},expectArraysClose:function(){return Pt},expectArraysEqual:function(){return Bt},expectNumbersClose:function(){return zt},expectPromiseToFail:function(){return Lt},expectValuesInRange:function(){return Vt},testEpsilon:function(){return jt}});var l={};n.r(l),n.d(l,{collectGatherOpShapeInfo:function(){return kr},computeOutShape:function(){return wr},segOpComputeOptimalWindowSize:function(){return xr}});var f={};n.r(f),n.d(f,{ERF_A1:function(){return Bn},ERF_A2:function(){return zn},ERF_A3:function(){return Zn},ERF_A4:function(){return Vn},ERF_A5:function(){return Un},ERF_P:function(){return Ln},PARALLELIZE_THRESHOLD:function(){return In},SELU_SCALE:function(){return Fn.$},SELU_SCALEALPHA:function(){return Fn.y},applyActivation:function(){return Tn.QH},assertAndGetBroadcastShape:function(){return mt.assertAndGetBroadcastShape},assertAxesAreInnerMostDims:function(){return _n.lB},assertParamsConsistent:function(){return Nn},assignToTypedArray:function(){return Yn},axesAreInnerMostDims:function(){return _n.YB},calculateShapes:function(){return Ct.calculateShapes},checkEinsumDimSizes:function(){return rr},checkPadOnDimRoundingMode:function(){return Cn.m},combineLocations:function(){return _n.Vh},complexWithEvenIndex:function(){return Gn},complexWithOddIndex:function(){return Kn},computeConv2DInfo:function(){return Cn.Ix},computeConv3DInfo:function(){return Cn.jw},computeDefaultPad:function(){return Cn.aO},computeDilation2DInfo:function(){return Cn.Rf},computeOptimalWindowSize:function(){return On},computeOutAndReduceShapes:function(){return _n.kz},computeOutShape:function(){return En},computePool2DInfo:function(){return Cn.Xw},computePool3DInfo:function(){return Cn.pl},convertConv2DDataFormat:function(){return Cn.sl},decodeEinsumEquation:function(){return tr},eitherStridesOrDilationsAreOne:function(){return Cn.jT},expandShapeToKeepDim:function(){return _n.rv},exponent:function(){return Jn},exponents:function(){return $n},fromStringArrayToUint8:function(){return _r},fromUint8ToStringArray:function(){return Sr},getAxesPermutation:function(){return _n.Q3},getBroadcastDims:function(){return mt.getBroadcastDims},getComplexWithIndex:function(){return Xn},getEinsumComputePath:function(){return ar},getEinsumPermutation:function(){return nr},getFusedBiasGradient:function(){return Tn.pf},getFusedDyActivation:function(){return Tn.Fr},getImageCenter:function(){return An},getInnerMostAxes:function(){return _n.sY},getPermuted:function(){return Mn},getReductionAxes:function(){return mt.getReductionAxes},getReshaped:function(){return Dn},getReshapedPermuted:function(){return Rn},getSliceBeginCoords:function(){return Pn},getSliceSize:function(){return jn},getSparseFillEmptyRowsIndicesDenseShapeMismatch:function(){return ur},getSparseFillEmptyRowsNegativeIndexErrorMessage:function(){return cr},getSparseFillEmptyRowsOutOfRangeIndexErrorMessage:function(){return lr},getSparseReshapeEmptyTensorZeroOutputDimErrorMessage:function(){return pr},getSparseReshapeInputOutputMismatchErrorMessage:function(){return mr},getSparseReshapeInputOutputMultipleErrorMessage:function(){return hr},getSparseReshapeMultipleNegativeOneOutputDimErrorMessage:function(){return fr},getSparseReshapeNegativeOutputDimErrorMessage:function(){return dr},getSparseSegmentReductionIndicesOutOfRangeErrorMessage:function(){return br},getSparseSegmentReductionNegativeSegmentIdsErrorMessage:function(){return vr},getSparseSegmentReductionNonIncreasingSegmentIdsErrorMessage:function(){return gr},getSparseSegmentReductionSegmentIdOutOfRangeErrorMessage:function(){return yr},getUndoAxesPermutation:function(){return _n.LJ},isIdentityPermutation:function(){return or},log:function(){return qn.c},mergeRealAndImagArrays:function(){return Wn},prepareAndValidate:function(){return Et},prepareSplitSize:function(){return sr},segment_util:function(){return l},shouldFuse:function(){return Tn.uy},slice_util:function(){return Tt},splitRealAndImagArrays:function(){return Hn},tupleValuesAreOne:function(){return Cn.I0},upcastType:function(){return yn.x8},validateInput:function(){return Ct.validateInput},validateUpdateShape:function(){return Ct.validateUpdateShape},warn:function(){return qn.Z}});var d={};n.r(d),n.d(d,{nonMaxSuppressionV3Impl:function(){return Nr.GP},nonMaxSuppressionV4Impl:function(){return Nr.qP},nonMaxSuppressionV5Impl:function(){return Nr.pA},whereImpl:function(){return Er.Z}});var p,h=n(318);function m(e){p=e}function v(e){if(void 0!==p)return p;if(e||"undefined"!==typeof navigator&&null!=navigator){if(e||(e=navigator),"ReactNative"===e.product)return!0;var t=e.userAgent||e.vendor||("undefined"!==typeof window?window.opera:"");if(!t){var n=e;return n.userAgentData&&n.userAgentData.mobile}return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4))}return!1}function g(){return"undefined"!==typeof window&&null!=window.document||"undefined"!==typeof WorkerGlobalScope}var y=n(5050),b=(0,y.OB)();b.registerFlag("DEBUG",(function(){return!1}),(function(e){e&&console.warn("Debugging mode is ON. The output of every math call will be downloaded to CPU and checked for NaNs. This significantly impacts performance.")})),b.registerFlag("IS_BROWSER",(function(){return g()})),b.registerFlag("IS_NODE",(function(){return"undefined"!==typeof process&&"undefined"!==typeof process.versions&&"undefined"!==typeof process.versions.node})),b.registerFlag("IS_CHROME",(function(){return"undefined"!==typeof navigator&&null!=navigator&&null!=navigator.userAgent&&/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor)})),b.registerFlag("PROD",(function(){return!1})),b.registerFlag("TENSORLIKE_CHECK_SHAPE_CONSISTENCY",(function(){return b.getBool("DEBUG")})),b.registerFlag("DEPRECATION_WARNINGS_ENABLED",(function(){return!0})),b.registerFlag("IS_TEST",(function(){return!1})),b.registerFlag("CHECK_COMPUTATION_FOR_ERRORS",(function(){return!0})),b.registerFlag("WRAP_TO_IMAGEBITMAP",(function(){return!1}));var x=n(5671),w=n(3144),k=n(7762),S=n(5861),_=n(7757),N=n.n(_),E=n(9439),C=n(9253),T=n(2442),I=n(6147),O={float32:4,float16:2,int32:4,uint16:2,uint8:1,bool:1,complex64:8};function A(e,t){return D.apply(this,arguments)}function D(){return D=(0,S.Z)(N().mark((function e(t,n){var r,a,o,i,s,u;return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(r=[],a=[],o=Array.isArray(t)?t.map((function(e){return e.name})):Object.keys(t),i=function(e){var i=o[e],s=Array.isArray(t)?t[e].tensor:t[i];if("float32"!==s.dtype&&"int32"!==s.dtype&&"bool"!==s.dtype&&"string"!==s.dtype&&"complex64"!==s.dtype)throw new Error("Unsupported dtype in weight '".concat(i,"': ").concat(s.dtype));var u={name:i,shape:s.shape,dtype:s.dtype};if("string"===s.dtype){var c=new Promise(function(){var e=(0,S.Z)(N().mark((function e(t){var n,r,a,o,i,u,c;return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.bytes();case 2:for(n=e.sent,r=n.reduce((function(e,t){return e+t.length}),0)+4*n.length,a=new Uint8Array(r),o=0,i=0;i<n.length;i++)u=n[i],c=new Uint8Array(new Uint32Array([u.length]).buffer),a.set(c,o),o+=4,a.set(u,o),o+=u.length;t(a);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());a.push(c)}else a.push(s.data());null!=n&&(u.group=n),r.push(u)},s=0;s<o.length;++s)i(s);return e.next=7,Promise.all(a);case 7:return u=e.sent,e.abrupt("return",{data:R(u),specs:r});case 9:case"end":return e.stop()}}),e)}))),D.apply(this,arguments)}function M(e,t){var n,r,a={},o=0,i=(0,k.Z)(t);try{for(i.s();!(r=i.n()).done;){var s=r.value,u=s.name,c=s.dtype,l=s.shape,f=(0,I.NA)(l),d=void 0;if("quantization"in s){var p=s.quantization;if("uint8"===p.dtype||"uint16"===p.dtype){if(!("min"in p)||!("scale"in p))throw new Error("Weight ".concat(s.name," with quantization ").concat(p.dtype," ")+"doesn't have corresponding metadata min and scale.")}else{if("float16"!==p.dtype)throw new Error("Weight ".concat(s.name," has unknown ")+"quantization dtype ".concat(p.dtype,". ")+"Supported quantization dtypes are: 'uint8', 'uint16', and 'float16'.");if("float32"!==c)throw new Error("Weight ".concat(s.name," is quantized with ").concat(p.dtype," ")+"which only supports weights of type float32 not ".concat(c,"."))}var h=O[p.dtype],m=e.slice(o,o+f*h),v="uint8"===p.dtype?new Uint8Array(m):new Uint16Array(m);if("float32"===c)if("uint8"===p.dtype||"uint16"===p.dtype){d=new Float32Array(v.length);for(var g=0;g<v.length;g++){var y=v[g];d[g]=y*p.scale+p.min}}else{if("float16"!==p.dtype)throw new Error("Unsupported quantization type ".concat(p.dtype," ")+"for weight type float32.");void 0===n&&(n=W()),d=n(v)}else{if("int32"!==c)throw new Error("Unsupported dtype in weight '".concat(u,"': ").concat(c));if("uint8"!==p.dtype&&"uint16"!==p.dtype)throw new Error("Unsupported quantization type ".concat(p.dtype," ")+"for weight type int32.");d=new Int32Array(v.length);for(var b=0;b<v.length;b++){var x=v[b];d[b]=Math.round(x*p.scale+p.min)}}o+=f*h}else if("string"===c){var w=(0,I.NA)(s.shape);d=[];for(var S=0;S<w;S++){var _=new Uint32Array(e.slice(o,o+4))[0];o+=4;var N=new Uint8Array(e.slice(o,o+_));d.push(N),o+=_}}else{var E=O[c],A=e.slice(o,o+f*E);if("float32"===c)d=new Float32Array(A);else if("int32"===c)d=new Int32Array(A);else if("bool"===c)d=new Uint8Array(A);else{if("complex64"!==c)throw new Error("Unsupported dtype in weight '".concat(u,"': ").concat(c));d=new Float32Array(A);for(var D=new Float32Array(d.length/2),M=new Float32Array(d.length/2),R=0;R<D.length;R++)D[R]=d[2*R],M[R]=d[2*R+1];var P=(0,T.X)(D,l,"float32"),j=(0,T.X)(M,l,"float32");a[u]=(0,C.P)(P,j),P.dispose(),j.dispose()}o+=f*E}"complex64"!==c&&(a[u]=(0,T.X)(d,l,c))}}catch(F){i.e(F)}finally{i.f()}return a}function R(e){if(null===e)throw new Error("Invalid input value: ".concat(JSON.stringify(e)));var t=0,n=[];e.forEach((function(e){if(t+=e.byteLength,n.push(e.byteLength===e.buffer.byteLength?e:new e.constructor(e)),!(e instanceof Float32Array||e instanceof Int32Array||e instanceof Uint8Array))throw new Error("Unsupported TypedArray subtype: ".concat(e.constructor.name))}));var r=new Uint8Array(t),a=0;return n.forEach((function(e){r.set(new Uint8Array(e.buffer),a),a+=e.byteLength})),r.buffer}var P="undefined"!==typeof Buffer&&("undefined"===typeof Blob||"undefined"===typeof atob||"undefined"===typeof btoa);function j(e){return P?Buffer.byteLength(e):new Blob([e]).size}function F(e){if(P)return Buffer.from(e).toString("base64");for(var t=new Uint8Array(e),n="",r=0,a=t.length;r<a;r++)n+=String.fromCharCode(t[r]);return btoa(n)}function L(e){if(P){var t=Buffer.from(e,"base64");return t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength)}for(var n=atob(e),r=new Uint8Array(n.length),a=0;a<n.length;++a)r.set([n.charCodeAt(a)],a);return r.buffer}function B(e){if(1===e.length)return e[0];var t=0;e.forEach((function(e){t+=e.byteLength}));var n=new Uint8Array(t),r=0;return e.forEach((function(e){n.set(new Uint8Array(e),r),r+=e.byteLength})),n.buffer}function z(e){for(e=e.trim();e.endsWith("/");)e=e.slice(0,e.length-1);var t=e.split("/");return t[t.length-1]}function Z(e,t){var n={modelTopology:e.modelTopology,format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,weightsManifest:t};return null!=e.signature&&(n.signature=e.signature),null!=e.userDefinedMetadata&&(n.userDefinedMetadata=e.userDefinedMetadata),null!=e.modelInitializer&&(n.modelInitializer=e.modelInitializer),null!=e.trainingConfig&&(n.trainingConfig=e.trainingConfig),n}function V(e,t){return U.apply(this,arguments)}function U(){return U=(0,S.Z)(N().mark((function e(t,n){var r,a,o,i,s;return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r={modelTopology:t.modelTopology,format:t.format,generatedBy:t.generatedBy,convertedBy:t.convertedBy},null!=t.trainingConfig&&(r.trainingConfig=t.trainingConfig),null==t.weightsManifest){e.next=11;break}return e.next=5,n(t.weightsManifest);case 5:a=e.sent,o=(0,E.Z)(a,2),i=o[0],s=o[1],r.weightSpecs=i,r.weightData=s;case 11:return null!=t.signature&&(r.signature=t.signature),null!=t.userDefinedMetadata&&(r.userDefinedMetadata=t.userDefinedMetadata),null!=t.modelInitializer&&(r.modelInitializer=t.modelInitializer),e.abrupt("return",r);case 15:case"end":return e.stop()}}),e)}))),U.apply(this,arguments)}function q(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("Expected JSON model topology, received ArrayBuffer.");return{dateSaved:new Date,modelTopologyType:"JSON",modelTopologyBytes:null==e.modelTopology?0:j(JSON.stringify(e.modelTopology)),weightSpecsBytes:null==e.weightSpecs?0:j(JSON.stringify(e.weightSpecs)),weightDataBytes:null==e.weightData?0:e.weightData.byteLength}}function W(){var e=function(){var e=function(e){for(var t=e<<13,n=0;0===(8388608&t);)n-=8388608,t<<=1;return(t&=-8388609)|n+947912704},t=new Uint32Array(2048);t[0]=0;for(var n=1;n<1024;n++)t[n]=e(n);for(var r=1024;r<2048;r++)t[r]=939524096+(r-1024<<13);return t}(),t=function(){var e=new Uint32Array(64);e[0]=0,e[31]=1199570944,e[32]=2147483648,e[63]=3347054592;for(var t=1;t<31;t++)e[t]=t<<23;for(var n=33;n<63;n++)e[n]=2147483648+(n-32<<23);return e}(),n=function(){for(var e=new Uint32Array(64),t=0;t<64;t++)e[t]=1024;return e[0]=e[32]=0,e}();return function(r){for(var a=new ArrayBuffer(4*r.length),o=new Uint32Array(a),i=0;i<r.length;i++){var s=r[i],u=e[n[s>>10]+(1023&s)]+t[s>>10];o[i]=u}return new Float32Array(a)}}var H=function(){function e(){(0,x.Z)(this,e),this.saveRouters=[],this.loadRouters=[]}return(0,w.Z)(e,null,[{key:"getInstance",value:function(){return null==e.instance&&(e.instance=new e),e.instance}},{key:"registerSaveRouter",value:function(t){e.getInstance().saveRouters.push(t)}},{key:"registerLoadRouter",value:function(t){e.getInstance().loadRouters.push(t)}},{key:"getSaveHandlers",value:function(t){return e.getHandlers(t,"save")}},{key:"getLoadHandlers",value:function(t,n){return e.getHandlers(t,"load",n)}},{key:"getHandlers",value:function(t,n,r){var a=[];return("load"===n?e.getInstance().loadRouters:e.getInstance().saveRouters).forEach((function(e){var n=e(t,r);null!==n&&a.push(n)})),a}}]),e}(),G=function(e){return H.registerSaveRouter(e)},K=function(e){return H.registerLoadRouter(e)},X=function(e){return H.getSaveHandlers(e)},Y=function(e,t){return H.getLoadHandlers(e,t)},$="tensorflowjs",J="models_store",Q="model_info_store";function ee(){if(!(0,y.OB)().getBool("IS_BROWSER"))throw new Error("Failed to obtain IndexedDB factory because the current environmentis not a web browser.");var e="undefined"===typeof window?self:window,t=e.indexedDB||e.mozIndexedDB||e.webkitIndexedDB||e.msIndexedDB||e.shimIndexedDB;if(null==t)throw new Error("The current browser does not appear to support IndexedDB.");return t}function te(e){var t=e.result;t.createObjectStore(J,{keyPath:"modelPath"}),t.createObjectStore(Q,{keyPath:"modelPath"})}var ne=function(){function e(t){if((0,x.Z)(this,e),this.indexedDB=ee(),null==t||!t)throw new Error("For IndexedDB, modelPath must not be null, undefined or empty.");this.modelPath=t}return(0,w.Z)(e,[{key:"save",value:function(){var e=(0,S.Z)(N().mark((function e(t){return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.modelTopology instanceof ArrayBuffer)){e.next=2;break}throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");case 2:return e.abrupt("return",this.databaseAction(this.modelPath,t));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"load",value:function(){var e=(0,S.Z)(N().mark((function e(){return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.databaseAction(this.modelPath));case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"databaseAction",value:function(e,t){var n=this;return new Promise((function(e,r){var a=n.indexedDB.open($,1);a.onupgradeneeded=function(){return te(a)},a.onsuccess=function(){var o=a.result;if(null==t){var i=o.transaction(J,"readonly"),s=i.objectStore(J).get(n.modelPath);s.onsuccess=function(){if(null==s.result)return o.close(),r(new Error("Cannot find model with path '".concat(n.modelPath,"' ")+"in IndexedDB."));e(s.result.modelArtifacts)},s.onerror=function(e){return o.close(),r(s.error)},i.oncomplete=function(){return o.close()}}else{var u,c=q(t),l=o.transaction(Q,"readwrite"),f=l.objectStore(Q),d=f.put({modelPath:n.modelPath,modelArtifactsInfo:c});d.onsuccess=function(){var a=(u=o.transaction(J,"readwrite")).objectStore(J).put({modelPath:n.modelPath,modelArtifacts:t,modelArtifactsInfo:c});a.onsuccess=function(){return e({modelArtifactsInfo:c})},a.onerror=function(e){var t=(f=l.objectStore(Q)).delete(n.modelPath);t.onsuccess=function(){return o.close(),r(a.error)},t.onerror=function(e){return o.close(),r(a.error)}}},d.onerror=function(e){return o.close(),r(d.error)},l.oncomplete=function(){null==u?o.close():u.oncomplete=function(){return o.close()}}}},a.onerror=function(e){return r(a.error)}}))}}]),e}();ne.URL_SCHEME="indexeddb://";var re=function(e){return(0,y.OB)().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(ne.URL_SCHEME)?(t=e.slice(ne.URL_SCHEME.length),new ne(t)):null;var t};H.registerSaveRouter(re),H.registerLoadRouter(re);var ae=function(){function e(){(0,x.Z)(this,e),this.indexedDB=ee()}return(0,w.Z)(e,[{key:"listModels",value:function(){var e=(0,S.Z)(N().mark((function e(){var t=this;return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){var r=t.indexedDB.open($,1);r.onupgradeneeded=function(){return te(r)},r.onsuccess=function(){var t=r.result,a=t.transaction(Q,"readonly"),o=a.objectStore(Q).getAll();o.onsuccess=function(){var t,n={},r=(0,k.Z)(o.result);try{for(r.s();!(t=r.n()).done;){var a=t.value;n[a.modelPath]=a.modelArtifactsInfo}}catch(i){r.e(i)}finally{r.f()}e(n)},o.onerror=function(e){return t.close(),n(o.error)},a.oncomplete=function(){return t.close()}},r.onerror=function(e){return n(r.error)}})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"removeModel",value:function(){var e=(0,S.Z)(N().mark((function e(t){var n=this;return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=(r=t).startsWith(ne.URL_SCHEME)?r.slice(ne.URL_SCHEME.length):r,e.abrupt("return",new Promise((function(e,r){var a=n.indexedDB.open($,1);a.onupgradeneeded=function(){return te(a)},a.onsuccess=function(){var n,o=a.result,i=o.transaction(Q,"readwrite"),s=i.objectStore(Q),u=s.get(t);u.onsuccess=function(){if(null==u.result)return o.close(),r(new Error("Cannot find model with path '".concat(t,"' ")+"in IndexedDB."));var a=s.delete(t),i=function(){var a=(n=o.transaction(J,"readwrite")).objectStore(J).delete(t);a.onsuccess=function(){return e(u.result.modelArtifactsInfo)},a.onerror=function(e){return r(u.error)}};a.onsuccess=i,a.onerror=function(e){return i(),o.close(),r(u.error)}},u.onerror=function(e){return o.close(),r(u.error)},i.oncomplete=function(){null==n?o.close():n.oncomplete=function(){return o.close()}}},a.onerror=function(e){return r(a.error)}})));case 2:case"end":return e.stop()}var r}),e)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),oe="/",ie="tensorflowjs_models",se="info",ue="model_topology",ce="weight_specs",le="weight_data",fe="model_metadata";function de(e){return{info:[ie,e,se].join(oe),topology:[ie,e,ue].join(oe),weightSpecs:[ie,e,ce].join(oe),weightData:[ie,e,le].join(oe),modelMetadata:[ie,e,fe].join(oe)}}function pe(e){for(var t=0,n=Object.values(e);t<n.length;t++){var r=n[t];window.localStorage.removeItem(r)}}function he(e){var t=e.split(oe);if(t.length<3)throw new Error("Invalid key format: ".concat(e));return t.slice(1,t.length-1).join(oe)}var me=function(){function e(t){if((0,x.Z)(this,e),!(0,y.OB)().getBool("IS_BROWSER")||"undefined"===typeof window||"undefined"===typeof window.localStorage)throw new Error("The current environment does not support local storage.");if(this.LS=window.localStorage,null==t||!t)throw new Error("For local storage, modelPath must not be null, undefined or empty.");this.modelPath=t,this.keys=de(this.modelPath)}return(0,w.Z)(e,[{key:"save",value:function(){var e=(0,S.Z)(N().mark((function e(t){var n,r,a,o;return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.modelTopology instanceof ArrayBuffer)){e.next=4;break}throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");case 4:return n=JSON.stringify(t.modelTopology),r=JSON.stringify(t.weightSpecs),a=q(t),e.prev=7,this.LS.setItem(this.keys.info,JSON.stringify(a)),this.LS.setItem(this.keys.topology,n),this.LS.setItem(this.keys.weightSpecs,r),this.LS.setItem(this.keys.weightData,F(t.weightData)),o={format:t.format,generatedBy:t.generatedBy,convertedBy:t.convertedBy,signature:null!=t.signature?t.signature:void 0,userDefinedMetadata:null!=t.userDefinedMetadata?t.userDefinedMetadata:void 0,modelInitializer:null!=t.modelInitializer?t.modelInitializer:void 0,trainingConfig:null!=t.trainingConfig?t.trainingConfig:void 0},this.LS.setItem(this.keys.modelMetadata,JSON.stringify(o)),e.abrupt("return",{modelArtifactsInfo:a});case 17:throw e.prev=17,e.t0=e.catch(7),pe(this.keys),new Error("Failed to save model '".concat(this.modelPath,"' to local storage: ")+"size quota being exceeded is a possible cause of this failure: "+"modelTopologyBytes=".concat(a.modelTopologyBytes,", ")+"weightSpecsBytes=".concat(a.weightSpecsBytes,", ")+"weightDataBytes=".concat(a.weightDataBytes,"."));case 21:case"end":return e.stop()}}),e,this,[[7,17]])})));return function(t){return e.apply(this,arguments)}}()},{key:"load",value:function(){var e=(0,S.Z)(N().mark((function e(){var t,n,r,a,o,i,s;return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=(t=JSON.parse(this.LS.getItem(this.keys.info)))){e.next=3;break}throw new Error("In local storage, there is no model with name '".concat(this.modelPath,"'"));case 3:if("JSON"===t.modelTopologyType){e.next=5;break}throw new Error("BrowserLocalStorage does not support loading non-JSON model topology yet.");case 5:if(n={},null!=(r=JSON.parse(this.LS.getItem(this.keys.topology)))){e.next=9;break}throw new Error("In local storage, the topology of model '".concat(this.modelPath,"' ")+"is missing.");case 9:if(n.modelTopology=r,null!=(a=JSON.parse(this.LS.getItem(this.keys.weightSpecs)))){e.next=13;break}throw new Error("In local storage, the weight specs of model '".concat(this.modelPath,"' ")+"are missing.");case 13:if(n.weightSpecs=a,null!=(o=this.LS.getItem(this.keys.modelMetadata))&&(i=JSON.parse(o),n.format=i.format,n.generatedBy=i.generatedBy,n.convertedBy=i.convertedBy,null!=i.signature&&(n.signature=i.signature),null!=i.userDefinedMetadata&&(n.userDefinedMetadata=i.userDefinedMetadata),null!=i.modelInitializer&&(n.modelInitializer=i.modelInitializer),null!=i.trainingConfig&&(n.trainingConfig=i.trainingConfig)),null!=(s=this.LS.getItem(this.keys.weightData))){e.next=19;break}throw new Error("In local storage, the binary weight values of model "+"'".concat(this.modelPath,"' are missing."));case 19:return n.weightData=L(s),e.abrupt("return",n);case 21:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();me.URL_SCHEME="localstorage://";var ve=function(e){return(0,y.OB)().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(me.URL_SCHEME)?(t=e.slice(me.URL_SCHEME.length),new me(t)):null;var t};H.registerSaveRouter(ve),H.registerLoadRouter(ve);var ge=function(){function e(){(0,x.Z)(this,e),(0,I.hu)((0,y.OB)().getBool("IS_BROWSER"),(function(){return"Current environment is not a web browser"})),(0,I.hu)("undefined"===typeof window||"undefined"!==typeof window.localStorage,(function(){return"Current browser does not appear to support localStorage"})),this.LS=window.localStorage}return(0,w.Z)(e,[{key:"listModels",value:function(){var e=(0,S.Z)(N().mark((function e(){var t,n,r,a,o,i;return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(t={},n=ie+oe,r=oe+se,a=0;a<this.LS.length;++a)(o=this.LS.key(a)).startsWith(n)&&o.endsWith(r)&&(i=he(o),t[i]=JSON.parse(this.LS.getItem(o)));return e.abrupt("return",t);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"removeModel",value:function(){var e=(0,S.Z)(N().mark((function e(t){var n,r;return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=(a=t).startsWith(me.URL_SCHEME)?a.slice(me.URL_SCHEME.length):a,n=de(t),null!=this.LS.getItem(n.info)){e.next=4;break}throw new Error("Cannot find model at path '".concat(t,"'"));case 4:return r=JSON.parse(this.LS.getItem(n.info)),pe(n),e.abrupt("return",r);case 7:case"end":return e.stop()}var a}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),ye="://",be=function(){function e(){(0,x.Z)(this,e),this.managers={}}return(0,w.Z)(e,null,[{key:"getInstance",value:function(){return null==e.instance&&(e.instance=new e),e.instance}},{key:"registerManager",value:function(t,n){(0,I.hu)(null!=t,(function(){return"scheme must not be undefined or null."})),t.endsWith(ye)&&(t=t.slice(0,t.indexOf(ye))),(0,I.hu)(t.length>0,(function(){return"scheme must not be an empty string."}));var r=e.getInstance();(0,I.hu)(null==r.managers[t],(function(){return"A model store manager is already registered for scheme '".concat(t,"'.")})),r.managers[t]=n}},{key:"getManager",value:function(e){var t=this.getInstance().managers[e];if(null==t)throw new Error("Cannot find model manager for scheme '".concat(e,"'"));return t}},{key:"getSchemes",value:function(){return Object.keys(this.getInstance().managers)}}]),e}();function xe(e){if(-1===e.indexOf(ye))throw new Error("The url string provided does not contain a scheme. Supported schemes are: "+"".concat(be.getSchemes().join(",")));return{scheme:e.split(ye)[0],path:e.split(ye)[1]}}function we(e,t){return ke.apply(this,arguments)}function ke(){return ke=(0,S.Z)(N().mark((function e(t,n){var r,a,o,i,s,u,c,l,f,d,p=arguments;return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=p.length>2&&void 0!==p[2]&&p[2],(0,I.hu)(t!==n,(function(){return"Old path and new path are the same: '".concat(t,"'")})),a=H.getLoadHandlers(t),(0,I.hu)(a.length>0,(function(){return"Copying failed because no load handler is found for source URL ".concat(t,".")})),(0,I.hu)(a.length<2,(function(){return"Copying failed because more than one (".concat(a.length,") ")+"load handlers for source URL ".concat(t,".")})),o=a[0],i=H.getSaveHandlers(n),(0,I.hu)(i.length>0,(function(){return"Copying failed because no save handler is found for destination "+"URL ".concat(n,".")})),(0,I.hu)(i.length<2,(function(){return"Copying failed because more than one (".concat(a.length,") ")+"save handlers for destination URL ".concat(n,".")})),s=i[0],u=xe(t).scheme,c=xe(t).path,l=u===xe(t).scheme,e.next=15,o.load();case 15:if(f=e.sent,!r||!l){e.next=19;break}return e.next=19,be.getManager(u).removeModel(c);case 19:return e.next=21,s.save(f);case 21:if(d=e.sent,!r||l){e.next=25;break}return e.next=25,be.getManager(u).removeModel(c);case 25:return e.abrupt("return",d.modelArtifactsInfo);case 26:case"end":return e.stop()}}),e)}))),ke.apply(this,arguments)}function Se(){return _e.apply(this,arguments)}function _e(){return(_e=(0,S.Z)(N().mark((function e(){var t,n,r,a,o,i,s;return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=be.getSchemes(),n={},r=(0,k.Z)(t),e.prev=3,r.s();case 5:if((a=r.n()).done){e.next=13;break}return o=a.value,e.next=9,be.getManager(o).listModels();case 9:for(s in i=e.sent)n[o+ye+s]=i[s];case 11:e.next=5;break;case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(3),r.e(e.t0);case 18:return e.prev=18,r.f(),e.finish(18);case 21:return e.abrupt("return",n);case 22:case"end":return e.stop()}}),e,null,[[3,15,18,21]])})))).apply(this,arguments)}function Ne(e){return Ee.apply(this,arguments)}function Ee(){return(Ee=(0,S.Z)(N().mark((function e(t){var n,r;return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=xe(t),r=be.getManager(n.scheme),e.abrupt("return",r.removeModel(n.path));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ce(e,t){return Te.apply(this,arguments)}function Te(){return(Te=(0,S.Z)(N().mark((function e(t,n){return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return!1,e.abrupt("return",we(t,n,false));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ie(e,t){return Oe.apply(this,arguments)}function Oe(){return(Oe=(0,S.Z)(N().mark((function e(t,n){return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return!0,e.abrupt("return",we(t,n,true));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Ae=function(){function e(){(0,x.Z)(this,e)}return(0,w.Z)(e,[{key:"fetch",value:function(e){function t(t,n){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e,t){return fetch(e,t)}))},{key:"now",value:function(){return performance.now()}},{key:"encode",value:function(e,t){if("utf-8"!==t&&"utf8"!==t)throw new Error("Browser's encoder only supports utf-8, but got ".concat(t));return null==this.textEncoder&&(this.textEncoder=new TextEncoder),this.textEncoder.encode(e)}},{key:"decode",value:function(e,t){return new TextDecoder(t).decode(e)}}]),e}();if((0,y.OB)().get("IS_BROWSER")){(0,y.OB)().setPlatform("browser",new Ae);try{be.registerManager(me.URL_SCHEME,new ge)}catch(Tr){}try{be.registerManager(ne.URL_SCHEME,new ae)}catch(Tr){}}var De,Me=function(){return n(5410)};var Re=function(){function e(){(0,x.Z)(this,e),this.util=n(8628),this.textEncoder=new this.util.TextEncoder}return(0,w.Z)(e,[{key:"fetch",value:function(e,t){return null!=(0,y.OB)().global.fetch?(0,y.OB)().global.fetch(e,t):(null==De&&(De=Me()),De(e,t))}},{key:"now",value:function(){var e=process.hrtime();return 1e3*e[0]+e[1]/1e6}},{key:"encode",value:function(e,t){if("utf-8"!==t&&"utf8"!==t)throw new Error("Node built-in encoder only supports utf-8, but got ".concat(t));return this.textEncoder.encode(e)}},{key:"decode",value:function(e,t){return 0===e.length?"":new this.util.TextDecoder(t).decode(e)}}]),e}();(0,y.OB)().get("IS_NODE")&&(0,y.OB)().setPlatform("node",new Re);var Pe=n(7039),je=n(9118),Fe=n(672),Le=n(4600),Be=n(4376);(0,h.wv)();var ze={buffer:Pe.f,cast:je.p,clone:Fe.d,print:Le.S};(0,Be.Vp)(ze);var Ze=n(3433);function Ve(e){return new Promise((function(e){return setTimeout(e)})).then(e)}var Ue=function(){function e(t){if((0,x.Z)(this,e),!(0,y.OB)().getBool("IS_BROWSER"))throw new Error("browserDownloads() cannot proceed because the current environment is not a browser.");t.startsWith(e.URL_SCHEME)&&(t=t.slice(e.URL_SCHEME.length)),null!=t&&0!==t.length||(t="model"),this.modelJsonFileName=t+".json",this.weightDataFileName=t+".weights.bin"}return(0,w.Z)(e,[{key:"save",value:function(){var e=(0,S.Z)(N().mark((function e(t){var n,r,a,o,i,s;return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("undefined"!==typeof document){e.next=2;break}throw new Error("Browser downloads are not supported in this environment since `document` is not present");case 2:if(n=window.URL.createObjectURL(new Blob([t.weightData],{type:"application/octet-stream"})),!(t.modelTopology instanceof ArrayBuffer)){e.next=7;break}throw new Error("BrowserDownloads.save() does not support saving model topology in binary formats yet.");case 7:return r=[{paths:["./"+this.weightDataFileName],weights:t.weightSpecs}],a=Z(t,r),o=window.URL.createObjectURL(new Blob([JSON.stringify(a)],{type:"application/json"})),(i=null==this.modelJsonAnchor?document.createElement("a"):this.modelJsonAnchor).download=this.modelJsonFileName,i.href=o,e.next=15,Ve((function(){return i.dispatchEvent(new MouseEvent("click"))}));case 15:if(null==t.weightData){e.next=21;break}return(s=null==this.weightDataAnchor?document.createElement("a"):this.weightDataAnchor).download=this.weightDataFileName,s.href=n,e.next=21,Ve((function(){return s.dispatchEvent(new MouseEvent("click"))}));case 21:return e.abrupt("return",{modelArtifactsInfo:q(t)});case 22:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}();Ue.URL_SCHEME="downloads://";var qe=function(){function e(t){if((0,x.Z)(this,e),null==t||t.length<1)throw new Error("When calling browserFiles, at least 1 file is required, "+"but received ".concat(t));this.jsonFile=t[0],this.weightsFiles=t.slice(1)}return(0,w.Z)(e,[{key:"load",value:function(){var e=(0,S.Z)(N().mark((function e(){var t=this;return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){var r=new FileReader;r.onload=function(r){var a=JSON.parse(r.target.result),o=a.modelTopology;if(null!=o)if(null!=a.weightsManifest)if(0!==t.weightsFiles.length){var i=V(a,(function(e){return t.loadWeights(e)}));e(i)}else e({modelTopology:o});else n(new Error("weightManifest field is missing from file ".concat(t.jsonFile.name)));else n(new Error("modelTopology field is missing from file ".concat(t.jsonFile.name)))},r.onerror=function(e){return n("Failed to read model topology and weights manifest JSON "+"from file '".concat(t.jsonFile.name,"'. BrowserFiles supports loading ")+"Keras-style tf.Model artifacts only.")},r.readAsText(t.jsonFile)})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"loadWeights",value:function(e){var t,n=this,r=[],a=[],o=(0,k.Z)(e);try{for(o.s();!(t=o.n()).done;){var i=t.value;r.push.apply(r,(0,Ze.Z)(i.weights)),a.push.apply(a,(0,Ze.Z)(i.paths))}}catch(Tr){o.e(Tr)}finally{o.f()}var s=this.checkManifestAndWeightFiles(e),u=a.map((function(e){return n.loadWeightsFile(e,s[e])}));return Promise.all(u).then((function(e){return[r,B(e)]}))}},{key:"loadWeightsFile",value:function(e,t){return new Promise((function(n,r){var a=new FileReader;a.onload=function(e){var t=e.target.result;n(t)},a.onerror=function(t){return r("Failed to weights data from file of path '".concat(e,"'."))},a.readAsArrayBuffer(t)}))}},{key:"checkManifestAndWeightFiles",value:function(e){var t,n=this,r=[],a=this.weightsFiles.map((function(e){return z(e.name)})),o={},i=(0,k.Z)(e);try{for(i.s();!(t=i.n()).done;){t.value.paths.forEach((function(e){var t=z(e);if(-1!==r.indexOf(t))throw new Error("Duplicate file basename found in weights manifest: "+"'".concat(t,"'"));if(r.push(t),-1===a.indexOf(t))throw new Error("Weight file with basename '".concat(t,"' is not provided."));o[e]=n.weightsFiles[a.indexOf(t)]}))}}catch(Tr){i.e(Tr)}finally{i.f()}if(r.length!==this.weightsFiles.length)throw new Error("Mismatch in the number of files in weights manifest "+"(".concat(r.length,") and the number of weight files provided ")+"(".concat(this.weightsFiles.length,")."));return o}}]),e}();function We(e){return new qe(e)}function He(e,t,n,r){!function(e){(0,I.hu)(null!=e&&Array.isArray(e)&&e.length>0,(function(){return"promises must be a none empty array"}))}(e),function(e,t){(0,I.hu)(e>=0&&e<=1,(function(){return"Progress fraction must be in range [0, 1], but "+"got startFraction ".concat(e)})),(0,I.hu)(t>=0&&t<=1,(function(){return"Progress fraction must be in range [0, 1], but "+"got endFraction ".concat(t)})),(0,I.hu)(t>=e,(function(){return"startFraction must be no more than endFraction, but "+"got startFraction ".concat(e," and endFraction ")+"".concat(t)}))}(n=null==n?0:n,r=null==r?1:r);var a=0;return Promise.all(e.map((function(o){return o.then((function(o){var i=n+ ++a/e.length*(r-n);return t(i),o})),o})))}function Ge(e,t){return Ke.apply(this,arguments)}function Ke(){return(Ke=(0,S.Z)(N().mark((function e(t,n){var r,a,o,i,s,u,c,l,f;return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==n&&(n={}),r=null==n.fetchFunc?(0,y.OB)().platform.fetch:n.fetchFunc,a=t.map((function(e){return r(e,n.requestInit,{isBinary:!0})})),o=0,i=.5,null!=n.onProgress){e.next=11;break}return e.next=8,Promise.all(a);case 8:e.t0=e.sent,e.next=14;break;case 11:return e.next=13,He(a,n.onProgress,o,i);case 13:e.t0=e.sent;case 14:if(s=e.t0,u=s.map((function(e){return e.arrayBuffer()})),c=.5,l=1,null!=n.onProgress){e.next=24;break}return e.next=21,Promise.all(u);case 21:e.t1=e.sent,e.next=27;break;case 24:return e.next=26,He(u,n.onProgress,c,l);case 26:e.t1=e.sent;case 27:return f=e.t1,e.abrupt("return",f);case 29:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Xe(e){return Ye.apply(this,arguments)}function Ye(){return Ye=(0,S.Z)(N().mark((function e(t){var n,r,a,o,i=arguments;return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=i.length>1&&void 0!==i[1]?i[1]:"",r=i.length>2?i[2]:void 0,a=i.length>3?i[3]:void 0,o=$e((function(e){return Ge(e,{requestInit:a})})),e.abrupt("return",o(t,n,r));case 6:case"end":return e.stop()}}),e)}))),Ye.apply(this,arguments)}function $e(e){return function(){var t=(0,S.Z)(N().mark((function t(n){var r,a,o,i,s,u,c,l,f,d,p,h,m=arguments;return N().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=m.length>1&&void 0!==m[1]?m[1]:"",a=m.length>2?m[2]:void 0,o=n.map((function(){return!1})),i={},s=null!=a?a.map((function(){return!1})):[],u=[],n.forEach((function(e,t){var n=0;e.weights.forEach((function(e){var r="quantization"in e?e.quantization.dtype:e.dtype,c=O[r]*I.NA(e.shape),l=function(){o[t]=!0,null==i[t]&&(i[t]=[]),i[t].push({manifestEntry:e,groupOffset:n,sizeBytes:c})};null!=a?a.forEach((function(t,n){t===e.name&&(l(),s[n]=!0)})):l(),u.push(e.name),n+=c}))})),s.every((function(e){return e}))){t.next=10;break}throw c=a.filter((function(e,t){return!s[t]})),new Error("Could not find weights in manifest with names: "+"".concat(c.join(", "),". \n")+"Manifest JSON has weights with names: "+"".concat(u.join(", "),"."));case 10:return l=o.reduce((function(e,t,n){return t&&e.push(n),e}),[]),f=[],l.forEach((function(e){n[e].paths.forEach((function(e){var t=r+(r.endsWith("/")?"":"/")+e;f.push(t)}))})),t.next=15,e(f);case 15:return d=t.sent,p={},h=0,l.forEach((function(e){for(var t=n[e].paths.length,r=0,a=0;a<t;a++)r+=d[h+a].byteLength;for(var o=new ArrayBuffer(r),s=new Uint8Array(o),u=0,c=0;c<t;c++){var l=new Uint8Array(d[h+c]);s.set(l,u),u+=l.byteLength}i[e].forEach((function(e){var t=M(o.slice(e.groupOffset,e.groupOffset+e.sizeBytes),[e.manifestEntry]);for(var n in t)p[n]=t[n]})),h+=t})),t.abrupt("return",p);case 20:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}H.registerSaveRouter((function(e){return(0,y.OB)().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(Ue.URL_SCHEME)?function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"model";return new Ue(e)}(e.slice(Ue.URL_SCHEME.length)):null}));var Je=function(){function e(t,n){if((0,x.Z)(this,e),this.DEFAULT_METHOD="POST",null==n&&(n={}),this.weightPathPrefix=n.weightPathPrefix,this.onProgress=n.onProgress,this.weightUrlConverter=n.weightUrlConverter,null!=n.fetchFunc?((0,I.hu)("function"===typeof n.fetchFunc,(function(){return"Must pass a function that matches the signature of `fetch` (see https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API)"})),this.fetch=n.fetchFunc):this.fetch=(0,y.OB)().platform.fetch,(0,I.hu)(null!=t&&t.length>0,(function(){return"URL path for http must not be null, undefined or empty."})),Array.isArray(t)&&(0,I.hu)(2===t.length,(function(){return"URL paths for http must have a length of 2, "+"(actual length is ".concat(t.length,").")})),this.path=t,null!=n.requestInit&&null!=n.requestInit.body)throw new Error("requestInit is expected to have no pre-existing body, but has one.");this.requestInit=n.requestInit||{}}return(0,w.Z)(e,[{key:"save",value:function(){var e=(0,S.Z)(N().mark((function e(t){var n,r,a,o;return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.modelTopology instanceof ArrayBuffer)){e.next=2;break}throw new Error("BrowserHTTPRequest.save() does not support saving model topology in binary formats yet.");case 2:return(n=Object.assign({method:this.DEFAULT_METHOD},this.requestInit)).body=new FormData,r=[{paths:["./model.weights.bin"],weights:t.weightSpecs}],a=Z(t,r),n.body.append("model.json",new Blob([JSON.stringify(a)],{type:"application/json"}),"model.json"),null!=t.weightData&&n.body.append("model.weights.bin",new Blob([t.weightData],{type:"application/octet-stream"}),"model.weights.bin"),e.next=10,this.fetch(this.path,n);case 10:if(!(o=e.sent).ok){e.next=15;break}return e.abrupt("return",{modelArtifactsInfo:q(t),responses:[o]});case 15:throw new Error("BrowserHTTPRequest.save() failed due to HTTP response status "+"".concat(o.status,"."));case 16:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"load",value:function(){var e=(0,S.Z)(N().mark((function e(){var t,n,r,a,o,i=this;return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.fetch(this.path,this.requestInit);case 2:if((t=e.sent).ok){e.next=5;break}throw new Error("Request to ".concat(this.path," failed with status code ")+"".concat(t.status,". Please verify this URL points to ")+"the model JSON of the model to load.");case 5:return e.prev=5,e.next=8,t.json();case 8:n=e.sent,e.next=16;break;case 11:throw e.prev=11,e.t0=e.catch(5),r="Failed to parse model JSON of response from ".concat(this.path,"."),this.path.endsWith(".pb")?r+=" Your path contains a .pb file extension. Support for .pb models have been removed in TensorFlow.js 1.0 in favor of .json models. You can re-convert your Python TensorFlow model using the TensorFlow.js 1.0 conversion scripts or you can convert your.pb models with the 'pb2json'NPM script in the tensorflow/tfjs-converter repository.":r+=" Please make sure the server is serving valid JSON for this request.",new Error(r);case 16:if(a=n.modelTopology,o=n.weightsManifest,null!=a||null!=o){e.next=20;break}throw new Error("The JSON from HTTP path ".concat(this.path," contains neither model ")+"topology or manifest for weights.");case 20:return e.abrupt("return",V(n,(function(e){return i.loadWeights(e)})));case 21:case"end":return e.stop()}}),e,this,[[5,11]])})));return function(){return e.apply(this,arguments)}}()},{key:"loadWeights",value:function(){var e=(0,S.Z)(N().mark((function e(t){var n,r,a,o,i,s,u,c,l,f,d,p,h,m,v,g,y,b,x;return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=Array.isArray(this.path)?this.path[1]:this.path,r=Qe(n),a=(0,E.Z)(r,2),o=a[0],i=a[1],s=this.weightPathPrefix||o,u=[],c=(0,k.Z)(t);try{for(c.s();!(l=c.n()).done;)f=l.value,u.push.apply(u,(0,Ze.Z)(f.weights))}catch(Tr){c.e(Tr)}finally{c.f()}d=[],p=[],h=(0,k.Z)(t);try{for(h.s();!(m=h.n()).done;){v=m.value,g=(0,k.Z)(v.paths);try{for(g.s();!(y=g.n()).done;)b=y.value,null!=this.weightUrlConverter?p.push(this.weightUrlConverter(b)):d.push(s+b+i)}catch(Tr){g.e(Tr)}finally{g.f()}}}catch(Tr){h.e(Tr)}finally{h.f()}if(!this.weightUrlConverter){e.next=19;break}return e.t0=d.push,e.t1=d,e.t2=Ze.Z,e.next=16,Promise.all(p);case 16:e.t3=e.sent,e.t4=(0,e.t2)(e.t3),e.t0.apply.call(e.t0,e.t1,e.t4);case 19:return e.next=21,Ge(d,{requestInit:this.requestInit,fetchFunc:this.fetch,onProgress:this.onProgress});case 21:return x=e.sent,e.abrupt("return",[u,B(x)]);case 23:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}();function Qe(e){var t=e.lastIndexOf("/"),n=e.lastIndexOf("?");return[e.substring(0,t)+"/",n>t?e.substring(n):""]}function et(e){return null!=e.match(Je.URL_SCHEME_REGEX)}Je.URL_SCHEME_REGEX=/^https?:\/\//;var tt=function(e,t){if("undefined"===typeof fetch&&(null==t||null==t.fetchFunc))return null;return(Array.isArray(e)?e.every((function(e){return et(e)})):et(e))?nt(e,t):null};function nt(e,t){return new Je(e,t)}function rt(e,t){return nt(e,t)}H.registerSaveRouter(tt),H.registerLoadRouter(tt);var at=function(){function e(t){(0,x.Z)(this,e),this.modelArtifacts=t}return(0,w.Z)(e,[{key:"load",value:function(){var e=(0,S.Z)(N().mark((function e(){return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.modelArtifacts);case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),ot=function(){function e(t){(0,x.Z)(this,e),this.saveHandler=t}return(0,w.Z)(e,[{key:"save",value:function(){var e=(0,S.Z)(N().mark((function e(t){return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.saveHandler(t));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}();function it(e,t,n,r){if(1===arguments.length){var a=null!=e.modelTopology||null!=e.weightSpecs;return a?new at(e):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new at({modelTopology:e}))}return console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new at({modelTopology:e,weightSpecs:t,weightData:n,trainingConfig:r})}function st(e){return new ot(e)}var ut=n(8354),ct=n(7221),lt=n(4326),ft=n(8640),dt=n(1240);var pt,ht=(0,ft.op)({confusionMatrix_:function(e,t,n){var r=(0,ut._1)(e,"labels","confusionMatrix"),a=(0,ut._1)(t,"predictions","confusionMatrix");I.hu(null==n||n>0&&Number.isInteger(n),(function(){return"If provided, numClasses must be a positive integer, "+"but got ".concat(n)})),I.hu(1===r.rank,(function(){return"Expected the rank of labels to be 1, but got ".concat(r.rank)})),I.hu(1===a.rank,(function(){return"Expected the rank of predictions to be 1, "+"but got ".concat(a.rank)})),I.hu(r.shape[0]===a.shape[0],(function(){return"Mismatch in the number of examples: "+"".concat(r.shape[0]," vs. ").concat(a.shape[0],". ")+"Labels and predictions should have the same number of elements."})),I.hu(n>0&&Number.isInteger(n),(function(){return"numClasses is required to be a positive integer, but got "+"".concat(n)}));var o=(0,lt.l)((0,je.p)(r,"int32"),n),i=(0,lt.l)((0,je.p)(a,"int32"),n),s=(0,dt.p)(o),u=(0,ct.O)(s,i);return(0,je.p)(u,"int32")}}),mt=n(9877),vt=n(2145),gt=n(8864),yt=n(3123);function bt(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3;if(t>4)throw new Error("Cannot construct Tensor with more than 4 channels from pixels.");if(null==e)throw new Error("pixels passed to tf.browser.fromPixels() can not be null");var n=!1,r=!1,a=!1,o=!1,i=!1,s=!1;if(e.data instanceof Uint8Array)n=!0;else if("undefined"!==typeof ImageData&&e instanceof ImageData)r=!0;else if("undefined"!==typeof HTMLVideoElement&&e instanceof HTMLVideoElement)a=!0;else if("undefined"!==typeof HTMLImageElement&&e instanceof HTMLImageElement)o=!0;else if(null!=e.getContext)i=!0;else{if(!("undefined"!==typeof ImageBitmap&&e instanceof ImageBitmap))throw new Error("pixels passed to tf.browser.fromPixels() must be either an HTMLVideoElement, HTMLImageElement, HTMLCanvasElement, ImageData in browser, or OffscreenCanvas, ImageData in webworker or {data: Uint32Array, width: number, height: number}, "+"but was ".concat(e.constructor.name));s=!0}if(a){var u=2;if(a&&e.readyState<u)throw new Error("The video element has not loaded data yet. Please wait for `loadeddata` event on the <video> element.")}var c=(0,gt.pI)(vt.eB,h.BV.backendName);if(null!=c){var l={pixels:e},f={numChannels:t};return h.BV.runKernel(vt.eB,l,f)}var d,p,m=a?[e.videoWidth,e.videoHeight]:[e.width,e.height],v=(0,E.Z)(m,2),g=v[0],y=v[1];if(i)d=e.getContext("2d").getImageData(0,0,g,y).data;else if(r||n)d=e.data;else if(o||a||s){if(null==pt)if("undefined"===typeof document){if("undefined"===typeof OffscreenCanvas||"undefined"===typeof OffscreenCanvasRenderingContext2D)throw new Error("Cannot parse input in current context. Reason: OffscreenCanvas Context2D rendering is not supported.");pt=new OffscreenCanvas(1,1).getContext("2d")}else pt=document.createElement("canvas").getContext("2d");pt.canvas.width=g,pt.canvas.height=y,pt.drawImage(e,0,0,g,y),d=pt.getImageData(0,0,g,y).data}if(4===t)p=new Int32Array(d);else{var b=g*y;p=new Int32Array(b*t);for(var x=0;x<b;x++)for(var w=0;w<t;++w)p[x*t+w]=d[4*x+w]}var k=[y,g,t];return(0,yt.w)(p,k,"int32")}function xt(e){return"undefined"!==typeof window&&"undefined"!==typeof ImageBitmap&&window.hasOwnProperty("createImageBitmap")&&!(e instanceof ImageBitmap)&&function(e){return null!=e&&0!==e.width&&0!==e.height}(e)&&!function(e){return null!=e&&e.data instanceof Uint8Array}(e)}function wt(e){return kt.apply(this,arguments)}function kt(){return kt=(0,S.Z)(N().mark((function e(t){var n,r,a,o=arguments;return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=o.length>1&&void 0!==o[1]?o[1]:3,r=null,!(0,y.OB)().getBool("WRAP_TO_IMAGEBITMAP")||!xt(t)){e.next=15;break}return e.prev=3,e.next=6,createImageBitmap(t,{premultiplyAlpha:"none"});case 6:a=e.sent,e.next=12;break;case 9:e.prev=9,e.t0=e.catch(3),a=null;case 12:r=null!=a&&a.width===t.width&&a.height===t.height?a:t,e.next=16;break;case 15:r=t;case 16:return e.abrupt("return",bt(r,n));case 17:case"end":return e.stop()}}),e,null,[[3,9]])}))),kt.apply(this,arguments)}function St(e,t){return _t.apply(this,arguments)}function _t(){return(_t=(0,S.Z)(N().mark((function e(t,n){var r,a,o,i,s,u,c,l,f,d,p,h,m,v,g,y,b;return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=(0,ut._1)(t,"img","toPixels"),t instanceof Be.es||(a=r,r=(0,je.p)(a,"int32"),a.dispose()),2===r.rank||3===r.rank){e.next=4;break}throw new Error("toPixels only supports rank 2 or 3 tensors, got rank ".concat(r.rank,"."));case 4:if(o=r.shape.slice(0,2),i=(0,E.Z)(o,2),s=i[0],u=i[1],!((c=2===r.rank?1:r.shape[2])>4||2===c)){e.next=8;break}throw new Error("toPixels only supports depth of size "+"1, 3 or 4 but got ".concat(c));case 8:if("float32"===r.dtype||"int32"===r.dtype){e.next=10;break}throw new Error("Unsupported type for toPixels: ".concat(r.dtype,".")+" Please use float32 or int32 tensors.");case 10:return e.next=12,r.data();case 12:l=e.sent,f="float32"===r.dtype?255:1,d=new Uint8ClampedArray(u*s*4),p=0;case 16:if(!(p<s*u)){e.next=41;break}h=[0,0,0,255],m=0;case 19:if(!(m<c)){e.next=33;break}if(v=l[p*c+m],"float32"!==r.dtype){e.next=26;break}if(!(v<0||v>1)){e.next=24;break}throw new Error("Tensor values for a float32 Tensor must be in the "+"range [0 - 1] but encountered ".concat(v,"."));case 24:e.next=29;break;case 26:if("int32"!==r.dtype){e.next=29;break}if(!(v<0||v>255)){e.next=29;break}throw new Error("Tensor values for a int32 Tensor must be in the "+"range [0 - 255] but encountered ".concat(v,"."));case 29:1===c?(h[0]=v*f,h[1]=v*f,h[2]=v*f):h[m]=v*f;case 30:m++,e.next=19;break;case 33:d[(g=4*p)+0]=Math.round(h[0]),d[g+1]=Math.round(h[1]),d[g+2]=Math.round(h[2]),d[g+3]=Math.round(h[3]);case 38:++p,e.next=16;break;case 41:return null!=n&&(n.width=u,n.height=s,y=n.getContext("2d"),b=new ImageData(d,u,s),y.putImageData(b,0,0)),r!==t&&r.dispose(),e.abrupt("return",d);case 44:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Nt=(0,ft.op)({fromPixels_:bt});function Et(e,t){var n=e.shape.length,r=t.shape.length;if(n<1)throw new Error("tf.gatherND() expects the input to be rank 1 or higher,"+" but the rank was ".concat(n,"."));if(r<1)throw new Error("tf.gatherND() expects the indices to be rank 1 or higher,"+" but the rank was ".concat(r,"."));if("int32"!==t.dtype)throw new Error("tf.gatherND() expects the indices to be int32 type,"+" but the dtype was ".concat(t.dtype,"."));if(t.shape[r-1]>n)throw new Error("index innermost dimension length must be <= tensor rank; saw: "+"".concat(t.shape[r-1]," vs. ").concat(n));if(0===(0,I.NA)(e.shape))throw new Error("Requested more than 0 entries, but input is empty."+" Input shape: ".concat(e.shape,"."));for(var a=t.shape,o=a[a.length-1],i=1,s=0;s<a.length-1;++s)i*=a[s];var u=e.shape,c=a.slice();c.pop();for(var l=1,f=o;f<n;++f)l*=u[f],c.push(u[f]);var d=[].concat((0,Ze.Z)((0,I.e3)(e.shape).map((function(e){return e/l}))),[1]).slice(0,o);return[c,i,l,d]}var Ct=n(8604),Tt=n(2875),It=function(){function e(){(0,x.Z)(this,e)}return(0,w.Z)(e,[{key:"getClassName",value:function(){return this.constructor.className}}],[{key:"fromConfig",value:function(e,t){return new e(t)}}]),e}(),Ot=function(){function e(){(0,x.Z)(this,e),this.classNameMap={}}return(0,w.Z)(e,null,[{key:"getMap",value:function(){return null==e.instance&&(e.instance=new e),e.instance}},{key:"register",value:function(t){e.getMap().classNameMap[t.className]=[t,t.fromConfig]}}]),e}();function At(e){(0,I.hu)(null!=e.className,(function(){return"Class being registered does not have the static className property defined."})),(0,I.hu)("string"===typeof e.className,(function(){return"className is required to be a string, but got type "+typeof e.className})),(0,I.hu)(e.className.length>0,(function(){return"Class being registered has an empty-string as its className, which is disallowed."})),Ot.register(e)}var Dt=n(9064),Mt=n(115),Rt=.1;function Pt(e,t,n){return null==n&&(n=jt()),Ft(e,t,(function(e,t){return Zt(e,t,n)}))}function jt(){return 32===h.BV.backend.floatPrecision()?.001:Rt}function Ft(e,t,n){var r=!0;if(((0,I.fU)(e)||(0,I.fU)(t))&&(r=!1),(0,I.fU)(e)&&(0,I.fU)(t)&&(r=!0),r){var a=e.constructor.name,o=t.constructor.name;if(a!==o)throw new Error("Arrays are of different type. Actual: ".concat(a,". ")+"Expected: ".concat(o))}if(Array.isArray(e)&&Array.isArray(t)){var i=(0,ut.C)(e),s=(0,ut.C)(t);if(!(0,I.cO)(i,s))throw new Error("Arrays have different shapes. "+"Actual: [".concat(i,"]. Expected: [").concat(s,"]"))}var u=(0,I.fU)(e)?e:(0,I.xH)(e),c=(0,I.fU)(t)?t:(0,I.xH)(t);if(u.length!==c.length)throw new Error("Arrays have different lengths actual: ".concat(u.length," vs ")+"expected: ".concat(c.length,".\n")+"Actual:   ".concat(u,".\n")+"Expected: ".concat(c,"."));for(var l=0;l<c.length;++l){var f=u[l],d=c[l];if(!n(f,d))throw new Error("Arrays differ: actual[".concat(l,"] = ").concat(f,", expected[").concat(l,"] = ").concat(d,".\n")+"Actual:   ".concat(u,".\n")+"Expected: ".concat(c,"."))}}function Lt(e,t){e().then((function(){return t.fail()}),(function(){return t()}))}function Bt(e,t){var n="string"===typeof t||"number"===typeof t||"boolean"===typeof t?[t]:t;return(0,I.HD)(e)||(0,I.HD)(e[0])||(0,I.HD)(t)||(0,I.HD)(t[0])?Ft(e,n,(function(e,t){return e==t})):Ft(e,t,(function(e,t){return Zt(e,t,0)}))}function zt(e,t,n){if(null==n&&(n=jt()),!Zt(e,t,n))throw new Error("Numbers differ: actual === ".concat(e,", expected === ").concat(t))}function Zt(e,t,n){return!isFinite(e)&&!isFinite(t)||!(isNaN(e)||isNaN(t)||Math.abs(e-t)>n)}function Vt(e,t,n){for(var r=0;r<e.length;r++)if(e[r]<t||e[r]>n)throw new Error("Value out of range:".concat(e[r]," low: ").concat(t,", high: ").concat(n))}function Ut(e,t){var n=new Float32Array(e),r=new Float32Array(t);if(n.length!==r.length)throw new Error("Expected ArrayBuffer to be of length "+"".concat(r.length,", but it was ").concat(n.length));for(var a=0;a<r.length;a++)if(n[a]!==r[a])throw new Error("Expected ArrayBuffer value at ".concat(a," to be ")+"".concat(r[a]," but got ").concat(n[a]," instead"))}function qt(e){for(var t=0;t<e.length;t++){var n=e[t];Array.isArray(n)?qt(n):e[t]=(0,Mt.encodeString)(n)}return e}var Wt="3.13.0",Ht=n(136),Gt=n(3668),Kt=n(5875),Xt=n(3312),Yt=n(5750),$t=n(651),Jt=n(6902),Qt=n(7391),en=n(7293),tn=n(6450),nn=n(7067),rn=function(e){(0,Ht.Z)(n,e);var t=(0,Gt.Z)(n);function n(){return(0,x.Z)(this,n),t.apply(this,arguments)}return(0,w.Z)(n,[{key:"minimize",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2?arguments[2]:void 0,r=this.computeGradients(e,n),a=r.value,o=r.grads;if(null!=n){var i=n.map((function(e){return{name:e.name,tensor:o[e.name]}}));this.applyGradients(i)}else this.applyGradients(o);return(0,Kt.B9)(o),t?a:(a.dispose(),null)}},{key:"iterations",get:function(){return null==this.iterations_&&(this.iterations_=0),this.iterations_}},{key:"incrementIterations",value:function(){this.iterations_=this.iterations+1}},{key:"computeGradients",value:function(e,t){return(0,tn.pn)(e,t)}},{key:"dispose",value:function(){null!=this.iterations_&&(0,Kt.B9)(this.iterations_)}},{key:"saveIterations",value:function(){var e=(0,S.Z)(N().mark((function e(){return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return null==this.iterations_&&(this.iterations_=0),e.abrupt("return",{name:"iter",tensor:(0,nn.i)(this.iterations_,"int32")});case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getWeights",value:function(){var e=(0,S.Z)(N().mark((function e(){return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("getWeights() is not implemented for this optimizer yet.");case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"setWeights",value:function(){var e=(0,S.Z)(N().mark((function e(t){return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("setWeights() is not implemented for this optimizer class "+"".concat(this.getClassName()));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"extractIterations",value:function(){var e=(0,S.Z)(N().mark((function e(t){return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t[0].tensor.data();case 2:return this.iterations_=e.sent[0],e.abrupt("return",t.slice(1));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(It);Object.defineProperty(rn,Symbol.hasInstance,{value:function(e){return null!=e.minimize&&null!=e.computeGradients&&null!=e.applyGradients}});var an=function(e){(0,Ht.Z)(n,e);var t=(0,Gt.Z)(n);function n(e,r){var a,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return(0,x.Z)(this,n),(a=t.call(this)).learningRate=e,a.rho=r,a.epsilon=o,a.accumulatedGrads=[],a.accumulatedUpdates=[],null==o&&(a.epsilon=h.BV.backend.epsilon()),a}return(0,w.Z)(n,[{key:"applyGradients",value:function(e){var t=this;(Array.isArray(e)?e.map((function(e){return e.name})):Object.keys(e)).forEach((function(n,r){var a=h.BV.registeredVariables[n];null==t.accumulatedGrads[r]&&(t.accumulatedGrads[r]={originalName:"".concat(n,"/accum_grad"),variable:(0,Kt.lu)((function(){return(0,en.P)(a).variable(false)}))}),null==t.accumulatedUpdates[r]&&(t.accumulatedUpdates[r]={originalName:"".concat(n,"/accum_var"),variable:(0,Kt.lu)((function(){return(0,en.P)(a).variable(false)}))});var o=Array.isArray(e)?e[r].tensor:e[n];if(null!=o){var i=t.accumulatedGrads[r].variable,s=t.accumulatedUpdates[r].variable;(0,Kt.lu)((function(){var e=(0,Xt.I)((0,$t.d)(i,t.rho),(0,$t.d)((0,Qt.h)(o),1-t.rho)),n=(0,$t.d)((0,Yt.h)((0,Jt._)((0,Xt.I)(s,t.epsilon)),(0,Jt._)((0,Xt.I)(i,t.epsilon))),o),r=(0,Xt.I)((0,$t.d)(s,t.rho),(0,$t.d)((0,Qt.h)(n),1-t.rho));i.assign(e),s.assign(r);var u=(0,Xt.I)((0,$t.d)(n,-t.learningRate),a);a.assign(u)}))}})),this.incrementIterations()}},{key:"dispose",value:function(){null!=this.accumulatedUpdates&&((0,Kt.B9)(this.accumulatedGrads.map((function(e){return e.variable}))),(0,Kt.B9)(this.accumulatedUpdates.map((function(e){return e.variable}))))}},{key:"getWeights",value:function(){var e=(0,S.Z)(N().mark((function e(){var t;return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[].concat((0,Ze.Z)(this.accumulatedGrads),(0,Ze.Z)(this.accumulatedUpdates)),e.next=3,this.saveIterations();case 3:return e.t0=e.sent,e.abrupt("return",[e.t0].concat(t.map((function(e){return{name:e.originalName,tensor:e.variable}}))));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setWeights",value:function(){var e=(0,S.Z)(N().mark((function e(t){var n;return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.extractIterations(t);case 2:t=e.sent,n=t.length/2,!1,this.accumulatedGrads=t.slice(0,n).map((function(e){return{originalName:e.name,variable:e.tensor.variable(false)}})),this.accumulatedUpdates=t.slice(n,2*n).map((function(e){return{originalName:e.name,variable:e.tensor.variable(false)}}));case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getConfig",value:function(){return{learningRate:this.learningRate,rho:this.rho,epsilon:this.epsilon}}}],[{key:"fromConfig",value:function(e,t){return new e(t.learningRate,t.rho,t.epsilon)}}]),n}(rn);an.className="Adadelta",At(an);var on=n(8582),sn=function(e){(0,Ht.Z)(n,e);var t=(0,Gt.Z)(n);function n(e){var r,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.1;return(0,x.Z)(this,n),(r=t.call(this)).learningRate=e,r.initialAccumulatorValue=a,r.accumulatedGrads=[],r}return(0,w.Z)(n,[{key:"applyGradients",value:function(e){var t=this;(Array.isArray(e)?e.map((function(e){return e.name})):Object.keys(e)).forEach((function(n,r){var a=h.BV.registeredVariables[n];if(null==t.accumulatedGrads[r]){t.accumulatedGrads[r]={originalName:"".concat(n,"/accumulator"),variable:(0,Kt.lu)((function(){return(0,on.h)(a.shape,t.initialAccumulatorValue).variable(false)}))}}var o=Array.isArray(e)?e[r].tensor:e[n];if(null!=o){var i=t.accumulatedGrads[r].variable;(0,Kt.lu)((function(){var e=(0,Xt.I)(i,(0,Qt.h)(o));i.assign(e);var n=(0,Xt.I)((0,$t.d)((0,Yt.h)(o,(0,Jt._)((0,Xt.I)(e,h.BV.backend.epsilon()))),-t.learningRate),a);a.assign(n)}))}})),this.incrementIterations()}},{key:"dispose",value:function(){null!=this.accumulatedGrads&&(0,Kt.B9)(this.accumulatedGrads.map((function(e){return e.variable})))}},{key:"getWeights",value:function(){var e=(0,S.Z)(N().mark((function e(){return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.saveIterations();case 2:return e.t0=e.sent,e.abrupt("return",[e.t0].concat(this.accumulatedGrads.map((function(e){return{name:e.originalName,tensor:e.variable}}))));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setWeights",value:function(){var e=(0,S.Z)(N().mark((function e(t){return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.extractIterations(t);case 2:t=e.sent,!1,this.accumulatedGrads=t.map((function(e){return{originalName:e.name,variable:e.tensor.variable(false)}}));case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getConfig",value:function(){return{learningRate:this.learningRate,initialAccumulatorValue:this.initialAccumulatorValue}}}],[{key:"fromConfig",value:function(e,t){return new e(t.learningRate,t.initialAccumulatorValue)}}]),n}(rn);sn.className="Adagrad",At(sn);var un=n(4334),cn=n(4774),ln=function(e){(0,Ht.Z)(n,e);var t=(0,Gt.Z)(n);function n(e,r,a){var o,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return(0,x.Z)(this,n),(o=t.call(this)).learningRate=e,o.beta1=r,o.beta2=a,o.epsilon=i,o.accumulatedFirstMoment=[],o.accumulatedSecondMoment=[],(0,Kt.lu)((function(){o.accBeta1=(0,nn.i)(r).variable(),o.accBeta2=(0,nn.i)(a).variable()})),null==i&&(o.epsilon=h.BV.backend.epsilon()),o}return(0,w.Z)(n,[{key:"applyGradients",value:function(e){var t=this,n=Array.isArray(e)?e.map((function(e){return e.name})):Object.keys(e);(0,Kt.lu)((function(){var r=(0,cn.l)(1,t.accBeta1),a=(0,cn.l)(1,t.accBeta2);n.forEach((function(n,o){var i=h.BV.registeredVariables[n];null==t.accumulatedFirstMoment[o]&&(t.accumulatedFirstMoment[o]={originalName:"".concat(n,"/m"),variable:(0,Kt.lu)((function(){return(0,en.P)(i).variable(false)}))}),null==t.accumulatedSecondMoment[o]&&(t.accumulatedSecondMoment[o]={originalName:"".concat(n,"/v"),variable:(0,Kt.lu)((function(){return(0,en.P)(i).variable(false)}))});var s=Array.isArray(e)?e[o].tensor:e[n];if(null!=s){var u=t.accumulatedFirstMoment[o].variable,c=t.accumulatedSecondMoment[o].variable,l=(0,Xt.I)((0,$t.d)(u,t.beta1),(0,$t.d)(s,1-t.beta1)),f=(0,Xt.I)((0,$t.d)(c,t.beta2),(0,$t.d)((0,Qt.h)(s),1-t.beta2)),d=(0,Yt.h)(l,r),p=(0,Yt.h)(f,a);u.assign(l),c.assign(f);var m=(0,Xt.I)((0,$t.d)((0,Yt.h)(d,(0,Xt.I)((0,Jt._)(p),t.epsilon)),-t.learningRate),i);i.assign(m)}})),t.accBeta1.assign((0,$t.d)(t.accBeta1,t.beta1)),t.accBeta2.assign((0,$t.d)(t.accBeta2,t.beta2))})),this.incrementIterations()}},{key:"dispose",value:function(){this.accBeta1.dispose(),this.accBeta2.dispose(),null!=this.accumulatedFirstMoment&&(0,Kt.B9)(this.accumulatedFirstMoment.map((function(e){return e.variable}))),null!=this.accumulatedSecondMoment&&(0,Kt.B9)(this.accumulatedSecondMoment.map((function(e){return e.variable})))}},{key:"getWeights",value:function(){var e=(0,S.Z)(N().mark((function e(){var t;return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[].concat((0,Ze.Z)(this.accumulatedFirstMoment),(0,Ze.Z)(this.accumulatedSecondMoment)),e.next=3,this.saveIterations();case 3:return e.t0=e.sent,e.abrupt("return",[e.t0].concat(t.map((function(e){return{name:e.originalName,tensor:e.variable}}))));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setWeights",value:function(){var e=(0,S.Z)(N().mark((function e(t){var n,r=this;return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.extractIterations(t);case 2:t=e.sent,(0,Kt.lu)((function(){r.accBeta1.assign((0,un.s)(r.beta1,r.iterations_+1)),r.accBeta2.assign((0,un.s)(r.beta2,r.iterations_+1))})),n=t.length/2,!1,this.accumulatedFirstMoment=t.slice(0,n).map((function(e){return{originalName:e.name,variable:e.tensor.variable(false)}})),this.accumulatedSecondMoment=t.slice(n,2*n).map((function(e){return{originalName:e.name,variable:e.tensor.variable(false)}}));case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getConfig",value:function(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon}}}],[{key:"fromConfig",value:function(e,t){return new e(t.learningRate,t.beta1,t.beta2,t.epsilon)}}]),n}(rn);ln.className="Adam",At(ln);var fn=n(7613),dn=n(705),pn=function(e){(0,Ht.Z)(n,e);var t=(0,Gt.Z)(n);function n(e,r,a){var o,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;return(0,x.Z)(this,n),(o=t.call(this)).learningRate=e,o.beta1=r,o.beta2=a,o.epsilon=i,o.decay=s,o.accumulatedFirstMoment=[],o.accumulatedWeightedInfNorm=[],(0,Kt.lu)((function(){o.iteration=(0,nn.i)(0).variable(),o.accBeta1=(0,nn.i)(r).variable()})),null==i&&(o.epsilon=h.BV.backend.epsilon()),o}return(0,w.Z)(n,[{key:"applyGradients",value:function(e){var t=this,n=Array.isArray(e)?e.map((function(e){return e.name})):Object.keys(e);(0,Kt.lu)((function(){var r=(0,cn.l)(1,t.accBeta1),a=(0,Yt.h)(-t.learningRate,(0,Xt.I)((0,$t.d)(t.iteration,t.decay),1));n.forEach((function(n,o){var i=h.BV.registeredVariables[n];null==t.accumulatedFirstMoment[o]&&(t.accumulatedFirstMoment[o]={originalName:"".concat(n,"/m"),variable:(0,en.P)(i).variable(false)}),null==t.accumulatedWeightedInfNorm[o]&&(t.accumulatedWeightedInfNorm[o]={originalName:"".concat(n,"/v"),variable:(0,en.P)(i).variable(false)});var s=Array.isArray(e)?e[o].tensor:e[n];if(null!=s){var u=t.accumulatedFirstMoment[o].variable,c=t.accumulatedWeightedInfNorm[o].variable,l=(0,Xt.I)((0,$t.d)(u,t.beta1),(0,$t.d)(s,1-t.beta1)),f=(0,$t.d)(c,t.beta2),d=(0,fn.W)(s),p=(0,dn.g)(f,d);u.assign(l),c.assign(p);var m=(0,Xt.I)((0,$t.d)((0,Yt.h)(a,r),(0,Yt.h)(l,(0,Xt.I)(p,t.epsilon))),i);i.assign(m)}})),t.iteration.assign((0,Xt.I)(t.iteration,1)),t.accBeta1.assign((0,$t.d)(t.accBeta1,t.beta1))})),this.incrementIterations()}},{key:"dispose",value:function(){this.accBeta1.dispose(),this.iteration.dispose(),null!=this.accumulatedFirstMoment&&(0,Kt.B9)(this.accumulatedFirstMoment.map((function(e){return e.variable}))),null!=this.accumulatedWeightedInfNorm&&(0,Kt.B9)(this.accumulatedWeightedInfNorm.map((function(e){return e.variable})))}},{key:"getWeights",value:function(){var e=(0,S.Z)(N().mark((function e(){return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("getWeights() is not implemented for Adamax yet.");case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"setWeights",value:function(){var e=(0,S.Z)(N().mark((function e(t){return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("setWeights() is not implemented for Adamax yet.");case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"getConfig",value:function(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon,decay:this.decay}}}],[{key:"fromConfig",value:function(e,t){return new e(t.learningRate,t.beta1,t.beta2,t.epsilon,t.decay)}}]),n}(rn);pn.className="Adamax",At(pn);var hn=function(e){(0,Ht.Z)(n,e);var t=(0,Gt.Z)(n);function n(e){var r;return(0,x.Z)(this,n),(r=t.call(this)).learningRate=e,r.setLearningRate(e),r}return(0,w.Z)(n,[{key:"applyGradients",value:function(e){var t=this;(Array.isArray(e)?e.map((function(e){return e.name})):Object.keys(e)).forEach((function(n,r){var a=Array.isArray(e)?e[r].tensor:e[n];if(null!=a){var o=h.BV.registeredVariables[n];(0,Kt.lu)((function(){var e=(0,Xt.I)((0,$t.d)(t.c,a),o);o.assign(e)}))}})),this.incrementIterations()}},{key:"setLearningRate",value:function(e){this.learningRate=e,null!=this.c&&this.c.dispose(),this.c=(0,Kt.Cn)((0,nn.i)(-e))}},{key:"dispose",value:function(){this.c.dispose()}},{key:"getWeights",value:function(){var e=(0,S.Z)(N().mark((function e(){return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.saveIterations();case 2:return e.t0=e.sent,e.abrupt("return",[e.t0]);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setWeights",value:function(){var e=(0,S.Z)(N().mark((function e(t){return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.extractIterations(t);case 2:if(0===(t=e.sent).length){e.next=5;break}throw new Error("SGD optimizer does not have settable weights.");case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getConfig",value:function(){return{learningRate:this.learningRate}}}],[{key:"fromConfig",value:function(e,t){return new e(t.learningRate)}}]),n}(rn);hn.className="SGD",At(hn);var mn=function(e){(0,Ht.Z)(n,e);var t=(0,Gt.Z)(n);function n(e,r){var a,o=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return(0,x.Z)(this,n),(a=t.call(this,e)).learningRate=e,a.momentum=r,a.useNesterov=o,a.accumulations=[],a.m=(0,nn.i)(a.momentum),a}return(0,w.Z)(n,[{key:"applyGradients",value:function(e){var t=this;(Array.isArray(e)?e.map((function(e){return e.name})):Object.keys(e)).forEach((function(n,r){var a=h.BV.registeredVariables[n];if(null==t.accumulations[r]){t.accumulations[r]={originalName:"".concat(n,"/momentum"),variable:(0,Kt.lu)((function(){return(0,en.P)(a).variable(false)}))}}var o=t.accumulations[r].variable,i=Array.isArray(e)?e[r].tensor:e[n];null!=i&&(0,Kt.lu)((function(){var e,n=(0,Xt.I)((0,$t.d)(t.m,o),i);e=t.useNesterov?(0,Xt.I)((0,$t.d)(t.c,(0,Xt.I)(i,(0,$t.d)(n,t.m))),a):(0,Xt.I)((0,$t.d)(t.c,n),a),o.assign(n),a.assign(e)}))})),this.incrementIterations()}},{key:"dispose",value:function(){this.m.dispose(),null!=this.accumulations&&(0,Kt.B9)(this.accumulations.map((function(e){return e.variable})))}},{key:"setMomentum",value:function(e){this.momentum=e}},{key:"getWeights",value:function(){var e=(0,S.Z)(N().mark((function e(){return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.saveIterations();case 2:return e.t0=e.sent,e.abrupt("return",[e.t0].concat(this.accumulations.map((function(e){return{name:e.originalName,tensor:e.variable}}))));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setWeights",value:function(){var e=(0,S.Z)(N().mark((function e(t){return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.extractIterations(t);case 2:t=e.sent,!1,this.accumulations=t.map((function(e){return{originalName:e.name,variable:e.tensor.variable(false)}}));case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getConfig",value:function(){return{learningRate:this.learningRate,momentum:this.momentum,useNesterov:this.useNesterov}}}],[{key:"fromConfig",value:function(e,t){return new e(t.learningRate,t.momentum,t.useNesterov)}}]),n}(hn);mn.className="Momentum",At(mn);var vn=function(e){(0,Ht.Z)(n,e);var t=(0,Gt.Z)(n);function n(e){var r,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.9,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,s=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if((0,x.Z)(this,n),(r=t.call(this)).learningRate=e,r.decay=a,r.momentum=o,r.epsilon=i,r.accumulatedMeanSquares=[],r.accumulatedMoments=[],r.accumulatedMeanGrads=[],r.centered=s,null==i&&(r.epsilon=h.BV.backend.epsilon()),null==e)throw new Error("learningRate for RMSPropOptimizer must be defined.");return r}return(0,w.Z)(n,[{key:"applyGradients",value:function(e){var t=this;(Array.isArray(e)?e.map((function(e){return e.name})):Object.keys(e)).forEach((function(n,r){var a=h.BV.registeredVariables[n],o=!1;null==t.accumulatedMeanSquares[r]&&(t.accumulatedMeanSquares[r]={originalName:"".concat(n,"/rms"),variable:(0,Kt.lu)((function(){return(0,en.P)(a).variable(o)}))}),null==t.accumulatedMoments[r]&&(t.accumulatedMoments[r]={originalName:"".concat(n,"/momentum"),variable:(0,Kt.lu)((function(){return(0,en.P)(a).variable(o)}))}),null==t.accumulatedMeanGrads[r]&&t.centered&&(t.accumulatedMeanGrads[r]={originalName:"".concat(n,"/mg"),variable:(0,Kt.lu)((function(){return(0,en.P)(a).variable(o)}))});var i=Array.isArray(e)?e[r].tensor:e[n];if(null!=i){var s=t.accumulatedMeanSquares[r].variable,u=t.accumulatedMoments[r].variable;(0,Kt.lu)((function(){var e=(0,Xt.I)((0,$t.d)(s,t.decay),(0,$t.d)((0,Qt.h)(i),1-t.decay));if(t.centered){var n=t.accumulatedMeanGrads[r].variable,o=(0,Xt.I)((0,$t.d)(n,t.decay),(0,$t.d)(i,1-t.decay)),c=(0,Yt.h)((0,$t.d)(i,t.learningRate),(0,Jt._)((0,cn.l)(e,(0,Xt.I)((0,Qt.h)(o),t.epsilon)))),l=(0,Xt.I)((0,$t.d)(u,t.momentum),c);s.assign(e),n.assign(o),u.assign(l);var f=(0,cn.l)(a,l);a.assign(f)}else{var d=(0,Xt.I)((0,$t.d)(s,t.decay),(0,$t.d)((0,Qt.h)(i),1-t.decay)),p=(0,Xt.I)((0,$t.d)(u,t.momentum),(0,Yt.h)((0,$t.d)(i,t.learningRate),(0,Jt._)((0,Xt.I)(d,t.epsilon))));s.assign(d),u.assign(p);var h=(0,cn.l)(a,p);a.assign(h)}}))}})),this.incrementIterations()}},{key:"dispose",value:function(){null!=this.accumulatedMeanSquares&&(0,Kt.B9)(this.accumulatedMeanSquares.map((function(e){return e.variable}))),null!=this.accumulatedMeanGrads&&this.centered&&(0,Kt.B9)(this.accumulatedMeanGrads.map((function(e){return e.variable}))),null!=this.accumulatedMoments&&(0,Kt.B9)(this.accumulatedMoments.map((function(e){return e.variable})))}},{key:"getWeights",value:function(){var e=(0,S.Z)(N().mark((function e(){var t;return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[].concat((0,Ze.Z)(this.accumulatedMeanSquares),(0,Ze.Z)(this.accumulatedMoments)),this.centered&&t.push.apply(t,(0,Ze.Z)(this.accumulatedMeanGrads)),e.next=4,this.saveIterations();case 4:return e.t0=e.sent,e.abrupt("return",[e.t0].concat(t.map((function(e){return{name:e.originalName,tensor:e.variable}}))));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setWeights",value:function(){var e=(0,S.Z)(N().mark((function e(t){var n,r;return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.extractIterations(t);case 2:t=e.sent,n=this.centered?t.length/3:t.length/2,r=!1,this.accumulatedMeanSquares=t.slice(0,n).map((function(e){return{originalName:e.name,variable:e.tensor.variable(r)}})),this.accumulatedMoments=t.slice(n,2*n).map((function(e){return{originalName:e.name,variable:e.tensor.variable(r)}})),this.centered&&(this.accumulatedMeanGrads=t.slice(2*n,3*n).map((function(e){return{originalName:e.name,variable:e.tensor.variable(r)}})));case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getConfig",value:function(){return{learningRate:this.learningRate,decay:this.decay,momentum:this.momentum,epsilon:this.epsilon,centered:this.centered}}}],[{key:"fromConfig",value:function(e,t){return new e(t.learningRate,t.decay,t.momentum,t.epsilon,t.centered)}}]),n}(rn);vn.className="RMSProp",At(vn);var gn=function(){function e(){(0,x.Z)(this,e)}return(0,w.Z)(e,null,[{key:"sgd",value:function(e){return new hn(e)}},{key:"momentum",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return new mn(e,t,n)}},{key:"rmsprop",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.9,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return new vn(e,t,n,r,a)}},{key:"adam",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.001,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.9,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.999,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return new ln(e,t,n,r)}},{key:"adadelta",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.001,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.95,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return new an(e,t,n)}},{key:"adamax",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.002,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.9,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.999,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;return new pn(e,t,n,r,a)}},{key:"adagrad",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.1;return new sn(e,t)}}]),e}(),yn=n(3525),bn=n(5317),xn=n(7627),wn={sgd:gn.sgd,momentum:gn.momentum,adadelta:gn.adadelta,adagrad:gn.adagrad,rmsprop:gn.rmsprop,adamax:gn.adamax,adam:gn.adam},kn="undefined"!==typeof requestAnimationFrame?requestAnimationFrame:"undefined"!==typeof setImmediate?setImmediate:function(e){return e()};function Sn(){return new Promise((function(e){return kn((function(){return e()}))}))}var _n=n(8473);function Nn(e,t){var n=e[0].length;e.forEach((function(e,t){I.hu(e.length===n,(function(){return"Error in concat".concat(n,"D: rank of tensors[").concat(t,"] must be the same ")+"as the rank of the rest (".concat(n,")")}))})),I.hu(t>=0&&t<n,(function(){return"Error in concat".concat(n,"D: axis must be between 0 and ").concat(n-1,".")}));var r=e[0];e.forEach((function(e,a){for(var o=0;o<n;o++)I.hu(o===t||e[o]===r[o],(function(){return"Error in concat".concat(n,"D: Shape of tensors[").concat(a,"] (").concat(e,") ")+"does not match the shape of the rest (".concat(r,") ")+"along the non-concatenated axis ".concat(a,".")}))}))}function En(e,t){for(var n=e[0].slice(),r=1;r<e.length;r++)n[t]+=e[r][t];return n}var Cn=n(6190),Tn=n(5171),In=30;function On(e){return e<=In?e:(0,I.jP)(e,Math.floor(Math.sqrt(e)))}function An(e,t,n){return[n*("number"===typeof e?e:e[0]),t*("number"===typeof e?e:e[1])]}function Dn(e,t,n){var r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],a=[];if(r)(a=a.concat(t.slice(0))).push(e[0]/n),a=a.concat(e.slice(1));else{a=a.concat(e[0]);for(var o=t.length,i=0;i<o;++i)a=a.concat([e[i+1]/t[i],t[i]]);a=a.concat(e.slice(o+1))}return a}function Mn(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=[];if(n){r.push(t);for(var a=t+1;a<e;++a)a<=2*t?(r.push(a),r.push(a-(t+1))):r.push(a)}else{for(var o=[],i=[],s=1;s<e;++s)s>=2*t+1||s%2===1?i.push(s):o.push(s);r.push.apply(r,o),r.push(0),r.push.apply(r,i)}return r}function Rn(e,t,n){var r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],a=[];r?a.push(e[0]/n):a.push(e[0]*n);for(var o=1;o<e.length;++o)o<=t.length?r?a.push(t[o-1]*e[o]):a.push(e[o]/t[o-1]):a.push(e[o]);return a}function Pn(e,t){for(var n=[0],r=0;r<t;++r)n.push(e[r][0]);return n}function jn(e,t,n){for(var r=e.slice(0,1),a=0;a<n;++a)r.push(e[a+1]-t[a][0]-t[a][1]);return r}var Fn=n(349),Ln=.3275911,Bn=.254829592,zn=-.284496736,Zn=1.421413741,Vn=-1.453152027,Un=1.061405429,qn=n(7269);function Wn(e,t){if(e.length!==t.length)throw new Error("Cannot merge real and imag arrays of different lengths. real:"+"".concat(e.length,", imag: ").concat(t.length,"."));for(var n=new Float32Array(2*e.length),r=0;r<n.length;r+=2)n[r]=e[r/2],n[r+1]=t[r/2];return n}function Hn(e){for(var t=new Float32Array(e.length/2),n=new Float32Array(e.length/2),r=0;r<e.length;r+=2)t[r/2]=e[r],n[r/2]=e[r+1];return{real:t,imag:n}}function Gn(e){for(var t=Math.ceil(e.length/4),n=new Float32Array(t),r=new Float32Array(t),a=0;a<e.length;a+=4)n[Math.floor(a/4)]=e[a],r[Math.floor(a/4)]=e[a+1];return{real:n,imag:r}}function Kn(e){for(var t=Math.floor(e.length/4),n=new Float32Array(t),r=new Float32Array(t),a=2;a<e.length;a+=4)n[Math.floor(a/4)]=e[a],r[Math.floor(a/4)]=e[a+1];return{real:n,imag:r}}function Xn(e,t){return{real:e[2*t],imag:e[2*t+1]}}function Yn(e,t,n,r){e[2*r]=t,e[2*r+1]=n}function $n(e,t){for(var n=new Float32Array(e/2),r=new Float32Array(e/2),a=0;a<Math.ceil(e/2);a++){var o=(t?2:-2)*Math.PI*(a/e);n[a]=Math.cos(o),r[a]=Math.sin(o)}return{real:n,imag:r}}function Jn(e,t,n){var r=(n?2:-2)*Math.PI*(e/t);return{real:Math.cos(r),imag:Math.sin(r)}}var Qn="->",er=/->/g;function tr(e,t){var n=((e=e.replace(/\s/g,"")).length-e.replace(er,"").length)/Qn.length;if(n<1)throw new Error("Equations without an arrow are not supported.");if(n>1)throw new Error('Equation must contain exactly one arrow ("'.concat(Qn,'").'));var r=e.split(Qn),a=(0,E.Z)(r,2),o=a[0],i=a[1];(0,I.hu)(-1===o.indexOf("..."),(function(){return'The ellipsis notation ("'.concat("...",'") is not supported yet.')}));var s=o.split(","),u=s.length;if(t!==u)throw new Error("Expected ".concat(u," input tensors, received ").concat(t));if(u>2)throw new Error("Support for more than 2 input tensors is not implemented yet.");for(var c=[],l=function(e){var t=i[e];if(!s.some((function(e){return-1!==e.indexOf(t)})))throw new Error("Output subscripts contain the label ".concat(t," ")+"not present in the input subscripts.");-1===c.indexOf(t)&&c.push(t)},f=0;f<i.length;++f)l(f);for(var d=0;d<o.length;++d){var p=o[d];-1===c.indexOf(p)&&","!==p&&c.push(p)}for(var h=new Array(s.length),m=0;m<u;++m){if(new Set(s[m].split("")).size!==s[m].length)throw new Error("Found duplicate axes in input component ".concat(s[m],". ")+"Support for duplicate axes in input is not implemented yet.");h[m]=[];for(var v=0;v<s[m].length;++v)h[m].push(c.indexOf(s[m][v]))}for(var g=c.length,y=[],b=i.length;b<g;++b)y.push(b);return{allDims:c,summedDims:y,idDims:h}}function nr(e,t){var n=new Array(e);n.fill(-1);for(var r=0;r<t.length;++r)n[t[r]]=r;for(var a=[],o=0;o<e;++o)-1===n[o]&&a.push(o);return{permutationIndices:n=n.filter((function(e){return-1!==e})),expandDims:a}}function rr(e,t,n){for(var r=new Array(e),a=function(e){for(var a=n[e].shape,o=function(n){void 0===r[t[e][n]]?r[t[e][n]]=a[n]:(0,I.hu)(r[t[e][n]]===a[n],(function(){return"Expected dimension ".concat(r[t[e][n]]," at axis ").concat(n," ")+"of input shaped ".concat(JSON.stringify(a),", ")+"but got dimension ".concat(a[n])}))},i=0;i<t[e].length;++i)o(i)},o=0;o<n.length;++o)a(o)}function ar(e,t){var n,r=e,a=[];0===e.length&&r.push(-1),n=e.length+1;for(var o=0;o<n;++o)a.push([]);for(var i=[],s=0;s<r.length;++s){var u,c=ir(t,r[s]),l=(0,k.Z)(c);try{for(l.s();!(u=l.n()).done;){var f=u.value;-1===i.indexOf(f)&&(a[s].push(f),i.push(f))}}catch(Tr){l.e(Tr)}finally{l.f()}}return{path:r,steps:a}}function or(e){return e.every((function(e,t){return e===t}))}function ir(e,t){for(var n=[],r=0;r<e.length;++r)0!==e[r].length&&-1===e[r].indexOf(t)&&-1!==t||n.push(r);return n}function sr(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=[];if("number"===typeof t)(0,I.hu)(e.shape[n]%t===0,(function(){return"Number of splits must evenly divide the axis."})),r=new Array(t).fill(e.shape[n]/t);else{var a=t.reduce((function(e,t){return-1===t&&(e+=1),e}),0);(0,I.hu)(a<=1,(function(){return"There should be only one negative value in split array."}));var o=t.indexOf(-1);if(-1!==o){var i=t.reduce((function(e,t){return t>0?e+t:e}));t[o]=e.shape[n]-i}(0,I.hu)(e.shape[n]===t.reduce((function(e,t){return e+t})),(function(){return"The sum of sizes must match the size of the axis dimension."})),r=t}return r}function ur(e){return"Received SparseTensor with denseShape[0] = 0 but\n  indices.shape[0] = ".concat(e)}function cr(e,t){return"indices(".concat(e,", 0) is invalid: ").concat(t," < 0")}function lr(e,t,n){return"indices(".concat(e,", 0) is invalid: ").concat(t," >= ").concat(n)}function fr(e,t){return"only one output dimension may be -1, not both ".concat(e," and ").concat(t)}function dr(e,t){return"size ".concat(e," must be non-negative, not ").concat(t)}function pr(){return"reshape cannot infer the missing input size for an empty tensor unless all specified input sizes are non-zero"}function hr(e,t){var n=(0,I.NA)(e),r=(0,I.NA)(t);return"Input to reshape is a SparseTensor with ".concat(n,"\n  dense values, but the requested shape requires a multiple of ").concat(r,". inputShape=").concat(e," outputShape= ").concat(t)}function mr(e,t){var n=(0,I.NA)(e),r=(0,I.NA)(t);return"Input to reshape is a tensor with ".concat(n," dense values, but the requested shape has ").concat(r,". inputShape=").concat(e," outputShape=").concat(t)}function vr(){return"segment ids must be >= 0"}function gr(){return"segment ids are not increasing"}function yr(e,t){return"Segment id ".concat(e," out of range [0, ").concat(t,"), possibly because segmentIds input is not sorted.")}function br(e,t,n){return"Bad: indices[".concat(e,"] == ").concat(t," out of range [0, ").concat(n,")")}function xr(e,t){var n,r=!1;for(e<=In?(n=e,r=!0):n=(0,I.jP)(e,Math.floor(Math.sqrt(e)));!r;)n>t||n===e?r=!0:n=(0,I.jP)(e,n+1);return n}function wr(e,t,n){for(var r=[],a=e.length,o=0;o<a;o++)o!==t?r.push(e[o]):r.push(n);return r}function kr(e,t,n,r){var a=t.shape.length,o=e.shape.length;if(0!==r&&(r<-a||r>a))throw new Error("Expect batchDims in the range of [-".concat(a,", ").concat(a,"], but got ").concat(r));if(r<0&&(r+=a),r>o)throw new Error("batchDims (".concat(r,") must be less than rank(x) (\n    ").concat(o,")."));if(n<r)throw new Error("batchDims (".concat(r,") must be less than or equal to axis (").concat(n,")."));for(var i=0;i<r;++i)if(e.shape[i]!==t.shape[i])throw new Error("x.shape[".concat(i,"]: ").concat(e.shape[i]," should be equal to indices.shape[").concat(i,"]: ").concat(t.shape[i],"."));for(var s=e.shape[n],u=[],c=1,l=1,f=1,d=0;d<r;++d)u.push(e.shape[d]),c*=e.shape[d];for(var p=r;p<n;p++)u.push(e.shape[p]),l*=e.shape[p];for(var h=r;h<a;h++)u.push(t.shape[h]);for(var m=n+1;m<o;m++)u.push(e.shape[m]),f*=e.shape[m];return{batchSize:c,sliceSize:f,outerSize:l,dimSize:s,outputShape:u}}function Sr(e){try{return e.map((function(e){return(0,Mt.decodeString)(e)}))}catch(Tr){throw new Error("Failed to decode encoded string bytes into utf-8, error: ".concat(Tr))}}function _r(e){return e.map((function(e){return(0,Mt.encodeString)(e)}))}var Nr=n(745),Er=n(4189),Cr=n(4679)},2145:function(e,t,n){"use strict";n.d(t,{SY:function(){return r},VG:function(){return a},Sp:function(){return o},mm:function(){return i},Xz:function(){return s},oT:function(){return u},IK:function(){return c},sJ:function(){return l},aJ:function(){return f},M2:function(){return d},qw:function(){return p},jM:function(){return h},Oy:function(){return m},QC:function(){return v},Jh:function(){return g},RO:function(){return y},_k:function(){return b},IM:function(){return x},XL:function(){return w},zw:function(){return k},zv:function(){return S},Ly:function(){return _},eE:function(){return N},RF:function(){return E},gJ:function(){return C},xn:function(){return T},Zz:function(){return I},yj:function(){return O},Eh:function(){return A},mh:function(){return D},wU:function(){return M},wm:function(){return R},x1:function(){return P},o2:function(){return j},ik:function(){return F},mc:function(){return L},TR:function(){return B},iH:function(){return z},Vc:function(){return Z},QR:function(){return V},T0:function(){return U},ci:function(){return q},sL:function(){return W},y7:function(){return H},$w:function(){return G},p4:function(){return K},ek:function(){return X},Vn:function(){return Y},oH:function(){return $},$g:function(){return J},SX:function(){return Q},HE:function(){return ee},Om:function(){return te},hd:function(){return ne},NE:function(){return re},YF:function(){return ae},Y0:function(){return oe},vw:function(){return ie},de:function(){return se},Uy:function(){return ue},OR:function(){return ce},je:function(){return le},sH:function(){return fe},qi:function(){return de},q1:function(){return pe},iZ:function(){return he},Ac:function(){return me},iJ:function(){return ve},Qg:function(){return ge},J_:function(){return ye},av:function(){return be},iW:function(){return xe},r7:function(){return we},J$:function(){return ke},vt:function(){return Se},CA:function(){return _e},e7:function(){return Ne},Zb:function(){return Ee},kU:function(){return Ce},PY:function(){return Te},Vf:function(){return Ie},MZ:function(){return Oe},qC:function(){return Ae},eZ:function(){return De},Hh:function(){return Me},Yo:function(){return Re},BM:function(){return Pe},mT:function(){return je},OV:function(){return Fe},OA:function(){return Le},OU:function(){return Be},vF:function(){return ze},q2:function(){return Ze},c1:function(){return Ve},q8:function(){return Ue},jQ:function(){return qe},Vb:function(){return We},NZ:function(){return He},wY:function(){return Ge},ku:function(){return Ke},yQ:function(){return Xe},uv:function(){return Ye},cy:function(){return $e},W0:function(){return Je},qW:function(){return Qe},we:function(){return et},Qi:function(){return tt},ly:function(){return nt},Kg:function(){return rt},pe:function(){return at},o0:function(){return ot},Dl:function(){return it},e6:function(){return st},xJ:function(){return ut},$H:function(){return ct},qk:function(){return lt},HZ:function(){return ft},dp:function(){return dt},Hm:function(){return pt},_Y:function(){return ht},zb:function(){return mt},Sb:function(){return vt},mK:function(){return gt},e0:function(){return yt},bV:function(){return bt},xQ:function(){return xt},Ph:function(){return wt},oF:function(){return kt},p2:function(){return St},RQ:function(){return _t},w3:function(){return Nt},i5:function(){return Et},a5:function(){return Ct},MR:function(){return Tt},FK:function(){return It},GB:function(){return Ot},TQ:function(){return At},L8:function(){return Dt},Gc:function(){return Mt},O3:function(){return Rt},nh:function(){return Pt},YW:function(){return jt},Zj:function(){return Ft},D2:function(){return Lt},_t:function(){return Bt},bK:function(){return zt},m2:function(){return Zt},_J:function(){return Vt},s1:function(){return Ut},Xk:function(){return qt},Tr:function(){return Wt},sE:function(){return Ht},MI:function(){return Gt},n9:function(){return Kt},cW:function(){return Xt},wx:function(){return Yt},G3:function(){return $t},kp:function(){return Jt},To:function(){return Qt},Qv:function(){return en},Ru:function(){return tn},h8:function(){return nn},eB:function(){return rn},b9:function(){return an},us:function(){return on},_V:function(){return sn},lu:function(){return un}});var r="Abs",a="Acos",o="Acosh",i="Add",s="AddN",u="All",c="Any",l="ArgMax",f="ArgMin",d="Asin",p="Asinh",h="Atan",m="Atanh",v="Atan2",g="AvgPool",y="AvgPoolGrad",b="AvgPool3D",x="AvgPool3DGrad",w="BatchMatMul",k="BatchToSpaceND",S="Bincount",_="BroadcastTo",N="BroadcastArgs",E="Cast",C="Ceil",T="ClipByValue",I="Complex",O="ComplexAbs",A="Concat",D="Conv2D",M="Conv2DBackpropFilter",R="Conv2DBackpropInput",P="Conv3D",j="Conv3DBackpropFilterV2",F="Conv3DBackpropInputV2",L="Cos",B="Cosh",z="Cumsum",Z="CropAndResize",V="DenseBincount",U="DepthToSpace",q="DepthwiseConv2dNative",W="DepthwiseConv2dNativeBackpropFilter",H="DepthwiseConv2dNativeBackpropInput",G="Diag",K="Dilation2D",X="Dilation2DBackpropInput",Y="Dilation2DBackpropFilter",$="RealDiv",J="Einsum",Q="Elu",ee="EluGrad",te="Erf",ne="Equal",re="Exp",ae="ExpandDims",oe="Expm1",ie="FFT",se="Fill",ue="FlipLeftRight",ce="Floor",le="FloorDiv",fe="FusedBatchNorm",de="GatherV2",pe="GatherNd",he="Greater",me="GreaterEqual",ve="Identity",ge="IFFT",ye="Imag",be="IsFinite",xe="IsInf",we="IsNan",ke="LeakyRelu",Se="Less",_e="LessEqual",Ne="LinSpace",Ee="Log",Ce="Log1p",Te="LogicalAnd",Ie="LogicalNot",Oe="LogicalOr",Ae="LogSoftmax",De="LRN",Me="LRNGrad",Re="Max",Pe="Maximum",je="MaxPool",Fe="MaxPoolGrad",Le="MaxPool3D",Be="MaxPool3DGrad",ze="MaxPoolWithArgmax",Ze="Mean",Ve="Min",Ue="Minimum",qe="MirrorPad",We="Mod",He="Multinomial",Ge="Multiply",Ke="Neg",Xe="NotEqual",Ye="NonMaxSuppressionV3",$e="NonMaxSuppressionV4",Je="NonMaxSuppressionV5",Qe="OnesLike",et="OneHot",tt="Pack",nt="PadV2",rt="Pool",at="Pow",ot="Prelu",it="Prod",st="Range",ut="Real",ct="Reciprocal",lt="Relu",ft="Reshape",dt="ResizeNearestNeighbor",pt="ResizeNearestNeighborGrad",ht="ResizeBilinear",mt="ResizeBilinearGrad",vt="Relu6",gt="Reverse",yt="Round",bt="Rsqrt",xt="ScatterNd",wt="Select",kt="Selu",St="Slice",_t="Sin",Nt="Sinh",Et="Sign",Ct="Sigmoid",Tt="Softplus",It="Sqrt",Ot="Sum",At="SpaceToBatchND",Dt="SplitV",Mt="Softmax",Rt="SparseFillEmptyRows",Pt="SparseReshape",jt="SparseSegmentMean",Ft="SparseSegmentSum",Lt="SparseToDense",Bt="SquaredDifference",zt="Square",Zt="StridedSlice",Vt="StringNGrams",Ut="StringSplit",qt="StringToHashBucketFast",Wt="Sub",Ht="Tan",Gt="Tanh",Kt="Tile",Xt="TopK",Yt="Transform",$t="Transpose",Jt="Unique",Qt="Unpack",en="UnsortedSegmentSum",tn="ZerosLike",nn="Step",rn="FromPixels",an="RotateWithOffset",on="_FusedMatMul",sn="FusedConv2D",un="FusedDepthwiseConv2D"},8864:function(e,t,n){"use strict";n.d(t,{pI:function(){return c},uk:function(){return l},tr:function(){return f},wC:function(){return d},Li:function(){return p},nE:function(){return h},bt:function(){return m},T3:function(){return v}});var r=n(9439),a=n(5050),o=n(6581),i=n(7269),s=(0,o.R)("kernelRegistry",(function(){return new Map})),u=(0,o.R)("gradRegistry",(function(){return new Map}));function c(e,t){var n=g(e,t);return s.get(n)}function l(e){return u.get(e)}function f(e){for(var t=s.entries(),n=[];;){var a=t.next(),o=a.done,i=a.value;if(o)break;var u=(0,r.Z)(i,2),c=u[0],l=u[1],f=c.split("_");(0,r.Z)(f,1)[0]===e&&n.push(l)}return n}function d(e){var t=e.kernelName,n=e.backendName,r=g(t,n);s.has(r)&&i.Z("The kernel '".concat(t,"' for backend ")+"'".concat(n,"' is already registered")),s.set(r,e)}function p(e){var t=e.kernelName;u.has(t)&&(0,a.OB)().getBool("DEBUG")&&i.Z("Overriding the gradient for '".concat(t,"'")),u.set(t,e)}function h(e,t){var n=g(e,t);if(!s.has(n))throw new Error("The kernel '".concat(e,"' for backend ")+"'".concat(t,"' is not registered"));s.delete(n)}function m(e){if(!u.has(e))throw new Error("The gradient '".concat(e,"' for backend is not registered"));u.delete(e)}function v(e,t){f(e).forEach((function(e){d(Object.assign({},e,{backendName:t}))}))}function g(e,t){return"".concat(t,"_").concat(e)}},7269:function(e,t,n){"use strict";n.d(t,{Z:function(){return a},c:function(){return o}});var r=n(5050);function a(){var e;(0,r.OB)().getBool("IS_TEST")||(0,r.OB)().getBool("PROD")||(e=console).warn.apply(e,arguments)}function o(){var e;(0,r.OB)().getBool("IS_TEST")||(0,r.OB)().getBool("PROD")||(e=console).log.apply(e,arguments)}},7613:function(e,t,n){"use strict";n.d(t,{W:function(){return i}});var r=n(318),a=n(2145),o=n(8354);var i=(0,n(8640).op)({abs_:function(e){var t=(0,o._1)(e,"x","abs");if("complex64"===t.dtype){var n={x:t};return r.BV.runKernel(a.yj,n)}var i={x:t};return r.BV.runKernel(a.SY,i)}})},1719:function(e,t,n){"use strict";n.d(t,{K:function(){return i}});var r=n(318),a=n(2145),o=n(8354);var i=(0,n(8640).op)({acos_:function(e){var t={x:(0,o._1)(e,"x","acos")};return r.BV.runKernel(a.VG,t)}})},4502:function(e,t,n){"use strict";n.d(t,{_:function(){return i}});var r=n(318),a=n(2145),o=n(8354);var i=(0,n(8640).op)({acosh_:function(e){var t={x:(0,o._1)(e,"x","acosh")};return r.BV.runKernel(a.Sp,t)}})},3312:function(e,t,n){"use strict";n.d(t,{I:function(){return u}});var r=n(9439),a=n(318),o=n(2145),i=n(9064),s=n(8354);var u=(0,n(8640).op)({add_:function(e,t){var n=(0,s._1)(e,"a","add"),u=(0,s._1)(t,"b","add"),c=(0,i.makeTypesMatch)(n,u),l=(0,r.Z)(c,2),f={a:n=l[0],b:u=l[1]};return a.BV.runKernel(o.mm,f)}})},5506:function(e,t,n){"use strict";n.d(t,{Q:function(){return s}});var r=n(318),a=n(2145),o=n(8354),i=n(6147);var s=(0,n(8640).op)({addN_:function(e){i.hu(Array.isArray(e),(function(){return"The argument passed to tf.addN() must be a list of tensors"})),i.hu(e.length>=1,(function(){return"Must pass at least one tensor to tf.addN(), but got "+"".concat(e.length)}));var t=e.map((function(e,t){return(0,o._1)(e,"tensors".concat(t),"addN")})),n=t[0];t.forEach((function(e){if(e.dtype!==n.dtype)throw new Error("All tensors passed to tf.addN() must have the same dtype")})),t.forEach((function(e){if(!i.cO(e.shape,n.shape))throw new Error("All tensors passed to tf.addN() must have the same shape")}));var s=t;return r.BV.runKernel(a.Xz,s)}})},4108:function(e,t,n){"use strict";n.d(t,{$:function(){return i}});var r=n(318),a=n(2145),o=n(8354);var i=(0,n(8640).op)({all_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=(0,o._1)(e,"x","all","bool"),s={x:i},u={axis:t,keepDims:n};return r.BV.runKernel(a.oT,s,u)}})},8543:function(e,t,n){"use strict";n.d(t,{Y:function(){return i}});var r=n(318),a=n(2145),o=n(8354);var i=(0,n(8640).op)({any_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=(0,o._1)(e,"x","any","bool"),s={x:i},u={axis:t,keepDims:n};return r.BV.runKernel(a.IK,s,u)}})},9995:function(e,t,n){"use strict";n.d(t,{N:function(){return i}});var r=n(318),a=n(2145),o=n(8354);var i=(0,n(8640).op)({argMax_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(0,o._1)(e,"x","argMax"),i={x:n},s={axis:t};return r.BV.runKernel(a.sJ,i,s)}})},5157:function(e,t,n){"use strict";n.d(t,{v:function(){return i}});var r=n(318),a=n(2145),o=n(8354);var i=(0,n(8640).op)({argMin_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(0,o._1)(e,"x","argMin"),i={x:n},s={axis:t};return r.BV.runKernel(a.aJ,i,s)}})},3053:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=n(318),a=n(2145),o=n(8354);var i=(0,n(8640).op)({asin_:function(e){var t={x:(0,o._1)(e,"x","asin")};return r.BV.runKernel(a.M2,t)}})},54:function(e,t,n){"use strict";n.d(t,{V:function(){return i}});var r=n(318),a=n(2145),o=n(8354);var i=(0,n(8640).op)({asinh_:function(e){var t={x:(0,o._1)(e,"x","asinh")};return r.BV.runKernel(a.qw,t)}})},4778:function(e,t,n){"use strict";n.d(t,{z:function(){return i}});var r=n(318),a=n(2145),o=n(8354);var i=(0,n(8640).op)({atan_:function(e){var t={x:(0,o._1)(e,"x","atan")};return r.BV.runKernel(a.jM,t)}})},2227:function(e,t,n){"use strict";n.d(t,{f:function(){return u}});var r=n(9439),a=n(318),o=n(2145),i=n(9064),s=n(8354);var u=(0,n(8640).op)({atan2_:function(e,t){var n=(0,s._1)(e,"a","atan2"),u=(0,s._1)(t,"b","atan2"),c=(0,i.makeTypesMatch)(n,u),l=(0,r.Z)(c,2),f={a:n=l[0],b:u=l[1]};return a.BV.runKernel(o.QC,f)}})},6115:function(e,t,n){"use strict";n.d(t,{C:function(){return i}});var r=n(318),a=n(2145),o=n(8354);var i=(0,n(8640).op)({atanh_:function(e){var t={x:(0,o._1)(e,"x","atanh")};return r.BV.runKernel(a.Oy,t)}})},6573:function(e,t,n){"use strict";n.d(t,{w:function(){return f}});var r=n(318),a=n(2145),o=n(8354),i=n(6147),s=n(9118),u=n(6190),c=n(8640),l=n(5561);var f=(0,c.op)({avgPool_:function(e,t,n,c,f){var d=(0,o._1)(e,"x","avgPool","float32");i.hu(u.jT(n,1),(function(){return"Error in avgPool: Either strides or dilations must be 1. "+"Got strides ".concat(n," and dilations '").concat(1,"'")}));var p=d,h=!1;3===d.rank&&(h=!0,p=(0,l.X)(d,[1,d.shape[0],d.shape[1],d.shape[2]])),i.hu(4===p.rank,(function(){return"Error in avgPool: x must be rank 4 but got rank ".concat(p.rank,".")})),u.m("avgPool",c,f);var m={x:p},v={filterSize:t,strides:n,pad:c,dimRoundingMode:f},g=r.BV.runKernel(a.Jh,m,v);return g=(0,s.p)(g,d.dtype),h?(0,l.X)(g,[g.shape[1],g.shape[2],g.shape[3]]):g}})},5840:function(e,t,n){"use strict";n.d(t,{u:function(){return f}});var r=n(318),a=n(2145),o=n(8354),i=n(6147),s=n(6190),u=n(9118),c=n(8640),l=n(5561);var f=(0,c.op)({avgPool3d_:function(e,t,n,c,f){var d=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"NDHWC",p=(0,o._1)(e,"x","avgPool3d","float32"),h=p,m=!1;4===p.rank&&(m=!0,h=(0,l.X)(p,[1,p.shape[0],p.shape[1],p.shape[2],p.shape[3]])),i.hu(5===h.rank,(function(){return"Error in avgPool3d: x must be rank 5 but got rank ".concat(h.rank,".")})),i.hu("NDHWC"===d,(function(){return"Error in avgPool3d: Only NDHWC is currently supported, "+"but got dataFormat of ".concat(d)})),(0,s.m)("avgPool3d",c,f);var v={x:h},g={filterSize:t,strides:n,pad:c,dimRoundingMode:f,dataFormat:d},y=r.BV.runKernel(a._k,v,g);return y=(0,u.p)(y,h.dtype),m?(0,l.X)(y,[y.shape[1],y.shape[2],y.shape[3],y.shape[4]]):y}})},8473:function(e,t,n){"use strict";n.d(t,{YB:function(){return a},Vh:function(){return o},kz:function(){return i},rv:function(){return s},lB:function(){return u},Q3:function(){return c},LJ:function(){return l},sY:function(){return f}});var r=n(6147);function a(e,t){for(var n=0;n<e.length;++n)if(e[e.length-n-1]!==t-1-n)return!1;return!0}function o(e,t,n){for(var r=e.length+t.length,a=[],o=0,i=0,s=0;s<r;s++)-1===n.indexOf(s)?a.push(e[o++]):a.push(t[i++]);return a}function i(e,t){for(var n=[],r=e.length,a=0;a<r;a++)-1===t.indexOf(a)&&n.push(e[a]);var o=t.map((function(t){return e[t]}));return[n,o]}function s(e,t){return o(e,t.map((function(e){return 1})),t)}function u(e,t,n){r.hu(a(t,n),(function(){return"".concat(e," supports only inner-most axes for now. ")+"Got axes ".concat(t," and rank-").concat(n," input.")}))}function c(e,t){if(a(e,t))return null;for(var n=[],r=0;r<t;++r)-1===e.indexOf(r)&&n.push(r);return e.forEach((function(e){return n.push(e)})),n}function l(e){return e.map((function(e,t){return[t,e]})).sort((function(e,t){return e[1]-t[1]})).map((function(e){return e[0]}))}function f(e,t){for(var n=[],r=t-e;r<t;++r)n.push(r);return n}},6994:function(e,t,n){"use strict";n.d(t,{E:function(){return s}});var r=n(318),a=n(2145),o=n(8354),i=n(6147);var s=(0,n(8640).op)({batchToSpaceND_:function(e,t,n){var s=(0,o._1)(e,"x","batchToSpaceND"),u=t.reduce((function(e,t){return e*t}));i.hu(s.rank>=1+t.length,(function(){return"input rank is ".concat(s.rank," but should be > than blockShape.length ").concat(t.length)})),i.hu(n.length===t.length,(function(){return"crops.length is ".concat(n.length," but should be equal to blockShape.length  ").concat(t.length)})),i.hu(s.shape[0]%u===0,(function(){return"input tensor batch is ".concat(s.shape[0]," but is not divisible by the product of ")+"the elements of blockShape ".concat(t.join(" * ")," === ").concat(u)}));var c={x:s},l={blockShape:t,crops:n};return r.BV.runKernel(a.zw,c,l)}})},3700:function(e,t,n){"use strict";n.d(t,{t:function(){return u}});var r=n(318),a=n(2145),o=n(8354),i=n(6147),s=n(5561);var u=(0,n(8640).op)({batchNorm_:function(e,t,n,u,c,l){null==l&&(l=.001);var f,d,p=(0,o._1)(e,"x","batchNorm"),h=(0,o._1)(t,"mean","batchNorm"),m=(0,o._1)(n,"variance","batchNorm");null!=c&&(f=(0,o._1)(c,"scale","batchNorm")),null!=u&&(d=(0,o._1)(u,"offset","batchNorm")),i.hu(h.rank===m.rank,(function(){return"Batch normalization gradient requires mean and variance to have equal ranks."})),i.hu(null==d||h.rank===d.rank,(function(){return"Batch normalization gradient requires mean and offset to have equal ranks."})),i.hu(null==f||h.rank===f.rank,(function(){return"Batch normalization gradient requires mean and scale to have equal ranks."}));var v=function(e){return 0===e.rank||1===e.rank?(0,s.X)(e,[1,1,1,e.size]):2===e.rank?(0,s.X)(e,[1,1,e.shape[0],e.shape[1]]):3===e.rank?(0,s.X)(e,[1,e.shape[0],e.shape[1],e.shape[2]]):e}(p),g={x:v,scale:f,offset:d,mean:h,variance:m},y={varianceEpsilon:l},b=r.BV.runKernel(a.sH,g,y);return(0,s.X)(b,p.shape)}})},7531:function(e,t,n){"use strict";n.d(t,{y:function(){return s}});var r=n(318),a=n(2145),o=n(8354),i=n(6147);var s=(0,n(8640).op)({bincount_:function(e,t,n){var s=(0,o._1)(e,"x","bincount"),u=(0,o._1)(t,"weights","bincount");i.hu("int32"===s.dtype,(function(){return"Error in bincount: input "+"dtype must be int32, but got ".concat(s.dtype)})),i.hu(n>=0,(function(){return"size must be non-negative, but got ".concat(n,".")})),i.hu(u.size===s.size||0===u.size,(function(){return"Error in bincount: weights must have the same size as input or"+"0-length, but got input shape: ".concat(s.shape,", weights shape: ")+"".concat(u.shape,".")}));var c={x:s,weights:u},l={size:n};return r.BV.runKernel(a.zv,c,l)}})},238:function(e,t,n){"use strict";n.d(t,{X:function(){return i}});var r=n(318),a=n(2145),o=n(8354);var i=(0,n(8640).op)({broadcastArgs_:function(e,t){var n=(0,o._1)(e,"s0","broadcastArgs","int32"),i=(0,o._1)(t,"s1","broadcastArgs","int32");if(1!==n.rank)throw new Error("broadcastArgs(): first input must be a vector (rank=1). "+"Has rank ".concat(n.rank));if(1!==i.rank)throw new Error("broadcastArgs(): second input must be a vector (rank=1). "+"Has rank ".concat(i.rank));var s={s0:n,s1:i};return r.BV.runKernel(a.eE,s)}})},9742:function(e,t,n){"use strict";n.d(t,{U:function(){return c}});var r=n(318),a=n(2145),o=n(8354),i=n(672),s=n(8640),u=n(5561);var c=(0,s.op)({broadcastTo_:function(e,t){var n=(0,o._1)(e,"broadcastTo","x"),s=n.shape;if(t.some((function(e){return!(e>0)||e%1!==0})))throw new Error("broadcastTo(): Invalid broadcast shape [".concat(t,"]."));if(t.length<n.rank)throw new Error("broadcastTo(): shape.length=".concat(t.length," < input.rank=").concat(n.rank,"."));if(t.length>n.rank){for(var c=n.shape.slice();c.length<t.length;)c.unshift(1);n=(0,u.X)(n,c)}for(var l=n.shape,f=Array.from(t),d=t.length-1;d>=0;d--)if(l[d]===t[d])f[d]=1;else if(1!==n.shape[d])throw new Error("broadcastTo(): [".concat(s,"] cannot be broadcast to [").concat(t,"]."));var p=f.map((function(e,t){return e>1?t:-1})).filter((function(e){return e>=0}));if(0===p.length)return(0,i.d)(n);var h={x:n},m={reps:f};return r.BV.runKernel(a.n9,h,m)}})},9877:function(e,t,n){"use strict";function r(e,t){for(var n=e.length,r=[],a=0;a<n;a++){var o=n-1-a,i=e[o]||1;(t[t.length-1-a]||1)>1&&1===i&&r.unshift(o)}return r}function a(e,t){for(var n=[],r=0;r<t.length;r++){var a=e[e.length-r-1],o=t.length-r-1,i=t[o];(null==a||1===a&&i>1)&&n.unshift(o)}return n}function o(e,t){for(var n=[],r=Math.max(e.length,t.length),a=0;a<r;a++){var o=e[e.length-a-1];null==o&&(o=1);var i=t[t.length-a-1];if(null==i&&(i=1),1===o)n.unshift(i);else if(1===i)n.unshift(o);else{if(o!==i){var s="Operands could not be broadcast together with shapes "+"".concat(e," and ").concat(t,".");throw Error(s)}n.unshift(o)}}return n}n.r(t),n.d(t,{getBroadcastDims:function(){return r},getReductionAxes:function(){return a},assertAndGetBroadcastShape:function(){return o}})},7039:function(e,t,n){"use strict";n.d(t,{f:function(){return o}});var r=n(4376),a=n(6147);function o(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"float32",n=arguments.length>2?arguments[2]:void 0;return t=t||"float32",a.Mu(e),new r.YD(e,t,n)}},9118:function(e,t,n){"use strict";n.d(t,{p:function(){return s}});var r=n(318),a=n(2145),o=n(8354),i=n(6147);var s=(0,n(8640).op)({cast_:function(e,t){var n=(0,o._1)(e,"x","cast");if(!i.LP(t))throw new Error("Failed to cast to unknown dtype ".concat(t));if("string"===t&&"string"!==n.dtype||"string"!==t&&"string"===n.dtype)throw new Error("Only strings can be casted to strings");var s={x:n},u={dtype:t};return r.BV.runKernel(a.RF,s,u)}})},1396:function(e,t,n){"use strict";n.d(t,{m:function(){return i}});var r=n(318),a=n(2145),o=n(8354);var i=(0,n(8640).op)({ceil_:function(e){var t={x:(0,o._1)(e,"x","ceil","float32")};return r.BV.runKernel(a.gJ,t)}})},9836:function(e,t,n){"use strict";n.d(t,{i:function(){return s}});var r=n(318),a=n(2145),o=n(8354),i=n(6147);var s=(0,n(8640).op)({clipByValue_:function(e,t,n){var s=(0,o._1)(e,"x","clipByValue");i.hu(t<=n,(function(){return"Error in clip: min (".concat(t,") must be ")+"less than or equal to max (".concat(n,").")}));var u={x:s},c={clipValueMin:t,clipValueMax:n};return r.BV.runKernel(a.xn,u,c)}})},672:function(e,t,n){"use strict";n.d(t,{d:function(){return i}});var r=n(318),a=n(2145),o=n(8354);var i=(0,n(8640).op)({clone_:function(e){var t={x:(0,o._1)(e,"x","clone","string_or_numeric")};return r.BV.runKernel(a.iJ,t)}})},9253:function(e,t,n){"use strict";n.d(t,{P:function(){return s}});var r=n(318),a=n(2145),o=n(8354),i=n(6147);var s=(0,n(8640).op)({complex_:function(e,t){var n=(0,o._1)(e,"real","complex"),s=(0,o._1)(t,"imag","complex");i.k5(n.shape,s.shape,"real and imag shapes, ".concat(n.shape," and ").concat(s.shape,", ")+"must match in call to tf.complex().");var u={real:n,imag:s};return r.BV.runKernel(a.Zz,u)}})},4836:function(e,t,n){"use strict";n.d(t,{z:function(){return u}});var r=n(318),a=n(2145),o=n(8354),i=n(6147),s=n(672);var u=(0,n(8640).op)({concat_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;(0,i.hu)(e.length>=1,(function(){return"Pass at least one tensor to concat"}));var n=(0,o.sI)(e,"tensors","concat","string_or_numeric");if("complex64"===n[0].dtype&&n.forEach((function(e){if("complex64"!==e.dtype)throw new Error("Cannot concatenate complex64 tensors with a tensor\n          with dtype ".concat(e.dtype,". "))})),1===n.length)return(0,s.d)(n[0]);var u=n,c={axis:t};return r.BV.runKernel(a.Eh,u,c)}})},4918:function(e,t,n){"use strict";n.d(t,{P:function(){return c}});var r=n(8354),a=n(6147),o=n(3457),i=n(6190),s=n(8640),u=n(5561);var c=(0,s.op)({conv1d_:function(e,t,n,s){var c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"NWC",l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1,f=arguments.length>6?arguments[6]:void 0,d=(0,r._1)(e,"x","conv1d"),p=(0,r._1)(t,"filter","conv1d"),h=d,m=!1;2===d.rank&&(m=!0,h=(0,u.X)(d,[1,d.shape[0],d.shape[1]])),a.hu(3===h.rank,(function(){return"Error in conv1d: input must be rank 3, but got rank ".concat(h.rank,".")})),a.hu(3===p.rank,(function(){return"Error in conv1d: filter must be rank 3, but got rank "+"".concat(p.rank,".")})),i.m("conv1d",s,f),a.hu(h.shape[2]===p.shape[1],(function(){return"Error in conv1d: depth of input (".concat(h.shape[2],") must match ")+"input depth for filter ".concat(p.shape[1],".")})),a.hu(i.jT(n,l),(function(){return"Error in conv1D: Either stride or dilation must be 1. "+"Got stride ".concat(n," and dilation '").concat(l,"'")})),a.hu("NWC"===c,(function(){return"Error in conv1d: got dataFormat of ".concat(c," but only NWC is currently supported.")}));var v=(0,u.X)(p,[1,p.shape[0],p.shape[1],p.shape[2]]),g=(0,u.X)(h,[h.shape[0],1,h.shape[1],h.shape[2]]),y=[1,n],b=[1,l],x="NHWC",w=(0,o.T)(g,v,y,s,x,b,f);return m?(0,u.X)(w,[w.shape[2],w.shape[3]]):(0,u.X)(w,[w.shape[0],w.shape[2],w.shape[3]])}})},3457:function(e,t,n){"use strict";n.d(t,{T:function(){return l}});var r=n(318),a=n(2145),o=n(8354),i=n(6147),s=n(6190),u=n(8640),c=n(5561);var l=(0,u.op)({conv2d_:function(e,t,n,u){var l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"NHWC",f=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[1,1],d=arguments.length>6?arguments[6]:void 0,p=(0,o._1)(e,"x","conv2d","float32"),h=(0,o._1)(t,"filter","conv2d","float32"),m=p,v=!1;3===p.rank&&(v=!0,m=(0,c.X)(p,[1,p.shape[0],p.shape[1],p.shape[2]])),i.hu(4===m.rank,(function(){return"Error in conv2d: input must be rank 4, but got rank ".concat(m.rank,".")})),i.hu(4===h.rank,(function(){return"Error in conv2d: filter must be rank 4, but got rank "+"".concat(h.rank,".")})),s.m("conv2d",u,d);var g="NHWC"===l?m.shape[3]:m.shape[1];i.hu(g===h.shape[2],(function(){return"Error in conv2d: depth of input (".concat(g,") must match ")+"input depth for filter ".concat(h.shape[2],".")})),i.hu(s.jT(n,f),(function(){return"Error in conv2D: Either strides or dilations must be 1. "+"Got strides ".concat(n," and dilations '").concat(f,"'")}));var y={x:m,filter:h},b={strides:n,pad:u,dataFormat:l,dilations:f,dimRoundingMode:d},x=r.BV.runKernel(a.mh,y,b);return v?(0,c.X)(x,[x.shape[1],x.shape[2],x.shape[3]]):x}})},8744:function(e,t,n){"use strict";n.d(t,{p:function(){return c}});var r=n(318),a=n(2145),o=n(6147),i=n(6190),s=n(8640),u=n(5561);var c=(0,s.op)({conv2DBackpropFilter_:function(e,t,n,s,c){var l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"NHWC",f=arguments.length>6?arguments[6]:void 0,d=e;3===e.rank&&(d=(0,u.X)(e,[1,e.shape[0],e.shape[1],e.shape[2]]));var p=t;3===p.rank&&(p=(0,u.X)(t,[1,t.shape[0],t.shape[1],t.shape[2]])),o.hu(4===d.rank,(function(){return"Error in conv2dDerFilter: input must be rank 4, but got shape "+"".concat(d.shape,".")})),o.hu(4===p.rank,(function(){return"Error in conv2dDerFilter: dy must be rank 4, but got shape "+"".concat(p.shape,".")})),o.hu(4===n.length,(function(){return"Error in conv2dDerFilter: filterShape must be length 4, but got "+"".concat(n,".")}));var h="NHWC"===l?d.shape[3]:d.shape[1],m="NHWC"===l?p.shape[3]:p.shape[1];o.hu(h===n[2],(function(){return"Error in conv2dDerFilter: depth of input ".concat(h,") must ")+"match input depth in filter (".concat(n[2],".")})),o.hu(m===n[3],(function(){return"Error in conv2dDerFilter: depth of dy (".concat(m,") must ")+"match output depth for filter (".concat(n[3],").")})),i.m("conv2dDerFilter",c,f);var v={x:d,dy:p},g={strides:s,pad:c,dataFormat:l,dimRoundingMode:f,filterShape:n};return r.BV.runKernel(a.wU,v,g)}})},1045:function(e,t,n){"use strict";n.d(t,{_:function(){return c}});var r=n(318),a=n(2145),o=n(6147),i=n(6190),s=n(8640),u=n(5561);var c=(0,s.op)({conv2DBackpropInput_:function(e,t,n,s,c){var l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"NHWC",f=arguments.length>6?arguments[6]:void 0;o.hu(e.length===t.rank,(function(){return"Length of inShape "+"(".concat(e.length,") and rank of dy (").concat(t.rank,") must match")}));var d=e,p=t,h=!1;3===t.rank&&(h=!0,p=(0,u.X)(t,[1,t.shape[0],t.shape[1],t.shape[2]]),d=[1,e[0],e[1],e[2]]),o.hu(4===d.length,(function(){return"Error in conv2dDerInput: inShape must be length 4, but got length "+"".concat(d.length,".")})),o.hu(4===p.rank,(function(){return"Error in conv2dDerInput: dy must be rank 4, but got "+"rank ".concat(p.rank)})),o.hu(4===n.rank,(function(){return"Error in conv2dDerInput: filter must be rank 4, but got "+"rank ".concat(n.rank)}));var m="NHWC"===l?d[3]:d[1],v="NHWC"===l?p.shape[3]:p.shape[1];o.hu(m===n.shape[2],(function(){return"Error in conv2dDerInput: depth of input (".concat(m,") must ")+"match input depth for filter ".concat(n.shape[2],".")})),o.hu(v===n.shape[3],(function(){return"Error in conv2dDerInput: depth of output (".concat(v,") must ")+"match output depth for filter ".concat(n.shape[3],".")})),i.m("conv2dDerInput",c,f);var g={dy:p,filter:n},y={strides:s,pad:c,dataFormat:l,dimRoundingMode:f,inputShape:d},b=r.BV.runKernel(a.wm,g,y);return h?(0,u.X)(b,[b.shape[1],b.shape[2],b.shape[3]]):b}})},1732:function(e,t,n){"use strict";n.d(t,{b:function(){return o}});var r=n(8354),a=n(1045);var o=(0,n(8640).op)({conv2dTranspose_:function(e,t,n,o,i,s){var u=(0,r._1)(e,"x","conv2dTranspose"),c=(0,r._1)(t,"filter","conv2dTranspose");return(0,a._)(n,u,c,o,i,"NHWC",s)}})},8113:function(e,t,n){"use strict";n.d(t,{p:function(){return l}});var r=n(318),a=n(2145),o=n(8354),i=n(6147),s=n(6190),u=n(8640),c=n(5561);var l=(0,u.op)({conv3d_:function(e,t,n,u){var l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"NDHWC",f=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[1,1,1],d=(0,o._1)(e,"x","conv3d"),p=(0,o._1)(t,"filter","conv3d"),h=d,m=!1;4===d.rank&&(m=!0,h=(0,c.X)(d,[1,d.shape[0],d.shape[1],d.shape[2],d.shape[3]])),i.hu(5===h.rank,(function(){return"Error in conv3d: input must be rank 5, but got rank ".concat(h.rank,".")})),i.hu(5===p.rank,(function(){return"Error in conv3d: filter must be rank 5, but got rank "+"".concat(p.rank,".")})),i.hu(h.shape[4]===p.shape[3],(function(){return"Error in conv3d: depth of input (".concat(h.shape[4],") must match ")+"input depth for filter ".concat(p.shape[3],".")})),i.hu((0,s.jT)(n,f),(function(){return"Error in conv3D: Either strides or dilations must be 1. "+"Got strides ".concat(n," and dilations '").concat(f,"'")})),i.hu("NDHWC"===l,(function(){return"Error in conv3d: got dataFormat of ".concat(l," but only NDHWC is currently supported.")}));var v={x:h,filter:p},g={strides:n,pad:u,dataFormat:l,dilations:f},y=r.BV.runKernel(a.x1,v,g);return m?(0,c.X)(y,[y.shape[1],y.shape[2],y.shape[3],y.shape[4]]):y}})},1873:function(e,t,n){"use strict";n.d(t,{_:function(){return u}});var r=n(318),a=n(2145),o=n(6147),i=n(8640),s=n(5561);var u=(0,i.op)({conv3DBackpropInput_:function(e,t,n,i,u){o.hu(e.length===t.rank,(function(){return"Length of inShape "+"(".concat(e.length,") and rank of dy (").concat(t.rank,") must match")}));var c=e,l=t,f=!1;4===t.rank&&(f=!0,l=(0,s.X)(t,[1,t.shape[0],t.shape[1],t.shape[2],t.shape[3]]),c=[1,e[0],e[1],e[2],e[3]]);var d=c[4],p=l.shape[4];o.hu(5===c.length,(function(){return"Error in conv3dDerInput: inShape must be length 5, but got length "+"".concat(c.length,".")})),o.hu(5===l.rank,(function(){return"Error in conv3dDerInput: dy must be rank 5, but got "+"rank ".concat(l.rank)})),o.hu(5===n.rank,(function(){return"Error in conv3dDerInput: filter must be rank 5, but got "+"rank ".concat(n.rank)})),o.hu(d===n.shape[3],(function(){return"Error in conv3dDerInput: depth of input (".concat(d,") must ")+"match input depth for filter ".concat(n.shape[3],".")})),o.hu(p===n.shape[4],(function(){return"Error in conv3dDerInput: depth of output (".concat(p,") must ")+"match output depth for filter ".concat(n.shape[4],".")}));var h={dy:l,filter:n},m={pad:u,strides:i,inputShape:c},v=r.BV.runKernel(a.ik,h,m);return f?(0,s.X)(v,[v.shape[1],v.shape[2],v.shape[3],v.shape[4]]):v}})},6190:function(e,t,n){"use strict";n.d(t,{Rf:function(){return i},Xw:function(){return s},pl:function(){return u},Ix:function(){return c},jw:function(){return l},aO:function(){return f},I0:function(){return y},jT:function(){return b},sl:function(){return x},m:function(){return w}});var r=n(9439),a=n(3433),o=n(6147);function i(e,t,n,r){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"NHWC",i=arguments.length>5?arguments[5]:void 0,s=e[3],u=[].concat((0,a.Z)(t),[s]),l=x(o);return c(e,u,n,i,r,null,null,l)}function s(e,t,n,a,o,i){var s,u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"channelsLast",l=d(t),f=(0,r.Z)(l,2),p=f[0],h=f[1];if("channelsLast"===u)s=[p,h,e[3],e[3]];else{if("channelsFirst"!==u)throw new Error("Unknown dataFormat ".concat(u));s=[p,h,e[1],e[1]]}return c(e,s,n,a,o,i,!1,u)}function u(e,t,n,a,o,i){var s,u,c=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"NDHWC",f=p(t),d=(0,r.Z)(f,3),h=d[0],m=d[1],v=d[2];if("NDHWC"===c)u="channelsLast",s=[h,m,v,e[4],e[4]];else{if("NCDHW"!==c)throw new Error("Unknown dataFormat ".concat(c));u="channelsFirst",s=[h,m,v,e[1],e[1]]}return l(e,s,n,a,o,!1,u,i)}function c(e,t,n,a,o,i){var s=arguments.length>6&&void 0!==arguments[6]&&arguments[6],u=arguments.length>7&&void 0!==arguments[7]?arguments[7]:"channelsLast",c=-1,l=-1,f=-1,p=-1;if("channelsLast"===u){var v=(0,r.Z)(e,4);c=v[0],l=v[1],f=v[2],p=v[3]}else{if("channelsFirst"!==u)throw new Error("Unknown dataFormat ".concat(u));var g=(0,r.Z)(e,4);c=g[0],p=g[1],l=g[2],f=g[3]}var y,b=(0,r.Z)(t,4),x=b[0],w=b[1],k=b[3],S=d(n),_=(0,r.Z)(S,2),N=_[0],E=_[1],C=d(a),T=(0,r.Z)(C,2),I=T[0],O=T[1],A=h(x,I),D=h(w,O),M=m(o,l,f,N,E,A,D,i,u),R=M.padInfo,P=M.outHeight,j=M.outWidth,F=s?k*p:k;return"channelsFirst"===u?y=[c,F,P,j]:"channelsLast"===u&&(y=[c,P,j,F]),{batchSize:c,dataFormat:u,inHeight:l,inWidth:f,inChannels:p,outHeight:P,outWidth:j,outChannels:F,padInfo:R,strideHeight:N,strideWidth:E,filterHeight:x,filterWidth:w,effectiveFilterHeight:A,effectiveFilterWidth:D,dilationHeight:I,dilationWidth:O,inShape:e,outShape:y,filterShape:t}}function l(e,t,n,a,o){var i=arguments.length>5&&void 0!==arguments[5]&&arguments[5],s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"channelsLast",u=arguments.length>7?arguments[7]:void 0,c=-1,l=-1,f=-1,d=-1,m=-1;if("channelsLast"===s){var g=(0,r.Z)(e,5);c=g[0],l=g[1],f=g[2],d=g[3],m=g[4]}else{if("channelsFirst"!==s)throw new Error("Unknown dataFormat ".concat(s));var y=(0,r.Z)(e,5);c=y[0],m=y[1],l=y[2],f=y[3],d=y[4]}var b,x=(0,r.Z)(t,5),w=x[0],k=x[1],S=x[2],_=x[4],N=p(n),E=(0,r.Z)(N,3),C=E[0],T=E[1],I=E[2],O=p(a),A=(0,r.Z)(O,3),D=A[0],M=A[1],R=A[2],P=h(w,D),j=h(k,M),F=h(S,R),L=v(o,l,f,d,C,T,I,P,j,F,u),B=L.padInfo,z=L.outDepth,Z=L.outHeight,V=L.outWidth,U=i?_*m:_;return"channelsFirst"===s?b=[c,U,z,Z,V]:"channelsLast"===s&&(b=[c,z,Z,V,U]),{batchSize:c,dataFormat:s,inDepth:l,inHeight:f,inWidth:d,inChannels:m,outDepth:z,outHeight:Z,outWidth:V,outChannels:U,padInfo:B,strideDepth:C,strideHeight:T,strideWidth:I,filterDepth:w,filterHeight:k,filterWidth:S,effectiveFilterDepth:P,effectiveFilterHeight:j,effectiveFilterWidth:F,dilationDepth:D,dilationHeight:M,dilationWidth:R,inShape:e,outShape:b,filterShape:t}}function f(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,a=h(t,r);return Math.floor((e[0]*(n-1)-n+a)/2)}function d(e){return"number"===typeof e?[e,e,e]:2===e.length?[e[0],e[1],1]:e}function p(e){return"number"===typeof e?[e,e,e]:e}function h(e,t){return t<=1?e:e+(e-1)*(t-1)}function m(e,t,n,r,a,o,i,s,u){var c,l,d;if("number"===typeof e){c={top:e,bottom:e,left:e,right:e,type:0===e?"VALID":"NUMBER"};var p=function(e,t,n,r,a){null==r&&(r=f(e,t,n));var o=e[0],i=e[1];return[g((o-t+2*r)/n+1,a),g((i-t+2*r)/n+1,a)]}([t,n],o,r,e,s);l=p[0],d=p[1]}else if("same"===e){l=Math.ceil(t/r),d=Math.ceil(n/a);var h=Math.max(0,(l-1)*r+o-t),m=Math.max(0,(d-1)*a+i-n),v=Math.floor(h/2),y=h-v,b=Math.floor(m/2);c={top:v,bottom:y,left:b,right:m-b,type:"SAME"}}else if("valid"===e)c={top:0,bottom:0,left:0,right:0,type:"VALID"},l=Math.ceil((t-o+1)/r),d=Math.ceil((n-i+1)/a);else{if("object"!==typeof e)throw Error("Unknown padding parameter: ".concat(e));var x="channelsLast"===u?e[1][0]:e[2][0],w="channelsLast"===u?e[1][1]:e[2][1],k="channelsLast"===u?e[2][0]:e[3][0],S="channelsLast"===u?e[2][1]:e[3][1];c={top:x,bottom:w,left:k,right:S,type:0===x&&0===w&&0===k&&0===S?"VALID":"EXPLICIT"},l=g((t-o+x+w)/r+1,s),d=g((n-i+k+S)/a+1,s)}return{padInfo:c,outHeight:l,outWidth:d}}function v(e,t,n,r,a,o,i,s,u,c,l){var d,p,h,m;if("number"===typeof e){d={top:e,bottom:e,left:e,right:e,front:e,back:e,type:0===e?"VALID":"NUMBER"};var v=function(e,t,n,r,a,o){null==a&&(a=f(e,t,r));var i=e[0],s=e[1],u=e[2];return[g((i-t+2*a)/r+1,o),g((s-t+2*a)/r+1,o),g((u-t+2*a)/r+1,o),n]}([t,n,r,1],s,1,a,e,l);p=v[0],h=v[1],m=v[2]}else if("same"===e){var y=((p=Math.ceil(t/a))-1)*a+s-t,b=((h=Math.ceil(n/o))-1)*o+u-n,x=((m=Math.ceil(r/i))-1)*i+c-r,w=Math.floor(y/2),k=y-w,S=Math.floor(b/2),_=b-S,N=Math.floor(x/2);d={top:S,bottom:_,left:N,right:x-N,front:w,back:k,type:"SAME"}}else{if("valid"!==e)throw Error("Unknown padding parameter: ".concat(e));d={top:0,bottom:0,left:0,right:0,front:0,back:0,type:"VALID"},p=Math.ceil((t-s+1)/a),h=Math.ceil((n-u+1)/o),m=Math.ceil((r-c+1)/i)}return{padInfo:d,outDepth:p,outHeight:h,outWidth:m}}function g(e,t){if(!t)return Math.trunc(e);switch(t){case"round":return Math.round(e);case"ceil":return Math.ceil(e);case"floor":return Math.floor(e);default:throw new Error("Unknown roundingMode ".concat(t))}}function y(e){var t=d(e),n=(0,r.Z)(t,3),a=n[0],o=n[1],i=n[2];return 1===a&&1===o&&1===i}function b(e,t){return y(e)||y(t)}function x(e){if("NHWC"===e)return"channelsLast";if("NCHW"===e)return"channelsFirst";throw new Error("Unknown dataFormat ".concat(e))}function w(e,t,n){if(null!=n){if("string"===typeof t)throw Error("Error in ".concat(e,": pad must be an integer when using ")+"dimRoundingMode ".concat(n," but got pad ").concat(t,"."));if("number"===typeof t)o.hu(o.GN(t),(function(){return"Error in ".concat(e,": pad must be an integer when using ")+"dimRoundingMode ".concat(n," but got pad ").concat(t,".")}));else{if("object"!==typeof t)throw Error("Error in ".concat(e,": Unknown padding parameter: ").concat(t));t.forEach((function(t){t.forEach((function(t){o.hu(o.GN(t),(function(){return"Error in ".concat(e,": pad must be an integer when using ")+"dimRoundingMode ".concat(n," but got pad ").concat(t,".")}))}))}))}}}},1227:function(e,t,n){"use strict";n.d(t,{m:function(){return i}});var r=n(318),a=n(2145),o=n(8354);var i=(0,n(8640).op)({cos_:function(e){var t={x:(0,o._1)(e,"x","cos","float32")};return r.BV.runKernel(a.mc,t)}})},6679:function(e,t,n){"use strict";n.d(t,{f:function(){return i}});var r=n(318),a=n(2145),o=n(8354);var i=(0,n(8640).op)({cosh_:function(e){var t={x:(0,o._1)(e,"x","cosh","float32")};return r.BV.runKernel(a.TR,t)}})},8862:function(e,t,n){"use strict";n.d(t,{z:function(){return i}});var r=n(318),a=n(2145),o=n(8354);var i=(0,n(8640).op)({cumsum_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],s=(0,o._1)(e,"x","cumsum"),u={x:s},c={axis:t,exclusive:n,reverse:i};return r.BV.runKernel(a.iH,u,c)}})},7419:function(e,t,n){"use strict";n.d(t,{p:function(){return s}});var r=n(318),a=n(2145),o=n(8354),i=n(6147);var s=(0,n(8640).op)({denseBincount_:function(e,t,n){var s=arguments.length>3&&void 0!==arguments[3]&&arguments[3],u=(0,o._1)(e,"x","denseBincount"),c=(0,o._1)(t,"weights","denseBincount");i.hu("int32"===u.dtype,(function(){return"Error in denseBincount: input "+"dtype must be int32, but got ".concat(u.dtype)})),i.hu(u.rank<=2,(function(){return"Error in denseBincount: input must be at most rank 2, but got "+"rank ".concat(u.rank,".")})),i.hu(n>=0,(function(){return"size must be non-negative, but got ".concat(n,".")})),i.hu(c.size===u.size||0===c.size,(function(){return"Error in denseBincount: weights must have the same shape as x or "+"0-length, but got x shape: ".concat(u.shape,", weights shape: ")+"".concat(c.shape,".")}));var l={x:u,weights:c},f={size:n,binaryOutput:s};return r.BV.runKernel(a.QR,l,f)}})},1878:function(e,t,n){"use strict";n.d(t,{n:function(){return s}});var r=n(318),a=n(2145),o=n(8354),i=n(6147);var s=(0,n(8640).op)({depthToSpace_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"NHWC",s=(0,o._1)(e,"x","depthToSpace","float32"),u="NHWC"===n?s.shape[1]:s.shape[2],c="NHWC"===n?s.shape[2]:s.shape[3],l="NHWC"===n?s.shape[3]:s.shape[1];i.hu(t>1,(function(){return"blockSize should be > 1 for depthToSpace, but was: ".concat(t)})),i.hu(u*t>=0,(function(){return"Negative dimension size caused by overflow when multiplying\n    ".concat(u," and ").concat(t,"  for depthToSpace with input shape\n    ").concat(s.shape)})),i.hu(c*t>=0,(function(){return"Negative dimension size caused by overflow when multiplying\n    ".concat(c," and ").concat(t," for depthToSpace with input shape\n        ").concat(s.shape)})),i.hu(l%(t*t)===0,(function(){return"Dimension size must be evenly divisible by ".concat(t*t," but is ").concat(l," for depthToSpace with input shape ").concat(s.shape)}));var f={x:s},d={blockSize:t,dataFormat:n};return r.BV.runKernel(a.T0,f,d)}})},1147:function(e,t,n){"use strict";n.d(t,{B:function(){return l}});var r=n(318),a=n(2145),o=n(8354),i=n(6147),s=n(6190),u=n(8640),c=n(5561);var l=(0,u.op)({depthwiseConv2d_:function(e,t,n,u){var l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"NHWC",f=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[1,1],d=arguments.length>6?arguments[6]:void 0,p=(0,o._1)(e,"x","depthwiseConv2d","float32"),h=(0,o._1)(t,"filter","depthwiseConv2d","float32"),m=p,v=!1;3===p.rank&&(v=!0,m=(0,c.X)(p,[1,p.shape[0],p.shape[1],p.shape[2]])),i.hu(4===m.rank,(function(){return"Error in depthwiseConv2d: input must be rank 4, but got "+"rank ".concat(m.rank,".")})),i.hu(4===h.rank,(function(){return"Error in depthwiseConv2d: filter must be rank 4, but got rank "+"".concat(h.rank,".")})),i.hu(m.shape[3]===h.shape[2],(function(){return"Error in depthwiseConv2d: number of input channels "+"(".concat(m.shape[3],") must match the inChannels dimension in ")+"filter ".concat(h.shape[2],".")})),s.m("depthwiseConv2d",u,d);var g={x:m,filter:h},y={strides:n,pad:u,dataFormat:l,dilations:f,dimRoundingMode:d},b=r.BV.runKernel(a.ci,g,y);return v?(0,c.X)(b,[b.shape[1],b.shape[2],b.shape[3]]):b}})},288:function(e,t,n){"use strict";n.d(t,{z:function(){return s}});var r=n(318),a=n(2145),o=n(8640),i=n(5561);var s=(0,o.op)({depthwiseConv2dNativeBackpropFilter_:function(e,t,n,o,s){var u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[1,1],c=arguments.length>6?arguments[6]:void 0,l=e;3===e.rank&&(l=(0,i.X)(e,[1,e.shape[0],e.shape[1],e.shape[2]]));var f=t;3===f.rank&&(f=(0,i.X)(t,[1,t.shape[0],t.shape[1],t.shape[2]]));var d={x:l,dy:f},p={strides:o,pad:s,dimRoundingMode:c,dilations:u,filterShape:n};return r.BV.runKernel(a.sL,d,p)}})},6939:function(e,t,n){"use strict";n.d(t,{v:function(){return s}});var r=n(318),a=n(2145),o=n(8640),i=n(5561);var s=(0,o.op)({depthwiseConv2dNativeBackpropInput_:function(e,t,n,o,s){var u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[1,1],c=arguments.length>6?arguments[6]:void 0,l=t,f=!1;3===t.rank&&(f=!0,l=(0,i.X)(t,[1,t.shape[0],t.shape[1],t.shape[2]]));var d={dy:l,filter:n},p={strides:o,pad:s,dimRoundingMode:c,dilations:u,inputShape:e},h=r.BV.runKernel(a.y7,d,p);return f?(0,i.X)(h,[h.shape[1],h.shape[2],h.shape[3]]):h}})},7580:function(e,t,n){"use strict";n.d(t,{W:function(){return c}});var r=n(318),a=n(2145),o=n(8354),i=n(6147),s=n(8640),u=n(5561);var c=(0,s.op)({dilation2d_:function(e,t,n,s){var c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[1,1],l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"NHWC",f=(0,o._1)(e,"x","dilation2d"),d=(0,o._1)(t,"filter","dilation2d");i.hu(3===f.rank||4===f.rank,(function(){return"Error in dilation2d: input must be rank 3 or 4, but got rank "+"".concat(f.rank,".")})),i.hu(3===d.rank,(function(){return"Error in dilation2d: filter must be rank 3, but got rank "+"".concat(d.rank,".")})),i.hu("NHWC"===l,(function(){return"Error in dilation2d: Only NHWC is currently supported, "+"but got dataFormat of ".concat(l)}));var p=f,h=!1;3===f.rank&&(p=(0,u.X)(f,[1,f.shape[0],f.shape[1],f.shape[2]]),h=!0);var m={x:p,filter:d},v={strides:n,pad:s,dilations:c},g=r.BV.runKernel(a.p4,m,v);return h?(0,u.X)(g,[g.shape[1],g.shape[2],g.shape[3]]):g}})},5750:function(e,t,n){"use strict";n.d(t,{h:function(){return c}});var r=n(9439),a=n(318),o=n(2145),i=n(9064),s=n(8354),u=n(7145);var c=(0,n(8640).op)({div_:function(e,t){var n=(0,s._1)(e,"a","div"),c=(0,s._1)(t,"b","div"),l=(0,i.makeTypesMatch)(n,c),f=(0,r.Z)(l,2);if(n=f[0],c=f[1],"int32"===n.dtype&&"int32"===c.dtype)return(0,u.q)(n,c);var d={a:n,b:c};return a.BV.runKernel(o.oH,d,{})}})},5923:function(e,t,n){"use strict";n.d(t,{N:function(){return f}});var r=n(9439),a=n(9064),o=n(8354),i=n(5750),s=n(3254),u=n(8640),c=n(329),l=n(7293);var f=(0,u.op)({divNoNan_:function(e,t){var n=(0,o._1)(e,"a","div"),u=(0,o._1)(t,"b","div"),f=(0,a.makeTypesMatch)(n,u),d=(0,r.Z)(f,2);n=d[0],u=d[1];var p=(0,i.h)(n,u),h=(0,l.P)(p),m=(0,s.D)(u,h);return(0,c.a)(m,h,p)}})},5043:function(e,t,n){"use strict";n.d(t,{A:function(){return u}});var r=n(8354),a=n(6147),o=n(7221),i=n(8640),s=n(5561);var u=(0,i.op)({dot_:function(e,t){var n=(0,r._1)(e,"t1","dot"),i=(0,r._1)(t,"t2","dot");a.hu((1===n.rank||2===n.rank)&&(1===i.rank||2===i.rank),(function(){return"Error in dot: inputs must all be rank 1 or 2, but got ranks "+"".concat(n.rank," and ").concat(i.rank,".")}));var u=1===n.rank?n.size:n.shape[1],c=1===i.rank?i.size:i.shape[0];if(a.hu(u===c,(function(){return"Error in dot: inner dimensions of inputs must match, but got "+"".concat(u," and ").concat(c,".")})),1===n.rank&&1===i.rank){var l=(0,s.X)(n,[1,-1]),f=(0,s.X)(i,[-1,1]),d=(0,o.O)(l,f);return(0,s.X)(d,[])}if(1===n.rank&&2===i.rank){var p=(0,s.X)(n,[1,-1]),h=(0,s.X)(i,[i.shape[0],i.shape[1]]),m=(0,o.O)(p,h);return(0,s.X)(m,[m.size])}if(2===n.rank&&1===i.rank){var v=(0,s.X)(i,[-1,1]),g=(0,o.O)(n,v);return(0,s.X)(g,[g.size])}var y=(0,s.X)(i,[i.shape[0],i.shape[1]]);return(0,o.O)(n,y)}})},8060:function(e,t,n){"use strict";n.d(t,{W:function(){return i}});var r=n(318),a=n(2145),o=n(8354);var i=(0,n(8640).op)({einsum_:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];var s=n.map((function(e,t){return(0,o._1)(e,"tensors".concat(t),"einsum")})),u={equation:e};return r.BV.runKernel(a.$g,s,u)}})},2353:function(e,t,n){"use strict";n.d(t,{p:function(){return i}});var r=n(318),a=n(2145),o=n(8354);var i=(0,n(8640).op)({elu_:function(e){var t={x:(0,o._1)(e,"x","elu","float32")};return r.BV.runKernel(a.SX,t)}})},3254:function(e,t,n){"use strict";n.d(t,{D:function(){return c}});var r=n(9439),a=n(318),o=n(2145),i=n(9064),s=n(8354),u=n(9877);var c=(0,n(8640).op)({equal_:function(e,t){var n=(0,s._1)(e,"a","equal","string_or_numeric"),c=(0,s._1)(t,"b","equal","string_or_numeric"),l=(0,i.makeTypesMatch)(n,c),f=(0,r.Z)(l,2);n=f[0],c=f[1],(0,u.assertAndGetBroadcastShape)(n.shape,c.shape);var d={a:n,b:c};return a.BV.runKernel(o.hd,d)}})},3891:function(e,t,n){"use strict";n.d(t,{q:function(){return u}});var r=n(318),a=n(2145),o=n(8354),i=n(6147),s=n(9118);var u=(0,n(8640).op)({erf_:function(e){var t=(0,o._1)(e,"x","erf");i.hu("int32"===t.dtype||"float32"===t.dtype,(function(){return"Input dtype must be `int32` or `float32`."})),"int32"===t.dtype&&(t=(0,s.p)(t,"float32"));var n={x:t};return r.BV.runKernel(a.Om,n)}})},411:function(e,t,n){"use strict";n.d(t,{Q:function(){return i}});var r=n(318),a=n(2145),o=n(8354);var i=(0,n(8640).op)({exp_:function(e){var t={x:(0,o._1)(e,"x","exp")};return r.BV.runKernel(a.NE,t)}})},2975:function(e,t,n){"use strict";n.d(t,{d:function(){return s}});var r=n(318),a=n(2145),o=n(8354),i=n(6147);var s=(0,n(8640).op)({expandDims_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(0,o._1)(e,"x","expandDims","string_or_numeric");i.hu(t<=n.rank,(function(){return"Axis must be <= rank of the tensor"}));var s={input:n},u={dim:t};return r.BV.runKernel(a.YF,s,u)}})},5682:function(e,t,n){"use strict";n.d(t,{t:function(){return i}});var r=n(318),a=n(2145),o=n(8354);var i=(0,n(8640).op)({expm1_:function(e){var t={x:(0,o._1)(e,"x","expm1")};return r.BV.runKernel(a.Y0,t)}})},8582:function(e,t,n){"use strict";n.d(t,{h:function(){return o}});var r=n(318),a=n(2145);function o(e,t,n){var o={shape:e,value:t,dtype:n};return r.BV.runKernel(a.de,{},o)}},2628:function(e,t,n){"use strict";n.d(t,{G:function(){return i}});var r=n(318),a=n(2145),o=n(8354);var i=(0,n(8640).op)({floor_:function(e){var t={x:(0,o._1)(e,"x","floor","float32")};return r.BV.runKernel(a.OR,t)}})},7145:function(e,t,n){"use strict";n.d(t,{q:function(){return u}});var r=n(9439),a=n(318),o=n(2145),i=n(9064),s=n(8354);var u=(0,n(8640).op)({floorDiv_:function(e,t){var n=(0,s._1)(e,"a","floorDiv"),u=(0,s._1)(t,"b","floorDiv"),c=(0,i.makeTypesMatch)(n,u),l=(0,r.Z)(c,2),f={a:n=l[0],b:u=l[1]};return a.BV.runKernel(o.je,f)}})},6947:function(e,t,n){"use strict";n.r(t),n.d(t,{conv2d:function(){return b},depthwiseConv2d:function(){return S},matMul:function(){return N}});var r=n(9439),a=n(318),o=n(6450),i=n(2145),s=n(9064),u=n(8354),c=n(6147),l=n(3312),f=n(9877),d=n(3457),p=n(8744),h=n(1045),m=n(6190),v=n(5171),g=n(8640),y=n(5561);var b=(0,g.op)({fusedConv2d_:function(e){var t=e.x,n=e.filter,g=e.strides,b=e.pad,x=e.dataFormat,w=void 0===x?"NHWC":x,k=e.dilations,S=void 0===k?[1,1]:k,_=e.dimRoundingMode,N=e.bias,E=e.activation,C=void 0===E?"linear":E,T=e.preluActivationWeights,I=e.leakyreluAlpha;if(C=C||"linear",!1===(0,v.uy)(a.BV.state.gradientDepth,C)){var O=(0,d.T)(t,n,g,b,w,S,_);return null!=N&&(O=(0,l.I)(O,N)),(0,v.QH)(O,C,T,I)}var A=(0,u._1)(t,"x","conv2d","float32"),D=(0,u._1)(n,"filter","conv2d","float32"),M=A,R=!1;3===A.rank&&(R=!0,M=(0,y.X)(A,[1,A.shape[0],A.shape[1],A.shape[2]])),c.hu(4===M.rank,(function(){return"Error in fused conv2d: input must be rank 4, but got rank "+"".concat(M.rank,".")})),c.hu(4===D.rank,(function(){return"Error in fused conv2d: filter must be rank 4, but got rank "+"".concat(D.rank,".")})),m.m("fused conv2d",b,_),c.hu(M.shape[3]===D.shape[2],(function(){return"Error in conv2d: depth of input (".concat(M.shape[3],") must match ")+"input depth for filter ".concat(D.shape[2],".")})),c.hu(m.jT(g,S),(function(){return"Error in conv2D: Either strides or dilations must be 1. "+"Got strides ".concat(g," and dilations '").concat(S,"'")})),c.hu("NHWC"===w,(function(){return"Error in conv2d: got dataFormat of ".concat(w," but only NHWC is currently supported.")}));var P,j,F=m.Ix(M.shape,D.shape,g,S,b,_);if(null!=N){P=(0,u._1)(N,"bias","fused conv2d");var L=(0,s.makeTypesMatch)(P,A);P=(0,r.Z)(L,1)[0],f.assertAndGetBroadcastShape(F.outShape,P.shape)}null!=T&&(j=(0,u._1)(T,"prelu weights","fused conv2d"));var B=function(e,t){var n=(0,r.Z)(t,4),a=n[0],o=n[1],i=n[2],s=n[3],u=(0,v.Fr)(e,i,C);c.hu(m.I0(S),(function(){return"Error in gradient of fused conv2D: dilation rates greater than 1 "+"are not yet supported in gradients. Got dilations '".concat(S,"'")}));var l=[(0,h._)(o.shape,u,a,g,b),(0,p.p)(o,u,a.shape,g,b)];if(null!=s){var f=(0,v.pf)(s,u);l.push(f)}return l},z={x:M,filter:D,bias:P,preluActivationWeights:j},Z={strides:g,pad:b,dataFormat:w,dilations:S,dimRoundingMode:_,activation:C,leakyreluAlpha:I};if(null==N){var V=(0,o.cb)((function(e,t,n){var r=a.BV.runKernel(i._V,z,Z);return n([t,e,r]),R&&(r=(0,y.X)(r,[r.shape[1],r.shape[2],r.shape[3]])),{value:r,gradFunc:B}}));return V(M,D)}var U=(0,o.cb)((function(e,t,n,r){var o=a.BV.runKernel(i._V,z,Z);return r([t,e,o,n]),R&&(o=(0,y.X)(o,[o.shape[1],o.shape[2],o.shape[3]])),{value:o,gradFunc:B}}));return U(M,D,P)}}),x=n(1147),w=n(288),k=n(6939);var S=(0,g.op)({fusedDepthwiseConv2d_:function(e){var t=e.x,n=e.filter,d=e.strides,p=e.pad,h=e.dataFormat,g=void 0===h?"NHWC":h,b=e.dilations,S=void 0===b?[1,1]:b,_=e.dimRoundingMode,N=e.bias,E=e.activation,C=void 0===E?"linear":E,T=e.preluActivationWeights,I=e.leakyreluAlpha;if(!1===(0,v.uy)(a.BV.state.gradientDepth,C)){var O=(0,x.B)(t,n,d,p,g,S,_);return null!=N&&(O=(0,l.I)(O,N)),(0,v.QH)(O,C,T,I)}var A=(0,u._1)(t,"x","depthwiseConv2d","float32"),D=(0,u._1)(n,"filter","depthwiseConv2d","float32"),M=A,R=!1;3===A.rank&&(R=!0,M=(0,y.X)(A,[1,A.shape[0],A.shape[1],A.shape[2]])),c.hu(4===M.rank,(function(){return"Error in fused depthwiseConv2d: input must be rank 4, but got "+"rank ".concat(M.rank,".")})),c.hu(4===D.rank,(function(){return"Error in fused depthwiseConv2d: filter must be rank 4, "+"but got rank ".concat(D.rank,".")})),c.hu(M.shape[3]===D.shape[2],(function(){return"Error in fused depthwiseConv2d: number of input channels "+"(".concat(M.shape[3],") must match the inChannels dimension in ")+"filter ".concat(D.shape[2],".")})),null==S&&(S=[1,1]),c.hu(m.jT(d,S),(function(){return"Error in fused depthwiseConv2d: Either strides or dilations must "+"be 1. Got strides ".concat(d," and dilations '").concat(S,"'")})),m.m("fused depthwiseConv2d",p,_);var P,j,F=m.Ix(M.shape,D.shape,d,S,p,_,!0);if(null!=N){P=(0,u._1)(N,"bias","fused conv2d");var L=(0,s.makeTypesMatch)(P,A),B=(0,r.Z)(L,1);P=B[0],f.assertAndGetBroadcastShape(F.outShape,P.shape)}null!=T&&(j=(0,u._1)(T,"prelu weights","fused depthwiseConv2d"));var z=function(e,t){c.hu(m.I0(S),(function(){return"Error in gradient of fused depthwiseConv2d: dilation rates greater than 1 are not yet supported. Got dilations "+"'".concat(S,"'")}));var n=(0,r.Z)(t,4),a=n[0],o=n[1],i=n[2],s=n[3],u=(0,v.Fr)(e,i,C),l=(0,k.v)(o.shape,u,a,d,p,S,_),f=(0,w.z)(o,u,a.shape,d,p,S,_);return null!=s?[l,f,(0,v.pf)(P,u)]:[l,f]},Z={x:M,filter:D,bias:P,preluActivationWeights:j},V={strides:d,pad:p,dataFormat:g,dilations:S,dimRoundingMode:_,activation:C,leakyreluAlpha:I};if(null==N){var U=(0,o.cb)((function(e,t,n){var r=a.BV.runKernel(i.lu,Z,V);return n([t,e,r]),R&&(r=(0,y.X)(r,[r.shape[1],r.shape[2],r.shape[3]])),{value:r,gradFunc:z}}));return U(M,D)}var q=(0,o.cb)((function(e,t,n,r){var o=a.BV.runKernel(i.lu,Z,V);return r([t,e,o,n]),R&&(o=(0,y.X)(o,[o.shape[1],o.shape[2],o.shape[3]])),{value:o,gradFunc:z}}));return q(M,D,P)}}),_=n(7221);var N=(0,g.op)({fusedMatMul_:function(e){var t=e.a,n=e.b,d=e.transposeA,p=void 0!==d&&d,h=e.transposeB,m=void 0!==h&&h,g=e.bias,b=e.activation,x=void 0===b?"linear":b,w=e.preluActivationWeights,k=e.leakyreluAlpha;if(!1===(0,v.uy)(a.BV.state.gradientDepth,x)){var S=(0,_.O)(t,n,p,m);return null!=g&&(S=(0,l.I)(S,g)),(0,v.QH)(S,x,w,k)}var N=(0,u._1)(t,"a","fused matMul"),E=(0,u._1)(n,"b","fused matMul"),C=(0,s.makeTypesMatch)(N,E),T=(0,r.Z)(C,2);N=T[0],E=T[1];var I=p?N.shape[N.rank-2]:N.shape[N.rank-1],O=m?E.shape[E.rank-1]:E.shape[E.rank-2],A=p?N.shape[N.rank-1]:N.shape[N.rank-2],D=m?E.shape[E.rank-2]:E.shape[E.rank-1],M=N.shape.slice(0,-2),R=E.shape.slice(0,-2),P=c.NA(M),j=c.NA(R);c.hu(I===O,(function(){return"Error in fused matMul: inner shapes (".concat(I,") and (")+"".concat(O,") of Tensors with shapes ").concat(N.shape," and ")+"".concat(E.shape," and transposeA=").concat(p)+" and transposeB=".concat(m," must match.")}));var F,L,B=f.assertAndGetBroadcastShape(N.shape.slice(0,-2),E.shape.slice(0,-2)).concat([A,D]),z=p?(0,y.X)(N,[P,I,A]):(0,y.X)(N,[P,A,I]),Z=m?(0,y.X)(E,[j,D,O]):(0,y.X)(E,[j,O,D]);if(null!=g){F=(0,u._1)(g,"bias","fused matMul");var V=(0,s.makeTypesMatch)(F,N);F=(0,r.Z)(V,1)[0],f.assertAndGetBroadcastShape(B,F.shape)}null!=w&&(L=(0,u._1)(w,"prelu weights","fused matMul"));var U=function(e,t){var n,a,o=(0,r.Z)(t,4),i=o[0],s=o[1],u=o[2],c=o[3],l=(0,v.Fr)((0,y.X)(e,u.shape),u,x);return p||m?!p&&m?(n=(0,_.O)(l,s,!1,!1),a=(0,_.O)(l,i,!0,!1)):p&&!m?(n=(0,_.O)(s,l,!1,!0),a=(0,_.O)(i,l,!1,!1)):(n=(0,_.O)(s,l,!0,!0),a=(0,_.O)(l,i,!0,!0)):(n=(0,_.O)(l,s,!1,!0),a=(0,_.O)(i,l,!0,!1)),null!=g?[n,a,(0,v.pf)(c,l)]:[n,a]},q={a:z,b:Z,bias:F,preluActivationWeights:L},W={transposeA:p,transposeB:m,activation:x,leakyreluAlpha:k};if(null==g){var H=(0,o.cb)((function(e,t,n){var r=a.BV.runKernel(i.us,q,W);return n([e,t,r]),{value:(0,y.X)(r,B),gradFunc:U}}));return H(z,Z)}var G=(0,o.cb)((function(e,t,n,r){var o=a.BV.runKernel(i.us,q,W);return r([e,t,o,n]),{value:(0,y.X)(o,B),gradFunc:U}}));return G(z,Z,F)}})},5171:function(e,t,n){"use strict";n.d(t,{Fr:function(){return h},pf:function(){return m},QH:function(){return v},uy:function(){return g}});var r=n(9877),a=n(2353),o=n(4419),i=n(651),s=n(6859),u=n(7539),c=n(5900),l=n(5561),f=n(7643),d=n(4031),p=n(227);function h(e,t,n){if(null==n||"linear"===n)return e;if("relu"===n)return(0,i.d)(e,(0,d.N)(t));throw new Error("Cannot compute gradient for fused activation ".concat(n,"."))}function m(e,t){var n=t,a=r.getReductionAxes(e.shape,t.shape);return a.length>0&&(n=(0,p.S)(n,a)),(0,l.X)(n,e.shape)}function v(e,t,n,r){if("linear"===t)return e;if("relu"===t)return(0,u.U)(e);if("elu"===t)return(0,a.p)(e);if("relu6"===t)return(0,c.b)(e);if("prelu"===t)return(0,s.A)(e,n);if("leakyrelu"===t)return(0,o.h)(e,r);if("sigmoid"===t)return(0,f.X)(e);throw new Error("Unknown fused activation ".concat(t,"."))}var g=function(e,t){return!(e>0)||"linear"===t}},9498:function(e,t,n){"use strict";n.d(t,{I:function(){return i}});var r=n(318),a=n(2145),o=n(8354);var i=(0,n(8640).op)({gather_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,s=(0,o._1)(e,"x","gather"),u=(0,o._1)(t,"indices","gather","int32"),c={x:s,indices:u},l={axis:n,batchDims:i};return r.BV.runKernel(a.qi,c,l)}})},3357:function(e,t,n){"use strict";n.d(t,{d:function(){return i}});var r=n(318),a=n(2145),o=n(8354);var i=(0,n(8640).op)({gatherND_:function(e,t){var n=(0,o._1)(t,"indices","gatherND","int32"),i={params:(0,o._1)(e,"x","gatherND","string_or_numeric"),indices:n};return r.BV.runKernel(a.q1,i)}})},5014:function(e,t,n){"use strict";n.d(t,{p:function(){return c}});var r=n(9439),a=n(318),o=n(2145),i=n(9064),s=n(8354),u=n(9877);var c=(0,n(8640).op)({greater_:function(e,t){var n=(0,s._1)(e,"a","greater","string_or_numeric"),c=(0,s._1)(t,"b","greater","string_or_numeric"),l=(0,i.makeTypesMatch)(n,c),f=(0,r.Z)(l,2);n=f[0],c=f[1],(0,u.assertAndGetBroadcastShape)(n.shape,c.shape);var d={a:n,b:c};return a.BV.runKernel(o.iZ,d)}})},8327:function(e,t,n){"use strict";n.d(t,{b:function(){return c}});var r=n(9439),a=n(318),o=n(2145),i=n(9064),s=n(8354),u=n(9877);var c=(0,n(8640).op)({greaterEqual_:function(e,t){var n=(0,s._1)(e,"a","greaterEqual","string_or_numeric"),c=(0,s._1)(t,"b","greaterEqual","string_or_numeric"),l=(0,i.makeTypesMatch)(n,c),f=(0,r.Z)(l,2);n=f[0],c=f[1],(0,u.assertAndGetBroadcastShape)(n.shape,c.shape);var d={a:n,b:c};return a.BV.runKernel(o.Ac,d)}})},6996:function(e,t,n){"use strict";n.d(t,{a:function(){return i}});var r=n(318),a=n(2145),o=n(8354);var i=(0,n(8640).op)({imag_:function(e){var t={input:(0,o._1)(e,"input","imag")};return r.BV.runKernel(a.J_,t)}})},464:function(e,t,n){"use strict";n.d(t,{I:function(){return l}});var r=n(4506),a=n(318),o=n(2145),i=n(8354),s=n(6147),u=n(8640),c=n(5561);var l=(0,u.op)({resizeBilinear_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],u=arguments.length>3&&void 0!==arguments[3]&&arguments[3],l=(0,i._1)(e,"images","resizeBilinear");s.hu(3===l.rank||4===l.rank,(function(){return"Error in resizeBilinear: x must be rank 3 or 4, but got "+"rank ".concat(l.rank,".")})),s.hu(2===t.length,(function(){return"Error in resizeBilinear: new shape must 2D, but got shape "+"".concat(t,".")})),s.hu(!1===u||!1===n,(function(){return"Error in resizeBilinear: If halfPixelCenters is true, alignCorners must be false."}));var f=l,d=!1;3===l.rank&&(d=!0,f=(0,c.X)(l,[1,l.shape[0],l.shape[1],l.shape[2]])),(0,r.Z)(t);var p={images:f},h={alignCorners:n,halfPixelCenters:u,size:t},m=a.BV.runKernel(o._Y,p,h);return d?(0,c.X)(m,[m.shape[1],m.shape[2],m.shape[3]]):m}})},8600:function(e,t,n){"use strict";n.d(t,{j:function(){return l}});var r=n(4506),a=n(318),o=n(2145),i=n(8354),s=n(6147),u=n(8640),c=n(5561);var l=(0,u.op)({resizeNearestNeighbor_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],u=arguments.length>3&&void 0!==arguments[3]&&arguments[3],l=(0,i._1)(e,"images","resizeNearestNeighbor");s.hu(3===l.rank||4===l.rank,(function(){return"Error in resizeNearestNeighbor: x must be rank 3 or 4, but got "+"rank ".concat(l.rank,".")})),s.hu(2===t.length,(function(){return"Error in resizeNearestNeighbor: new shape must 2D, but got shape "+"".concat(t,".")})),s.hu("float32"===l.dtype||"int32"===l.dtype,(function(){return"`images` must have `int32` or `float32` as dtype"})),s.hu(!1===u||!1===n,(function(){return"Error in resizeNearestNeighbor: If halfPixelCenters is true, alignCorners must be false."}));var f=l,d=!1;3===l.rank&&(d=!0,f=(0,c.X)(l,[1,l.shape[0],l.shape[1],l.shape[2]])),(0,r.Z)(t);var p={images:f},h={alignCorners:n,halfPixelCenters:u,size:t},m=a.BV.runKernel(o.dp,p,h);return d?(0,c.X)(m,[m.shape[1],m.shape[2],m.shape[3]]):m}})},300:function(e,t,n){"use strict";n.d(t,{x:function(){return i}});var r=n(318),a=n(2145),o=n(8354);var i=(0,n(8640).op)({isFinite_:function(e){var t={x:(0,o._1)(e,"x","isFinite")};return r.BV.runKernel(a.av,t)}})},4652:function(e,t,n){"use strict";n.d(t,{U:function(){return i}});var r=n(318),a=n(2145),o=n(8354);var i=(0,n(8640).op)({isInf_:function(e){var t={x:(0,o._1)(e,"x","isInf")};return r.BV.runKernel(a.iW,t)}})},7005:function(e,t,n){"use strict";n.d(t,{i:function(){return i}});var r=n(318),a=n(2145),o=n(8354);var i=(0,n(8640).op)({isNaN_:function(e){var t={x:(0,o._1)(e,"x","isNaN")};return r.BV.runKernel(a.r7,t)}})},4419:function(e,t,n){"use strict";n.d(t,{h:function(){return i}});var r=n(318),a=n(2145),o=n(8354);var i=(0,n(8640).op)({leakyRelu_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.2,n=(0,o._1)(e,"x","leakyRelu"),i={x:n},s={alpha:t};return r.BV.runKernel(a.J$,i,s)}})},4920:function(e,t,n){"use strict";n.d(t,{d:function(){return c}});var r=n(9439),a=n(318),o=n(2145),i=n(9064),s=n(8354),u=n(9877);var c=(0,n(8640).op)({less_:function(e,t){var n=(0,s._1)(e,"a","less","string_or_numeric"),c=(0,s._1)(t,"b","less","string_or_numeric"),l=(0,i.makeTypesMatch)(n,c),f=(0,r.Z)(l,2);n=f[0],c=f[1],(0,u.assertAndGetBroadcastShape)(n.shape,c.shape);var d={a:n,b:c};return a.BV.runKernel(o.vt,d)}})},2642:function(e,t,n){"use strict";n.d(t,{z:function(){return c}});var r=n(9439),a=n(318),o=n(2145),i=n(9064),s=n(8354),u=n(9877);var c=(0,n(8640).op)({lessEqual_:function(e,t){var n=(0,s._1)(e,"a","lessEqual","string_or_numeric"),c=(0,s._1)(t,"b","lessEqual","string_or_numeric"),l=(0,i.makeTypesMatch)(n,c),f=(0,r.Z)(l,2);n=f[0],c=f[1],(0,u.assertAndGetBroadcastShape)(n.shape,c.shape);var d={a:n,b:c};return a.BV.runKernel(o.CA,d)}})},2453:function(e,t,n){"use strict";n.d(t,{S:function(){return o}});var r=n(318),a=n(2145);function o(e,t,n){if(n<=0)throw new Error("The number of values should be positive.");var o={start:e,stop:t,num:n};return r.BV.runKernel(a.e7,{},o)}},936:function(e,t,n){"use strict";n.d(t,{G:function(){return c}});var r=n(318),a=n(2145),o=n(8354),i=n(6147),s=n(8640),u=n(5561);var c=(0,s.op)({localResponseNormalization_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.5,l=(0,o._1)(e,"x","localResponseNormalization");i.hu(4===l.rank||3===l.rank,(function(){return"Error in localResponseNormalization: x must be rank 3 or 4 but got\n               rank ".concat(l.rank,".")})),i.hu(i.GN(t),(function(){return"Error in localResponseNormalization: depthRadius must be an "+"integer but got depthRadius ".concat(t,".")}));var f=l,d=!1;3===l.rank&&(d=!0,f=(0,u.X)(l,[1,l.shape[0],l.shape[1],l.shape[2]]));var p={x:f},h={depthRadius:t,bias:n,alpha:s,beta:c},m=r.BV.runKernel(a.eZ,p,h);return d?(0,u.X)(m,[m.shape[1],m.shape[2],m.shape[3]]):m}})},378:function(e,t,n){"use strict";n.d(t,{c:function(){return i}});var r=n(318),a=n(2145),o=n(8354);var i=(0,n(8640).op)({log_:function(e){var t={x:(0,o._1)(e,"x","log","float32")};return r.BV.runKernel(a.Zb,t)}})},7270:function(e,t,n){"use strict";n.d(t,{K:function(){return i}});var r=n(318),a=n(2145),o=n(8354);var i=(0,n(8640).op)({log1p_:function(e){var t={x:(0,o._1)(e,"x","log1p")};return r.BV.runKernel(a.kU,t)}})},5113:function(e,t,n){"use strict";n.d(t,{e:function(){return l}});var r=n(6450),a=n(8354),o=n(651),i=n(4362),s=n(8640),u=n(7643),c=n(4626);var l=(0,s.op)({logSigmoid_:function(e){var t=(0,a._1)(e,"x","logSigmoid"),n=(0,r.cb)((function(e){return{value:(0,i.W)((0,c.W)((0,i.W)(e))),gradFunc:function(t){return(0,o.d)(t,(0,u.X)((0,i.W)(e)))}}}));return n(t)}})},4561:function(e,t,n){"use strict";n.d(t,{C:function(){return h}});var r=n(9439),a=n(6450),o=n(8354),i=n(9118),s=n(411),u=n(378),c=n(6176),l=n(651),f=n(8640),d=n(4774),p=n(227);var h=(0,f.op)({logSoftmax_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,n=(0,o._1)(e,"logits","logSoftmax");if(-1===t&&(t=n.rank-1),t!==n.rank-1)throw Error("Log Softmax along a non-last dimension is not yet supported. "+"Logits was rank ".concat(n.rank," and axis was ").concat(t));var f=(0,a.cb)((function(e,n){var a=(0,c.F)(e,t,!0),o=(0,d.l)(e,a),f=(0,d.l)((0,i.p)(o,"float32"),(0,u.c)((0,p.S)((0,s.Q)(o),t,!0)));n([f]);return{value:f,gradFunc:function(e,n){var a=(0,r.Z)(n,1)[0],o=(0,s.Q)(a);return(0,d.l)(e,(0,l.d)((0,p.S)(e,t,!0),o))}}}));return f(n)}})},5530:function(e,t,n){"use strict";n.d(t,{l:function(){return h}});var r=n(8354),a=n(6147),o=n(3312),i=n(8473),s=n(411),u=n(378),c=n(6176),l=n(8640),f=n(5561),d=n(4774),p=n(227);var h=(0,l.op)({logSumExp_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],l=(0,r._1)(e,"x","logSumExp"),h=(0,a.EC)(t,l.shape),m=(0,c.F)(l,h,!0),v=(0,d.l)(l,m),g=(0,s.Q)(v),y=(0,p.S)(g,h),b=(0,u.c)(y),x=(0,o.I)((0,f.X)(m,b.shape),b);if(n){var w=(0,i.rv)(x.shape,h);return(0,f.X)(x,w)}return x}})},2177:function(e,t,n){"use strict";n.d(t,{H:function(){return s}});var r=n(318),a=n(2145),o=n(8354),i=n(9877);var s=(0,n(8640).op)({logicalAnd_:function(e,t){var n=(0,o._1)(e,"a","logicalAnd","bool"),s=(0,o._1)(t,"b","logicalAnd","bool");(0,i.assertAndGetBroadcastShape)(n.shape,s.shape);var u={a:n,b:s};return r.BV.runKernel(a.PY,u)}})},875:function(e,t,n){"use strict";n.d(t,{h:function(){return i}});var r=n(318),a=n(2145),o=n(8354);var i=(0,n(8640).op)({logicalNot_:function(e){var t={x:(0,o._1)(e,"x","logicalNot","bool")};return r.BV.runKernel(a.Vf,t)}})},5117:function(e,t,n){"use strict";n.d(t,{K:function(){return s}});var r=n(318),a=n(2145),o=n(8354),i=n(9877);var s=(0,n(8640).op)({logicalOr_:function(e,t){var n=(0,o._1)(e,"a","logicalOr","bool"),s=(0,o._1)(t,"b","logicalOr","bool");(0,i.assertAndGetBroadcastShape)(n.shape,s.shape);var u={a:n,b:s};return r.BV.runKernel(a.MZ,u)}})},1712:function(e,t,n){"use strict";n.d(t,{e:function(){return u}});var r=n(8354),a=n(9877),o=n(2177),i=n(875),s=n(5117);var u=(0,n(8640).op)({logicalXor_:function(e,t){var n=(0,r._1)(e,"a","logicalXor","bool"),u=(0,r._1)(t,"b","logicalXor","bool");return(0,a.assertAndGetBroadcastShape)(n.shape,u.shape),(0,o.H)((0,s.K)(e,t),(0,i.h)((0,o.H)(e,t)))}})},7627:function(e,t,n){"use strict";var r;n.d(t,{I:function(){return r}}),function(e){e[e.NONE=0]="NONE",e[e.MEAN=1]="MEAN",e[e.SUM=2]="SUM",e[e.SUM_BY_NONZERO_WEIGHTS=3]="SUM_BY_NONZERO_WEIGHTS"}(r||(r={}))},7221:function(e,t,n){"use strict";n.d(t,{O:function(){return u}});var r=n(9439),a=n(318),o=n(2145),i=n(9064),s=n(8354);var u=(0,n(8640).op)({matMul_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],u=arguments.length>3&&void 0!==arguments[3]&&arguments[3],c=(0,s._1)(e,"a","matMul"),l=(0,s._1)(t,"b","matMul"),f=(0,i.makeTypesMatch)(c,l),d=(0,r.Z)(f,2),p={a:c=d[0],b:l=d[1]},h={transposeA:n,transposeB:u};return a.BV.runKernel(o.XL,p,h)}})},6176:function(e,t,n){"use strict";n.d(t,{F:function(){return i}});var r=n(318),a=n(2145),o=n(8354);var i=(0,n(8640).op)({max_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=(0,o._1)(e,"x","max"),s={x:i},u={reductionIndices:t,keepDims:n};return r.BV.runKernel(a.Yo,s,u)}})},5777:function(e,t,n){"use strict";n.d(t,{_:function(){return l}});var r=n(318),a=n(2145),o=n(8354),i=n(6147),s=n(6190),u=n(8640),c=n(5561);var l=(0,u.op)({maxPool_:function(e,t,n,u,l){var f=(0,o._1)(e,"x","maxPool"),d=f,p=!1;3===f.rank&&(p=!0,d=(0,c.X)(f,[1,f.shape[0],f.shape[1],f.shape[2]])),i.hu(4===d.rank,(function(){return"Error in maxPool: input must be rank 4 but got rank ".concat(d.rank,".")})),i.hu(s.jT(n,1),(function(){return"Error in maxPool: Either strides or dilations must be 1. "+"Got strides ".concat(n," and dilations '").concat(1,"'")})),s.m("maxPool",u,l);var h={x:d},m={filterSize:t,strides:n,pad:u,dimRoundingMode:l},v=r.BV.runKernel(a.mT,h,m);return p?(0,c.X)(v,[v.shape[1],v.shape[2],v.shape[3]]):v}})},9185:function(e,t,n){"use strict";n.d(t,{Y:function(){return l}});var r=n(318),a=n(2145),o=n(8354),i=n(6147),s=n(6190),u=n(8640),c=n(5561);var l=(0,u.op)({maxPool3d_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[1,1,1],n=arguments.length>2?arguments[2]:void 0,u=arguments.length>3?arguments[3]:void 0,l=arguments.length>4?arguments[4]:void 0,f=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"NDHWC",d=(0,o._1)(e,"x","maxPool3d"),p=d,h=!1;4===d.rank&&(h=!0,p=(0,c.X)(d,[1,d.shape[0],d.shape[1],d.shape[2],d.shape[3]])),i.hu(5===p.rank,(function(){return"Error in maxPool3d: x must be rank 5 but got rank ".concat(p.rank,".")})),i.hu("NDHWC"===f,(function(){return"Error in maxPool3d: Only NDHWC is currently supported, "+"but got dataFormat of ".concat(f)})),(0,s.m)("maxPool3d",u,l);var m={x:p},v={filterSize:t,strides:n,pad:u,dimRoundingMode:l,dataFormat:f},g=r.BV.runKernel(a.OA,m,v);return h?(0,c.X)(g,[g.shape[1],g.shape[2],g.shape[3],g.shape[4]]):g}})},8811:function(e,t,n){"use strict";n.d(t,{I:function(){return i}});var r=n(318),a=n(2145),o=n(8354);var i=(0,n(8640).op)({maxPoolWithArgmax_:function(e,t,n,i){var s=arguments.length>4&&void 0!==arguments[4]&&arguments[4],u=(0,o._1)(e,"x","maxPoolWithArgmax"),c={x:u},l={filterSize:t,strides:n,pad:i,includeBatchInIndex:s},f=r.BV.runKernel(a.vF,c,l);return{result:f[0],indexes:f[1]}}})},705:function(e,t,n){"use strict";n.d(t,{g:function(){return l}});var r=n(9439),a=n(318),o=n(2145),i=n(9064),s=n(8354),u=n(9877),c=n(9118);var l=(0,n(8640).op)({maximum_:function(e,t){var n=(0,s._1)(e,"a","maximum"),l=(0,s._1)(t,"b","maximum"),f=(0,i.makeTypesMatch)(n,l),d=(0,r.Z)(f,2);n=d[0],l=d[1],"bool"===n.dtype&&(n=(0,c.p)(n,"int32"),l=(0,c.p)(l,"int32")),(0,u.assertAndGetBroadcastShape)(n.shape,l.shape);var p={a:n,b:l};return a.BV.runKernel(o.BM,p)}})},6568:function(e,t,n){"use strict";n.d(t,{J:function(){return i}});var r=n(318),a=n(2145),o=n(8354);var i=(0,n(8640).op)({mean_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=(0,o._1)(e,"x","mean"),s={x:i},u={axis:t,keepDims:n};return r.BV.runKernel(a.q2,s,u)}})},7891:function(e,t,n){"use strict";n.d(t,{V:function(){return i}});var r=n(318),a=n(2145),o=n(8354);var i=(0,n(8640).op)({min_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=(0,o._1)(e,"x","min"),s={x:i},u={axis:t,keepDims:n};return r.BV.runKernel(a.c1,s,u)}})},2273:function(e,t,n){"use strict";n.d(t,{L:function(){return l}});var r=n(9439),a=n(318),o=n(2145),i=n(9064),s=n(8354),u=n(9877),c=n(9118);var l=(0,n(8640).op)({minimum_:function(e,t){var n=(0,s._1)(e,"a","minimum"),l=(0,s._1)(t,"b","minimum"),f=(0,i.makeTypesMatch)(n,l),d=(0,r.Z)(f,2);n=d[0],l=d[1],"bool"===n.dtype&&(n=(0,c.p)(n,"int32"),l=(0,c.p)(l,"int32")),(0,u.assertAndGetBroadcastShape)(n.shape,l.shape);var p={a:n,b:l};return a.BV.runKernel(o.q8,p)}})},9719:function(e,t,n){"use strict";n.d(t,{V:function(){return s}});var r=n(318),a=n(2145),o=n(8354),i=n(6147);var s=(0,n(8640).op)({mirrorPad_:function(e,t,n){i.hu("reflect"===n||"symmetric"===n,(function(){return"Invalid mode. Mode must be either reflect or symmetric. "+"Got ".concat(n,".")}));var s=(0,o._1)(e,"x","mirrorPad");if(0===s.rank)throw new Error("mirrorPad(scalar) is not defined. Pass non-scalar to mirrorPad");i.hu(t.length===s.rank,(function(){return"Padding doesn't match input. Must be ".concat(s.rank,". ")+"Got ".concat(t.length,".")}));for(var u="reflect"===n?1:0,c=function(e){i.hu(2===t[e].length,(function(){return"Invalid number of paddings. Must be length of 2 each."})),i.hu(t[e][0]>=0&&t[e][0]<=s.shape[e]-u&&t[e][1]>=0&&t[e][1]<=s.shape[e]-u,(function(){return"Padding in dimension ".concat(e," cannot be greater than or equal ")+"to ".concat(s.shape[e]-u," or less than 0 for input of ")+"shape ".concat(s.shape)}))},l=0;l<s.rank;l++)c(l);var f={paddings:t,mode:n},d={x:s};return r.BV.runKernel(a.jQ,d,f)}})},4645:function(e,t,n){"use strict";n.d(t,{w:function(){return u}});var r=n(9439),a=n(318),o=n(2145),i=n(9064),s=n(8354);var u=(0,n(8640).op)({mod_:function(e,t){var n=(0,s._1)(e,"a","mod"),u=(0,s._1)(t,"b","mod"),c=(0,i.makeTypesMatch)(n,u),l=(0,r.Z)(c,2),f={a:n=l[0],b:u=l[1]};return a.BV.runKernel(o.Vb,f)}})},651:function(e,t,n){"use strict";n.d(t,{d:function(){return u}});var r=n(9439),a=n(318),o=n(2145),i=n(9064),s=n(8354);var u=(0,n(8640).op)({mul_:function(e,t){var n=(0,s._1)(e,"a","mul"),u=(0,s._1)(t,"b","mul"),c=(0,i.makeTypesMatch)(n,u),l=(0,r.Z)(c,2),f={a:n=l[0],b:u=l[1]};return a.BV.runKernel(o.wY,f)}})},4660:function(e,t,n){"use strict";n.d(t,{S:function(){return u}});var r=n(318),a=n(2145),o=n(8354),i=n(8640),s=n(5561);var u=(0,i.op)({multinomial_:function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],u=(0,o._1)(e,"logits","multinomial"),c=u.size,l=u.rank;if(c<2)throw new Error("Error in multinomial: you need at least 2 outcomes, but got "+"".concat(c,"."));if(l>2)throw new Error("Rank of probabilities must be 1 or 2, but is ".concat(l));n=n||Math.random();var f=1===l?(0,s.X)(u,[1,-1]):u,d={logits:f},p={numSamples:t,seed:n,normalized:i},h=r.BV.runKernel(a.NZ,d,p);return 1===l?(0,s.X)(h,[h.size]):h}})},4362:function(e,t,n){"use strict";n.d(t,{W:function(){return i}});var r=n(318),a=n(2145),o=n(8354);var i=(0,n(8640).op)({neg_:function(e){var t={x:(0,o._1)(e,"x","neg")};return r.BV.runKernel(a.ku,t)}})},6662:function(e,t,n){"use strict";n.d(t,{K:function(){return g}});var r=n(8354),a=n(6147),o=n(7613),i=n(8473),s=n(6176),u=n(7891),c=n(8640),l=n(4334),f=n(5561),d=n(7067),p=n(6902),h=n(7391),m=n(227);function v(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(0===e.rank)return(0,o.W)(e);if(1!==e.rank&&null===n)return v((0,f.X)(e,[-1]),t,n);if(1===e.rank||"number"===typeof n||Array.isArray(n)&&1===n.length){if(1===t)return(0,m.S)((0,o.W)(e),n);if(t===1/0)return(0,s.F)((0,o.W)(e),n);if(t===-1/0)return(0,u.V)((0,o.W)(e),n);if("euclidean"===t||2===t)return(0,p._)((0,m.S)((0,l.s)((0,o.W)(e),(0,d.i)(2,"int32")),n));throw new Error("Error in norm: invalid ord value: ".concat(t))}if(Array.isArray(n)&&2===n.length){if(1===t)return(0,s.F)((0,m.S)((0,o.W)(e),n[0]),n[1]-1);if(t===1/0)return(0,s.F)((0,m.S)((0,o.W)(e),n[1]),n[0]);if(t===-1/0)return(0,u.V)((0,m.S)((0,o.W)(e),n[1]),n[0]);if("fro"===t||"euclidean"===t)return(0,p._)((0,m.S)((0,h.h)(e),n));throw new Error("Error in norm: invalid ord value: ".concat(t))}throw new Error("Error in norm: invalid axis: ".concat(n))}var g=(0,c.op)({norm_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"euclidean",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o=arguments.length>3&&void 0!==arguments[3]&&arguments[3],s=v(e=(0,r._1)(e,"x","norm"),t,n),u=s.shape;if(o){var c=(0,a.EC)(n,e.shape);u=i.rv(s.shape,c)}return(0,f.X)(s,u)}})},5549:function(e,t,n){"use strict";n.d(t,{Q:function(){return c}});var r=n(9439),a=n(318),o=n(2145),i=n(9064),s=n(8354),u=n(9877);var c=(0,n(8640).op)({notEqual_:function(e,t){var n=(0,s._1)(e,"a","notEqual","string_or_numeric"),c=(0,s._1)(t,"b","notEqual","string_or_numeric"),l=(0,i.makeTypesMatch)(n,c),f=(0,r.Z)(l,2);n=f[0],c=f[1],(0,u.assertAndGetBroadcastShape)(n.shape,c.shape);var d={a:n,b:c};return a.BV.runKernel(o.yQ,d)}})},4326:function(e,t,n){"use strict";n.d(t,{l:function(){return i}});var r=n(318),a=n(2145),o=n(8354);var i=(0,n(8640).op)({oneHot_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;if(t<2)throw new Error("Error in oneHot: depth must be >=2, but it is ".concat(t));var s=(0,o._1)(e,"indices","oneHot","int32"),u={indices:s},c={depth:t,onValue:n,offValue:i};return r.BV.runKernel(a.we,u,c)}})},6100:function(e,t,n){"use strict";n.d(t,{i:function(){return s}});var r=n(318),a=n(6147),o=n(9253),i=n(7742);function s(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"float32";if("complex64"===t){var n=s(e,"float32"),u=(0,i.l)(e,"float32");return(0,o.P)(n,u)}var c=(0,a.p8)((0,a.NA)(e),t);return r.BV.makeTensor(c,e,t)}},773:function(e,t,n){"use strict";n.d(t,{J:function(){return i}});var r=n(318),a=n(2145),o=n(8354);var i=(0,n(8640).op)({onesLike_:function(e){var t={x:(0,o._1)(e,"x","onesLike")};return r.BV.runKernel(a.qW,t)}})},8640:function(e,t,n){"use strict";n.d(t,{z:function(){return o},op:function(){return i}});var r=n(318),a=n(6147),o="__op";function i(e){var t=Object.keys(e);if(1!==t.length)throw new Error("Please provide an object with a single key (operation name) mapping to a function. Got an object with "+"".concat(t.length," keys."));var n=t[0],i=e[n];n.endsWith("_")&&(n=n.substring(0,n.length-1)),n+=o;var s=function(){r.BV.startScope(n);try{var e=i.apply(void 0,arguments);return(0,a.tI)(e)&&console.error("Cannot return a Promise inside of tidy."),r.BV.endScope(e),e}catch(t){throw r.BV.endScope(null),t}};return Object.defineProperty(s,"name",{value:n,configurable:!0}),s}},5317:function(e,t,n){"use strict";n.d(t,{zvA:function(){return S.z},WnP:function(){return r.W},Khb:function(){return a.K},__u:function(){return o._},IHx:function(){return i.I},QBD:function(){return s.Q},$6P:function(){return u.$},YjB:function(){return c.Y},NqF:function(){return l.N},vHJ:function(){return f.v},ZRM:function(){return d.Z},VfV:function(){return p.V},z4N:function(){return h.z},fvJ:function(){return m.f},C80:function(){return v.C},wS1:function(){return g.w},uR5:function(){return y.u},zEQ:function(){return C},tgs:function(){return I.t},Dxk:function(){return A},JY5:function(){return D},p3b:function(){return M},E4h:function(){return T.E},yE8:function(){return R.y},anm:function(){return Bn},XsQ:function(){return P.X},UFq:function(){return j.U},f3b:function(){return F.f},pju:function(){return L.p},mDi:function(){return B.m},iUl:function(){return z.i},d9v:function(){return Z.d},PYB:function(){return V.P},zoF:function(){return x.z},gME:function(){return U},Izb:function(){return q},MNy:function(){return W},ZaL:function(){return H},PAt:function(){return G.P},Tek:function(){return K.T},bc:function(){return X.b},pdZ:function(){return Y.p},$QV:function(){return J},mCk:function(){return Q.m},f9Y:function(){return ee.f},mew:function(){return Xn},zbp:function(){return te.z},ppE:function(){return ne.p},nTT:function(){return re.n},B10:function(){return ae.B},Ka3:function(){return se},WmZ:function(){return ue.W},hiC:function(){return ce.h},NTj:function(){return le.N},AKD:function(){return fe.A},rvX:function(){return Gn},WYO:function(){return de.W},pyx:function(){return pe.p},GRh:function(){return Kn},DgJ:function(){return he.D},qNN:function(){return me.q},Qqt:function(){return ve.Q},dt4:function(){return ge.d},t$B:function(){return ye.t},iyy:function(){return we},kp_:function(){return rn.k},hlL:function(){return ke.h},GWj:function(){return Se.G},qPi:function(){return _e.q},imm:function(){return Jn},Iqj:function(){return Ne.I},dbB:function(){return Hn.d},pjt:function(){return Ee.p},brS:function(){return Ce.b},Sxn:function(){return an.S},asL:function(){return Te.a},BHj:function(){return $r},V3u:function(){return $n},wx0:function(){return on.w},xVT:function(){return Ie.x},UWc:function(){return Oe.U},i2d:function(){return Ae.i},hi7:function(){return De.h},d9m:function(){return Me.d},zN1:function(){return Re.z},$r2:function(){return Jr},SX3:function(){return Pe.S},G9k:function(){return je.G},cM7:function(){return Fe.c},Krr:function(){return Le.K},e_t:function(){return Be.e},CmS:function(){return ze.C},l_t:function(){return Ze.l},HvI:function(){return Ve.H},hJK:function(){return Ue.h},K5V:function(){return qe.K},egP:function(){return We.e},MB5:function(){return Qr},OI3:function(){return w.O},Fp7:function(){return He.F},_sB:function(){return Ge._},YQQ:function(){return Ke.Y},Ip$:function(){return Xe.I},gWQ:function(){return Ye.g},J69:function(){return $e.J},ry_:function(){return et},VV$:function(){return tt.V},LTh:function(){return nt.L},VdP:function(){return rt.V},wQq:function(){return at.w},Gi7:function(){return ut},p_:function(){return Un},dC7:function(){return k.d},rq4:function(){return ct},SJ_:function(){return lt.S},W76:function(){return ft.W},KOy:function(){return Zn.K},Quu:function(){return dt.Q},lfX:function(){return pt.l},iUs:function(){return Je.i},JpU:function(){return ht.J},op:function(){return S.op},N2O:function(){return mt},vku:function(){return vt.v},pNR:function(){return gt},koy:function(){return yt},t1L:function(){return bt},lGY:function(){return xt},d_R:function(){return wt.d},sQ3:function(){return kt.s},AL3:function(){return St.A},S0v:function(){return _t.S},WVs:function(){return Nt.W},TN_:function(){return Et},wzB:function(){return Tt},nGf:function(){return It},LGj:function(){return Ot.L},w6H:function(){return At.w},kwC:function(){return Dt.k},M25:function(){return Mt.M},UYe:function(){return Rt.U},btT:function(){return Pt.b},XLQ:function(){return be.X},GYS:function(){return jt.G},SDf:function(){return Ft},diP:function(){return Lt},sx7:function(){return Bt},mG2:function(){return zt},QEs:function(){return sn.Q},NMM:function(){return Zt.N},bp0:function(){return Vt.b},iD$:function(){return Ut.i},snQ:function(){return qn.s},U8D:function(){return qt.U},U_I:function(){return Wt.U},ODp:function(){return Ht.O},XD2:function(){return _.X},Xxe:function(){return Gt.X},tdS:function(){return Yr},O$l:function(){return Kt.O},R_K:function(){return Xt.R},tPi:function(){return N.t},jZU:function(){return Yt},SmN:function(){return $t},CnO:function(){return Jt},p0P:function(){return Qt},XAC:function(){return en.X},Wvh:function(){return tn.W},fBT:function(){return nn.f},rVs:function(){return ea},ers:function(){return Wn.e},uN7:function(){return Xr},Vl2:function(){return un.V},_b3:function(){return cn._},h62:function(){return it.h},$i:function(){return ln.$},L9e:function(){return fn.L},knu:function(){return dn.k},Nbs:function(){return pn.N},NXj:function(){return hn.N},Z_8:function(){return ta},luU:function(){return st.l},Smz:function(){return mn.S},ORZ:function(){return vn.O},AEp:function(){return E.A},XeE:function(){return gn.X},RRF:function(){return yn.R},odF:function(){return xn},wOQ:function(){return wn.w},yXz:function(){return kn},Bfx:function(){return Sn},xZs:function(){return _n},Gg6:function(){return xe.G},hg7:function(){return Nn.h},p4s:function(){return zn.p},Xu6:function(){return En.X},Two:function(){return Cn.T},pUJ:function(){return Tn.p},HHK:function(){return In.H},VD$:function(){return On},arb:function(){return An.a},itS:function(){return Dn.i},lls:function(){return Mn.l},P84:function(){return Rn.P}});var r=n(7613),a=n(1719),o=n(4502),i=n(3312),s=n(5506),u=n(4108),c=n(8543),l=n(9995),f=n(5157),d=n(3053),p=n(54),h=n(4778),m=n(2227),v=n(6115),g=n(6573),y=n(5840),b=n(8354),x=n(4836),w=n(7221),k=n(651),S=n(8640),_=n(7643),N=n(9238),E=n(1744);var C=(0,S.op)({basicLSTMCell_:function(e,t,n,r,a,o){var s=(0,b._1)(e,"forgetBias","basicLSTMCell"),u=(0,b._1)(t,"lstmKernel","basicLSTMCell"),c=(0,b._1)(n,"lstmBias","basicLSTMCell"),l=(0,b._1)(r,"data","basicLSTMCell"),f=(0,b._1)(a,"c","basicLSTMCell"),d=(0,b._1)(o,"h","basicLSTMCell"),p=(0,x.z)([l,d],1),h=(0,w.O)(p,u),m=(0,i.I)(h,c),v=m.shape[0],g=m.shape[1]/4,y=[v,g],S=(0,N.t)(m,[0,0],y),C=(0,N.t)(m,[0,g],y),T=(0,N.t)(m,[0,2*g],y),I=(0,N.t)(m,[0,3*g],y),O=(0,i.I)((0,k.d)((0,_.X)(S),(0,E.A)(C)),(0,k.d)(f,(0,_.X)((0,i.I)(s,T))));return[O,(0,k.d)((0,E.A)(O),(0,_.X)(I))]}}),T=n(6994),I=n(3700),O=n(6147);var A=(0,S.op)({batchNorm2d_:function(e,t,n,r,a,o){var i,s,u=(0,b._1)(e,"x","batchNorm"),c=(0,b._1)(t,"mean","batchNorm"),l=(0,b._1)(n,"variance","batchNorm");return null!=a&&(i=(0,b._1)(a,"scale","batchNorm")),null!=r&&(s=(0,b._1)(r,"offset","batchNorm")),O.hu(2===u.rank,(function(){return"Error in batchNorm2D: x must be rank 2 but got rank "+"".concat(u.rank,".")})),O.hu(2===c.rank||1===c.rank,(function(){return"Error in batchNorm2D: mean must be rank 2 or rank 1 but "+"got rank ".concat(c.rank,".")})),O.hu(2===l.rank||1===l.rank,(function(){return"Error in batchNorm2D: variance must be rank 2 or rank 1 "+"but got rank ".concat(l.rank,".")})),null!=i&&O.hu(2===i.rank||1===i.rank,(function(){return"Error in batchNorm2D: scale must be rank 2 or rank 1 "+"but got rank ".concat(i.rank,".")})),null!=s&&O.hu(2===s.rank||1===s.rank,(function(){return"Error in batchNorm2D: offset must be rank 2 or rank 1 "+"but got rank ".concat(s.rank,".")})),(0,I.t)(u,c,l,s,i,o)}});var D=(0,S.op)({batchNorm3d_:function(e,t,n,r,a,o){var i,s,u=(0,b._1)(e,"x","batchNorm"),c=(0,b._1)(t,"mean","batchNorm"),l=(0,b._1)(n,"variance","batchNorm");return null!=a&&(i=(0,b._1)(a,"scale","batchNorm")),null!=r&&(s=(0,b._1)(r,"offset","batchNorm")),O.hu(3===u.rank,(function(){return"Error in batchNorm3D: x must be rank 3 but got rank "+"".concat(u.rank,".")})),O.hu(3===c.rank||1===c.rank,(function(){return"Error in batchNorm3D: mean must be rank 3 or rank 1 but "+"got rank ".concat(c.rank,".")})),O.hu(3===l.rank||1===l.rank,(function(){return"Error in batchNorm3D: variance must be rank 3 or rank 1 "+"but got rank ".concat(l.rank,".")})),null!=i&&O.hu(3===i.rank||1===i.rank,(function(){return"Error in batchNorm3D: scale must be rank 3 or rank 1 "+"but got rank ".concat(i.rank,".")})),null!=s&&O.hu(3===s.rank||1===s.rank,(function(){return"Error in batchNorm3D: offset must be rank 3 or rank 1 "+"but got rank ".concat(s.rank,".")})),(0,I.t)(u,c,l,s,i,o)}});var M=(0,S.op)({batchNorm4d_:function(e,t,n,r,a,o){var i,s,u=(0,b._1)(e,"x","batchNorm"),c=(0,b._1)(t,"mean","batchNorm"),l=(0,b._1)(n,"variance","batchNorm");return null!=a&&(i=(0,b._1)(a,"scale","batchNorm")),null!=r&&(s=(0,b._1)(r,"offset","batchNorm")),O.hu(4===u.rank,(function(){return"Error in batchNorm4D: x must be rank 4 but got rank "+"".concat(u.rank,".")})),O.hu(4===c.rank||1===c.rank,(function(){return"Error in batchNorm4D: mean must be rank 4 or rank 1 but "+"got rank ".concat(c.rank,".")})),O.hu(4===l.rank||1===l.rank,(function(){return"Error in batchNorm4D: variance must be rank 4 or rank 1 "+"but got rank ".concat(l.rank,".")})),null!=i&&O.hu(4===i.rank||1===i.rank,(function(){return"Error in batchNorm4D: scale must be rank 4 or rank 1 "+"but got rank ".concat(i.rank,".")})),null!=s&&O.hu(4===s.rank||1===s.rank,(function(){return"Error in batchNorm4D: offset must be rank 4 or rank 1 "+"but got rank ".concat(s.rank,".")})),(0,I.t)(u,c,l,s,i,o)}}),R=n(7531),P=n(238),j=n(9742),F=n(7039),L=n(9118),B=n(1396),z=n(9836),Z=n(672),V=n(9253);var U=(0,S.op)({concat1d_:function(e){return(0,x.z)(e,0)}});var q=(0,S.op)({concat2d_:function(e,t){return(0,x.z)(e,t)}});var W=(0,S.op)({concat3d_:function(e,t){return(0,x.z)(e,t)}});var H=(0,S.op)({concat4d_:function(e,t){return(0,x.z)(e,t)}}),G=n(4918),K=n(3457),X=n(1732),Y=n(8113),$=n(1873);var J=(0,S.op)({conv3dTranspose_:function(e,t,n,r,a){var o=(0,b._1)(e,"x","conv3dTranspose"),i=(0,b._1)(t,"filter","conv3dTranspose");return(0,$._)(n,o,i,r,a)}}),Q=n(1227),ee=n(6679),te=n(8862),ne=n(7419),re=n(1878),ae=n(1147),oe=n(318),ie=n(2145);var se=(0,S.op)({diag_:function(e){var t={x:(0,b._1)(e,"x","diag")};return oe.BV.runKernel(ie.$w,t)}}),ue=n(7580),ce=n(5750),le=n(5923),fe=n(5043),de=n(8060),pe=n(2353),he=n(3254),me=n(3891),ve=n(411),ge=n(2975),ye=n(5682),be=n(5561),xe=n(2343);var we=(0,S.op)({eye_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"float32";null==t&&(t=e);for(var a=(0,F.f)([e,t],r),o=e<=t?e:t,i=0;i<o;++i)a.set(1,i,i);var s=(0,be.X)(a.toTensor(),[e,t]);if(null==n)return s;if(1===n.length)return(0,xe.G)((0,ge.d)(s,0),[n[0],1,1]);if(2===n.length)return(0,xe.G)((0,ge.d)((0,ge.d)(s,0),0),[n[0],n[1],1,1]);if(3===n.length)return(0,xe.G)((0,ge.d)((0,ge.d)((0,ge.d)(s,0),0),0),[n[0],n[1],n[2],1,1]);throw new Error("eye() currently supports only 1D and 2D "+"batchShapes, but received ".concat(n.length,"D."))}}),ke=n(8582),Se=n(2628),_e=n(7145),Ne=n(9498),Ee=n(5014),Ce=n(8327),Te=n(6996),Ie=n(300),Oe=n(4652),Ae=n(7005),De=n(4419),Me=n(4920),Re=n(2642),Pe=n(2453),je=n(936),Fe=n(378),Le=n(7270),Be=n(5113),ze=n(4561),Ze=n(5530),Ve=n(2177),Ue=n(875),qe=n(5117),We=n(1712),He=n(6176),Ge=n(5777),Ke=n(9185),Xe=n(8811),Ye=n(705),$e=n(6568),Je=n(6100),Qe=n(4376);function et(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.indexing,a=void 0===r?"xy":r;if("xy"!==a&&"ij"!==a)throw new TypeError("".concat(a," is not a valid third argument to meshgrid"));if(void 0===e)return[];var o=(0,b._1)(e,"x","meshgrid",e instanceof Qe.es?e.dtype:"float32");if(void 0===t)return[o];var i=(0,b._1)(t,"y","meshgrid",t instanceof Qe.es?t.dtype:"float32"),s=(0,O.NA)(o.shape),u=(0,O.NA)(i.shape);return"xy"===a?(o=(0,be.X)(o,[1,-1]),i=(0,be.X)(i,[-1,1]),[(0,w.O)((0,Je.i)([u,1],o.dtype),o),(0,w.O)(i,(0,Je.i)([1,s],i.dtype))]):(o=(0,be.X)(o,[-1,1]),i=(0,be.X)(i,[1,-1]),[(0,w.O)(o,(0,Je.i)([1,u],o.dtype)),(0,w.O)((0,Je.i)([s,1],i.dtype),i)])}var tt=n(7891),nt=n(2273),rt=n(9719),at=n(4645),ot=n(8473),it=n(7391),st=n(4774);var ut=(0,S.op)({moments_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];e=(0,b._1)(e,"x","moments");var r=(0,O.EC)(t,e.shape),a=(0,$e.J)(e,r,n),o=a.shape;n||(o=(0,ot.rv)(a.shape,r));var i=(0,it.h)((0,st.l)((0,L.p)(e,"float32"),(0,be.X)(a,o))),s=(0,$e.J)(i,r,n);return{mean:a,variance:s}}});var ct=(0,S.op)({multiRNNCell_:function(e,t,n,r){for(var a=(0,b._1)(t,"data","multiRNNCell"),o=(0,b.sI)(n,"c","multiRNNCell"),i=(0,b.sI)(r,"h","multiRNNCell"),s=a,u=[],c=0;c<e.length;c++){var l=e[c](s,o[c],i[c]);u.push(l[0]),u.push(l[1]),s=l[1]}for(var f=[],d=[],p=0;p<u.length;p+=2)f.push(u[p]),d.push(u[p+1]);return[f,d]}}),lt=n(4660),ft=n(4362),dt=n(5549),pt=n(4326),ht=n(773);var mt=(0,S.op)({outerProduct_:function(e,t){var n=(0,b._1)(e,"v1","outerProduct"),r=(0,b._1)(t,"v2","outerProduct");O.hu(1===n.rank&&1===r.rank,(function(){return"Error in outerProduct: inputs must be rank 1, but got ranks "+"".concat(n.rank," and ").concat(r.rank,".")}));var a=(0,be.X)(n,[-1,1]),o=(0,be.X)(r,[1,-1]);return(0,w.O)(a,o)}}),vt=n(1970);var gt=(0,S.op)({pad1d_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return(0,O.hu)(2===t.length,(function(){return"Invalid number of paddings. Must be length of 2."})),(0,vt.v)(e,[t],n)}});var yt=(0,S.op)({pad2d_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return(0,O.hu)(2===t.length&&2===t[0].length&&2===t[1].length,(function(){return"Invalid number of paddings. Must be length of 2 each."})),(0,vt.v)(e,t,n)}});var bt=(0,S.op)({pad3d_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return(0,O.hu)(3===t.length&&2===t[0].length&&2===t[1].length&&2===t[2].length,(function(){return"Invalid number of paddings. Must be length of 2 each."})),(0,vt.v)(e,t,n)}});var xt=(0,S.op)({pad4d_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return(0,O.hu)(4===t.length&&2===t[0].length&&2===t[1].length&&2===t[2].length&&2===t[3].length,(function(){return"Invalid number of paddings. Must be length of 2 each."})),(0,vt.v)(e,t,n)}}),wt=n(7226),kt=n(4334),St=n(6859),_t=n(4600),Nt=n(7722);var Et=(0,S.op)({rand_:function(e,t,n){var r=(0,O.NA)(e),a=null;if(null==n||"float32"===n)a=new Float32Array(r);else if("int32"===n)a=new Int32Array(r);else{if("bool"!==n)throw new Error("Unknown data type ".concat(n));a=new Uint8Array(r)}for(var o=0;o<r;o++)a[o]=t();return oe.BV.makeTensor(a,e,n)}}),Ct=n(4466);var Tt=(0,S.op)({randomGamma_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"float32",a=arguments.length>4?arguments[4]:void 0;if(null==n&&(n=1),null==r&&(r="float32"),"float32"!==r&&"int32"!==r)throw new Error("Unsupported data type ".concat(r));for(var o=new Ct.T9(t,n,r,a),i=(0,F.f)(e,r),s=0;s<i.values.length;s++)i.values[s]=o.nextValue();return i.toTensor()}});var It=(0,S.op)({randomNormal_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3?arguments[3]:void 0,a=arguments.length>4?arguments[4]:void 0;if(null!=r&&"bool"===r)throw new Error("Unsupported data type ".concat(r));for(var o=new Ct.Yi(t,n,r,!1,a),i=(0,F.f)(e,r),s=0;s<i.values.length;s++)i.values[s]=o.nextValue();return i.toTensor()}}),Ot=n(6407),At=n(422),Dt=n(6972),Mt=n(2209),Rt=n(7539),Pt=n(5900),jt=n(4933);var Ft=(0,S.op)({reverse1d_:function(e){var t=(0,b._1)(e,"x","reverse");return O.hu(1===t.rank,(function(){return"Error in reverse1D: x must be rank 1 but got rank ".concat(t.rank,".")})),(0,jt.G)(t,0)}});var Lt=(0,S.op)({reverse2d_:function(e,t){var n=(0,b._1)(e,"x","reverse");return O.hu(2===n.rank,(function(){return"Error in reverse2D: x must be rank 2 but got rank ".concat(n.rank,".")})),(0,jt.G)(n,t)}});var Bt=(0,S.op)({reverse3d_:function(e,t){var n=(0,b._1)(e,"x","reverse");return O.hu(3===n.rank,(function(){return"Error in reverse3D: x must be rank 3 but got rank ".concat(n.rank,".")})),(0,jt.G)(n,t)}});var zt=(0,S.op)({reverse4d_:function(e,t){var n=(0,b._1)(e,"x","reverse");return O.hu(4===n.rank,(function(){return"Error in reverse4D: x must be rank 4 but got rank ".concat(n.rank,".")})),(0,jt.G)(n,t)}}),Zt=n(766),Vt=n(5115),Ut=n(7067),qt=n(413),Wt=n(119),Ht=n(4438),Gt=n(2070),Kt=n(7254),Xt=n(7657);var Yt=(0,S.op)({slice1d_:function(e,t,n){var r=(0,b._1)(e,"x","slice1d");return O.hu(1===r.rank,(function(){return"slice1d expects a rank-1 tensor, but got a rank-".concat(r.rank," tensor")})),(0,N.t)(r,[t],[n])}});var $t=(0,S.op)({slice2d_:function(e,t,n){var r=(0,b._1)(e,"x","slice2d");return O.hu(2===r.rank,(function(){return"slice2d expects a rank-2 tensor, but got a rank-".concat(r.rank," tensor")})),(0,N.t)(r,t,n)}});var Jt=(0,S.op)({slice3d_:function(e,t,n){var r=(0,b._1)(e,"x","slice3d");return O.hu(3===r.rank,(function(){return"slice3d expects a rank-3 tensor, but got a rank-".concat(r.rank," tensor")})),(0,N.t)(r,t,n)}});var Qt=(0,S.op)({slice4d_:function(e,t,n){var r=(0,b._1)(e,"x","slice4d");return O.hu(4===r.rank,(function(){return"slice4d expects a rank-4 tensor, but got a rank-".concat(r.rank," tensor")})),(0,N.t)(r,t,n)}}),en=n(4910),tn=n(4626),nn=n(5696),rn=n(7635),an=n(530),on=n(774),sn=n(4617),un=n(2588),cn=n(6902),ln=n(7993),fn=n(3931),dn=n(8306),pn=n(4031),hn=n(9017),mn=n(227),vn=n(6999),gn=n(2442),yn=n(2894),bn=n(7960);function xn(e,t,n){if((0,O.Cq)(e),null!=t&&2!==t.length)throw new Error("tensor2d() requires shape to have two numbers");var r=(0,b.C)(e,n);if(2!==r.length&&1!==r.length)throw new Error("tensor2d() requires values to be number[][] or flat/TypedArray");if(1===r.length&&null==t)throw new Error("tensor2d() requires shape to be provided when `values` are a flat/TypedArray");return(0,bn.H)(e,t,r,n)}var wn=n(3123);function kn(e,t,n){if((0,O.Cq)(e),null!=t&&4!==t.length)throw new Error("tensor4d() requires shape to have four numbers");var r=(0,b.C)(e,n);if(4!==r.length&&1!==r.length)throw new Error("tensor4d() requires values to be number[][][][] or flat/TypedArray");if(1===r.length&&null==t)throw new Error("tensor4d() requires shape to be provided when `values` are a flat array");return(0,bn.H)(e,t,r,n)}function Sn(e,t,n){if((0,O.Cq)(e),null!=t&&5!==t.length)throw new Error("tensor5d() requires shape to have five numbers");var r=(0,b.C)(e,n);if(5!==r.length&&1!==r.length)throw new Error("tensor5d() requires values to be number[][][][][] or flat/TypedArray");if(1===r.length&&null==t)throw new Error("tensor5d() requires shape to be provided when `values` are a flat array");return(0,bn.H)(e,t,r,n)}function _n(e,t,n){if((0,O.Cq)(e),null!=t&&6!==t.length)throw new Error("tensor6d() requires shape to have six numbers");var r=(0,b.C)(e,n);if(6!==r.length&&1!==r.length)throw new Error("tensor6d() requires values to be number[][][][][][] or flat/TypedArray");if(1===r.length&&null==t)throw new Error("tensor6d() requires shape to be provided when `values` are a flat array");return t=t||r,(0,bn.H)(e,t,r,n)}var Nn=n(9085),En=n(4849),Cn=n(4860),Tn=n(6918),In=n(4566);function On(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;return oe.BV.makeVariable(e,t,n,r)}var An=n(329),Dn=n(1867),Mn=n(7742),Rn=n(7293),Pn=n(5861),jn=n(7757),Fn=n.n(jn);function Ln(){return Ln=(0,Pn.Z)(Fn().mark((function e(t,n,r){var a,o,i,s,u,c,l,f,d,p,h,m,v;return Fn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(a=(0,b._1)(t,"tensor","boolMask"),o=(0,b._1)(n,"mask","boolMask","bool"),i=null==r?0:r,s=o.rank,u=a.shape,O.hu(s>0,(function(){return"mask cannot be scalar"})),O.k5(u.slice(i,i+s),o.shape,"mask's shape must match the first K dimensions of tensor's shape,"),c=1,l=i;l<i+s;l++)c*=u[l];return f=u.slice(0,i).concat([c],u.slice(i+s)),d=(0,be.X)(a,f),p=(0,be.X)(o,[-1]),e.next=14,(0,Dn.i)(p);case 14:return h=e.sent,m=(0,fn.L)(h,[1]),v=(0,Ne.I)(d,m,i),t!==a&&a.dispose(),n!==o&&o.dispose(),m.dispose(),d.dispose(),p.dispose(),h.dispose(),e.abrupt("return",v);case 24:case"end":return e.stop()}}),e)}))),Ln.apply(this,arguments)}var Bn=function(e,t,n){return Ln.apply(this,arguments)},zn=n(1240),Zn=n(6662),Vn=n(9064);var Un=(0,S.op)({movingAverage_:function(e,t,n,r){var a=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],o=(0,b._1)(e,"v","movingAverage"),s=(0,b._1)(t,"x","movingAverage"),u=(0,b._1)(n,"decay","movingAverage");(0,Vn.assertTypesMatch)(o,s),O.hu(O.cO(o.shape,s.shape),(function(){return"Shape mismatch in v and x"}));var c=(0,Ut.i)(1),l=(0,st.l)(c,u),f=(0,k.d)((0,st.l)(s,o),l);if(a){O.hu(null!=r,(function(){return"When using zeroDebias: true, step is required."}));var d=(0,b._1)(r,"step","movingAverage");f=(0,ce.h)(f,(0,st.l)(c,(0,kt.s)(u,d)))}return(0,i.I)(o,f)}}),qn=n(3522),Wn=n(9991),Hn=n(3357);var Gn=(0,S.op)({dropout_:function(e,t,n,r){var a=(0,b._1)(e,"x","dropout");if(O.hu("float32"===a.dtype,(function(){return"x has to be a floating point tensor since it's going to be "+"scaled, but got a ".concat(a.dtype," tensor instead.")})),O.hu(t>=0&&t<1,(function(){return"rate must be a float in the range [0, 1), but got ".concat(t,".")})),0===t)return e instanceof Qe.es?a.clone():a;var o=function(e,t){if(null==t)return e.shape.slice();if(O.cO(e.shape,t))return t;if(e.shape.length===t.length){for(var n=[],r=0;r<e.shape.length;r++)null==t[r]&&null!=e.shape[r]?n.push(e.shape[r]):n.push(t[r]);return n}return t}(a,n),s=1-t,u=(0,ce.h)((0,Se.G)((0,i.I)((0,Ot.L)(o,0,1,"float32",r),s)),s);return(0,k.d)(a,u)}});function Kn(e){return Math.floor(Math.pow(2,Math.ceil(Math.log(e)/Math.log(2))))}function Xn(e,t,n){for(var r=1-e%2,a=new Float32Array(e),o=0;o<e;++o){var i=2*Math.PI*o/(e+r-1);a[o]=t-n*Math.cos(i)}return(0,yn.R)(a,"float32")}function Yn(){return Yn=(0,Pn.Z)(Fn().mark((function e(t,n){var r,a,o,i,s,u,c,l,f,d,p,h,m,v,g,y=arguments;return Fn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=y.length>2&&void 0!==y[2]?y[2]:1,a=(0,b._1)(t,"predictions","inTopK"),o=(0,b._1)(n,"targets","inTopK"),(0,O.hu)(a.rank>1,(function(){return"inTopK() expects the predictions to be of rank 2 or higher, "+"but got ".concat(a.rank)})),(0,O.hu)(a.rank-1===o.rank,(function(){return"predictions rank should be 1 larger than targets rank, but got predictions rank "+"".concat(a.rank," and targets rank ").concat(o.rank)})),(0,O.k5)(a.shape.slice(0,a.shape.length-1),o.shape,"predictions's shape should be align with the targets' shape, except the last dimension."),i=a.shape[a.shape.length-1],(0,O.hu)(r>0&&r<=i,(function(){return"'k' passed to inTopK() must be > 0 && <= the predictions last "+"dimension (".concat(i,"), but got ").concat(r)})),e.next=10,a.data();case 10:return s=e.sent,e.next=13,o.data();case 13:u=e.sent,c=s.length/i,l=i,f=(0,O.WP)("bool",c),d=0;case 17:if(!(d<c)){e.next=35;break}for(p=d*l,h=s.subarray(p,p+l),m=[],v=0;v<h.length;v++)m.push({value:h[v],index:v});m.sort((function(e,t){return t.value-e.value})),f[d]=0,g=0;case 25:if(!(g<r)){e.next=32;break}if(m[g].index!==u[d]){e.next=29;break}return f[d]=1,e.abrupt("break",32);case 29:g++,e.next=25;break;case 32:d++,e.next=17;break;case 35:return t!==a&&a.dispose(),n!==o&&o.dispose(),e.abrupt("return",(0,gn.X)(f,o.shape,"bool"));case 38:case"end":return e.stop()}}),e)}))),Yn.apply(this,arguments)}var $n=function(e,t){return Yn.apply(this,arguments)},Jn=n(6947);var Qn=(0,S.op)({hammingWindow_:function(e){return Xn(e,.54,.46)}});var er=(0,S.op)({hannWindow_:function(e){return Xn(e,.5,.5)}});var tr=(0,S.op)({frame_:function(e,t,n){for(var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=0,i=[];o+t<=e.size;)i.push((0,N.t)(e,o,t)),o+=n;if(r)for(;o<e.size;){var s=o+t-e.size,u=(0,x.z)([(0,N.t)(e,o,t-s),(0,ke.h)([s],a)]);i.push(u),o+=n}return 0===i.length?xn([],[0,t]):(0,be.X)((0,x.z)(i),[i.length,t])}});var nr=(0,S.op)({stft_:function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:er;null==r&&(r=Kn(t));var o=tr(e,t,n),i=(0,k.d)(o,a(t));return(0,sn.Q)(i,r)}});var rr=(0,S.op)({cropAndResize_:function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"bilinear",o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,i=(0,b._1)(e,"image","cropAndResize"),s=(0,b._1)(t,"boxes","cropAndResize","float32"),u=(0,b._1)(n,"boxInd","cropAndResize","int32"),c=s.shape[0];O.hu(4===i.rank,(function(){return"Error in cropAndResize: image must be rank 4,"+"but got rank ".concat(i.rank,".")})),O.hu(2===s.rank&&4===s.shape[1],(function(){return"Error in cropAndResize: boxes must be have size [".concat(c,",4] ")+"but had shape ".concat(s.shape,".")})),O.hu(1===u.rank&&u.shape[0]===c,(function(){return"Error in cropAndResize: boxInd must be have size [".concat(c,"] ")+"but had shape ".concat(s.shape,".")})),O.hu(2===r.length,(function(){return"Error in cropAndResize: cropSize must be of length 2, but got "+"length ".concat(r.length,".")})),O.hu(r[0]>=1&&r[1]>=1,(function(){return"cropSize must be atleast [1,1], but was ".concat(r)})),O.hu("bilinear"===a||"nearest"===a,(function(){return"method must be bilinear or nearest, but was ".concat(a)}));var l={image:i,boxes:s,boxInd:u},f={method:a,extrapolationValue:o,cropSize:r},d=oe.BV.runKernel(ie.Vc,l,f);return d}});var ar=(0,S.op)({flipLeftRight_:function(e){var t=(0,b._1)(e,"image","flipLeftRight","float32");O.hu(4===t.rank,(function(){return"Error in flipLeftRight: image must be rank 4,"+"but got rank ".concat(t.rank,".")}));var n={image:t};return oe.BV.runKernel(ie.Uy,n,{})}});var or=(0,S.op)({grayscaleToRGB_:function(e){var t=(0,b._1)(e,"image","grayscaleToRGB"),n=t.rank-1,r=t.shape[n];O.hu(t.rank>=2,(function(){return"Error in grayscaleToRGB: images must be at least rank 2, "+"but got rank ".concat(t.rank,".")})),O.hu(1===r,(function(){return"Error in grayscaleToRGB: last dimension of a grayscale image "+"should be size 1, but got size ".concat(r,".")}));var a=new Array(t.rank);return a.fill(1,0,n),a[n]=3,(0,xe.G)(t,a)}});var ir=(0,S.op)({rotateWithOffset_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,a=(0,b._1)(e,"image","rotateWithOffset","float32");O.hu(4===a.rank,(function(){return"Error in rotateWithOffset: image must be rank 4,"+"but got rank ".concat(a.rank,".")}));var o={image:a},i={radians:t,fillValue:n,center:r},s=oe.BV.runKernel(ie.b9,o,i);return s}});function sr(e,t,n,r,a,o){null==r&&(r=.5),null==a&&(a=Number.NEGATIVE_INFINITY),null==o&&(o=0);var i=e.shape[0];return n=Math.min(n,i),O.hu(0<=r&&r<=1,(function(){return"iouThreshold must be in [0, 1], but was '".concat(r,"'")})),O.hu(2===e.rank,(function(){return"boxes must be a 2D tensor, but was of rank '".concat(e.rank,"'")})),O.hu(4===e.shape[1],(function(){return"boxes must have 4 columns, but 2nd dimension was ".concat(e.shape[1])})),O.hu(1===t.rank,(function(){return"scores must be a 1D tensor"})),O.hu(t.shape[0]===i,(function(){return"scores has incompatible shape with boxes. Expected ".concat(i,", ")+"but was ".concat(t.shape[0])})),O.hu(0<=o&&o<=1,(function(){return"softNmsSigma must be in [0, 1], but was '".concat(o,"'")})),{maxOutputSize:n,iouThreshold:r,scoreThreshold:a,softNmsSigma:o}}var ur=(0,S.op)({nonMaxSuppression_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Number.NEGATIVE_INFINITY,o=(0,b._1)(e,"boxes","nonMaxSuppression","float32"),i=(0,b._1)(t,"scores","nonMaxSuppression","float32"),s=sr(o,i,n,r,a),u={maxOutputSize:n=s.maxOutputSize,iouThreshold:r=s.iouThreshold,scoreThreshold:a=s.scoreThreshold};return oe.BV.runKernel(ie.uv,{boxes:o,scores:i},u)}}),cr=n(745);function lr(){return lr=(0,Pn.Z)(Fn().mark((function e(t,n,r){var a,o,i,s,u,c,l,f,d,p,h=arguments;return Fn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=h.length>3&&void 0!==h[3]?h[3]:.5,o=h.length>4&&void 0!==h[4]?h[4]:Number.NEGATIVE_INFINITY,i=(0,b._1)(t,"boxes","nonMaxSuppressionAsync"),s=(0,b._1)(n,"scores","nonMaxSuppressionAsync"),u=sr(i,s,r,a,o),r=u.maxOutputSize,a=u.iouThreshold,o=u.scoreThreshold,e.next=10,Promise.all([i.data(),s.data()]);case 10:return c=e.sent,l=c[0],f=c[1],d=(0,cr.GP)(l,f,r,a,o),p=d.selectedIndices,i!==t&&i.dispose(),s!==n&&s.dispose(),e.abrupt("return",(0,yn.R)(p,"int32"));case 17:case"end":return e.stop()}}),e)}))),lr.apply(this,arguments)}var fr=function(e,t,n){return lr.apply(this,arguments)};var dr=(0,S.op)({nonMaxSuppressionWithScore_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Number.NEGATIVE_INFINITY,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,i=(0,b._1)(e,"boxes","nonMaxSuppression"),s=(0,b._1)(t,"scores","nonMaxSuppression"),u=sr(i,s,n,r,a,o),c={boxes:i,scores:s},l={maxOutputSize:n=u.maxOutputSize,iouThreshold:r=u.iouThreshold,scoreThreshold:a=u.scoreThreshold,softNmsSigma:o=u.softNmsSigma},f=oe.BV.runKernel(ie.W0,c,l);return{selectedIndices:f[0],selectedScores:f[1]}}});function pr(){return pr=(0,Pn.Z)(Fn().mark((function e(t,n,r){var a,o,i,s,u,c,l,f,d,p,h,m,v=arguments;return Fn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=v.length>3&&void 0!==v[3]?v[3]:.5,o=v.length>4&&void 0!==v[4]?v[4]:Number.NEGATIVE_INFINITY,i=v.length>5&&void 0!==v[5]?v[5]:0,s=(0,b._1)(t,"boxes","nonMaxSuppressionAsync"),u=(0,b._1)(n,"scores","nonMaxSuppressionAsync"),c=sr(s,u,r,a,o,i),r=c.maxOutputSize,a=c.iouThreshold,o=c.scoreThreshold,i=c.softNmsSigma,e.next=12,Promise.all([s.data(),u.data()]);case 12:return l=e.sent,f=l[0],d=l[1],p=(0,cr.pA)(f,d,r,a,o,i),h=p.selectedIndices,m=p.selectedScores,s!==t&&s.dispose(),u!==n&&u.dispose(),e.abrupt("return",{selectedIndices:(0,yn.R)(h,"int32"),selectedScores:(0,yn.R)(m)});case 19:case"end":return e.stop()}}),e)}))),pr.apply(this,arguments)}var hr=function(e,t,n){return pr.apply(this,arguments)};var mr=(0,S.op)({nonMaxSuppressionPadded_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Number.NEGATIVE_INFINITY,o=arguments.length>5&&void 0!==arguments[5]&&arguments[5],i=(0,b._1)(e,"boxes","nonMaxSuppression"),s=(0,b._1)(t,"scores","nonMaxSuppression"),u=sr(i,s,n,r,a,null),c=u.maxOutputSize,l=u.iouThreshold,f=u.scoreThreshold,d={boxes:i,scores:s},p={maxOutputSize:c,iouThreshold:l,scoreThreshold:f,padToMaxOutputSize:o},h=oe.BV.runKernel(ie.cy,d,p);return{selectedIndices:h[0],validOutputs:h[1]}}}),vr=n(9439);function gr(){return gr=(0,Pn.Z)(Fn().mark((function e(t,n,r){var a,o,i,s,u,c,l,f,d,p,h,m,v,g,y,x,w=arguments;return Fn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=w.length>3&&void 0!==w[3]?w[3]:.5,o=w.length>4&&void 0!==w[4]?w[4]:Number.NEGATIVE_INFINITY,i=w.length>5&&void 0!==w[5]&&w[5],s=(0,b._1)(t,"boxes","nonMaxSuppressionAsync"),u=(0,b._1)(n,"scores","nonMaxSuppressionAsync"),c=sr(s,u,r,a,o,null),l=c.maxOutputSize,f=c.iouThreshold,d=c.scoreThreshold,e.next=11,Promise.all([s.data(),u.data()]);case 11:return p=e.sent,h=(0,vr.Z)(p,2),m=h[0],v=h[1],g=(0,cr.qP)(m,v,l,f,d,i),y=g.selectedIndices,x=g.validOutputs,s!==t&&s.dispose(),u!==n&&u.dispose(),e.abrupt("return",{selectedIndices:(0,yn.R)(y,"int32"),validOutputs:(0,Ut.i)(x,"int32")});case 19:case"end":return e.stop()}}),e)}))),gr.apply(this,arguments)}var yr=function(e,t,n){return gr.apply(this,arguments)},br=n(464),xr=n(8600);function wr(e,t){for(var n,r,a,o,s,u,c=(0,yn.R)([-1]),l=(0,yn.R)([0]),f=(0,yn.R)([0]),d=0;d<e.size-1;d++){n=(0,N.t)(e,0,d+1),r=(0,N.t)(e,d+1),s=(0,ce.h)((0,mn.S)(n),t),u=(0,ce.h)((0,mn.S)(r),t);var p=(0,mn.S)((0,k.d)(n,(0,At.w)(0,n.size)));a=(0,ce.h)(p,(0,mn.S)(n));var h=(0,ke.h)(r.shape,n.size),m=(0,i.I)((0,At.w)(0,r.size),h),v=(0,k.d)(r,m);o=(0,ce.h)((0,mn.S)(v),(0,mn.S)(r));var g=(0,st.l)(a,o),y=(0,st.l)(a,o),b=(0,k.d)(s,u);f=(0,k.d)((0,k.d)(b,g),y);var x=(0,Ee.p)(f,l);l=(0,An.a)(x,f,l),c=(0,An.a)(x,(0,yn.R)([d]),c)}return c}var kr=(0,S.op)({threshold_:function(e){var t,n,r,a,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"binary",s=arguments.length>2&&void 0!==arguments[2]&&arguments[2],u=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,c=(0,b._1)(e,"image","threshold"),l=.2989,f=.587,d=.114,p=c.shape[0]*c.shape[1],h=(0,k.d)((0,yn.R)([u]),255);if(O.hu(3===c.rank,(function(){return"Error in threshold: image must be rank 3,"+"but got rank ".concat(c.rank,".")})),O.hu(3===c.shape[2]||1===c.shape[2],(function(){return"Error in threshold: image color channel must be equal to 3 or 1"+"but got ".concat(c.shape[2],".")})),O.hu("int32"===c.dtype||"float32"===c.dtype,(function(){return"Error in dtype: image dtype must be int32 or float32,"+"but got dtype ".concat(c.dtype,".")})),O.hu("otsu"===o||"binary"===o,(function(){return"Method must be binary or otsu, but was ".concat(o)})),3===c.shape[2]){var m=(0,un.V)(c,[1,1,1],-1),v=(0,vr.Z)(m,3);t=v[0],n=v[1],r=v[2];var g=(0,k.d)(t,l),y=(0,k.d)(n,f),x=(0,k.d)(r,d);a=(0,i.I)((0,i.I)(g,y),x)}else a=e;if("otsu"===o){var w=(0,R.y)((0,L.p)((0,Zt.N)(a),"int32"),(0,gn.X)([]),256);h=wr(w,p)}var S=s?(0,Re.z)(a,h):(0,Ee.p)(a,h),_=(0,L.p)((0,k.d)(S,255),"int32");return _}});var Sr=(0,S.op)({transform_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"nearest",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"constant",a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=arguments.length>5?arguments[5]:void 0,i=(0,b._1)(e,"image","transform","float32"),s=(0,b._1)(t,"transforms","transform","float32");O.hu(4===i.rank,(function(){return"Error in transform: image must be rank 4,"+"but got rank ".concat(i.rank,".")})),O.hu(2===s.rank&&(s.shape[0]===i.shape[0]||1===s.shape[0])&&8===s.shape[1],(function(){return"Error in transform: Input transform should be batch x 8 or 1 x 8"})),O.hu(null==o||2===o.length,(function(){return"Error in transform: outputShape must be [height, width] or null, "+"but got ".concat(o,".")}));var u={image:i,transforms:s},c={interpolation:n,fillMode:r,fillValue:a,outputShape:o};return oe.BV.runKernel(ie.wx,u,c)}});var _r=(0,S.op)({bandPart_:function(e,t,n){(0,O.hu)(t%1===0,(function(){return"bandPart(): numLower must be an integer, got ".concat(t,".")})),(0,O.hu)(n%1===0,(function(){return"bandPart(): numUpper must be an integer, got ".concat(n,".")}));var r=(0,b._1)(e,"a","bandPart");(0,O.hu)(r.rank>=2,(function(){return"bandPart(): Rank must be at least 2, got ".concat(r.rank,".")}));var a=r.shape,o=r.shape.slice(-2),i=(0,vr.Z)(o,2),s=i[0],u=i[1];if(!(t<=s))throw new Error("bandPart(): numLower (".concat(t,")")+" must not be greater than the number of rows (".concat(s,")."));if(!(n<=u))throw new Error("bandPart(): numUpper (".concat(n,")")+" must not be greater than the number of columns (".concat(u,")."));t<0&&(t=s),n<0&&(n=u);var c=(0,be.X)((0,At.w)(0,s,1,"int32"),[-1,1]),l=(0,At.w)(0,u,1,"int32"),f=(0,st.l)(c,l),d=(0,Ve.H)((0,Re.z)(f,(0,Ut.i)(+t,"int32")),(0,Ce.b)(f,(0,Ut.i)(-n,"int32"))),p=(0,Mn.l)([s,u],r.dtype);return(0,be.X)((0,dn.k)((0,In.H)((0,be.X)(r,[-1,s,u])).map((function(e){return(0,An.a)(d,e,p)}))),a)}});var Nr=(0,S.op)({gramSchmidt_:function(e){var t;Array.isArray(e)?function(){t=!1,(0,O.hu)(null!=e&&e.length>0,(function(){return"Gram-Schmidt process: input must not be null, undefined, or empty"}));for(var n=e[0].shape[0],r=function(t){(0,O.hu)(e[t].shape[0]===n,(function(){return"Gram-Schmidt: Non-unique lengths found in the input vectors: "+"(".concat(e[t].shape[0]," vs. ").concat(n,")")}))},a=1;a<e.length;++a)r(a)}():(t=!0,e=(0,un.V)(e,e.shape[0],0).map((function(e){return(0,fn.L)(e,[0])}))),(0,O.hu)(e.length<=e[0].shape[0],(function(){return"Gram-Schmidt: Number of vectors (".concat(e.length,") exceeds ")+"number of dimensions (".concat(e[0].shape[0],").")}));for(var n=[],r=e,a=function(e){n.push(oe.BV.tidy((function(){var t=r[e];if(e>0)for(var a=0;a<e;++a){var o=(0,k.d)((0,mn.S)((0,k.d)(n[a],t)),n[a]);t=(0,st.l)(t,o)}return(0,ce.h)(t,(0,Zn.K)(t,"euclidean"))})))},o=0;o<e.length;++o)a(o);return t?(0,dn.k)(n,0):n}}),Er=n(5875);function Cr(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return oe.BV.tidy((function(){(0,O.hu)(2===e.shape.length,(function(){return"qr2d() requires a 2D Tensor, but got a ".concat(e.shape.length,"D Tensor.")}));for(var n=e.shape[0],r=e.shape[1],a=we(n),o=(0,Z.d)(e),i=xn([[1]],[1,1]),s=(0,Z.d)(i),u=n>=r?r:n,c=function(e){var t=o,u=s,c=a,l=oe.BV.tidy((function(){var t=(0,N.t)(o,[e,e],[n-e,1]),u=(0,Zn.K)(t),c=(0,N.t)(o,[e,e],[1,1]),l=(0,An.a)((0,Ee.p)(c,0),xn([[-1]]),xn([[1]])),f=(0,st.l)(c,(0,k.d)(l,u)),d=(0,ce.h)(t,f);s=1===d.shape[0]?(0,Z.d)(i):(0,x.z)([i,(0,N.t)(d,[1,0],[d.shape[0]-1,d.shape[1]])],0);var p=(0,ft.W)((0,ce.h)((0,w.O)(l,f),u)),h=(0,N.t)(o,[e,0],[n-e,r]),m=(0,k.d)(p,s),v=(0,zn.p)(s);if(0===e)o=(0,st.l)(h,(0,w.O)(m,(0,w.O)(v,h)));else{var g=(0,st.l)(h,(0,w.O)(m,(0,w.O)(v,h)));o=(0,x.z)([(0,N.t)(o,[0,0],[e,r]),g],0)}var y=(0,zn.p)(m),b=(0,N.t)(a,[0,e],[n,a.shape[1]-e]);if(0===e)a=(0,st.l)(b,(0,w.O)((0,w.O)(b,s),y));else{var S=(0,st.l)(b,(0,w.O)((0,w.O)(b,s),y));a=(0,x.z)([(0,N.t)(a,[0,0],[n,e]),S],1)}return[s,o,a]})),f=(0,vr.Z)(l,3);s=f[0],o=f[1],a=f[2],(0,Er.B9)([t,u,c])},l=0;l<u;++l)c(l);return!t&&n>r&&(a=(0,N.t)(a,[0,0],[n,r]),o=(0,N.t)(o,[0,0],[r,r])),[a,o]}))}var Tr=(0,S.op)({qr_:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if((0,O.hu)(e.rank>=2,(function(){return"qr() requires input tensor to have a rank >= 2, but got rank ".concat(e.rank)})),2===e.rank)return Cr(e,t);var n=e.shape.slice(0,e.shape.length-2).reduce((function(e,t){return e*t})),r=(0,In.H)((0,be.X)(e,[n,e.shape[e.shape.length-2],e.shape[e.shape.length-1]]),0),a=[],o=[];r.forEach((function(e){var n=Cr(e,t),r=(0,vr.Z)(n,2),i=r[0],s=r[1];a.push(i),o.push(s)}));var i=(0,be.X)((0,dn.k)(a,0),e.shape),s=(0,be.X)((0,dn.k)(o,0),e.shape);return[i,s]}}),Ir=n(7627);var Or=(0,S.op)({computeWeightedLoss_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Ir.I.SUM_BY_NONZERO_WEIGHTS,r=(0,b._1)(e,"losses","computeWeightedLoss"),a=null;null!=t&&(a=(0,b._1)(t,"weights","computeWeightedLoss"));var o=null==a?r:(0,k.d)(r,a);if(n===Ir.I.NONE)return o;if(n===Ir.I.SUM)return(0,mn.S)(o);if(n===Ir.I.MEAN){if(null==a)return(0,$e.J)(o);var i=r.size/a.size,s=(0,ce.h)((0,mn.S)(o),(0,mn.S)(a));return i>1?(0,ce.h)(s,(0,Ut.i)(i)):s}if(n===Ir.I.SUM_BY_NONZERO_WEIGHTS){if(null==a)return(0,ce.h)((0,mn.S)(o),(0,Ut.i)(r.size));var u=(0,k.d)(a,(0,Je.i)(r.shape)),c=(0,L.p)((0,mn.S)((0,dt.Q)(u,(0,Ut.i)(0))),"float32");return(0,ce.h)((0,mn.S)(o),c)}throw Error("Unknown reduction: ".concat(n))}});var Ar=(0,S.op)({absoluteDifference_:function(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Ir.I.SUM_BY_NONZERO_WEIGHTS,o=(0,b._1)(e,"labels","absoluteDifference"),i=(0,b._1)(t,"predictions","absoluteDifference"),s=null;null!=n&&(s=(0,b._1)(n,"weights","absoluteDifference")),(0,O.k5)(o.shape,i.shape,"Error in absoluteDifference: ");var u=(0,r.W)((0,st.l)(o,i));return Or(u,s,a)}});var Dr=(0,S.op)({cosineDistance_:function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Ir.I.SUM_BY_NONZERO_WEIGHTS,o=(0,b._1)(e,"labels","cosineDistance"),i=(0,b._1)(t,"predictions","cosineDistance"),s=null;null!=r&&(s=(0,b._1)(r,"weights","cosineDistance")),(0,O.k5)(o.shape,i.shape,"Error in cosineDistance: ");var u=(0,Ut.i)(1),c=(0,st.l)(u,(0,mn.S)((0,k.d)(o,i),n,!0));return Or(c,s,a)}});var Mr=(0,S.op)({hingeLoss_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Ir.I.SUM_BY_NONZERO_WEIGHTS,a=(0,b._1)(e,"labels","hingeLoss"),o=(0,b._1)(t,"predictions","hingeLoss"),i=null;null!=n&&(i=(0,b._1)(n,"weights","hingeLoss")),(0,O.k5)(a.shape,o.shape,"Error in hingeLoss: ");var s=(0,Ut.i)(1);a=(0,st.l)((0,k.d)((0,Ut.i)(2),a),s);var u=(0,Rt.U)((0,st.l)(s,(0,k.d)(a,o)));return Or(u,i,r)}});var Rr=(0,S.op)({huberLoss_:function(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Ir.I.SUM_BY_NONZERO_WEIGHTS,s=(0,b._1)(e,"labels","huberLoss"),u=(0,b._1)(t,"predictions","huberLoss"),c=null;null!=n&&(c=(0,b._1)(n,"weights","huberLoss")),(0,O.k5)(s.shape,u.shape,"Error in huberLoss: ");var l=(0,Ut.i)(a),f=(0,r.W)((0,st.l)(u,s)),d=(0,nt.L)(f,l),p=(0,st.l)(f,d),h=(0,i.I)((0,k.d)((0,Ut.i)(.5),(0,it.h)(d)),(0,k.d)(l,p));return Or(h,c,o)}});var Pr=(0,S.op)({logLoss_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1e-7,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Ir.I.SUM_BY_NONZERO_WEIGHTS,o=(0,b._1)(e,"labels","logLoss"),s=(0,b._1)(t,"predictions","logLoss"),u=null;null!=n&&(u=(0,b._1)(n,"weights","logLoss")),(0,O.k5)(o.shape,s.shape,"Error in logLoss: ");var c=(0,Ut.i)(1),l=(0,Ut.i)(r),f=(0,ft.W)((0,k.d)(o,(0,Fe.c)((0,i.I)(s,l)))),d=(0,k.d)((0,st.l)(c,o),(0,Fe.c)((0,i.I)((0,st.l)(c,s),l))),p=(0,st.l)(f,d);return Or(p,u,a)}});var jr=(0,S.op)({meanSquaredError_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Ir.I.SUM_BY_NONZERO_WEIGHTS,a=(0,b._1)(e,"labels","meanSquaredError"),o=(0,b._1)(t,"predictions","meanSquaredError"),i=null;null!=n&&(i=(0,b._1)(n,"weights","meanSquaredError")),(0,O.k5)(a.shape,o.shape,"Error in meanSquaredError: ");var s=(0,ln.$)(a,o);return Or(s,i,r)}});function Fr(e,t){var n=(0,b._1)(e,"labels","sigmoidCrossEntropyWithLogits"),a=(0,b._1)(t,"logits","sigmoidCrossEntropyWithLogits");(0,O.k5)(n.shape,a.shape,"Error in sigmoidCrossEntropyWithLogits: ");var o=(0,Rt.U)(a),s=(0,k.d)(a,n),u=(0,Le.K)((0,ve.Q)((0,ft.W)((0,r.W)(a))));return(0,i.I)((0,st.l)(o,s),u)}var Lr=(0,S.op)({sigmoidCrossEntropy_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Ir.I.SUM_BY_NONZERO_WEIGHTS,o=(0,b._1)(e,"multiClassLabels","sigmoidCrossEntropy"),s=(0,b._1)(t,"logits","sigmoidCrossEntropy"),u=null;if(null!=n&&(u=(0,b._1)(n,"weights","sigmoidCrossEntropy")),(0,O.k5)(o.shape,s.shape,"Error in sigmoidCrossEntropy: "),r>0){var c=(0,Ut.i)(r),l=(0,Ut.i)(1),f=(0,Ut.i)(.5);o=(0,i.I)((0,k.d)(o,(0,st.l)(l,c)),(0,k.d)(f,c))}var d=Fr(o,s);return Or(d,u,a)}}),Br=n(6450);function zr(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1;if(-1===n&&(n=t.rank-1),n!==t.rank-1)throw Error("Softmax cross entropy along a non-last dimension is not yet "+"supported. Labels / logits was rank ".concat(t.rank," ")+"and dim was ".concat(n));var r=(0,Br.cb)((function(e,t,r){var a=(0,Ze.l)(t,[n],!0),o=(0,st.l)((0,L.p)(t,"float32"),a);r([e,o]);var i=(0,ft.W)((0,k.d)(o,e));return{value:(0,mn.S)(i,[n]),gradFunc:function(e,t){var r=(0,vr.Z)(t,2),a=r[0],o=r[1],i=(0,ot.rv)(e.shape,[n]);return[(0,k.d)((0,be.X)(e,i),(0,st.l)((0,L.p)(a,"float32"),(0,ve.Q)(o))),(0,k.d)((0,be.X)(e,i),(0,st.l)((0,ve.Q)(o),(0,L.p)(a,"float32")))]}}}));return r(e,t)}var Zr=(0,S.op)({softmaxCrossEntropy_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Ir.I.SUM_BY_NONZERO_WEIGHTS,o=(0,b._1)(e,"onehotLabels","softmaxCrossEntropy"),s=(0,b._1)(t,"logits","softmaxCrossEntropy"),u=null;if(null!=n&&(u=(0,b._1)(n,"weights","softmaxCrossEntropy")),(0,O.k5)(o.shape,s.shape,"Error in softmaxCrossEntropy: "),r>0){var c=(0,Ut.i)(r),l=(0,Ut.i)(1),f=(0,Ut.i)(o.shape[1]);o=(0,i.I)((0,k.d)(o,(0,st.l)(l,c)),(0,ce.h)(c,f))}var d=zr(o,s);return Or(d,u,a)}});var Vr=(0,S.op)({sparseFillEmptyRows_:function(e,t,n,r){var a=(0,b._1)(e,"indices","sparseFillEmptyRows","int32"),o=(0,b._1)(t,"values","sparseFillEmptyRows"),i=(0,b._1)(n,"denseShape","sparseFillEmptyRows","int32"),s=(0,b._1)(r,"defaultValue","sparseFillEmptyRows",o.dtype);if(2!==a.rank)throw new Error("Indices should be Tensor2D but received shape\n        ".concat(a.shape));if(1!==o.rank)throw new Error("Values should be Tensor1D but received shape ".concat(o.shape));if(1!==i.rank)throw new Error("Dense shape should be Tensor1D but received shape ".concat(i.shape));if(0!==s.rank)throw new Error("Default value should be a scalar but received shape ".concat(s.shape));var u={indices:a,values:o,denseShape:i,defaultValue:s},c=oe.BV.runKernel(ie.O3,u);return{outputIndices:c[0],outputValues:c[1],emptyRowIndicator:c[2],reverseIndexMap:c[3]}}});var Ur=(0,S.op)({sparseReshape_:function(e,t,n){var r=(0,b._1)(e,"inputIndices","sparseReshape","int32"),a=(0,b._1)(t,"inputShape","sparseReshape","int32"),o=(0,b._1)(n,"newShape","sparseReshape","int32");if(2!==r.rank)throw new Error("Input indices should be Tensor2D but received shape\n        ".concat(r.shape));if(1!==a.rank)throw new Error("Input shape should be Tensor1D but received shape ".concat(a.shape));if(1!==o.rank)throw new Error("New shape should be Tensor1D but received shape ".concat(o.shape));var i={inputIndices:r,inputShape:a,newShape:o},s=oe.BV.runKernel(ie.nh,i);return{outputIndices:s[0],outputShape:s[1]}}});var qr=(0,S.op)({sparseSegmentMean_:function(e,t,n){var r=(0,b._1)(e,"data","sparseSegmentMean"),a=(0,b._1)(t,"indices","sparseSegmentMean","int32"),o=(0,b._1)(n,"segmentIds","sparseSegmentMean","int32");if(r.rank<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==a.rank)throw new Error("Indices should be Tensor1D but received shape\n          ".concat(a.shape));if(1!==o.rank)throw new Error("Segment ids should be Tensor1D but received shape\n          ".concat(o.shape));var i={data:r,indices:a,segmentIds:o};return oe.BV.runKernel(ie.YW,i)}});var Wr=(0,S.op)({sparseSegmentSum_:function(e,t,n){var r=(0,b._1)(e,"data","sparseSegmentSum"),a=(0,b._1)(t,"indices","sparseSegmentSum","int32"),o=(0,b._1)(n,"segmentIds","sparseSegmentSum","int32");if(r.rank<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==a.rank)throw new Error("Indices should be Tensor1D but received shape\n         ".concat(a.shape));if(1!==o.rank)throw new Error("Segment ids should be Tensor1D but received shape\n         ".concat(o.shape));var i={data:r,indices:a,segmentIds:o};return oe.BV.runKernel(ie.Zj,i)}});var Hr=(0,S.op)({stringNGrams_:function(e,t,n,r,a,o,i,s){var u=(0,b._1)(e,"data","stringNGrams","string");if("string"!==u.dtype)throw new Error("Data must be of datatype string");if(1!==u.shape.length)throw new Error("Data must be a vector, saw: ".concat(u.shape));var c=(0,b._1)(t,"dataSplits","stringNGrams");if("int32"!==c.dtype)throw new Error("Data splits must be of datatype int32");var l={separator:n,nGramWidths:r,leftPad:a,rightPad:o,padWidth:i,preserveShortSequences:s},f={data:u,dataSplits:c},d=oe.BV.runKernel(ie._J,f,l);return{nGrams:d[0],nGramsSplits:d[1]}}});var Gr=(0,S.op)({stringSplit_:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=(0,b._1)(e,"input","stringSplit","string"),a=(0,b._1)(t,"delimiter","stringSplit","string");if(1!==r.rank)throw new Error("Input should be Tensor1D but received shape ".concat(r.shape));if(0!==a.rank)throw new Error("Delimiter should be a scalar but received shape ".concat(a.shape));var o={skipEmpty:n},i={input:r,delimiter:a},s=oe.BV.runKernel(ie.s1,i,o);return{indices:s[0],values:s[1],shape:s[2]}}});var Kr=(0,S.op)({stringToHashBucketFast_:function(e,t){var n=(0,b._1)(e,"input","stringToHashBucketFast","string"),r={numBuckets:t};if(t<=0)throw new Error("Number of buckets must be at least 1");var a={input:n};return oe.BV.runKernel(ie.Xk,a,r)}}),Xr={fft:rn.k,ifft:an.S,rfft:sn.Q,irfft:on.w},Yr={hammingWindow:Qn,hannWindow:er,frame:tr,stft:nr},$r={flipLeftRight:ar,grayscaleToRGB:or,resizeNearestNeighbor:xr.j,resizeBilinear:br.I,rotateWithOffset:ir,cropAndResize:rr,nonMaxSuppression:ur,nonMaxSuppressionAsync:fr,nonMaxSuppressionWithScore:dr,nonMaxSuppressionWithScoreAsync:hr,nonMaxSuppressionPadded:mr,nonMaxSuppressionPaddedAsync:yr,threshold:kr,transform:Sr},Jr={bandPart:_r,gramSchmidt:Nr,qr:Tr},Qr={absoluteDifference:Ar,computeWeightedLoss:Or,cosineDistance:Dr,hingeLoss:Mr,huberLoss:Rr,logLoss:Pr,meanSquaredError:jr,sigmoidCrossEntropy:Lr,softmaxCrossEntropy:Zr},ea={sparseFillEmptyRows:Vr,sparseReshape:Ur,sparseSegmentMean:qr,sparseSegmentSum:Wr},ta={stringNGrams:Hr,stringSplit:Gr,stringToHashBucketFast:Kr}},1970:function(e,t,n){"use strict";n.d(t,{v:function(){return i}});var r=n(318),a=n(2145),o=n(8354);var i=(0,n(8640).op)({pad_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=(0,o._1)(e,"x","pad");if(0===i.rank)throw new Error("pad(scalar) is not defined. Pass non-scalar to pad");var s={paddings:t,constantValue:n},u={x:i};return r.BV.runKernel(a.ly,u,s)}})},7226:function(e,t,n){"use strict";n.d(t,{d:function(){return p}});var r=n(9439),a=n(8354),o=n(6147),i=n(6573),s=n(6994),u=n(6190),c=n(5777),l=n(8640),f=n(5561),d=n(5696);var p=(0,l.op)({pool_:function(e,t,n,l,p,h,m){null==p&&(p=[1,1]),null==h&&(h=1),0===l&&(l="valid");var v=(0,a._1)(e,"x","maxPool"),g=v,y=!1;3===v.rank&&(y=!0,g=(0,f.X)(v,[1,v.shape[0],v.shape[1],v.shape[2]])),o.hu(u.jT(h,p),(function(){return"Error in pool: Either strides or dilations must be 1. "+"Got strides ".concat(h," and dilations '").concat(p,"'")}));var b,x=u.Xw(g.shape,t,h,p,l),w=[x.dilationHeight,x.dilationWidth];b="same"===l?function(e,t){var n=e.map((function(e,n){return e+(e-1)*(t[n]-1)})).map((function(e){return e-1})),r=n.map((function(e){return Math.floor(e/2)})),a=n.map((function(e,t){return e-r[t]}));return n.map((function(e,t){return[r[t],a[t]]}))}([x.filterHeight,x.filterWidth],w):[[0,0],[0,0]];var k=1===w[0]&&1===w[1],S=function(e,t,n){var r=n.map((function(e){return e[0]})),a=n.map((function(e){return e[1]})),o=e.concat(r,a),i=t.map((function(e,t){return(e-o[t]%e)%e})),s=a.map((function(e,t){return e+i[t]})),u=t.map((function(e,t){return[r[t],s[t]]})),c=t.map((function(e,t){return[0,i[t]]}));return[u,c]}([x.inHeight,x.inWidth],w,b),_=(0,r.Z)(S,2),N=_[0],E=_[1],C=k?l:"valid",T=k?g:(0,d.f)(g,w,N),I=("avg"===n?function(){return(0,i.w)(T,t,h,C,m)}:function(){return(0,c._)(T,t,h,C,m)})(),O=k?I:(0,s.E)(I,w,E);return y?(0,f.X)(O,[O.shape[1],O.shape[2],O.shape[3]]):O}})},4334:function(e,t,n){"use strict";n.d(t,{s:function(){return u}});var r=n(9439),a=n(318),o=n(2145),i=n(9064),s=n(8354);var u=(0,n(8640).op)({pow_:function(e,t){var n=(0,s._1)(e,"base","pow"),u=(0,s._1)(t,"exp","pow"),c=(0,i.makeTypesMatch)(n,u),l=(0,r.Z)(c,2),f={a:n=l[0],b:u=l[1]};return a.BV.runKernel(o.pe,f)}})},6859:function(e,t,n){"use strict";n.d(t,{A:function(){return i}});var r=n(318),a=n(2145),o=n(8354);var i=(0,n(8640).op)({prelu_:function(e,t){var n={x:(0,o._1)(e,"x","prelu"),alpha:(0,o._1)(t,"alpha","prelu")};return r.BV.runKernel(a.o0,n)}})},4600:function(e,t,n){"use strict";function r(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];console.log(e.toString(t))}n.d(t,{S:function(){return r}})},7722:function(e,t,n){"use strict";n.d(t,{W:function(){return s}});var r=n(318),a=n(2145),o=n(8354),i=n(9118);var s=(0,n(8640).op)({prod_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],s=(0,o._1)(e,"x","prod");"bool"===s.dtype&&(s=(0,i.p)(s,"int32"));var u={x:s},c={axis:t,keepDims:n};return r.BV.runKernel(a.Dl,u,c)}})},4466:function(e,t,n){"use strict";n.d(t,{Yi:function(){return i},T9:function(){return s},wv:function(){return u}});var r=n(5671),a=n(3144),o=n(6699),i=function(){function e(t,n,a,i,s){(0,r.Z)(this,e),this.mean=t,this.stdDev=n,this.dtype=a,this.nextVal=NaN,this.truncated=i,this.truncated&&(this.upper=this.mean+2*this.stdDev,this.lower=this.mean-2*this.stdDev);var u=s||Math.random();this.random=o.alea(u.toString())}return(0,a.Z)(e,[{key:"nextValue",value:function(){if(!isNaN(this.nextVal)){var e=this.nextVal;return this.nextVal=NaN,e}for(var t,n,r=!1;!r;){var a=void 0,o=void 0,i=void 0;do{i=(a=2*this.random()-1)*a+(o=2*this.random()-1)*o}while(i>=1||0===i);var s=Math.sqrt(-2*Math.log(i)/i);t=this.mean+this.stdDev*a*s,n=this.mean+this.stdDev*o*s,this.truncated&&!this.isValidTruncated(t)||(r=!0)}return this.truncated&&!this.isValidTruncated(n)||(this.nextVal=this.convertValue(n)),this.convertValue(t)}},{key:"convertValue",value:function(e){return null==this.dtype||"float32"===this.dtype?e:Math.round(e)}},{key:"isValidTruncated",value:function(e){return e<=this.upper&&e>=this.lower}}]),e}(),s=function(){function e(t,n,a,s){(0,r.Z)(this,e),this.alpha=t,this.beta=1/n,this.dtype=a;var u=s||Math.random();this.randu=o.alea(u.toString()),this.randn=new i(0,1,a,!1,this.randu()),this.d=t<1?t+2/3:t-1/3,this.c=1/Math.sqrt(9*this.d)}return(0,a.Z)(e,[{key:"nextValue",value:function(){for(var e,t,n,r,a,o;;){do{r=this.randn.nextValue(),o=1+this.c*r}while(o<=0);if(o*=o*o,t=1-.331*(e=r*r)*e,n=.5*e+this.d*(1-o+Math.log(o)),(a=this.randu())<t||Math.log(a)<n)break}return o=1/this.beta*this.d*o,this.alpha<1&&(o*=Math.pow(this.randu(),1/this.alpha)),this.convertValue(o)}},{key:"convertValue",value:function(e){return"float32"===this.dtype?e:Math.round(e)}}]),e}(),u=function(){function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=arguments.length>2?arguments[2]:void 0,s=arguments.length>3?arguments[3]:void 0;if((0,r.Z)(this,e),this.canReturnFloat=function(){return null==t.dtype||"float32"===t.dtype},this.min=n,this.range=a-n,this.dtype=i,null==s&&(s=Math.random()),"number"===typeof s&&(s=s.toString()),!this.canReturnFloat()&&this.range<=1)throw new Error("The difference between ".concat(n," - ").concat(a," <= 1 and dtype is not float"));this.random=o.alea(s)}return(0,a.Z)(e,[{key:"convertValue",value:function(e){return this.canReturnFloat()?e:Math.round(e)}},{key:"nextValue",value:function(){return this.convertValue(this.min+this.range*this.random())}}]),e}()},6407:function(e,t,n){"use strict";n.d(t,{L:function(){return i}});var r=n(7039),a=n(8640),o=n(4466);var i=(0,a.op)({randomUniform_:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"float32",i=arguments.length>4?arguments[4]:void 0,s=(0,r.f)(e,a),u=new o.wv(t,n,null,i),c=0;c<s.values.length;c++)s.values[c]=u.nextValue();return s.toTensor()}})},422:function(e,t,n){"use strict";n.d(t,{w:function(){return o}});var r=n(318),a=n(2145);function o(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"float32";if(0===n)throw new Error("Cannot have a step of zero");var i={start:e,stop:t,step:n,dtype:o};return r.BV.runKernel(a.e6,{},i)}},6972:function(e,t,n){"use strict";n.d(t,{k:function(){return i}});var r=n(318),a=n(2145),o=n(8354);var i=(0,n(8640).op)({real_:function(e){var t={input:(0,o._1)(e,"input","real")};return r.BV.runKernel(a.xJ,t)}})},2209:function(e,t,n){"use strict";n.d(t,{M:function(){return i}});var r=n(318),a=n(2145),o=n(8354);var i=(0,n(8640).op)({reciprocal_:function(e){var t={x:(0,o._1)(e,"x","reciprocal")};return r.BV.runKernel(a.$H,t)}})},7539:function(e,t,n){"use strict";n.d(t,{U:function(){return i}});var r=n(318),a=n(2145),o=n(8354);var i=(0,n(8640).op)({relu_:function(e){var t={x:(0,o._1)(e,"x","relu")};return r.BV.runKernel(a.qk,t)}})},5900:function(e,t,n){"use strict";n.d(t,{b:function(){return i}});var r=n(318),a=n(2145),o=n(8354);var i=(0,n(8640).op)({relu6_:function(e){var t={x:(0,o._1)(e,"x","relu6")};return r.BV.runKernel(a.Sb,t)}})},5561:function(e,t,n){"use strict";n.d(t,{X:function(){return i}});var r=n(318),a=n(2145),o=n(8354);var i=(0,n(8640).op)({reshape_:function(e,t){var n={x:(0,o._1)(e,"x","reshape","string_or_numeric")},i={shape:t};return r.BV.runKernel(a.HZ,n,i)}})},4933:function(e,t,n){"use strict";n.d(t,{G:function(){return i}});var r=n(318),a=n(2145),o=n(8354);var i=(0,n(8640).op)({reverse_:function(e,t){var n={x:(0,o._1)(e,"x","reverse")},i={dims:t};return r.BV.runKernel(a.mK,n,i)}})},766:function(e,t,n){"use strict";n.d(t,{N:function(){return i}});var r=n(318),a=n(2145),o=n(8354);var i=(0,n(8640).op)({round_:function(e){var t={x:(0,o._1)(e,"x","round")};return r.BV.runKernel(a.e0,t)}})},5115:function(e,t,n){"use strict";n.d(t,{b:function(){return i}});var r=n(318),a=n(2145),o=n(8354);var i=(0,n(8640).op)({rsqrt_:function(e){var t={x:(0,o._1)(e,"x","rsqrt","float32")};return r.BV.runKernel(a.bV,t)}})},7067:function(e,t,n){"use strict";n.d(t,{i:function(){return o}});var r=n(6147),a=n(7960);function o(e,t){if(((0,r.fU)(e)&&"string"!==t||Array.isArray(e))&&"complex64"!==t)throw new Error("Error creating a new Scalar: value must be a primitive (number|boolean|string)");if("string"===t&&(0,r.fU)(e)&&!(e instanceof Uint8Array))throw new Error("When making a scalar from encoded string, the value must be `Uint8Array`.");return(0,a.H)(e,[],[],t)}},3522:function(e,t,n){"use strict";n.d(t,{s:function(){return u}});var r=n(318),a=n(2145),o=n(8354),i=n(8640),s=n(8604);var u=(0,i.op)({scatterND_:function(e,t,n){var i=(0,o._1)(e,"indices","scatterND","int32"),u=(0,o._1)(t,"updates","scatterND");s.validateInput(u,i,n);var c={indices:i,updates:u},l={shape:n};return r.BV.runKernel(a.xQ,c,l)}})},8604:function(e,t,n){"use strict";n.r(t),n.d(t,{validateUpdateShape:function(){return o},validateInput:function(){return i},calculateShapes:function(){return s}});var r=n(3433),a=n(6147);function o(e,t,n){var r=t.rank>1?t.shape[t.rank-1]:1,a=t.rank>1?t.rank-1:1,o="Must have updates.shape = indices.shape[:batchDim] + "+"shape[sliceDim:], got updates.shape: ".concat(n.shape)+", indices.shape: ".concat(t.shape,", shape: ").concat(e)+", sliceDim: ".concat(r,", and batchDim: ").concat(a,".");if(n.rank<a)throw new Error(o+" update.rank < ".concat(a,". "));if(e.length<r+(n.rank-a))throw new Error(o+" Output shape length < ".concat(r+(n.rank-a)));if(n.rank!==a+e.length-r)throw new Error(o+" update.rank != ".concat(a+e.length-r));for(var i=0;i<a;++i)if(n.shape[i]!==t.shape[i])throw new Error(o+" updates.shape[".concat(i,"] (").concat(n.shape[i],") != indices.shape[").concat(i,"] (").concat(t.shape[i],")."));for(var s=0;s<n.rank-a;++s)if(n.shape[s+a]!==e[s+r])throw new Error(o+" updates.shape[".concat(s+a,"] (").concat(n.shape[s+a],") != shape[").concat(s+a,"] (").concat(e[s+a],")"))}function i(e,t,n){if(t.rank<1)throw new Error("tf.scatterND() expects the indices to be rank 1 or higher,"+" but the rank was ".concat(t.rank,"."));if(e.rank<1)throw new Error("tf.scatterND() expects the updates to be rank 1 or higher,"+" but the rank was ".concat(e.rank,"."));if("int32"!==t.dtype)throw new Error("The dtype of 'indices' should be int32, but got dtype: ".concat(t.dtype));if(n.length<1)throw new Error("Output rank must be greater or equal to 1, but got shape: ".concat(n));if(0===n.length){if(0===t.size)throw new Error("Indices specified for empty output. indices shape: ".concat(t.shape));if(0===e.size)throw new Error("Updates specified for empty output. updates shape: ".concat(e.shape))}o(n,t,e)}function s(e,t,n){for(var o=t.shape.length,i=o>1?t.shape[o-1]:1,s=n.length,u=1,c=i;c<s;++c)u*=n[c];var l=i<1?1:i;return{sliceRank:i,numUpdates:(0,a.NA)(t.shape)/l,sliceSize:u,strides:[].concat((0,r.Z)((0,a.e3)(n.slice(0,i))),[1]),outputSize:(0,a.NA)(n)}}},413:function(e,t,n){"use strict";n.d(t,{U:function(){return i}});var r=n(318),a=n(2145),o=n(8354);var i=(0,n(8640).op)({selu_:function(e){var t={x:(0,o._1)(e,"x","selu")};return r.BV.runKernel(a.oF,t)}})},349:function(e,t,n){"use strict";n.d(t,{y:function(){return r},$:function(){return a}});var r=1.7580993408473768,a=1.0507009873554805},119:function(e,t,n){"use strict";n.d(t,{U:function(){return c}});var r=n(8354),a=n(6147),o=n(3457),i=n(1147),s=n(8640),u=n(5561);var c=(0,s.op)({separableConv2d_:function(e,t,n,s,c){var l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[1,1],f=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"NHWC",d=(0,r._1)(e,"x","separableConv2d"),p=(0,r._1)(t,"depthwiseFilter","separableConv2d"),h=(0,r._1)(n,"pointwiseFilter","separableConv2d"),m=d,v=!1;if(3===d.rank&&(v=!0,m=(0,u.X)(d,[1,d.shape[0],d.shape[1],d.shape[2]])),"NCHW"===f)throw new Error("separableConv2d currently does not support dataFormat NCHW; only NHWC is supported");a.hu(4===m.rank,(function(){return"Error in separableConv2d: input must be rank 4, but got "+"rank ".concat(m.rank,".")})),a.hu(4===p.rank,(function(){return"Error in separableConv2d: depthwise filter must be rank 4, but "+"got rank ".concat(p.rank,".")})),a.hu(4===h.rank,(function(){return"Error in separableConv2d: pointwise filter must be rank 4, but "+"got rank ".concat(p.rank,".")})),a.hu(1===h.shape[0],(function(){return"Error in separableConv2d: the first dimension of pointwise filter "+" must be 1, but got ".concat(h.shape[0],".")})),a.hu(1===h.shape[1],(function(){return"Error in separableConv2d: the second dimension of pointwise "+"filter must be 1, but got ".concat(h.shape[1],".")}));var g=p.shape[2],y=p.shape[3];a.hu(h.shape[2]===g*y,(function(){return"Error in separableConv2d: the third dimension of pointwise filter "+"must be ".concat(g*y,", ")+"but got ".concat(h.shape[2],".")}));var b=(0,i.B)(m,p,s,c,f,l),x=1,w=(0,o.T)(b,h,x,"valid",f);return v?(0,u.X)(w,[w.shape[1],w.shape[2],w.shape[3]]):w}})},4438:function(e,t,n){"use strict";n.d(t,{O:function(){return l}});var r=n(5861),a=n(7757),o=n.n(a),i=n(4376),s=n(8354),u=n(6147);function c(){return(c=(0,r.Z)(o().mark((function e(t,n){var r,a,c,l,f,d,p,h,m,v,g;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=(0,s._1)(t,"x","setdiff1d"),a=(0,s._1)(n,"y","setdiff1d"),u.hu(r.dtype===a.dtype,(function(){return"x and y should have the same dtype, but got x (".concat(r.dtype,") and y (").concat(a.dtype,").")})),u.hu(1===r.rank,(function(){return"x should be 1D tensor, but got x (".concat(r.shape,").")})),u.hu(1===a.rank,(function(){return"y should be 1D tensor, but got y (".concat(a.shape,").")})),e.next=7,r.data();case 7:return c=e.sent,e.next=10,a.data();case 10:for(l=e.sent,f=new Set(l),d=0,p=0;p<c.length;p++)f.has(c[p])||d++;for(h=new i.YD([d],r.dtype),m=new i.YD([d],"int32"),v=0,g=0;v<c.length;v++)f.has(c[v])||(h.values[g]=c[v],m.values[g]=v,g++);return e.abrupt("return",[h.toTensor(),m.toTensor()]);case 18:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var l=function(e,t){return c.apply(this,arguments)}},7643:function(e,t,n){"use strict";n.d(t,{X:function(){return i}});var r=n(318),a=n(2145),o=n(8354);var i=(0,n(8640).op)({sigmoid_:function(e){var t={x:(0,o._1)(e,"x","sigmoid","float32")};return r.BV.runKernel(a.a5,t)}})},2070:function(e,t,n){"use strict";n.d(t,{X:function(){return i}});var r=n(318),a=n(2145),o=n(8354);var i=(0,n(8640).op)({sign_:function(e){var t={x:(0,o._1)(e,"x","sign")};return r.BV.runKernel(a.i5,t)}})},7254:function(e,t,n){"use strict";n.d(t,{O:function(){return i}});var r=n(318),a=n(2145),o=n(8354);var i=(0,n(8640).op)({sin_:function(e){var t={x:(0,o._1)(e,"x","sin","float32")};return r.BV.runKernel(a.RQ,t)}})},7657:function(e,t,n){"use strict";n.d(t,{R:function(){return i}});var r=n(318),a=n(2145),o=n(8354);var i=(0,n(8640).op)({sinh_:function(e){var t={x:(0,o._1)(e,"x","sinh")};return r.BV.runKernel(a.w3,t)}})},9238:function(e,t,n){"use strict";n.d(t,{t:function(){return i}});var r=n(318),a=n(2145),o=n(8354);var i=(0,n(8640).op)({slice_:function(e,t,n){var i=(0,o._1)(e,"x","slice","string_or_numeric");if(0===i.rank)throw new Error("Slicing scalar is not possible");var s={x:i},u={begin:t,size:n};return r.BV.runKernel(a.p2,s,u)}})},2875:function(e,t,n){"use strict";n.r(t),n.d(t,{assertParamsValid:function(){return o},maskToAxes:function(){return i},computeOutShape:function(){return s},stridesWithElidedDims:function(){return u},getNormalizedAxes:function(){return f},startIndicesWithElidedDims:function(){return d},stopIndicesWithElidedDims:function(){return p},stridesForAxis:function(){return h},startForAxis:function(){return m},stopForAxis:function(){return v},isSliceContinous:function(){return g},computeFlatOffset:function(){return y},parseSliceParams:function(){return b},sliceInfo:function(){return x}});var r=n(3433),a=n(6147);function o(e,t,n){var r=e.shape.length;a.hu(r===t.length,(function(){return"Error in slice".concat(r,"D: Length of begin ").concat(t," must ")+"match the rank of the array (".concat(r,").")})),a.hu(r===n.length,(function(){return"Error in slice".concat(r,"D: Length of size ").concat(n," must ")+"match the rank of the array (".concat(r,").")}));for(var o=function(o){a.hu(t[o]+n[o]<=e.shape[o],(function(){return"Error in slice".concat(r,"D: begin[").concat(o,"] + size[").concat(o,"] ")+"(".concat(t[o]+n[o],") would overflow input.shape[").concat(o,"] (").concat(e.shape[o],")")}))},i=0;i<r;++i)o(i)}function i(e){for(var t=[],n=0;e>0;)1&e&&t.push(n),e/=2,n++;return t}function s(e,t,n){for(var r=[],a=0;a<e.length;a++)r[a]=Math.ceil((t[a]-e[a])/n[a]);return r}function u(e,t,n,a){for(var o=(0,r.Z)(e),i=o.length;i<a.length;i++)o.push(1);for(var s=0;s<n;s++)0===s?o[t]=1:(o.splice(t,0,1),o.pop());return o}function c(e,t,n){return n<=e?n:n-(t-1)}function l(e,t){for(var n=[],r=0;r<e;r++)n.push(t+r);return n}function f(e,t,n,r,a,o,i,s,c){var l=e.length,f=new Array(l),g=new Array(l),y=new Array(l);if(t.length&&n>0){var b=t[0],x=n+1;f=d(i,b,x,r,e),g=p(s,b,x,a,e),y=u(o,b,x,e)}else for(var w=0;w<l;w++)f[w]=m(i,r,o,e,w,c),g[w]=v(s,a,o,e,w,c),y[w]=h(o,w,c);return{begin:f,end:g,strides:y}}function d(e,t,n,a,o){for(var i=(0,r.Z)(o),s=l(n,t),u=0;u<i.length;u++)if(s.indexOf(u)>-1)i[u]=0;else{var f=c(t,n,u),d=a[f];e&1<<f&&(d=0),i[u]=d}return i}function p(e,t,n,o,i){for(var s=(0,r.Z)(i),u=l(n,t),f=0;f<s.length;f++)if(u.indexOf(f)>-1)s[f]=Number.MAX_SAFE_INTEGER;else{var d=c(t,n,f),p=o[d];e&1<<d&&(p=Number.MAX_SAFE_INTEGER),s[f]=p}for(var h=0;h<s.length;h++){var m=i[h];s[h]<0&&(s[h]+=m),s[h]=a.uZ(0,s[h],i[h])}return s}function h(e,t,n){var r=e[t];return(n&1<<t||null==r)&&(r=1),r}function m(e,t,n,r,o,i){var s=t[o],u=n[o]||1;(e&1<<o||i&1<<o||null==s)&&(s=u>0?Number.MIN_SAFE_INTEGER:Number.MAX_SAFE_INTEGER);var c=r[o];return s<0&&(s+=c),s=a.uZ(0,s,c-1)}function v(e,t,n,r,o,i){var s=t[o],u=n[o]||1;(e&1<<o||i&1<<o||null==s)&&(s=u>0?Number.MAX_SAFE_INTEGER:Number.MIN_SAFE_INTEGER);var c=r[o];return s<0&&(s+=c),s=u>0?a.uZ(0,s,c):a.uZ(-1,s,c-1)}function g(e,t,n){for(var r=n.length,a=0;a<n.length;a++)if(n[a]>1){r=a;break}for(var o=r+1;o<n.length;o++)if(t[o]>0||n[o]!==e[o])return!1;return!0}function y(e,t){for(var n=e.length>0?e[e.length-1]:1,r=0;r<e.length-1;r++)n+=e[r]*t[r];return n}function b(e,t,n){var o,i,s=e.shape.length;return(o="number"===typeof t?[t].concat((0,r.Z)(new Array(s-1).fill(0))):t.length<s?t.concat(new Array(s-t.length).fill(0)):t.slice()).forEach((function(e){a.hu(-1!==e,(function(){return"slice() does not support negative begin indexing."}))})),i=(i=null==n?new Array(s).fill(-1):"number"===typeof n?[n].concat((0,r.Z)(new Array(s-1).fill(-1))):n.length<s?n.concat(new Array(s-n.length).fill(-1)):n).map((function(t,n){return t>=0?t:(a.hu(-1===t,(function(){return"Negative size values should be exactly -1 but got "+"".concat(t," for the slice() size at index ").concat(n,".")})),e.shape[n]-o[n])})),[o,i]}function x(e,t,n,r,a,o,i,s,u){var c;if(null==r?(c=new Array(t.length)).fill(1):c=r,null!=i&&0!==(i&i-1))throw new Error("Multiple ellipses in slice is not allowed.");for(var l=!1,f={dims:c.length,numAddAxisAfterEllipsis:0,begin:t.slice(),end:n.slice(),strides:c.slice(),beginMask:a,endMask:o,ellipsisMask:i,newAxisMask:s,shrinkAxisMask:u},d=0;d<f.dims;d++)l&&0!==(1<<d&s)&&f.numAddAxisAfterEllipsis++,1<<d&i&&(l=!0);l||(f.ellipsisMask|=1<<f.dims,f.dims++);var p={dims:e.length,beginMask:0,endMask:0,beginValid:!1,endValid:!1};!function(e,t){t.beginMask=0,t.endMask=0,t.shrinkAxisMask=0;var n=0;t.beginValid=null!=e.begin,t.endValid=null!=e.end,t.begin=new Array(t.dims),t.end=new Array(t.dims),t.strides=new Array(t.dims),t.finalShapeGatherIndices=[],t.finalShapeGatherIndicesSparse=[],t.inputShapeGatherIndicesSparse=new Array(t.dims);for(var r=0;r<e.dims;r++)if(1<<r&e.ellipsisMask)for(var a=Math.min(t.dims-(e.dims-r)+1+e.numAddAxisAfterEllipsis,t.dims);n<a;n++)t.begin[n]=0,t.end[n]=0,t.strides[n]=1,t.beginMask|=1<<n,t.endMask|=1<<n,t.finalShapeGatherIndices.push(n),t.finalShapeGatherIndicesSparse.push(-1),t.inputShapeGatherIndicesSparse[n]=r;else if(1<<r&e.newAxisMask)t.finalShapeGatherIndices.push(-2),t.finalShapeGatherIndicesSparse.push(-1);else{if(n===t.begin.length)throw Error("Index out of range using input dim ".concat(n,"; input ")+"has only ".concat(t.dims," dims, ").concat(t.begin.length,"."));null!=e.begin&&(t.begin[n]=e.begin[r]),null!=e.end&&(t.end[n]=e.end[r]),t.strides[n]=e.strides[r],e.beginMask&1<<r&&(t.beginMask|=1<<n),e.endMask&1<<r&&(t.endMask|=1<<n),e.shrinkAxisMask&1<<r?(t.finalShapeGatherIndices.push(-1),t.finalShapeGatherIndicesSparse.push(-1),t.shrinkAxisMask|=1<<n):(t.finalShapeGatherIndices.push(n),t.finalShapeGatherIndicesSparse.push(r)),t.inputShapeGatherIndicesSparse[n]=r,n++}}(f,p);for(var h=!0,m=!0,v=!0,g=[],y=[],b=0;b<e.length;++b){if(0===p.strides[b])throw Error("strides[".concat(b,"] must be non-zero"));var x=!!(p.shrinkAxisMask&1<<b),k=e[b];if(-1!==k){var S=[p.beginMask&1<<b,p.endMask&1<<b],_=[p.strides[b]>0?0:-1,p.strides[b]>0?k:k-1];if(x&&p.strides[b]<=0)throw Error("only stride 1 allowed on non-range indexing.");v=v&&1===p.strides[b];var N=!!(p.beginMask&1<<b&&p.endMask&1<<b);if(p.beginValid&&p.endValid){if(x){var E=p.begin[b]<0?k+p.begin[b]:p.begin[b];if(p.begin[b]=E,p.end[b]=p.begin[b]+1,E<0||E>=k)throw Error("slice index ".concat(p.begin[b]," of dimension ").concat(b," out of bounds."))}else p.begin[b]=w(p.begin[b],0,p.strides[b],k,S,_),p.end[b]=w(p.end[b],1,p.strides[b],k,S,_);var C=1===p.strides[b]&&0===p.begin[b]&&p.end[b]===k;h=h&&C,m=m&&(0===b&&1===p.strides[b]||C)}else h=h&&1===p.strides[b]&&N,m=m&&(0===b&&1===p.strides[b]||N);var T=void 0,I=!1;if(p.beginValid&&p.endValid?(T=p.end[b]-p.begin[b],I=!0):x?(T=1,I=!0):N&&k>=0&&(T=p.strides[b]<0?-k:k,I=!0),I){var O=void 0;O=0===T||T<0!==p.strides[b]<0?0:Math.trunc(T/p.strides[b])+(T%p.strides[b]!==0?1:0),g.push(O)}else g.push(-1)}else g.push(x?1:-1)}for(var A=0;A<p.finalShapeGatherIndices.length;++A){var D=p.finalShapeGatherIndices[A];D>=0?y.push(g[D]):-2===D&&y.push(1)}var M=y.filter((function(e,t){return-2!==p.finalShapeGatherIndices[t]}));return{finalShapeSparse:M,finalShape:y,isIdentity:h,sliceDim0:m,isSimpleSlice:v,begin:p.begin,end:p.end,strides:p.strides}}function w(e,t,n,r,a,o){if(a[t])return n>0?o[t]:o[t+1&1];var i=e<0?r+e:e;return i<o[0]?o[0]:i>o[1]?o[1]:i}},4910:function(e,t,n){"use strict";n.d(t,{X:function(){return i}});var r=n(318),a=n(2145),o=n(8354);var i=(0,n(8640).op)({softmax_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,n=(0,o._1)(e,"logits","softmax","float32");if(-1===t&&(t=n.rank-1),t!==n.rank-1)throw Error("Softmax along a non-last dimension is not yet supported. "+"Logits was rank ".concat(n.rank," and dim was ").concat(t));var i={logits:n},s={dim:t};return r.BV.runKernel(a.Gc,i,s)}})},4626:function(e,t,n){"use strict";n.d(t,{W:function(){return i}});var r=n(318),a=n(2145),o=n(8354);var i=(0,n(8640).op)({softplus_:function(e){var t={x:(0,o._1)(e,"x","softplus")};return r.BV.runKernel(a.MR,t)}})},5696:function(e,t,n){"use strict";n.d(t,{f:function(){return s}});var r=n(318),a=n(2145),o=n(8354),i=n(6147);var s=(0,n(8640).op)({spaceToBatchND_:function(e,t,n){var s=(0,o._1)(e,"x","spaceToBatchND");i.hu(s.rank>=1+t.length,(function(){return"input rank ".concat(s.rank," should be > than [blockShape] ").concat(t.length)})),i.hu(n.length===t.length,(function(){return"paddings.shape[0] ".concat(n.length," must be equal to [blockShape] ").concat(t.length)})),i.hu(s.shape.reduce((function(e,r,a){return a>0&&a<=t.length?e&&(r+n[a-1][0]+n[a-1][1])%t[a-1]===0:e}),!0),(function(){return"input spatial dimensions ".concat(s.shape.slice(1)," with paddings ").concat(n.toString()," must be divisible by blockShapes ").concat(t.toString())}));var u={x:s},c={blockShape:t,paddings:n};return r.BV.runKernel(a.TQ,u,c)}})},9991:function(e,t,n){"use strict";n.d(t,{e:function(){return s}});var r=n(318),a=n(2145);function o(e,t,n,r){if("int32"!==e.dtype)throw new Error("tf.sparseToDense() expects the indices to be int32 type,"+" but the dtype was ".concat(e.dtype,"."));if(e.rank>2)throw new Error("sparseIndices should be a scalar, vector, or matrix,"+" but got shape ".concat(e.shape,"."));var a=e.rank>0?e.shape[0]:1,o=e.rank>1?e.shape[1]:1;if(n.length!==o)throw new Error("outputShape has incorrect number of elements:,"+" ".concat(n.length,", should be: ").concat(o,"."));var i=t.size;if(0!==t.rank&&(1!==t.rank||i!==a))throw new Error("sparseValues has incorrect shape "+"".concat(t.shape,", should be [] or [").concat(a,"]"));if(t.dtype!==r.dtype)throw new Error("sparseValues.dtype must match defaultValues.dtype")}var i=n(8354);var s=(0,n(8640).op)({sparseToDense_:function(e,t,n){var s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,u=(0,i._1)(e,"sparseIndices","sparseToDense","int32"),c=(0,i._1)(t,"sparseValues","sparseToDense"),l=(0,i._1)(s,"defaultValue","sparseToDense",c.dtype);o(u,c,n,l);var f={sparseIndices:u,sparseValues:c,defaultValue:l},d={outputShape:n};return r.BV.runKernel(a.D2,f,d)}})},7635:function(e,t,n){"use strict";n.d(t,{k:function(){return i}});var r=n(318),a=n(2145),o=n(6147);var i=(0,n(8640).op)({fft_:function(e){(0,o.hu)("complex64"===e.dtype,(function(){return"The dtype for tf.spectral.fft() must be complex64 "+"but got ".concat(e.dtype,".")}));var t={input:e};return r.BV.runKernel(a.vw,t)}})},530:function(e,t,n){"use strict";n.d(t,{S:function(){return i}});var r=n(318),a=n(2145),o=n(6147);var i=(0,n(8640).op)({ifft_:function(e){(0,o.hu)("complex64"===e.dtype,(function(){return"The dtype for tf.spectral.ifft() must be complex64 "+"but got ".concat(e.dtype,".")}));var t={input:e};return r.BV.runKernel(a.Qg,t)}})},774:function(e,t,n){"use strict";n.d(t,{w:function(){return h}});var r=n(9253),a=n(4836),o=n(6996),i=n(651),s=n(8640),u=n(6972),c=n(5561),l=n(4933),f=n(7067),d=n(9238),p=n(530);var h=(0,s.op)({irfft_:function(e){var t,n=e.shape[e.shape.length-1],s=e.size/n;if(n<=2){var h=(0,c.X)(e,[s,n]);t=(0,p.S)(h)}else{var m=[s,2*(n-1)],v=(0,c.X)((0,u.k)(e),[s,n]),g=(0,c.X)((0,o.a)(e),[s,n]),y=(0,l.G)((0,d.t)(v,[0,1],[s,n-2]),1),b=(0,i.d)((0,l.G)((0,d.t)(g,[0,1],[s,n-2]),1),(0,f.i)(-1)),x=(0,a.z)([v,y],1),w=(0,a.z)([g,b],1),k=(0,c.X)((0,r.P)(x,w),[m[0],m[1]]);t=(0,p.S)(k)}if(t=(0,u.k)(t),3===e.rank&&0!==e.shape[0]){var S=t,_=e.shape[0];t=(0,c.X)(t,[_,t.shape[0]/_,t.shape[1]]),S.dispose()}return t}})},4617:function(e,t,n){"use strict";n.d(t,{Q:function(){return m}});var r=n(6147),a=n(9253),o=n(4836),i=n(6996),s=n(8640),u=n(6972),c=n(5561),l=n(9238),f=n(2588),d=n(7742),p=n(7293),h=n(7635);var m=(0,s.op)({rfft_:function(e,t){(0,r.hu)("float32"===e.dtype,(function(){return"The dtype for rfft() must be real value but got ".concat(e.dtype)}));var n,s=e.shape[e.shape.length-1],m=e.size/s;if(null!=t&&t<s){var v=e.shape.map((function(e){return 0})),g=e.shape.map((function(e){return e}));g[e.shape.length-1]=t,n=(0,l.t)(e,v,g),s=t}else if(null!=t&&t>s){var y=e.shape.map((function(e){return e}));y[e.shape.length-1]=t-s,n=(0,o.z)([e,(0,d.l)(y)],e.shape.length-1),s=t}else n=e;var b=(0,p.P)(n),x=(0,c.X)((0,a.P)(n,b),[m,s]),w=(0,h.k)(x),k=Math.floor(s/2)+1,S=(0,u.k)(w),_=(0,i.a)(w),N=(0,f.V)(S,[k,s-k],S.shape.length-1),E=(0,f.V)(_,[k,s-k],_.shape.length-1),C=n.shape.slice();return C[n.shape.length-1]=k,(0,c.X)((0,a.P)(N[0],E[0]),C)}})},2588:function(e,t,n){"use strict";n.d(t,{V:function(){return i}});var r=n(318),a=n(2145),o=n(8354);var i=(0,n(8640).op)({split_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=(0,o._1)(e,"x","split"),s={x:i},u={numOrSizeSplits:t,axis:n};return r.BV.runKernel(a.L8,s,u)}})},6902:function(e,t,n){"use strict";n.d(t,{_:function(){return i}});var r=n(318),a=n(2145),o=n(8354);var i=(0,n(8640).op)({sqrt_:function(e){var t={x:(0,o._1)(e,"x","sqrt","float32")};return r.BV.runKernel(a.FK,t)}})},7391:function(e,t,n){"use strict";n.d(t,{h:function(){return o}});var r=n(318),a=n(8354);var o=(0,n(8640).op)({square_:function(e){var t=(0,a._1)(e,"x","square");return r.BV.runKernel("Square",{x:t},{})}})},7993:function(e,t,n){"use strict";n.d(t,{$:function(){return c}});var r=n(9439),a=n(318),o=n(2145),i=n(9064),s=n(8354),u=n(9877);var c=(0,n(8640).op)({squaredDifference_:function(e,t){var n=(0,s._1)(e,"a","squaredDifference"),c=(0,s._1)(t,"b","squaredDifference"),l=(0,i.makeTypesMatch)(n,c),f=(0,r.Z)(l,2);n=f[0],c=f[1],(0,u.assertAndGetBroadcastShape)(n.shape,c.shape);var d={a:n,b:c};return a.BV.runKernel(o._t,d,{})}})},3931:function(e,t,n){"use strict";n.d(t,{L:function(){return s}});var r=n(8354),a=n(6147),o=n(8640),i=n(5561);var s=(0,o.op)({squeeze_:function(e,t){var n=(0,r._1)(e,"x","squeeze");return(0,i.X)(n,(0,a.bp)(n.shape,t).newShape)}})},8306:function(e,t,n){"use strict";n.d(t,{k:function(){return s}});var r=n(318),a=n(2145),o=n(8354),i=n(6147);var s=(0,n(8640).op)({stack_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(0,o.sI)(e,"tensors","stack","string_or_numeric");i.hu(n.length>=1,(function(){return"Pass at least one tensor to tf.stack"})),n.length>0&&i.hu(t<=n[0].rank,(function(){return"Axis must be <= rank of the tensor"}));var s=n,u={axis:t};return r.BV.runKernel(a.Qi,s,u)}})},4031:function(e,t,n){"use strict";n.d(t,{N:function(){return i}});var r=n(318),a=n(2145),o=n(8354);var i=(0,n(8640).op)({step_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(0,o._1)(e,"x","step"),i={x:n},s={alpha:t};return r.BV.runKernel(a.h8,i,s)}})},9017:function(e,t,n){"use strict";n.d(t,{N:function(){return i}});var r=n(318),a=n(2145),o=n(8354);var i=(0,n(8640).op)({stridedSlice_:function(e,t,n,i){var s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,c=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,l=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,f=arguments.length>8&&void 0!==arguments[8]?arguments[8]:0,d=(0,o._1)(e,"x","stridedSlice","string_or_numeric"),p={x:d},h={begin:t,end:n,strides:i,beginMask:s,endMask:u,ellipsisMask:c,newAxisMask:l,shrinkAxisMask:f};return r.BV.runKernel(a.m2,p,h)}})},4774:function(e,t,n){"use strict";n.d(t,{l:function(){return u}});var r=n(9439),a=n(318),o=n(2145),i=n(9064),s=n(8354);var u=(0,n(8640).op)({sub_:function(e,t){var n=(0,s._1)(e,"a","sub"),u=(0,s._1)(t,"b","sub"),c=(0,i.makeTypesMatch)(n,u),l=(0,r.Z)(c,2),f={a:n=l[0],b:u=l[1]};return a.BV.runKernel(o.Tr,f)}})},227:function(e,t,n){"use strict";n.d(t,{S:function(){return s}});var r=n(318),a=n(2145),o=n(8354),i=n(9118);var s=(0,n(8640).op)({sum_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],s=(0,o._1)(e,"x","sum");"bool"===s.dtype&&(s=(0,i.p)(s,"int32"));var u={x:s},c={axis:t,keepDims:n};return r.BV.runKernel(a.GB,u,c)}})},6999:function(e,t,n){"use strict";n.d(t,{O:function(){return i}});var r=n(318),a=n(2145),o=n(8354);var i=(0,n(8640).op)({tan_:function(e){var t={x:(0,o._1)(e,"x","tan","float32")};return r.BV.runKernel(a.sE,t)}})},1744:function(e,t,n){"use strict";n.d(t,{A:function(){return i}});var r=n(318),a=n(2145),o=n(8354);var i=(0,n(8640).op)({tanh_:function(e){var t={x:(0,o._1)(e,"x","tanh","float32")};return r.BV.runKernel(a.MI,t)}})},2442:function(e,t,n){"use strict";n.d(t,{X:function(){return o}});var r=n(8354),a=n(7960);function o(e,t,n){var o=(0,r.C)(e,n);return(0,a.H)(e,t,o,n)}},2894:function(e,t,n){"use strict";n.d(t,{R:function(){return i}});var r=n(8354),a=n(6147),o=n(7960);function i(e,t){(0,a.Cq)(e);var n=(0,r.C)(e,t);if(1!==n.length)throw new Error("tensor1d() requires values to be a flat/TypedArray");return(0,o.H)(e,null,n,t)}},3123:function(e,t,n){"use strict";n.d(t,{w:function(){return i}});var r=n(8354),a=n(6147),o=n(7960);function i(e,t,n){if((0,a.Cq)(e),null!=t&&3!==t.length)throw new Error("tensor3d() requires shape to have three numbers");var i=(0,r.C)(e,n);if(3!==i.length&&1!==i.length)throw new Error("tensor3d() requires values to be number[][][] or flat/TypedArray");if(1===i.length&&null==t)throw new Error("tensor3d() requires shape to be provided when `values` are a flat array");return(0,o.H)(e,t,i,n)}},7960:function(e,t,n){"use strict";n.d(t,{H:function(){return i}});var r=n(318),a=n(6147),o=n(115);function i(e,t,n,i){if(null==i&&(i=(0,a.D2)(e)),"complex64"===i)throw new Error("Cannot construct a complex64 tensor directly. Please use tf.complex(real, imag).");if(!(0,a.fU)(e)&&!Array.isArray(e)&&"number"!==typeof e&&"boolean"!==typeof e&&"string"!==typeof e)throw new Error("values passed to tensor(values) must be a number/boolean/string or an array of numbers/booleans/strings, or a TypedArray");if(null!=t){(0,a.Mu)(t);var s=(0,a.NA)(t),u=(0,a.NA)(n);(0,a.hu)(s===u,(function(){return"Based on the provided shape, [".concat(t,"], the tensor should have ")+"".concat(s," values but has ").concat(u)}));for(var c=0;c<n.length;++c){var l=n[c],f=c!==n.length-1||l!==(0,a.NA)(t.slice(c));(0,a.hu)(n[c]===t[c]||!f,(function(){return"Error creating a new Tensor. Inferred shape "+"(".concat(n,") does not match the provided ")+"shape (".concat(t,"). ")}))}}return(0,a.fU)(e)||Array.isArray(e)||(e=[e]),t=t||n,e="string"!==i?(0,o.toTypedArray)(e,i):(0,a.xH)(e,[],!0),r.BV.makeTensor(e,t,i)}},2343:function(e,t,n){"use strict";n.d(t,{G:function(){return s}});var r=n(318),a=n(2145),o=n(8354),i=n(6147);var s=(0,n(8640).op)({tile_:function(e,t){var n=(0,o._1)(e,"x","tile","string_or_numeric");i.hu(n.rank===t.length,(function(){return"Error in transpose: rank of input ".concat(n.rank," ")+"must match length of reps ".concat(t,".")}));var s={x:n},u={reps:t};return r.BV.runKernel(a.n9,s,u)}})},9085:function(e,t,n){"use strict";n.d(t,{h:function(){return s}});var r=n(9439),a=n(318),o=n(2145),i=n(8354);var s=(0,n(8640).op)({topk_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],s=(0,i._1)(e,"x","topk");if(0===s.rank)throw new Error("topk() expects the input to be of rank 1 or higher");var u=s.shape[s.shape.length-1];if(t<0)throw new Error("'k' passed to topk() must be >= 0 but got ".concat(t));if(t>u)throw new Error("'k' passed to topk() must be <= the last dimension (".concat(u,") ")+"but got ".concat(t));var c={x:s},l={k:t,sorted:n},f=a.BV.runKernel(o.cW,c,l),d=(0,r.Z)(f,2),p=d[0],h=d[1];return{values:p,indices:h}}})},1240:function(e,t,n){"use strict";n.d(t,{p:function(){return s}});var r=n(318),a=n(2145),o=n(8354),i=n(6147);var s=(0,n(8640).op)({transpose_:function(e,t){var n=(0,o._1)(e,"x","transpose");if(null==t&&(t=n.shape.map((function(e,t){return t})).reverse()),i.hu(n.rank===t.length,(function(){return"Error in transpose: rank of input ".concat(n.rank," ")+"must match length of perm ".concat(t,".")})),t.forEach((function(e){i.hu(e>=0&&e<n.rank,(function(){return"All entries in 'perm' must be between 0 and ".concat(n.rank-1)+" but got ".concat(t)}))})),n.rank<=1)return n.clone();var s={x:n},u={perm:t};return r.BV.runKernel(a.G3,s,u)}})},4849:function(e,t,n){"use strict";n.d(t,{X:function(){return i}});var r=n(7039),a=n(8640),o=n(4466);var i=(0,a.op)({truncatedNormal_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,a=arguments.length>3?arguments[3]:void 0,i=arguments.length>4?arguments[4]:void 0;if(null!=a&&"bool"===a)throw new Error("Unsupported data type $ { dtype }");for(var s=new o.Yi(t,n,a,!0,i),u=(0,r.f)(e,a),c=0;c<u.values.length;c++)u.values[c]=s.nextValue();return u.toTensor()}})},4860:function(e,t,n){"use strict";n.d(t,{T:function(){return u}});var r=n(9439),a=n(318),o=n(2145),i=n(8354),s=n(6147);var u=(0,n(8640).op)({unique_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(0,i._1)(e,"x","unique","string_or_numeric");(0,s.hu)(n.rank>0,(function(){return"The input tensor must be at least 1D"}));var u={x:n},c={axis:t},l=a.BV.runKernel(o.kp,u,c),f=(0,r.Z)(l,2),d=f[0],p=f[1];return{values:d,indices:p}}})},6918:function(e,t,n){"use strict";n.d(t,{p:function(){return s}});var r=n(318),a=n(2145),o=n(8354),i=n(6147);var s=(0,n(8640).op)({unsortedSegmentSum_:function(e,t,n){var s=(0,o._1)(e,"x","unsortedSegmentSum"),u=(0,o._1)(t,"segmentIds","unsortedSegmentSum","int32");(0,i.hu)((0,i.GN)(n),(function(){return"numSegments must be of dtype int"}));var c={x:s,segmentIds:u},l={numSegments:n};return r.BV.runKernel(a.Qv,c,l)}})},4566:function(e,t,n){"use strict";n.d(t,{H:function(){return s}});var r=n(318),a=n(2145),o=n(8354),i=n(6147);var s=(0,n(8640).op)({unstack_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(0,o._1)(e,"x","unstack","string_or_numeric");i.hu(t>=-n.shape.length&&t<n.shape.length,(function(){return"Axis = ".concat(t," is not in [-").concat(n.shape.length,", ").concat(n.shape.length,")")}));var s={value:n},u={axis:t};return r.BV.runKernel(a.To,s,u)}})},329:function(e,t,n){"use strict";n.d(t,{a:function(){return u}});var r=n(318),a=n(2145),o=n(8354),i=n(9742),s=n(9877);var u=(0,n(8640).op)({where_:function(e,t,n){var u=(0,o._1)(t,"a","where"),c=(0,o._1)(n,"b","where"),l=(0,o._1)(e,"condition","where","bool"),f=(0,s.assertAndGetBroadcastShape)((0,s.assertAndGetBroadcastShape)(l.shape,u.shape),c.shape),d={condition:(0,i.U)(l,f),t:(0,i.U)(u,f),e:(0,i.U)(c,f)};return r.BV.runKernel(a.Ph,d)}})},1867:function(e,t,n){"use strict";n.d(t,{i:function(){return c}});var r=n(5861),a=n(7757),o=n.n(a),i=n(4189),s=n(8354);function u(){return(u=(0,r.Z)(o().mark((function e(t){var n,r,a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=(0,s._1)(t,"condition","whereAsync","bool"),e.next=3,n.data();case 3:return r=e.sent,a=(0,i.Z)(n.shape,r),t!==n&&n.dispose(),e.abrupt("return",a);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var c=function(e){return u.apply(this,arguments)}},7742:function(e,t,n){"use strict";n.d(t,{l:function(){return i}});var r=n(318),a=n(6147),o=n(9253);function i(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"float32";if("complex64"===t){var n=i(e,"float32"),s=i(e,"float32");return(0,o.P)(n,s)}var u=(0,a.wT)((0,a.NA)(e),t);return r.BV.makeTensor(u,e,t)}},7293:function(e,t,n){"use strict";n.d(t,{P:function(){return i}});var r=n(318),a=n(2145),o=n(8354);var i=(0,n(8640).op)({zerosLike_:function(e){var t={x:(0,o._1)(e,"x","zerosLike")};return r.BV.runKernel(a.Ru,t)}})},4376:function(e,t,n){"use strict";n.d(t,{es:function(){return N},YD:function(){return b},_w:function(){return C},t3:function(){return E},FZ:function(){return _},Vp:function(){return S},Vi:function(){return k}});var r=n(136),a=n(3668),o=n(5861),i=n(5671),s=n(3144),u=n(7757),c=n.n(u),l=n(6581),f=n(3433),d=n(6147);function p(e,t,n,r){var a=(0,d.e3)(t),o=function(e,t,n,r){var a=(0,d.NA)(t),o=r[r.length-1],i=new Array(o).fill(0),s=t.length,u="complex64"===n?g(e):e;if(s>1)for(var c=0;c<a/o;c++)for(var l=c*o,f=0;f<o;f++)i[f]=Math.max(i[f],h(u[l+f],0,n).length);return i}(e,t,n,a),i=t.length,s=v(e,t,n,a,o),u=["Tensor"];return r&&(u.push("  dtype: ".concat(n)),u.push("  rank: ".concat(i)),u.push("  shape: [".concat(t,"]")),u.push("  values:")),u.push(s.map((function(e){return"    "+e})).join("\n")),u.join("\n")}function h(e,t,n){var r;return r=Array.isArray(e)?"".concat(parseFloat(e[0].toFixed(7))," + ")+"".concat(parseFloat(e[1].toFixed(7)),"j"):(0,d.HD)(e)?"'".concat(e,"'"):"bool"===n?m(e):parseFloat(e.toFixed(7)).toString(),(0,d.oj)(r,t)}function m(e){return 0===e?"false":"true"}function v(e,t,n,r,a){var o=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],i="complex64"===n?2:1,s=t[0],u=t.length;if(0===u){if("complex64"===n){var c=g(e);return[h(c[0],0,n)]}return"bool"===n?[m(e[0])]:[e[0].toString()]}if(1===u){if(s>20){var l=3*i,d=Array.from(e.slice(0,l)),p=Array.from(e.slice((s-3)*i,s*i));return"complex64"===n&&(d=g(d),p=g(p)),["["+d.map((function(e,t){return h(e,a[t],n)})).join(", ")+", ..., "+p.map((function(e,t){return h(e,a[s-3+t],n)})).join(", ")+"]"]}var y="complex64"===n?g(e):Array.from(e);return["["+y.map((function(e,t){return h(e,a[t],n)})).join(", ")+"]"]}var b=t.slice(1),x=r.slice(1),w=r[0]*i,k=[];if(s>20){for(var S=0;S<3;S++){var _=S*w,N=_+w;k.push.apply(k,(0,f.Z)(v(e.slice(_,N),b,n,x,a,!1)))}k.push("...");for(var E=s-3;E<s;E++){var C=E*w,T=C+w;k.push.apply(k,(0,f.Z)(v(e.slice(C,T),b,n,x,a,E===s-1)))}}else for(var I=0;I<s;I++){var O=I*w,A=O+w;k.push.apply(k,(0,f.Z)(v(e.slice(O,A),b,n,x,a,I===s-1)))}var D=2===u?",":"";k[0]="["+k[0]+D;for(var M=1;M<k.length-1;M++)k[M]=" "+k[M]+D;for(var R=",\n",P=2;P<u;P++)R+="\n";return k[k.length-1]=" "+k[k.length-1]+"]"+(o?"":R),k}function g(e){for(var t=[],n=0;n<e.length;n+=2)t.push([e[n],e[n+1]]);return t}var y=n(115),b=function(){function e(t,n,r){var a=this;if((0,i.Z)(this,e),this.dtype=n,this.shape=t.slice(),this.size=d.NA(t),null!=r){var o=r.length;d.hu(o===this.size,(function(){return"Length of values '".concat(o,"' does not match the size ")+"inferred by the shape '".concat(a.size,"'.")}))}if("complex64"===n)throw new Error("complex64 dtype TensorBuffers are not supported. Please create a TensorBuffer for the real and imaginary parts separately and call tf.complex(real, imag).");this.values=r||d.rQ(n,this.size),this.strides=(0,d.e3)(t)}return(0,s.Z)(e,[{key:"set",value:function(e){for(var t=this,n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];0===r.length&&(r=[0]),d.hu(r.length===this.rank,(function(){return"The number of provided coordinates (".concat(r.length,") must ")+"match the rank (".concat(t.rank,")")}));var o=this.locToIndex(r);this.values[o]=e}},{key:"get",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];0===t.length&&(t=[0]);for(var r=0,a=0,o=t;a<o.length;a++){var i=o[a];if(i<0||i>=this.shape[r]){var s="Requested out of range element at ".concat(t,". ")+"  Buffer shape=".concat(this.shape);throw new Error(s)}r++}for(var u=t[t.length-1],c=0;c<t.length-1;++c)u+=this.strides[c]*t[c];return this.values[u]}},{key:"locToIndex",value:function(e){if(0===this.rank)return 0;if(1===this.rank)return e[0];for(var t=e[e.length-1],n=0;n<e.length-1;++n)t+=this.strides[n]*e[n];return t}},{key:"indexToLoc",value:function(e){if(0===this.rank)return[];if(1===this.rank)return[e];for(var t=new Array(this.shape.length),n=0;n<t.length-1;++n)t[n]=Math.floor(e/this.strides[n]),e-=t[n]*this.strides[n];return t[t.length-1]=e,t}},{key:"rank",get:function(){return this.shape.length}},{key:"toTensor",value:function(){return x().makeTensor(this.values,this.shape,this.dtype)}}]),e}(),x=null,w=null;function k(e){x=e}function S(e){w=e}function _(e){e}var N=function(){function e(t,n,r,a){(0,i.Z)(this,e),this.kept=!1,this.isDisposedInternal=!1,this.shape=t.slice(),this.dtype=n||"float32",this.size=d.NA(t),this.strides=(0,d.e3)(t),this.dataId=r,this.id=a,this.rankType=this.rank<5?this.rank.toString():"higher"}return(0,s.Z)(e,[{key:"rank",get:function(){return this.shape.length}},{key:"buffer",value:function(){var e=(0,o.Z)(c().mark((function e(){var t;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.data();case 2:return t=e.sent,e.abrupt("return",w.buffer(this.shape,this.dtype,t));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"bufferSync",value:function(){return w.buffer(this.shape,this.dtype,this.dataSync())}},{key:"array",value:function(){var e=(0,o.Z)(c().mark((function e(){var t;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.data();case 2:return t=e.sent,e.abrupt("return",(0,d.GX)(this.shape,t,"complex64"===this.dtype));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"arraySync",value:function(){return(0,d.GX)(this.shape,this.dataSync(),"complex64"===this.dtype)}},{key:"data",value:function(){var e=(0,o.Z)(c().mark((function e(){var t,n;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.throwIfDisposed(),t=x().read(this.dataId),"string"!==this.dtype){e.next=13;break}return e.next=5,t;case 5:return n=e.sent,e.prev=6,e.abrupt("return",n.map((function(e){return y.decodeString(e)})));case 10:throw e.prev=10,e.t0=e.catch(6),new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().");case 13:return e.abrupt("return",t);case 14:case"end":return e.stop()}}),e,this,[[6,10]])})));return function(){return e.apply(this,arguments)}}()},{key:"dataToGPU",value:function(e){return this.throwIfDisposed(),x().readToGPU(this.dataId,e)}},{key:"dataSync",value:function(){this.throwIfDisposed();var e=x().readSync(this.dataId);if("string"===this.dtype)try{return e.map((function(e){return y.decodeString(e)}))}catch(t){throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}return e}},{key:"bytes",value:function(){var e=(0,o.Z)(c().mark((function e(){var t;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.throwIfDisposed(),e.next=3,x().read(this.dataId);case 3:if(t=e.sent,"string"!==this.dtype){e.next=8;break}return e.abrupt("return",t);case 8:return e.abrupt("return",new Uint8Array(t.buffer));case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"dispose",value:function(){this.isDisposed||(x().disposeTensor(this),this.isDisposedInternal=!0)}},{key:"isDisposed",get:function(){return this.isDisposedInternal}},{key:"throwIfDisposed",value:function(){if(this.isDisposed)throw new Error("Tensor is disposed.")}},{key:"print",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return w.print(this,e)}},{key:"clone",value:function(){return this.throwIfDisposed(),w.clone(this)}},{key:"toString",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.dataSync();return p(t,this.shape,this.dtype,e)}},{key:"cast",value:function(e){return this.throwIfDisposed(),w.cast(this,e)}},{key:"variable",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0;return this.throwIfDisposed(),x().makeVariable(this,e,t,n)}}]),e}();function E(){return(0,l.R)("Tensor",(function(){return N}))}Object.defineProperty(N,Symbol.hasInstance,{value:function(e){return!!e&&null!=e.data&&null!=e.dataSync&&null!=e.throwIfDisposed}}),E();var C=function(e){(0,r.Z)(n,e);var t=(0,a.Z)(n);function n(e,r,a,o){var s;return(0,i.Z)(this,n),(s=t.call(this,e.shape,e.dtype,e.dataId,o)).trainable=r,s.name=a,s}return(0,s.Z)(n,[{key:"assign",value:function(e){if(e.dtype!==this.dtype)throw new Error("dtype of the new value (".concat(e.dtype,") and ")+"previous value (".concat(this.dtype,") must match"));if(!d.cO(e.shape,this.shape))throw new Error("shape of the new value (".concat(e.shape,") and ")+"previous value (".concat(this.shape,") must match"));x().disposeTensor(this),this.dataId=e.dataId,x().incRef(this,null)}},{key:"dispose",value:function(){x().disposeVariable(this),this.isDisposedInternal=!0}}]),n}(N);Object.defineProperty(C,Symbol.hasInstance,{value:function(e){return e instanceof N&&null!=e.assign&&e.assign instanceof Function}})},9064:function(e,t,n){"use strict";n.r(t),n.d(t,{makeTypesMatch:function(){return i},assertTypesMatch:function(){return s},isTensorInList:function(){return u},getTensorsInContainer:function(){return c}});var r=n(4376),a=n(3525),o=n(6147);function i(e,t){if(e.dtype===t.dtype)return[e,t];var n=(0,a.x8)(e.dtype,t.dtype);return[e.cast(n),t.cast(n)]}function s(e,t){(0,o.hu)(e.dtype===t.dtype,(function(){return"The dtypes of the first(".concat(e.dtype,") and")+" second(".concat(t.dtype,") input must match")}))}function u(e,t){return t.some((function(t){return t.id===e.id}))}function c(e){var t=[];return l(e,t,new Set),t}function l(e,t,n){if(null!=e)if(e instanceof r.es)t.push(e);else if(a=e,Array.isArray(a)||"object"===typeof a){var a,o=e;for(var i in o){var s=o[i];n.has(s)||(n.add(s),l(s,t,n))}}}},8354:function(e,t,n){"use strict";n.d(t,{C:function(){return u},_1:function(){return f},sI:function(){return d}});var r=n(318),a=n(5050),o=n(4376),i=n(6147),s=n(115);function u(e,t){var n=e;if((0,i.fU)(e))return"string"===t?[]:[e.length];if(!Array.isArray(e))return[];for(var r=[];Array.isArray(n)||(0,i.fU)(n)&&"string"!==t;)r.push(n.length),n=n[0];return Array.isArray(e)&&(0,a.OB)().getBool("TENSORLIKE_CHECK_SHAPE_CONSISTENCY")&&c(e,r,[]),r}function c(e,t,n){if(n=n||[],Array.isArray(e)||(0,i.fU)(e)){(0,i.hu)(t.length>0,(function(){return"Element arr[".concat(n.join("]["),"] should be a primitive, ")+"but is an array of ".concat(e.length," elements")})),(0,i.hu)(e.length===t[0],(function(){return"Element arr[".concat(n.join("]["),"] should have ").concat(t[0]," ")+"elements, but has ".concat(e.length," elements")}));for(var r=t.slice(1),a=0;a<e.length;++a)c(e[a],r,n.concat(a))}else(0,i.hu)(0===t.length,(function(){return"Element arr[".concat(n.join("]["),"] is a primitive, ")+"but should be an array/TypedArray of ".concat(t[0]," elements")}))}function l(e,t,n,r){if("string_or_numeric"!==e){if(null==e)throw new Error("Expected dtype cannot be null.");if("numeric"!==e&&e!==t||"numeric"===e&&"string"===t)throw new Error("Argument '".concat(n,"' passed to '").concat(r,"' must ")+"be ".concat(e," tensor, but got ").concat(t," tensor"))}}function f(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"numeric";if(e instanceof o.es)return l(a,e.dtype,t,n),e;var c=(0,i.D2)(e);if("string"!==c&&["bool","int32","float32"].indexOf(a)>=0&&(c=a),l(a,c,t,n),null==e||!(0,i.fU)(e)&&!Array.isArray(e)&&"number"!==typeof e&&"boolean"!==typeof e&&"string"!==typeof e){var f=null==e?"null":e.constructor.name;throw new Error("Argument '".concat(t,"' passed to '").concat(n,"' must be a ")+"Tensor or TensorLike, but got '".concat(f,"'"))}var d=u(e,c);(0,i.fU)(e)||Array.isArray(e)||(e=[e]);var p=!0,h="string"!==c?(0,s.toTypedArray)(e,c):(0,i.xH)(e,[],p);return r.BV.makeTensor(h,d,c)}function d(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"numeric";if(!Array.isArray(e))throw new Error("Argument ".concat(t," passed to ").concat(n," must be a ")+"`Tensor[]` or `TensorLike[]`");var a=e;return a.map((function(e,a){return f(e,"".concat(t,"[").concat(a,"]"),n,r)}))}},3525:function(e,t,n){"use strict";var r,a,o,i,s;n.d(t,{yw:function(){return r},x8:function(){return c},z4:function(){return l}}),function(e){e.R0="R0",e.R1="R1",e.R2="R2",e.R3="R3",e.R4="R4",e.R5="R5",e.R6="R6"}(r||(r={})),function(e){e.float32="float32",e.int32="int32",e.bool="int32",e.complex64="complex64"}(a||(a={})),function(e){e.float32="float32",e.int32="int32",e.bool="bool",e.complex64="complex64"}(o||(o={})),function(e){e.float32="float32",e.int32="float32",e.bool="float32",e.complex64="complex64"}(i||(i={})),function(e){e.float32="complex64",e.int32="complex64",e.bool="complex64",e.complex64="complex64"}(s||(s={}));var u={float32:i,int32:a,bool:o,complex64:s};function c(e,t){if("string"===e||"string"===t){if("string"===e&&"string"===t)return"string";throw new Error("Can not upcast ".concat(e," with ").concat(t))}return u[e][t]}function l(e){return c(e,"int32")}},115:function(e,t,n){"use strict";n.r(t),n.d(t,{arraysEqual:function(){return a.cO},assert:function(){return a.hu},assertNonNegativeIntegerDimensions:function(){return a.Mu},assertNonNull:function(){return a.Cq},assertShapesMatch:function(){return a.k5},bytesFromStringArray:function(){return a.Ub},bytesPerElement:function(){return a.bT},checkConversionForErrors:function(){return a.D5},clamp:function(){return a.uZ},computeStrides:function(){return a.e3},createScalarValue:function(){return k},createShuffledIndices:function(){return a.U$},decodeString:function(){return C},distSquared:function(){return a.E7},encodeString:function(){return E},fetch:function(){return N},fingerPrint64:function(){return w},flatten:function(){return a.xH},getArrayFromDType:function(){return a.rQ},getTypedArrayFromDType:function(){return a.WP},hasEncodingLoss:function(){return a.QB},hexToLong:function(){return s},indexToLoc:function(){return a.NE},inferDtype:function(){return a.D2},inferFromImplicitShape:function(){return a.JZ},isBoolean:function(){return a.jn},isFunction:function(){return a.mf},isInt:function(){return a.GN},isNumber:function(){return a.hj},isPromise:function(){return a.tI},isScalarShape:function(){return a.N9},isString:function(){return a.HD},isTypedArray:function(){return a.fU},isValidDtype:function(){return a.LP},locToIndex:function(){return a.qy},makeOnesTypedArray:function(){return a.p8},makeZerosNestedTypedArray:function(){return a.l6},makeZerosTypedArray:function(){return a.wT},nearestDivisor:function(){return a.jP},nearestLargerEven:function(){return a.nY},now:function(){return _},parseAxisParam:function(){return a.EC},randUniform:function(){return a.bj},repeatedTry:function(){return a.WD},rightPad:function(){return a.oj},shuffle:function(){return a.TV},shuffleCombo:function(){return a.d7},sizeFromShape:function(){return a.NA},sizeToSquarishShape:function(){return a.YP},squeezeShape:function(){return a.bp},sum:function(){return a.Sm},swap:function(){return a.LF},tanh:function(){return a.AE},toNestedArray:function(){return a.GX},toTypedArray:function(){return S}});var r=n(5050),a=n(6147),o=n(8987),i=n.n(o)()||o;function s(e){return i.fromString(e,!0,16)}var u=s("c3a5c85c97cb3127"),c=s("b492b66fbe98f273"),l=s("9ae16a3b2f90404f");function f(e){return e.xor(e.shru(47))}function d(e,t,n){var r=e.slice(t,t+n);return i.fromBytes(Array.from(r),!0,!0)}function p(e,t){return d(e,t,8)}function h(e,t){return d(e,t,4)}function m(e,t){return 0===t?e:e.shru(t).or(e.shl(64-t))}function v(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:s("9ddfea08eb382d69"),r=e.xor(t).mul(n);r=r.xor(r.shru(47));var a=t.xor(r).mul(n);return a=(a=a.xor(a.shru(47))).mul(n)}function g(e,t,n,r){return function(e,t,n,r,a,o){a=a.add(e),o=m(o.add(a).add(r),21);var i=a;return a=(a=a.add(t)).add(n),o=o.add(m(a,44)),[a.add(r),o.add(i)]}(p(e,t),p(e,t+8),p(e,t+16),p(e,t+24),n,r)}function y(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.length;if(t>=8){var n=l.add(2*t),r=p(e,0).add(l),a=p(e,t-8),o=m(a,37).mul(n).add(r),i=m(r,25).add(a).mul(n);return v(o,i,n)}if(t>=4){var s=l.add(2*t),c=h(e,0);return v(c.shl(3).add(t),h(e,t-4),s)}if(t>0){var d=e[0],g=e[t>>1],y=e[t-1],b=d+(g<<8),x=t+(y<<2);return f(l.mul(b).xor(u.mul(x))).mul(l)}return l}function b(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.length,n=l.add(2*t),r=p(e,0).mul(c),a=p(e,8),o=p(e,t-8).mul(n),i=p(e,t-16).mul(l);return v(m(r.add(a),43).add(m(o,30)).add(i),r.add(m(a.add(l),18)).add(o),n)}function x(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.length,n=l.add(2*t),r=p(e,0).mul(l),a=p(e,8),o=p(e,t-8).mul(n),i=p(e,t-16).mul(l),s=m(r.add(a),43).add(m(o,30)).add(i),u=v(s,r.add(m(a.add(l),18)).add(o),n),c=p(e,16).mul(n),f=p(e,24),d=s.add(p(e,t-32)).mul(n),h=u.add(p(e,t-24)).mul(n);return v(m(c.add(f),43).add(m(d,30)).add(h),c.add(m(f.add(r),18)).add(d),n)}function w(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.length,n=i.fromNumber(81,!0);if(t<=32)return t<=16?y(e,t):b(e,t);if(t<=64)return x(e,t);var r=n,a=n.mul(c).add(113),o=f(a.mul(l).add(113)).mul(l),s=[i.UZERO,i.UZERO],d=[i.UZERO,i.UZERO];r=r.mul(l).add(p(e,0));var h=0,w=64*(t-1>>6),k=w+(t-1&63)-63;do{r=m(r.add(a).add(s[0]).add(p(e,h+8)),37).mul(c),a=m(a.add(s[1]).add(p(e,h+48)),42).mul(c),r=r.xor(d[1]),a=a.add(s[0]).add(p(e,h+40)),o=m(o.add(d[0]),33).mul(c),s=g(e,h,s[1].mul(c),r.add(d[0])),d=g(e,h+32,o.add(d[1]),a.add(p(e,h+16)));var S=[r,o];o=S[0],r=S[1],h+=64}while(h!==w);var _=c.add(o.and(255).shl(1));h=k,d[0]=d[0].add(t-1&63),s[0]=s[0].add(d[0]),d[0]=d[0].add(s[0]),r=m(r.add(a).add(s[0]).add(p(e,h+8)),37).mul(_),a=m(a.add(s[1]).add(p(e,h+48)),42).mul(_),r=r.xor(d[1].mul(9)),a=a.add(s[0].mul(9).add(p(e,h+40))),o=m(o.add(d[0]),33).mul(_),s=g(e,h,s[1].mul(_),r.add(d[0])),d=g(e,h+32,o.add(d[1]),a.add(p(e,h+16)));var N=[r,o];return o=N[0],r=N[1],v(v(s[0],d[0],_).add(f(a).mul(u)).add(o),v(s[1],d[1],_).add(r),_)}function k(e,t){return"string"===t?E(e):S([e],t)}function S(e,t){if("string"===t)throw new Error("Cannot convert a string[] to a TypedArray");if(Array.isArray(e)&&(e=a.xH(e)),(0,r.OB)().getBool("DEBUG")&&a.D5(e,t),function(e,t){return e instanceof Float32Array&&"float32"===t||e instanceof Int32Array&&"int32"===t||e instanceof Uint8Array&&"bool"===t}(e,t))return e;if(null==t||"float32"===t||"complex64"===t)return new Float32Array(e);if("int32"===t)return new Int32Array(e);if("bool"===t){for(var n=new Uint8Array(e.length),o=0;o<n.length;++o)0!==Math.round(e[o])&&(n[o]=1);return n}throw new Error("Unknown data type ".concat(t))}function _(){return(0,r.OB)().platform.now()}function N(e,t){return(0,r.OB)().platform.fetch(e,t)}function E(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"utf-8";return t=t||"utf-8",(0,r.OB)().platform.encode(e,t)}function C(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"utf-8";return t=t||"utf-8",(0,r.OB)().platform.decode(e,t)}},6147:function(e,t,n){"use strict";function r(e){for(var t=e.length,n=0;t>0;)n=Math.random()*t|0,s(e,--t,n)}function a(e,t){if(e.length!==t.length)throw new Error("Array sizes must match to be shuffled together "+"First array length was ".concat(e.length)+"Second array length was ".concat(t.length));for(var n=e.length,r=0;n>0;)r=Math.random()*n|0,s(e,--n,r),s(t,n,r)}function o(e,t,n){return Math.max(e,Math.min(t,n))}function i(e){return e%2===0?e:e+1}function s(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function u(e){for(var t=0,n=0;n<e.length;n++)t+=e[n];return t}function c(e,t){var n=Math.random();return t*n+(1-n)*e}function l(e,t){for(var n=0,r=0;r<e.length;r++){var a=Number(e[r])-Number(t[r]);n+=a*a}return n}function f(e,t){if(!e)throw new Error("string"===typeof t?t:t())}function d(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";f(g(e,t),(function(){return n+" Shapes ".concat(e," and ").concat(t," must match")}))}function p(e){f(null!=e,(function(){return"The input to the tensor constructor must be a non-null value."}))}function h(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(null==t&&(t=[]),Array.isArray(e)||D(e)&&!n)for(var r=0;r<e.length;++r)h(e[r],t,n);else t.push(e);return t}function m(e){if(0===e.length)return 1;for(var t=e[0],n=1;n<e.length;n++)t*=e[n];return t}function v(e){return 0===e.length}function g(e,t){if(e===t)return!0;if(null==e||null==t)return!1;if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function y(e){return e%1===0}function b(e){if(null!=Math.tanh)return Math.tanh(e);if(e===1/0)return 1;if(e===-1/0)return-1;var t=Math.exp(2*e);return(t-1)/(t+1)}function x(e){var t=Math.ceil(Math.sqrt(e));return[t,Math.ceil(e/t)]}function w(e){for(var t=new Uint32Array(e),n=0;n<e;++n)t[n]=n;return r(t),t}function k(e,t){return t<=e.length?e:e+" ".repeat(t-e.length)}function S(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(e){return 0},n=arguments.length>2?arguments[2]:void 0;return new Promise((function(r,a){var o=0;!function i(){if(e())r();else{o++;var s=t(o);null!=n&&o>=n?a():setTimeout(i,s)}}()}))}function _(e,t){for(var n=1,r=-1,a=0;a<e.length;++a)if(e[a]>=0)n*=e[a];else if(-1===e[a]){if(-1!==r)throw Error("Shapes can only have 1 implicit size. "+"Found -1 at dim ".concat(r," and dim ").concat(a));r=a}else if(e[a]<0)throw Error("Shapes can not be < 0. Found ".concat(e[a]," at dim ").concat(a));if(-1===r){if(t>0&&t!==n)throw Error("Size(".concat(t,") must match the product of shape ").concat(e));return e}if(0===n)throw Error("Cannot infer the missing size in [".concat(e,"] when ")+"there are 0 elements");if(t%n!==0)throw Error("The implicit shape can't be a fractional number. "+"Got ".concat(t," / ").concat(n));var o=e.slice();return o[r]=t/n,o}function N(e,t){var n=t.length;return f((e=null==e?t.map((function(e,t){return t})):[].concat(e)).every((function(e){return e>=-n&&e<n})),(function(){return"All values in axis param must be in range [-".concat(n,", ").concat(n,") but ")+"got axis ".concat(e)})),f(e.every((function(e){return y(e)})),(function(){return"All values in axis param must be integers but "+"got axis ".concat(e)})),e.map((function(e){return e<0?n+e:e}))}function E(e,t){for(var n=[],r=[],a=null!=t&&Array.isArray(t)&&0===t.length,o=null==t||a?null:N(t,e).sort(),i=0,s=0;s<e.length;++s){if(null!=o){if(o[i]===s&&1!==e[s])throw new Error("Can't squeeze axis ".concat(s," since its dim '").concat(e[s],"' is not 1"));(null==o[i]||o[i]>s)&&1===e[s]&&(n.push(e[s]),r.push(s)),o[i]<=s&&i++}1!==e[s]&&(n.push(e[s]),r.push(s))}return{newShape:n,keptDims:r}}function C(e,t){var n=null;if(null==e||"float32"===e)n=new Float32Array(t);else if("int32"===e)n=new Int32Array(t);else{if("bool"!==e)throw new Error("Unknown data type ".concat(e));n=new Uint8Array(t)}return n}function T(e,t){var n=null;if(null==e||"float32"===e)n=new Float32Array(t);else if("int32"===e)n=new Int32Array(t);else if("bool"===e)n=new Uint8Array(t);else{if("string"!==e)throw new Error("Unknown data type ".concat(e));n=new Array(t)}return n}function I(e,t){for(var n=0;n<e.length;n++){var r=e[n];if(isNaN(r)||!isFinite(r))throw Error("A tensor of type ".concat(t," being uploaded contains ").concat(r,"."))}}function O(e){return"bool"===e||"complex64"===e||"float32"===e||"int32"===e||"string"===e}function A(e,t){return"complex64"!==t&&(("float32"!==t||"complex64"===e)&&(("int32"!==t||"float32"===e||"complex64"===e)&&("bool"!==t||"bool"!==e)))}function D(e){return e instanceof Float32Array||e instanceof Int32Array||e instanceof Uint8Array||e instanceof Uint8ClampedArray}function M(e){if("float32"===e||"int32"===e)return 4;if("complex64"===e)return 8;if("bool"===e)return 1;throw new Error("Unknown dtype ".concat(e))}function R(e){if(null==e)return 0;var t=0;return e.forEach((function(e){return t+=e.length})),t}function P(e){return"string"===typeof e||e instanceof String}function j(e){return"boolean"===typeof e}function F(e){return"number"===typeof e}function L(e){return Array.isArray(e)?L(e[0]):e instanceof Float32Array?"float32":e instanceof Int32Array||e instanceof Uint8Array||e instanceof Uint8ClampedArray?"int32":F(e)?"float32":P(e)?"string":j(e)?"bool":"float32"}function B(e){return!!(e&&e.constructor&&e.call&&e.apply)}function z(e,t){for(var n=t;n<e;++n)if(e%n===0)return n;return e}function Z(e){var t=e.length;if(t<2)return[];var n=new Array(t-1);n[t-2]=e[t-1];for(var r=t-3;r>=0;--r)n[r]=n[r+1]*e[r+1];return n}function V(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=new Array;if(1===t.length)for(var o=t[0]*(r?2:1),i=0;i<o;i++)a[i]=n[e+i];else for(var s=t[0],u=t.slice(1),c=u.reduce((function(e,t){return e*t}))*(r?2:1),l=0;l<s;l++)a[l]=V(e+l*c,u,n,r);return a}function U(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(0===e.length)return t[0];var r=e.reduce((function(e,t){return e*t}))*(n?2:1);if(0===r)return[];if(r!==t.length)throw new Error("[".concat(e,"] does not match the input size ").concat(t.length).concat(n?" for a complex tensor":"","."));return V(0,e,t,n)}function q(e,t){for(var n=W(e,t),r=0;r<n.length;r++)n[r]=1;return n}function W(e,t){if(null==t||"float32"===t||"complex64"===t)return new Float32Array(e);if("int32"===t)return new Int32Array(e);if("bool"===t)return new Uint8Array(e);throw new Error("Unknown data type ".concat(t))}function H(e,t){var n=e.reduce((function(e,t){return e*t}),1);if(null==t||"float32"===t)return U(e,new Float32Array(n));if("int32"===t)return U(e,new Int32Array(n));if("bool"===t)return U(e,new Uint8Array(n));throw new Error("Unknown data type ".concat(t))}function G(e){e.forEach((function(t){f(Number.isInteger(t)&&t>=0,(function(){return"Tensor must have a shape comprised of positive integers but got "+"shape [".concat(e,"].")}))}))}function K(e,t,n){if(0===t)return 0;if(1===t)return e[0];for(var r=e[e.length-1],a=0;a<e.length-1;++a)r+=n[a]*e[a];return r}function X(e,t,n){if(0===t)return[];if(1===t)return[e];for(var r=new Array(t),a=0;a<r.length-1;++a)r[a]=Math.floor(e/n[a]),e-=r[a]*n[a];return r[r.length-1]=e,r}function Y(e){return e&&e.then&&"function"===typeof e.then}n.d(t,{TV:function(){return r},d7:function(){return a},uZ:function(){return o},nY:function(){return i},LF:function(){return s},Sm:function(){return u},bj:function(){return c},E7:function(){return l},hu:function(){return f},k5:function(){return d},Cq:function(){return p},xH:function(){return h},NA:function(){return m},N9:function(){return v},cO:function(){return g},GN:function(){return y},AE:function(){return b},YP:function(){return x},U$:function(){return w},oj:function(){return k},WD:function(){return S},JZ:function(){return _},EC:function(){return N},bp:function(){return E},WP:function(){return C},rQ:function(){return T},D5:function(){return I},LP:function(){return O},QB:function(){return A},fU:function(){return D},bT:function(){return M},Ub:function(){return R},HD:function(){return P},jn:function(){return j},hj:function(){return F},D2:function(){return L},mf:function(){return B},jP:function(){return z},e3:function(){return Z},GX:function(){return U},p8:function(){return q},wT:function(){return W},l6:function(){return H},Mu:function(){return G},qy:function(){return K},NE:function(){return X},tI:function(){return Y}})},4150:function(e,t,n){"use strict";var r=n(1725),a={};function o(e,t,n,r,a,o,i,s){if(!e){var u;if(void 0===t)u=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var c=[n,r,a,o,i,s],l=0;(u=new Error(t.replace(/%s/g,(function(){return c[l++]})))).name="Invariant Violation"}throw u.framesToPop=1,u}}var i="mixins";e.exports=function(e,t,n){var s=[],u={mixins:"DEFINE_MANY",statics:"DEFINE_MANY",propTypes:"DEFINE_MANY",contextTypes:"DEFINE_MANY",childContextTypes:"DEFINE_MANY",getDefaultProps:"DEFINE_MANY_MERGED",getInitialState:"DEFINE_MANY_MERGED",getChildContext:"DEFINE_MANY_MERGED",render:"DEFINE_ONCE",componentWillMount:"DEFINE_MANY",componentDidMount:"DEFINE_MANY",componentWillReceiveProps:"DEFINE_MANY",shouldComponentUpdate:"DEFINE_ONCE",componentWillUpdate:"DEFINE_MANY",componentDidUpdate:"DEFINE_MANY",componentWillUnmount:"DEFINE_MANY",UNSAFE_componentWillMount:"DEFINE_MANY",UNSAFE_componentWillReceiveProps:"DEFINE_MANY",UNSAFE_componentWillUpdate:"DEFINE_MANY",updateComponent:"OVERRIDE_BASE"},c={getDerivedStateFromProps:"DEFINE_MANY_MERGED"},l={displayName:function(e,t){e.displayName=t},mixins:function(e,t){if(t)for(var n=0;n<t.length;n++)d(e,t[n])},childContextTypes:function(e,t){e.childContextTypes=r({},e.childContextTypes,t)},contextTypes:function(e,t){e.contextTypes=r({},e.contextTypes,t)},getDefaultProps:function(e,t){e.getDefaultProps?e.getDefaultProps=h(e.getDefaultProps,t):e.getDefaultProps=t},propTypes:function(e,t){e.propTypes=r({},e.propTypes,t)},statics:function(e,t){!function(e,t){if(!t)return;for(var n in t){var r=t[n];if(t.hasOwnProperty(n)){if(o(!(n in l),'ReactClass: You are attempting to define a reserved property, `%s`, that shouldn\'t be on the "statics" key. Define it as an instance property instead; it will still be accessible on the constructor.',n),n in e)return o("DEFINE_MANY_MERGED"===(c.hasOwnProperty(n)?c[n]:null),"ReactClass: You are attempting to define `%s` on your component more than once. This conflict may be due to a mixin.",n),void(e[n]=h(e[n],r));e[n]=r}}}(e,t)},autobind:function(){}};function f(e,t){var n=u.hasOwnProperty(t)?u[t]:null;b.hasOwnProperty(t)&&o("OVERRIDE_BASE"===n,"ReactClassInterface: You are attempting to override `%s` from your class specification. Ensure that your method names do not overlap with React methods.",t),e&&o("DEFINE_MANY"===n||"DEFINE_MANY_MERGED"===n,"ReactClassInterface: You are attempting to define `%s` on your component more than once. This conflict may be due to a mixin.",t)}function d(e,n){if(n){o("function"!==typeof n,"ReactClass: You're attempting to use a component class or function as a mixin. Instead, just use a regular object."),o(!t(n),"ReactClass: You're attempting to use a component as a mixin. Instead, just use a regular object.");var r=e.prototype,a=r.__reactAutoBindPairs;for(var s in n.hasOwnProperty(i)&&l.mixins(e,n.mixins),n)if(n.hasOwnProperty(s)&&s!==i){var c=n[s],d=r.hasOwnProperty(s);if(f(d,s),l.hasOwnProperty(s))l[s](e,c);else{var p=u.hasOwnProperty(s);if("function"===typeof c&&!p&&!d&&!1!==n.autobind)a.push(s,c),r[s]=c;else if(d){var v=u[s];o(p&&("DEFINE_MANY_MERGED"===v||"DEFINE_MANY"===v),"ReactClass: Unexpected spec policy %s for key %s when mixing in component specs.",v,s),"DEFINE_MANY_MERGED"===v?r[s]=h(r[s],c):"DEFINE_MANY"===v&&(r[s]=m(r[s],c))}else r[s]=c}}}else;}function p(e,t){for(var n in o(e&&t&&"object"===typeof e&&"object"===typeof t,"mergeIntoWithNoDuplicateKeys(): Cannot merge non-objects."),t)t.hasOwnProperty(n)&&(o(void 0===e[n],"mergeIntoWithNoDuplicateKeys(): Tried to merge two objects with the same key: `%s`. This conflict may be due to a mixin; in particular, this may be caused by two getInitialState() or getDefaultProps() methods returning objects with clashing keys.",n),e[n]=t[n]);return e}function h(e,t){return function(){var n=e.apply(this,arguments),r=t.apply(this,arguments);if(null==n)return r;if(null==r)return n;var a={};return p(a,n),p(a,r),a}}function m(e,t){return function(){e.apply(this,arguments),t.apply(this,arguments)}}function v(e,t){return t.bind(e)}var g={componentDidMount:function(){this.__isMounted=!0}},y={componentWillUnmount:function(){this.__isMounted=!1}},b={replaceState:function(e,t){this.updater.enqueueReplaceState(this,e,t)},isMounted:function(){return!!this.__isMounted}},x=function(){};return r(x.prototype,e.prototype,b),function(e){var t=function(e,r,i){this.__reactAutoBindPairs.length&&function(e){for(var t=e.__reactAutoBindPairs,n=0;n<t.length;n+=2){var r=t[n],a=t[n+1];e[r]=v(e,a)}}(this),this.props=e,this.context=r,this.refs=a,this.updater=i||n,this.state=null;var s=this.getInitialState?this.getInitialState():null;o("object"===typeof s&&!Array.isArray(s),"%s.getInitialState(): must return an object or null",t.displayName||"ReactCompositeComponent"),this.state=s};for(var r in t.prototype=new x,t.prototype.constructor=t,t.prototype.__reactAutoBindPairs=[],s.forEach(d.bind(null,t)),d(t,g),d(t,e),d(t,y),t.getDefaultProps&&(t.defaultProps=t.getDefaultProps()),o(t.prototype.render,"createClass(...): Class specification must implement a `render` method."),u)t.prototype[r]||(t.prototype[r]=null);return t}}},2157:function(e,t,n){"use strict";var r=n(2791),a=n(4150);if("undefined"===typeof r)throw Error("create-react-class could not find the React object. If you are using script tags, make sure that React is being loaded before create-react-class.");var o=(new r.Component).updater;e.exports=a(r.Component,r.isValidElement,o)},3517:function(e,t){(function(){var n=[",",";","\t"],r={",":"comma",";":"semicolon","\t":"tab"};function a(){var e=[].slice.call(arguments),t=e.reduce((function(e,t){return e.length>t.length?e:t}),[]);return t.map((function(t,n){return e.map((function(e){return e[n]}))}))}function o(e,t){if(t||(t={}),0==e.length)throw"Empty CSV. Please provide something.";var o=t.separator||function(e){var t,r={};return n.forEach((function(n,a){var o=new RegExp(n,"g");r[n]=(e.match(o)||[]).length,t=!t||r[n]>r[t]?n:t})),t}(e);if(!o)throw"We could not detect the separator.";var s=[];try{s=i.parse(e,r[o])}catch(b){var u=e.lastIndexOf("\n",b.offset),c=e.indexOf("\n",b.offset),l=e.substring(u>=-1?u:0,c>-1?c:e.length);throw b.message+" On line "+b.line+" and column "+b.column+".\n"+l}t.transpose&&(s=a.apply(this,s));var f=s.shift();if(0==f.length)throw"Could not detect header. Ensure first row cotains your column headers.";f=function(e){for(var t={},n=0;n<e.length;n++)void 0===t[a=e[n]]?t[a]=0:t[a]++;var r=[];for(n=e.length-1;n>=0;n--){var a;t[a=e[n]]>0&&(a=a+"__"+t[a]--),r.unshift(a)}return r}(f=f.map((function(e){return e.trim().replace(/(^")|("$)/g,"")})));for(var d=t.hash?{}:[],p=0;p<s.length;p++){for(var h,m={},v=0;v<f.length;v++){var g=(s[p][v]||"").trim().replace(/(^")|("$)/g,""),y=""===g?NaN:g-0;if(t.hash&&0==v)h=g;else if(t.parseJSON||t.parseNumbers&&!isNaN(y))try{m[f[v]]=JSON.parse(g)}catch(b){m[f[v]]=g}else m[f[v]]=g}t.hash?d[h]=m:d.push(m)}return d}var i=function(){function e(e){return'"'+e.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\x08/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/[\x00-\x07\x0B\x0E-\x1F\x80-\uFFFF]/g,escape)+'"'}var t={parse:function(t,n){var r={comma:function(){var e,t,n,r;n=a,r=a,null!==(e=function(e){return d=","}()?"":null)&&null!==(t=u())?e=[e,t]:(e=null,a=r);null!==e&&(o=e[1],e=o);var o;null===e&&(a=n);return e},semicolon:function(){var e,t,n,r;n=a,r=a,null!==(e=function(e){return d=";"}()?"":null)&&null!==(t=u())?e=[e,t]:(e=null,a=r);null!==e&&(o=e[1],e=o);var o;null===e&&(a=n);return e},tab:function(){var e,t,n,r;n=a,r=a,null!==(e=function(e){return d="\t"}()?"":null)&&null!==(t=u())?e=[e,t]:(e=null,a=r);null!==e&&(o=e[1],e=o);var o;null===e&&(a=n);return e},sv:u,line:c,field:l,char:f};if(void 0!==n){if(void 0===r[n])throw new Error("Invalid rule name: "+e(n)+".")}else n="comma";var a=0,o=0,i=[];function s(e){a<o||(a>o&&(o=a,i=[]),i.push(e))}function u(){var e,n,r,o,i,u,l,f,d,p,h;for(u=a,l=a,e=[],/^[\n\r]/.test(t.charAt(a))?(n=t.charAt(a),a++):(n=null,s("[\\n\\r]"));null!==n;)e.push(n),/^[\n\r]/.test(t.charAt(a))?(n=t.charAt(a),a++):(n=null,s("[\\n\\r]"));if(null!==e)if(null!==(n=c())){if(r=[],f=a,d=a,/^[\n\r]/.test(t.charAt(a))?(i=t.charAt(a),a++):(i=null,s("[\\n\\r]")),null!==i)for(o=[];null!==i;)o.push(i),/^[\n\r]/.test(t.charAt(a))?(i=t.charAt(a),a++):(i=null,s("[\\n\\r]"));else o=null;for(null!==o&&null!==(i=c())?o=[o,i]:(o=null,a=d),null!==o&&(o=o[1]),null===o&&(a=f);null!==o;){if(r.push(o),f=a,d=a,/^[\n\r]/.test(t.charAt(a))?(i=t.charAt(a),a++):(i=null,s("[\\n\\r]")),null!==i)for(o=[];null!==i;)o.push(i),/^[\n\r]/.test(t.charAt(a))?(i=t.charAt(a),a++):(i=null,s("[\\n\\r]"));else o=null;null!==o&&null!==(i=c())?o=[o,i]:(o=null,a=d),null!==o&&(o=function(e,t){return t}(0,o[1])),null===o&&(a=f)}if(null!==r){for(o=[],/^[\n\r]/.test(t.charAt(a))?(i=t.charAt(a),a++):(i=null,s("[\\n\\r]"));null!==i;)o.push(i),/^[\n\r]/.test(t.charAt(a))?(i=t.charAt(a),a++):(i=null,s("[\\n\\r]"));null!==o?e=[e,n,r,o]:(e=null,a=l)}else e=null,a=l}else e=null,a=l;else e=null,a=l;return null!==e&&(p=e[1],(h=e[2]).unshift(p),e=h),null===e&&(a=u),e}function c(){var e,n,r,o,i,u,c,f,p,h;if(u=a,c=a,null!==(e=l())){for(n=[],f=a,p=a,t.length>a?(r=t.charAt(a),a++):(r=null,s("any character")),null!==r&&null!==(o=r==d?"":null)&&null!==(i=l())?r=[r,o,i]:(r=null,a=p),null!==r&&(r[0],r=r[2]),null===r&&(a=f);null!==r;)n.push(r),f=a,p=a,t.length>a?(r=t.charAt(a),a++):(r=null,s("any character")),null!==r?(o=function(e,t){return t==d}(0,r)?"":null,null!==o&&null!==(i=l())?r=[r,o,i]:(r=null,a=p)):(r=null,a=p),null!==r&&(r=function(e,t,n){return n}(0,r[0],r[2])),null===r&&(a=f);null!==n?(h=n,null!==(r=e||h.length?"":null)?e=[e,n,r]:(e=null,a=c)):(e=null,a=c)}else e=null,a=c;return null!==e&&(e=function(e,t,n){return n.unshift(t),n}(0,e[0],e[1])),null===e&&(a=u),e}function l(){var e,n,r,o,i,u;if(o=a,i=a,34===t.charCodeAt(a)?(e='"',a++):(e=null,s('"\\""')),null!==e){for(n=[],r=f();null!==r;)n.push(r),r=f();null!==n?(34===t.charCodeAt(a)?(r='"',a++):(r=null,s('"\\""')),null!==r?e=[e,n,r]:(e=null,a=i)):(e=null,a=i)}else e=null,a=i;if(null!==e&&(e=e[1].join("")),null===e&&(a=o),null===e){for(o=a,e=[],i=a,u=a,/^[^\n\r]/.test(t.charAt(a))?(n=t.charAt(a),a++):(n=null,s("[^\\n\\r]")),null!==n&&null!==(r=n!=d?"":null)?n=[n,r]:(n=null,a=u),null!==n&&(n=function(e,t){return t}(0,n[0])),null===n&&(a=i);null!==n;)e.push(n),i=a,u=a,/^[^\n\r]/.test(t.charAt(a))?(n=t.charAt(a),a++):(n=null,s("[^\\n\\r]")),null!==n?(r=function(e,t){return t!=d}(0,n)?"":null,null!==r?n=[n,r]:(n=null,a=u)):(n=null,a=u),null!==n&&(n=function(e,t){return t}(0,n[0])),null===n&&(a=i);null!==e&&(e=function(e,t){return t.join("")}(0,e)),null===e&&(a=o)}return e}function f(){var e,n,r,o;return r=a,o=a,34===t.charCodeAt(a)?(e='"',a++):(e=null,s('"\\""')),null!==e?(34===t.charCodeAt(a)?(n='"',a++):(n=null,s('"\\""')),null!==n?e=[e,n]:(e=null,a=o)):(e=null,a=o),null!==e&&(e='"'),null===e&&(a=r),null===e&&(/^[^"]/.test(t.charAt(a))?(e=t.charAt(a),a++):(e=null,s('[^"]'))),e}var d=",",p=r[n]();if(null===p||a!==t.length){var h=Math.max(a,o),m=h<t.length?t.charAt(h):null,v=function(){for(var e=1,n=1,r=!1,i=0;i<Math.max(a,o);i++){var s=t.charAt(i);"\n"===s?(r||e++,n=1,r=!1):"\r"===s||"\u2028"===s||"\u2029"===s?(e++,n=1,r=!0):(n++,r=!1)}return{line:e,column:n}}();throw new this.SyntaxError(function(e){e.sort();for(var t=null,n=[],r=0;r<e.length;r++)e[r]!==t&&(n.push(e[r]),t=e[r]);return n}(i),m,h,v.line,v.column)}return p},toSource:function(){return this._source},SyntaxError:function(t,n,r,a,o){this.name="SyntaxError",this.expected=t,this.found=n,this.message=function(t,n){var r;switch(t.length){case 0:r="end of input";break;case 1:r=t[0];break;default:r=t.slice(0,t.length-1).join(", ")+" or "+t[t.length-1]}return"Expected "+r+" but "+(n?e(n):"end of input")+" found."}(t,n),this.offset=r,this.line=a,this.column=o}};return t.SyntaxError.prototype=Error.prototype,t}();e.exports&&(t=e.exports=o),t.csv2json=o}).call(this)},8262:function(e){"use strict";e.exports=function e(t,n){if(t===n)return!0;if(t&&n&&"object"==typeof t&&"object"==typeof n){if(t.constructor!==n.constructor)return!1;var r,a,o;if(Array.isArray(t)){if((r=t.length)!=n.length)return!1;for(a=r;0!==a--;)if(!e(t[a],n[a]))return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();if((r=(o=Object.keys(t)).length)!==Object.keys(n).length)return!1;for(a=r;0!==a--;)if(!Object.prototype.hasOwnProperty.call(n,o[a]))return!1;for(a=r;0!==a--;){var i=o[a];if(!e(t[i],n[i]))return!1}return!0}return t!==t&&n!==n}},4802:function(e,t,n){var r,a,o;a=[],r=function(){"use strict";function t(e,t){return"undefined"==typeof t?t={autoBom:!1}:"object"!=typeof t&&(console.warn("Deprecated: Expected third argument to be a object"),t={autoBom:!t}),t.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)?new Blob(["\ufeff",e],{type:e.type}):e}function r(e,t,n){var r=new XMLHttpRequest;r.open("GET",e),r.responseType="blob",r.onload=function(){u(r.response,t,n)},r.onerror=function(){console.error("could not download file")},r.send()}function a(e){var t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch(e){}return 200<=t.status&&299>=t.status}function o(e){try{e.dispatchEvent(new MouseEvent("click"))}catch(r){var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(t)}}var i="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof n.g&&n.g.global===n.g?n.g:void 0,s=i.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),u=i.saveAs||("object"!=typeof window||window!==i?function(){}:"download"in HTMLAnchorElement.prototype&&!s?function(e,t,n){var s=i.URL||i.webkitURL,u=document.createElement("a");t=t||e.name||"download",u.download=t,u.rel="noopener","string"==typeof e?(u.href=e,u.origin===location.origin?o(u):a(u.href)?r(e,t,n):o(u,u.target="_blank")):(u.href=s.createObjectURL(e),setTimeout((function(){s.revokeObjectURL(u.href)}),4e4),setTimeout((function(){o(u)}),0))}:"msSaveOrOpenBlob"in navigator?function(e,n,i){if(n=n||e.name||"download","string"!=typeof e)navigator.msSaveOrOpenBlob(t(e,i),n);else if(a(e))r(e,n,i);else{var s=document.createElement("a");s.href=e,s.target="_blank",setTimeout((function(){o(s)}))}}:function(e,t,n,a){if((a=a||open("","_blank"))&&(a.document.title=a.document.body.innerText="downloading..."),"string"==typeof e)return r(e,t,n);var o="application/octet-stream"===e.type,u=/constructor/i.test(i.HTMLElement)||i.safari,c=/CriOS\/[\d]+/.test(navigator.userAgent);if((c||o&&u||s)&&"undefined"!=typeof FileReader){var l=new FileReader;l.onloadend=function(){var e=l.result;e=c?e:e.replace(/^data:[^;]*;/,"data:attachment/file;"),a?a.location.href=e:location=e,a=null},l.readAsDataURL(e)}else{var f=i.URL||i.webkitURL,d=f.createObjectURL(e);a?a.location=d:location.href=d,a=null,setTimeout((function(){f.revokeObjectURL(d)}),4e4)}});i.saveAs=u.saveAs=u,e.exports=u},void 0===(o="function"===typeof r?r.apply(t,a):r)||(e.exports=o)},2110:function(e,t,n){"use strict";var r=n(7441),a={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},o={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},i={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},s={};function u(e){return r.isMemo(e)?i:s[e.$$typeof]||a}s[r.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},s[r.Memo]=i;var c=Object.defineProperty,l=Object.getOwnPropertyNames,f=Object.getOwnPropertySymbols,d=Object.getOwnPropertyDescriptor,p=Object.getPrototypeOf,h=Object.prototype;e.exports=function e(t,n,r){if("string"!==typeof n){if(h){var a=p(n);a&&a!==h&&e(t,a,r)}var i=l(n);f&&(i=i.concat(f(n)));for(var s=u(t),m=u(n),v=0;v<i.length;++v){var g=i[v];if(!o[g]&&(!r||!r[g])&&(!m||!m[g])&&(!s||!s[g])){var y=d(n,g);try{c(t,g,y)}catch(b){}}}}return t}},908:function(e,t,n){var r=n(8136)(n(7009),"DataView");e.exports=r},9676:function(e,t,n){var r=n(5403),a=n(2747),o=n(6037),i=n(4154),s=n(7728);function u(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}u.prototype.clear=r,u.prototype.delete=a,u.prototype.get=o,u.prototype.has=i,u.prototype.set=s,e.exports=u},8384:function(e,t,n){var r=n(3894),a=n(8699),o=n(4957),i=n(7184),s=n(7109);function u(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}u.prototype.clear=r,u.prototype.delete=a,u.prototype.get=o,u.prototype.has=i,u.prototype.set=s,e.exports=u},5797:function(e,t,n){var r=n(8136)(n(7009),"Map");e.exports=r},8059:function(e,t,n){var r=n(4086),a=n(9255),o=n(9186),i=n(3423),s=n(3739);function u(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}u.prototype.clear=r,u.prototype.delete=a,u.prototype.get=o,u.prototype.has=i,u.prototype.set=s,e.exports=u},8319:function(e,t,n){var r=n(8136)(n(7009),"Promise");e.exports=r},3924:function(e,t,n){var r=n(8136)(n(7009),"Set");e.exports=r},692:function(e,t,n){var r=n(8059),a=n(5774),o=n(1596);function i(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new r;++t<n;)this.add(e[t])}i.prototype.add=i.prototype.push=a,i.prototype.has=o,e.exports=i},2854:function(e,t,n){var r=n(8384),a=n(511),o=n(835),i=n(707),s=n(8832),u=n(5077);function c(e){var t=this.__data__=new r(e);this.size=t.size}c.prototype.clear=a,c.prototype.delete=o,c.prototype.get=i,c.prototype.has=s,c.prototype.set=u,e.exports=c},7197:function(e,t,n){var r=n(7009).Symbol;e.exports=r},6219:function(e,t,n){var r=n(7009).Uint8Array;e.exports=r},7091:function(e,t,n){var r=n(8136)(n(7009),"WeakMap");e.exports=r},3665:function(e){e.exports=function(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}},4550:function(e){e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r&&!1!==t(e[n],n,e););return e}},7060:function(e){e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length,a=0,o=[];++n<r;){var i=e[n];t(i,n,e)&&(o[a++]=i)}return o}},7538:function(e,t,n){var r=n(6478),a=n(4963),o=n(3629),i=n(5174),s=n(6800),u=n(9102),c=Object.prototype.hasOwnProperty;e.exports=function(e,t){var n=o(e),l=!n&&a(e),f=!n&&!l&&i(e),d=!n&&!l&&!f&&u(e),p=n||l||f||d,h=p?r(e.length,String):[],m=h.length;for(var v in e)!t&&!c.call(e,v)||p&&("length"==v||f&&("offset"==v||"parent"==v)||d&&("buffer"==v||"byteLength"==v||"byteOffset"==v)||s(v,m))||h.push(v);return h}},8950:function(e){e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length,a=Array(r);++n<r;)a[n]=t(e[n],n,e);return a}},1705:function(e){e.exports=function(e,t){for(var n=-1,r=t.length,a=e.length;++n<r;)e[a+n]=t[n];return e}},7897:function(e){e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}},8463:function(e,t,n){var r=n(2526),a=n(9231),o=Object.prototype.hasOwnProperty;e.exports=function(e,t,n){var i=e[t];o.call(e,t)&&a(i,n)&&(void 0!==n||t in e)||r(e,t,n)}},7112:function(e,t,n){var r=n(9231);e.exports=function(e,t){for(var n=e.length;n--;)if(r(e[n][0],t))return n;return-1}},1855:function(e,t,n){var r=n(4503),a=n(2742);e.exports=function(e,t){return e&&r(t,a(t),e)}},5076:function(e,t,n){var r=n(4503),a=n(3961);e.exports=function(e,t){return e&&r(t,a(t),e)}},2526:function(e,t,n){var r=n(8528);e.exports=function(e,t,n){"__proto__"==t&&r?r(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}},1905:function(e,t,n){var r=n(2854),a=n(4550),o=n(8463),i=n(1855),s=n(5076),u=n(4523),c=n(291),l=n(2455),f=n(7636),d=n(8248),p=n(5341),h=n(8383),m=n(9243),v=n(9759),g=n(548),y=n(3629),b=n(5174),x=n(103),w=n(8092),k=n(6995),S=n(2742),_=n(3961),N="[object Arguments]",E="[object Function]",C="[object Object]",T={};T[N]=T["[object Array]"]=T["[object ArrayBuffer]"]=T["[object DataView]"]=T["[object Boolean]"]=T["[object Date]"]=T["[object Float32Array]"]=T["[object Float64Array]"]=T["[object Int8Array]"]=T["[object Int16Array]"]=T["[object Int32Array]"]=T["[object Map]"]=T["[object Number]"]=T[C]=T["[object RegExp]"]=T["[object Set]"]=T["[object String]"]=T["[object Symbol]"]=T["[object Uint8Array]"]=T["[object Uint8ClampedArray]"]=T["[object Uint16Array]"]=T["[object Uint32Array]"]=!0,T["[object Error]"]=T[E]=T["[object WeakMap]"]=!1,e.exports=function e(t,n,I,O,A,D){var M,R=1&n,P=2&n,j=4&n;if(I&&(M=A?I(t,O,A,D):I(t)),void 0!==M)return M;if(!w(t))return t;var F=y(t);if(F){if(M=m(t),!R)return c(t,M)}else{var L=h(t),B=L==E||"[object GeneratorFunction]"==L;if(b(t))return u(t,R);if(L==C||L==N||B&&!A){if(M=P||B?{}:g(t),!R)return P?f(t,s(M,t)):l(t,i(M,t))}else{if(!T[L])return A?t:{};M=v(t,L,R)}}D||(D=new r);var z=D.get(t);if(z)return z;D.set(t,M),k(t)?t.forEach((function(r){M.add(e(r,n,I,r,t,D))})):x(t)&&t.forEach((function(r,a){M.set(a,e(r,n,I,a,t,D))}));var Z=F?void 0:(j?P?p:d:P?_:S)(t);return a(Z||t,(function(r,a){Z&&(r=t[a=r]),o(M,a,e(r,n,I,a,t,D))})),M}},5763:function(e,t,n){var r=n(8092),a=Object.create,o=function(){function e(){}return function(t){if(!r(t))return{};if(a)return a(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}();e.exports=o},7927:function(e,t,n){var r=n(5358),a=n(7056)(r);e.exports=a},7523:function(e,t,n){var r=n(7927);e.exports=function(e,t){var n=[];return r(e,(function(e,r,a){t(e,r,a)&&n.push(e)})),n}},2045:function(e){e.exports=function(e,t,n,r){for(var a=e.length,o=n+(r?1:-1);r?o--:++o<a;)if(t(e[o],o,e))return o;return-1}},5099:function(e,t,n){var r=n(372)();e.exports=r},5358:function(e,t,n){var r=n(5099),a=n(2742);e.exports=function(e,t){return e&&r(e,t,a)}},8667:function(e,t,n){var r=n(3082),a=n(9793);e.exports=function(e,t){for(var n=0,o=(t=r(t,e)).length;null!=e&&n<o;)e=e[a(t[n++])];return n&&n==o?e:void 0}},1986:function(e,t,n){var r=n(1705),a=n(3629);e.exports=function(e,t,n){var o=t(e);return a(e)?o:r(o,n(e))}},9066:function(e,t,n){var r=n(7197),a=n(1587),o=n(3581),i=r?r.toStringTag:void 0;e.exports=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":i&&i in Object(e)?a(e):o(e)}},529:function(e){e.exports=function(e,t){return null!=e&&t in Object(e)}},4906:function(e,t,n){var r=n(9066),a=n(3141);e.exports=function(e){return a(e)&&"[object Arguments]"==r(e)}},1848:function(e,t,n){var r=n(3355),a=n(3141);e.exports=function e(t,n,o,i,s){return t===n||(null==t||null==n||!a(t)&&!a(n)?t!==t&&n!==n:r(t,n,o,i,e,s))}},3355:function(e,t,n){var r=n(2854),a=n(5305),o=n(2206),i=n(8078),s=n(8383),u=n(3629),c=n(5174),l=n(9102),f="[object Arguments]",d="[object Array]",p="[object Object]",h=Object.prototype.hasOwnProperty;e.exports=function(e,t,n,m,v,g){var y=u(e),b=u(t),x=y?d:s(e),w=b?d:s(t),k=(x=x==f?p:x)==p,S=(w=w==f?p:w)==p,_=x==w;if(_&&c(e)){if(!c(t))return!1;y=!0,k=!1}if(_&&!k)return g||(g=new r),y||l(e)?a(e,t,n,m,v,g):o(e,t,x,n,m,v,g);if(!(1&n)){var N=k&&h.call(e,"__wrapped__"),E=S&&h.call(t,"__wrapped__");if(N||E){var C=N?e.value():e,T=E?t.value():t;return g||(g=new r),v(C,T,n,m,g)}}return!!_&&(g||(g=new r),i(e,t,n,m,v,g))}},3085:function(e,t,n){var r=n(8383),a=n(3141);e.exports=function(e){return a(e)&&"[object Map]"==r(e)}},8856:function(e,t,n){var r=n(2854),a=n(1848);e.exports=function(e,t,n,o){var i=n.length,s=i,u=!o;if(null==e)return!s;for(e=Object(e);i--;){var c=n[i];if(u&&c[2]?c[1]!==e[c[0]]:!(c[0]in e))return!1}for(;++i<s;){var l=(c=n[i])[0],f=e[l],d=c[1];if(u&&c[2]){if(void 0===f&&!(l in e))return!1}else{var p=new r;if(o)var h=o(f,d,l,e,t,p);if(!(void 0===h?a(d,f,3,o,p):h))return!1}}return!0}},6703:function(e,t,n){var r=n(4786),a=n(257),o=n(8092),i=n(7907),s=/^\[object .+?Constructor\]$/,u=Function.prototype,c=Object.prototype,l=u.toString,f=c.hasOwnProperty,d=RegExp("^"+l.call(f).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");e.exports=function(e){return!(!o(e)||a(e))&&(r(e)?d:s).test(i(e))}},8680:function(e,t,n){var r=n(8383),a=n(3141);e.exports=function(e){return a(e)&&"[object Set]"==r(e)}},8150:function(e,t,n){var r=n(9066),a=n(4635),o=n(3141),i={};i["[object Float32Array]"]=i["[object Float64Array]"]=i["[object Int8Array]"]=i["[object Int16Array]"]=i["[object Int32Array]"]=i["[object Uint8Array]"]=i["[object Uint8ClampedArray]"]=i["[object Uint16Array]"]=i["[object Uint32Array]"]=!0,i["[object Arguments]"]=i["[object Array]"]=i["[object ArrayBuffer]"]=i["[object Boolean]"]=i["[object DataView]"]=i["[object Date]"]=i["[object Error]"]=i["[object Function]"]=i["[object Map]"]=i["[object Number]"]=i["[object Object]"]=i["[object RegExp]"]=i["[object Set]"]=i["[object String]"]=i["[object WeakMap]"]=!1,e.exports=function(e){return o(e)&&a(e.length)&&!!i[r(e)]}},6025:function(e,t,n){var r=n(7080),a=n(4322),o=n(2100),i=n(3629),s=n(38);e.exports=function(e){return"function"==typeof e?e:null==e?o:"object"==typeof e?i(e)?a(e[0],e[1]):r(e):s(e)}},3654:function(e,t,n){var r=n(2936),a=n(5964),o=Object.prototype.hasOwnProperty;e.exports=function(e){if(!r(e))return a(e);var t=[];for(var n in Object(e))o.call(e,n)&&"constructor"!=n&&t.push(n);return t}},8664:function(e,t,n){var r=n(8092),a=n(2936),o=n(4221),i=Object.prototype.hasOwnProperty;e.exports=function(e){if(!r(e))return o(e);var t=a(e),n=[];for(var s in e)("constructor"!=s||!t&&i.call(e,s))&&n.push(s);return n}},3849:function(e,t,n){var r=n(7927),a=n(1473);e.exports=function(e,t){var n=-1,o=a(e)?Array(e.length):[];return r(e,(function(e,r,a){o[++n]=t(e,r,a)})),o}},7080:function(e,t,n){var r=n(8856),a=n(9091),o=n(284);e.exports=function(e){var t=a(e);return 1==t.length&&t[0][2]?o(t[0][0],t[0][1]):function(n){return n===e||r(n,e,t)}}},4322:function(e,t,n){var r=n(1848),a=n(6181),o=n(5658),i=n(5823),s=n(5072),u=n(284),c=n(9793);e.exports=function(e,t){return i(e)&&s(t)?u(c(e),t):function(n){var i=a(n,e);return void 0===i&&i===t?o(n,e):r(t,i,3)}}},9586:function(e){e.exports=function(e){return function(t){return null==t?void 0:t[e]}}},4084:function(e,t,n){var r=n(8667);e.exports=function(e){return function(t){return r(t,e)}}},8794:function(e,t,n){var r=n(2100),a=n(4262),o=n(9156);e.exports=function(e,t){return o(a(e,t,r),e+"")}},7532:function(e,t,n){var r=n(1547),a=n(8528),o=n(2100),i=a?function(e,t){return a(e,"toString",{configurable:!0,enumerable:!1,value:r(t),writable:!0})}:o;e.exports=i},9204:function(e,t,n){var r=n(7927);e.exports=function(e,t){var n;return r(e,(function(e,r,a){return!(n=t(e,r,a))})),!!n}},6478:function(e){e.exports=function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}},2446:function(e,t,n){var r=n(7197),a=n(8950),o=n(3629),i=n(152),s=r?r.prototype:void 0,u=s?s.toString:void 0;e.exports=function e(t){if("string"==typeof t)return t;if(o(t))return a(t,e)+"";if(i(t))return u?u.call(t):"";var n=t+"";return"0"==n&&1/t==-Infinity?"-0":n}},821:function(e,t,n){var r=n(6050),a=/^\s+/;e.exports=function(e){return e?e.slice(0,r(e)+1).replace(a,""):e}},6194:function(e){e.exports=function(e){return function(t){return e(t)}}},75:function(e){e.exports=function(e,t){return e.has(t)}},3410:function(e,t,n){var r=n(2100);e.exports=function(e){return"function"==typeof e?e:r}},3082:function(e,t,n){var r=n(3629),a=n(5823),o=n(170),i=n(3518);e.exports=function(e,t){return r(e)?e:a(e,t)?[e]:o(i(e))}},7010:function(e,t,n){var r=n(6219);e.exports=function(e){var t=new e.constructor(e.byteLength);return new r(t).set(new r(e)),t}},4523:function(e,t,n){e=n.nmd(e);var r=n(7009),a=t&&!t.nodeType&&t,o=a&&e&&!e.nodeType&&e,i=o&&o.exports===a?r.Buffer:void 0,s=i?i.allocUnsafe:void 0;e.exports=function(e,t){if(t)return e.slice();var n=e.length,r=s?s(n):new e.constructor(n);return e.copy(r),r}},1022:function(e,t,n){var r=n(7010);e.exports=function(e,t){var n=t?r(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}},8503:function(e){var t=/\w*$/;e.exports=function(e){var n=new e.constructor(e.source,t.exec(e));return n.lastIndex=e.lastIndex,n}},4720:function(e,t,n){var r=n(7197),a=r?r.prototype:void 0,o=a?a.valueOf:void 0;e.exports=function(e){return o?Object(o.call(e)):{}}},613:function(e,t,n){var r=n(7010);e.exports=function(e,t){var n=t?r(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}},291:function(e){e.exports=function(e,t){var n=-1,r=e.length;for(t||(t=Array(r));++n<r;)t[n]=e[n];return t}},4503:function(e,t,n){var r=n(8463),a=n(2526);e.exports=function(e,t,n,o){var i=!n;n||(n={});for(var s=-1,u=t.length;++s<u;){var c=t[s],l=o?o(n[c],e[c],c,n,e):void 0;void 0===l&&(l=e[c]),i?a(n,c,l):r(n,c,l)}return n}},2455:function(e,t,n){var r=n(4503),a=n(5918);e.exports=function(e,t){return r(e,a(e),t)}},7636:function(e,t,n){var r=n(4503),a=n(8487);e.exports=function(e,t){return r(e,a(e),t)}},5525:function(e,t,n){var r=n(7009)["__core-js_shared__"];e.exports=r},7056:function(e,t,n){var r=n(1473);e.exports=function(e,t){return function(n,a){if(null==n)return n;if(!r(n))return e(n,a);for(var o=n.length,i=t?o:-1,s=Object(n);(t?i--:++i<o)&&!1!==a(s[i],i,s););return n}}},372:function(e){e.exports=function(e){return function(t,n,r){for(var a=-1,o=Object(t),i=r(t),s=i.length;s--;){var u=i[e?s:++a];if(!1===n(o[u],u,o))break}return t}}},5481:function(e,t,n){var r=n(6025),a=n(1473),o=n(2742);e.exports=function(e){return function(t,n,i){var s=Object(t);if(!a(t)){var u=r(n,3);t=o(t),n=function(e){return u(s[e],e,s)}}var c=e(t,n,i);return c>-1?s[u?t[c]:c]:void 0}}},8528:function(e,t,n){var r=n(8136),a=function(){try{var e=r(Object,"defineProperty");return e({},"",{}),e}catch(t){}}();e.exports=a},5305:function(e,t,n){var r=n(692),a=n(7897),o=n(75);e.exports=function(e,t,n,i,s,u){var c=1&n,l=e.length,f=t.length;if(l!=f&&!(c&&f>l))return!1;var d=u.get(e),p=u.get(t);if(d&&p)return d==t&&p==e;var h=-1,m=!0,v=2&n?new r:void 0;for(u.set(e,t),u.set(t,e);++h<l;){var g=e[h],y=t[h];if(i)var b=c?i(y,g,h,t,e,u):i(g,y,h,e,t,u);if(void 0!==b){if(b)continue;m=!1;break}if(v){if(!a(t,(function(e,t){if(!o(v,t)&&(g===e||s(g,e,n,i,u)))return v.push(t)}))){m=!1;break}}else if(g!==y&&!s(g,y,n,i,u)){m=!1;break}}return u.delete(e),u.delete(t),m}},2206:function(e,t,n){var r=n(7197),a=n(6219),o=n(9231),i=n(5305),s=n(234),u=n(2230),c=r?r.prototype:void 0,l=c?c.valueOf:void 0;e.exports=function(e,t,n,r,c,f,d){switch(n){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!f(new a(e),new a(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return o(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var p=s;case"[object Set]":var h=1&r;if(p||(p=u),e.size!=t.size&&!h)return!1;var m=d.get(e);if(m)return m==t;r|=2,d.set(e,t);var v=i(p(e),p(t),r,c,f,d);return d.delete(e),v;case"[object Symbol]":if(l)return l.call(e)==l.call(t)}return!1}},8078:function(e,t,n){var r=n(8248),a=Object.prototype.hasOwnProperty;e.exports=function(e,t,n,o,i,s){var u=1&n,c=r(e),l=c.length;if(l!=r(t).length&&!u)return!1;for(var f=l;f--;){var d=c[f];if(!(u?d in t:a.call(t,d)))return!1}var p=s.get(e),h=s.get(t);if(p&&h)return p==t&&h==e;var m=!0;s.set(e,t),s.set(t,e);for(var v=u;++f<l;){var g=e[d=c[f]],y=t[d];if(o)var b=u?o(y,g,d,t,e,s):o(g,y,d,e,t,s);if(!(void 0===b?g===y||i(g,y,n,o,s):b)){m=!1;break}v||(v="constructor"==d)}if(m&&!v){var x=e.constructor,w=t.constructor;x==w||!("constructor"in e)||!("constructor"in t)||"function"==typeof x&&x instanceof x&&"function"==typeof w&&w instanceof w||(m=!1)}return s.delete(e),s.delete(t),m}},1032:function(e,t,n){var r="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g;e.exports=r},8248:function(e,t,n){var r=n(1986),a=n(5918),o=n(2742);e.exports=function(e){return r(e,o,a)}},5341:function(e,t,n){var r=n(1986),a=n(8487),o=n(3961);e.exports=function(e){return r(e,o,a)}},2799:function(e,t,n){var r=n(9518);e.exports=function(e,t){var n=e.__data__;return r(t)?n["string"==typeof t?"string":"hash"]:n.map}},9091:function(e,t,n){var r=n(5072),a=n(2742);e.exports=function(e){for(var t=a(e),n=t.length;n--;){var o=t[n],i=e[o];t[n]=[o,i,r(i)]}return t}},8136:function(e,t,n){var r=n(6703),a=n(40);e.exports=function(e,t){var n=a(e,t);return r(n)?n:void 0}},1137:function(e,t,n){var r=n(2709)(Object.getPrototypeOf,Object);e.exports=r},1587:function(e,t,n){var r=n(7197),a=Object.prototype,o=a.hasOwnProperty,i=a.toString,s=r?r.toStringTag:void 0;e.exports=function(e){var t=o.call(e,s),n=e[s];try{e[s]=void 0;var r=!0}catch(u){}var a=i.call(e);return r&&(t?e[s]=n:delete e[s]),a}},5918:function(e,t,n){var r=n(7060),a=n(8174),o=Object.prototype.propertyIsEnumerable,i=Object.getOwnPropertySymbols,s=i?function(e){return null==e?[]:(e=Object(e),r(i(e),(function(t){return o.call(e,t)})))}:a;e.exports=s},8487:function(e,t,n){var r=n(1705),a=n(1137),o=n(5918),i=n(8174),s=Object.getOwnPropertySymbols?function(e){for(var t=[];e;)r(t,o(e)),e=a(e);return t}:i;e.exports=s},8383:function(e,t,n){var r=n(908),a=n(5797),o=n(8319),i=n(3924),s=n(7091),u=n(9066),c=n(7907),l="[object Map]",f="[object Promise]",d="[object Set]",p="[object WeakMap]",h="[object DataView]",m=c(r),v=c(a),g=c(o),y=c(i),b=c(s),x=u;(r&&x(new r(new ArrayBuffer(1)))!=h||a&&x(new a)!=l||o&&x(o.resolve())!=f||i&&x(new i)!=d||s&&x(new s)!=p)&&(x=function(e){var t=u(e),n="[object Object]"==t?e.constructor:void 0,r=n?c(n):"";if(r)switch(r){case m:return h;case v:return l;case g:return f;case y:return d;case b:return p}return t}),e.exports=x},40:function(e){e.exports=function(e,t){return null==e?void 0:e[t]}},6417:function(e,t,n){var r=n(3082),a=n(4963),o=n(3629),i=n(6800),s=n(4635),u=n(9793);e.exports=function(e,t,n){for(var c=-1,l=(t=r(t,e)).length,f=!1;++c<l;){var d=u(t[c]);if(!(f=null!=e&&n(e,d)))break;e=e[d]}return f||++c!=l?f:!!(l=null==e?0:e.length)&&s(l)&&i(d,l)&&(o(e)||a(e))}},5403:function(e,t,n){var r=n(9620);e.exports=function(){this.__data__=r?r(null):{},this.size=0}},2747:function(e){e.exports=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}},6037:function(e,t,n){var r=n(9620),a=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;if(r){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return a.call(t,e)?t[e]:void 0}},4154:function(e,t,n){var r=n(9620),a=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;return r?void 0!==t[e]:a.call(t,e)}},7728:function(e,t,n){var r=n(9620);e.exports=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=r&&void 0===t?"__lodash_hash_undefined__":t,this}},9243:function(e){var t=Object.prototype.hasOwnProperty;e.exports=function(e){var n=e.length,r=new e.constructor(n);return n&&"string"==typeof e[0]&&t.call(e,"index")&&(r.index=e.index,r.input=e.input),r}},9759:function(e,t,n){var r=n(7010),a=n(1022),o=n(8503),i=n(4720),s=n(613);e.exports=function(e,t,n){var u=e.constructor;switch(t){case"[object ArrayBuffer]":return r(e);case"[object Boolean]":case"[object Date]":return new u(+e);case"[object DataView]":return a(e,n);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return s(e,n);case"[object Map]":case"[object Set]":return new u;case"[object Number]":case"[object String]":return new u(e);case"[object RegExp]":return o(e);case"[object Symbol]":return i(e)}}},548:function(e,t,n){var r=n(5763),a=n(1137),o=n(2936);e.exports=function(e){return"function"!=typeof e.constructor||o(e)?{}:r(a(e))}},6800:function(e){var t=/^(?:0|[1-9]\d*)$/;e.exports=function(e,n){var r=typeof e;return!!(n=null==n?9007199254740991:n)&&("number"==r||"symbol"!=r&&t.test(e))&&e>-1&&e%1==0&&e<n}},3195:function(e,t,n){var r=n(9231),a=n(1473),o=n(6800),i=n(8092);e.exports=function(e,t,n){if(!i(n))return!1;var s=typeof t;return!!("number"==s?a(n)&&o(t,n.length):"string"==s&&t in n)&&r(n[t],e)}},5823:function(e,t,n){var r=n(3629),a=n(152),o=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,i=/^\w*$/;e.exports=function(e,t){if(r(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!a(e))||(i.test(e)||!o.test(e)||null!=t&&e in Object(t))}},9518:function(e){e.exports=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}},257:function(e,t,n){var r=n(5525),a=function(){var e=/[^.]+$/.exec(r&&r.keys&&r.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();e.exports=function(e){return!!a&&a in e}},2936:function(e){var t=Object.prototype;e.exports=function(e){var n=e&&e.constructor;return e===("function"==typeof n&&n.prototype||t)}},5072:function(e,t,n){var r=n(8092);e.exports=function(e){return e===e&&!r(e)}},3894:function(e){e.exports=function(){this.__data__=[],this.size=0}},8699:function(e,t,n){var r=n(7112),a=Array.prototype.splice;e.exports=function(e){var t=this.__data__,n=r(t,e);return!(n<0)&&(n==t.length-1?t.pop():a.call(t,n,1),--this.size,!0)}},4957:function(e,t,n){var r=n(7112);e.exports=function(e){var t=this.__data__,n=r(t,e);return n<0?void 0:t[n][1]}},7184:function(e,t,n){var r=n(7112);e.exports=function(e){return r(this.__data__,e)>-1}},7109:function(e,t,n){var r=n(7112);e.exports=function(e,t){var n=this.__data__,a=r(n,e);return a<0?(++this.size,n.push([e,t])):n[a][1]=t,this}},4086:function(e,t,n){var r=n(9676),a=n(8384),o=n(5797);e.exports=function(){this.size=0,this.__data__={hash:new r,map:new(o||a),string:new r}}},9255:function(e,t,n){var r=n(2799);e.exports=function(e){var t=r(this,e).delete(e);return this.size-=t?1:0,t}},9186:function(e,t,n){var r=n(2799);e.exports=function(e){return r(this,e).get(e)}},3423:function(e,t,n){var r=n(2799);e.exports=function(e){return r(this,e).has(e)}},3739:function(e,t,n){var r=n(2799);e.exports=function(e,t){var n=r(this,e),a=n.size;return n.set(e,t),this.size+=n.size==a?0:1,this}},234:function(e){e.exports=function(e){var t=-1,n=Array(e.size);return e.forEach((function(e,r){n[++t]=[r,e]})),n}},284:function(e){e.exports=function(e,t){return function(n){return null!=n&&(n[e]===t&&(void 0!==t||e in Object(n)))}}},4634:function(e,t,n){var r=n(9151);e.exports=function(e){var t=r(e,(function(e){return 500===n.size&&n.clear(),e})),n=t.cache;return t}},9620:function(e,t,n){var r=n(8136)(Object,"create");e.exports=r},5964:function(e,t,n){var r=n(2709)(Object.keys,Object);e.exports=r},4221:function(e){e.exports=function(e){var t=[];if(null!=e)for(var n in Object(e))t.push(n);return t}},9494:function(e,t,n){e=n.nmd(e);var r=n(1032),a=t&&!t.nodeType&&t,o=a&&e&&!e.nodeType&&e,i=o&&o.exports===a&&r.process,s=function(){try{var e=o&&o.require&&o.require("util").types;return e||i&&i.binding&&i.binding("util")}catch(t){}}();e.exports=s},3581:function(e){var t=Object.prototype.toString;e.exports=function(e){return t.call(e)}},2709:function(e){e.exports=function(e,t){return function(n){return e(t(n))}}},4262:function(e,t,n){var r=n(3665),a=Math.max;e.exports=function(e,t,n){return t=a(void 0===t?e.length-1:t,0),function(){for(var o=arguments,i=-1,s=a(o.length-t,0),u=Array(s);++i<s;)u[i]=o[t+i];i=-1;for(var c=Array(t+1);++i<t;)c[i]=o[i];return c[t]=n(u),r(e,this,c)}}},7009:function(e,t,n){var r=n(1032),a="object"==typeof self&&self&&self.Object===Object&&self,o=r||a||Function("return this")();e.exports=o},5774:function(e){e.exports=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this}},1596:function(e){e.exports=function(e){return this.__data__.has(e)}},2230:function(e){e.exports=function(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n}},9156:function(e,t,n){var r=n(7532),a=n(3197)(r);e.exports=a},3197:function(e){var t=Date.now;e.exports=function(e){var n=0,r=0;return function(){var a=t(),o=16-(a-r);if(r=a,o>0){if(++n>=800)return arguments[0]}else n=0;return e.apply(void 0,arguments)}}},511:function(e,t,n){var r=n(8384);e.exports=function(){this.__data__=new r,this.size=0}},835:function(e){e.exports=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}},707:function(e){e.exports=function(e){return this.__data__.get(e)}},8832:function(e){e.exports=function(e){return this.__data__.has(e)}},5077:function(e,t,n){var r=n(8384),a=n(5797),o=n(8059);e.exports=function(e,t){var n=this.__data__;if(n instanceof r){var i=n.__data__;if(!a||i.length<199)return i.push([e,t]),this.size=++n.size,this;n=this.__data__=new o(i)}return n.set(e,t),this.size=n.size,this}},170:function(e,t,n){var r=n(4634),a=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,o=/\\(\\)?/g,i=r((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(a,(function(e,n,r,a){t.push(r?a.replace(o,"$1"):n||e)})),t}));e.exports=i},9793:function(e,t,n){var r=n(152);e.exports=function(e){if("string"==typeof e||r(e))return e;var t=e+"";return"0"==t&&1/e==-Infinity?"-0":t}},7907:function(e){var t=Function.prototype.toString;e.exports=function(e){if(null!=e){try{return t.call(e)}catch(n){}try{return e+""}catch(n){}}return""}},6050:function(e){var t=/\s/;e.exports=function(e){for(var n=e.length;n--&&t.test(e.charAt(n)););return n}},8787:function(e,t,n){var r=n(1905);e.exports=function(e){return r(e,4)}},8121:function(e,t,n){var r=n(1905);e.exports=function(e){return r(e,5)}},1547:function(e){e.exports=function(e){return function(){return e}}},6933:function(e,t,n){var r=n(8794),a=n(9231),o=n(3195),i=n(3961),s=Object.prototype,u=s.hasOwnProperty,c=r((function(e,t){e=Object(e);var n=-1,r=t.length,c=r>2?t[2]:void 0;for(c&&o(t[0],t[1],c)&&(r=1);++n<r;)for(var l=t[n],f=i(l),d=-1,p=f.length;++d<p;){var h=f[d],m=e[h];(void 0===m||a(m,s[h])&&!u.call(e,h))&&(e[h]=l[h])}return e}));e.exports=c},9231:function(e){e.exports=function(e,t){return e===t||e!==e&&t!==t}},86:function(e,t,n){var r=n(7060),a=n(7523),o=n(6025),i=n(3629);e.exports=function(e,t){return(i(e)?r:a)(e,o(t,3))}},1211:function(e,t,n){var r=n(5481)(n(1475));e.exports=r},1475:function(e,t,n){var r=n(2045),a=n(6025),o=n(9753),i=Math.max;e.exports=function(e,t,n){var s=null==e?0:e.length;if(!s)return-1;var u=null==n?0:o(n);return u<0&&(u=i(s+u,0)),r(e,a(t,3),u)}},4689:function(e,t,n){var r=n(5358),a=n(3410);e.exports=function(e,t){return e&&r(e,a(t))}},6181:function(e,t,n){var r=n(8667);e.exports=function(e,t,n){var a=null==e?void 0:r(e,t);return void 0===a?n:a}},5658:function(e,t,n){var r=n(529),a=n(6417);e.exports=function(e,t){return null!=e&&a(e,t,r)}},2100:function(e){e.exports=function(e){return e}},4963:function(e,t,n){var r=n(4906),a=n(3141),o=Object.prototype,i=o.hasOwnProperty,s=o.propertyIsEnumerable,u=r(function(){return arguments}())?r:function(e){return a(e)&&i.call(e,"callee")&&!s.call(e,"callee")};e.exports=u},3629:function(e){var t=Array.isArray;e.exports=t},1473:function(e,t,n){var r=n(4786),a=n(4635);e.exports=function(e){return null!=e&&a(e.length)&&!r(e)}},5174:function(e,t,n){e=n.nmd(e);var r=n(7009),a=n(9488),o=t&&!t.nodeType&&t,i=o&&e&&!e.nodeType&&e,s=i&&i.exports===o?r.Buffer:void 0,u=(s?s.isBuffer:void 0)||a;e.exports=u},8111:function(e,t,n){var r=n(1848);e.exports=function(e,t){return r(e,t)}},4786:function(e,t,n){var r=n(9066),a=n(8092);e.exports=function(e){if(!a(e))return!1;var t=r(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}},4635:function(e){e.exports=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}},103:function(e,t,n){var r=n(3085),a=n(6194),o=n(9494),i=o&&o.isMap,s=i?a(i):r;e.exports=s},8092:function(e){e.exports=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},3141:function(e){e.exports=function(e){return null!=e&&"object"==typeof e}},3977:function(e,t,n){var r=n(9066),a=n(1137),o=n(3141),i=Function.prototype,s=Object.prototype,u=i.toString,c=s.hasOwnProperty,l=u.call(Object);e.exports=function(e){if(!o(e)||"[object Object]"!=r(e))return!1;var t=a(e);if(null===t)return!0;var n=c.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&u.call(n)==l}},6995:function(e,t,n){var r=n(8680),a=n(6194),o=n(9494),i=o&&o.isSet,s=i?a(i):r;e.exports=s},6769:function(e,t,n){var r=n(9066),a=n(3629),o=n(3141);e.exports=function(e){return"string"==typeof e||!a(e)&&o(e)&&"[object String]"==r(e)}},152:function(e,t,n){var r=n(9066),a=n(3141);e.exports=function(e){return"symbol"==typeof e||a(e)&&"[object Symbol]"==r(e)}},9102:function(e,t,n){var r=n(8150),a=n(6194),o=n(9494),i=o&&o.isTypedArray,s=i?a(i):r;e.exports=s},2742:function(e,t,n){var r=n(7538),a=n(3654),o=n(1473);e.exports=function(e){return o(e)?r(e):a(e)}},3961:function(e,t,n){var r=n(7538),a=n(8664),o=n(1473);e.exports=function(e){return o(e)?r(e,!0):a(e)}},2034:function(e,t,n){var r=n(8950),a=n(6025),o=n(3849),i=n(3629);e.exports=function(e,t){return(i(e)?r:o)(e,a(t,3))}},9151:function(e,t,n){var r=n(8059);function a(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError("Expected a function");var n=function n(){var r=arguments,a=t?t.apply(this,r):r[0],o=n.cache;if(o.has(a))return o.get(a);var i=e.apply(this,r);return n.cache=o.set(a,i)||o,i};return n.cache=new(a.Cache||r),n}a.Cache=r,e.exports=a},38:function(e,t,n){var r=n(9586),a=n(4084),o=n(5823),i=n(9793);e.exports=function(e){return o(e)?r(i(e)):a(e)}},4064:function(e,t,n){var r=n(7897),a=n(6025),o=n(9204),i=n(3629),s=n(3195);e.exports=function(e,t,n){var u=i(e)?r:o;return n&&s(e,t,n)&&(t=void 0),u(e,a(t,3))}},8174:function(e){e.exports=function(){return[]}},9488:function(e){e.exports=function(){return!1}},1495:function(e,t,n){var r=n(2582),a=1/0;e.exports=function(e){return e?(e=r(e))===a||e===-1/0?17976931348623157e292*(e<0?-1:1):e===e?e:0:0===e?e:0}},9753:function(e,t,n){var r=n(1495);e.exports=function(e){var t=r(e),n=t%1;return t===t?n?t-n:t:0}},2582:function(e,t,n){var r=n(821),a=n(8092),o=n(152),i=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,u=/^0o[0-7]+$/i,c=parseInt;e.exports=function(e){if("number"==typeof e)return e;if(o(e))return NaN;if(a(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=a(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=r(e);var n=s.test(e);return n||u.test(e)?c(e.slice(2),n?2:8):i.test(e)?NaN:+e}},3518:function(e,t,n){var r=n(2446);e.exports=function(e){return null==e?"":r(e)}},8987:function(e){e.exports=n;var t=null;try{t=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch(N){}function n(e,t,n){this.low=0|e,this.high=0|t,this.unsigned=!!n}function r(e){return!0===(e&&e.__isLong__)}n.prototype.__isLong__,Object.defineProperty(n.prototype,"__isLong__",{value:!0}),n.isLong=r;var a={},o={};function i(e,t){var n,r,i;return t?(i=0<=(e>>>=0)&&e<256)&&(r=o[e])?r:(n=u(e,(0|e)<0?-1:0,!0),i&&(o[e]=n),n):(i=-128<=(e|=0)&&e<128)&&(r=a[e])?r:(n=u(e,e<0?-1:0,!1),i&&(a[e]=n),n)}function s(e,t){if(isNaN(e))return t?g:v;if(t){if(e<0)return g;if(e>=p)return k}else{if(e<=-h)return S;if(e+1>=h)return w}return e<0?s(-e,t).neg():u(e%d|0,e/d|0,t)}function u(e,t,r){return new n(e,t,r)}n.fromInt=i,n.fromNumber=s,n.fromBits=u;var c=Math.pow;function l(e,t,n){if(0===e.length)throw Error("empty string");if("NaN"===e||"Infinity"===e||"+Infinity"===e||"-Infinity"===e)return v;if("number"===typeof t?(n=t,t=!1):t=!!t,(n=n||10)<2||36<n)throw RangeError("radix");var r;if((r=e.indexOf("-"))>0)throw Error("interior hyphen");if(0===r)return l(e.substring(1),t,n).neg();for(var a=s(c(n,8)),o=v,i=0;i<e.length;i+=8){var u=Math.min(8,e.length-i),f=parseInt(e.substring(i,i+u),n);if(u<8){var d=s(c(n,u));o=o.mul(d).add(s(f))}else o=(o=o.mul(a)).add(s(f))}return o.unsigned=t,o}function f(e,t){return"number"===typeof e?s(e,t):"string"===typeof e?l(e,t):u(e.low,e.high,"boolean"===typeof t?t:e.unsigned)}n.fromString=l,n.fromValue=f;var d=4294967296,p=d*d,h=p/2,m=i(1<<24),v=i(0);n.ZERO=v;var g=i(0,!0);n.UZERO=g;var y=i(1);n.ONE=y;var b=i(1,!0);n.UONE=b;var x=i(-1);n.NEG_ONE=x;var w=u(-1,2147483647,!1);n.MAX_VALUE=w;var k=u(-1,-1,!0);n.MAX_UNSIGNED_VALUE=k;var S=u(0,-2147483648,!1);n.MIN_VALUE=S;var _=n.prototype;_.toInt=function(){return this.unsigned?this.low>>>0:this.low},_.toNumber=function(){return this.unsigned?(this.high>>>0)*d+(this.low>>>0):this.high*d+(this.low>>>0)},_.toString=function(e){if((e=e||10)<2||36<e)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative()){if(this.eq(S)){var t=s(e),n=this.div(t),r=n.mul(t).sub(this);return n.toString(e)+r.toInt().toString(e)}return"-"+this.neg().toString(e)}for(var a=s(c(e,6),this.unsigned),o=this,i="";;){var u=o.div(a),l=(o.sub(u.mul(a)).toInt()>>>0).toString(e);if((o=u).isZero())return l+i;for(;l.length<6;)l="0"+l;i=""+l+i}},_.getHighBits=function(){return this.high},_.getHighBitsUnsigned=function(){return this.high>>>0},_.getLowBits=function(){return this.low},_.getLowBitsUnsigned=function(){return this.low>>>0},_.getNumBitsAbs=function(){if(this.isNegative())return this.eq(S)?64:this.neg().getNumBitsAbs();for(var e=0!=this.high?this.high:this.low,t=31;t>0&&0==(e&1<<t);t--);return 0!=this.high?t+33:t+1},_.isZero=function(){return 0===this.high&&0===this.low},_.eqz=_.isZero,_.isNegative=function(){return!this.unsigned&&this.high<0},_.isPositive=function(){return this.unsigned||this.high>=0},_.isOdd=function(){return 1===(1&this.low)},_.isEven=function(){return 0===(1&this.low)},_.equals=function(e){return r(e)||(e=f(e)),(this.unsigned===e.unsigned||this.high>>>31!==1||e.high>>>31!==1)&&(this.high===e.high&&this.low===e.low)},_.eq=_.equals,_.notEquals=function(e){return!this.eq(e)},_.neq=_.notEquals,_.ne=_.notEquals,_.lessThan=function(e){return this.comp(e)<0},_.lt=_.lessThan,_.lessThanOrEqual=function(e){return this.comp(e)<=0},_.lte=_.lessThanOrEqual,_.le=_.lessThanOrEqual,_.greaterThan=function(e){return this.comp(e)>0},_.gt=_.greaterThan,_.greaterThanOrEqual=function(e){return this.comp(e)>=0},_.gte=_.greaterThanOrEqual,_.ge=_.greaterThanOrEqual,_.compare=function(e){if(r(e)||(e=f(e)),this.eq(e))return 0;var t=this.isNegative(),n=e.isNegative();return t&&!n?-1:!t&&n?1:this.unsigned?e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1:this.sub(e).isNegative()?-1:1},_.comp=_.compare,_.negate=function(){return!this.unsigned&&this.eq(S)?S:this.not().add(y)},_.neg=_.negate,_.add=function(e){r(e)||(e=f(e));var t=this.high>>>16,n=65535&this.high,a=this.low>>>16,o=65535&this.low,i=e.high>>>16,s=65535&e.high,c=e.low>>>16,l=0,d=0,p=0,h=0;return p+=(h+=o+(65535&e.low))>>>16,d+=(p+=a+c)>>>16,l+=(d+=n+s)>>>16,l+=t+i,u((p&=65535)<<16|(h&=65535),(l&=65535)<<16|(d&=65535),this.unsigned)},_.subtract=function(e){return r(e)||(e=f(e)),this.add(e.neg())},_.sub=_.subtract,_.multiply=function(e){if(this.isZero())return v;if(r(e)||(e=f(e)),t)return u(t.mul(this.low,this.high,e.low,e.high),t.get_high(),this.unsigned);if(e.isZero())return v;if(this.eq(S))return e.isOdd()?S:v;if(e.eq(S))return this.isOdd()?S:v;if(this.isNegative())return e.isNegative()?this.neg().mul(e.neg()):this.neg().mul(e).neg();if(e.isNegative())return this.mul(e.neg()).neg();if(this.lt(m)&&e.lt(m))return s(this.toNumber()*e.toNumber(),this.unsigned);var n=this.high>>>16,a=65535&this.high,o=this.low>>>16,i=65535&this.low,c=e.high>>>16,l=65535&e.high,d=e.low>>>16,p=65535&e.low,h=0,g=0,y=0,b=0;return y+=(b+=i*p)>>>16,g+=(y+=o*p)>>>16,y&=65535,g+=(y+=i*d)>>>16,h+=(g+=a*p)>>>16,g&=65535,h+=(g+=o*d)>>>16,g&=65535,h+=(g+=i*l)>>>16,h+=n*p+a*d+o*l+i*c,u((y&=65535)<<16|(b&=65535),(h&=65535)<<16|(g&=65535),this.unsigned)},_.mul=_.multiply,_.divide=function(e){if(r(e)||(e=f(e)),e.isZero())throw Error("division by zero");var n,a,o;if(t)return this.unsigned||-2147483648!==this.high||-1!==e.low||-1!==e.high?u((this.unsigned?t.div_u:t.div_s)(this.low,this.high,e.low,e.high),t.get_high(),this.unsigned):this;if(this.isZero())return this.unsigned?g:v;if(this.unsigned){if(e.unsigned||(e=e.toUnsigned()),e.gt(this))return g;if(e.gt(this.shru(1)))return b;o=g}else{if(this.eq(S))return e.eq(y)||e.eq(x)?S:e.eq(S)?y:(n=this.shr(1).div(e).shl(1)).eq(v)?e.isNegative()?y:x:(a=this.sub(e.mul(n)),o=n.add(a.div(e)));if(e.eq(S))return this.unsigned?g:v;if(this.isNegative())return e.isNegative()?this.neg().div(e.neg()):this.neg().div(e).neg();if(e.isNegative())return this.div(e.neg()).neg();o=v}for(a=this;a.gte(e);){n=Math.max(1,Math.floor(a.toNumber()/e.toNumber()));for(var i=Math.ceil(Math.log(n)/Math.LN2),l=i<=48?1:c(2,i-48),d=s(n),p=d.mul(e);p.isNegative()||p.gt(a);)p=(d=s(n-=l,this.unsigned)).mul(e);d.isZero()&&(d=y),o=o.add(d),a=a.sub(p)}return o},_.div=_.divide,_.modulo=function(e){return r(e)||(e=f(e)),t?u((this.unsigned?t.rem_u:t.rem_s)(this.low,this.high,e.low,e.high),t.get_high(),this.unsigned):this.sub(this.div(e).mul(e))},_.mod=_.modulo,_.rem=_.modulo,_.not=function(){return u(~this.low,~this.high,this.unsigned)},_.and=function(e){return r(e)||(e=f(e)),u(this.low&e.low,this.high&e.high,this.unsigned)},_.or=function(e){return r(e)||(e=f(e)),u(this.low|e.low,this.high|e.high,this.unsigned)},_.xor=function(e){return r(e)||(e=f(e)),u(this.low^e.low,this.high^e.high,this.unsigned)},_.shiftLeft=function(e){return r(e)&&(e=e.toInt()),0===(e&=63)?this:e<32?u(this.low<<e,this.high<<e|this.low>>>32-e,this.unsigned):u(0,this.low<<e-32,this.unsigned)},_.shl=_.shiftLeft,_.shiftRight=function(e){return r(e)&&(e=e.toInt()),0===(e&=63)?this:e<32?u(this.low>>>e|this.high<<32-e,this.high>>e,this.unsigned):u(this.high>>e-32,this.high>=0?0:-1,this.unsigned)},_.shr=_.shiftRight,_.shiftRightUnsigned=function(e){if(r(e)&&(e=e.toInt()),0===(e&=63))return this;var t=this.high;return e<32?u(this.low>>>e|t<<32-e,t>>>e,this.unsigned):u(32===e?t:t>>>e-32,0,this.unsigned)},_.shru=_.shiftRightUnsigned,_.shr_u=_.shiftRightUnsigned,_.toSigned=function(){return this.unsigned?u(this.low,this.high,!1):this},_.toUnsigned=function(){return this.unsigned?this:u(this.low,this.high,!0)},_.toBytes=function(e){return e?this.toBytesLE():this.toBytesBE()},_.toBytesLE=function(){var e=this.high,t=this.low;return[255&t,t>>>8&255,t>>>16&255,t>>>24,255&e,e>>>8&255,e>>>16&255,e>>>24]},_.toBytesBE=function(){var e=this.high,t=this.low;return[e>>>24,e>>>16&255,e>>>8&255,255&e,t>>>24,t>>>16&255,t>>>8&255,255&t]},n.fromBytes=function(e,t,r){return r?n.fromBytesLE(e,t):n.fromBytesBE(e,t)},n.fromBytesLE=function(e,t){return new n(e[0]|e[1]<<8|e[2]<<16|e[3]<<24,e[4]|e[5]<<8|e[6]<<16|e[7]<<24,t)},n.fromBytesBE=function(e,t){return new n(e[4]<<24|e[5]<<16|e[6]<<8|e[7],e[0]<<24|e[1]<<16|e[2]<<8|e[3],t)}},6370:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},a=r(n(2786)),o=r(n(6357));a.default.DefaultOpts.ImageClass=o.default,e.exports=a.default},4941:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var a=r(n(2786)),o=n(8787),i=function(){function e(e,t){void 0===t&&(t={}),this._src=e,this._opts=t,this._opts.filters=o(a.default.DefaultOpts.filters)}return e.prototype.maxColorCount=function(e){return this._opts.colorCount=e,this},e.prototype.maxDimension=function(e){return this._opts.maxDimension=e,this},e.prototype.addFilter=function(e){return this._opts.filters.push(e),this},e.prototype.removeFilter=function(e){var t=this._opts.filters.indexOf(e);return t>0&&this._opts.filters.splice(t),this},e.prototype.clearFilters=function(){return this._opts.filters=[],this},e.prototype.quality=function(e){return this._opts.quality=e,this},e.prototype.useImageClass=function(e){return this._opts.ImageClass=e,this},e.prototype.useGenerator=function(e){return this._opts.generator=e,this},e.prototype.useQuantizer=function(e){return this._opts.quantizer=e,this},e.prototype.build=function(){return new a.default(this._src,this._opts)},e.prototype.getPalette=function(e){return this.build().getPalette(e)},e.prototype.getSwatches=function(e){return this.build().getPalette(e)},e}();t.default=i},7547:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Swatch=void 0;var r=n(1641),a=n(86),o=function(){function e(e,t){this._rgb=e,this._population=t}return e.applyFilter=function(e,t){return"function"===typeof t?a(e,(function(e){var n=e.r,r=e.g,a=e.b;return t(n,r,a,255)})):e},Object.defineProperty(e.prototype,"r",{get:function(){return this._rgb[0]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"g",{get:function(){return this._rgb[1]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"b",{get:function(){return this._rgb[2]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"rgb",{get:function(){return this._rgb},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"hsl",{get:function(){if(!this._hsl){var e=this._rgb,t=e[0],n=e[1],a=e[2];this._hsl=r.rgbToHsl(t,n,a)}return this._hsl},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"hex",{get:function(){if(!this._hex){var e=this._rgb,t=e[0],n=e[1],a=e[2];this._hex=r.rgbToHex(t,n,a)}return this._hex},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"population",{get:function(){return this._population},enumerable:!1,configurable:!0}),e.prototype.toJSON=function(){return{rgb:this.rgb,population:this.population}},e.prototype.getRgb=function(){return this._rgb},e.prototype.getHsl=function(){return this.hsl},e.prototype.getPopulation=function(){return this._population},e.prototype.getHex=function(){return this.hex},e.prototype.getYiq=function(){if(!this._yiq){var e=this._rgb;this._yiq=(299*e[0]+587*e[1]+114*e[2])/1e3}return this._yiq},Object.defineProperty(e.prototype,"titleTextColor",{get:function(){return this._titleTextColor||(this._titleTextColor=this.getYiq()<200?"#fff":"#000"),this._titleTextColor},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"bodyTextColor",{get:function(){return this._bodyTextColor||(this._bodyTextColor=this.getYiq()<150?"#fff":"#000"),this._bodyTextColor},enumerable:!1,configurable:!0}),e.prototype.getTitleTextColor=function(){return this.titleTextColor},e.prototype.getBodyTextColor=function(){return this.bodyTextColor},e}();t.Swatch=o},174:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n,r){return r>=125&&!(e>250&&t>250&&n>250)}},5210:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.combineFilters=void 0;var r=n(174);Object.defineProperty(t,"Default",{enumerable:!0,get:function(){return r.default}}),t.combineFilters=function(e){return Array.isArray(e)&&0!==e.length?function(t,n,r,a){if(0===a)return!1;for(var o=0;o<e.length;o++)if(!e[o](t,n,r,a))return!1;return!0}:null}},3045:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(7547),a=n(1641),o=n(6933),i={targetDarkLuma:.26,maxDarkLuma:.45,minLightLuma:.55,targetLightLuma:.74,minNormalLuma:.3,targetNormalLuma:.5,maxNormalLuma:.7,targetMutesSaturation:.3,maxMutesSaturation:.4,targetVibrantSaturation:1,minVibrantSaturation:.35,weightSaturation:3,weightLuma:6.5,weightPopulation:.5};function s(e,t,n,r,a,o,i,s,u,c){var l=null,f=0;return t.forEach((function(t){var d=t.getHsl(),p=d[1],h=d[2];if(p>=s&&p<=u&&h>=a&&h<=o&&!function(e,t){return e.Vibrant===t||e.DarkVibrant===t||e.LightVibrant===t||e.Muted===t||e.DarkMuted===t||e.LightMuted===t}(e,t)){var m=function(e,t,n,r,a,o,i){function s(e,t){return 1-Math.abs(e-t)}return function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n=0,r=0,a=0;a<e.length;a+=2){var o=e[a],i=e[a+1];n+=o*i,r+=i}return n/r}(s(e,t),i.weightSaturation,s(n,r),i.weightLuma,a/o,i.weightPopulation)}(p,i,h,r,t.getPopulation(),n,c);(null===l||m>f)&&(l=t,f=m)}})),l}t.default=function(e,t){t=o({},t,i);var n=function(e){var t=0;return e.forEach((function(e){t=Math.max(t,e.getPopulation())})),t}(e),u=function(e,t,n){var r={};return r.Vibrant=s(r,e,t,n.targetNormalLuma,n.minNormalLuma,n.maxNormalLuma,n.targetVibrantSaturation,n.minVibrantSaturation,1,n),r.LightVibrant=s(r,e,t,n.targetLightLuma,n.minLightLuma,1,n.targetVibrantSaturation,n.minVibrantSaturation,1,n),r.DarkVibrant=s(r,e,t,n.targetDarkLuma,0,n.maxDarkLuma,n.targetVibrantSaturation,n.minVibrantSaturation,1,n),r.Muted=s(r,e,t,n.targetNormalLuma,n.minNormalLuma,n.maxNormalLuma,n.targetMutesSaturation,0,n.maxMutesSaturation,n),r.LightMuted=s(r,e,t,n.targetLightLuma,n.minLightLuma,1,n.targetMutesSaturation,0,n.maxMutesSaturation,n),r.DarkMuted=s(r,e,t,n.targetDarkLuma,0,n.maxDarkLuma,n.targetMutesSaturation,0,n.maxMutesSaturation,n),r}(e,n,t);return function(e,t,n){if(null===e.Vibrant&&null===e.DarkVibrant&&null===e.LightVibrant){if(null===e.DarkVibrant&&null!==e.DarkMuted){var o=e.DarkMuted.getHsl(),i=o[0],s=o[1],u=o[2];u=n.targetDarkLuma,e.DarkVibrant=new r.Swatch(a.hslToRgb(i,s,u),0)}if(null===e.LightVibrant&&null!==e.LightMuted){var c=e.LightMuted.getHsl();i=c[0],s=c[1],u=c[2],u=n.targetDarkLuma,e.DarkVibrant=new r.Swatch(a.hslToRgb(i,s,u),0)}}if(null===e.Vibrant&&null!==e.DarkVibrant){var l=e.DarkVibrant.getHsl();i=l[0],s=l[1],u=l[2],u=n.targetNormalLuma,e.Vibrant=new r.Swatch(a.hslToRgb(i,s,u),0)}else if(null===e.Vibrant&&null!==e.LightVibrant){var f=e.LightVibrant.getHsl();i=f[0],s=f[1],u=f[2],u=n.targetNormalLuma,e.Vibrant=new r.Swatch(a.hslToRgb(i,s,u),0)}if(null===e.DarkVibrant&&null!==e.Vibrant){var d=e.Vibrant.getHsl();i=d[0],s=d[1],u=d[2],u=n.targetDarkLuma,e.DarkVibrant=new r.Swatch(a.hslToRgb(i,s,u),0)}if(null===e.LightVibrant&&null!==e.Vibrant){var p=e.Vibrant.getHsl();i=p[0],s=p[1],u=p[2],u=n.targetLightLuma,e.LightVibrant=new r.Swatch(a.hslToRgb(i,s,u),0)}if(null===e.Muted&&null!==e.Vibrant){var h=e.Vibrant.getHsl();i=h[0],s=h[1],u=h[2],u=n.targetMutesSaturation,e.Muted=new r.Swatch(a.hslToRgb(i,s,u),0)}if(null===e.DarkMuted&&null!==e.DarkVibrant){var m=e.DarkVibrant.getHsl();i=m[0],s=m[1],u=m[2],u=n.targetMutesSaturation,e.DarkMuted=new r.Swatch(a.hslToRgb(i,s,u),0)}if(null===e.LightMuted&&null!==e.LightVibrant){var v=e.LightVibrant.getHsl();i=v[0],s=v[1],u=v[2],u=n.targetMutesSaturation,e.LightMuted=new r.Swatch(a.hslToRgb(i,s,u),0)}}(u,0,t),u}},1261:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3045);Object.defineProperty(t,"Default",{enumerable:!0,get:function(){return r.default}})},8148:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ImageBase=void 0;var n=function(){function e(){}return e.prototype.scaleDown=function(e){var t=this.getWidth(),n=this.getHeight(),r=1;if(e.maxDimension>0){var a=Math.max(t,n);a>e.maxDimension&&(r=e.maxDimension/a)}else r=1/e.quality;r<1&&this.resize(t*r,n*r,r)},e.prototype.applyFilter=function(e){var t=this.getImageData();if("function"===typeof e)for(var n=t.data,r=n.length/4,a=void 0,o=0;o<r;o++)e(n[(a=4*o)+0],n[a+1],n[a+2],n[a+3])||(n[a+3]=0);return Promise.resolve(t)},e}();t.ImageBase=n},6357:function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),a=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.hasOwnProperty.call(e,n)&&a(t,e,n);return o(t,e),t};Object.defineProperty(t,"__esModule",{value:!0});var s=n(8148),u=i(n(2114));var c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype._initCanvas=function(){var e=this.image,t=this._canvas=document.createElement("canvas"),n=this._context=t.getContext("2d");t.className="vibrant-canvas",t.style.display="none",this._width=t.width=e.width,this._height=t.height=e.height,n.drawImage(e,0,0),document.body.appendChild(t)},t.prototype.load=function(e){var t=this,n=null,r=null;if("string"===typeof e)n=document.createElement("img"),function(e){var t=u.parse(e);return null===t.protocol&&null===t.host&&null===t.port}(e)||function(e,t){var n=u.parse(e),r=u.parse(t);return n.protocol===r.protocol&&n.hostname===r.hostname&&n.port===r.port}(window.location.href,e)||(n.crossOrigin="anonymous"),r=n.src=e;else{if(!(e instanceof HTMLImageElement))return Promise.reject(new Error("Cannot load buffer as an image in browser"));n=e,r=e.src}return this.image=n,new Promise((function(e,a){var o=function(){t._initCanvas(),e(t)};n.complete?o():(n.onload=o,n.onerror=function(e){return a(new Error("Fail to load image: "+r))})}))},t.prototype.clear=function(){this._context.clearRect(0,0,this._width,this._height)},t.prototype.update=function(e){this._context.putImageData(e,0,0)},t.prototype.getWidth=function(){return this._width},t.prototype.getHeight=function(){return this._height},t.prototype.resize=function(e,t,n){var r=this,a=r._canvas,o=r._context,i=r.image;this._width=a.width=e,this._height=a.height=t,o.scale(n,n),o.drawImage(i,0,0)},t.prototype.getPixelCount=function(){return this._width*this._height},t.prototype.getImageData=function(){return this._context.getImageData(0,0,this._width,this._height)},t.prototype.remove=function(){this._canvas&&this._canvas.parentNode&&this._canvas.parentNode.removeChild(this._canvas)},t}(s.ImageBase);t.default=c},376:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WebWorker=void 0;var r=n(8202);Object.defineProperty(t,"MMCQ",{enumerable:!0,get:function(){return r.default}}),t.WebWorker=null},8202:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var a=n(7547),o=r(n(5775)),i=r(n(3369));function s(e,t){for(var n=e.size();e.size()<t;){var r=e.pop();if(!(r&&r.count()>0))break;var a=r.split(),o=a[0],i=a[1];if(e.push(o),i&&i.count()>0&&e.push(i),e.size()===n)break;n=e.size()}}t.default=function(e,t){if(0===e.length||t.colorCount<2||t.colorCount>256)throw new Error("Wrong MMCQ parameters");var n=o.default.build(e),r=n.hist,u=(Object.keys(r).length,new i.default((function(e,t){return e.count()-t.count()})));u.push(n),s(u,.75*t.colorCount);var c=new i.default((function(e,t){return e.count()*e.volume()-t.count()*t.volume()}));return c.contents=u.contents,s(c,t.colorCount-c.size()),function(e){var t=[];for(;e.size();){var n=e.pop(),r=n.avg();r[0],r[1],r[2];t.push(new a.Swatch(r,n.count()))}return t}(c)}},3369:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e){this._comparator=e,this.contents=[],this._sorted=!1}return e.prototype._sort=function(){this._sorted||(this.contents.sort(this._comparator),this._sorted=!0)},e.prototype.push=function(e){this.contents.push(e),this._sorted=!1},e.prototype.peek=function(e){return this._sort(),e="number"===typeof e?e:this.contents.length-1,this.contents[e]},e.prototype.pop=function(){return this._sort(),this.contents.pop()},e.prototype.size=function(){return this.contents.length},e.prototype.map=function(e){return this._sort(),this.contents.map(e)},e}();t.default=n},5775:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1641),a=function(){function e(e,t,n,r,a,o,i){this._volume=-1,this._count=-1,this.dimension={r1:e,r2:t,g1:n,g2:r,b1:a,b2:o},this.hist=i}return e.build=function(t,n){var a,o,i,s,u,c,l,f,d,p=1<<3*r.SIGBITS,h=new Uint32Array(p);a=i=u=0,o=s=c=Number.MAX_VALUE;for(var m=t.length/4,v=0;v<m;){var g=4*v;if(v++,l=t[g+0],f=t[g+1],d=t[g+2],0!==t[g+3])l>>=r.RSHIFT,f>>=r.RSHIFT,d>>=r.RSHIFT,h[r.getColorIndex(l,f,d)]+=1,l>a&&(a=l),l<o&&(o=l),f>i&&(i=f),f<s&&(s=f),d>u&&(u=d),d<c&&(c=d)}return new e(o,a,s,i,c,u,h)},e.prototype.invalidate=function(){this._volume=this._count=-1,this._avg=null},e.prototype.volume=function(){if(this._volume<0){var e=this.dimension,t=e.r1,n=e.r2,r=e.g1,a=e.g2,o=e.b1,i=e.b2;this._volume=(n-t+1)*(a-r+1)*(i-o+1)}return this._volume},e.prototype.count=function(){if(this._count<0){for(var e=this.hist,t=this.dimension,n=t.r1,a=t.r2,o=t.g1,i=t.g2,s=t.b1,u=t.b2,c=0,l=n;l<=a;l++)for(var f=o;f<=i;f++)for(var d=s;d<=u;d++){c+=e[r.getColorIndex(l,f,d)]}this._count=c}return this._count},e.prototype.clone=function(){var t=this.hist,n=this.dimension;return new e(n.r1,n.r2,n.g1,n.g2,n.b1,n.b2,t)},e.prototype.avg=function(){if(!this._avg){var e=this.hist,t=this.dimension,n=t.r1,a=t.r2,o=t.g1,i=t.g2,s=t.b1,u=t.b2,c=0,l=1<<8-r.SIGBITS,f=void 0,d=void 0,p=void 0;f=d=p=0;for(var h=n;h<=a;h++)for(var m=o;m<=i;m++)for(var v=s;v<=u;v++){var g=e[r.getColorIndex(h,m,v)];c+=g,f+=g*(h+.5)*l,d+=g*(m+.5)*l,p+=g*(v+.5)*l}this._avg=c?[~~(f/c),~~(d/c),~~(p/c)]:[~~(l*(n+a+1)/2),~~(l*(o+i+1)/2),~~(l*(s+u+1)/2)]}return this._avg},e.prototype.contains=function(e){var t=e[0],n=e[1],a=e[2],o=this.dimension,i=o.r1,s=o.r2,u=o.g1,c=o.g2,l=o.b1,f=o.b2;return t>>=r.RSHIFT,n>>=r.RSHIFT,a>>=r.RSHIFT,t>=i&&t<=s&&n>=u&&n<=c&&a>=l&&a<=f},e.prototype.split=function(){var e=this.hist,t=this.dimension,n=t.r1,a=t.r2,o=t.g1,i=t.g2,s=t.b1,u=t.b2,c=this.count();if(!c)return[];if(1===c)return[this.clone()];var l,f,d=a-n+1,p=i-o+1,h=u-s+1,m=Math.max(d,p,h),v=null;l=f=0;var g=null;if(m===d){g="r",v=new Uint32Array(a+1);for(var y=n;y<=a;y++){l=0;for(var b=o;b<=i;b++)for(var x=s;x<=u;x++){l+=e[r.getColorIndex(y,b,x)]}f+=l,v[y]=f}}else if(m===p){g="g",v=new Uint32Array(i+1);for(b=o;b<=i;b++){l=0;for(y=n;y<=a;y++)for(x=s;x<=u;x++){l+=e[r.getColorIndex(y,b,x)]}f+=l,v[b]=f}}else{g="b",v=new Uint32Array(u+1);for(x=s;x<=u;x++){l=0;for(y=n;y<=a;y++)for(b=o;b<=i;b++){l+=e[r.getColorIndex(y,b,x)]}f+=l,v[x]=f}}for(var w=-1,k=new Uint32Array(v.length),S=0;S<v.length;S++){var _=v[S];w<0&&_>f/2&&(w=S),k[S]=f-_}var N=this;return function(e){var t=e+"1",n=e+"2",r=N.dimension[t],a=N.dimension[n],o=N.clone(),i=N.clone(),s=w-r,u=a-w;for(s<=u?(a=Math.min(a-1,~~(w+u/2)),a=Math.max(0,a)):(a=Math.max(r,~~(w-1-s/2)),a=Math.min(N.dimension[n],a));!v[a];)a++;for(var c=k[a];!c&&v[a-1];)c=k[--a];return o.dimension[n]=a,i.dimension[t]=a+1,[o,i]}(g)},e}();t.default=a},1641:function(e,t){"use strict";function n(e){var t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return null===t?null:[t[1],t[2],t[3]].map((function(e){return parseInt(e,16)}))}function r(e,t,n){return t/=255,n/=255,e=(e/=255)>.04045?Math.pow((e+.005)/1.055,2.4):e/12.92,t=t>.04045?Math.pow((t+.005)/1.055,2.4):t/12.92,n=n>.04045?Math.pow((n+.005)/1.055,2.4):n/12.92,[.4124*(e*=100)+.3576*(t*=100)+.1805*(n*=100),.2126*e+.7152*t+.0722*n,.0193*e+.1192*t+.9505*n]}function a(e,t,n){return t/=100,n/=108.883,e=(e/=95.047)>.008856?Math.pow(e,1/3):7.787*e+16/116,[116*(t=t>.008856?Math.pow(t,1/3):7.787*t+16/116)-16,500*(e-t),200*(t-(n=n>.008856?Math.pow(n,1/3):7.787*n+16/116))]}function o(e,t,n){var o=r(e,t,n);return a(o[0],o[1],o[2])}function i(e,t){var n=e[0],r=e[1],a=e[2],o=t[0],i=t[1],s=t[2],u=n-o,c=r-i,l=a-s,f=Math.sqrt(r*r+a*a),d=o-n,p=Math.sqrt(i*i+s*s)-f,h=Math.sqrt(u*u+c*c+l*l),m=Math.sqrt(h)>Math.sqrt(Math.abs(d))+Math.sqrt(Math.abs(p))?Math.sqrt(h*h-d*d-p*p):0;return d/=1,p/=1*(1+.045*f),m/=1*(1+.015*f),Math.sqrt(d*d+p*p+m*m)}function s(e,t){return i(o.apply(void 0,e),o.apply(void 0,t))}Object.defineProperty(t,"__esModule",{value:!0}),t.getColorIndex=t.getColorDiffStatus=t.hexDiff=t.rgbDiff=t.deltaE94=t.rgbToCIELab=t.xyzToCIELab=t.rgbToXyz=t.hslToRgb=t.rgbToHsl=t.rgbToHex=t.hexToRgb=t.defer=t.RSHIFT=t.SIGBITS=t.DELTAE94_DIFF_STATUS=void 0,t.DELTAE94_DIFF_STATUS={NA:0,PERFECT:1,CLOSE:2,GOOD:10,SIMILAR:50},t.SIGBITS=5,t.RSHIFT=8-t.SIGBITS,t.defer=function(){var e,t,n=new Promise((function(n,r){e=n,t=r}));return{resolve:e,reject:t,promise:n}},t.hexToRgb=n,t.rgbToHex=function(e,t,n){return"#"+((1<<24)+(e<<16)+(t<<8)+n).toString(16).slice(1,7)},t.rgbToHsl=function(e,t,n){e/=255,t/=255,n/=255;var r,a,o=Math.max(e,t,n),i=Math.min(e,t,n),s=(o+i)/2;if(o===i)r=a=0;else{var u=o-i;switch(a=s>.5?u/(2-o-i):u/(o+i),o){case e:r=(t-n)/u+(t<n?6:0);break;case t:r=(n-e)/u+2;break;case n:r=(e-t)/u+4}r/=6}return[r,a,s]},t.hslToRgb=function(e,t,n){var r,a,o;function i(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e}if(0===t)r=a=o=n;else{var s=n<.5?n*(1+t):n+t-n*t,u=2*n-s;r=i(u,s,e+1/3),a=i(u,s,e),o=i(u,s,e-1/3)}return[255*r,255*a,255*o]},t.rgbToXyz=r,t.xyzToCIELab=a,t.rgbToCIELab=o,t.deltaE94=i,t.rgbDiff=s,t.hexDiff=function(e,t){return s(n(e),n(t))},t.getColorDiffStatus=function(e){return e<t.DELTAE94_DIFF_STATUS.NA?"N/A":e<=t.DELTAE94_DIFF_STATUS.PERFECT?"Perfect":e<=t.DELTAE94_DIFF_STATUS.CLOSE?"Close":e<=t.DELTAE94_DIFF_STATUS.GOOD?"Good":e<t.DELTAE94_DIFF_STATUS.SIMILAR?"Similar":"Wrong"},t.getColorIndex=function(e,n,r){return(e<<2*t.SIGBITS)+(n<<t.SIGBITS)+r}},2786:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.hasOwnProperty.call(e,n)&&r(t,e,n);return a(t,e),t},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s=n(7547),u=i(n(4941)),c=o(n(1641)),l=o(n(376)),f=o(n(1261)),d=o(n(5210)),p=n(6933),h=function(){function e(t,n){this._src=t,this.opts=p({},n,e.DefaultOpts),this.opts.combinedFilter=d.combineFilters(this.opts.filters)}return e.from=function(e){return new u.default(e)},e.prototype._process=function(e,t){var n=t.quantizer,r=t.generator;return e.scaleDown(t),e.applyFilter(t.combinedFilter).then((function(e){return n(e.data,t)})).then((function(e){return s.Swatch.applyFilter(e,t.combinedFilter)})).then((function(e){return Promise.resolve(r(e))}))},e.prototype.palette=function(){return this.swatches()},e.prototype.swatches=function(){return this._palette},e.prototype.getPalette=function(e){var t=this,n=new this.opts.ImageClass,r=n.load(this._src).then((function(e){return t._process(e,t.opts)})).then((function(e){return t._palette=e,n.remove(),e}),(function(e){throw n.remove(),e}));return e&&r.then((function(t){return e(null,t)}),(function(t){return e(t)})),r},e.Builder=u.default,e.Quantizer=l,e.Generator=f,e.Filter=d,e.Util=c,e.Swatch=s.Swatch,e.DefaultOpts={colorCount:64,quality:5,generator:f.Default,ImageClass:null,quantizer:l.MMCQ,filters:[d.Default]},e}();t.default=h},1725:function(e){"use strict";var t=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable;function a(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(e){r[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(a){return!1}}()?Object.assign:function(e,o){for(var i,s,u=a(e),c=1;c<arguments.length;c++){for(var l in i=Object(arguments[c]))n.call(i,l)&&(u[l]=i[l]);if(t){s=t(i);for(var f=0;f<s.length;f++)r.call(i,s[f])&&(u[s[f]]=i[s[f]])}}return u}},888:function(e,t,n){"use strict";var r=n(9047);function a(){}function o(){}o.resetWarningCache=a,e.exports=function(){function e(e,t,n,a,o,i){if(i!==r){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:o,resetWarningCache:a};return n.PropTypes=n,n}},2007:function(e,t,n){e.exports=n(888)()},9047:function(e){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},7059:function(e){"use strict";function t(e,t){return Object.prototype.hasOwnProperty.call(e,t)}e.exports=function(e,n,r,a){n=n||"&",r=r||"=";var o={};if("string"!==typeof e||0===e.length)return o;var i=/\+/g;e=e.split(n);var s=1e3;a&&"number"===typeof a.maxKeys&&(s=a.maxKeys);var u=e.length;s>0&&u>s&&(u=s);for(var c=0;c<u;++c){var l,f,d,p,h=e[c].replace(i,"%20"),m=h.indexOf(r);m>=0?(l=h.substr(0,m),f=h.substr(m+1)):(l=h,f=""),d=decodeURIComponent(l),p=decodeURIComponent(f),t(o,d)?Array.isArray(o[d])?o[d].push(p):o[d]=[o[d],p]:o[d]=p}return o}},4297:function(e){"use strict";var t=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}};e.exports=function(e,n,r,a){return n=n||"&",r=r||"=",null===e&&(e=void 0),"object"===typeof e?Object.keys(e).map((function(a){var o=encodeURIComponent(t(a))+r;return Array.isArray(e[a])?e[a].map((function(e){return o+encodeURIComponent(t(e))})).join(n):o+encodeURIComponent(t(e[a]))})).join(n):a?encodeURIComponent(t(a))+r+encodeURIComponent(t(e)):""}},863:function(e,t,n){"use strict";t.decode=t.parse=n(7059),t.encode=t.stringify=n(4297)},6921:function(e){var t;"undefined"!==typeof self&&self,t=function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var a=t[r]={i:r,l:!1,exports:{}};return e[r].call(a.exports,a,a.exports,n),a.l=!0,a.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=109)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(17),a=n(18),o=n(19),i=n(45),s=n(46),u=n(47),c=n(48),l=n(49),f=n(12),d=n(32),p=n(33),h=n(31),m=n(1),v={Scope:m.Scope,create:m.create,find:m.find,query:m.query,register:m.register,Container:r.default,Format:a.default,Leaf:o.default,Embed:c.default,Scroll:i.default,Block:u.default,Inline:s.default,Text:l.default,Attributor:{Attribute:f.default,Class:d.default,Style:p.default,Store:h.default}};t.default=v},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var a=function(e){function t(t){var n=this;return t="[Parchment] "+t,(n=e.call(this,t)||this).message=t,n.name=n.constructor.name,n}return r(t,e),t}(Error);t.ParchmentError=a;var o,i={},s={},u={},c={};function l(e,t){var n;if(void 0===t&&(t=o.ANY),"string"===typeof e)n=c[e]||i[e];else if(e instanceof Text||e.nodeType===Node.TEXT_NODE)n=c.text;else if("number"===typeof e)e&o.LEVEL&o.BLOCK?n=c.block:e&o.LEVEL&o.INLINE&&(n=c.inline);else if(e instanceof HTMLElement){var r=(e.getAttribute("class")||"").split(/\s+/);for(var a in r)if(n=s[r[a]])break;n=n||u[e.tagName]}return null==n?null:t&o.LEVEL&n.scope&&t&o.TYPE&n.scope?n:null}t.DATA_KEY="__blot",function(e){e[e.TYPE=3]="TYPE",e[e.LEVEL=12]="LEVEL",e[e.ATTRIBUTE=13]="ATTRIBUTE",e[e.BLOT=14]="BLOT",e[e.INLINE=7]="INLINE",e[e.BLOCK=11]="BLOCK",e[e.BLOCK_BLOT=10]="BLOCK_BLOT",e[e.INLINE_BLOT=6]="INLINE_BLOT",e[e.BLOCK_ATTRIBUTE=9]="BLOCK_ATTRIBUTE",e[e.INLINE_ATTRIBUTE=5]="INLINE_ATTRIBUTE",e[e.ANY=15]="ANY"}(o=t.Scope||(t.Scope={})),t.create=function(e,t){var n=l(e);if(null==n)throw new a("Unable to create "+e+" blot");var r=n,o=e instanceof Node||e.nodeType===Node.TEXT_NODE?e:r.create(t);return new r(o,t)},t.find=function e(n,r){return void 0===r&&(r=!1),null==n?null:null!=n[t.DATA_KEY]?n[t.DATA_KEY].blot:r?e(n.parentNode,r):null},t.query=l,t.register=function e(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];if(t.length>1)return t.map((function(t){return e(t)}));var r=t[0];if("string"!==typeof r.blotName&&"string"!==typeof r.attrName)throw new a("Invalid definition");if("abstract"===r.blotName)throw new a("Cannot register abstract class");if(c[r.blotName||r.attrName]=r,"string"===typeof r.keyName)i[r.keyName]=r;else if(null!=r.className&&(s[r.className]=r),null!=r.tagName){Array.isArray(r.tagName)?r.tagName=r.tagName.map((function(e){return e.toUpperCase()})):r.tagName=r.tagName.toUpperCase();var o=Array.isArray(r.tagName)?r.tagName:[r.tagName];o.forEach((function(e){null!=u[e]&&null!=r.className||(u[e]=r)}))}return r}},function(e,t,n){var r=n(51),a=n(11),o=n(3),i=n(20),s=String.fromCharCode(0),u=function(e){Array.isArray(e)?this.ops=e:null!=e&&Array.isArray(e.ops)?this.ops=e.ops:this.ops=[]};u.prototype.insert=function(e,t){var n={};return 0===e.length?this:(n.insert=e,null!=t&&"object"===typeof t&&Object.keys(t).length>0&&(n.attributes=t),this.push(n))},u.prototype.delete=function(e){return e<=0?this:this.push({delete:e})},u.prototype.retain=function(e,t){if(e<=0)return this;var n={retain:e};return null!=t&&"object"===typeof t&&Object.keys(t).length>0&&(n.attributes=t),this.push(n)},u.prototype.push=function(e){var t=this.ops.length,n=this.ops[t-1];if(e=o(!0,{},e),"object"===typeof n){if("number"===typeof e.delete&&"number"===typeof n.delete)return this.ops[t-1]={delete:n.delete+e.delete},this;if("number"===typeof n.delete&&null!=e.insert&&(t-=1,"object"!==typeof(n=this.ops[t-1])))return this.ops.unshift(e),this;if(a(e.attributes,n.attributes)){if("string"===typeof e.insert&&"string"===typeof n.insert)return this.ops[t-1]={insert:n.insert+e.insert},"object"===typeof e.attributes&&(this.ops[t-1].attributes=e.attributes),this;if("number"===typeof e.retain&&"number"===typeof n.retain)return this.ops[t-1]={retain:n.retain+e.retain},"object"===typeof e.attributes&&(this.ops[t-1].attributes=e.attributes),this}}return t===this.ops.length?this.ops.push(e):this.ops.splice(t,0,e),this},u.prototype.chop=function(){var e=this.ops[this.ops.length-1];return e&&e.retain&&!e.attributes&&this.ops.pop(),this},u.prototype.filter=function(e){return this.ops.filter(e)},u.prototype.forEach=function(e){this.ops.forEach(e)},u.prototype.map=function(e){return this.ops.map(e)},u.prototype.partition=function(e){var t=[],n=[];return this.forEach((function(r){(e(r)?t:n).push(r)})),[t,n]},u.prototype.reduce=function(e,t){return this.ops.reduce(e,t)},u.prototype.changeLength=function(){return this.reduce((function(e,t){return t.insert?e+i.length(t):t.delete?e-t.delete:e}),0)},u.prototype.length=function(){return this.reduce((function(e,t){return e+i.length(t)}),0)},u.prototype.slice=function(e,t){e=e||0,"number"!==typeof t&&(t=1/0);for(var n=[],r=i.iterator(this.ops),a=0;a<t&&r.hasNext();){var o;a<e?o=r.next(e-a):(o=r.next(t-a),n.push(o)),a+=i.length(o)}return new u(n)},u.prototype.compose=function(e){var t=i.iterator(this.ops),n=i.iterator(e.ops),r=[],o=n.peek();if(null!=o&&"number"===typeof o.retain&&null==o.attributes){for(var s=o.retain;"insert"===t.peekType()&&t.peekLength()<=s;)s-=t.peekLength(),r.push(t.next());o.retain-s>0&&n.next(o.retain-s)}for(var c=new u(r);t.hasNext()||n.hasNext();)if("insert"===n.peekType())c.push(n.next());else if("delete"===t.peekType())c.push(t.next());else{var l=Math.min(t.peekLength(),n.peekLength()),f=t.next(l),d=n.next(l);if("number"===typeof d.retain){var p={};"number"===typeof f.retain?p.retain=l:p.insert=f.insert;var h=i.attributes.compose(f.attributes,d.attributes,"number"===typeof f.retain);if(h&&(p.attributes=h),c.push(p),!n.hasNext()&&a(c.ops[c.ops.length-1],p)){var m=new u(t.rest());return c.concat(m).chop()}}else"number"===typeof d.delete&&"number"===typeof f.retain&&c.push(d)}return c.chop()},u.prototype.concat=function(e){var t=new u(this.ops.slice());return e.ops.length>0&&(t.push(e.ops[0]),t.ops=t.ops.concat(e.ops.slice(1))),t},u.prototype.diff=function(e,t){if(this.ops===e.ops)return new u;var n=[this,e].map((function(t){return t.map((function(n){if(null!=n.insert)return"string"===typeof n.insert?n.insert:s;throw new Error("diff() called "+(t===e?"on":"with")+" non-document")})).join("")})),o=new u,c=r(n[0],n[1],t),l=i.iterator(this.ops),f=i.iterator(e.ops);return c.forEach((function(e){for(var t=e[1].length;t>0;){var n=0;switch(e[0]){case r.INSERT:n=Math.min(f.peekLength(),t),o.push(f.next(n));break;case r.DELETE:n=Math.min(t,l.peekLength()),l.next(n),o.delete(n);break;case r.EQUAL:n=Math.min(l.peekLength(),f.peekLength(),t);var s=l.next(n),u=f.next(n);a(s.insert,u.insert)?o.retain(n,i.attributes.diff(s.attributes,u.attributes)):o.push(u).delete(n)}t-=n}})),o.chop()},u.prototype.eachLine=function(e,t){t=t||"\n";for(var n=i.iterator(this.ops),r=new u,a=0;n.hasNext();){if("insert"!==n.peekType())return;var o=n.peek(),s=i.length(o)-n.peekLength(),c="string"===typeof o.insert?o.insert.indexOf(t,s)-s:-1;if(c<0)r.push(n.next());else if(c>0)r.push(n.next(c));else{if(!1===e(r,n.next(1).attributes||{},a))return;a+=1,r=new u}}r.length()>0&&e(r,{},a)},u.prototype.transform=function(e,t){if(t=!!t,"number"===typeof e)return this.transformPosition(e,t);for(var n=i.iterator(this.ops),r=i.iterator(e.ops),a=new u;n.hasNext()||r.hasNext();)if("insert"!==n.peekType()||!t&&"insert"===r.peekType())if("insert"===r.peekType())a.push(r.next());else{var o=Math.min(n.peekLength(),r.peekLength()),s=n.next(o),c=r.next(o);if(s.delete)continue;c.delete?a.push(c):a.retain(o,i.attributes.transform(s.attributes,c.attributes,t))}else a.retain(i.length(n.next()));return a.chop()},u.prototype.transformPosition=function(e,t){t=!!t;for(var n=i.iterator(this.ops),r=0;n.hasNext()&&r<=e;){var a=n.peekLength(),o=n.peekType();n.next(),"delete"!==o?("insert"===o&&(r<e||!t)&&(e+=a),r+=a):e-=Math.min(a,e-r)}return e},e.exports=u},function(e,t){"use strict";var n=Object.prototype.hasOwnProperty,r=Object.prototype.toString,a=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=function(e){return"function"===typeof Array.isArray?Array.isArray(e):"[object Array]"===r.call(e)},s=function(e){if(!e||"[object Object]"!==r.call(e))return!1;var t,a=n.call(e,"constructor"),o=e.constructor&&e.constructor.prototype&&n.call(e.constructor.prototype,"isPrototypeOf");if(e.constructor&&!a&&!o)return!1;for(t in e);return"undefined"===typeof t||n.call(e,t)},u=function(e,t){a&&"__proto__"===t.name?a(e,t.name,{enumerable:!0,configurable:!0,value:t.newValue,writable:!0}):e[t.name]=t.newValue},c=function(e,t){if("__proto__"===t){if(!n.call(e,t))return;if(o)return o(e,t).value}return e[t]};e.exports=function e(){var t,n,r,a,o,l,f=arguments[0],d=1,p=arguments.length,h=!1;for("boolean"===typeof f&&(h=f,f=arguments[1]||{},d=2),(null==f||"object"!==typeof f&&"function"!==typeof f)&&(f={});d<p;++d)if(null!=(t=arguments[d]))for(n in t)r=c(f,n),f!==(a=c(t,n))&&(h&&a&&(s(a)||(o=i(a)))?(o?(o=!1,l=r&&i(r)?r:[]):l=r&&s(r)?r:{},u(f,{name:n,newValue:e(h,l,a)})):"undefined"!==typeof a&&u(f,{name:n,newValue:a}));return f}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.BlockEmbed=t.bubbleFormats=void 0;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function e(t,n,r){null===t&&(t=Function.prototype);var a=Object.getOwnPropertyDescriptor(t,n);if(void 0===a){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in a)return a.value;var i=a.get;return void 0!==i?i.call(r):void 0},o=f(n(3)),i=f(n(2)),s=f(n(0)),u=f(n(16)),c=f(n(6)),l=f(n(7));function f(e){return e&&e.__esModule?e:{default:e}}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function h(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var m=function(e){function t(){return d(this,t),p(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return h(t,e),r(t,[{key:"attach",value:function(){a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"attach",this).call(this),this.attributes=new s.default.Attributor.Store(this.domNode)}},{key:"delta",value:function(){return(new i.default).insert(this.value(),(0,o.default)(this.formats(),this.attributes.values()))}},{key:"format",value:function(e,t){var n=s.default.query(e,s.default.Scope.BLOCK_ATTRIBUTE);null!=n&&this.attributes.attribute(n,t)}},{key:"formatAt",value:function(e,t,n,r){this.format(n,r)}},{key:"insertAt",value:function(e,n,r){if("string"===typeof n&&n.endsWith("\n")){var o=s.default.create(v.blotName);this.parent.insertBefore(o,0===e?this:this.next),o.insertAt(0,n.slice(0,-1))}else a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"insertAt",this).call(this,e,n,r)}}]),t}(s.default.Embed);m.scope=s.default.Scope.BLOCK_BLOT;var v=function(e){function t(e){d(this,t);var n=p(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.cache={},n}return h(t,e),r(t,[{key:"delta",value:function(){return null==this.cache.delta&&(this.cache.delta=this.descendants(s.default.Leaf).reduce((function(e,t){return 0===t.length()?e:e.insert(t.value(),g(t))}),new i.default).insert("\n",g(this))),this.cache.delta}},{key:"deleteAt",value:function(e,n){a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"deleteAt",this).call(this,e,n),this.cache={}}},{key:"formatAt",value:function(e,n,r,o){n<=0||(s.default.query(r,s.default.Scope.BLOCK)?e+n===this.length()&&this.format(r,o):a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"formatAt",this).call(this,e,Math.min(n,this.length()-e-1),r,o),this.cache={})}},{key:"insertAt",value:function(e,n,r){if(null!=r)return a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"insertAt",this).call(this,e,n,r);if(0!==n.length){var o=n.split("\n"),i=o.shift();i.length>0&&(e<this.length()-1||null==this.children.tail?a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"insertAt",this).call(this,Math.min(e,this.length()-1),i):this.children.tail.insertAt(this.children.tail.length(),i),this.cache={});var s=this;o.reduce((function(e,t){return(s=s.split(e,!0)).insertAt(0,t),t.length}),e+i.length)}}},{key:"insertBefore",value:function(e,n){var r=this.children.head;a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"insertBefore",this).call(this,e,n),r instanceof u.default&&r.remove(),this.cache={}}},{key:"length",value:function(){return null==this.cache.length&&(this.cache.length=a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"length",this).call(this)+1),this.cache.length}},{key:"moveChildren",value:function(e,n){a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"moveChildren",this).call(this,e,n),this.cache={}}},{key:"optimize",value:function(e){a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"optimize",this).call(this,e),this.cache={}}},{key:"path",value:function(e){return a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"path",this).call(this,e,!0)}},{key:"removeChild",value:function(e){a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"removeChild",this).call(this,e),this.cache={}}},{key:"split",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(n&&(0===e||e>=this.length()-1)){var r=this.clone();return 0===e?(this.parent.insertBefore(r,this),this):(this.parent.insertBefore(r,this.next),r)}var o=a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"split",this).call(this,e,n);return this.cache={},o}}]),t}(s.default.Block);function g(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return null==e?t:("function"===typeof e.formats&&(t=(0,o.default)(t,e.formats())),null==e.parent||"scroll"==e.parent.blotName||e.parent.statics.scope!==e.statics.scope?t:g(e.parent,t))}v.blotName="block",v.tagName="P",v.defaultChild="break",v.allowedChildren=[c.default,s.default.Embed,l.default],t.bubbleFormats=g,t.BlockEmbed=m,t.default=v},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.overload=t.expandConfig=void 0;var r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,a=!1,o=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(u){a=!0,o=u}finally{try{!r&&s.return&&s.return()}finally{if(a)throw o}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();n(50);var i=v(n(2)),s=v(n(14)),u=v(n(8)),c=v(n(9)),l=v(n(0)),f=n(15),d=v(f),p=v(n(3)),h=v(n(10)),m=v(n(34));function v(e){return e&&e.__esModule?e:{default:e}}function g(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function y(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var b=(0,h.default)("quill"),x=function(){function e(t){var n=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(y(this,e),this.options=w(t,r),this.container=this.options.container,null==this.container)return b.error("Invalid Quill container",t);this.options.debug&&e.debug(this.options.debug);var a=this.container.innerHTML.trim();this.container.classList.add("ql-container"),this.container.innerHTML="",this.container.__quill=this,this.root=this.addContainer("ql-editor"),this.root.classList.add("ql-blank"),this.root.setAttribute("data-gramm",!1),this.scrollingContainer=this.options.scrollingContainer||this.root,this.emitter=new u.default,this.scroll=l.default.create(this.root,{emitter:this.emitter,whitelist:this.options.formats}),this.editor=new s.default(this.scroll),this.selection=new d.default(this.scroll,this.emitter),this.theme=new this.options.theme(this,this.options),this.keyboard=this.theme.addModule("keyboard"),this.clipboard=this.theme.addModule("clipboard"),this.history=this.theme.addModule("history"),this.theme.init(),this.emitter.on(u.default.events.EDITOR_CHANGE,(function(e){e===u.default.events.TEXT_CHANGE&&n.root.classList.toggle("ql-blank",n.editor.isBlank())})),this.emitter.on(u.default.events.SCROLL_UPDATE,(function(e,t){var r=n.selection.lastRange,a=r&&0===r.length?r.index:void 0;k.call(n,(function(){return n.editor.update(null,t,a)}),e)}));var o=this.clipboard.convert("<div class='ql-editor' style=\"white-space: normal;\">"+a+"<p><br></p></div>");this.setContents(o),this.history.clear(),this.options.placeholder&&this.root.setAttribute("data-placeholder",this.options.placeholder),this.options.readOnly&&this.disable()}return o(e,null,[{key:"debug",value:function(e){!0===e&&(e="log"),h.default.level(e)}},{key:"find",value:function(e){return e.__quill||l.default.find(e)}},{key:"import",value:function(e){return null==this.imports[e]&&b.error("Cannot import "+e+". Are you sure it was registered?"),this.imports[e]}},{key:"register",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if("string"!==typeof e){var a=e.attrName||e.blotName;"string"===typeof a?this.register("formats/"+a,e,t):Object.keys(e).forEach((function(r){n.register(r,e[r],t)}))}else null==this.imports[e]||r||b.warn("Overwriting "+e+" with",t),this.imports[e]=t,(e.startsWith("blots/")||e.startsWith("formats/"))&&"abstract"!==t.blotName?l.default.register(t):e.startsWith("modules")&&"function"===typeof t.register&&t.register()}}]),o(e,[{key:"addContainer",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if("string"===typeof e){var n=e;(e=document.createElement("div")).classList.add(n)}return this.container.insertBefore(e,t),e}},{key:"blur",value:function(){this.selection.setRange(null)}},{key:"deleteText",value:function(e,t,n){var r=this,o=S(e,t,n),i=a(o,4);return e=i[0],t=i[1],n=i[3],k.call(this,(function(){return r.editor.deleteText(e,t)}),n,e,-1*t)}},{key:"disable",value:function(){this.enable(!1)}},{key:"enable",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.scroll.enable(e),this.container.classList.toggle("ql-disabled",!e)}},{key:"focus",value:function(){var e=this.scrollingContainer.scrollTop;this.selection.focus(),this.scrollingContainer.scrollTop=e,this.scrollIntoView()}},{key:"format",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:u.default.sources.API;return k.call(this,(function(){var r=n.getSelection(!0),a=new i.default;if(null==r)return a;if(l.default.query(e,l.default.Scope.BLOCK))a=n.editor.formatLine(r.index,r.length,g({},e,t));else{if(0===r.length)return n.selection.format(e,t),a;a=n.editor.formatText(r.index,r.length,g({},e,t))}return n.setSelection(r,u.default.sources.SILENT),a}),r)}},{key:"formatLine",value:function(e,t,n,r,o){var i,s=this,u=S(e,t,n,r,o),c=a(u,4);return e=c[0],t=c[1],i=c[2],o=c[3],k.call(this,(function(){return s.editor.formatLine(e,t,i)}),o,e,0)}},{key:"formatText",value:function(e,t,n,r,o){var i,s=this,u=S(e,t,n,r,o),c=a(u,4);return e=c[0],t=c[1],i=c[2],o=c[3],k.call(this,(function(){return s.editor.formatText(e,t,i)}),o,e,0)}},{key:"getBounds",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=void 0;n="number"===typeof e?this.selection.getBounds(e,t):this.selection.getBounds(e.index,e.length);var r=this.container.getBoundingClientRect();return{bottom:n.bottom-r.top,height:n.height,left:n.left-r.left,right:n.right-r.left,top:n.top-r.top,width:n.width}}},{key:"getContents",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.getLength()-e,n=S(e,t),r=a(n,2);return e=r[0],t=r[1],this.editor.getContents(e,t)}},{key:"getFormat",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.getSelection(!0),t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return"number"===typeof e?this.editor.getFormat(e,t):this.editor.getFormat(e.index,e.length)}},{key:"getIndex",value:function(e){return e.offset(this.scroll)}},{key:"getLength",value:function(){return this.scroll.length()}},{key:"getLeaf",value:function(e){return this.scroll.leaf(e)}},{key:"getLine",value:function(e){return this.scroll.line(e)}},{key:"getLines",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Number.MAX_VALUE;return"number"!==typeof e?this.scroll.lines(e.index,e.length):this.scroll.lines(e,t)}},{key:"getModule",value:function(e){return this.theme.modules[e]}},{key:"getSelection",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return e&&this.focus(),this.update(),this.selection.getRange()[0]}},{key:"getText",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.getLength()-e,n=S(e,t),r=a(n,2);return e=r[0],t=r[1],this.editor.getText(e,t)}},{key:"hasFocus",value:function(){return this.selection.hasFocus()}},{key:"insertEmbed",value:function(t,n,r){var a=this,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.sources.API;return k.call(this,(function(){return a.editor.insertEmbed(t,n,r)}),o,t)}},{key:"insertText",value:function(e,t,n,r,o){var i,s=this,u=S(e,0,n,r,o),c=a(u,4);return e=c[0],i=c[2],o=c[3],k.call(this,(function(){return s.editor.insertText(e,t,i)}),o,e,t.length)}},{key:"isEnabled",value:function(){return!this.container.classList.contains("ql-disabled")}},{key:"off",value:function(){return this.emitter.off.apply(this.emitter,arguments)}},{key:"on",value:function(){return this.emitter.on.apply(this.emitter,arguments)}},{key:"once",value:function(){return this.emitter.once.apply(this.emitter,arguments)}},{key:"pasteHTML",value:function(e,t,n){this.clipboard.dangerouslyPasteHTML(e,t,n)}},{key:"removeFormat",value:function(e,t,n){var r=this,o=S(e,t,n),i=a(o,4);return e=i[0],t=i[1],n=i[3],k.call(this,(function(){return r.editor.removeFormat(e,t)}),n,e)}},{key:"scrollIntoView",value:function(){this.selection.scrollIntoView(this.scrollingContainer)}},{key:"setContents",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:u.default.sources.API;return k.call(this,(function(){e=new i.default(e);var n=t.getLength(),r=t.editor.deleteText(0,n),a=t.editor.applyDelta(e),o=a.ops[a.ops.length-1];return null!=o&&"string"===typeof o.insert&&"\n"===o.insert[o.insert.length-1]&&(t.editor.deleteText(t.getLength()-1,1),a.delete(1)),r.compose(a)}),n)}},{key:"setSelection",value:function(t,n,r){if(null==t)this.selection.setRange(null,n||e.sources.API);else{var o=S(t,n,r),i=a(o,4);t=i[0],n=i[1],r=i[3],this.selection.setRange(new f.Range(t,n),r),r!==u.default.sources.SILENT&&this.selection.scrollIntoView(this.scrollingContainer)}}},{key:"setText",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:u.default.sources.API,n=(new i.default).insert(e);return this.setContents(n,t)}},{key:"update",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u.default.sources.USER,t=this.scroll.update(e);return this.selection.update(e),t}},{key:"updateContents",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:u.default.sources.API;return k.call(this,(function(){return e=new i.default(e),t.editor.applyDelta(e,n)}),n,!0)}}]),e}();function w(e,t){if((t=(0,p.default)(!0,{container:e,modules:{clipboard:!0,keyboard:!0,history:!0}},t)).theme&&t.theme!==x.DEFAULTS.theme){if(t.theme=x.import("themes/"+t.theme),null==t.theme)throw new Error("Invalid theme "+t.theme+". Did you register it?")}else t.theme=m.default;var n=(0,p.default)(!0,{},t.theme.DEFAULTS);[n,t].forEach((function(e){e.modules=e.modules||{},Object.keys(e.modules).forEach((function(t){!0===e.modules[t]&&(e.modules[t]={})}))}));var r=Object.keys(n.modules).concat(Object.keys(t.modules)).reduce((function(e,t){var n=x.import("modules/"+t);return null==n?b.error("Cannot load "+t+" module. Are you sure you registered it?"):e[t]=n.DEFAULTS||{},e}),{});return null!=t.modules&&t.modules.toolbar&&t.modules.toolbar.constructor!==Object&&(t.modules.toolbar={container:t.modules.toolbar}),t=(0,p.default)(!0,{},x.DEFAULTS,{modules:r},n,t),["bounds","container","scrollingContainer"].forEach((function(e){"string"===typeof t[e]&&(t[e]=document.querySelector(t[e]))})),t.modules=Object.keys(t.modules).reduce((function(e,n){return t.modules[n]&&(e[n]=t.modules[n]),e}),{}),t}function k(e,t,n,r){if(this.options.strict&&!this.isEnabled()&&t===u.default.sources.USER)return new i.default;var a=null==n?null:this.getSelection(),o=this.editor.delta,s=e();if(null!=a&&(!0===n&&(n=a.index),null==r?a=_(a,s,t):0!==r&&(a=_(a,n,r,t)),this.setSelection(a,u.default.sources.SILENT)),s.length()>0){var c,l,f=[u.default.events.TEXT_CHANGE,s,o,t];(c=this.emitter).emit.apply(c,[u.default.events.EDITOR_CHANGE].concat(f)),t!==u.default.sources.SILENT&&(l=this.emitter).emit.apply(l,f)}return s}function S(e,t,n,a,o){var i={};return"number"===typeof e.index&&"number"===typeof e.length?"number"!==typeof t?(o=a,a=n,n=t,t=e.length,e=e.index):(t=e.length,e=e.index):"number"!==typeof t&&(o=a,a=n,n=t,t=0),"object"===("undefined"===typeof n?"undefined":r(n))?(i=n,o=a):"string"===typeof n&&(null!=a?i[n]=a:o=n),[e,t,i,o=o||u.default.sources.API]}function _(e,t,n,r){if(null==e)return null;var o=void 0,s=void 0;if(t instanceof i.default){var c=[e.index,e.index+e.length].map((function(e){return t.transformPosition(e,r!==u.default.sources.USER)})),l=a(c,2);o=l[0],s=l[1]}else{var d=[e.index,e.index+e.length].map((function(e){return e<t||e===t&&r===u.default.sources.USER?e:n>=0?e+n:Math.max(t,e+n)})),p=a(d,2);o=p[0],s=p[1]}return new f.Range(o,s-o)}x.DEFAULTS={bounds:null,formats:null,modules:{},placeholder:"",readOnly:!1,scrollingContainer:null,strict:!0,theme:"default"},x.events=u.default.events,x.sources=u.default.sources,x.version="1.3.7",x.imports={delta:i.default,parchment:l.default,"core/module":c.default,"core/theme":m.default},t.expandConfig=w,t.overload=S,t.default=x},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function e(t,n,r){null===t&&(t=Function.prototype);var a=Object.getOwnPropertyDescriptor(t,n);if(void 0===a){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in a)return a.value;var i=a.get;return void 0!==i?i.call(r):void 0},o=s(n(7)),i=s(n(0));function s(e){return e&&e.__esModule?e:{default:e}}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}var l=function(e){function t(){return u(this,t),c(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),r(t,[{key:"formatAt",value:function(e,n,r,o){if(t.compare(this.statics.blotName,r)<0&&i.default.query(r,i.default.Scope.BLOT)){var s=this.isolate(e,n);o&&s.wrap(r,o)}else a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"formatAt",this).call(this,e,n,r,o)}},{key:"optimize",value:function(e){if(a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"optimize",this).call(this,e),this.parent instanceof t&&t.compare(this.statics.blotName,this.parent.statics.blotName)>0){var n=this.parent.isolate(this.offset(),this.length());this.moveChildren(n),n.wrap(this)}}}],[{key:"compare",value:function(e,n){var r=t.order.indexOf(e),a=t.order.indexOf(n);return r>=0||a>=0?r-a:e===n?0:e<n?-1:1}}]),t}(i.default.Inline);l.allowedChildren=[l,i.default.Embed,o.default],l.order=["cursor","inline","underline","strike","italic","bold","script","link","code"],t.default=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,a=n(0);function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}var s=function(e){function t(){return o(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t}(((r=a)&&r.__esModule?r:{default:r}).default.Text);t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function e(t,n,r){null===t&&(t=Function.prototype);var a=Object.getOwnPropertyDescriptor(t,n);if(void 0===a){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in a)return a.value;var i=a.get;return void 0!==i?i.call(r):void 0},o=i(n(54));function i(e){return e&&e.__esModule?e:{default:e}}var s=(0,i(n(10)).default)("quill:events");["selectionchange","mousedown","mouseup","click"].forEach((function(e){document.addEventListener(e,(function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];[].slice.call(document.querySelectorAll(".ql-container")).forEach((function(e){var n;e.__quill&&e.__quill.emitter&&(n=e.__quill.emitter).handleDOM.apply(n,t)}))}))}));var u=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.listeners={},e.on("error",s.error),e}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),r(t,[{key:"emit",value:function(){s.log.apply(s,arguments),a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"emit",this).apply(this,arguments)}},{key:"handleDOM",value:function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];(this.listeners[e.type]||[]).forEach((function(t){var r=t.node,a=t.handler;(e.target===r||r.contains(e.target))&&a.apply(void 0,[e].concat(n))}))}},{key:"listenDOM",value:function(e,t,n){this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push({node:t,handler:n})}}]),t}(o.default);u.events={EDITOR_CHANGE:"editor-change",SCROLL_BEFORE_UPDATE:"scroll-before-update",SCROLL_OPTIMIZE:"scroll-optimize",SCROLL_UPDATE:"scroll-update",SELECTION_CHANGE:"selection-change",TEXT_CHANGE:"text-change"},u.sources={API:"api",SILENT:"silent",USER:"user"},t.default=u},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};r(this,e),this.quill=t,this.options=n};a.DEFAULTS={},t.default=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=["error","warn","log","info"],a="warn";function o(e){if(r.indexOf(e)<=r.indexOf(a)){for(var t,n=arguments.length,o=Array(n>1?n-1:0),i=1;i<n;i++)o[i-1]=arguments[i];(t=console)[e].apply(t,o)}}function i(e){return r.reduce((function(t,n){return t[n]=o.bind(console,n,e),t}),{})}o.level=i.level=function(e){a=e},t.default=i},function(e,t,n){var r=Array.prototype.slice,a=n(52),o=n(53),i=e.exports=function(e,t,n){return n||(n={}),e===t||(e instanceof Date&&t instanceof Date?e.getTime()===t.getTime():!e||!t||"object"!=typeof e&&"object"!=typeof t?n.strict?e===t:e==t:function(e,t,n){var c,l;if(s(e)||s(t))return!1;if(e.prototype!==t.prototype)return!1;if(o(e))return!!o(t)&&(e=r.call(e),t=r.call(t),i(e,t,n));if(u(e)){if(!u(t))return!1;if(e.length!==t.length)return!1;for(c=0;c<e.length;c++)if(e[c]!==t[c])return!1;return!0}try{var f=a(e),d=a(t)}catch(p){return!1}if(f.length!=d.length)return!1;for(f.sort(),d.sort(),c=f.length-1;c>=0;c--)if(f[c]!=d[c])return!1;for(c=f.length-1;c>=0;c--)if(l=f[c],!i(e[l],t[l],n))return!1;return typeof e===typeof t}(e,t,n))};function s(e){return null===e||void 0===e}function u(e){return!(!e||"object"!==typeof e||"number"!==typeof e.length)&&"function"===typeof e.copy&&"function"===typeof e.slice&&!(e.length>0&&"number"!==typeof e[0])}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1),a=function(){function e(e,t,n){void 0===n&&(n={}),this.attrName=e,this.keyName=t;var a=r.Scope.TYPE&r.Scope.ATTRIBUTE;null!=n.scope?this.scope=n.scope&r.Scope.LEVEL|a:this.scope=r.Scope.ATTRIBUTE,null!=n.whitelist&&(this.whitelist=n.whitelist)}return e.keys=function(e){return[].map.call(e.attributes,(function(e){return e.name}))},e.prototype.add=function(e,t){return!!this.canAdd(e,t)&&(e.setAttribute(this.keyName,t),!0)},e.prototype.canAdd=function(e,t){return null!=r.query(e,r.Scope.BLOT&(this.scope|r.Scope.TYPE))&&(null==this.whitelist||("string"===typeof t?this.whitelist.indexOf(t.replace(/["']/g,""))>-1:this.whitelist.indexOf(t)>-1))},e.prototype.remove=function(e){e.removeAttribute(this.keyName)},e.prototype.value=function(e){var t=e.getAttribute(this.keyName);return this.canAdd(e,t)&&t?t:""},e}();t.default=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.Code=void 0;var r=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,a=!1,o=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(u){a=!0,o=u}finally{try{!r&&s.return&&s.return()}finally{if(a)throw o}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function e(t,n,r){null===t&&(t=Function.prototype);var a=Object.getOwnPropertyDescriptor(t,n);if(void 0===a){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in a)return a.value;var i=a.get;return void 0!==i?i.call(r):void 0},i=f(n(2)),s=f(n(0)),u=f(n(4)),c=f(n(6)),l=f(n(7));function f(e){return e&&e.__esModule?e:{default:e}}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function h(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var m=function(e){function t(){return d(this,t),p(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return h(t,e),t}(c.default);m.blotName="code",m.tagName="CODE";var v=function(e){function t(){return d(this,t),p(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return h(t,e),a(t,[{key:"delta",value:function(){var e=this,t=this.domNode.textContent;return t.endsWith("\n")&&(t=t.slice(0,-1)),t.split("\n").reduce((function(t,n){return t.insert(n).insert("\n",e.formats())}),new i.default)}},{key:"format",value:function(e,n){if(e!==this.statics.blotName||!n){var a=this.descendant(l.default,this.length()-1),i=r(a,1)[0];null!=i&&i.deleteAt(i.length()-1,1),o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"format",this).call(this,e,n)}}},{key:"formatAt",value:function(e,n,r,a){if(0!==n&&null!=s.default.query(r,s.default.Scope.BLOCK)&&(r!==this.statics.blotName||a!==this.statics.formats(this.domNode))){var o=this.newlineIndex(e);if(!(o<0||o>=e+n)){var i=this.newlineIndex(e,!0)+1,u=o-i+1,c=this.isolate(i,u),l=c.next;c.format(r,a),l instanceof t&&l.formatAt(0,e-i+n-u,r,a)}}}},{key:"insertAt",value:function(e,t,n){if(null==n){var a=this.descendant(l.default,e),o=r(a,2),i=o[0],s=o[1];i.insertAt(s,t)}}},{key:"length",value:function(){var e=this.domNode.textContent.length;return this.domNode.textContent.endsWith("\n")?e:e+1}},{key:"newlineIndex",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(t)return this.domNode.textContent.slice(0,e).lastIndexOf("\n");var n=this.domNode.textContent.slice(e).indexOf("\n");return n>-1?e+n:-1}},{key:"optimize",value:function(e){this.domNode.textContent.endsWith("\n")||this.appendChild(s.default.create("text","\n")),o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"optimize",this).call(this,e);var n=this.next;null!=n&&n.prev===this&&n.statics.blotName===this.statics.blotName&&this.statics.formats(this.domNode)===n.statics.formats(n.domNode)&&(n.optimize(e),n.moveChildren(this),n.remove())}},{key:"replace",value:function(e){o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"replace",this).call(this,e),[].slice.call(this.domNode.querySelectorAll("*")).forEach((function(e){var t=s.default.find(e);null==t?e.parentNode.removeChild(e):t instanceof s.default.Embed?t.remove():t.unwrap()}))}}],[{key:"create",value:function(e){var n=o(t.__proto__||Object.getPrototypeOf(t),"create",this).call(this,e);return n.setAttribute("spellcheck",!1),n}},{key:"formats",value:function(){return!0}}]),t}(u.default);v.blotName="code-block",v.tagName="PRE",v.TAB="  ",t.Code=m,t.default=v},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,a=!1,o=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(u){a=!0,o=u}finally{try{!r&&s.return&&s.return()}finally{if(a)throw o}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=g(n(2)),s=g(n(20)),u=g(n(0)),c=g(n(13)),l=g(n(24)),f=n(4),d=g(f),p=g(n(16)),h=g(n(21)),m=g(n(11)),v=g(n(3));function g(e){return e&&e.__esModule?e:{default:e}}var y=/^[ -~]*$/,b=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.scroll=t,this.delta=this.getDelta()}return o(e,[{key:"applyDelta",value:function(e){var t=this,n=!1;this.scroll.update();var o=this.scroll.length();return this.scroll.batchStart(),(e=function(e){return e.reduce((function(e,t){if(1===t.insert){var n=(0,h.default)(t.attributes);return delete n.image,e.insert({image:t.attributes.image},n)}if(null==t.attributes||!0!==t.attributes.list&&!0!==t.attributes.bullet||((t=(0,h.default)(t)).attributes.list?t.attributes.list="ordered":(t.attributes.list="bullet",delete t.attributes.bullet)),"string"===typeof t.insert){var r=t.insert.replace(/\r\n/g,"\n").replace(/\r/g,"\n");return e.insert(r,t.attributes)}return e.push(t)}),new i.default)}(e)).reduce((function(e,i){var c=i.retain||i.delete||i.insert.length||1,l=i.attributes||{};if(null!=i.insert){if("string"===typeof i.insert){var p=i.insert;p.endsWith("\n")&&n&&(n=!1,p=p.slice(0,-1)),e>=o&&!p.endsWith("\n")&&(n=!0),t.scroll.insertAt(e,p);var h=t.scroll.line(e),m=a(h,2),g=m[0],y=m[1],b=(0,v.default)({},(0,f.bubbleFormats)(g));if(g instanceof d.default){var x=g.descendant(u.default.Leaf,y),w=a(x,1)[0];b=(0,v.default)(b,(0,f.bubbleFormats)(w))}l=s.default.attributes.diff(b,l)||{}}else if("object"===r(i.insert)){var k=Object.keys(i.insert)[0];if(null==k)return e;t.scroll.insertAt(e,k,i.insert[k])}o+=c}return Object.keys(l).forEach((function(n){t.scroll.formatAt(e,c,n,l[n])})),e+c}),0),e.reduce((function(e,n){return"number"===typeof n.delete?(t.scroll.deleteAt(e,n.delete),e):e+(n.retain||n.insert.length||1)}),0),this.scroll.batchEnd(),this.update(e)}},{key:"deleteText",value:function(e,t){return this.scroll.deleteAt(e,t),this.update((new i.default).retain(e).delete(t))}},{key:"formatLine",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.scroll.update(),Object.keys(r).forEach((function(a){if(null==n.scroll.whitelist||n.scroll.whitelist[a]){var o=n.scroll.lines(e,Math.max(t,1)),i=t;o.forEach((function(t){var o=t.length();if(t instanceof c.default){var s=e-t.offset(n.scroll),u=t.newlineIndex(s+i)-s+1;t.formatAt(s,u,a,r[a])}else t.format(a,r[a]);i-=o}))}})),this.scroll.optimize(),this.update((new i.default).retain(e).retain(t,(0,h.default)(r)))}},{key:"formatText",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return Object.keys(r).forEach((function(a){n.scroll.formatAt(e,t,a,r[a])})),this.update((new i.default).retain(e).retain(t,(0,h.default)(r)))}},{key:"getContents",value:function(e,t){return this.delta.slice(e,e+t)}},{key:"getDelta",value:function(){return this.scroll.lines().reduce((function(e,t){return e.concat(t.delta())}),new i.default)}},{key:"getFormat",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=[],r=[];0===t?this.scroll.path(e).forEach((function(e){var t=a(e,1)[0];t instanceof d.default?n.push(t):t instanceof u.default.Leaf&&r.push(t)})):(n=this.scroll.lines(e,t),r=this.scroll.descendants(u.default.Leaf,e,t));var o=[n,r].map((function(e){if(0===e.length)return{};for(var t=(0,f.bubbleFormats)(e.shift());Object.keys(t).length>0;){var n=e.shift();if(null==n)return t;t=x((0,f.bubbleFormats)(n),t)}return t}));return v.default.apply(v.default,o)}},{key:"getText",value:function(e,t){return this.getContents(e,t).filter((function(e){return"string"===typeof e.insert})).map((function(e){return e.insert})).join("")}},{key:"insertEmbed",value:function(e,t,n){return this.scroll.insertAt(e,t,n),this.update((new i.default).retain(e).insert(function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}({},t,n)))}},{key:"insertText",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return t=t.replace(/\r\n/g,"\n").replace(/\r/g,"\n"),this.scroll.insertAt(e,t),Object.keys(r).forEach((function(a){n.scroll.formatAt(e,t.length,a,r[a])})),this.update((new i.default).retain(e).insert(t,(0,h.default)(r)))}},{key:"isBlank",value:function(){if(0==this.scroll.children.length)return!0;if(this.scroll.children.length>1)return!1;var e=this.scroll.children.head;return e.statics.blotName===d.default.blotName&&!(e.children.length>1)&&e.children.head instanceof p.default}},{key:"removeFormat",value:function(e,t){var n=this.getText(e,t),r=this.scroll.line(e+t),o=a(r,2),s=o[0],u=o[1],l=0,f=new i.default;null!=s&&(l=s instanceof c.default?s.newlineIndex(u)-u+1:s.length()-u,f=s.delta().slice(u,u+l-1).insert("\n"));var d=this.getContents(e,t+l).diff((new i.default).insert(n).concat(f)),p=(new i.default).retain(e).concat(d);return this.applyDelta(p)}},{key:"update",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,r=this.delta;if(1===t.length&&"characterData"===t[0].type&&t[0].target.data.match(y)&&u.default.find(t[0].target)){var a=u.default.find(t[0].target),o=(0,f.bubbleFormats)(a),s=a.offset(this.scroll),c=t[0].oldValue.replace(l.default.CONTENTS,""),d=(new i.default).insert(c),p=(new i.default).insert(a.value()),h=(new i.default).retain(s).concat(d.diff(p,n));e=h.reduce((function(e,t){return t.insert?e.insert(t.insert,o):e.push(t)}),new i.default),this.delta=r.compose(e)}else this.delta=this.getDelta(),e&&(0,m.default)(r.compose(e),this.delta)||(e=r.diff(this.delta,n));return e}}]),e}();function x(e,t){return Object.keys(t).reduce((function(n,r){return null==e[r]||(t[r]===e[r]?n[r]=t[r]:Array.isArray(t[r])?t[r].indexOf(e[r])<0&&(n[r]=t[r].concat([e[r]])):n[r]=[t[r],e[r]]),n}),{})}t.default=b},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.Range=void 0;var r=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,a=!1,o=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(u){a=!0,o=u}finally{try{!r&&s.return&&s.return()}finally{if(a)throw o}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=c(n(0)),i=c(n(21)),s=c(n(11)),u=c(n(8));function c(e){return e&&e.__esModule?e:{default:e}}function l(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var d=(0,c(n(10)).default)("quill:selection"),p=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;f(this,e),this.index=t,this.length=n},h=function(){function e(t,n){var r=this;f(this,e),this.emitter=n,this.scroll=t,this.composing=!1,this.mouseDown=!1,this.root=this.scroll.domNode,this.cursor=o.default.create("cursor",this),this.lastRange=this.savedRange=new p(0,0),this.handleComposition(),this.handleDragging(),this.emitter.listenDOM("selectionchange",document,(function(){r.mouseDown||setTimeout(r.update.bind(r,u.default.sources.USER),1)})),this.emitter.on(u.default.events.EDITOR_CHANGE,(function(e,t){e===u.default.events.TEXT_CHANGE&&t.length()>0&&r.update(u.default.sources.SILENT)})),this.emitter.on(u.default.events.SCROLL_BEFORE_UPDATE,(function(){if(r.hasFocus()){var e=r.getNativeRange();null!=e&&e.start.node!==r.cursor.textNode&&r.emitter.once(u.default.events.SCROLL_UPDATE,(function(){try{r.setNativeRange(e.start.node,e.start.offset,e.end.node,e.end.offset)}catch(t){}}))}})),this.emitter.on(u.default.events.SCROLL_OPTIMIZE,(function(e,t){if(t.range){var n=t.range,a=n.startNode,o=n.startOffset,i=n.endNode,s=n.endOffset;r.setNativeRange(a,o,i,s)}})),this.update(u.default.sources.SILENT)}return a(e,[{key:"handleComposition",value:function(){var e=this;this.root.addEventListener("compositionstart",(function(){e.composing=!0})),this.root.addEventListener("compositionend",(function(){if(e.composing=!1,e.cursor.parent){var t=e.cursor.restore();if(!t)return;setTimeout((function(){e.setNativeRange(t.startNode,t.startOffset,t.endNode,t.endOffset)}),1)}}))}},{key:"handleDragging",value:function(){var e=this;this.emitter.listenDOM("mousedown",document.body,(function(){e.mouseDown=!0})),this.emitter.listenDOM("mouseup",document.body,(function(){e.mouseDown=!1,e.update(u.default.sources.USER)}))}},{key:"focus",value:function(){this.hasFocus()||(this.root.focus(),this.setRange(this.savedRange))}},{key:"format",value:function(e,t){if(null==this.scroll.whitelist||this.scroll.whitelist[e]){this.scroll.update();var n=this.getNativeRange();if(null!=n&&n.native.collapsed&&!o.default.query(e,o.default.Scope.BLOCK)){if(n.start.node!==this.cursor.textNode){var r=o.default.find(n.start.node,!1);if(null==r)return;if(r instanceof o.default.Leaf){var a=r.split(n.start.offset);r.parent.insertBefore(this.cursor,a)}else r.insertBefore(this.cursor,n.start.node);this.cursor.attach()}this.cursor.format(e,t),this.scroll.optimize(),this.setNativeRange(this.cursor.textNode,this.cursor.textNode.data.length),this.update()}}}},{key:"getBounds",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.scroll.length();e=Math.min(e,n-1),t=Math.min(e+t,n-1)-e;var a=void 0,o=this.scroll.leaf(e),i=r(o,2),s=i[0],u=i[1];if(null==s)return null;var c=s.position(u,!0),l=r(c,2);a=l[0],u=l[1];var f=document.createRange();if(t>0){f.setStart(a,u);var d=this.scroll.leaf(e+t),p=r(d,2);if(s=p[0],u=p[1],null==s)return null;var h=s.position(u,!0),m=r(h,2);return a=m[0],u=m[1],f.setEnd(a,u),f.getBoundingClientRect()}var v="left",g=void 0;return a instanceof Text?(u<a.data.length?(f.setStart(a,u),f.setEnd(a,u+1)):(f.setStart(a,u-1),f.setEnd(a,u),v="right"),g=f.getBoundingClientRect()):(g=s.domNode.getBoundingClientRect(),u>0&&(v="right")),{bottom:g.top+g.height,height:g.height,left:g[v],right:g[v],top:g.top,width:0}}},{key:"getNativeRange",value:function(){var e=document.getSelection();if(null==e||e.rangeCount<=0)return null;var t=e.getRangeAt(0);if(null==t)return null;var n=this.normalizeNative(t);return d.info("getNativeRange",n),n}},{key:"getRange",value:function(){var e=this.getNativeRange();return null==e?[null,null]:[this.normalizedToRange(e),e]}},{key:"hasFocus",value:function(){return document.activeElement===this.root}},{key:"normalizedToRange",value:function(e){var t=this,n=[[e.start.node,e.start.offset]];e.native.collapsed||n.push([e.end.node,e.end.offset]);var a=n.map((function(e){var n=r(e,2),a=n[0],i=n[1],s=o.default.find(a,!0),u=s.offset(t.scroll);return 0===i?u:s instanceof o.default.Container?u+s.length():u+s.index(a,i)})),i=Math.min(Math.max.apply(Math,l(a)),this.scroll.length()-1),s=Math.min.apply(Math,[i].concat(l(a)));return new p(s,i-s)}},{key:"normalizeNative",value:function(e){if(!m(this.root,e.startContainer)||!e.collapsed&&!m(this.root,e.endContainer))return null;var t={start:{node:e.startContainer,offset:e.startOffset},end:{node:e.endContainer,offset:e.endOffset},native:e};return[t.start,t.end].forEach((function(e){for(var t=e.node,n=e.offset;!(t instanceof Text)&&t.childNodes.length>0;)if(t.childNodes.length>n)t=t.childNodes[n],n=0;else{if(t.childNodes.length!==n)break;n=(t=t.lastChild)instanceof Text?t.data.length:t.childNodes.length+1}e.node=t,e.offset=n})),t}},{key:"rangeToNative",value:function(e){var t=this,n=e.collapsed?[e.index]:[e.index,e.index+e.length],a=[],o=this.scroll.length();return n.forEach((function(e,n){e=Math.min(o-1,e);var i,s=t.scroll.leaf(e),u=r(s,2),c=u[0],l=u[1],f=c.position(l,0!==n),d=r(f,2);i=d[0],l=d[1],a.push(i,l)})),a.length<2&&(a=a.concat(a)),a}},{key:"scrollIntoView",value:function(e){var t=this.lastRange;if(null!=t){var n=this.getBounds(t.index,t.length);if(null!=n){var a=this.scroll.length()-1,o=this.scroll.line(Math.min(t.index,a)),i=r(o,1)[0],s=i;if(t.length>0){var u=this.scroll.line(Math.min(t.index+t.length,a));s=r(u,1)[0]}if(null!=i&&null!=s){var c=e.getBoundingClientRect();n.top<c.top?e.scrollTop-=c.top-n.top:n.bottom>c.bottom&&(e.scrollTop+=n.bottom-c.bottom)}}}}},{key:"setNativeRange",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t,a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(d.info("setNativeRange",e,t,n,r),null==e||null!=this.root.parentNode&&null!=e.parentNode&&null!=n.parentNode){var o=document.getSelection();if(null!=o)if(null!=e){this.hasFocus()||this.root.focus();var i=(this.getNativeRange()||{}).native;if(null==i||a||e!==i.startContainer||t!==i.startOffset||n!==i.endContainer||r!==i.endOffset){"BR"==e.tagName&&(t=[].indexOf.call(e.parentNode.childNodes,e),e=e.parentNode),"BR"==n.tagName&&(r=[].indexOf.call(n.parentNode.childNodes,n),n=n.parentNode);var s=document.createRange();s.setStart(e,t),s.setEnd(n,r),o.removeAllRanges(),o.addRange(s)}}else o.removeAllRanges(),this.root.blur(),document.body.focus()}}},{key:"setRange",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:u.default.sources.API;if("string"===typeof t&&(n=t,t=!1),d.info("setRange",e),null!=e){var r=this.rangeToNative(e);this.setNativeRange.apply(this,l(r).concat([t]))}else this.setNativeRange(null);this.update(n)}},{key:"update",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u.default.sources.USER,t=this.lastRange,n=this.getRange(),a=r(n,2),o=a[0],c=a[1];if(this.lastRange=o,null!=this.lastRange&&(this.savedRange=this.lastRange),!(0,s.default)(t,this.lastRange)){var l;!this.composing&&null!=c&&c.native.collapsed&&c.start.node!==this.cursor.textNode&&this.cursor.restore();var f,d=[u.default.events.SELECTION_CHANGE,(0,i.default)(this.lastRange),(0,i.default)(t),e];(l=this.emitter).emit.apply(l,[u.default.events.EDITOR_CHANGE].concat(d)),e!==u.default.sources.SILENT&&(f=this.emitter).emit.apply(f,d)}}}]),e}();function m(e,t){try{t.parentNode}catch(n){return!1}return t instanceof Text&&(t=t.parentNode),e.contains(t)}t.Range=p,t.default=h},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function e(t,n,r){null===t&&(t=Function.prototype);var a=Object.getOwnPropertyDescriptor(t,n);if(void 0===a){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in a)return a.value;var i=a.get;return void 0!==i?i.call(r):void 0},i=n(0);function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}var c=function(e){function t(){return s(this,t),u(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),a(t,[{key:"insertInto",value:function(e,n){0===e.children.length?o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"insertInto",this).call(this,e,n):this.remove()}},{key:"length",value:function(){return 0}},{key:"value",value:function(){return""}}],[{key:"value",value:function(){}}]),t}(((r=i)&&r.__esModule?r:{default:r}).default.Embed);c.blotName="break",c.tagName="BR",t.default=c},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var a=n(44),o=n(30),i=n(1),s=function(e){function t(t){var n=e.call(this,t)||this;return n.build(),n}return r(t,e),t.prototype.appendChild=function(e){this.insertBefore(e)},t.prototype.attach=function(){e.prototype.attach.call(this),this.children.forEach((function(e){e.attach()}))},t.prototype.build=function(){var e=this;this.children=new a.default,[].slice.call(this.domNode.childNodes).reverse().forEach((function(t){try{var n=u(t);e.insertBefore(n,e.children.head||void 0)}catch(r){if(r instanceof i.ParchmentError)return;throw r}}))},t.prototype.deleteAt=function(e,t){if(0===e&&t===this.length())return this.remove();this.children.forEachAt(e,t,(function(e,t,n){e.deleteAt(t,n)}))},t.prototype.descendant=function(e,n){var r=this.children.find(n),a=r[0],o=r[1];return null==e.blotName&&e(a)||null!=e.blotName&&a instanceof e?[a,o]:a instanceof t?a.descendant(e,o):[null,-1]},t.prototype.descendants=function(e,n,r){void 0===n&&(n=0),void 0===r&&(r=Number.MAX_VALUE);var a=[],o=r;return this.children.forEachAt(n,r,(function(n,r,i){(null==e.blotName&&e(n)||null!=e.blotName&&n instanceof e)&&a.push(n),n instanceof t&&(a=a.concat(n.descendants(e,r,o))),o-=i})),a},t.prototype.detach=function(){this.children.forEach((function(e){e.detach()})),e.prototype.detach.call(this)},t.prototype.formatAt=function(e,t,n,r){this.children.forEachAt(e,t,(function(e,t,a){e.formatAt(t,a,n,r)}))},t.prototype.insertAt=function(e,t,n){var r=this.children.find(e),a=r[0],o=r[1];if(a)a.insertAt(o,t,n);else{var s=null==n?i.create("text",t):i.create(t,n);this.appendChild(s)}},t.prototype.insertBefore=function(e,t){if(null!=this.statics.allowedChildren&&!this.statics.allowedChildren.some((function(t){return e instanceof t})))throw new i.ParchmentError("Cannot insert "+e.statics.blotName+" into "+this.statics.blotName);e.insertInto(this,t)},t.prototype.length=function(){return this.children.reduce((function(e,t){return e+t.length()}),0)},t.prototype.moveChildren=function(e,t){this.children.forEach((function(n){e.insertBefore(n,t)}))},t.prototype.optimize=function(t){if(e.prototype.optimize.call(this,t),0===this.children.length)if(null!=this.statics.defaultChild){var n=i.create(this.statics.defaultChild);this.appendChild(n),n.optimize(t)}else this.remove()},t.prototype.path=function(e,n){void 0===n&&(n=!1);var r=this.children.find(e,n),a=r[0],o=r[1],i=[[this,e]];return a instanceof t?i.concat(a.path(o,n)):(null!=a&&i.push([a,o]),i)},t.prototype.removeChild=function(e){this.children.remove(e)},t.prototype.replace=function(n){n instanceof t&&n.moveChildren(this),e.prototype.replace.call(this,n)},t.prototype.split=function(e,t){if(void 0===t&&(t=!1),!t){if(0===e)return this;if(e===this.length())return this.next}var n=this.clone();return this.parent.insertBefore(n,this.next),this.children.forEachAt(e,this.length(),(function(e,r,a){e=e.split(r,t),n.appendChild(e)})),n},t.prototype.unwrap=function(){this.moveChildren(this.parent,this.next),this.remove()},t.prototype.update=function(e,t){var n=this,r=[],a=[];e.forEach((function(e){e.target===n.domNode&&"childList"===e.type&&(r.push.apply(r,e.addedNodes),a.push.apply(a,e.removedNodes))})),a.forEach((function(e){if(!(null!=e.parentNode&&"IFRAME"!==e.tagName&&document.body.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY)){var t=i.find(e);null!=t&&(null!=t.domNode.parentNode&&t.domNode.parentNode!==n.domNode||t.detach())}})),r.filter((function(e){return e.parentNode==n.domNode})).sort((function(e,t){return e===t?0:e.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_FOLLOWING?1:-1})).forEach((function(e){var t=null;null!=e.nextSibling&&(t=i.find(e.nextSibling));var r=u(e);r.next==t&&null!=r.next||(null!=r.parent&&r.parent.removeChild(n),n.insertBefore(r,t||void 0))}))},t}(o.default);function u(e){var t=i.find(e);if(null==t)try{t=i.create(e)}catch(n){t=i.create(i.Scope.INLINE),[].slice.call(e.childNodes).forEach((function(e){t.domNode.appendChild(e)})),e.parentNode&&e.parentNode.replaceChild(t.domNode,e),t.attach()}return t}t.default=s},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var a=n(12),o=n(31),i=n(17),s=n(1),u=function(e){function t(t){var n=e.call(this,t)||this;return n.attributes=new o.default(n.domNode),n}return r(t,e),t.formats=function(e){return"string"===typeof this.tagName||(Array.isArray(this.tagName)?e.tagName.toLowerCase():void 0)},t.prototype.format=function(e,t){var n=s.query(e);n instanceof a.default?this.attributes.attribute(n,t):t&&(null==n||e===this.statics.blotName&&this.formats()[e]===t||this.replaceWith(e,t))},t.prototype.formats=function(){var e=this.attributes.values(),t=this.statics.formats(this.domNode);return null!=t&&(e[this.statics.blotName]=t),e},t.prototype.replaceWith=function(t,n){var r=e.prototype.replaceWith.call(this,t,n);return this.attributes.copy(r),r},t.prototype.update=function(t,n){var r=this;e.prototype.update.call(this,t,n),t.some((function(e){return e.target===r.domNode&&"attributes"===e.type}))&&this.attributes.build()},t.prototype.wrap=function(n,r){var a=e.prototype.wrap.call(this,n,r);return a instanceof t&&a.statics.scope===this.statics.scope&&this.attributes.move(a),a},t}(i.default);t.default=u},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var a=n(30),o=n(1),i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.value=function(e){return!0},t.prototype.index=function(e,t){return this.domNode===e||this.domNode.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY?Math.min(t,1):-1},t.prototype.position=function(e,t){var n=[].indexOf.call(this.parent.domNode.childNodes,this.domNode);return e>0&&(n+=1),[this.parent.domNode,n]},t.prototype.value=function(){var e;return(e={})[this.statics.blotName]=this.statics.value(this.domNode)||!0,e},t.scope=o.Scope.INLINE_BLOT,t}(a.default);t.default=i},function(e,t,n){var r=n(11),a=n(3),o={attributes:{compose:function(e,t,n){"object"!==typeof e&&(e={}),"object"!==typeof t&&(t={});var r=a(!0,{},t);for(var o in n||(r=Object.keys(r).reduce((function(e,t){return null!=r[t]&&(e[t]=r[t]),e}),{})),e)void 0!==e[o]&&void 0===t[o]&&(r[o]=e[o]);return Object.keys(r).length>0?r:void 0},diff:function(e,t){"object"!==typeof e&&(e={}),"object"!==typeof t&&(t={});var n=Object.keys(e).concat(Object.keys(t)).reduce((function(n,a){return r(e[a],t[a])||(n[a]=void 0===t[a]?null:t[a]),n}),{});return Object.keys(n).length>0?n:void 0},transform:function(e,t,n){if("object"!==typeof e)return t;if("object"===typeof t){if(!n)return t;var r=Object.keys(t).reduce((function(n,r){return void 0===e[r]&&(n[r]=t[r]),n}),{});return Object.keys(r).length>0?r:void 0}}},iterator:function(e){return new i(e)},length:function(e){return"number"===typeof e.delete?e.delete:"number"===typeof e.retain?e.retain:"string"===typeof e.insert?e.insert.length:1}};function i(e){this.ops=e,this.index=0,this.offset=0}i.prototype.hasNext=function(){return this.peekLength()<1/0},i.prototype.next=function(e){e||(e=1/0);var t=this.ops[this.index];if(t){var n=this.offset,r=o.length(t);if(e>=r-n?(e=r-n,this.index+=1,this.offset=0):this.offset+=e,"number"===typeof t.delete)return{delete:e};var a={};return t.attributes&&(a.attributes=t.attributes),"number"===typeof t.retain?a.retain=e:"string"===typeof t.insert?a.insert=t.insert.substr(n,e):a.insert=t.insert,a}return{retain:1/0}},i.prototype.peek=function(){return this.ops[this.index]},i.prototype.peekLength=function(){return this.ops[this.index]?o.length(this.ops[this.index])-this.offset:1/0},i.prototype.peekType=function(){return this.ops[this.index]?"number"===typeof this.ops[this.index].delete?"delete":"number"===typeof this.ops[this.index].retain?"retain":"insert":"retain"},i.prototype.rest=function(){if(this.hasNext()){if(0===this.offset)return this.ops.slice(this.index);var e=this.offset,t=this.index,n=this.next(),r=this.ops.slice(this.index);return this.offset=e,this.index=t,[n].concat(r)}return[]},e.exports=o},function(e,t){var n=function(){"use strict";function e(e,t){return null!=t&&e instanceof t}var t,n,r;try{t=Map}catch(s){t=function(){}}try{n=Set}catch(s){n=function(){}}try{r=Promise}catch(s){r=function(){}}function a(o,s,u,c,l){"object"===typeof s&&(u=s.depth,c=s.prototype,l=s.includeNonEnumerable,s=s.circular);var f=[],d=[],p="undefined"!=typeof Buffer;return"undefined"==typeof s&&(s=!0),"undefined"==typeof u&&(u=1/0),function o(u,h){if(null===u)return null;if(0===h)return u;var m,v;if("object"!=typeof u)return u;if(e(u,t))m=new t;else if(e(u,n))m=new n;else if(e(u,r))m=new r((function(e,t){u.then((function(t){e(o(t,h-1))}),(function(e){t(o(e,h-1))}))}));else if(a.__isArray(u))m=[];else if(a.__isRegExp(u))m=new RegExp(u.source,i(u)),u.lastIndex&&(m.lastIndex=u.lastIndex);else if(a.__isDate(u))m=new Date(u.getTime());else{if(p&&Buffer.isBuffer(u))return m=Buffer.allocUnsafe?Buffer.allocUnsafe(u.length):new Buffer(u.length),u.copy(m),m;e(u,Error)?m=Object.create(u):"undefined"==typeof c?(v=Object.getPrototypeOf(u),m=Object.create(v)):(m=Object.create(c),v=c)}if(s){var g=f.indexOf(u);if(-1!=g)return d[g];f.push(u),d.push(m)}for(var y in e(u,t)&&u.forEach((function(e,t){var n=o(t,h-1),r=o(e,h-1);m.set(n,r)})),e(u,n)&&u.forEach((function(e){var t=o(e,h-1);m.add(t)})),u){var b;v&&(b=Object.getOwnPropertyDescriptor(v,y)),b&&null==b.set||(m[y]=o(u[y],h-1))}if(Object.getOwnPropertySymbols){var x=Object.getOwnPropertySymbols(u);for(y=0;y<x.length;y++){var w=x[y];(!(S=Object.getOwnPropertyDescriptor(u,w))||S.enumerable||l)&&(m[w]=o(u[w],h-1),S.enumerable||Object.defineProperty(m,w,{enumerable:!1}))}}if(l){var k=Object.getOwnPropertyNames(u);for(y=0;y<k.length;y++){var S,_=k[y];(S=Object.getOwnPropertyDescriptor(u,_))&&S.enumerable||(m[_]=o(u[_],h-1),Object.defineProperty(m,_,{enumerable:!1}))}}return m}(o,u)}function o(e){return Object.prototype.toString.call(e)}function i(e){var t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),t}return a.clonePrototype=function(e){if(null===e)return null;var t=function(){};return t.prototype=e,new t},a.__objToStr=o,a.__isDate=function(e){return"object"===typeof e&&"[object Date]"===o(e)},a.__isArray=function(e){return"object"===typeof e&&"[object Array]"===o(e)},a.__isRegExp=function(e){return"object"===typeof e&&"[object RegExp]"===o(e)},a.__getRegExpFlags=i,a}();"object"===typeof e&&e.exports&&(e.exports=n)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,a=!1,o=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(u){a=!0,o=u}finally{try{!r&&s.return&&s.return()}finally{if(a)throw o}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function e(t,n,r){null===t&&(t=Function.prototype);var a=Object.getOwnPropertyDescriptor(t,n);if(void 0===a){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in a)return a.value;var i=a.get;return void 0!==i?i.call(r):void 0},i=p(n(0)),s=p(n(8)),u=n(4),c=p(u),l=p(n(16)),f=p(n(13)),d=p(n(25));function p(e){return e&&e.__esModule?e:{default:e}}function h(e){return e instanceof c.default||e instanceof u.BlockEmbed}var m=function(e){function t(e,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.emitter=n.emitter,Array.isArray(n.whitelist)&&(r.whitelist=n.whitelist.reduce((function(e,t){return e[t]=!0,e}),{})),r.domNode.addEventListener("DOMNodeInserted",(function(){})),r.optimize(),r.enable(),r}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),a(t,[{key:"batchStart",value:function(){this.batch=!0}},{key:"batchEnd",value:function(){this.batch=!1,this.optimize()}},{key:"deleteAt",value:function(e,n){var a=this.line(e),i=r(a,2),s=i[0],c=i[1],d=this.line(e+n),p=r(d,1)[0];if(o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"deleteAt",this).call(this,e,n),null!=p&&s!==p&&c>0){if(s instanceof u.BlockEmbed||p instanceof u.BlockEmbed)return void this.optimize();if(s instanceof f.default){var h=s.newlineIndex(s.length(),!0);if(h>-1&&(s=s.split(h+1))===p)return void this.optimize()}else if(p instanceof f.default){var m=p.newlineIndex(0);m>-1&&p.split(m+1)}var v=p.children.head instanceof l.default?null:p.children.head;s.moveChildren(p,v),s.remove()}this.optimize()}},{key:"enable",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.domNode.setAttribute("contenteditable",e)}},{key:"formatAt",value:function(e,n,r,a){(null==this.whitelist||this.whitelist[r])&&(o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"formatAt",this).call(this,e,n,r,a),this.optimize())}},{key:"insertAt",value:function(e,n,r){if(null==r||null==this.whitelist||this.whitelist[n]){if(e>=this.length())if(null==r||null==i.default.query(n,i.default.Scope.BLOCK)){var a=i.default.create(this.statics.defaultChild);this.appendChild(a),null==r&&n.endsWith("\n")&&(n=n.slice(0,-1)),a.insertAt(0,n,r)}else{var s=i.default.create(n,r);this.appendChild(s)}else o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"insertAt",this).call(this,e,n,r);this.optimize()}}},{key:"insertBefore",value:function(e,n){if(e.statics.scope===i.default.Scope.INLINE_BLOT){var r=i.default.create(this.statics.defaultChild);r.appendChild(e),e=r}o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"insertBefore",this).call(this,e,n)}},{key:"leaf",value:function(e){return this.path(e).pop()||[null,-1]}},{key:"line",value:function(e){return e===this.length()?this.line(e-1):this.descendant(h,e)}},{key:"lines",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Number.MAX_VALUE,n=function e(t,n,r){var a=[],o=r;return t.children.forEachAt(n,r,(function(t,n,r){h(t)?a.push(t):t instanceof i.default.Container&&(a=a.concat(e(t,n,o))),o-=r})),a};return n(this,e,t)}},{key:"optimize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!0!==this.batch&&(o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"optimize",this).call(this,e,n),e.length>0&&this.emitter.emit(s.default.events.SCROLL_OPTIMIZE,e,n))}},{key:"path",value:function(e){return o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"path",this).call(this,e).slice(1)}},{key:"update",value:function(e){if(!0!==this.batch){var n=s.default.sources.USER;"string"===typeof e&&(n=e),Array.isArray(e)||(e=this.observer.takeRecords()),e.length>0&&this.emitter.emit(s.default.events.SCROLL_BEFORE_UPDATE,n,e),o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"update",this).call(this,e.concat([])),e.length>0&&this.emitter.emit(s.default.events.SCROLL_UPDATE,n,e)}}}]),t}(i.default.Scroll);m.blotName="scroll",m.className="ql-editor",m.tagName="DIV",m.defaultChild="block",m.allowedChildren=[c.default,u.BlockEmbed,d.default],t.default=m},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SHORTKEY=t.default=void 0;var r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,a=!1,o=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(u){a=!0,o=u}finally{try{!r&&s.return&&s.return()}finally{if(a)throw o}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=m(n(21)),s=m(n(11)),u=m(n(3)),c=m(n(2)),l=m(n(20)),f=m(n(0)),d=m(n(5)),p=m(n(10)),h=m(n(9));function m(e){return e&&e.__esModule?e:{default:e}}function v(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var g=(0,p.default)("quill:keyboard"),y=/Mac/i.test(navigator.platform)?"metaKey":"ctrlKey",b=function(e){function t(e,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return r.bindings={},Object.keys(r.options.bindings).forEach((function(t){("list autofill"!==t||null==e.scroll.whitelist||e.scroll.whitelist.list)&&r.options.bindings[t]&&r.addBinding(r.options.bindings[t])})),r.addBinding({key:t.keys.ENTER,shiftKey:null},_),r.addBinding({key:t.keys.ENTER,metaKey:null,ctrlKey:null,altKey:null},(function(){})),/Firefox/i.test(navigator.userAgent)?(r.addBinding({key:t.keys.BACKSPACE},{collapsed:!0},w),r.addBinding({key:t.keys.DELETE},{collapsed:!0},k)):(r.addBinding({key:t.keys.BACKSPACE},{collapsed:!0,prefix:/^.?$/},w),r.addBinding({key:t.keys.DELETE},{collapsed:!0,suffix:/^.?$/},k)),r.addBinding({key:t.keys.BACKSPACE},{collapsed:!1},S),r.addBinding({key:t.keys.DELETE},{collapsed:!1},S),r.addBinding({key:t.keys.BACKSPACE,altKey:null,ctrlKey:null,metaKey:null,shiftKey:null},{collapsed:!0,offset:0},w),r.listen(),r}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),o(t,null,[{key:"match",value:function(e,t){return t=C(t),!["altKey","ctrlKey","metaKey","shiftKey"].some((function(n){return!!t[n]!==e[n]&&null!==t[n]}))&&t.key===(e.which||e.keyCode)}}]),o(t,[{key:"addBinding",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=C(e);if(null==r||null==r.key)return g.warn("Attempted to add invalid keyboard binding",r);"function"===typeof t&&(t={handler:t}),"function"===typeof n&&(n={handler:n}),r=(0,u.default)(r,t,n),this.bindings[r.key]=this.bindings[r.key]||[],this.bindings[r.key].push(r)}},{key:"listen",value:function(){var e=this;this.quill.root.addEventListener("keydown",(function(n){if(!n.defaultPrevented){var o=n.which||n.keyCode,i=(e.bindings[o]||[]).filter((function(e){return t.match(n,e)}));if(0!==i.length){var u=e.quill.getSelection();if(null!=u&&e.quill.hasFocus()){var c=e.quill.getLine(u.index),l=a(c,2),d=l[0],p=l[1],h=e.quill.getLeaf(u.index),m=a(h,2),v=m[0],g=m[1],y=0===u.length?[v,g]:e.quill.getLeaf(u.index+u.length),b=a(y,2),x=b[0],w=b[1],k=v instanceof f.default.Text?v.value().slice(0,g):"",S=x instanceof f.default.Text?x.value().slice(w):"",_={collapsed:0===u.length,empty:0===u.length&&d.length()<=1,format:e.quill.getFormat(u),offset:p,prefix:k,suffix:S};i.some((function(t){if(null!=t.collapsed&&t.collapsed!==_.collapsed)return!1;if(null!=t.empty&&t.empty!==_.empty)return!1;if(null!=t.offset&&t.offset!==_.offset)return!1;if(Array.isArray(t.format)){if(t.format.every((function(e){return null==_.format[e]})))return!1}else if("object"===r(t.format)&&!Object.keys(t.format).every((function(e){return!0===t.format[e]?null!=_.format[e]:!1===t.format[e]?null==_.format[e]:(0,s.default)(t.format[e],_.format[e])})))return!1;return!(null!=t.prefix&&!t.prefix.test(_.prefix))&&!(null!=t.suffix&&!t.suffix.test(_.suffix))&&!0!==t.handler.call(e,u,_)}))&&n.preventDefault()}}}}))}}]),t}(h.default);function x(e,t){var n,r=e===b.keys.LEFT?"prefix":"suffix";return v(n={key:e,shiftKey:t,altKey:null},r,/^$/),v(n,"handler",(function(n){var r=n.index;e===b.keys.RIGHT&&(r+=n.length+1);var o=this.quill.getLeaf(r);return!(a(o,1)[0]instanceof f.default.Embed)||(e===b.keys.LEFT?t?this.quill.setSelection(n.index-1,n.length+1,d.default.sources.USER):this.quill.setSelection(n.index-1,d.default.sources.USER):t?this.quill.setSelection(n.index,n.length+1,d.default.sources.USER):this.quill.setSelection(n.index+n.length+1,d.default.sources.USER),!1)})),n}function w(e,t){if(!(0===e.index||this.quill.getLength()<=1)){var n=this.quill.getLine(e.index),r=a(n,1)[0],o={};if(0===t.offset){var i=this.quill.getLine(e.index-1),s=a(i,1)[0];if(null!=s&&s.length()>1){var u=r.formats(),c=this.quill.getFormat(e.index-1,1);o=l.default.attributes.diff(u,c)||{}}}var f=/[\uD800-\uDBFF][\uDC00-\uDFFF]$/.test(t.prefix)?2:1;this.quill.deleteText(e.index-f,f,d.default.sources.USER),Object.keys(o).length>0&&this.quill.formatLine(e.index-f,f,o,d.default.sources.USER),this.quill.focus()}}function k(e,t){var n=/^[\uD800-\uDBFF][\uDC00-\uDFFF]/.test(t.suffix)?2:1;if(!(e.index>=this.quill.getLength()-n)){var r={},o=0,i=this.quill.getLine(e.index),s=a(i,1)[0];if(t.offset>=s.length()-1){var u=this.quill.getLine(e.index+1),c=a(u,1)[0];if(c){var f=s.formats(),p=this.quill.getFormat(e.index,1);r=l.default.attributes.diff(f,p)||{},o=c.length()}}this.quill.deleteText(e.index,n,d.default.sources.USER),Object.keys(r).length>0&&this.quill.formatLine(e.index+o-1,n,r,d.default.sources.USER)}}function S(e){var t=this.quill.getLines(e),n={};if(t.length>1){var r=t[0].formats(),a=t[t.length-1].formats();n=l.default.attributes.diff(a,r)||{}}this.quill.deleteText(e,d.default.sources.USER),Object.keys(n).length>0&&this.quill.formatLine(e.index,1,n,d.default.sources.USER),this.quill.setSelection(e.index,d.default.sources.SILENT),this.quill.focus()}function _(e,t){var n=this;e.length>0&&this.quill.scroll.deleteAt(e.index,e.length);var r=Object.keys(t.format).reduce((function(e,n){return f.default.query(n,f.default.Scope.BLOCK)&&!Array.isArray(t.format[n])&&(e[n]=t.format[n]),e}),{});this.quill.insertText(e.index,"\n",r,d.default.sources.USER),this.quill.setSelection(e.index+1,d.default.sources.SILENT),this.quill.focus(),Object.keys(t.format).forEach((function(e){null==r[e]&&(Array.isArray(t.format[e])||"link"!==e&&n.quill.format(e,t.format[e],d.default.sources.USER))}))}function N(e){return{key:b.keys.TAB,shiftKey:!e,format:{"code-block":!0},handler:function(t){var n=f.default.query("code-block"),r=t.index,o=t.length,i=this.quill.scroll.descendant(n,r),s=a(i,2),u=s[0],c=s[1];if(null!=u){var l=this.quill.getIndex(u),p=u.newlineIndex(c,!0)+1,h=u.newlineIndex(l+c+o),m=u.domNode.textContent.slice(p,h).split("\n");c=0,m.forEach((function(t,a){e?(u.insertAt(p+c,n.TAB),c+=n.TAB.length,0===a?r+=n.TAB.length:o+=n.TAB.length):t.startsWith(n.TAB)&&(u.deleteAt(p+c,n.TAB.length),c-=n.TAB.length,0===a?r-=n.TAB.length:o-=n.TAB.length),c+=t.length+1})),this.quill.update(d.default.sources.USER),this.quill.setSelection(r,o,d.default.sources.SILENT)}}}}function E(e){return{key:e[0].toUpperCase(),shortKey:!0,handler:function(t,n){this.quill.format(e,!n.format[e],d.default.sources.USER)}}}function C(e){if("string"===typeof e||"number"===typeof e)return C({key:e});if("object"===("undefined"===typeof e?"undefined":r(e))&&(e=(0,i.default)(e,!1)),"string"===typeof e.key)if(null!=b.keys[e.key.toUpperCase()])e.key=b.keys[e.key.toUpperCase()];else{if(1!==e.key.length)return null;e.key=e.key.toUpperCase().charCodeAt(0)}return e.shortKey&&(e[y]=e.shortKey,delete e.shortKey),e}b.keys={BACKSPACE:8,TAB:9,ENTER:13,ESCAPE:27,LEFT:37,UP:38,RIGHT:39,DOWN:40,DELETE:46},b.DEFAULTS={bindings:{bold:E("bold"),italic:E("italic"),underline:E("underline"),indent:{key:b.keys.TAB,format:["blockquote","indent","list"],handler:function(e,t){if(t.collapsed&&0!==t.offset)return!0;this.quill.format("indent","+1",d.default.sources.USER)}},outdent:{key:b.keys.TAB,shiftKey:!0,format:["blockquote","indent","list"],handler:function(e,t){if(t.collapsed&&0!==t.offset)return!0;this.quill.format("indent","-1",d.default.sources.USER)}},"outdent backspace":{key:b.keys.BACKSPACE,collapsed:!0,shiftKey:null,metaKey:null,ctrlKey:null,altKey:null,format:["indent","list"],offset:0,handler:function(e,t){null!=t.format.indent?this.quill.format("indent","-1",d.default.sources.USER):null!=t.format.list&&this.quill.format("list",!1,d.default.sources.USER)}},"indent code-block":N(!0),"outdent code-block":N(!1),"remove tab":{key:b.keys.TAB,shiftKey:!0,collapsed:!0,prefix:/\t$/,handler:function(e){this.quill.deleteText(e.index-1,1,d.default.sources.USER)}},tab:{key:b.keys.TAB,handler:function(e){this.quill.history.cutoff();var t=(new c.default).retain(e.index).delete(e.length).insert("\t");this.quill.updateContents(t,d.default.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(e.index+1,d.default.sources.SILENT)}},"list empty enter":{key:b.keys.ENTER,collapsed:!0,format:["list"],empty:!0,handler:function(e,t){this.quill.format("list",!1,d.default.sources.USER),t.format.indent&&this.quill.format("indent",!1,d.default.sources.USER)}},"checklist enter":{key:b.keys.ENTER,collapsed:!0,format:{list:"checked"},handler:function(e){var t=this.quill.getLine(e.index),n=a(t,2),r=n[0],o=n[1],i=(0,u.default)({},r.formats(),{list:"checked"}),s=(new c.default).retain(e.index).insert("\n",i).retain(r.length()-o-1).retain(1,{list:"unchecked"});this.quill.updateContents(s,d.default.sources.USER),this.quill.setSelection(e.index+1,d.default.sources.SILENT),this.quill.scrollIntoView()}},"header enter":{key:b.keys.ENTER,collapsed:!0,format:["header"],suffix:/^$/,handler:function(e,t){var n=this.quill.getLine(e.index),r=a(n,2),o=r[0],i=r[1],s=(new c.default).retain(e.index).insert("\n",t.format).retain(o.length()-i-1).retain(1,{header:null});this.quill.updateContents(s,d.default.sources.USER),this.quill.setSelection(e.index+1,d.default.sources.SILENT),this.quill.scrollIntoView()}},"list autofill":{key:" ",collapsed:!0,format:{list:!1},prefix:/^\s*?(\d+\.|-|\*|\[ ?\]|\[x\])$/,handler:function(e,t){var n=t.prefix.length,r=this.quill.getLine(e.index),o=a(r,2),i=o[0],s=o[1];if(s>n)return!0;var u=void 0;switch(t.prefix.trim()){case"[]":case"[ ]":u="unchecked";break;case"[x]":u="checked";break;case"-":case"*":u="bullet";break;default:u="ordered"}this.quill.insertText(e.index," ",d.default.sources.USER),this.quill.history.cutoff();var l=(new c.default).retain(e.index-s).delete(n+1).retain(i.length()-2-s).retain(1,{list:u});this.quill.updateContents(l,d.default.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(e.index-n,d.default.sources.SILENT)}},"code exit":{key:b.keys.ENTER,collapsed:!0,format:["code-block"],prefix:/\n\n$/,suffix:/^\s+$/,handler:function(e){var t=this.quill.getLine(e.index),n=a(t,2),r=n[0],o=n[1],i=(new c.default).retain(e.index+r.length()-o-2).retain(1,{"code-block":null}).delete(1);this.quill.updateContents(i,d.default.sources.USER)}},"embed left":x(b.keys.LEFT,!1),"embed left shift":x(b.keys.LEFT,!0),"embed right":x(b.keys.RIGHT,!1),"embed right shift":x(b.keys.RIGHT,!0)}},t.default=b,t.SHORTKEY=y},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,a=!1,o=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(u){a=!0,o=u}finally{try{!r&&s.return&&s.return()}finally{if(a)throw o}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},a=function e(t,n,r){null===t&&(t=Function.prototype);var a=Object.getOwnPropertyDescriptor(t,n);if(void 0===a){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in a)return a.value;var i=a.get;return void 0!==i?i.call(r):void 0},o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=u(n(0)),s=u(n(7));function u(e){return e&&e.__esModule?e:{default:e}}var c=function(e){function t(e,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.selection=n,r.textNode=document.createTextNode(t.CONTENTS),r.domNode.appendChild(r.textNode),r._length=0,r}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),o(t,null,[{key:"value",value:function(){}}]),o(t,[{key:"detach",value:function(){null!=this.parent&&this.parent.removeChild(this)}},{key:"format",value:function(e,n){if(0!==this._length)return a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"format",this).call(this,e,n);for(var r=this,o=0;null!=r&&r.statics.scope!==i.default.Scope.BLOCK_BLOT;)o+=r.offset(r.parent),r=r.parent;null!=r&&(this._length=t.CONTENTS.length,r.optimize(),r.formatAt(o,t.CONTENTS.length,e,n),this._length=0)}},{key:"index",value:function(e,n){return e===this.textNode?0:a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"index",this).call(this,e,n)}},{key:"length",value:function(){return this._length}},{key:"position",value:function(){return[this.textNode,this.textNode.data.length]}},{key:"remove",value:function(){a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"remove",this).call(this),this.parent=null}},{key:"restore",value:function(){if(!this.selection.composing&&null!=this.parent){var e=this.textNode,n=this.selection.getNativeRange(),a=void 0,o=void 0,u=void 0;if(null!=n&&n.start.node===e&&n.end.node===e){var c=[e,n.start.offset,n.end.offset];a=c[0],o=c[1],u=c[2]}for(;null!=this.domNode.lastChild&&this.domNode.lastChild!==this.textNode;)this.domNode.parentNode.insertBefore(this.domNode.lastChild,this.domNode);if(this.textNode.data!==t.CONTENTS){var l=this.textNode.data.split(t.CONTENTS).join("");this.next instanceof s.default?(a=this.next.domNode,this.next.insertAt(0,l),this.textNode.data=t.CONTENTS):(this.textNode.data=l,this.parent.insertBefore(i.default.create(this.textNode),this),this.textNode=document.createTextNode(t.CONTENTS),this.domNode.appendChild(this.textNode))}if(this.remove(),null!=o){var f=[o,u].map((function(e){return Math.max(0,Math.min(a.data.length,e-1))})),d=r(f,2);return o=d[0],u=d[1],{startNode:a,startOffset:o,endNode:a,endOffset:u}}}}},{key:"update",value:function(e,t){var n=this;if(e.some((function(e){return"characterData"===e.type&&e.target===n.textNode}))){var r=this.restore();r&&(t.range=r)}}},{key:"value",value:function(){return""}}]),t}(i.default.Embed);c.blotName="cursor",c.className="ql-cursor",c.tagName="span",c.CONTENTS="\ufeff",t.default=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=i(n(0)),a=n(4),o=i(a);function i(e){return e&&e.__esModule?e:{default:e}}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}var c=function(e){function t(){return s(this,t),u(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t}(r.default.Container);c.allowedChildren=[o.default,a.BlockEmbed,c],t.default=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ColorStyle=t.ColorClass=t.ColorAttributor=void 0;var r,a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function e(t,n,r){null===t&&(t=Function.prototype);var a=Object.getOwnPropertyDescriptor(t,n);if(void 0===a){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in a)return a.value;var i=a.get;return void 0!==i?i.call(r):void 0},i=n(0),s=(r=i)&&r.__esModule?r:{default:r};function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}var l=function(e){function t(){return u(this,t),c(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),a(t,[{key:"value",value:function(e){var n=o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"value",this).call(this,e);return n.startsWith("rgb(")?(n=n.replace(/^[^\d]+/,"").replace(/[^\d]+$/,""),"#"+n.split(",").map((function(e){return("00"+parseInt(e).toString(16)).slice(-2)})).join("")):n}}]),t}(s.default.Attributor.Style),f=new s.default.Attributor.Class("color","ql-color",{scope:s.default.Scope.INLINE}),d=new l("color","color",{scope:s.default.Scope.INLINE});t.ColorAttributor=l,t.ColorClass=f,t.ColorStyle=d},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.sanitize=t.default=void 0;var r,a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function e(t,n,r){null===t&&(t=Function.prototype);var a=Object.getOwnPropertyDescriptor(t,n);if(void 0===a){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in a)return a.value;var i=a.get;return void 0!==i?i.call(r):void 0},i=n(6);function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}var c=function(e){function t(){return s(this,t),u(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),a(t,[{key:"format",value:function(e,n){if(e!==this.statics.blotName||!n)return o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"format",this).call(this,e,n);n=this.constructor.sanitize(n),this.domNode.setAttribute("href",n)}}],[{key:"create",value:function(e){var n=o(t.__proto__||Object.getPrototypeOf(t),"create",this).call(this,e);return e=this.sanitize(e),n.setAttribute("href",e),n.setAttribute("rel","noopener noreferrer"),n.setAttribute("target","_blank"),n}},{key:"formats",value:function(e){return e.getAttribute("href")}},{key:"sanitize",value:function(e){return l(e,this.PROTOCOL_WHITELIST)?e:this.SANITIZED_URL}}]),t}(((r=i)&&r.__esModule?r:{default:r}).default);function l(e,t){var n=document.createElement("a");n.href=e;var r=n.href.slice(0,n.href.indexOf(":"));return t.indexOf(r)>-1}c.blotName="link",c.tagName="A",c.SANITIZED_URL="about:blank",c.PROTOCOL_WHITELIST=["http","https","mailto","tel"],t.default=c,t.sanitize=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=s(n(23)),i=s(n(107));function s(e){return e&&e.__esModule?e:{default:e}}var u=0;function c(e,t){e.setAttribute(t,!("true"===e.getAttribute(t)))}var l=function(){function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.select=t,this.container=document.createElement("span"),this.buildPicker(),this.select.style.display="none",this.select.parentNode.insertBefore(this.container,this.select),this.label.addEventListener("mousedown",(function(){n.togglePicker()})),this.label.addEventListener("keydown",(function(e){switch(e.keyCode){case o.default.keys.ENTER:n.togglePicker();break;case o.default.keys.ESCAPE:n.escape(),e.preventDefault()}})),this.select.addEventListener("change",this.update.bind(this))}return a(e,[{key:"togglePicker",value:function(){this.container.classList.toggle("ql-expanded"),c(this.label,"aria-expanded"),c(this.options,"aria-hidden")}},{key:"buildItem",value:function(e){var t=this,n=document.createElement("span");return n.tabIndex="0",n.setAttribute("role","button"),n.classList.add("ql-picker-item"),e.hasAttribute("value")&&n.setAttribute("data-value",e.getAttribute("value")),e.textContent&&n.setAttribute("data-label",e.textContent),n.addEventListener("click",(function(){t.selectItem(n,!0)})),n.addEventListener("keydown",(function(e){switch(e.keyCode){case o.default.keys.ENTER:t.selectItem(n,!0),e.preventDefault();break;case o.default.keys.ESCAPE:t.escape(),e.preventDefault()}})),n}},{key:"buildLabel",value:function(){var e=document.createElement("span");return e.classList.add("ql-picker-label"),e.innerHTML=i.default,e.tabIndex="0",e.setAttribute("role","button"),e.setAttribute("aria-expanded","false"),this.container.appendChild(e),e}},{key:"buildOptions",value:function(){var e=this,t=document.createElement("span");t.classList.add("ql-picker-options"),t.setAttribute("aria-hidden","true"),t.tabIndex="-1",t.id="ql-picker-options-"+u,u+=1,this.label.setAttribute("aria-controls",t.id),this.options=t,[].slice.call(this.select.options).forEach((function(n){var r=e.buildItem(n);t.appendChild(r),!0===n.selected&&e.selectItem(r)})),this.container.appendChild(t)}},{key:"buildPicker",value:function(){var e=this;[].slice.call(this.select.attributes).forEach((function(t){e.container.setAttribute(t.name,t.value)})),this.container.classList.add("ql-picker"),this.label=this.buildLabel(),this.buildOptions()}},{key:"escape",value:function(){var e=this;this.close(),setTimeout((function(){return e.label.focus()}),1)}},{key:"close",value:function(){this.container.classList.remove("ql-expanded"),this.label.setAttribute("aria-expanded","false"),this.options.setAttribute("aria-hidden","true")}},{key:"selectItem",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.container.querySelector(".ql-selected");if(e!==n&&(null!=n&&n.classList.remove("ql-selected"),null!=e&&(e.classList.add("ql-selected"),this.select.selectedIndex=[].indexOf.call(e.parentNode.children,e),e.hasAttribute("data-value")?this.label.setAttribute("data-value",e.getAttribute("data-value")):this.label.removeAttribute("data-value"),e.hasAttribute("data-label")?this.label.setAttribute("data-label",e.getAttribute("data-label")):this.label.removeAttribute("data-label"),t))){if("function"===typeof Event)this.select.dispatchEvent(new Event("change"));else if("object"===("undefined"===typeof Event?"undefined":r(Event))){var a=document.createEvent("Event");a.initEvent("change",!0,!0),this.select.dispatchEvent(a)}this.close()}}},{key:"update",value:function(){var e=void 0;if(this.select.selectedIndex>-1){var t=this.container.querySelector(".ql-picker-options").children[this.select.selectedIndex];e=this.select.options[this.select.selectedIndex],this.selectItem(t)}else this.selectItem(null);var n=null!=e&&e!==this.select.querySelector("option[selected]");this.label.classList.toggle("ql-active",n)}}]),e}();t.default=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=g(n(0)),a=g(n(5)),o=n(4),i=g(o),s=g(n(16)),u=g(n(25)),c=g(n(24)),l=g(n(35)),f=g(n(6)),d=g(n(22)),p=g(n(7)),h=g(n(55)),m=g(n(42)),v=g(n(23));function g(e){return e&&e.__esModule?e:{default:e}}a.default.register({"blots/block":i.default,"blots/block/embed":o.BlockEmbed,"blots/break":s.default,"blots/container":u.default,"blots/cursor":c.default,"blots/embed":l.default,"blots/inline":f.default,"blots/scroll":d.default,"blots/text":p.default,"modules/clipboard":h.default,"modules/history":m.default,"modules/keyboard":v.default}),r.default.register(i.default,s.default,c.default,f.default,d.default,p.default),t.default=a.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1),a=function(){function e(e){this.domNode=e,this.domNode[r.DATA_KEY]={blot:this}}return Object.defineProperty(e.prototype,"statics",{get:function(){return this.constructor},enumerable:!0,configurable:!0}),e.create=function(e){if(null==this.tagName)throw new r.ParchmentError("Blot definition missing tagName");var t;return Array.isArray(this.tagName)?("string"===typeof e&&(e=e.toUpperCase(),parseInt(e).toString()===e&&(e=parseInt(e))),t="number"===typeof e?document.createElement(this.tagName[e-1]):this.tagName.indexOf(e)>-1?document.createElement(e):document.createElement(this.tagName[0])):t=document.createElement(this.tagName),this.className&&t.classList.add(this.className),t},e.prototype.attach=function(){null!=this.parent&&(this.scroll=this.parent.scroll)},e.prototype.clone=function(){var e=this.domNode.cloneNode(!1);return r.create(e)},e.prototype.detach=function(){null!=this.parent&&this.parent.removeChild(this),delete this.domNode[r.DATA_KEY]},e.prototype.deleteAt=function(e,t){this.isolate(e,t).remove()},e.prototype.formatAt=function(e,t,n,a){var o=this.isolate(e,t);if(null!=r.query(n,r.Scope.BLOT)&&a)o.wrap(n,a);else if(null!=r.query(n,r.Scope.ATTRIBUTE)){var i=r.create(this.statics.scope);o.wrap(i),i.format(n,a)}},e.prototype.insertAt=function(e,t,n){var a=null==n?r.create("text",t):r.create(t,n),o=this.split(e);this.parent.insertBefore(a,o)},e.prototype.insertInto=function(e,t){void 0===t&&(t=null),null!=this.parent&&this.parent.children.remove(this);var n=null;e.children.insertBefore(this,t),null!=t&&(n=t.domNode),this.domNode.parentNode==e.domNode&&this.domNode.nextSibling==n||e.domNode.insertBefore(this.domNode,n),this.parent=e,this.attach()},e.prototype.isolate=function(e,t){var n=this.split(e);return n.split(t),n},e.prototype.length=function(){return 1},e.prototype.offset=function(e){return void 0===e&&(e=this.parent),null==this.parent||this==e?0:this.parent.children.offset(this)+this.parent.offset(e)},e.prototype.optimize=function(e){null!=this.domNode[r.DATA_KEY]&&delete this.domNode[r.DATA_KEY].mutations},e.prototype.remove=function(){null!=this.domNode.parentNode&&this.domNode.parentNode.removeChild(this.domNode),this.detach()},e.prototype.replace=function(e){null!=e.parent&&(e.parent.insertBefore(this,e.next),e.remove())},e.prototype.replaceWith=function(e,t){var n="string"===typeof e?r.create(e,t):e;return n.replace(this),n},e.prototype.split=function(e,t){return 0===e?this:this.next},e.prototype.update=function(e,t){},e.prototype.wrap=function(e,t){var n="string"===typeof e?r.create(e,t):e;return null!=this.parent&&this.parent.insertBefore(n,this.next),n.appendChild(this),n},e.blotName="abstract",e}();t.default=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(12),a=n(32),o=n(33),i=n(1),s=function(){function e(e){this.attributes={},this.domNode=e,this.build()}return e.prototype.attribute=function(e,t){t?e.add(this.domNode,t)&&(null!=e.value(this.domNode)?this.attributes[e.attrName]=e:delete this.attributes[e.attrName]):(e.remove(this.domNode),delete this.attributes[e.attrName])},e.prototype.build=function(){var e=this;this.attributes={};var t=r.default.keys(this.domNode),n=a.default.keys(this.domNode),s=o.default.keys(this.domNode);t.concat(n).concat(s).forEach((function(t){var n=i.query(t,i.Scope.ATTRIBUTE);n instanceof r.default&&(e.attributes[n.attrName]=n)}))},e.prototype.copy=function(e){var t=this;Object.keys(this.attributes).forEach((function(n){var r=t.attributes[n].value(t.domNode);e.format(n,r)}))},e.prototype.move=function(e){var t=this;this.copy(e),Object.keys(this.attributes).forEach((function(e){t.attributes[e].remove(t.domNode)})),this.attributes={}},e.prototype.values=function(){var e=this;return Object.keys(this.attributes).reduce((function(t,n){return t[n]=e.attributes[n].value(e.domNode),t}),{})},e}();t.default=s},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();function a(e,t){return(e.getAttribute("class")||"").split(/\s+/).filter((function(e){return 0===e.indexOf(t+"-")}))}Object.defineProperty(t,"__esModule",{value:!0});var o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.keys=function(e){return(e.getAttribute("class")||"").split(/\s+/).map((function(e){return e.split("-").slice(0,-1).join("-")}))},t.prototype.add=function(e,t){return!!this.canAdd(e,t)&&(this.remove(e),e.classList.add(this.keyName+"-"+t),!0)},t.prototype.remove=function(e){a(e,this.keyName).forEach((function(t){e.classList.remove(t)})),0===e.classList.length&&e.removeAttribute("class")},t.prototype.value=function(e){var t=(a(e,this.keyName)[0]||"").slice(this.keyName.length+1);return this.canAdd(e,t)?t:""},t}(n(12).default);t.default=o},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();function a(e){var t=e.split("-"),n=t.slice(1).map((function(e){return e[0].toUpperCase()+e.slice(1)})).join("");return t[0]+n}Object.defineProperty(t,"__esModule",{value:!0});var o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.keys=function(e){return(e.getAttribute("style")||"").split(";").map((function(e){return e.split(":")[0].trim()}))},t.prototype.add=function(e,t){return!!this.canAdd(e,t)&&(e.style[a(this.keyName)]=t,!0)},t.prototype.remove=function(e){e.style[a(this.keyName)]="",e.getAttribute("style")||e.removeAttribute("style")},t.prototype.value=function(e){var t=e.style[a(this.keyName)];return this.canAdd(e,t)?t:""},t}(n(12).default);t.default=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.quill=t,this.options=n,this.modules={}}return r(e,[{key:"init",value:function(){var e=this;Object.keys(this.options.modules).forEach((function(t){null==e.modules[t]&&e.addModule(t)}))}},{key:"addModule",value:function(e){var t=this.quill.constructor.import("modules/"+e);return this.modules[e]=new t(this.quill,this.options.modules[e]||{}),this.modules[e]}}]),e}();a.DEFAULTS={modules:{}},a.themes={default:a},t.default=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function e(t,n,r){null===t&&(t=Function.prototype);var a=Object.getOwnPropertyDescriptor(t,n);if(void 0===a){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in a)return a.value;var i=a.get;return void 0!==i?i.call(r):void 0},o=s(n(0)),i=s(n(7));function s(e){return e&&e.__esModule?e:{default:e}}var u="\ufeff",c=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.contentNode=document.createElement("span"),n.contentNode.setAttribute("contenteditable",!1),[].slice.call(n.domNode.childNodes).forEach((function(e){n.contentNode.appendChild(e)})),n.leftGuard=document.createTextNode(u),n.rightGuard=document.createTextNode(u),n.domNode.appendChild(n.leftGuard),n.domNode.appendChild(n.contentNode),n.domNode.appendChild(n.rightGuard),n}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),r(t,[{key:"index",value:function(e,n){return e===this.leftGuard?0:e===this.rightGuard?1:a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"index",this).call(this,e,n)}},{key:"restore",value:function(e){var t=void 0,n=void 0,r=e.data.split(u).join("");if(e===this.leftGuard)if(this.prev instanceof i.default){var a=this.prev.length();this.prev.insertAt(a,r),t={startNode:this.prev.domNode,startOffset:a+r.length}}else n=document.createTextNode(r),this.parent.insertBefore(o.default.create(n),this),t={startNode:n,startOffset:r.length};else e===this.rightGuard&&(this.next instanceof i.default?(this.next.insertAt(0,r),t={startNode:this.next.domNode,startOffset:r.length}):(n=document.createTextNode(r),this.parent.insertBefore(o.default.create(n),this.next),t={startNode:n,startOffset:r.length}));return e.data=u,t}},{key:"update",value:function(e,t){var n=this;e.forEach((function(e){if("characterData"===e.type&&(e.target===n.leftGuard||e.target===n.rightGuard)){var r=n.restore(e.target);r&&(t.range=r)}}))}}]),t}(o.default.Embed);t.default=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AlignStyle=t.AlignClass=t.AlignAttribute=void 0;var r,a=n(0),o=(r=a)&&r.__esModule?r:{default:r},i={scope:o.default.Scope.BLOCK,whitelist:["right","center","justify"]},s=new o.default.Attributor.Attribute("align","align",i),u=new o.default.Attributor.Class("align","ql-align",i),c=new o.default.Attributor.Style("align","text-align",i);t.AlignAttribute=s,t.AlignClass=u,t.AlignStyle=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BackgroundStyle=t.BackgroundClass=void 0;var r,a=n(0),o=(r=a)&&r.__esModule?r:{default:r},i=n(26),s=new o.default.Attributor.Class("background","ql-bg",{scope:o.default.Scope.INLINE}),u=new i.ColorAttributor("background","background-color",{scope:o.default.Scope.INLINE});t.BackgroundClass=s,t.BackgroundStyle=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DirectionStyle=t.DirectionClass=t.DirectionAttribute=void 0;var r,a=n(0),o=(r=a)&&r.__esModule?r:{default:r},i={scope:o.default.Scope.BLOCK,whitelist:["rtl"]},s=new o.default.Attributor.Attribute("direction","dir",i),u=new o.default.Attributor.Class("direction","ql-direction",i),c=new o.default.Attributor.Style("direction","direction",i);t.DirectionAttribute=s,t.DirectionClass=u,t.DirectionStyle=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FontClass=t.FontStyle=void 0;var r,a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function e(t,n,r){null===t&&(t=Function.prototype);var a=Object.getOwnPropertyDescriptor(t,n);if(void 0===a){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in a)return a.value;var i=a.get;return void 0!==i?i.call(r):void 0},i=n(0),s=(r=i)&&r.__esModule?r:{default:r};function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}var l={scope:s.default.Scope.INLINE,whitelist:["serif","monospace"]},f=new s.default.Attributor.Class("font","ql-font",l),d=function(e){function t(){return u(this,t),c(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),a(t,[{key:"value",value:function(e){return o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"value",this).call(this,e).replace(/["']/g,"")}}]),t}(s.default.Attributor.Style),p=new d("font","font-family",l);t.FontStyle=p,t.FontClass=f},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SizeStyle=t.SizeClass=void 0;var r,a=n(0),o=(r=a)&&r.__esModule?r:{default:r},i=new o.default.Attributor.Class("size","ql-size",{scope:o.default.Scope.INLINE,whitelist:["small","large","huge"]}),s=new o.default.Attributor.Style("size","font-size",{scope:o.default.Scope.INLINE,whitelist:["10px","18px","32px"]});t.SizeClass=i,t.SizeStyle=s},function(e,t,n){"use strict";e.exports={align:{"":n(76),center:n(77),right:n(78),justify:n(79)},background:n(80),blockquote:n(81),bold:n(82),clean:n(83),code:n(58),"code-block":n(58),color:n(84),direction:{"":n(85),rtl:n(86)},float:{center:n(87),full:n(88),left:n(89),right:n(90)},formula:n(91),header:{1:n(92),2:n(93)},italic:n(94),image:n(95),indent:{"+1":n(96),"-1":n(97)},link:n(98),list:{ordered:n(99),bullet:n(100),check:n(101)},script:{sub:n(102),super:n(103)},strike:n(104),underline:n(105),video:n(106)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getLastChangeIndex=t.default=void 0;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=i(n(0)),o=i(n(5));function i(e){return e&&e.__esModule?e:{default:e}}var s=function(e){function t(e,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return r.lastRecorded=0,r.ignoreChange=!1,r.clear(),r.quill.on(o.default.events.EDITOR_CHANGE,(function(e,t,n,a){e!==o.default.events.TEXT_CHANGE||r.ignoreChange||(r.options.userOnly&&a!==o.default.sources.USER?r.transform(t):r.record(t,n))})),r.quill.keyboard.addBinding({key:"Z",shortKey:!0},r.undo.bind(r)),r.quill.keyboard.addBinding({key:"Z",shortKey:!0,shiftKey:!0},r.redo.bind(r)),/Win/i.test(navigator.platform)&&r.quill.keyboard.addBinding({key:"Y",shortKey:!0},r.redo.bind(r)),r}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),r(t,[{key:"change",value:function(e,t){if(0!==this.stack[e].length){var n=this.stack[e].pop();this.stack[t].push(n),this.lastRecorded=0,this.ignoreChange=!0,this.quill.updateContents(n[e],o.default.sources.USER),this.ignoreChange=!1;var r=u(n[e]);this.quill.setSelection(r)}}},{key:"clear",value:function(){this.stack={undo:[],redo:[]}}},{key:"cutoff",value:function(){this.lastRecorded=0}},{key:"record",value:function(e,t){if(0!==e.ops.length){this.stack.redo=[];var n=this.quill.getContents().diff(t),r=Date.now();if(this.lastRecorded+this.options.delay>r&&this.stack.undo.length>0){var a=this.stack.undo.pop();n=n.compose(a.undo),e=a.redo.compose(e)}else this.lastRecorded=r;this.stack.undo.push({redo:e,undo:n}),this.stack.undo.length>this.options.maxStack&&this.stack.undo.shift()}}},{key:"redo",value:function(){this.change("redo","undo")}},{key:"transform",value:function(e){this.stack.undo.forEach((function(t){t.undo=e.transform(t.undo,!0),t.redo=e.transform(t.redo,!0)})),this.stack.redo.forEach((function(t){t.undo=e.transform(t.undo,!0),t.redo=e.transform(t.redo,!0)}))}},{key:"undo",value:function(){this.change("undo","redo")}}]),t}(i(n(9)).default);function u(e){var t=e.reduce((function(e,t){return e+=t.delete||0}),0),n=e.length()-t;return function(e){var t=e.ops[e.ops.length-1];return null!=t&&(null!=t.insert?"string"===typeof t.insert&&t.insert.endsWith("\n"):null!=t.attributes&&Object.keys(t.attributes).some((function(e){return null!=a.default.query(e,a.default.Scope.BLOCK)})))}(e)&&(n-=1),n}s.DEFAULTS={delay:1e3,maxStack:100,userOnly:!1},t.default=s,t.getLastChangeIndex=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.BaseTooltip=void 0;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function e(t,n,r){null===t&&(t=Function.prototype);var a=Object.getOwnPropertyDescriptor(t,n);if(void 0===a){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in a)return a.value;var i=a.get;return void 0!==i?i.call(r):void 0},o=h(n(3)),i=h(n(2)),s=h(n(8)),u=h(n(23)),c=h(n(34)),l=h(n(59)),f=h(n(60)),d=h(n(28)),p=h(n(61));function h(e){return e&&e.__esModule?e:{default:e}}function m(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function v(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function g(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var y=[!1,"center","right","justify"],b=["#000000","#e60000","#ff9900","#ffff00","#008a00","#0066cc","#9933ff","#ffffff","#facccc","#ffebcc","#ffffcc","#cce8cc","#cce0f5","#ebd6ff","#bbbbbb","#f06666","#ffc266","#ffff66","#66b966","#66a3e0","#c285ff","#888888","#a10000","#b26b00","#b2b200","#006100","#0047b2","#6b24b2","#444444","#5c0000","#663d00","#666600","#003700","#002966","#3d1466"],x=[!1,"serif","monospace"],w=["1","2","3",!1],k=["small",!1,"large","huge"],S=function(e){function t(e,n){m(this,t);var r=v(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return e.emitter.listenDOM("click",document.body,(function t(n){if(!document.body.contains(e.root))return document.body.removeEventListener("click",t);null==r.tooltip||r.tooltip.root.contains(n.target)||document.activeElement===r.tooltip.textbox||r.quill.hasFocus()||r.tooltip.hide(),null!=r.pickers&&r.pickers.forEach((function(e){e.container.contains(n.target)||e.close()}))})),r}return g(t,e),r(t,[{key:"addModule",value:function(e){var n=a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"addModule",this).call(this,e);return"toolbar"===e&&this.extendToolbar(n),n}},{key:"buildButtons",value:function(e,t){e.forEach((function(e){(e.getAttribute("class")||"").split(/\s+/).forEach((function(n){if(n.startsWith("ql-")&&(n=n.slice("ql-".length),null!=t[n]))if("direction"===n)e.innerHTML=t[n][""]+t[n].rtl;else if("string"===typeof t[n])e.innerHTML=t[n];else{var r=e.value||"";null!=r&&t[n][r]&&(e.innerHTML=t[n][r])}}))}))}},{key:"buildPickers",value:function(e,t){var n=this;this.pickers=e.map((function(e){if(e.classList.contains("ql-align"))return null==e.querySelector("option")&&N(e,y),new f.default(e,t.align);if(e.classList.contains("ql-background")||e.classList.contains("ql-color")){var n=e.classList.contains("ql-background")?"background":"color";return null==e.querySelector("option")&&N(e,b,"background"===n?"#ffffff":"#000000"),new l.default(e,t[n])}return null==e.querySelector("option")&&(e.classList.contains("ql-font")?N(e,x):e.classList.contains("ql-header")?N(e,w):e.classList.contains("ql-size")&&N(e,k)),new d.default(e)})),this.quill.on(s.default.events.EDITOR_CHANGE,(function(){n.pickers.forEach((function(e){e.update()}))}))}}]),t}(c.default);S.DEFAULTS=(0,o.default)(!0,{},c.default.DEFAULTS,{modules:{toolbar:{handlers:{formula:function(){this.quill.theme.tooltip.edit("formula")},image:function(){var e=this,t=this.container.querySelector("input.ql-image[type=file]");null==t&&((t=document.createElement("input")).setAttribute("type","file"),t.setAttribute("accept","image/png, image/gif, image/jpeg, image/bmp, image/x-icon"),t.classList.add("ql-image"),t.addEventListener("change",(function(){if(null!=t.files&&null!=t.files[0]){var n=new FileReader;n.onload=function(n){var r=e.quill.getSelection(!0);e.quill.updateContents((new i.default).retain(r.index).delete(r.length).insert({image:n.target.result}),s.default.sources.USER),e.quill.setSelection(r.index+1,s.default.sources.SILENT),t.value=""},n.readAsDataURL(t.files[0])}})),this.container.appendChild(t)),t.click()},video:function(){this.quill.theme.tooltip.edit("video")}}}}});var _=function(e){function t(e,n){m(this,t);var r=v(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return r.textbox=r.root.querySelector('input[type="text"]'),r.listen(),r}return g(t,e),r(t,[{key:"listen",value:function(){var e=this;this.textbox.addEventListener("keydown",(function(t){u.default.match(t,"enter")?(e.save(),t.preventDefault()):u.default.match(t,"escape")&&(e.cancel(),t.preventDefault())}))}},{key:"cancel",value:function(){this.hide()}},{key:"edit",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"link",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.root.classList.remove("ql-hidden"),this.root.classList.add("ql-editing"),null!=t?this.textbox.value=t:e!==this.root.getAttribute("data-mode")&&(this.textbox.value=""),this.position(this.quill.getBounds(this.quill.selection.savedRange)),this.textbox.select(),this.textbox.setAttribute("placeholder",this.textbox.getAttribute("data-"+e)||""),this.root.setAttribute("data-mode",e)}},{key:"restoreFocus",value:function(){var e=this.quill.scrollingContainer.scrollTop;this.quill.focus(),this.quill.scrollingContainer.scrollTop=e}},{key:"save",value:function(){var e=this.textbox.value;switch(this.root.getAttribute("data-mode")){case"link":var t=this.quill.root.scrollTop;this.linkRange?(this.quill.formatText(this.linkRange,"link",e,s.default.sources.USER),delete this.linkRange):(this.restoreFocus(),this.quill.format("link",e,s.default.sources.USER)),this.quill.root.scrollTop=t;break;case"video":e=function(e){var t=e.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtube\.com\/watch.*v=([a-zA-Z0-9_-]+)/)||e.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtu\.be\/([a-zA-Z0-9_-]+)/);return t?(t[1]||"https")+"://www.youtube.com/embed/"+t[2]+"?showinfo=0":(t=e.match(/^(?:(https?):\/\/)?(?:www\.)?vimeo\.com\/(\d+)/))?(t[1]||"https")+"://player.vimeo.com/video/"+t[2]+"/":e}(e);case"formula":if(!e)break;var n=this.quill.getSelection(!0);if(null!=n){var r=n.index+n.length;this.quill.insertEmbed(r,this.root.getAttribute("data-mode"),e,s.default.sources.USER),"formula"===this.root.getAttribute("data-mode")&&this.quill.insertText(r+1," ",s.default.sources.USER),this.quill.setSelection(r+2,s.default.sources.USER)}}this.textbox.value="",this.hide()}}]),t}(p.default);function N(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];t.forEach((function(t){var r=document.createElement("option");t===n?r.setAttribute("selected","selected"):r.setAttribute("value",t),e.appendChild(r)}))}t.BaseTooltip=_,t.default=S},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(){this.head=this.tail=null,this.length=0}return e.prototype.append=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.insertBefore(e[0],null),e.length>1&&this.append.apply(this,e.slice(1))},e.prototype.contains=function(e){for(var t,n=this.iterator();t=n();)if(t===e)return!0;return!1},e.prototype.insertBefore=function(e,t){e&&(e.next=t,null!=t?(e.prev=t.prev,null!=t.prev&&(t.prev.next=e),t.prev=e,t===this.head&&(this.head=e)):null!=this.tail?(this.tail.next=e,e.prev=this.tail,this.tail=e):(e.prev=null,this.head=this.tail=e),this.length+=1)},e.prototype.offset=function(e){for(var t=0,n=this.head;null!=n;){if(n===e)return t;t+=n.length(),n=n.next}return-1},e.prototype.remove=function(e){this.contains(e)&&(null!=e.prev&&(e.prev.next=e.next),null!=e.next&&(e.next.prev=e.prev),e===this.head&&(this.head=e.next),e===this.tail&&(this.tail=e.prev),this.length-=1)},e.prototype.iterator=function(e){return void 0===e&&(e=this.head),function(){var t=e;return null!=e&&(e=e.next),t}},e.prototype.find=function(e,t){void 0===t&&(t=!1);for(var n,r=this.iterator();n=r();){var a=n.length();if(e<a||t&&e===a&&(null==n.next||0!==n.next.length()))return[n,e];e-=a}return[null,0]},e.prototype.forEach=function(e){for(var t,n=this.iterator();t=n();)e(t)},e.prototype.forEachAt=function(e,t,n){if(!(t<=0))for(var r,a=this.find(e),o=a[0],i=e-a[1],s=this.iterator(o);(r=s())&&i<e+t;){var u=r.length();e>i?n(r,e-i,Math.min(t,i+u-e)):n(r,0,Math.min(u,e+t-i)),i+=u}},e.prototype.map=function(e){return this.reduce((function(t,n){return t.push(e(n)),t}),[])},e.prototype.reduce=function(e,t){for(var n,r=this.iterator();n=r();)t=e(t,n);return t},e}();t.default=r},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var a=n(17),o=n(1),i={attributes:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0},s=function(e){function t(t){var n=e.call(this,t)||this;return n.scroll=n,n.observer=new MutationObserver((function(e){n.update(e)})),n.observer.observe(n.domNode,i),n.attach(),n}return r(t,e),t.prototype.detach=function(){e.prototype.detach.call(this),this.observer.disconnect()},t.prototype.deleteAt=function(t,n){this.update(),0===t&&n===this.length()?this.children.forEach((function(e){e.remove()})):e.prototype.deleteAt.call(this,t,n)},t.prototype.formatAt=function(t,n,r,a){this.update(),e.prototype.formatAt.call(this,t,n,r,a)},t.prototype.insertAt=function(t,n,r){this.update(),e.prototype.insertAt.call(this,t,n,r)},t.prototype.optimize=function(t,n){var r=this;void 0===t&&(t=[]),void 0===n&&(n={}),e.prototype.optimize.call(this,n);for(var i=[].slice.call(this.observer.takeRecords());i.length>0;)t.push(i.pop());for(var s=function e(t,n){void 0===n&&(n=!0),null!=t&&t!==r&&null!=t.domNode.parentNode&&(null==t.domNode[o.DATA_KEY].mutations&&(t.domNode[o.DATA_KEY].mutations=[]),n&&e(t.parent))},u=function e(t){null!=t.domNode[o.DATA_KEY]&&null!=t.domNode[o.DATA_KEY].mutations&&(t instanceof a.default&&t.children.forEach(e),t.optimize(n))},c=t,l=0;c.length>0;l+=1){if(l>=100)throw new Error("[Parchment] Maximum optimize iterations reached");for(c.forEach((function(e){var t=o.find(e.target,!0);null!=t&&(t.domNode===e.target&&("childList"===e.type?(s(o.find(e.previousSibling,!1)),[].forEach.call(e.addedNodes,(function(e){var t=o.find(e,!1);s(t,!1),t instanceof a.default&&t.children.forEach((function(e){s(e,!1)}))}))):"attributes"===e.type&&s(t.prev)),s(t))})),this.children.forEach(u),i=(c=[].slice.call(this.observer.takeRecords())).slice();i.length>0;)t.push(i.pop())}},t.prototype.update=function(t,n){var r=this;void 0===n&&(n={}),(t=t||this.observer.takeRecords()).map((function(e){var t=o.find(e.target,!0);return null==t?null:null==t.domNode[o.DATA_KEY].mutations?(t.domNode[o.DATA_KEY].mutations=[e],t):(t.domNode[o.DATA_KEY].mutations.push(e),null)})).forEach((function(e){null!=e&&e!==r&&null!=e.domNode[o.DATA_KEY]&&e.update(e.domNode[o.DATA_KEY].mutations||[],n)})),null!=this.domNode[o.DATA_KEY].mutations&&e.prototype.update.call(this,this.domNode[o.DATA_KEY].mutations,n),this.optimize(t,n)},t.blotName="scroll",t.defaultChild="block",t.scope=o.Scope.BLOCK_BLOT,t.tagName="DIV",t}(a.default);t.default=s},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var a=n(18),o=n(1),i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.formats=function(n){if(n.tagName!==t.tagName)return e.formats.call(this,n)},t.prototype.format=function(n,r){var o=this;n!==this.statics.blotName||r?e.prototype.format.call(this,n,r):(this.children.forEach((function(e){e instanceof a.default||(e=e.wrap(t.blotName,!0)),o.attributes.copy(e)})),this.unwrap())},t.prototype.formatAt=function(t,n,r,a){null!=this.formats()[r]||o.query(r,o.Scope.ATTRIBUTE)?this.isolate(t,n).format(r,a):e.prototype.formatAt.call(this,t,n,r,a)},t.prototype.optimize=function(n){e.prototype.optimize.call(this,n);var r=this.formats();if(0===Object.keys(r).length)return this.unwrap();var a=this.next;a instanceof t&&a.prev===this&&function(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(var n in e)if(e[n]!==t[n])return!1;return!0}(r,a.formats())&&(a.moveChildren(this),a.remove())},t.blotName="inline",t.scope=o.Scope.INLINE_BLOT,t.tagName="SPAN",t}(a.default);t.default=i},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var a=n(18),o=n(1),i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.formats=function(n){var r=o.query(t.blotName).tagName;if(n.tagName!==r)return e.formats.call(this,n)},t.prototype.format=function(n,r){null!=o.query(n,o.Scope.BLOCK)&&(n!==this.statics.blotName||r?e.prototype.format.call(this,n,r):this.replaceWith(t.blotName))},t.prototype.formatAt=function(t,n,r,a){null!=o.query(r,o.Scope.BLOCK)?this.format(r,a):e.prototype.formatAt.call(this,t,n,r,a)},t.prototype.insertAt=function(t,n,r){if(null==r||null!=o.query(n,o.Scope.INLINE))e.prototype.insertAt.call(this,t,n,r);else{var a=this.split(t),i=o.create(n,r);a.parent.insertBefore(i,a)}},t.prototype.update=function(t,n){navigator.userAgent.match(/Trident/)?this.build():e.prototype.update.call(this,t,n)},t.blotName="block",t.scope=o.Scope.BLOCK_BLOT,t.tagName="P",t}(a.default);t.default=i},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.formats=function(e){},t.prototype.format=function(t,n){e.prototype.formatAt.call(this,0,this.length(),t,n)},t.prototype.formatAt=function(t,n,r,a){0===t&&n===this.length()?this.format(r,a):e.prototype.formatAt.call(this,t,n,r,a)},t.prototype.formats=function(){return this.statics.formats(this.domNode)},t}(n(19).default);t.default=a},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var a=n(19),o=n(1),i=function(e){function t(t){var n=e.call(this,t)||this;return n.text=n.statics.value(n.domNode),n}return r(t,e),t.create=function(e){return document.createTextNode(e)},t.value=function(e){var t=e.data;return t.normalize&&(t=t.normalize()),t},t.prototype.deleteAt=function(e,t){this.domNode.data=this.text=this.text.slice(0,e)+this.text.slice(e+t)},t.prototype.index=function(e,t){return this.domNode===e?t:-1},t.prototype.insertAt=function(t,n,r){null==r?(this.text=this.text.slice(0,t)+n+this.text.slice(t),this.domNode.data=this.text):e.prototype.insertAt.call(this,t,n,r)},t.prototype.length=function(){return this.text.length},t.prototype.optimize=function(n){e.prototype.optimize.call(this,n),this.text=this.statics.value(this.domNode),0===this.text.length?this.remove():this.next instanceof t&&this.next.prev===this&&(this.insertAt(this.length(),this.next.value()),this.next.remove())},t.prototype.position=function(e,t){return void 0===t&&(t=!1),[this.domNode,e]},t.prototype.split=function(e,t){if(void 0===t&&(t=!1),!t){if(0===e)return this;if(e===this.length())return this.next}var n=o.create(this.domNode.splitText(e));return this.parent.insertBefore(n,this.next),this.text=this.statics.value(this.domNode),n},t.prototype.update=function(e,t){var n=this;e.some((function(e){return"characterData"===e.type&&e.target===n.domNode}))&&(this.text=this.statics.value(this.domNode))},t.prototype.value=function(){return this.text},t.blotName="text",t.scope=o.Scope.INLINE_BLOT,t}(a.default);t.default=i},function(e,t,n){"use strict";var r=document.createElement("div");if(r.classList.toggle("test-class",!1),r.classList.contains("test-class")){var a=DOMTokenList.prototype.toggle;DOMTokenList.prototype.toggle=function(e,t){return arguments.length>1&&!this.contains(e)===!t?t:a.call(this,e)}}String.prototype.startsWith||(String.prototype.startsWith=function(e,t){return t=t||0,this.substr(t,e.length)===e}),String.prototype.endsWith||(String.prototype.endsWith=function(e,t){var n=this.toString();("number"!==typeof t||!isFinite(t)||Math.floor(t)!==t||t>n.length)&&(t=n.length),t-=e.length;var r=n.indexOf(e,t);return-1!==r&&r===t}),Array.prototype.find||Object.defineProperty(Array.prototype,"find",{value:function(e){if(null===this)throw new TypeError("Array.prototype.find called on null or undefined");if("function"!==typeof e)throw new TypeError("predicate must be a function");for(var t,n=Object(this),r=n.length>>>0,a=arguments[1],o=0;o<r;o++)if(t=n[o],e.call(a,t,o,n))return t}}),document.addEventListener("DOMContentLoaded",(function(){document.execCommand("enableObjectResizing",!1,!1),document.execCommand("autoUrlDetect",!1,!1)}))},function(e,t){var n=-1;function r(e,t,u){if(e==t)return e?[[0,e]]:[];(u<0||e.length<u)&&(u=null);var l=o(e,t),f=e.substring(0,l);l=i(e=e.substring(l),t=t.substring(l));var d=e.substring(e.length-l),p=function(e,t){var s;if(!e)return[[1,t]];if(!t)return[[n,e]];var u=e.length>t.length?e:t,c=e.length>t.length?t:e,l=u.indexOf(c);if(-1!=l)return s=[[1,u.substring(0,l)],[0,c],[1,u.substring(l+c.length)]],e.length>t.length&&(s[0][0]=s[2][0]=n),s;if(1==c.length)return[[n,e],[1,t]];var f=function(e,t){var n=e.length>t.length?e:t,r=e.length>t.length?t:e;if(n.length<4||2*r.length<n.length)return null;function a(e,t,n){for(var r,a,s,u,c=e.substring(n,n+Math.floor(e.length/4)),l=-1,f="";-1!=(l=t.indexOf(c,l+1));){var d=o(e.substring(n),t.substring(l)),p=i(e.substring(0,n),t.substring(0,l));f.length<p+d&&(f=t.substring(l-p,l)+t.substring(l,l+d),r=e.substring(0,n-p),a=e.substring(n+d),s=t.substring(0,l-p),u=t.substring(l+d))}return 2*f.length>=e.length?[r,a,s,u,f]:null}var s,u,c,l,f,d=a(n,r,Math.ceil(n.length/4)),p=a(n,r,Math.ceil(n.length/2));if(!d&&!p)return null;s=p?d&&d[4].length>p[4].length?d:p:d,e.length>t.length?(u=s[0],c=s[1],l=s[2],f=s[3]):(l=s[0],f=s[1],u=s[2],c=s[3]);var h=s[4];return[u,c,l,f,h]}(e,t);if(f){var d=f[0],p=f[1],h=f[2],m=f[3],v=f[4],g=r(d,h),y=r(p,m);return g.concat([[0,v]],y)}return function(e,t){for(var r=e.length,o=t.length,i=Math.ceil((r+o)/2),s=i,u=2*i,c=new Array(u),l=new Array(u),f=0;f<u;f++)c[f]=-1,l[f]=-1;c[s+1]=0,l[s+1]=0;for(var d=r-o,p=d%2!=0,h=0,m=0,v=0,g=0,y=0;y<i;y++){for(var b=-y+h;b<=y-m;b+=2){for(var x=s+b,w=(E=b==-y||b!=y&&c[x-1]<c[x+1]?c[x+1]:c[x-1]+1)-b;E<r&&w<o&&e.charAt(E)==t.charAt(w);)E++,w++;if(c[x]=E,E>r)m+=2;else if(w>o)h+=2;else if(p&&(_=s+d-b)>=0&&_<u&&-1!=l[_]&&E>=(S=r-l[_]))return a(e,t,E,w)}for(var k=-y+v;k<=y-g;k+=2){for(var S,_=s+k,N=(S=k==-y||k!=y&&l[_-1]<l[_+1]?l[_+1]:l[_-1]+1)-k;S<r&&N<o&&e.charAt(r-S-1)==t.charAt(o-N-1);)S++,N++;if(l[_]=S,S>r)g+=2;else if(N>o)v+=2;else if(!p){var E;if((x=s+d-k)>=0&&x<u&&-1!=c[x])if(w=s+(E=c[x])-x,E>=(S=r-S))return a(e,t,E,w)}}}return[[n,e],[1,t]]}(e,t)}(e=e.substring(0,e.length-l),t=t.substring(0,t.length-l));return f&&p.unshift([0,f]),d&&p.push([0,d]),s(p),null!=u&&(p=function(e,t){var r=function(e,t){if(0===t)return[0,e];for(var r=0,a=0;a<e.length;a++){var o=e[a];if(o[0]===n||0===o[0]){var i=r+o[1].length;if(t===i)return[a+1,e];if(t<i){e=e.slice();var s=t-r,u=[o[0],o[1].slice(0,s)],c=[o[0],o[1].slice(s)];return e.splice(a,1,u,c),[a+1,e]}r=i}}throw new Error("cursor_pos is out of bounds!")}(e,t),a=r[1],o=r[0],i=a[o],s=a[o+1];if(null==i)return e;if(0!==i[0])return e;if(null!=s&&i[1]+s[1]===s[1]+i[1])return a.splice(o,2,s,i),c(a,o,2);if(null!=s&&0===s[1].indexOf(i[1])){a.splice(o,2,[s[0],i[1]],[0,i[1]]);var u=s[1].slice(i[1].length);return u.length>0&&a.splice(o+2,0,[s[0],u]),c(a,o,3)}return e}(p,u)),p=function(e){for(var t=!1,r=function(e){return e.charCodeAt(0)>=56320&&e.charCodeAt(0)<=57343},a=function(e){return e.charCodeAt(e.length-1)>=55296&&e.charCodeAt(e.length-1)<=56319},o=2;o<e.length;o+=1)0===e[o-2][0]&&a(e[o-2][1])&&e[o-1][0]===n&&r(e[o-1][1])&&1===e[o][0]&&r(e[o][1])&&(t=!0,e[o-1][1]=e[o-2][1].slice(-1)+e[o-1][1],e[o][1]=e[o-2][1].slice(-1)+e[o][1],e[o-2][1]=e[o-2][1].slice(0,-1));if(!t)return e;var i=[];for(o=0;o<e.length;o+=1)e[o][1].length>0&&i.push(e[o]);return i}(p)}function a(e,t,n,a){var o=e.substring(0,n),i=t.substring(0,a),s=e.substring(n),u=t.substring(a),c=r(o,i),l=r(s,u);return c.concat(l)}function o(e,t){if(!e||!t||e.charAt(0)!=t.charAt(0))return 0;for(var n=0,r=Math.min(e.length,t.length),a=r,o=0;n<a;)e.substring(o,a)==t.substring(o,a)?o=n=a:r=a,a=Math.floor((r-n)/2+n);return a}function i(e,t){if(!e||!t||e.charAt(e.length-1)!=t.charAt(t.length-1))return 0;for(var n=0,r=Math.min(e.length,t.length),a=r,o=0;n<a;)e.substring(e.length-a,e.length-o)==t.substring(t.length-a,t.length-o)?o=n=a:r=a,a=Math.floor((r-n)/2+n);return a}function s(e){e.push([0,""]);for(var t,r=0,a=0,u=0,c="",l="";r<e.length;)switch(e[r][0]){case 1:u++,l+=e[r][1],r++;break;case n:a++,c+=e[r][1],r++;break;case 0:a+u>1?(0!==a&&0!==u&&(0!==(t=o(l,c))&&(r-a-u>0&&0==e[r-a-u-1][0]?e[r-a-u-1][1]+=l.substring(0,t):(e.splice(0,0,[0,l.substring(0,t)]),r++),l=l.substring(t),c=c.substring(t)),0!==(t=i(l,c))&&(e[r][1]=l.substring(l.length-t)+e[r][1],l=l.substring(0,l.length-t),c=c.substring(0,c.length-t))),0===a?e.splice(r-u,a+u,[1,l]):0===u?e.splice(r-a,a+u,[n,c]):e.splice(r-a-u,a+u,[n,c],[1,l]),r=r-a-u+(a?1:0)+(u?1:0)+1):0!==r&&0==e[r-1][0]?(e[r-1][1]+=e[r][1],e.splice(r,1)):r++,u=0,a=0,c="",l=""}""===e[e.length-1][1]&&e.pop();var f=!1;for(r=1;r<e.length-1;)0==e[r-1][0]&&0==e[r+1][0]&&(e[r][1].substring(e[r][1].length-e[r-1][1].length)==e[r-1][1]?(e[r][1]=e[r-1][1]+e[r][1].substring(0,e[r][1].length-e[r-1][1].length),e[r+1][1]=e[r-1][1]+e[r+1][1],e.splice(r-1,1),f=!0):e[r][1].substring(0,e[r+1][1].length)==e[r+1][1]&&(e[r-1][1]+=e[r+1][1],e[r][1]=e[r][1].substring(e[r+1][1].length)+e[r+1][1],e.splice(r+1,1),f=!0)),r++;f&&s(e)}var u=r;function c(e,t,n){for(var r=t+n-1;r>=0&&r>=t-1;r--)if(r+1<e.length){var a=e[r],o=e[r+1];a[0]===o[1]&&e.splice(r,2,[a[0],a[1]+o[1]])}return e}u.INSERT=1,u.DELETE=n,u.EQUAL=0,e.exports=u},function(e,t){function n(e){var t=[];for(var n in e)t.push(n);return t}(e.exports="function"===typeof Object.keys?Object.keys:n).shim=n},function(e,t){var n="[object Arguments]"==function(){return Object.prototype.toString.call(arguments)}();function r(e){return"[object Arguments]"==Object.prototype.toString.call(e)}function a(e){return e&&"object"==typeof e&&"number"==typeof e.length&&Object.prototype.hasOwnProperty.call(e,"callee")&&!Object.prototype.propertyIsEnumerable.call(e,"callee")||!1}(t=e.exports=n?r:a).supported=r,t.unsupported=a},function(e,t){"use strict";var n=Object.prototype.hasOwnProperty,r="~";function a(){}function o(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function i(){this._events=new a,this._eventsCount=0}Object.create&&(a.prototype=Object.create(null),(new a).__proto__||(r=!1)),i.prototype.eventNames=function(){var e,t,a=[];if(0===this._eventsCount)return a;for(t in e=this._events)n.call(e,t)&&a.push(r?t.slice(1):t);return Object.getOwnPropertySymbols?a.concat(Object.getOwnPropertySymbols(e)):a},i.prototype.listeners=function(e,t){var n=r?r+e:e,a=this._events[n];if(t)return!!a;if(!a)return[];if(a.fn)return[a.fn];for(var o=0,i=a.length,s=new Array(i);o<i;o++)s[o]=a[o].fn;return s},i.prototype.emit=function(e,t,n,a,o,i){var s=r?r+e:e;if(!this._events[s])return!1;var u,c,l=this._events[s],f=arguments.length;if(l.fn){switch(l.once&&this.removeListener(e,l.fn,void 0,!0),f){case 1:return l.fn.call(l.context),!0;case 2:return l.fn.call(l.context,t),!0;case 3:return l.fn.call(l.context,t,n),!0;case 4:return l.fn.call(l.context,t,n,a),!0;case 5:return l.fn.call(l.context,t,n,a,o),!0;case 6:return l.fn.call(l.context,t,n,a,o,i),!0}for(c=1,u=new Array(f-1);c<f;c++)u[c-1]=arguments[c];l.fn.apply(l.context,u)}else{var d,p=l.length;for(c=0;c<p;c++)switch(l[c].once&&this.removeListener(e,l[c].fn,void 0,!0),f){case 1:l[c].fn.call(l[c].context);break;case 2:l[c].fn.call(l[c].context,t);break;case 3:l[c].fn.call(l[c].context,t,n);break;case 4:l[c].fn.call(l[c].context,t,n,a);break;default:if(!u)for(d=1,u=new Array(f-1);d<f;d++)u[d-1]=arguments[d];l[c].fn.apply(l[c].context,u)}}return!0},i.prototype.on=function(e,t,n){var a=new o(t,n||this),i=r?r+e:e;return this._events[i]?this._events[i].fn?this._events[i]=[this._events[i],a]:this._events[i].push(a):(this._events[i]=a,this._eventsCount++),this},i.prototype.once=function(e,t,n){var a=new o(t,n||this,!0),i=r?r+e:e;return this._events[i]?this._events[i].fn?this._events[i]=[this._events[i],a]:this._events[i].push(a):(this._events[i]=a,this._eventsCount++),this},i.prototype.removeListener=function(e,t,n,o){var i=r?r+e:e;if(!this._events[i])return this;if(!t)return 0===--this._eventsCount?this._events=new a:delete this._events[i],this;var s=this._events[i];if(s.fn)s.fn!==t||o&&!s.once||n&&s.context!==n||(0===--this._eventsCount?this._events=new a:delete this._events[i]);else{for(var u=0,c=[],l=s.length;u<l;u++)(s[u].fn!==t||o&&!s[u].once||n&&s[u].context!==n)&&c.push(s[u]);c.length?this._events[i]=1===c.length?c[0]:c:0===--this._eventsCount?this._events=new a:delete this._events[i]}return this},i.prototype.removeAllListeners=function(e){var t;return e?(t=r?r+e:e,this._events[t]&&(0===--this._eventsCount?this._events=new a:delete this._events[t])):(this._events=new a,this._eventsCount=0),this},i.prototype.off=i.prototype.removeListener,i.prototype.addListener=i.prototype.on,i.prototype.setMaxListeners=function(){return this},i.prefixed=r,i.EventEmitter=i,"undefined"!==typeof e&&(e.exports=i)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.matchText=t.matchSpacing=t.matchNewline=t.matchBlot=t.matchAttributor=t.default=void 0;var r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,a=!1,o=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(u){a=!0,o=u}finally{try{!r&&s.return&&s.return()}finally{if(a)throw o}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=b(n(3)),s=b(n(2)),u=b(n(0)),c=b(n(5)),l=b(n(10)),f=b(n(9)),d=n(36),p=n(37),h=b(n(13)),m=n(26),v=n(38),g=n(39),y=n(40);function b(e){return e&&e.__esModule?e:{default:e}}function x(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var w=(0,l.default)("quill:clipboard"),k="__ql-matcher",S=[[Node.TEXT_NODE,F],[Node.TEXT_NODE,P],["br",function(e,t){return I(t,"\n")||t.insert("\n"),t}],[Node.ELEMENT_NODE,P],[Node.ELEMENT_NODE,R],[Node.ELEMENT_NODE,j],[Node.ELEMENT_NODE,M],[Node.ELEMENT_NODE,function(e,t){var n={},r=e.style||{};return r.fontStyle&&"italic"===T(e).fontStyle&&(n.italic=!0),r.fontWeight&&(T(e).fontWeight.startsWith("bold")||parseInt(T(e).fontWeight)>=700)&&(n.bold=!0),Object.keys(n).length>0&&(t=C(t,n)),parseFloat(r.textIndent||0)>0&&(t=(new s.default).insert("\t").concat(t)),t}],["li",function(e,t){var n=u.default.query(e);if(null==n||"list-item"!==n.blotName||!I(t,"\n"))return t;for(var r=-1,a=e.parentNode;!a.classList.contains("ql-clipboard");)"list"===(u.default.query(a)||{}).blotName&&(r+=1),a=a.parentNode;return r<=0?t:t.compose((new s.default).retain(t.length()-1).retain(1,{indent:r}))}],["b",D.bind(D,"bold")],["i",D.bind(D,"italic")],["style",function(){return new s.default}]],_=[d.AlignAttribute,v.DirectionAttribute].reduce((function(e,t){return e[t.keyName]=t,e}),{}),N=[d.AlignStyle,p.BackgroundStyle,m.ColorStyle,v.DirectionStyle,g.FontStyle,y.SizeStyle].reduce((function(e,t){return e[t.keyName]=t,e}),{}),E=function(e){function t(e,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return r.quill.root.addEventListener("paste",r.onPaste.bind(r)),r.container=r.quill.addContainer("ql-clipboard"),r.container.setAttribute("contenteditable",!0),r.container.setAttribute("tabindex",-1),r.matchers=[],S.concat(r.options.matchers).forEach((function(e){var t=a(e,2),o=t[0],i=t[1];(n.matchVisual||i!==j)&&r.addMatcher(o,i)})),r}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),o(t,[{key:"addMatcher",value:function(e,t){this.matchers.push([e,t])}},{key:"convert",value:function(e){if("string"===typeof e)return this.container.innerHTML=e.replace(/\>\r?\n +\</g,"><"),this.convert();var t=this.quill.getFormat(this.quill.selection.savedRange.index);if(t[h.default.blotName]){var n=this.container.innerText;return this.container.innerHTML="",(new s.default).insert(n,x({},h.default.blotName,t[h.default.blotName]))}var r=this.prepareMatching(),o=a(r,2),i=o[0],u=o[1],c=A(this.container,i,u);return I(c,"\n")&&null==c.ops[c.ops.length-1].attributes&&(c=c.compose((new s.default).retain(c.length()-1).delete(1))),w.log("convert",this.container.innerHTML,c),this.container.innerHTML="",c}},{key:"dangerouslyPasteHTML",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:c.default.sources.API;if("string"===typeof e)this.quill.setContents(this.convert(e),t),this.quill.setSelection(0,c.default.sources.SILENT);else{var r=this.convert(t);this.quill.updateContents((new s.default).retain(e).concat(r),n),this.quill.setSelection(e+r.length(),c.default.sources.SILENT)}}},{key:"onPaste",value:function(e){var t=this;if(!e.defaultPrevented&&this.quill.isEnabled()){var n=this.quill.getSelection(),r=(new s.default).retain(n.index),a=this.quill.scrollingContainer.scrollTop;this.container.focus(),this.quill.selection.update(c.default.sources.SILENT),setTimeout((function(){r=r.concat(t.convert()).delete(n.length),t.quill.updateContents(r,c.default.sources.USER),t.quill.setSelection(r.length()-n.length,c.default.sources.SILENT),t.quill.scrollingContainer.scrollTop=a,t.quill.focus()}),1)}}},{key:"prepareMatching",value:function(){var e=this,t=[],n=[];return this.matchers.forEach((function(r){var o=a(r,2),i=o[0],s=o[1];switch(i){case Node.TEXT_NODE:n.push(s);break;case Node.ELEMENT_NODE:t.push(s);break;default:[].forEach.call(e.container.querySelectorAll(i),(function(e){e[k]=e[k]||[],e[k].push(s)}))}})),[t,n]}}]),t}(f.default);function C(e,t,n){return"object"===("undefined"===typeof t?"undefined":r(t))?Object.keys(t).reduce((function(e,n){return C(e,n,t[n])}),e):e.reduce((function(e,r){return r.attributes&&r.attributes[t]?e.push(r):e.insert(r.insert,(0,i.default)({},x({},t,n),r.attributes))}),new s.default)}function T(e){if(e.nodeType!==Node.ELEMENT_NODE)return{};var t="__ql-computed-style";return e[t]||(e[t]=window.getComputedStyle(e))}function I(e,t){for(var n="",r=e.ops.length-1;r>=0&&n.length<t.length;--r){var a=e.ops[r];if("string"!==typeof a.insert)break;n=a.insert+n}return n.slice(-1*t.length)===t}function O(e){if(0===e.childNodes.length)return!1;var t=T(e);return["block","list-item"].indexOf(t.display)>-1}function A(e,t,n){return e.nodeType===e.TEXT_NODE?n.reduce((function(t,n){return n(e,t)}),new s.default):e.nodeType===e.ELEMENT_NODE?[].reduce.call(e.childNodes||[],(function(r,a){var o=A(a,t,n);return a.nodeType===e.ELEMENT_NODE&&(o=t.reduce((function(e,t){return t(a,e)}),o),o=(a[k]||[]).reduce((function(e,t){return t(a,e)}),o)),r.concat(o)}),new s.default):new s.default}function D(e,t,n){return C(n,e,!0)}function M(e,t){var n=u.default.Attributor.Attribute.keys(e),r=u.default.Attributor.Class.keys(e),a=u.default.Attributor.Style.keys(e),o={};return n.concat(r).concat(a).forEach((function(t){var n=u.default.query(t,u.default.Scope.ATTRIBUTE);null!=n&&(o[n.attrName]=n.value(e),o[n.attrName])||(null==(n=_[t])||n.attrName!==t&&n.keyName!==t||(o[n.attrName]=n.value(e)||void 0),null==(n=N[t])||n.attrName!==t&&n.keyName!==t||(n=N[t],o[n.attrName]=n.value(e)||void 0))})),Object.keys(o).length>0&&(t=C(t,o)),t}function R(e,t){var n=u.default.query(e);if(null==n)return t;if(n.prototype instanceof u.default.Embed){var r={},a=n.value(e);null!=a&&(r[n.blotName]=a,t=(new s.default).insert(r,n.formats(e)))}else"function"===typeof n.formats&&(t=C(t,n.blotName,n.formats(e)));return t}function P(e,t){return I(t,"\n")||(O(e)||t.length()>0&&e.nextSibling&&O(e.nextSibling))&&t.insert("\n"),t}function j(e,t){if(O(e)&&null!=e.nextElementSibling&&!I(t,"\n\n")){var n=e.offsetHeight+parseFloat(T(e).marginTop)+parseFloat(T(e).marginBottom);e.nextElementSibling.offsetTop>e.offsetTop+1.5*n&&t.insert("\n")}return t}function F(e,t){var n=e.data;if("O:P"===e.parentNode.tagName)return t.insert(n.trim());if(0===n.trim().length&&e.parentNode.classList.contains("ql-clipboard"))return t;if(!T(e.parentNode).whiteSpace.startsWith("pre")){var r=function(e,t){return(t=t.replace(/[^\u00a0]/g,"")).length<1&&e?" ":t};n=(n=n.replace(/\r\n/g," ").replace(/\n/g," ")).replace(/\s\s+/g,r.bind(r,!0)),(null==e.previousSibling&&O(e.parentNode)||null!=e.previousSibling&&O(e.previousSibling))&&(n=n.replace(/^\s+/,r.bind(r,!1))),(null==e.nextSibling&&O(e.parentNode)||null!=e.nextSibling&&O(e.nextSibling))&&(n=n.replace(/\s+$/,r.bind(r,!1)))}return t.insert(n)}E.DEFAULTS={matchers:[],matchVisual:!0},t.default=E,t.matchAttributor=M,t.matchBlot=R,t.matchNewline=P,t.matchSpacing=j,t.matchText=F},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function e(t,n,r){null===t&&(t=Function.prototype);var a=Object.getOwnPropertyDescriptor(t,n);if(void 0===a){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in a)return a.value;var i=a.get;return void 0!==i?i.call(r):void 0},i=n(6);function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}var c=function(e){function t(){return s(this,t),u(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),a(t,[{key:"optimize",value:function(e){o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"optimize",this).call(this,e),this.domNode.tagName!==this.statics.tagName[0]&&this.replaceWith(this.statics.blotName)}}],[{key:"create",value:function(){return o(t.__proto__||Object.getPrototypeOf(t),"create",this).call(this)}},{key:"formats",value:function(){return!0}}]),t}(((r=i)&&r.__esModule?r:{default:r}).default);c.blotName="bold",c.tagName=["STRONG","B"],t.default=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.addControls=t.default=void 0;var r=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,a=!1,o=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(u){a=!0,o=u}finally{try{!r&&s.return&&s.return()}finally{if(a)throw o}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=l(n(2)),i=l(n(0)),s=l(n(5)),u=l(n(10)),c=l(n(9));function l(e){return e&&e.__esModule?e:{default:e}}function f(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}var d=(0,u.default)("quill:toolbar"),p=function(e){function t(e,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a,o=f(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));if(Array.isArray(o.options.container)){var i=document.createElement("div");m(i,o.options.container),e.container.parentNode.insertBefore(i,e.container),o.container=i}else"string"===typeof o.options.container?o.container=document.querySelector(o.options.container):o.container=o.options.container;return o.container instanceof HTMLElement?(o.container.classList.add("ql-toolbar"),o.controls=[],o.handlers={},Object.keys(o.options.handlers).forEach((function(e){o.addHandler(e,o.options.handlers[e])})),[].forEach.call(o.container.querySelectorAll("button, select"),(function(e){o.attach(e)})),o.quill.on(s.default.events.EDITOR_CHANGE,(function(e,t){e===s.default.events.SELECTION_CHANGE&&o.update(t)})),o.quill.on(s.default.events.SCROLL_OPTIMIZE,(function(){var e=o.quill.selection.getRange(),t=r(e,1)[0];o.update(t)})),o):(a=d.error("Container required for toolbar",o.options),f(o,a))}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),a(t,[{key:"addHandler",value:function(e,t){this.handlers[e]=t}},{key:"attach",value:function(e){var t=this,n=[].find.call(e.classList,(function(e){return 0===e.indexOf("ql-")}));if(n){if(n=n.slice("ql-".length),"BUTTON"===e.tagName&&e.setAttribute("type","button"),null==this.handlers[n]){if(null!=this.quill.scroll.whitelist&&null==this.quill.scroll.whitelist[n])return void d.warn("ignoring attaching to disabled format",n,e);if(null==i.default.query(n))return void d.warn("ignoring attaching to nonexistent format",n,e)}var a="SELECT"===e.tagName?"change":"click";e.addEventListener(a,(function(a){var u=void 0;if("SELECT"===e.tagName){if(e.selectedIndex<0)return;var c=e.options[e.selectedIndex];u=!c.hasAttribute("selected")&&(c.value||!1)}else u=!e.classList.contains("ql-active")&&(e.value||!e.hasAttribute("value")),a.preventDefault();t.quill.focus();var l=t.quill.selection.getRange(),f=r(l,1)[0];if(null!=t.handlers[n])t.handlers[n].call(t,u);else if(i.default.query(n).prototype instanceof i.default.Embed){if(!(u=prompt("Enter "+n)))return;t.quill.updateContents((new o.default).retain(f.index).delete(f.length).insert(function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}({},n,u)),s.default.sources.USER)}else t.quill.format(n,u,s.default.sources.USER);t.update(f)})),this.controls.push([n,e])}}},{key:"update",value:function(e){var t=null==e?{}:this.quill.getFormat(e);this.controls.forEach((function(n){var a=r(n,2),o=a[0],i=a[1];if("SELECT"===i.tagName){var s=void 0;if(null==e)s=null;else if(null==t[o])s=i.querySelector("option[selected]");else if(!Array.isArray(t[o])){var u=t[o];"string"===typeof u&&(u=u.replace(/\"/g,'\\"')),s=i.querySelector('option[value="'+u+'"]')}null==s?(i.value="",i.selectedIndex=-1):s.selected=!0}else if(null==e)i.classList.remove("ql-active");else if(i.hasAttribute("value")){var c=t[o]===i.getAttribute("value")||null!=t[o]&&t[o].toString()===i.getAttribute("value")||null==t[o]&&!i.getAttribute("value");i.classList.toggle("ql-active",c)}else i.classList.toggle("ql-active",null!=t[o])}))}}]),t}(c.default);function h(e,t,n){var r=document.createElement("button");r.setAttribute("type","button"),r.classList.add("ql-"+t),null!=n&&(r.value=n),e.appendChild(r)}function m(e,t){Array.isArray(t[0])||(t=[t]),t.forEach((function(t){var n=document.createElement("span");n.classList.add("ql-formats"),t.forEach((function(e){if("string"===typeof e)h(n,e);else{var t=Object.keys(e)[0],r=e[t];Array.isArray(r)?function(e,t,n){var r=document.createElement("select");r.classList.add("ql-"+t),n.forEach((function(e){var t=document.createElement("option");!1!==e?t.setAttribute("value",e):t.setAttribute("selected","selected"),r.appendChild(t)})),e.appendChild(r)}(n,t,r):h(n,t,r)}})),e.appendChild(n)}))}p.DEFAULTS={},p.DEFAULTS={container:null,handlers:{clean:function(){var e=this,t=this.quill.getSelection();if(null!=t)if(0==t.length){var n=this.quill.getFormat();Object.keys(n).forEach((function(t){null!=i.default.query(t,i.default.Scope.INLINE)&&e.quill.format(t,!1)}))}else this.quill.removeFormat(t,s.default.sources.USER)},direction:function(e){var t=this.quill.getFormat().align;"rtl"===e&&null==t?this.quill.format("align","right",s.default.sources.USER):e||"right"!==t||this.quill.format("align",!1,s.default.sources.USER),this.quill.format("direction",e,s.default.sources.USER)},indent:function(e){var t=this.quill.getSelection(),n=this.quill.getFormat(t),r=parseInt(n.indent||0);if("+1"===e||"-1"===e){var a="+1"===e?1:-1;"rtl"===n.direction&&(a*=-1),this.quill.format("indent",r+a,s.default.sources.USER)}},link:function(e){!0===e&&(e=prompt("Enter link URL:")),this.quill.format("link",e,s.default.sources.USER)},list:function(e){var t=this.quill.getSelection(),n=this.quill.getFormat(t);"check"===e?"checked"===n.list||"unchecked"===n.list?this.quill.format("list",!1,s.default.sources.USER):this.quill.format("list","unchecked",s.default.sources.USER):this.quill.format("list",e,s.default.sources.USER)}}},t.default=p,t.addControls=m},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <polyline class="ql-even ql-stroke" points="5 7 3 9 5 11"></polyline> <polyline class="ql-even ql-stroke" points="13 7 15 9 13 11"></polyline> <line class=ql-stroke x1=10 x2=8 y1=5 y2=13></line> </svg>'},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function e(t,n,r){null===t&&(t=Function.prototype);var a=Object.getOwnPropertyDescriptor(t,n);if(void 0===a){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in a)return a.value;var i=a.get;return void 0!==i?i.call(r):void 0},i=n(28),s=function(e){function t(e,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.label.innerHTML=n,r.container.classList.add("ql-color-picker"),[].slice.call(r.container.querySelectorAll(".ql-picker-item"),0,7).forEach((function(e){e.classList.add("ql-primary")})),r}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),a(t,[{key:"buildItem",value:function(e){var n=o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"buildItem",this).call(this,e);return n.style.backgroundColor=e.getAttribute("value")||"",n}},{key:"selectItem",value:function(e,n){o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"selectItem",this).call(this,e,n);var r=this.label.querySelector(".ql-color-label"),a=e&&e.getAttribute("data-value")||"";r&&("line"===r.tagName?r.style.stroke=a:r.style.fill=a)}}]),t}(((r=i)&&r.__esModule?r:{default:r}).default);t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function e(t,n,r){null===t&&(t=Function.prototype);var a=Object.getOwnPropertyDescriptor(t,n);if(void 0===a){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in a)return a.value;var i=a.get;return void 0!==i?i.call(r):void 0},i=n(28),s=function(e){function t(e,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.container.classList.add("ql-icon-picker"),[].forEach.call(r.container.querySelectorAll(".ql-picker-item"),(function(e){e.innerHTML=n[e.getAttribute("data-value")||""]})),r.defaultItem=r.container.querySelector(".ql-selected"),r.selectItem(r.defaultItem),r}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),a(t,[{key:"selectItem",value:function(e,n){o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"selectItem",this).call(this,e,n),e=e||this.defaultItem,this.label.innerHTML=e.innerHTML}}]),t}(((r=i)&&r.__esModule?r:{default:r}).default);t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function(){function e(t,n){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.quill=t,this.boundsContainer=n||document.body,this.root=t.addContainer("ql-tooltip"),this.root.innerHTML=this.constructor.TEMPLATE,this.quill.root===this.quill.scrollingContainer&&this.quill.root.addEventListener("scroll",(function(){r.root.style.marginTop=-1*r.quill.root.scrollTop+"px"})),this.hide()}return r(e,[{key:"hide",value:function(){this.root.classList.add("ql-hidden")}},{key:"position",value:function(e){var t=e.left+e.width/2-this.root.offsetWidth/2,n=e.bottom+this.quill.root.scrollTop;this.root.style.left=t+"px",this.root.style.top=n+"px",this.root.classList.remove("ql-flip");var r=this.boundsContainer.getBoundingClientRect(),a=this.root.getBoundingClientRect(),o=0;if(a.right>r.right&&(o=r.right-a.right,this.root.style.left=t+o+"px"),a.left<r.left&&(o=r.left-a.left,this.root.style.left=t+o+"px"),a.bottom>r.bottom){var i=a.bottom-a.top,s=e.bottom-e.top+i;this.root.style.top=n-s+"px",this.root.classList.add("ql-flip")}return o}},{key:"show",value:function(){this.root.classList.remove("ql-editing"),this.root.classList.remove("ql-hidden")}}]),e}();t.default=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,a=!1,o=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(u){a=!0,o=u}finally{try{!r&&s.return&&s.return()}finally{if(a)throw o}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},a=function e(t,n,r){null===t&&(t=Function.prototype);var a=Object.getOwnPropertyDescriptor(t,n);if(void 0===a){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in a)return a.value;var i=a.get;return void 0!==i?i.call(r):void 0},o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=p(n(3)),s=p(n(8)),u=n(43),c=p(u),l=p(n(27)),f=n(15),d=p(n(41));function p(e){return e&&e.__esModule?e:{default:e}}function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function v(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var g=[[{header:["1","2","3",!1]}],["bold","italic","underline","link"],[{list:"ordered"},{list:"bullet"}],["clean"]],y=function(e){function t(e,n){h(this,t),null!=n.modules.toolbar&&null==n.modules.toolbar.container&&(n.modules.toolbar.container=g);var r=m(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return r.quill.container.classList.add("ql-snow"),r}return v(t,e),o(t,[{key:"extendToolbar",value:function(e){e.container.classList.add("ql-snow"),this.buildButtons([].slice.call(e.container.querySelectorAll("button")),d.default),this.buildPickers([].slice.call(e.container.querySelectorAll("select")),d.default),this.tooltip=new b(this.quill,this.options.bounds),e.container.querySelector(".ql-link")&&this.quill.keyboard.addBinding({key:"K",shortKey:!0},(function(t,n){e.handlers.link.call(e,!n.format.link)}))}}]),t}(c.default);y.DEFAULTS=(0,i.default)(!0,{},c.default.DEFAULTS,{modules:{toolbar:{handlers:{link:function(e){if(e){var t=this.quill.getSelection();if(null==t||0==t.length)return;var n=this.quill.getText(t);/^\S+@\S+\.\S+$/.test(n)&&0!==n.indexOf("mailto:")&&(n="mailto:"+n),this.quill.theme.tooltip.edit("link",n)}else this.quill.format("link",!1)}}}}});var b=function(e){function t(e,n){h(this,t);var r=m(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return r.preview=r.root.querySelector("a.ql-preview"),r}return v(t,e),o(t,[{key:"listen",value:function(){var e=this;a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"listen",this).call(this),this.root.querySelector("a.ql-action").addEventListener("click",(function(t){e.root.classList.contains("ql-editing")?e.save():e.edit("link",e.preview.textContent),t.preventDefault()})),this.root.querySelector("a.ql-remove").addEventListener("click",(function(t){if(null!=e.linkRange){var n=e.linkRange;e.restoreFocus(),e.quill.formatText(n,"link",!1,s.default.sources.USER),delete e.linkRange}t.preventDefault(),e.hide()})),this.quill.on(s.default.events.SELECTION_CHANGE,(function(t,n,a){if(null!=t){if(0===t.length&&a===s.default.sources.USER){var o=e.quill.scroll.descendant(l.default,t.index),i=r(o,2),u=i[0],c=i[1];if(null!=u){e.linkRange=new f.Range(t.index-c,u.length());var d=l.default.formats(u.domNode);return e.preview.textContent=d,e.preview.setAttribute("href",d),e.show(),void e.position(e.quill.getBounds(e.linkRange))}}else delete e.linkRange;e.hide()}}))}},{key:"show",value:function(){a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"show",this).call(this),this.root.removeAttribute("data-mode")}}]),t}(u.BaseTooltip);b.TEMPLATE=['<a class="ql-preview" rel="noopener noreferrer" target="_blank" href="about:blank"></a>','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-action"></a>','<a class="ql-remove"></a>'].join(""),t.default=y},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=P(n(29)),a=n(36),o=n(38),i=n(64),s=P(n(65)),u=P(n(66)),c=n(67),l=P(c),f=n(37),d=n(26),p=n(39),h=n(40),m=P(n(56)),v=P(n(68)),g=P(n(27)),y=P(n(69)),b=P(n(70)),x=P(n(71)),w=P(n(72)),k=P(n(73)),S=n(13),_=P(S),N=P(n(74)),E=P(n(75)),C=P(n(57)),T=P(n(41)),I=P(n(28)),O=P(n(59)),A=P(n(60)),D=P(n(61)),M=P(n(108)),R=P(n(62));function P(e){return e&&e.__esModule?e:{default:e}}r.default.register({"attributors/attribute/direction":o.DirectionAttribute,"attributors/class/align":a.AlignClass,"attributors/class/background":f.BackgroundClass,"attributors/class/color":d.ColorClass,"attributors/class/direction":o.DirectionClass,"attributors/class/font":p.FontClass,"attributors/class/size":h.SizeClass,"attributors/style/align":a.AlignStyle,"attributors/style/background":f.BackgroundStyle,"attributors/style/color":d.ColorStyle,"attributors/style/direction":o.DirectionStyle,"attributors/style/font":p.FontStyle,"attributors/style/size":h.SizeStyle},!0),r.default.register({"formats/align":a.AlignClass,"formats/direction":o.DirectionClass,"formats/indent":i.IndentClass,"formats/background":f.BackgroundStyle,"formats/color":d.ColorStyle,"formats/font":p.FontClass,"formats/size":h.SizeClass,"formats/blockquote":s.default,"formats/code-block":_.default,"formats/header":u.default,"formats/list":l.default,"formats/bold":m.default,"formats/code":S.Code,"formats/italic":v.default,"formats/link":g.default,"formats/script":y.default,"formats/strike":b.default,"formats/underline":x.default,"formats/image":w.default,"formats/video":k.default,"formats/list/item":c.ListItem,"modules/formula":N.default,"modules/syntax":E.default,"modules/toolbar":C.default,"themes/bubble":M.default,"themes/snow":R.default,"ui/icons":T.default,"ui/picker":I.default,"ui/icon-picker":A.default,"ui/color-picker":O.default,"ui/tooltip":D.default},!0),t.default=r.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IndentClass=void 0;var r,a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function e(t,n,r){null===t&&(t=Function.prototype);var a=Object.getOwnPropertyDescriptor(t,n);if(void 0===a){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in a)return a.value;var i=a.get;return void 0!==i?i.call(r):void 0},i=n(0),s=(r=i)&&r.__esModule?r:{default:r};function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}var l=function(e){function t(){return u(this,t),c(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),a(t,[{key:"add",value:function(e,n){if("+1"===n||"-1"===n){var r=this.value(e)||0;n="+1"===n?r+1:r-1}return 0===n?(this.remove(e),!0):o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"add",this).call(this,e,n)}},{key:"canAdd",value:function(e,n){return o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"canAdd",this).call(this,e,n)||o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"canAdd",this).call(this,e,parseInt(n))}},{key:"value",value:function(e){return parseInt(o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"value",this).call(this,e))||void 0}}]),t}(s.default.Attributor.Class),f=new l("indent","ql-indent",{scope:s.default.Scope.BLOCK,whitelist:[1,2,3,4,5,6,7,8]});t.IndentClass=f},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,a=n(4);function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}var s=function(e){function t(){return o(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t}(((r=a)&&r.__esModule?r:{default:r}).default);s.blotName="blockquote",s.tagName="blockquote",t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(4);function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}var u=function(e){function t(){return i(this,t),s(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),a(t,null,[{key:"formats",value:function(e){return this.tagName.indexOf(e.tagName)+1}}]),t}(((r=o)&&r.__esModule?r:{default:r}).default);u.blotName="header",u.tagName=["H1","H2","H3","H4","H5","H6"],t.default=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.ListItem=void 0;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function e(t,n,r){null===t&&(t=Function.prototype);var a=Object.getOwnPropertyDescriptor(t,n);if(void 0===a){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in a)return a.value;var i=a.get;return void 0!==i?i.call(r):void 0},o=u(n(0)),i=u(n(4)),s=u(n(25));function u(e){return e&&e.__esModule?e:{default:e}}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function f(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var d=function(e){function t(){return c(this,t),l(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return f(t,e),r(t,[{key:"format",value:function(e,n){e!==p.blotName||n?a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"format",this).call(this,e,n):this.replaceWith(o.default.create(this.statics.scope))}},{key:"remove",value:function(){null==this.prev&&null==this.next?this.parent.remove():a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"remove",this).call(this)}},{key:"replaceWith",value:function(e,n){return this.parent.isolate(this.offset(this.parent),this.length()),e===this.parent.statics.blotName?(this.parent.replaceWith(e,n),this):(this.parent.unwrap(),a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"replaceWith",this).call(this,e,n))}}],[{key:"formats",value:function(e){return e.tagName===this.tagName?void 0:a(t.__proto__||Object.getPrototypeOf(t),"formats",this).call(this,e)}}]),t}(i.default);d.blotName="list-item",d.tagName="LI";var p=function(e){function t(e){c(this,t);var n=l(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e)),r=function(t){if(t.target.parentNode===e){var r=n.statics.formats(e),a=o.default.find(t.target);"checked"===r?a.format("list","unchecked"):"unchecked"===r&&a.format("list","checked")}};return e.addEventListener("touchstart",r),e.addEventListener("mousedown",r),n}return f(t,e),r(t,null,[{key:"create",value:function(e){var n="ordered"===e?"OL":"UL",r=a(t.__proto__||Object.getPrototypeOf(t),"create",this).call(this,n);return"checked"!==e&&"unchecked"!==e||r.setAttribute("data-checked","checked"===e),r}},{key:"formats",value:function(e){return"OL"===e.tagName?"ordered":"UL"===e.tagName?e.hasAttribute("data-checked")?"true"===e.getAttribute("data-checked")?"checked":"unchecked":"bullet":void 0}}]),r(t,[{key:"format",value:function(e,t){this.children.length>0&&this.children.tail.format(e,t)}},{key:"formats",value:function(){return e={},t=this.statics.blotName,n=this.statics.formats(this.domNode),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e;var e,t,n}},{key:"insertBefore",value:function(e,n){if(e instanceof d)a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"insertBefore",this).call(this,e,n);else{var r=null==n?this.length():n.offset(this),o=this.split(r);o.parent.insertBefore(e,o)}}},{key:"optimize",value:function(e){a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"optimize",this).call(this,e);var n=this.next;null!=n&&n.prev===this&&n.statics.blotName===this.statics.blotName&&n.domNode.tagName===this.domNode.tagName&&n.domNode.getAttribute("data-checked")===this.domNode.getAttribute("data-checked")&&(n.moveChildren(this),n.remove())}},{key:"replace",value:function(e){if(e.statics.blotName!==this.statics.blotName){var n=o.default.create(this.statics.defaultChild);e.moveChildren(n),this.appendChild(n)}a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"replace",this).call(this,e)}}]),t}(s.default);p.blotName="list",p.scope=o.default.Scope.BLOCK_BLOT,p.tagName=["OL","UL"],p.defaultChild="list-item",p.allowedChildren=[d],t.ListItem=d,t.default=p},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,a=n(56);function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}var s=function(e){function t(){return o(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t}(((r=a)&&r.__esModule?r:{default:r}).default);s.blotName="italic",s.tagName=["EM","I"],t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function e(t,n,r){null===t&&(t=Function.prototype);var a=Object.getOwnPropertyDescriptor(t,n);if(void 0===a){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in a)return a.value;var i=a.get;return void 0!==i?i.call(r):void 0},i=n(6);function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}var c=function(e){function t(){return s(this,t),u(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),a(t,null,[{key:"create",value:function(e){return"super"===e?document.createElement("sup"):"sub"===e?document.createElement("sub"):o(t.__proto__||Object.getPrototypeOf(t),"create",this).call(this,e)}},{key:"formats",value:function(e){return"SUB"===e.tagName?"sub":"SUP"===e.tagName?"super":void 0}}]),t}(((r=i)&&r.__esModule?r:{default:r}).default);c.blotName="script",c.tagName=["SUB","SUP"],t.default=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,a=n(6);function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}var s=function(e){function t(){return o(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t}(((r=a)&&r.__esModule?r:{default:r}).default);s.blotName="strike",s.tagName="S",t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,a=n(6);function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}var s=function(e){function t(){return o(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t}(((r=a)&&r.__esModule?r:{default:r}).default);s.blotName="underline",s.tagName="U",t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function e(t,n,r){null===t&&(t=Function.prototype);var a=Object.getOwnPropertyDescriptor(t,n);if(void 0===a){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in a)return a.value;var i=a.get;return void 0!==i?i.call(r):void 0},i=n(0),s=(r=i)&&r.__esModule?r:{default:r},u=n(27);function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}var f=["alt","height","width"],d=function(e){function t(){return c(this,t),l(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),a(t,[{key:"format",value:function(e,n){f.indexOf(e)>-1?n?this.domNode.setAttribute(e,n):this.domNode.removeAttribute(e):o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"format",this).call(this,e,n)}}],[{key:"create",value:function(e){var n=o(t.__proto__||Object.getPrototypeOf(t),"create",this).call(this,e);return"string"===typeof e&&n.setAttribute("src",this.sanitize(e)),n}},{key:"formats",value:function(e){return f.reduce((function(t,n){return e.hasAttribute(n)&&(t[n]=e.getAttribute(n)),t}),{})}},{key:"match",value:function(e){return/\.(jpe?g|gif|png)$/.test(e)||/^data:image\/.+;base64/.test(e)}},{key:"sanitize",value:function(e){return(0,u.sanitize)(e,["http","https","data"])?e:"//:0"}},{key:"value",value:function(e){return e.getAttribute("src")}}]),t}(s.default.Embed);d.blotName="image",d.tagName="IMG",t.default=d},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function e(t,n,r){null===t&&(t=Function.prototype);var a=Object.getOwnPropertyDescriptor(t,n);if(void 0===a){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in a)return a.value;var i=a.get;return void 0!==i?i.call(r):void 0},i=n(4),s=n(27),u=(r=s)&&r.__esModule?r:{default:r};function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}var f=["height","width"],d=function(e){function t(){return c(this,t),l(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),a(t,[{key:"format",value:function(e,n){f.indexOf(e)>-1?n?this.domNode.setAttribute(e,n):this.domNode.removeAttribute(e):o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"format",this).call(this,e,n)}}],[{key:"create",value:function(e){var n=o(t.__proto__||Object.getPrototypeOf(t),"create",this).call(this,e);return n.setAttribute("frameborder","0"),n.setAttribute("allowfullscreen",!0),n.setAttribute("src",this.sanitize(e)),n}},{key:"formats",value:function(e){return f.reduce((function(t,n){return e.hasAttribute(n)&&(t[n]=e.getAttribute(n)),t}),{})}},{key:"sanitize",value:function(e){return u.default.sanitize(e)}},{key:"value",value:function(e){return e.getAttribute("src")}}]),t}(i.BlockEmbed);d.blotName="video",d.className="ql-video",d.tagName="IFRAME",t.default=d},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.FormulaBlot=void 0;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function e(t,n,r){null===t&&(t=Function.prototype);var a=Object.getOwnPropertyDescriptor(t,n);if(void 0===a){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in a)return a.value;var i=a.get;return void 0!==i?i.call(r):void 0},o=u(n(35)),i=u(n(5)),s=u(n(9));function u(e){return e&&e.__esModule?e:{default:e}}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function f(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var d=function(e){function t(){return c(this,t),l(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return f(t,e),r(t,null,[{key:"create",value:function(e){var n=a(t.__proto__||Object.getPrototypeOf(t),"create",this).call(this,e);return"string"===typeof e&&(window.katex.render(e,n,{throwOnError:!1,errorColor:"#f00"}),n.setAttribute("data-value",e)),n}},{key:"value",value:function(e){return e.getAttribute("data-value")}}]),t}(o.default);d.blotName="formula",d.className="ql-formula",d.tagName="SPAN";var p=function(e){function t(){c(this,t);var e=l(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));if(null==window.katex)throw new Error("Formula module requires KaTeX.");return e}return f(t,e),r(t,null,[{key:"register",value:function(){i.default.register(d,!0)}}]),t}(s.default);t.FormulaBlot=d,t.default=p},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.CodeToken=t.CodeBlock=void 0;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function e(t,n,r){null===t&&(t=Function.prototype);var a=Object.getOwnPropertyDescriptor(t,n);if(void 0===a){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in a)return a.value;var i=a.get;return void 0!==i?i.call(r):void 0},o=u(n(0)),i=u(n(5)),s=u(n(9));function u(e){return e&&e.__esModule?e:{default:e}}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function f(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var d=function(e){function t(){return c(this,t),l(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return f(t,e),r(t,[{key:"replaceWith",value:function(e){this.domNode.textContent=this.domNode.textContent,this.attach(),a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"replaceWith",this).call(this,e)}},{key:"highlight",value:function(e){var t=this.domNode.textContent;this.cachedText!==t&&((t.trim().length>0||null==this.cachedText)&&(this.domNode.innerHTML=e(t),this.domNode.normalize(),this.attach()),this.cachedText=t)}}]),t}(u(n(13)).default);d.className="ql-syntax";var p=new o.default.Attributor.Class("token","hljs",{scope:o.default.Scope.INLINE}),h=function(e){function t(e,n){c(this,t);var r=l(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));if("function"!==typeof r.options.highlight)throw new Error("Syntax module requires highlight.js. Please include the library on the page before Quill.");var a=null;return r.quill.on(i.default.events.SCROLL_OPTIMIZE,(function(){clearTimeout(a),a=setTimeout((function(){r.highlight(),a=null}),r.options.interval)})),r.highlight(),r}return f(t,e),r(t,null,[{key:"register",value:function(){i.default.register(p,!0),i.default.register(d,!0)}}]),r(t,[{key:"highlight",value:function(){var e=this;if(!this.quill.selection.composing){this.quill.update(i.default.sources.USER);var t=this.quill.getSelection();this.quill.scroll.descendants(d).forEach((function(t){t.highlight(e.options.highlight)})),this.quill.update(i.default.sources.SILENT),null!=t&&this.quill.setSelection(t,i.default.sources.SILENT)}}}]),t}(s.default);h.DEFAULTS={highlight:null==window.hljs?null:function(e){return window.hljs.highlightAuto(e).value},interval:1e3},t.CodeBlock=d,t.CodeToken=p,t.default=h},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=3 x2=13 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=9 y1=4 y2=4></line> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=14 x2=4 y1=14 y2=14></line> <line class=ql-stroke x1=12 x2=6 y1=4 y2=4></line> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=15 x2=5 y1=14 y2=14></line> <line class=ql-stroke x1=15 x2=9 y1=4 y2=4></line> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=15 x2=3 y1=14 y2=14></line> <line class=ql-stroke x1=15 x2=3 y1=4 y2=4></line> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <g class="ql-fill ql-color-label"> <polygon points="6 6.868 6 6 5 6 5 7 5.942 7 6 6.868"></polygon> <rect height=1 width=1 x=4 y=4></rect> <polygon points="6.817 5 6 5 6 6 6.38 6 6.817 5"></polygon> <rect height=1 width=1 x=2 y=6></rect> <rect height=1 width=1 x=3 y=5></rect> <rect height=1 width=1 x=4 y=7></rect> <polygon points="4 11.439 4 11 3 11 3 12 3.755 12 4 11.439"></polygon> <rect height=1 width=1 x=2 y=12></rect> <rect height=1 width=1 x=2 y=9></rect> <rect height=1 width=1 x=2 y=15></rect> <polygon points="4.63 10 4 10 4 11 4.192 11 4.63 10"></polygon> <rect height=1 width=1 x=3 y=8></rect> <path d=M10.832,4.2L11,4.582V4H10.708A1.948,1.948,0,0,1,10.832,4.2Z></path> <path d=M7,4.582L7.168,4.2A1.929,1.929,0,0,1,7.292,4H7V4.582Z></path> <path d=M8,13H7.683l-0.351.8a1.933,1.933,0,0,1-.124.2H8V13Z></path> <rect height=1 width=1 x=12 y=2></rect> <rect height=1 width=1 x=11 y=3></rect> <path d=M9,3H8V3.282A1.985,1.985,0,0,1,9,3Z></path> <rect height=1 width=1 x=2 y=3></rect> <rect height=1 width=1 x=6 y=2></rect> <rect height=1 width=1 x=3 y=2></rect> <rect height=1 width=1 x=5 y=3></rect> <rect height=1 width=1 x=9 y=2></rect> <rect height=1 width=1 x=15 y=14></rect> <polygon points="13.447 10.174 13.469 10.225 13.472 10.232 13.808 11 14 11 14 10 13.37 10 13.447 10.174"></polygon> <rect height=1 width=1 x=13 y=7></rect> <rect height=1 width=1 x=15 y=5></rect> <rect height=1 width=1 x=14 y=6></rect> <rect height=1 width=1 x=15 y=8></rect> <rect height=1 width=1 x=14 y=9></rect> <path d=M3.775,14H3v1H4V14.314A1.97,1.97,0,0,1,3.775,14Z></path> <rect height=1 width=1 x=14 y=3></rect> <polygon points="12 6.868 12 6 11.62 6 12 6.868"></polygon> <rect height=1 width=1 x=15 y=2></rect> <rect height=1 width=1 x=12 y=5></rect> <rect height=1 width=1 x=13 y=4></rect> <polygon points="12.933 9 13 9 13 8 12.495 8 12.933 9"></polygon> <rect height=1 width=1 x=9 y=14></rect> <rect height=1 width=1 x=8 y=15></rect> <path d=M6,14.926V15H7V14.316A1.993,1.993,0,0,1,6,14.926Z></path> <rect height=1 width=1 x=5 y=15></rect> <path d=M10.668,13.8L10.317,13H10v1h0.792A1.947,1.947,0,0,1,10.668,13.8Z></path> <rect height=1 width=1 x=11 y=15></rect> <path d=M14.332,12.2a1.99,1.99,0,0,1,.166.8H15V12H14.245Z></path> <rect height=1 width=1 x=14 y=15></rect> <rect height=1 width=1 x=15 y=11></rect> </g> <polyline class=ql-stroke points="5.5 13 9 5 12.5 13"></polyline> <line class=ql-stroke x1=11.63 x2=6.38 y1=11 y2=11></line> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <rect class="ql-fill ql-stroke" height=3 width=3 x=4 y=5></rect> <rect class="ql-fill ql-stroke" height=3 width=3 x=11 y=5></rect> <path class="ql-even ql-fill ql-stroke" d=M7,8c0,4.031-3,5-3,5></path> <path class="ql-even ql-fill ql-stroke" d=M14,8c0,4.031-3,5-3,5></path> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <path class=ql-stroke d=M5,4H9.5A2.5,2.5,0,0,1,12,6.5v0A2.5,2.5,0,0,1,9.5,9H5A0,0,0,0,1,5,9V4A0,0,0,0,1,5,4Z></path> <path class=ql-stroke d=M5,9h5.5A2.5,2.5,0,0,1,13,11.5v0A2.5,2.5,0,0,1,10.5,14H5a0,0,0,0,1,0,0V9A0,0,0,0,1,5,9Z></path> </svg>'},function(e,t){e.exports='<svg class="" viewbox="0 0 18 18"> <line class=ql-stroke x1=5 x2=13 y1=3 y2=3></line> <line class=ql-stroke x1=6 x2=9.35 y1=12 y2=3></line> <line class=ql-stroke x1=11 x2=15 y1=11 y2=15></line> <line class=ql-stroke x1=15 x2=11 y1=11 y2=15></line> <rect class=ql-fill height=1 rx=0.5 ry=0.5 width=7 x=2 y=14></rect> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <line class="ql-color-label ql-stroke ql-transparent" x1=3 x2=15 y1=15 y2=15></line> <polyline class=ql-stroke points="5.5 11 9 3 12.5 11"></polyline> <line class=ql-stroke x1=11.63 x2=6.38 y1=9 y2=9></line> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <polygon class="ql-stroke ql-fill" points="3 11 5 9 3 7 3 11"></polygon> <line class="ql-stroke ql-fill" x1=15 x2=11 y1=4 y2=4></line> <path class=ql-fill d=M11,3a3,3,0,0,0,0,6h1V3H11Z></path> <rect class=ql-fill height=11 width=1 x=11 y=4></rect> <rect class=ql-fill height=11 width=1 x=13 y=4></rect> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <polygon class="ql-stroke ql-fill" points="15 12 13 10 15 8 15 12"></polygon> <line class="ql-stroke ql-fill" x1=9 x2=5 y1=4 y2=4></line> <path class=ql-fill d=M5,3A3,3,0,0,0,5,9H6V3H5Z></path> <rect class=ql-fill height=11 width=1 x=5 y=4></rect> <rect class=ql-fill height=11 width=1 x=7 y=4></rect> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M14,16H4a1,1,0,0,1,0-2H14A1,1,0,0,1,14,16Z /> <path class=ql-fill d=M14,4H4A1,1,0,0,1,4,2H14A1,1,0,0,1,14,4Z /> <rect class=ql-fill x=3 y=6 width=12 height=6 rx=1 ry=1 /> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M13,16H5a1,1,0,0,1,0-2h8A1,1,0,0,1,13,16Z /> <path class=ql-fill d=M13,4H5A1,1,0,0,1,5,2h8A1,1,0,0,1,13,4Z /> <rect class=ql-fill x=2 y=6 width=14 height=6 rx=1 ry=1 /> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15,8H13a1,1,0,0,1,0-2h2A1,1,0,0,1,15,8Z /> <path class=ql-fill d=M15,12H13a1,1,0,0,1,0-2h2A1,1,0,0,1,15,12Z /> <path class=ql-fill d=M15,16H5a1,1,0,0,1,0-2H15A1,1,0,0,1,15,16Z /> <path class=ql-fill d=M15,4H5A1,1,0,0,1,5,2H15A1,1,0,0,1,15,4Z /> <rect class=ql-fill x=2 y=6 width=8 height=6 rx=1 ry=1 /> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M5,8H3A1,1,0,0,1,3,6H5A1,1,0,0,1,5,8Z /> <path class=ql-fill d=M5,12H3a1,1,0,0,1,0-2H5A1,1,0,0,1,5,12Z /> <path class=ql-fill d=M13,16H3a1,1,0,0,1,0-2H13A1,1,0,0,1,13,16Z /> <path class=ql-fill d=M13,4H3A1,1,0,0,1,3,2H13A1,1,0,0,1,13,4Z /> <rect class=ql-fill x=8 y=6 width=8 height=6 rx=1 ry=1 transform="translate(24 18) rotate(-180)"/> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M11.759,2.482a2.561,2.561,0,0,0-3.53.607A7.656,7.656,0,0,0,6.8,6.2C6.109,9.188,5.275,14.677,4.15,14.927a1.545,1.545,0,0,0-1.3-.933A0.922,0.922,0,0,0,2,15.036S1.954,16,4.119,16s3.091-2.691,3.7-5.553c0.177-.826.36-1.726,0.554-2.6L8.775,6.2c0.381-1.421.807-2.521,1.306-2.676a1.014,1.014,0,0,0,1.02.56A0.966,0.966,0,0,0,11.759,2.482Z></path> <rect class=ql-fill height=1.6 rx=0.8 ry=0.8 width=5 x=5.15 y=6.2></rect> <path class=ql-fill d=M13.663,12.027a1.662,1.662,0,0,1,.266-0.276q0.193,0.069.456,0.138a2.1,2.1,0,0,0,.535.069,1.075,1.075,0,0,0,.767-0.3,1.044,1.044,0,0,0,.314-0.8,0.84,0.84,0,0,0-.238-0.619,0.8,0.8,0,0,0-.594-0.239,1.154,1.154,0,0,0-.781.3,4.607,4.607,0,0,0-.781,1q-0.091.15-.218,0.346l-0.246.38c-0.068-.288-0.137-0.582-0.212-0.885-0.459-1.847-2.494-.984-2.941-0.8-0.482.2-.353,0.647-0.094,0.529a0.869,0.869,0,0,1,1.281.585c0.217,0.751.377,1.436,0.527,2.038a5.688,5.688,0,0,1-.362.467,2.69,2.69,0,0,1-.264.271q-0.221-.08-0.471-0.147a2.029,2.029,0,0,0-.522-0.066,1.079,1.079,0,0,0-.768.3A1.058,1.058,0,0,0,9,15.131a0.82,0.82,0,0,0,.832.852,1.134,1.134,0,0,0,.787-0.3,5.11,5.11,0,0,0,.776-0.993q0.141-.219.215-0.34c0.046-.076.122-0.194,0.223-0.346a2.786,2.786,0,0,0,.918,1.726,2.582,2.582,0,0,0,2.376-.185c0.317-.181.212-0.565,0-0.494A0.807,0.807,0,0,1,14.176,15a5.159,5.159,0,0,1-.913-2.446l0,0Q13.487,12.24,13.663,12.027Z></path> </svg>'},function(e,t){e.exports='<svg viewBox="0 0 18 18"> <path class=ql-fill d=M10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Zm6.06787,9.209H14.98975V7.59863a.54085.54085,0,0,0-.605-.60547h-.62744a1.01119,1.01119,0,0,0-.748.29688L11.645,8.56641a.5435.5435,0,0,0-.022.8584l.28613.30762a.53861.53861,0,0,0,.84717.0332l.09912-.08789a1.2137,1.2137,0,0,0,.2417-.35254h.02246s-.01123.30859-.01123.60547V13.209H12.041a.54085.54085,0,0,0-.605.60547v.43945a.54085.54085,0,0,0,.605.60547h4.02686a.54085.54085,0,0,0,.605-.60547v-.43945A.54085.54085,0,0,0,16.06787,13.209Z /> </svg>'},function(e,t){e.exports='<svg viewBox="0 0 18 18"> <path class=ql-fill d=M16.73975,13.81445v.43945a.54085.54085,0,0,1-.605.60547H11.855a.58392.58392,0,0,1-.64893-.60547V14.0127c0-2.90527,3.39941-3.42187,3.39941-4.55469a.77675.77675,0,0,0-.84717-.78125,1.17684,1.17684,0,0,0-.83594.38477c-.2749.26367-.561.374-.85791.13184l-.4292-.34082c-.30811-.24219-.38525-.51758-.1543-.81445a2.97155,2.97155,0,0,1,2.45361-1.17676,2.45393,2.45393,0,0,1,2.68408,2.40918c0,2.45312-3.1792,2.92676-3.27832,3.93848h2.79443A.54085.54085,0,0,1,16.73975,13.81445ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z /> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=13 y1=4 y2=4></line> <line class=ql-stroke x1=5 x2=11 y1=14 y2=14></line> <line class=ql-stroke x1=8 x2=10 y1=14 y2=4></line> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <rect class=ql-stroke height=10 width=12 x=3 y=4></rect> <circle class=ql-fill cx=6 cy=7 r=1></circle> <polyline class="ql-even ql-fill" points="5 12 5 11 7 9 8 10 11 7 13 9 13 12 5 12"></polyline> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class="ql-fill ql-stroke" points="3 7 3 11 5 9 3 7"></polyline> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class=ql-stroke points="5 7 5 11 3 9 5 7"></polyline> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=11 y1=7 y2=11></line> <path class="ql-even ql-stroke" d=M8.9,4.577a3.476,3.476,0,0,1,.36,4.679A3.476,3.476,0,0,1,4.577,8.9C3.185,7.5,2.035,6.4,4.217,4.217S7.5,3.185,8.9,4.577Z></path> <path class="ql-even ql-stroke" d=M13.423,9.1a3.476,3.476,0,0,0-4.679-.36,3.476,3.476,0,0,0,.36,4.679c1.392,1.392,2.5,2.542,4.679.36S14.815,10.5,13.423,9.1Z></path> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=7 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=7 x2=15 y1=14 y2=14></line> <line class="ql-stroke ql-thin" x1=2.5 x2=4.5 y1=5.5 y2=5.5></line> <path class=ql-fill d=M3.5,6A0.5,0.5,0,0,1,3,5.5V3.085l-0.276.138A0.5,0.5,0,0,1,2.053,3c-0.124-.247-0.023-0.324.224-0.447l1-.5A0.5,0.5,0,0,1,4,2.5v3A0.5,0.5,0,0,1,3.5,6Z></path> <path class="ql-stroke ql-thin" d=M4.5,10.5h-2c0-.234,1.85-1.076,1.85-2.234A0.959,0.959,0,0,0,2.5,8.156></path> <path class="ql-stroke ql-thin" d=M2.5,14.846a0.959,0.959,0,0,0,1.85-.109A0.7,0.7,0,0,0,3.75,14a0.688,0.688,0,0,0,.6-0.736,0.959,0.959,0,0,0-1.85-.109></path> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=6 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=6 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=6 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=3 y1=4 y2=4></line> <line class=ql-stroke x1=3 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=3 x2=3 y1=14 y2=14></line> </svg>'},function(e,t){e.exports='<svg class="" viewbox="0 0 18 18"> <line class=ql-stroke x1=9 x2=15 y1=4 y2=4></line> <polyline class=ql-stroke points="3 4 4 5 6 3"></polyline> <line class=ql-stroke x1=9 x2=15 y1=14 y2=14></line> <polyline class=ql-stroke points="3 14 4 15 6 13"></polyline> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class=ql-stroke points="3 9 4 10 6 8"></polyline> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15.5,15H13.861a3.858,3.858,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.921,1.921,0,0,0,12.021,11.7a0.50013,0.50013,0,1,0,.957.291h0a0.914,0.914,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.076-1.16971,1.86982-1.93971,2.43082A1.45639,1.45639,0,0,0,12,15.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,15Z /> <path class=ql-fill d=M9.65,5.241a1,1,0,0,0-1.409.108L6,7.964,3.759,5.349A1,1,0,0,0,2.192,6.59178Q2.21541,6.6213,2.241,6.649L4.684,9.5,2.241,12.35A1,1,0,0,0,3.71,13.70722q0.02557-.02768.049-0.05722L6,11.036,8.241,13.65a1,1,0,1,0,1.567-1.24277Q9.78459,12.3777,9.759,12.35L7.316,9.5,9.759,6.651A1,1,0,0,0,9.65,5.241Z /> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15.5,7H13.861a4.015,4.015,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.922,1.922,0,0,0,12.021,3.7a0.5,0.5,0,1,0,.957.291,0.917,0.917,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.077-1.164,1.925-1.934,2.486A1.423,1.423,0,0,0,12,7.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,7Z /> <path class=ql-fill d=M9.651,5.241a1,1,0,0,0-1.41.108L6,7.964,3.759,5.349a1,1,0,1,0-1.519,1.3L4.683,9.5,2.241,12.35a1,1,0,1,0,1.519,1.3L6,11.036,8.241,13.65a1,1,0,0,0,1.519-1.3L7.317,9.5,9.759,6.651A1,1,0,0,0,9.651,5.241Z /> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <line class="ql-stroke ql-thin" x1=15.5 x2=2.5 y1=8.5 y2=9.5></line> <path class=ql-fill d=M9.007,8C6.542,7.791,6,7.519,6,6.5,6,5.792,7.283,5,9,5c1.571,0,2.765.679,2.969,1.309a1,1,0,0,0,1.9-.617C13.356,4.106,11.354,3,9,3,6.2,3,4,4.538,4,6.5a3.2,3.2,0,0,0,.5,1.843Z></path> <path class=ql-fill d=M8.984,10C11.457,10.208,12,10.479,12,11.5c0,0.708-1.283,1.5-3,1.5-1.571,0-2.765-.679-2.969-1.309a1,1,0,1,0-1.9.617C4.644,13.894,6.646,15,9,15c2.8,0,5-1.538,5-3.5a3.2,3.2,0,0,0-.5-1.843Z></path> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <path class=ql-stroke d=M5,3V9a4.012,4.012,0,0,0,4,4H9a4.012,4.012,0,0,0,4-4V3></path> <rect class=ql-fill height=1 rx=0.5 ry=0.5 width=12 x=3 y=15></rect> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <rect class=ql-stroke height=12 width=12 x=3 y=3></rect> <rect class=ql-fill height=12 width=1 x=5 y=3></rect> <rect class=ql-fill height=12 width=1 x=12 y=3></rect> <rect class=ql-fill height=2 width=8 x=5 y=8></rect> <rect class=ql-fill height=1 width=3 x=3 y=5></rect> <rect class=ql-fill height=1 width=3 x=3 y=7></rect> <rect class=ql-fill height=1 width=3 x=3 y=10></rect> <rect class=ql-fill height=1 width=3 x=3 y=12></rect> <rect class=ql-fill height=1 width=3 x=12 y=5></rect> <rect class=ql-fill height=1 width=3 x=12 y=7></rect> <rect class=ql-fill height=1 width=3 x=12 y=10></rect> <rect class=ql-fill height=1 width=3 x=12 y=12></rect> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <polygon class=ql-stroke points="7 11 9 13 11 11 7 11"></polygon> <polygon class=ql-stroke points="7 7 9 5 11 7 7 7"></polygon> </svg>'},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.BubbleTooltip=void 0;var r=function e(t,n,r){null===t&&(t=Function.prototype);var a=Object.getOwnPropertyDescriptor(t,n);if(void 0===a){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in a)return a.value;var i=a.get;return void 0!==i?i.call(r):void 0},a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=f(n(3)),i=f(n(8)),s=n(43),u=f(s),c=n(15),l=f(n(41));function f(e){return e&&e.__esModule?e:{default:e}}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function h(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var m=[["bold","italic","link"],[{header:1},{header:2},"blockquote"]],v=function(e){function t(e,n){d(this,t),null!=n.modules.toolbar&&null==n.modules.toolbar.container&&(n.modules.toolbar.container=m);var r=p(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return r.quill.container.classList.add("ql-bubble"),r}return h(t,e),a(t,[{key:"extendToolbar",value:function(e){this.tooltip=new g(this.quill,this.options.bounds),this.tooltip.root.appendChild(e.container),this.buildButtons([].slice.call(e.container.querySelectorAll("button")),l.default),this.buildPickers([].slice.call(e.container.querySelectorAll("select")),l.default)}}]),t}(u.default);v.DEFAULTS=(0,o.default)(!0,{},u.default.DEFAULTS,{modules:{toolbar:{handlers:{link:function(e){e?this.quill.theme.tooltip.edit():this.quill.format("link",!1)}}}}});var g=function(e){function t(e,n){d(this,t);var r=p(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return r.quill.on(i.default.events.EDITOR_CHANGE,(function(e,t,n,a){if(e===i.default.events.SELECTION_CHANGE)if(null!=t&&t.length>0&&a===i.default.sources.USER){r.show(),r.root.style.left="0px",r.root.style.width="",r.root.style.width=r.root.offsetWidth+"px";var o=r.quill.getLines(t.index,t.length);if(1===o.length)r.position(r.quill.getBounds(t));else{var s=o[o.length-1],u=r.quill.getIndex(s),l=Math.min(s.length()-1,t.index+t.length-u),f=r.quill.getBounds(new c.Range(u,l));r.position(f)}}else document.activeElement!==r.textbox&&r.quill.hasFocus()&&r.hide()})),r}return h(t,e),a(t,[{key:"listen",value:function(){var e=this;r(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"listen",this).call(this),this.root.querySelector(".ql-close").addEventListener("click",(function(){e.root.classList.remove("ql-editing")})),this.quill.on(i.default.events.SCROLL_OPTIMIZE,(function(){setTimeout((function(){if(!e.root.classList.contains("ql-hidden")){var t=e.quill.getSelection();null!=t&&e.position(e.quill.getBounds(t))}}),1)}))}},{key:"cancel",value:function(){this.show()}},{key:"position",value:function(e){var n=r(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"position",this).call(this,e),a=this.root.querySelector(".ql-tooltip-arrow");if(a.style.marginLeft="",0===n)return n;a.style.marginLeft=-1*n-a.offsetWidth/2+"px"}}]),t}(s.BaseTooltip);g.TEMPLATE=['<span class="ql-tooltip-arrow"></span>','<div class="ql-tooltip-editor">','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-close"></a>',"</div>"].join(""),t.BubbleTooltip=g,t.default=v},function(e,t,n){e.exports=n(63)}]).default},e.exports=t()},6059:function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),a=this&&this.__assign||function(){return a=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},a.apply(this,arguments)},o=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&o(t,e,n);return i(t,e),t},u=this&&this.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n},c=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var l=s(n(2791)),f=c(n(8262)),d=s(n(2007));function p(e){return e&&e.replace(/&nbsp;|\u202F|\u00A0/g," ")}var h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.lastHtml=t.props.html,t.el="function"===typeof t.props.innerRef?{current:null}:l.createRef(),t.getEl=function(){return(t.props.innerRef&&"function"!==typeof t.props.innerRef?t.props.innerRef:t.el).current},t.emitChange=function(e){var n=t.getEl();if(n){var r=n.innerHTML;if(t.props.onChange&&r!==t.lastHtml){var a=Object.assign({},e,{target:{value:r}});t.props.onChange(a)}t.lastHtml=r}},t}return r(t,e),t.prototype.render=function(){var e=this,t=this.props,n=t.tagName,r=t.html,o=t.innerRef,i=u(t,["tagName","html","innerRef"]);return l.createElement(n||"div",a(a({},i),{ref:"function"===typeof o?function(t){o(t),e.el.current=t}:o||this.el,onInput:this.emitChange,onBlur:this.props.onBlur||this.emitChange,onKeyUp:this.props.onKeyUp||this.emitChange,onKeyDown:this.props.onKeyDown||this.emitChange,contentEditable:!this.props.disabled,dangerouslySetInnerHTML:{__html:r}}),this.props.children)},t.prototype.shouldComponentUpdate=function(e){var t=this.props,n=this.getEl();return!n||(p(e.html)!==p(n.innerHTML)||(t.disabled!==e.disabled||t.tagName!==e.tagName||t.className!==e.className||t.innerRef!==e.innerRef||t.placeholder!==e.placeholder||!f.default(t.style,e.style)))},t.prototype.componentDidUpdate=function(){var e=this.getEl();e&&(this.props.html!==e.innerHTML&&(e.innerHTML=this.props.html),this.lastHtml=this.props.html,function(e){var t=document.createTextNode("");e.appendChild(t);var n=document.activeElement===e;if(null!==t&&null!==t.nodeValue&&n){var r=window.getSelection();if(null!==r){var a=document.createRange();a.setStart(t,t.nodeValue.length),a.collapse(!0),r.removeAllRanges(),r.addRange(a)}e instanceof HTMLElement&&e.focus()}}(e))},t.propTypes={html:d.string.isRequired,onChange:d.func,disabled:d.bool,tagName:d.string,className:d.string,style:d.object,innerRef:d.oneOfType([d.object,d.func])},t}(l.Component);t.default=h},8045:function(e,t,n){"use strict";e.exports=function(e){function t(t){var n=e.createElement.bind(null,t);return n.type=t,n}return{a:t("a"),abbr:t("abbr"),address:t("address"),area:t("area"),article:t("article"),aside:t("aside"),audio:t("audio"),b:t("b"),base:t("base"),bdi:t("bdi"),bdo:t("bdo"),big:t("big"),blockquote:t("blockquote"),body:t("body"),br:t("br"),button:t("button"),canvas:t("canvas"),caption:t("caption"),cite:t("cite"),code:t("code"),col:t("col"),colgroup:t("colgroup"),data:t("data"),datalist:t("datalist"),dd:t("dd"),del:t("del"),details:t("details"),dfn:t("dfn"),dialog:t("dialog"),div:t("div"),dl:t("dl"),dt:t("dt"),em:t("em"),embed:t("embed"),fieldset:t("fieldset"),figcaption:t("figcaption"),figure:t("figure"),footer:t("footer"),form:t("form"),h1:t("h1"),h2:t("h2"),h3:t("h3"),h4:t("h4"),h5:t("h5"),h6:t("h6"),head:t("head"),header:t("header"),hgroup:t("hgroup"),hr:t("hr"),html:t("html"),i:t("i"),iframe:t("iframe"),img:t("img"),input:t("input"),ins:t("ins"),kbd:t("kbd"),keygen:t("keygen"),label:t("label"),legend:t("legend"),li:t("li"),link:t("link"),main:t("main"),map:t("map"),mark:t("mark"),menu:t("menu"),menuitem:t("menuitem"),meta:t("meta"),meter:t("meter"),nav:t("nav"),noscript:t("noscript"),object:t("object"),ol:t("ol"),optgroup:t("optgroup"),option:t("option"),output:t("output"),p:t("p"),param:t("param"),picture:t("picture"),pre:t("pre"),progress:t("progress"),q:t("q"),rp:t("rp"),rt:t("rt"),ruby:t("ruby"),s:t("s"),samp:t("samp"),script:t("script"),section:t("section"),select:t("select"),small:t("small"),source:t("source"),span:t("span"),strong:t("strong"),style:t("style"),sub:t("sub"),summary:t("summary"),sup:t("sup"),table:t("table"),tbody:t("tbody"),td:t("td"),textarea:t("textarea"),tfoot:t("tfoot"),th:t("th"),thead:t("thead"),time:t("time"),title:t("title"),tr:t("tr"),track:t("track"),u:t("u"),ul:t("ul"),var:t("var"),video:t("video"),wbr:t("wbr"),circle:t("circle"),clipPath:t("clipPath"),defs:t("defs"),ellipse:t("ellipse"),g:t("g"),image:t("image"),line:t("line"),linearGradient:t("linearGradient"),mask:t("mask"),path:t("path"),pattern:t("pattern"),polygon:t("polygon"),polyline:t("polyline"),radialGradient:t("radialGradient"),rect:t("rect"),stop:t("stop"),svg:t("svg"),text:t("text"),tspan:t("tspan")}}(n(2791))},4424:function(e,t,n){"use strict";var r=n(1725),a=n(2791);function o(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var i=60106,s=60107,u=60108,c=60114,l=60109,f=60110,d=60112,p=60113,h=60120,m=60115,v=60116,g=60121,y=60117,b=60119,x=60129,w=60131;if("function"===typeof Symbol&&Symbol.for){var k=Symbol.for;i=k("react.portal"),s=k("react.fragment"),u=k("react.strict_mode"),c=k("react.profiler"),l=k("react.provider"),f=k("react.context"),d=k("react.forward_ref"),p=k("react.suspense"),h=k("react.suspense_list"),m=k("react.memo"),v=k("react.lazy"),g=k("react.block"),y=k("react.fundamental"),b=k("react.scope"),x=k("react.debug_trace_mode"),w=k("react.legacy_hidden")}function S(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case s:return"Fragment";case i:return"Portal";case c:return"Profiler";case u:return"StrictMode";case p:return"Suspense";case h:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case f:return(e.displayName||"Context")+".Consumer";case l:return(e._context.displayName||"Context")+".Provider";case d:var t=e.render;return t=t.displayName||t.name||"",e.displayName||(""!==t?"ForwardRef("+t+")":"ForwardRef");case m:return S(e.type);case g:return S(e._render);case v:t=e._payload,e=e._init;try{return S(e(t))}catch(n){}}return null}var _=a.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,N={};function E(e,t){for(var n=0|e._threadCount;n<=t;n++)e[n]=e._currentValue2,e._threadCount=n+1}for(var C=new Uint16Array(16),T=0;15>T;T++)C[T]=T+1;C[15]=0;var I=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,O=Object.prototype.hasOwnProperty,A={},D={};function M(e){return!!O.call(D,e)||!O.call(A,e)&&(I.test(e)?D[e]=!0:(A[e]=!0,!1))}function R(e,t,n,r,a,o,i){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=a,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=i}var P={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){P[e]=new R(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];P[t]=new R(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){P[e]=new R(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){P[e]=new R(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){P[e]=new R(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){P[e]=new R(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){P[e]=new R(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){P[e]=new R(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){P[e]=new R(e,5,!1,e.toLowerCase(),null,!1,!1)}));var j=/[\-:]([a-z])/g;function F(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(j,F);P[t]=new R(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(j,F);P[t]=new R(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(j,F);P[t]=new R(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){P[e]=new R(e,1,!1,e.toLowerCase(),null,!1,!1)})),P.xlinkHref=new R("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){P[e]=new R(e,1,!1,e.toLowerCase(),null,!0,!0)}));var L=/["'&<>]/;function B(e){if("boolean"===typeof e||"number"===typeof e)return""+e;e=""+e;var t=L.exec(e);if(t){var n,r="",a=0;for(n=t.index;n<e.length;n++){switch(e.charCodeAt(n)){case 34:t="&quot;";break;case 38:t="&amp;";break;case 39:t="&#x27;";break;case 60:t="&lt;";break;case 62:t="&gt;";break;default:continue}a!==n&&(r+=e.substring(a,n)),a=n+1,r+=t}e=a!==n?r+e.substring(a,n):r}return e}function z(e,t){var n,r=P.hasOwnProperty(e)?P[e]:null;return(n="style"!==e)&&(n=null!==r?0===r.type:2<e.length&&("o"===e[0]||"O"===e[0])&&("n"===e[1]||"N"===e[1])),n||function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(e,t,r,!1)?"":null!==r?(e=r.attributeName,3===(n=r.type)||4===n&&!0===t?e+'=""':(r.sanitizeURL&&(t=""+t),e+'="'+B(t)+'"')):M(e)?e+'="'+B(t)+'"':""}var Z="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},V=null,U=null,q=null,W=!1,H=!1,G=null,K=0;function X(){if(null===V)throw Error(o(321));return V}function Y(){if(0<K)throw Error(o(312));return{memoizedState:null,queue:null,next:null}}function $(){return null===q?null===U?(W=!1,U=q=Y()):(W=!0,q=U):null===q.next?(W=!1,q=q.next=Y()):(W=!0,q=q.next),q}function J(e,t,n,r){for(;H;)H=!1,K+=1,q=null,n=e(t,r);return Q(),n}function Q(){V=null,H=!1,U=null,K=0,q=G=null}function ee(e,t){return"function"===typeof t?t(e):t}function te(e,t,n){if(V=X(),q=$(),W){var r=q.queue;if(t=r.dispatch,null!==G&&void 0!==(n=G.get(r))){G.delete(r),r=q.memoizedState;do{r=e(r,n.action),n=n.next}while(null!==n);return q.memoizedState=r,[r,t]}return[q.memoizedState,t]}return e=e===ee?"function"===typeof t?t():t:void 0!==n?n(t):t,q.memoizedState=e,e=(e=q.queue={last:null,dispatch:null}).dispatch=re.bind(null,V,e),[q.memoizedState,e]}function ne(e,t){if(V=X(),t=void 0===t?null:t,null!==(q=$())){var n=q.memoizedState;if(null!==n&&null!==t){var r=n[1];e:if(null===r)r=!1;else{for(var a=0;a<r.length&&a<t.length;a++)if(!Z(t[a],r[a])){r=!1;break e}r=!0}if(r)return n[0]}}return e=e(),q.memoizedState=[e,t],e}function re(e,t,n){if(!(25>K))throw Error(o(301));if(e===V)if(H=!0,e={action:n,next:null},null===G&&(G=new Map),void 0===(n=G.get(t)))G.set(t,e);else{for(t=n;null!==t.next;)t=t.next;t.next=e}}function ae(){}var oe=null,ie={readContext:function(e){var t=oe.threadID;return E(e,t),e[t]},useContext:function(e){X();var t=oe.threadID;return E(e,t),e[t]},useMemo:ne,useReducer:te,useRef:function(e){V=X();var t=(q=$()).memoizedState;return null===t?(e={current:e},q.memoizedState=e):t},useState:function(e){return te(ee,e)},useLayoutEffect:function(){},useCallback:function(e,t){return ne((function(){return e}),t)},useImperativeHandle:ae,useEffect:ae,useDebugValue:ae,useDeferredValue:function(e){return X(),e},useTransition:function(){return X(),[function(e){e()},!1]},useOpaqueIdentifier:function(){return(oe.identifierPrefix||"")+"R:"+(oe.uniqueID++).toString(36)},useMutableSource:function(e,t){return X(),t(e._source)}},se="http://www.w3.org/1999/xhtml";function ue(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}var ce={area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0},le=r({menuitem:!0},ce),fe={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},de=["Webkit","ms","Moz","O"];Object.keys(fe).forEach((function(e){de.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),fe[t]=fe[e]}))}));var pe=/([A-Z])/g,he=/^ms-/,me=a.Children.toArray,ve=_.ReactCurrentDispatcher,ge={listing:!0,pre:!0,textarea:!0},ye=/^[a-zA-Z][a-zA-Z:_\.\-\d]*$/,be={},xe={};var we=Object.prototype.hasOwnProperty,ke={children:null,dangerouslySetInnerHTML:null,suppressContentEditableWarning:null,suppressHydrationWarning:null};function Se(e,t){if(void 0===e)throw Error(o(152,S(t)||"Component"))}function _e(e,t,n){function i(a,i){var s=i.prototype&&i.prototype.isReactComponent,u=function(e,t,n,r){if(r&&"object"===typeof(r=e.contextType)&&null!==r)return E(r,n),r[n];if(e=e.contextTypes){for(var a in n={},e)n[a]=t[a];t=n}else t=N;return t}(i,t,n,s),c=[],l=!1,f={isMounted:function(){return!1},enqueueForceUpdate:function(){if(null===c)return null},enqueueReplaceState:function(e,t){l=!0,c=[t]},enqueueSetState:function(e,t){if(null===c)return null;c.push(t)}};if(s){if(s=new i(a.props,u,f),"function"===typeof i.getDerivedStateFromProps){var d=i.getDerivedStateFromProps.call(null,a.props,s.state);null!=d&&(s.state=r({},s.state,d))}}else if(V={},s=i(a.props,u,f),null==(s=J(i,a.props,s,u))||null==s.render)return void Se(e=s,i);if(s.props=a.props,s.context=u,s.updater=f,void 0===(f=s.state)&&(s.state=f=null),"function"===typeof s.UNSAFE_componentWillMount||"function"===typeof s.componentWillMount)if("function"===typeof s.componentWillMount&&"function"!==typeof i.getDerivedStateFromProps&&s.componentWillMount(),"function"===typeof s.UNSAFE_componentWillMount&&"function"!==typeof i.getDerivedStateFromProps&&s.UNSAFE_componentWillMount(),c.length){f=c;var p=l;if(c=null,l=!1,p&&1===f.length)s.state=f[0];else{d=p?f[0]:s.state;var h=!0;for(p=p?1:0;p<f.length;p++){var m=f[p];null!=(m="function"===typeof m?m.call(s,d,a.props,u):m)&&(h?(h=!1,d=r({},d,m)):r(d,m))}s.state=d}}else c=null;if(Se(e=s.render(),i),"function"===typeof s.getChildContext&&"object"===typeof(a=i.childContextTypes)){var v=s.getChildContext();for(var g in v)if(!(g in a))throw Error(o(108,S(i)||"Unknown",g))}v&&(t=r({},t,v))}for(;a.isValidElement(e);){var s=e,u=s.type;if("function"!==typeof u)break;i(s,u)}return{child:e,context:t}}var Ne=function(){function e(e,t,n){a.isValidElement(e)?e.type!==s?e=[e]:(e=e.props.children,e=a.isValidElement(e)?[e]:me(e)):e=me(e),e={type:null,domNamespace:se,children:e,childIndex:0,context:N,footer:""};var r=C[0];if(0===r){var i=C,u=2*(r=i.length);if(!(65536>=u))throw Error(o(304));var c=new Uint16Array(u);for(c.set(i),(C=c)[0]=r+1,i=r;i<u-1;i++)C[i]=i+1;C[u-1]=0}else C[0]=C[r];this.threadID=r,this.stack=[e],this.exhausted=!1,this.currentSelectValue=null,this.previousWasTextNode=!1,this.makeStaticMarkup=t,this.suspenseDepth=0,this.contextIndex=-1,this.contextStack=[],this.contextValueStack=[],this.uniqueID=0,this.identifierPrefix=n&&n.identifierPrefix||""}var t=e.prototype;return t.destroy=function(){if(!this.exhausted){this.exhausted=!0,this.clearProviders();var e=this.threadID;C[e]=C[0],C[0]=e}},t.pushProvider=function(e){var t=++this.contextIndex,n=e.type._context,r=this.threadID;E(n,r);var a=n[r];this.contextStack[t]=n,this.contextValueStack[t]=a,n[r]=e.props.value},t.popProvider=function(){var e=this.contextIndex,t=this.contextStack[e],n=this.contextValueStack[e];this.contextStack[e]=null,this.contextValueStack[e]=null,this.contextIndex--,t[this.threadID]=n},t.clearProviders=function(){for(var e=this.contextIndex;0<=e;e--)this.contextStack[e][this.threadID]=this.contextValueStack[e]},t.read=function(e){if(this.exhausted)return null;var t=oe;oe=this;var n=ve.current;ve.current=ie;try{for(var r=[""],a=!1;r[0].length<e;){if(0===this.stack.length){this.exhausted=!0;var i=this.threadID;C[i]=C[0],C[0]=i;break}var s=this.stack[this.stack.length-1];if(a||s.childIndex>=s.children.length){var u=s.footer;if(""!==u&&(this.previousWasTextNode=!1),this.stack.pop(),"select"===s.type)this.currentSelectValue=null;else if(null!=s.type&&null!=s.type.type&&s.type.type.$$typeof===l)this.popProvider(s.type);else if(s.type===p){this.suspenseDepth--;var c=r.pop();if(a){a=!1;var f=s.fallbackFrame;if(!f)throw Error(o(303));this.stack.push(f),r[this.suspenseDepth]+="\x3c!--$!--\x3e";continue}r[this.suspenseDepth]+=c}r[this.suspenseDepth]+=u}else{var d=s.children[s.childIndex++],h="";try{h+=this.render(d,s.context,s.domNamespace)}catch(m){if(null!=m&&"function"===typeof m.then)throw Error(o(294));throw m}r.length<=this.suspenseDepth&&r.push(""),r[this.suspenseDepth]+=h}}return r[0]}finally{ve.current=n,oe=t,Q()}},t.render=function(e,t,n){if("string"===typeof e||"number"===typeof e)return""===(n=""+e)?"":this.makeStaticMarkup?B(n):this.previousWasTextNode?"\x3c!-- --\x3e"+B(n):(this.previousWasTextNode=!0,B(n));if(e=(t=_e(e,t,this.threadID)).child,t=t.context,null===e||!1===e)return"";if(!a.isValidElement(e)){if(null!=e&&null!=e.$$typeof){if((n=e.$$typeof)===i)throw Error(o(257));throw Error(o(258,n.toString()))}return e=me(e),this.stack.push({type:null,domNamespace:n,children:e,childIndex:0,context:t,footer:""}),""}var g=e.type;if("string"===typeof g)return this.renderDOM(e,t,n);switch(g){case w:case x:case u:case c:case h:case s:return e=me(e.props.children),this.stack.push({type:null,domNamespace:n,children:e,childIndex:0,context:t,footer:""}),"";case p:throw Error(o(294));case b:throw Error(o(343))}if("object"===typeof g&&null!==g)switch(g.$$typeof){case d:V={};var k=g.render(e.props,e.ref);return k=J(g.render,e.props,k,e.ref),k=me(k),this.stack.push({type:null,domNamespace:n,children:k,childIndex:0,context:t,footer:""}),"";case m:return e=[a.createElement(g.type,r({ref:e.ref},e.props))],this.stack.push({type:null,domNamespace:n,children:e,childIndex:0,context:t,footer:""}),"";case l:return n={type:e,domNamespace:n,children:g=me(e.props.children),childIndex:0,context:t,footer:""},this.pushProvider(e),this.stack.push(n),"";case f:g=e.type,k=e.props;var S=this.threadID;return E(g,S),g=me(k.children(g[S])),this.stack.push({type:e,domNamespace:n,children:g,childIndex:0,context:t,footer:""}),"";case y:throw Error(o(338));case v:return g=(k=(g=e.type)._init)(g._payload),e=[a.createElement(g,r({ref:e.ref},e.props))],this.stack.push({type:null,domNamespace:n,children:e,childIndex:0,context:t,footer:""}),""}throw Error(o(130,null==g?g:typeof g,""))},t.renderDOM=function(e,t,n){var i=e.type.toLowerCase();if(n===se&&ue(i),!be.hasOwnProperty(i)){if(!ye.test(i))throw Error(o(65,i));be[i]=!0}var s=e.props;if("input"===i)s=r({type:void 0},s,{defaultChecked:void 0,defaultValue:void 0,value:null!=s.value?s.value:s.defaultValue,checked:null!=s.checked?s.checked:s.defaultChecked});else if("textarea"===i){var u=s.value;if(null==u){u=s.defaultValue;var c=s.children;if(null!=c){if(null!=u)throw Error(o(92));if(Array.isArray(c)){if(!(1>=c.length))throw Error(o(93));c=c[0]}u=""+c}null==u&&(u="")}s=r({},s,{value:void 0,children:""+u})}else if("select"===i)this.currentSelectValue=null!=s.value?s.value:s.defaultValue,s=r({},s,{value:void 0});else if("option"===i){c=this.currentSelectValue;var l=function(e){if(void 0===e||null===e)return e;var t="";return a.Children.forEach(e,(function(e){null!=e&&(t+=e)})),t}(s.children);if(null!=c){var f=null!=s.value?s.value+"":l;if(u=!1,Array.isArray(c)){for(var d=0;d<c.length;d++)if(""+c[d]===f){u=!0;break}}else u=""+c===f;s=r({selected:void 0,children:void 0},s,{selected:u,children:l})}}if(u=s){if(le[i]&&(null!=u.children||null!=u.dangerouslySetInnerHTML))throw Error(o(137,i));if(null!=u.dangerouslySetInnerHTML){if(null!=u.children)throw Error(o(60));if("object"!==typeof u.dangerouslySetInnerHTML||!("__html"in u.dangerouslySetInnerHTML))throw Error(o(61))}if(null!=u.style&&"object"!==typeof u.style)throw Error(o(62))}u=s,c=this.makeStaticMarkup,l=1===this.stack.length,f="<"+e.type;e:if(-1===i.indexOf("-"))d="string"===typeof u.is;else switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":d=!1;break e;default:d=!0}for(w in u)if(we.call(u,w)){var p=u[w];if(null!=p){if("style"===w){var h=void 0,m="",v="";for(h in p)if(p.hasOwnProperty(h)){var g=0===h.indexOf("--"),y=p[h];if(null!=y){if(g)var b=h;else if(b=h,xe.hasOwnProperty(b))b=xe[b];else{var x=b.replace(pe,"-$1").toLowerCase().replace(he,"-ms-");b=xe[b]=x}m+=v+b+":",v=h,m+=g=null==y||"boolean"===typeof y||""===y?"":g||"number"!==typeof y||0===y||fe.hasOwnProperty(v)&&fe[v]?(""+y).trim():y+"px",v=";"}}p=m||null}h=null,d?ke.hasOwnProperty(w)||(h=M(h=w)&&null!=p?h+'="'+B(p)+'"':""):h=z(w,p),h&&(f+=" "+h)}}c||l&&(f+=' data-reactroot=""');var w=f;u="",ce.hasOwnProperty(i)?w+="/>":(w+=">",u="</"+e.type+">");e:{if(null!=(c=s.dangerouslySetInnerHTML)){if(null!=c.__html){c=c.__html;break e}}else if("string"===typeof(c=s.children)||"number"===typeof c){c=B(c);break e}c=null}return null!=c?(s=[],ge.hasOwnProperty(i)&&"\n"===c.charAt(0)&&(w+="\n"),w+=c):s=me(s.children),e=e.type,n=null==n||"http://www.w3.org/1999/xhtml"===n?ue(e):"http://www.w3.org/2000/svg"===n&&"foreignObject"===e?"http://www.w3.org/1999/xhtml":n,this.stack.push({domNamespace:n,type:i,children:s,childIndex:0,context:t,footer:u}),this.previousWasTextNode=!1,w},e}();t.renderToNodeStream=function(){throw Error(o(207))},t.renderToStaticMarkup=function(e,t){e=new Ne(e,!0,t);try{return e.read(1/0)}finally{e.destroy()}},t.renderToStaticNodeStream=function(){throw Error(o(208))},t.renderToString=function(e,t){e=new Ne(e,!1,t);try{return e.read(1/0)}finally{e.destroy()}},t.version="17.0.2"},4463:function(e,t,n){"use strict";var r=n(2791),a=n(1725),o=n(5296);function i(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!r)throw Error(i(227));var s=new Set,u={};function c(e,t){l(e,t),l(e+"Capture",t)}function l(e,t){for(u[e]=t,e=0;e<t.length;e++)s.add(t[e])}var f=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),d=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,p=Object.prototype.hasOwnProperty,h={},m={};function v(e,t,n,r,a,o,i){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=a,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=i}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){g[e]=new v(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];g[t]=new v(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){g[e]=new v(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){g[e]=new v(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){g[e]=new v(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){g[e]=new v(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){g[e]=new v(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){g[e]=new v(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){g[e]=new v(e,5,!1,e.toLowerCase(),null,!1,!1)}));var y=/[\-:]([a-z])/g;function b(e){return e[1].toUpperCase()}function x(e,t,n,r){var a=g.hasOwnProperty(t)?g[t]:null;(null!==a?0===a.type:!r&&(2<t.length&&("o"===t[0]||"O"===t[0])&&("n"===t[1]||"N"===t[1])))||(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,a,r)&&(n=null),r||null===a?function(e){return!!p.call(m,e)||!p.call(h,e)&&(d.test(e)?m[e]=!0:(h[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):a.mustUseProperty?e[a.propertyName]=null===n?3!==a.type&&"":n:(t=a.attributeName,r=a.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(a=a.type)||4===a&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(y,b);g[t]=new v(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(y,b);g[t]=new v(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(y,b);g[t]=new v(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){g[e]=new v(e,1,!1,e.toLowerCase(),null,!1,!1)})),g.xlinkHref=new v("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){g[e]=new v(e,1,!1,e.toLowerCase(),null,!0,!0)}));var w=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,k=60103,S=60106,_=60107,N=60108,E=60114,C=60109,T=60110,I=60112,O=60113,A=60120,D=60115,M=60116,R=60121,P=60128,j=60129,F=60130,L=60131;if("function"===typeof Symbol&&Symbol.for){var B=Symbol.for;k=B("react.element"),S=B("react.portal"),_=B("react.fragment"),N=B("react.strict_mode"),E=B("react.profiler"),C=B("react.provider"),T=B("react.context"),I=B("react.forward_ref"),O=B("react.suspense"),A=B("react.suspense_list"),D=B("react.memo"),M=B("react.lazy"),R=B("react.block"),B("react.scope"),P=B("react.opaque.id"),j=B("react.debug_trace_mode"),F=B("react.offscreen"),L=B("react.legacy_hidden")}var z,Z="function"===typeof Symbol&&Symbol.iterator;function V(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=Z&&e[Z]||e["@@iterator"])?e:null}function U(e){if(void 0===z)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);z=t&&t[1]||""}return"\n"+z+e}var q=!1;function W(e,t){if(!e||q)return"";q=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var r=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){r=u}e.call(t.prototype)}else{try{throw Error()}catch(u){r=u}e()}}catch(u){if(u&&r&&"string"===typeof u.stack){for(var a=u.stack.split("\n"),o=r.stack.split("\n"),i=a.length-1,s=o.length-1;1<=i&&0<=s&&a[i]!==o[s];)s--;for(;1<=i&&0<=s;i--,s--)if(a[i]!==o[s]){if(1!==i||1!==s)do{if(i--,0>--s||a[i]!==o[s])return"\n"+a[i].replace(" at new "," at ")}while(1<=i&&0<=s);break}}}finally{q=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?U(e):""}function H(e){switch(e.tag){case 5:return U(e.type);case 16:return U("Lazy");case 13:return U("Suspense");case 19:return U("SuspenseList");case 0:case 2:case 15:return e=W(e.type,!1);case 11:return e=W(e.type.render,!1);case 22:return e=W(e.type._render,!1);case 1:return e=W(e.type,!0);default:return""}}function G(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case _:return"Fragment";case S:return"Portal";case E:return"Profiler";case N:return"StrictMode";case O:return"Suspense";case A:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case T:return(e.displayName||"Context")+".Consumer";case C:return(e._context.displayName||"Context")+".Provider";case I:var t=e.render;return t=t.displayName||t.name||"",e.displayName||(""!==t?"ForwardRef("+t+")":"ForwardRef");case D:return G(e.type);case R:return G(e._render);case M:t=e._payload,e=e._init;try{return G(e(t))}catch(n){}}return null}function K(e){switch(typeof e){case"boolean":case"number":case"object":case"string":case"undefined":return e;default:return""}}function X(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function Y(e){e._valueTracker||(e._valueTracker=function(e){var t=X(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var a=n.get,o=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(e){r=""+e,o.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function $(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=X(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function J(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Q(e,t){var n=t.checked;return a({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function ee(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=K(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function te(e,t){null!=(t=t.checked)&&x(e,"checked",t,!1)}function ne(e,t){te(e,t);var n=K(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ae(e,t.type,n):t.hasOwnProperty("defaultValue")&&ae(e,t.type,K(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function re(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ae(e,t,n){"number"===t&&J(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}function oe(e,t){return e=a({children:void 0},t),(t=function(e){var t="";return r.Children.forEach(e,(function(e){null!=e&&(t+=e)})),t}(t.children))&&(e.children=t),e}function ie(e,t,n,r){if(e=e.options,t){t={};for(var a=0;a<n.length;a++)t["$"+n[a]]=!0;for(n=0;n<e.length;n++)a=t.hasOwnProperty("$"+e[n].value),e[n].selected!==a&&(e[n].selected=a),a&&r&&(e[n].defaultSelected=!0)}else{for(n=""+K(n),t=null,a=0;a<e.length;a++){if(e[a].value===n)return e[a].selected=!0,void(r&&(e[a].defaultSelected=!0));null!==t||e[a].disabled||(t=e[a])}null!==t&&(t.selected=!0)}}function se(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(i(91));return a({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ue(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(i(92));if(Array.isArray(n)){if(!(1>=n.length))throw Error(i(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:K(n)}}function ce(e,t){var n=K(t.value),r=K(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function le(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}var fe="http://www.w3.org/1999/xhtml",de="http://www.w3.org/2000/svg";function pe(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function he(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?pe(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var me,ve,ge=(ve=function(e,t){if(e.namespaceURI!==de||"innerHTML"in e)e.innerHTML=t;else{for((me=me||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=me.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return ve(e,t)}))}:ve);function ye(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var be={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},xe=["Webkit","ms","Moz","O"];function we(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||be.hasOwnProperty(e)&&be[e]?(""+t).trim():t+"px"}function ke(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),a=we(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,a):e[n]=a}}Object.keys(be).forEach((function(e){xe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),be[t]=be[e]}))}));var Se=a({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function _e(e,t){if(t){if(Se[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(i(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(i(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(i(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(i(62))}}function Ne(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}function Ee(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Ce=null,Te=null,Ie=null;function Oe(e){if(e=ra(e)){if("function"!==typeof Ce)throw Error(i(280));var t=e.stateNode;t&&(t=oa(t),Ce(e.stateNode,e.type,t))}}function Ae(e){Te?Ie?Ie.push(e):Ie=[e]:Te=e}function De(){if(Te){var e=Te,t=Ie;if(Ie=Te=null,Oe(e),t)for(e=0;e<t.length;e++)Oe(t[e])}}function Me(e,t){return e(t)}function Re(e,t,n,r,a){return e(t,n,r,a)}function Pe(){}var je=Me,Fe=!1,Le=!1;function Be(){null===Te&&null===Ie||(Pe(),De())}function ze(e,t){var n=e.stateNode;if(null===n)return null;var r=oa(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(i(231,t,typeof n));return n}var Ze=!1;if(f)try{var Ve={};Object.defineProperty(Ve,"passive",{get:function(){Ze=!0}}),window.addEventListener("test",Ve,Ve),window.removeEventListener("test",Ve,Ve)}catch(ve){Ze=!1}function Ue(e,t,n,r,a,o,i,s,u){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(l){this.onError(l)}}var qe=!1,We=null,He=!1,Ge=null,Ke={onError:function(e){qe=!0,We=e}};function Xe(e,t,n,r,a,o,i,s,u){qe=!1,We=null,Ue.apply(Ke,arguments)}function Ye(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(1026&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function $e(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function Je(e){if(Ye(e)!==e)throw Error(i(188))}function Qe(e){if(e=function(e){var t=e.alternate;if(!t){if(null===(t=Ye(e)))throw Error(i(188));return t!==e?null:e}for(var n=e,r=t;;){var a=n.return;if(null===a)break;var o=a.alternate;if(null===o){if(null!==(r=a.return)){n=r;continue}break}if(a.child===o.child){for(o=a.child;o;){if(o===n)return Je(a),e;if(o===r)return Je(a),t;o=o.sibling}throw Error(i(188))}if(n.return!==r.return)n=a,r=o;else{for(var s=!1,u=a.child;u;){if(u===n){s=!0,n=a,r=o;break}if(u===r){s=!0,r=a,n=o;break}u=u.sibling}if(!s){for(u=o.child;u;){if(u===n){s=!0,n=o,r=a;break}if(u===r){s=!0,r=o,n=a;break}u=u.sibling}if(!s)throw Error(i(189))}}if(n.alternate!==r)throw Error(i(190))}if(3!==n.tag)throw Error(i(188));return n.stateNode.current===n?e:t}(e),!e)return null;for(var t=e;;){if(5===t.tag||6===t.tag)return t;if(t.child)t.child.return=t,t=t.child;else{if(t===e)break;for(;!t.sibling;){if(!t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}}return null}function et(e,t){for(var n=e.alternate;null!==t;){if(t===e||t===n)return!0;t=t.return}return!1}var tt,nt,rt,at,ot=!1,it=[],st=null,ut=null,ct=null,lt=new Map,ft=new Map,dt=[],pt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function ht(e,t,n,r,a){return{blockedOn:e,domEventName:t,eventSystemFlags:16|n,nativeEvent:a,targetContainers:[r]}}function mt(e,t){switch(e){case"focusin":case"focusout":st=null;break;case"dragenter":case"dragleave":ut=null;break;case"mouseover":case"mouseout":ct=null;break;case"pointerover":case"pointerout":lt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":ft.delete(t.pointerId)}}function vt(e,t,n,r,a,o){return null===e||e.nativeEvent!==o?(e=ht(t,n,r,a,o),null!==t&&(null!==(t=ra(t))&&nt(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==a&&-1===t.indexOf(a)&&t.push(a),e)}function gt(e){var t=na(e.target);if(null!==t){var n=Ye(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=$e(n)))return e.blockedOn=t,void at(e.lanePriority,(function(){o.unstable_runWithPriority(e.priority,(function(){rt(n)}))}))}else if(3===t&&n.stateNode.hydrate)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function yt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Qt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=ra(n))&&nt(t),e.blockedOn=n,!1;t.shift()}return!0}function bt(e,t,n){yt(e)&&n.delete(t)}function xt(){for(ot=!1;0<it.length;){var e=it[0];if(null!==e.blockedOn){null!==(e=ra(e.blockedOn))&&tt(e);break}for(var t=e.targetContainers;0<t.length;){var n=Qt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n){e.blockedOn=n;break}t.shift()}null===e.blockedOn&&it.shift()}null!==st&&yt(st)&&(st=null),null!==ut&&yt(ut)&&(ut=null),null!==ct&&yt(ct)&&(ct=null),lt.forEach(bt),ft.forEach(bt)}function wt(e,t){e.blockedOn===t&&(e.blockedOn=null,ot||(ot=!0,o.unstable_scheduleCallback(o.unstable_NormalPriority,xt)))}function kt(e){function t(t){return wt(t,e)}if(0<it.length){wt(it[0],e);for(var n=1;n<it.length;n++){var r=it[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==st&&wt(st,e),null!==ut&&wt(ut,e),null!==ct&&wt(ct,e),lt.forEach(t),ft.forEach(t),n=0;n<dt.length;n++)(r=dt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<dt.length&&null===(n=dt[0]).blockedOn;)gt(n),null===n.blockedOn&&dt.shift()}function St(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var _t={animationend:St("Animation","AnimationEnd"),animationiteration:St("Animation","AnimationIteration"),animationstart:St("Animation","AnimationStart"),transitionend:St("Transition","TransitionEnd")},Nt={},Et={};function Ct(e){if(Nt[e])return Nt[e];if(!_t[e])return e;var t,n=_t[e];for(t in n)if(n.hasOwnProperty(t)&&t in Et)return Nt[e]=n[t];return e}f&&(Et=document.createElement("div").style,"AnimationEvent"in window||(delete _t.animationend.animation,delete _t.animationiteration.animation,delete _t.animationstart.animation),"TransitionEvent"in window||delete _t.transitionend.transition);var Tt=Ct("animationend"),It=Ct("animationiteration"),Ot=Ct("animationstart"),At=Ct("transitionend"),Dt=new Map,Mt=new Map,Rt=["abort","abort",Tt,"animationEnd",It,"animationIteration",Ot,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",At,"transitionEnd","waiting","waiting"];function Pt(e,t){for(var n=0;n<e.length;n+=2){var r=e[n],a=e[n+1];a="on"+(a[0].toUpperCase()+a.slice(1)),Mt.set(r,t),Dt.set(r,a),c(a,[r])}}(0,o.unstable_now)();var jt=8;function Ft(e){if(0!==(1&e))return jt=15,1;if(0!==(2&e))return jt=14,2;if(0!==(4&e))return jt=13,4;var t=24&e;return 0!==t?(jt=12,t):0!==(32&e)?(jt=11,32):0!==(t=192&e)?(jt=10,t):0!==(256&e)?(jt=9,256):0!==(t=3584&e)?(jt=8,t):0!==(4096&e)?(jt=7,4096):0!==(t=4186112&e)?(jt=6,t):0!==(t=62914560&e)?(jt=5,t):67108864&e?(jt=4,67108864):0!==(134217728&e)?(jt=3,134217728):0!==(t=805306368&e)?(jt=2,t):0!==(1073741824&e)?(jt=1,1073741824):(jt=8,e)}function Lt(e,t){var n=e.pendingLanes;if(0===n)return jt=0;var r=0,a=0,o=e.expiredLanes,i=e.suspendedLanes,s=e.pingedLanes;if(0!==o)r=o,a=jt=15;else if(0!==(o=134217727&n)){var u=o&~i;0!==u?(r=Ft(u),a=jt):0!==(s&=o)&&(r=Ft(s),a=jt)}else 0!==(o=n&~i)?(r=Ft(o),a=jt):0!==s&&(r=Ft(s),a=jt);if(0===r)return 0;if(r=n&((0>(r=31-qt(r))?0:1<<r)<<1)-1,0!==t&&t!==r&&0===(t&i)){if(Ft(t),a<=jt)return t;jt=a}if(0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)a=1<<(n=31-qt(t)),r|=e[n],t&=~a;return r}function Bt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function zt(e,t){switch(e){case 15:return 1;case 14:return 2;case 12:return 0===(e=Zt(24&~t))?zt(10,t):e;case 10:return 0===(e=Zt(192&~t))?zt(8,t):e;case 8:return 0===(e=Zt(3584&~t))&&(0===(e=Zt(4186112&~t))&&(e=512)),e;case 2:return 0===(t=Zt(805306368&~t))&&(t=268435456),t}throw Error(i(358,e))}function Zt(e){return e&-e}function Vt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Ut(e,t,n){e.pendingLanes|=t;var r=t-1;e.suspendedLanes&=r,e.pingedLanes&=r,(e=e.eventTimes)[t=31-qt(t)]=n}var qt=Math.clz32?Math.clz32:function(e){return 0===e?32:31-(Wt(e)/Ht|0)|0},Wt=Math.log,Ht=Math.LN2;var Gt=o.unstable_UserBlockingPriority,Kt=o.unstable_runWithPriority,Xt=!0;function Yt(e,t,n,r){Fe||Pe();var a=Jt,o=Fe;Fe=!0;try{Re(a,e,t,n,r)}finally{(Fe=o)||Be()}}function $t(e,t,n,r){Kt(Gt,Jt.bind(null,e,t,n,r))}function Jt(e,t,n,r){var a;if(Xt)if((a=0===(4&t))&&0<it.length&&-1<pt.indexOf(e))e=ht(null,e,t,n,r),it.push(e);else{var o=Qt(e,t,n,r);if(null===o)a&&mt(e,r);else{if(a){if(-1<pt.indexOf(e))return e=ht(o,e,t,n,r),void it.push(e);if(function(e,t,n,r,a){switch(t){case"focusin":return st=vt(st,e,t,n,r,a),!0;case"dragenter":return ut=vt(ut,e,t,n,r,a),!0;case"mouseover":return ct=vt(ct,e,t,n,r,a),!0;case"pointerover":var o=a.pointerId;return lt.set(o,vt(lt.get(o)||null,e,t,n,r,a)),!0;case"gotpointercapture":return o=a.pointerId,ft.set(o,vt(ft.get(o)||null,e,t,n,r,a)),!0}return!1}(o,e,t,n,r))return;mt(e,r)}Pr(e,t,r,null,n)}}}function Qt(e,t,n,r){var a=Ee(r);if(null!==(a=na(a))){var o=Ye(a);if(null===o)a=null;else{var i=o.tag;if(13===i){if(null!==(a=$e(o)))return a;a=null}else if(3===i){if(o.stateNode.hydrate)return 3===o.tag?o.stateNode.containerInfo:null;a=null}else o!==a&&(a=null)}}return Pr(e,t,r,a,n),null}var en=null,tn=null,nn=null;function rn(){if(nn)return nn;var e,t,n=tn,r=n.length,a="value"in en?en.value:en.textContent,o=a.length;for(e=0;e<r&&n[e]===a[e];e++);var i=r-e;for(t=1;t<=i&&n[r-t]===a[o-t];t++);return nn=a.slice(e,1<t?1-t:void 0)}function an(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function on(){return!0}function sn(){return!1}function un(e){function t(t,n,r,a,o){for(var i in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=a,this.target=o,this.currentTarget=null,e)e.hasOwnProperty(i)&&(t=e[i],this[i]=t?t(a):a[i]);return this.isDefaultPrevented=(null!=a.defaultPrevented?a.defaultPrevented:!1===a.returnValue)?on:sn,this.isPropagationStopped=sn,this}return a(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=on)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=on)},persist:function(){},isPersistent:on}),t}var cn,ln,fn,dn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},pn=un(dn),hn=a({},dn,{view:0,detail:0}),mn=un(hn),vn=a({},hn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Tn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==fn&&(fn&&"mousemove"===e.type?(cn=e.screenX-fn.screenX,ln=e.screenY-fn.screenY):ln=cn=0,fn=e),cn)},movementY:function(e){return"movementY"in e?e.movementY:ln}}),gn=un(vn),yn=un(a({},vn,{dataTransfer:0})),bn=un(a({},hn,{relatedTarget:0})),xn=un(a({},dn,{animationName:0,elapsedTime:0,pseudoElement:0})),wn=a({},dn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),kn=un(wn),Sn=un(a({},dn,{data:0})),_n={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Nn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},En={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Cn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=En[e])&&!!t[e]}function Tn(){return Cn}var In=a({},hn,{key:function(e){if(e.key){var t=_n[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=an(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?Nn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Tn,charCode:function(e){return"keypress"===e.type?an(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?an(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),On=un(In),An=un(a({},vn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Dn=un(a({},hn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Tn})),Mn=un(a({},dn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Rn=a({},vn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Pn=un(Rn),jn=[9,13,27,32],Fn=f&&"CompositionEvent"in window,Ln=null;f&&"documentMode"in document&&(Ln=document.documentMode);var Bn=f&&"TextEvent"in window&&!Ln,zn=f&&(!Fn||Ln&&8<Ln&&11>=Ln),Zn=String.fromCharCode(32),Vn=!1;function Un(e,t){switch(e){case"keyup":return-1!==jn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function qn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Wn=!1;var Hn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Gn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Hn[e.type]:"textarea"===t}function Kn(e,t,n,r){Ae(r),0<(t=Fr(t,"onChange")).length&&(n=new pn("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Xn=null,Yn=null;function $n(e){Ir(e,0)}function Jn(e){if($(aa(e)))return e}function Qn(e,t){if("change"===e)return t}var er=!1;if(f){var tr;if(f){var nr="oninput"in document;if(!nr){var rr=document.createElement("div");rr.setAttribute("oninput","return;"),nr="function"===typeof rr.oninput}tr=nr}else tr=!1;er=tr&&(!document.documentMode||9<document.documentMode)}function ar(){Xn&&(Xn.detachEvent("onpropertychange",or),Yn=Xn=null)}function or(e){if("value"===e.propertyName&&Jn(Yn)){var t=[];if(Kn(t,Yn,e,Ee(e)),e=$n,Fe)e(t);else{Fe=!0;try{Me(e,t)}finally{Fe=!1,Be()}}}}function ir(e,t,n){"focusin"===e?(ar(),Yn=n,(Xn=t).attachEvent("onpropertychange",or)):"focusout"===e&&ar()}function sr(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Jn(Yn)}function ur(e,t){if("click"===e)return Jn(t)}function cr(e,t){if("input"===e||"change"===e)return Jn(t)}var lr="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},fr=Object.prototype.hasOwnProperty;function dr(e,t){if(lr(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++)if(!fr.call(t,n[r])||!lr(e[n[r]],t[n[r]]))return!1;return!0}function pr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function hr(e,t){var n,r=pr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=pr(r)}}function mr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?mr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function vr(){for(var e=window,t=J();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=J((e=t.contentWindow).document)}return t}function gr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var yr=f&&"documentMode"in document&&11>=document.documentMode,br=null,xr=null,wr=null,kr=!1;function Sr(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;kr||null==br||br!==J(r)||("selectionStart"in(r=br)&&gr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},wr&&dr(wr,r)||(wr=r,0<(r=Fr(xr,"onSelect")).length&&(t=new pn("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=br)))}Pt("cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focusin focus focusout blur input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0),Pt("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1),Pt(Rt,2);for(var _r="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),Nr=0;Nr<_r.length;Nr++)Mt.set(_r[Nr],0);l("onMouseEnter",["mouseout","mouseover"]),l("onMouseLeave",["mouseout","mouseover"]),l("onPointerEnter",["pointerout","pointerover"]),l("onPointerLeave",["pointerout","pointerover"]),c("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),c("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),c("onBeforeInput",["compositionend","keypress","textInput","paste"]),c("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Er="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Cr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Er));function Tr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,a,o,s,u,c){if(Xe.apply(this,arguments),qe){if(!qe)throw Error(i(198));var l=We;qe=!1,We=null,He||(He=!0,Ge=l)}}(r,t,void 0,e),e.currentTarget=null}function Ir(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],a=r.event;r=r.listeners;e:{var o=void 0;if(t)for(var i=r.length-1;0<=i;i--){var s=r[i],u=s.instance,c=s.currentTarget;if(s=s.listener,u!==o&&a.isPropagationStopped())break e;Tr(a,s,c),o=u}else for(i=0;i<r.length;i++){if(u=(s=r[i]).instance,c=s.currentTarget,s=s.listener,u!==o&&a.isPropagationStopped())break e;Tr(a,s,c),o=u}}}if(He)throw e=Ge,He=!1,Ge=null,e}function Or(e,t){var n=ia(t),r=e+"__bubble";n.has(r)||(Rr(t,e,2,!1),n.add(r))}var Ar="_reactListening"+Math.random().toString(36).slice(2);function Dr(e){e[Ar]||(e[Ar]=!0,s.forEach((function(t){Cr.has(t)||Mr(t,!1,e,null),Mr(t,!0,e,null)})))}function Mr(e,t,n,r){var a=4<arguments.length&&void 0!==arguments[4]?arguments[4]:0,o=n;if("selectionchange"===e&&9!==n.nodeType&&(o=n.ownerDocument),null!==r&&!t&&Cr.has(e)){if("scroll"!==e)return;a|=2,o=r}var i=ia(o),s=e+"__"+(t?"capture":"bubble");i.has(s)||(t&&(a|=4),Rr(o,e,a,t),i.add(s))}function Rr(e,t,n,r){var a=Mt.get(t);switch(void 0===a?2:a){case 0:a=Yt;break;case 1:a=$t;break;default:a=Jt}n=a.bind(null,t,n,e),a=void 0,!Ze||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(a=!0),r?void 0!==a?e.addEventListener(t,n,{capture:!0,passive:a}):e.addEventListener(t,n,!0):void 0!==a?e.addEventListener(t,n,{passive:a}):e.addEventListener(t,n,!1)}function Pr(e,t,n,r,a){var o=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var i=r.tag;if(3===i||4===i){var s=r.stateNode.containerInfo;if(s===a||8===s.nodeType&&s.parentNode===a)break;if(4===i)for(i=r.return;null!==i;){var u=i.tag;if((3===u||4===u)&&((u=i.stateNode.containerInfo)===a||8===u.nodeType&&u.parentNode===a))return;i=i.return}for(;null!==s;){if(null===(i=na(s)))return;if(5===(u=i.tag)||6===u){r=o=i;continue e}s=s.parentNode}}r=r.return}!function(e,t,n){if(Le)return e(t,n);Le=!0;try{je(e,t,n)}finally{Le=!1,Be()}}((function(){var r=o,a=Ee(n),i=[];e:{var s=Dt.get(e);if(void 0!==s){var u=pn,c=e;switch(e){case"keypress":if(0===an(n))break e;case"keydown":case"keyup":u=On;break;case"focusin":c="focus",u=bn;break;case"focusout":c="blur",u=bn;break;case"beforeblur":case"afterblur":u=bn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":u=gn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":u=yn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":u=Dn;break;case Tt:case It:case Ot:u=xn;break;case At:u=Mn;break;case"scroll":u=mn;break;case"wheel":u=Pn;break;case"copy":case"cut":case"paste":u=kn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":u=An}var l=0!==(4&t),f=!l&&"scroll"===e,d=l?null!==s?s+"Capture":null:s;l=[];for(var p,h=r;null!==h;){var m=(p=h).stateNode;if(5===p.tag&&null!==m&&(p=m,null!==d&&(null!=(m=ze(h,d))&&l.push(jr(h,m,p)))),f)break;h=h.return}0<l.length&&(s=new u(s,c,null,n,a),i.push({event:s,listeners:l}))}}if(0===(7&t)){if(u="mouseout"===e||"pointerout"===e,(!(s="mouseover"===e||"pointerover"===e)||0!==(16&t)||!(c=n.relatedTarget||n.fromElement)||!na(c)&&!c[ea])&&(u||s)&&(s=a.window===a?a:(s=a.ownerDocument)?s.defaultView||s.parentWindow:window,u?(u=r,null!==(c=(c=n.relatedTarget||n.toElement)?na(c):null)&&(c!==(f=Ye(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(u=null,c=r),u!==c)){if(l=gn,m="onMouseLeave",d="onMouseEnter",h="mouse","pointerout"!==e&&"pointerover"!==e||(l=An,m="onPointerLeave",d="onPointerEnter",h="pointer"),f=null==u?s:aa(u),p=null==c?s:aa(c),(s=new l(m,h+"leave",u,n,a)).target=f,s.relatedTarget=p,m=null,na(a)===r&&((l=new l(d,h+"enter",c,n,a)).target=p,l.relatedTarget=f,m=l),f=m,u&&c)e:{for(d=c,h=0,p=l=u;p;p=Lr(p))h++;for(p=0,m=d;m;m=Lr(m))p++;for(;0<h-p;)l=Lr(l),h--;for(;0<p-h;)d=Lr(d),p--;for(;h--;){if(l===d||null!==d&&l===d.alternate)break e;l=Lr(l),d=Lr(d)}l=null}else l=null;null!==u&&Br(i,s,u,l,!1),null!==c&&null!==f&&Br(i,f,c,l,!0)}if("select"===(u=(s=r?aa(r):window).nodeName&&s.nodeName.toLowerCase())||"input"===u&&"file"===s.type)var v=Qn;else if(Gn(s))if(er)v=cr;else{v=sr;var g=ir}else(u=s.nodeName)&&"input"===u.toLowerCase()&&("checkbox"===s.type||"radio"===s.type)&&(v=ur);switch(v&&(v=v(e,r))?Kn(i,v,n,a):(g&&g(e,s,r),"focusout"===e&&(g=s._wrapperState)&&g.controlled&&"number"===s.type&&ae(s,"number",s.value)),g=r?aa(r):window,e){case"focusin":(Gn(g)||"true"===g.contentEditable)&&(br=g,xr=r,wr=null);break;case"focusout":wr=xr=br=null;break;case"mousedown":kr=!0;break;case"contextmenu":case"mouseup":case"dragend":kr=!1,Sr(i,n,a);break;case"selectionchange":if(yr)break;case"keydown":case"keyup":Sr(i,n,a)}var y;if(Fn)e:{switch(e){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else Wn?Un(e,n)&&(b="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(b="onCompositionStart");b&&(zn&&"ko"!==n.locale&&(Wn||"onCompositionStart"!==b?"onCompositionEnd"===b&&Wn&&(y=rn()):(tn="value"in(en=a)?en.value:en.textContent,Wn=!0)),0<(g=Fr(r,b)).length&&(b=new Sn(b,e,null,n,a),i.push({event:b,listeners:g}),y?b.data=y:null!==(y=qn(n))&&(b.data=y))),(y=Bn?function(e,t){switch(e){case"compositionend":return qn(t);case"keypress":return 32!==t.which?null:(Vn=!0,Zn);case"textInput":return(e=t.data)===Zn&&Vn?null:e;default:return null}}(e,n):function(e,t){if(Wn)return"compositionend"===e||!Fn&&Un(e,t)?(e=rn(),nn=tn=en=null,Wn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return zn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Fr(r,"onBeforeInput")).length&&(a=new Sn("onBeforeInput","beforeinput",null,n,a),i.push({event:a,listeners:r}),a.data=y))}Ir(i,t)}))}function jr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Fr(e,t){for(var n=t+"Capture",r=[];null!==e;){var a=e,o=a.stateNode;5===a.tag&&null!==o&&(a=o,null!=(o=ze(e,n))&&r.unshift(jr(e,o,a)),null!=(o=ze(e,t))&&r.push(jr(e,o,a))),e=e.return}return r}function Lr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Br(e,t,n,r,a){for(var o=t._reactName,i=[];null!==n&&n!==r;){var s=n,u=s.alternate,c=s.stateNode;if(null!==u&&u===r)break;5===s.tag&&null!==c&&(s=c,a?null!=(u=ze(n,o))&&i.unshift(jr(n,u,s)):a||null!=(u=ze(n,o))&&i.push(jr(n,u,s))),n=n.return}0!==i.length&&e.push({event:t,listeners:i})}function zr(){}var Zr=null,Vr=null;function Ur(e,t){switch(e){case"button":case"input":case"select":case"textarea":return!!t.autoFocus}return!1}function qr(e,t){return"textarea"===e||"option"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var Wr="function"===typeof setTimeout?setTimeout:void 0,Hr="function"===typeof clearTimeout?clearTimeout:void 0;function Gr(e){1===e.nodeType?e.textContent="":9===e.nodeType&&(null!=(e=e.body)&&(e.textContent=""))}function Kr(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break}return e}function Xr(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var Yr=0;var $r=Math.random().toString(36).slice(2),Jr="__reactFiber$"+$r,Qr="__reactProps$"+$r,ea="__reactContainer$"+$r,ta="__reactEvents$"+$r;function na(e){var t=e[Jr];if(t)return t;for(var n=e.parentNode;n;){if(t=n[ea]||n[Jr]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=Xr(e);null!==e;){if(n=e[Jr])return n;e=Xr(e)}return t}n=(e=n).parentNode}return null}function ra(e){return!(e=e[Jr]||e[ea])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function aa(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(i(33))}function oa(e){return e[Qr]||null}function ia(e){var t=e[ta];return void 0===t&&(t=e[ta]=new Set),t}var sa=[],ua=-1;function ca(e){return{current:e}}function la(e){0>ua||(e.current=sa[ua],sa[ua]=null,ua--)}function fa(e,t){ua++,sa[ua]=e.current,e.current=t}var da={},pa=ca(da),ha=ca(!1),ma=da;function va(e,t){var n=e.type.contextTypes;if(!n)return da;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var a,o={};for(a in n)o[a]=t[a];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=o),o}function ga(e){return null!==(e=e.childContextTypes)&&void 0!==e}function ya(){la(ha),la(pa)}function ba(e,t,n){if(pa.current!==da)throw Error(i(168));fa(pa,t),fa(ha,n)}function xa(e,t,n){var r=e.stateNode;if(e=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var o in r=r.getChildContext())if(!(o in e))throw Error(i(108,G(t)||"Unknown",o));return a({},n,r)}function wa(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||da,ma=pa.current,fa(pa,e),fa(ha,ha.current),!0}function ka(e,t,n){var r=e.stateNode;if(!r)throw Error(i(169));n?(e=xa(e,t,ma),r.__reactInternalMemoizedMergedChildContext=e,la(ha),la(pa),fa(pa,e)):la(ha),fa(ha,n)}var Sa=null,_a=null,Na=o.unstable_runWithPriority,Ea=o.unstable_scheduleCallback,Ca=o.unstable_cancelCallback,Ta=o.unstable_shouldYield,Ia=o.unstable_requestPaint,Oa=o.unstable_now,Aa=o.unstable_getCurrentPriorityLevel,Da=o.unstable_ImmediatePriority,Ma=o.unstable_UserBlockingPriority,Ra=o.unstable_NormalPriority,Pa=o.unstable_LowPriority,ja=o.unstable_IdlePriority,Fa={},La=void 0!==Ia?Ia:function(){},Ba=null,za=null,Za=!1,Va=Oa(),Ua=1e4>Va?Oa:function(){return Oa()-Va};function qa(){switch(Aa()){case Da:return 99;case Ma:return 98;case Ra:return 97;case Pa:return 96;case ja:return 95;default:throw Error(i(332))}}function Wa(e){switch(e){case 99:return Da;case 98:return Ma;case 97:return Ra;case 96:return Pa;case 95:return ja;default:throw Error(i(332))}}function Ha(e,t){return e=Wa(e),Na(e,t)}function Ga(e,t,n){return e=Wa(e),Ea(e,t,n)}function Ka(){if(null!==za){var e=za;za=null,Ca(e)}Xa()}function Xa(){if(!Za&&null!==Ba){Za=!0;var e=0;try{var t=Ba;Ha(99,(function(){for(;e<t.length;e++){var n=t[e];do{n=n(!0)}while(null!==n)}})),Ba=null}catch(n){throw null!==Ba&&(Ba=Ba.slice(e+1)),Ea(Da,Ka),n}finally{Za=!1}}}var Ya=w.ReactCurrentBatchConfig;function $a(e,t){if(e&&e.defaultProps){for(var n in t=a({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var Ja=ca(null),Qa=null,eo=null,to=null;function no(){to=eo=Qa=null}function ro(e){var t=Ja.current;la(Ja),e.type._context._currentValue=t}function ao(e,t){for(;null!==e;){var n=e.alternate;if((e.childLanes&t)===t){if(null===n||(n.childLanes&t)===t)break;n.childLanes|=t}else e.childLanes|=t,null!==n&&(n.childLanes|=t);e=e.return}}function oo(e,t){Qa=e,to=eo=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(Fi=!0),e.firstContext=null)}function io(e,t){if(to!==e&&!1!==t&&0!==t)if("number"===typeof t&&1073741823!==t||(to=e,t=1073741823),t={context:e,observedBits:t,next:null},null===eo){if(null===Qa)throw Error(i(308));eo=t,Qa.dependencies={lanes:0,firstContext:t,responders:null}}else eo=eo.next=t;return e._currentValue}var so=!1;function uo(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null},effects:null}}function co(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function lo(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function fo(e,t){if(null!==(e=e.updateQueue)){var n=(e=e.shared).pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}}function po(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var a=null,o=null;if(null!==(n=n.firstBaseUpdate)){do{var i={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===o?a=o=i:o=o.next=i,n=n.next}while(null!==n);null===o?a=o=t:o=o.next=t}else a=o=t;return n={baseState:r.baseState,firstBaseUpdate:a,lastBaseUpdate:o,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function ho(e,t,n,r){var o=e.updateQueue;so=!1;var i=o.firstBaseUpdate,s=o.lastBaseUpdate,u=o.shared.pending;if(null!==u){o.shared.pending=null;var c=u,l=c.next;c.next=null,null===s?i=l:s.next=l,s=c;var f=e.alternate;if(null!==f){var d=(f=f.updateQueue).lastBaseUpdate;d!==s&&(null===d?f.firstBaseUpdate=l:d.next=l,f.lastBaseUpdate=c)}}if(null!==i){for(d=o.baseState,s=0,f=l=c=null;;){u=i.lane;var p=i.eventTime;if((r&u)===u){null!==f&&(f=f.next={eventTime:p,lane:0,tag:i.tag,payload:i.payload,callback:i.callback,next:null});e:{var h=e,m=i;switch(u=t,p=n,m.tag){case 1:if("function"===typeof(h=m.payload)){d=h.call(p,d,u);break e}d=h;break e;case 3:h.flags=-4097&h.flags|64;case 0:if(null===(u="function"===typeof(h=m.payload)?h.call(p,d,u):h)||void 0===u)break e;d=a({},d,u);break e;case 2:so=!0}}null!==i.callback&&(e.flags|=32,null===(u=o.effects)?o.effects=[i]:u.push(i))}else p={eventTime:p,lane:u,tag:i.tag,payload:i.payload,callback:i.callback,next:null},null===f?(l=f=p,c=d):f=f.next=p,s|=u;if(null===(i=i.next)){if(null===(u=o.shared.pending))break;i=u.next,u.next=null,o.lastBaseUpdate=u,o.shared.pending=null}}null===f&&(c=d),o.baseState=c,o.firstBaseUpdate=l,o.lastBaseUpdate=f,Zs|=s,e.lanes=s,e.memoizedState=d}}function mo(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],a=r.callback;if(null!==a){if(r.callback=null,r=n,"function"!==typeof a)throw Error(i(191,a));a.call(r)}}}var vo=(new r.Component).refs;function go(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:a({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var yo={isMounted:function(e){return!!(e=e._reactInternals)&&Ye(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=du(),a=pu(e),o=lo(r,a);o.payload=t,void 0!==n&&null!==n&&(o.callback=n),fo(e,o),hu(e,a,r)},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=du(),a=pu(e),o=lo(r,a);o.tag=1,o.payload=t,void 0!==n&&null!==n&&(o.callback=n),fo(e,o),hu(e,a,r)},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=du(),r=pu(e),a=lo(n,r);a.tag=2,void 0!==t&&null!==t&&(a.callback=t),fo(e,a),hu(e,r,n)}};function bo(e,t,n,r,a,o,i){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,o,i):!t.prototype||!t.prototype.isPureReactComponent||(!dr(n,r)||!dr(a,o))}function xo(e,t,n){var r=!1,a=da,o=t.contextType;return"object"===typeof o&&null!==o?o=io(o):(a=ga(t)?ma:pa.current,o=(r=null!==(r=t.contextTypes)&&void 0!==r)?va(e,a):da),t=new t(n,o),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=yo,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=o),t}function wo(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&yo.enqueueReplaceState(t,t.state,null)}function ko(e,t,n,r){var a=e.stateNode;a.props=n,a.state=e.memoizedState,a.refs=vo,uo(e);var o=t.contextType;"object"===typeof o&&null!==o?a.context=io(o):(o=ga(t)?ma:pa.current,a.context=va(e,o)),ho(e,n,a,r),a.state=e.memoizedState,"function"===typeof(o=t.getDerivedStateFromProps)&&(go(e,t,o,n),a.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof a.getSnapshotBeforeUpdate||"function"!==typeof a.UNSAFE_componentWillMount&&"function"!==typeof a.componentWillMount||(t=a.state,"function"===typeof a.componentWillMount&&a.componentWillMount(),"function"===typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount(),t!==a.state&&yo.enqueueReplaceState(a,a.state,null),ho(e,n,a,r),a.state=e.memoizedState),"function"===typeof a.componentDidMount&&(e.flags|=4)}var So=Array.isArray;function _o(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(i(309));var r=n.stateNode}if(!r)throw Error(i(147,e));var a=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===a?t.ref:(t=function(e){var t=r.refs;t===vo&&(t=r.refs={}),null===e?delete t[a]:t[a]=e},t._stringRef=a,t)}if("string"!==typeof e)throw Error(i(284));if(!n._owner)throw Error(i(290,e))}return e}function No(e,t){if("textarea"!==e.type)throw Error(i(31,"[object Object]"===Object.prototype.toString.call(t)?"object with keys {"+Object.keys(t).join(", ")+"}":t))}function Eo(e){function t(t,n){if(e){var r=t.lastEffect;null!==r?(r.nextEffect=n,t.lastEffect=n):t.firstEffect=t.lastEffect=n,n.nextEffect=null,n.flags=8}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function a(e,t){return(e=Hu(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags=2,n):r:(t.flags=2,n):n}function s(t){return e&&null===t.alternate&&(t.flags=2),t}function u(e,t,n,r){return null===t||6!==t.tag?((t=Yu(n,e.mode,r)).return=e,t):((t=a(t,n)).return=e,t)}function c(e,t,n,r){return null!==t&&t.elementType===n.type?((r=a(t,n.props)).ref=_o(e,t,n),r.return=e,r):((r=Gu(n.type,n.key,n.props,null,e.mode,r)).ref=_o(e,t,n),r.return=e,r)}function l(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=$u(n,e.mode,r)).return=e,t):((t=a(t,n.children||[])).return=e,t)}function f(e,t,n,r,o){return null===t||7!==t.tag?((t=Ku(n,e.mode,r,o)).return=e,t):((t=a(t,n)).return=e,t)}function d(e,t,n){if("string"===typeof t||"number"===typeof t)return(t=Yu(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case k:return(n=Gu(t.type,t.key,t.props,null,e.mode,n)).ref=_o(e,null,t),n.return=e,n;case S:return(t=$u(t,e.mode,n)).return=e,t}if(So(t)||V(t))return(t=Ku(t,e.mode,n,null)).return=e,t;No(e,t)}return null}function p(e,t,n,r){var a=null!==t?t.key:null;if("string"===typeof n||"number"===typeof n)return null!==a?null:u(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case k:return n.key===a?n.type===_?f(e,t,n.props.children,r,a):c(e,t,n,r):null;case S:return n.key===a?l(e,t,n,r):null}if(So(n)||V(n))return null!==a?null:f(e,t,n,r,null);No(e,n)}return null}function h(e,t,n,r,a){if("string"===typeof r||"number"===typeof r)return u(t,e=e.get(n)||null,""+r,a);if("object"===typeof r&&null!==r){switch(r.$$typeof){case k:return e=e.get(null===r.key?n:r.key)||null,r.type===_?f(t,e,r.props.children,a,r.key):c(t,e,r,a);case S:return l(t,e=e.get(null===r.key?n:r.key)||null,r,a)}if(So(r)||V(r))return f(t,e=e.get(n)||null,r,a,null);No(t,r)}return null}function m(a,i,s,u){for(var c=null,l=null,f=i,m=i=0,v=null;null!==f&&m<s.length;m++){f.index>m?(v=f,f=null):v=f.sibling;var g=p(a,f,s[m],u);if(null===g){null===f&&(f=v);break}e&&f&&null===g.alternate&&t(a,f),i=o(g,i,m),null===l?c=g:l.sibling=g,l=g,f=v}if(m===s.length)return n(a,f),c;if(null===f){for(;m<s.length;m++)null!==(f=d(a,s[m],u))&&(i=o(f,i,m),null===l?c=f:l.sibling=f,l=f);return c}for(f=r(a,f);m<s.length;m++)null!==(v=h(f,a,m,s[m],u))&&(e&&null!==v.alternate&&f.delete(null===v.key?m:v.key),i=o(v,i,m),null===l?c=v:l.sibling=v,l=v);return e&&f.forEach((function(e){return t(a,e)})),c}function v(a,s,u,c){var l=V(u);if("function"!==typeof l)throw Error(i(150));if(null==(u=l.call(u)))throw Error(i(151));for(var f=l=null,m=s,v=s=0,g=null,y=u.next();null!==m&&!y.done;v++,y=u.next()){m.index>v?(g=m,m=null):g=m.sibling;var b=p(a,m,y.value,c);if(null===b){null===m&&(m=g);break}e&&m&&null===b.alternate&&t(a,m),s=o(b,s,v),null===f?l=b:f.sibling=b,f=b,m=g}if(y.done)return n(a,m),l;if(null===m){for(;!y.done;v++,y=u.next())null!==(y=d(a,y.value,c))&&(s=o(y,s,v),null===f?l=y:f.sibling=y,f=y);return l}for(m=r(a,m);!y.done;v++,y=u.next())null!==(y=h(m,a,v,y.value,c))&&(e&&null!==y.alternate&&m.delete(null===y.key?v:y.key),s=o(y,s,v),null===f?l=y:f.sibling=y,f=y);return e&&m.forEach((function(e){return t(a,e)})),l}return function(e,r,o,u){var c="object"===typeof o&&null!==o&&o.type===_&&null===o.key;c&&(o=o.props.children);var l="object"===typeof o&&null!==o;if(l)switch(o.$$typeof){case k:e:{for(l=o.key,c=r;null!==c;){if(c.key===l){if(7===c.tag){if(o.type===_){n(e,c.sibling),(r=a(c,o.props.children)).return=e,e=r;break e}}else if(c.elementType===o.type){n(e,c.sibling),(r=a(c,o.props)).ref=_o(e,c,o),r.return=e,e=r;break e}n(e,c);break}t(e,c),c=c.sibling}o.type===_?((r=Ku(o.props.children,e.mode,u,o.key)).return=e,e=r):((u=Gu(o.type,o.key,o.props,null,e.mode,u)).ref=_o(e,r,o),u.return=e,e=u)}return s(e);case S:e:{for(c=o.key;null!==r;){if(r.key===c){if(4===r.tag&&r.stateNode.containerInfo===o.containerInfo&&r.stateNode.implementation===o.implementation){n(e,r.sibling),(r=a(r,o.children||[])).return=e,e=r;break e}n(e,r);break}t(e,r),r=r.sibling}(r=$u(o,e.mode,u)).return=e,e=r}return s(e)}if("string"===typeof o||"number"===typeof o)return o=""+o,null!==r&&6===r.tag?(n(e,r.sibling),(r=a(r,o)).return=e,e=r):(n(e,r),(r=Yu(o,e.mode,u)).return=e,e=r),s(e);if(So(o))return m(e,r,o,u);if(V(o))return v(e,r,o,u);if(l&&No(e,o),"undefined"===typeof o&&!c)switch(e.tag){case 1:case 22:case 0:case 11:case 15:throw Error(i(152,G(e.type)||"Component"))}return n(e,r)}}var Co=Eo(!0),To=Eo(!1),Io={},Oo=ca(Io),Ao=ca(Io),Do=ca(Io);function Mo(e){if(e===Io)throw Error(i(174));return e}function Ro(e,t){switch(fa(Do,t),fa(Ao,e),fa(Oo,Io),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:he(null,"");break;default:t=he(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}la(Oo),fa(Oo,t)}function Po(){la(Oo),la(Ao),la(Do)}function jo(e){Mo(Do.current);var t=Mo(Oo.current),n=he(t,e.type);t!==n&&(fa(Ao,e),fa(Oo,n))}function Fo(e){Ao.current===e&&(la(Oo),la(Ao))}var Lo=ca(0);function Bo(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(64&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var zo=null,Zo=null,Vo=!1;function Uo(e,t){var n=qu(5,null,null,0);n.elementType="DELETED",n.type="DELETED",n.stateNode=t,n.return=e,n.flags=8,null!==e.lastEffect?(e.lastEffect.nextEffect=n,e.lastEffect=n):e.firstEffect=e.lastEffect=n}function qo(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,!0);default:return!1}}function Wo(e){if(Vo){var t=Zo;if(t){var n=t;if(!qo(e,t)){if(!(t=Kr(n.nextSibling))||!qo(e,t))return e.flags=-1025&e.flags|2,Vo=!1,void(zo=e);Uo(zo,n)}zo=e,Zo=Kr(t.firstChild)}else e.flags=-1025&e.flags|2,Vo=!1,zo=e}}function Ho(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;zo=e}function Go(e){if(e!==zo)return!1;if(!Vo)return Ho(e),Vo=!0,!1;var t=e.type;if(5!==e.tag||"head"!==t&&"body"!==t&&!qr(t,e.memoizedProps))for(t=Zo;t;)Uo(e,t),t=Kr(t.nextSibling);if(Ho(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(i(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){Zo=Kr(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}Zo=null}}else Zo=zo?Kr(e.stateNode.nextSibling):null;return!0}function Ko(){Zo=zo=null,Vo=!1}var Xo=[];function Yo(){for(var e=0;e<Xo.length;e++)Xo[e]._workInProgressVersionPrimary=null;Xo.length=0}var $o=w.ReactCurrentDispatcher,Jo=w.ReactCurrentBatchConfig,Qo=0,ei=null,ti=null,ni=null,ri=!1,ai=!1;function oi(){throw Error(i(321))}function ii(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!lr(e[n],t[n]))return!1;return!0}function si(e,t,n,r,a,o){if(Qo=o,ei=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,$o.current=null===e||null===e.memoizedState?Mi:Ri,e=n(r,a),ai){o=0;do{if(ai=!1,!(25>o))throw Error(i(301));o+=1,ni=ti=null,t.updateQueue=null,$o.current=Pi,e=n(r,a)}while(ai)}if($o.current=Di,t=null!==ti&&null!==ti.next,Qo=0,ni=ti=ei=null,ri=!1,t)throw Error(i(300));return e}function ui(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===ni?ei.memoizedState=ni=e:ni=ni.next=e,ni}function ci(){if(null===ti){var e=ei.alternate;e=null!==e?e.memoizedState:null}else e=ti.next;var t=null===ni?ei.memoizedState:ni.next;if(null!==t)ni=t,ti=e;else{if(null===e)throw Error(i(310));e={memoizedState:(ti=e).memoizedState,baseState:ti.baseState,baseQueue:ti.baseQueue,queue:ti.queue,next:null},null===ni?ei.memoizedState=ni=e:ni=ni.next=e}return ni}function li(e,t){return"function"===typeof t?t(e):t}function fi(e){var t=ci(),n=t.queue;if(null===n)throw Error(i(311));n.lastRenderedReducer=e;var r=ti,a=r.baseQueue,o=n.pending;if(null!==o){if(null!==a){var s=a.next;a.next=o.next,o.next=s}r.baseQueue=a=o,n.pending=null}if(null!==a){a=a.next,r=r.baseState;var u=s=o=null,c=a;do{var l=c.lane;if((Qo&l)===l)null!==u&&(u=u.next={lane:0,action:c.action,eagerReducer:c.eagerReducer,eagerState:c.eagerState,next:null}),r=c.eagerReducer===e?c.eagerState:e(r,c.action);else{var f={lane:l,action:c.action,eagerReducer:c.eagerReducer,eagerState:c.eagerState,next:null};null===u?(s=u=f,o=r):u=u.next=f,ei.lanes|=l,Zs|=l}c=c.next}while(null!==c&&c!==a);null===u?o=r:u.next=s,lr(r,t.memoizedState)||(Fi=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=u,n.lastRenderedState=r}return[t.memoizedState,n.dispatch]}function di(e){var t=ci(),n=t.queue;if(null===n)throw Error(i(311));n.lastRenderedReducer=e;var r=n.dispatch,a=n.pending,o=t.memoizedState;if(null!==a){n.pending=null;var s=a=a.next;do{o=e(o,s.action),s=s.next}while(s!==a);lr(o,t.memoizedState)||(Fi=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function pi(e,t,n){var r=t._getVersion;r=r(t._source);var a=t._workInProgressVersionPrimary;if(null!==a?e=a===r:(e=e.mutableReadLanes,(e=(Qo&e)===e)&&(t._workInProgressVersionPrimary=r,Xo.push(t))),e)return n(t._source);throw Xo.push(t),Error(i(350))}function hi(e,t,n,r){var a=Ms;if(null===a)throw Error(i(349));var o=t._getVersion,s=o(t._source),u=$o.current,c=u.useState((function(){return pi(a,t,n)})),l=c[1],f=c[0];c=ni;var d=e.memoizedState,p=d.refs,h=p.getSnapshot,m=d.source;d=d.subscribe;var v=ei;return e.memoizedState={refs:p,source:t,subscribe:r},u.useEffect((function(){p.getSnapshot=n,p.setSnapshot=l;var e=o(t._source);if(!lr(s,e)){e=n(t._source),lr(f,e)||(l(e),e=pu(v),a.mutableReadLanes|=e&a.pendingLanes),e=a.mutableReadLanes,a.entangledLanes|=e;for(var r=a.entanglements,i=e;0<i;){var u=31-qt(i),c=1<<u;r[u]|=e,i&=~c}}}),[n,t,r]),u.useEffect((function(){return r(t._source,(function(){var e=p.getSnapshot,n=p.setSnapshot;try{n(e(t._source));var r=pu(v);a.mutableReadLanes|=r&a.pendingLanes}catch(o){n((function(){throw o}))}}))}),[t,r]),lr(h,n)&&lr(m,t)&&lr(d,r)||((e={pending:null,dispatch:null,lastRenderedReducer:li,lastRenderedState:f}).dispatch=l=Ai.bind(null,ei,e),c.queue=e,c.baseQueue=null,f=pi(a,t,n),c.memoizedState=c.baseState=f),f}function mi(e,t,n){return hi(ci(),e,t,n)}function vi(e){var t=ui();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e=(e=t.queue={pending:null,dispatch:null,lastRenderedReducer:li,lastRenderedState:e}).dispatch=Ai.bind(null,ei,e),[t.memoizedState,e]}function gi(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=ei.updateQueue)?(t={lastEffect:null},ei.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function yi(e){return e={current:e},ui().memoizedState=e}function bi(){return ci().memoizedState}function xi(e,t,n,r){var a=ui();ei.flags|=e,a.memoizedState=gi(1|t,n,void 0,void 0===r?null:r)}function wi(e,t,n,r){var a=ci();r=void 0===r?null:r;var o=void 0;if(null!==ti){var i=ti.memoizedState;if(o=i.destroy,null!==r&&ii(r,i.deps))return void gi(t,n,o,r)}ei.flags|=e,a.memoizedState=gi(1|t,n,o,r)}function ki(e,t){return xi(516,4,e,t)}function Si(e,t){return wi(516,4,e,t)}function _i(e,t){return wi(4,2,e,t)}function Ni(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Ei(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,wi(4,2,Ni.bind(null,t,e),n)}function Ci(){}function Ti(e,t){var n=ci();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ii(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Ii(e,t){var n=ci();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ii(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Oi(e,t){var n=qa();Ha(98>n?98:n,(function(){e(!0)})),Ha(97<n?97:n,(function(){var n=Jo.transition;Jo.transition=1;try{e(!1),t()}finally{Jo.transition=n}}))}function Ai(e,t,n){var r=du(),a=pu(e),o={lane:a,action:n,eagerReducer:null,eagerState:null,next:null},i=t.pending;if(null===i?o.next=o:(o.next=i.next,i.next=o),t.pending=o,i=e.alternate,e===ei||null!==i&&i===ei)ai=ri=!0;else{if(0===e.lanes&&(null===i||0===i.lanes)&&null!==(i=t.lastRenderedReducer))try{var s=t.lastRenderedState,u=i(s,n);if(o.eagerReducer=i,o.eagerState=u,lr(u,s))return}catch(c){}hu(e,a,r)}}var Di={readContext:io,useCallback:oi,useContext:oi,useEffect:oi,useImperativeHandle:oi,useLayoutEffect:oi,useMemo:oi,useReducer:oi,useRef:oi,useState:oi,useDebugValue:oi,useDeferredValue:oi,useTransition:oi,useMutableSource:oi,useOpaqueIdentifier:oi,unstable_isNewReconciler:!1},Mi={readContext:io,useCallback:function(e,t){return ui().memoizedState=[e,void 0===t?null:t],e},useContext:io,useEffect:ki,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,xi(4,2,Ni.bind(null,t,e),n)},useLayoutEffect:function(e,t){return xi(4,2,e,t)},useMemo:function(e,t){var n=ui();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=ui();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e=(e=r.queue={pending:null,dispatch:null,lastRenderedReducer:e,lastRenderedState:t}).dispatch=Ai.bind(null,ei,e),[r.memoizedState,e]},useRef:yi,useState:vi,useDebugValue:Ci,useDeferredValue:function(e){var t=vi(e),n=t[0],r=t[1];return ki((function(){var t=Jo.transition;Jo.transition=1;try{r(e)}finally{Jo.transition=t}}),[e]),n},useTransition:function(){var e=vi(!1),t=e[0];return yi(e=Oi.bind(null,e[1])),[e,t]},useMutableSource:function(e,t,n){var r=ui();return r.memoizedState={refs:{getSnapshot:t,setSnapshot:null},source:e,subscribe:n},hi(r,e,t,n)},useOpaqueIdentifier:function(){if(Vo){var e=!1,t=function(e){return{$$typeof:P,toString:e,valueOf:e}}((function(){throw e||(e=!0,n("r:"+(Yr++).toString(36))),Error(i(355))})),n=vi(t)[1];return 0===(2&ei.mode)&&(ei.flags|=516,gi(5,(function(){n("r:"+(Yr++).toString(36))}),void 0,null)),t}return vi(t="r:"+(Yr++).toString(36)),t},unstable_isNewReconciler:!1},Ri={readContext:io,useCallback:Ti,useContext:io,useEffect:Si,useImperativeHandle:Ei,useLayoutEffect:_i,useMemo:Ii,useReducer:fi,useRef:bi,useState:function(){return fi(li)},useDebugValue:Ci,useDeferredValue:function(e){var t=fi(li),n=t[0],r=t[1];return Si((function(){var t=Jo.transition;Jo.transition=1;try{r(e)}finally{Jo.transition=t}}),[e]),n},useTransition:function(){var e=fi(li)[0];return[bi().current,e]},useMutableSource:mi,useOpaqueIdentifier:function(){return fi(li)[0]},unstable_isNewReconciler:!1},Pi={readContext:io,useCallback:Ti,useContext:io,useEffect:Si,useImperativeHandle:Ei,useLayoutEffect:_i,useMemo:Ii,useReducer:di,useRef:bi,useState:function(){return di(li)},useDebugValue:Ci,useDeferredValue:function(e){var t=di(li),n=t[0],r=t[1];return Si((function(){var t=Jo.transition;Jo.transition=1;try{r(e)}finally{Jo.transition=t}}),[e]),n},useTransition:function(){var e=di(li)[0];return[bi().current,e]},useMutableSource:mi,useOpaqueIdentifier:function(){return di(li)[0]},unstable_isNewReconciler:!1},ji=w.ReactCurrentOwner,Fi=!1;function Li(e,t,n,r){t.child=null===e?To(t,null,n,r):Co(t,e.child,n,r)}function Bi(e,t,n,r,a){n=n.render;var o=t.ref;return oo(t,a),r=si(e,t,n,r,o,a),null===e||Fi?(t.flags|=1,Li(e,t,r,a),t.child):(t.updateQueue=e.updateQueue,t.flags&=-517,e.lanes&=~a,os(e,t,a))}function zi(e,t,n,r,a,o){if(null===e){var i=n.type;return"function"!==typeof i||Wu(i)||void 0!==i.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Gu(n.type,null,r,t,t.mode,o)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=i,Zi(e,t,i,r,a,o))}return i=e.child,0===(a&o)&&(a=i.memoizedProps,(n=null!==(n=n.compare)?n:dr)(a,r)&&e.ref===t.ref)?os(e,t,o):(t.flags|=1,(e=Hu(i,r)).ref=t.ref,e.return=t,t.child=e)}function Zi(e,t,n,r,a,o){if(null!==e&&dr(e.memoizedProps,r)&&e.ref===t.ref){if(Fi=!1,0===(o&a))return t.lanes=e.lanes,os(e,t,o);0!==(16384&e.flags)&&(Fi=!0)}return qi(e,t,n,r,o)}function Vi(e,t,n){var r=t.pendingProps,a=r.children,o=null!==e?e.memoizedState:null;if("hidden"===r.mode||"unstable-defer-without-hiding"===r.mode)if(0===(4&t.mode))t.memoizedState={baseLanes:0},ku(t,n);else{if(0===(1073741824&n))return e=null!==o?o.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e},ku(t,e),null;t.memoizedState={baseLanes:0},ku(t,null!==o?o.baseLanes:n)}else null!==o?(r=o.baseLanes|n,t.memoizedState=null):r=n,ku(t,r);return Li(e,t,a,n),t.child}function Ui(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=128)}function qi(e,t,n,r,a){var o=ga(n)?ma:pa.current;return o=va(t,o),oo(t,a),n=si(e,t,n,r,o,a),null===e||Fi?(t.flags|=1,Li(e,t,n,a),t.child):(t.updateQueue=e.updateQueue,t.flags&=-517,e.lanes&=~a,os(e,t,a))}function Wi(e,t,n,r,a){if(ga(n)){var o=!0;wa(t)}else o=!1;if(oo(t,a),null===t.stateNode)null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),xo(t,n,r),ko(t,n,r,a),r=!0;else if(null===e){var i=t.stateNode,s=t.memoizedProps;i.props=s;var u=i.context,c=n.contextType;"object"===typeof c&&null!==c?c=io(c):c=va(t,c=ga(n)?ma:pa.current);var l=n.getDerivedStateFromProps,f="function"===typeof l||"function"===typeof i.getSnapshotBeforeUpdate;f||"function"!==typeof i.UNSAFE_componentWillReceiveProps&&"function"!==typeof i.componentWillReceiveProps||(s!==r||u!==c)&&wo(t,i,r,c),so=!1;var d=t.memoizedState;i.state=d,ho(t,r,i,a),u=t.memoizedState,s!==r||d!==u||ha.current||so?("function"===typeof l&&(go(t,n,l,r),u=t.memoizedState),(s=so||bo(t,n,s,r,d,u,c))?(f||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||("function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount()),"function"===typeof i.componentDidMount&&(t.flags|=4)):("function"===typeof i.componentDidMount&&(t.flags|=4),t.memoizedProps=r,t.memoizedState=u),i.props=r,i.state=u,i.context=c,r=s):("function"===typeof i.componentDidMount&&(t.flags|=4),r=!1)}else{i=t.stateNode,co(e,t),s=t.memoizedProps,c=t.type===t.elementType?s:$a(t.type,s),i.props=c,f=t.pendingProps,d=i.context,"object"===typeof(u=n.contextType)&&null!==u?u=io(u):u=va(t,u=ga(n)?ma:pa.current);var p=n.getDerivedStateFromProps;(l="function"===typeof p||"function"===typeof i.getSnapshotBeforeUpdate)||"function"!==typeof i.UNSAFE_componentWillReceiveProps&&"function"!==typeof i.componentWillReceiveProps||(s!==f||d!==u)&&wo(t,i,r,u),so=!1,d=t.memoizedState,i.state=d,ho(t,r,i,a);var h=t.memoizedState;s!==f||d!==h||ha.current||so?("function"===typeof p&&(go(t,n,p,r),h=t.memoizedState),(c=so||bo(t,n,c,r,d,h,u))?(l||"function"!==typeof i.UNSAFE_componentWillUpdate&&"function"!==typeof i.componentWillUpdate||("function"===typeof i.componentWillUpdate&&i.componentWillUpdate(r,h,u),"function"===typeof i.UNSAFE_componentWillUpdate&&i.UNSAFE_componentWillUpdate(r,h,u)),"function"===typeof i.componentDidUpdate&&(t.flags|=4),"function"===typeof i.getSnapshotBeforeUpdate&&(t.flags|=256)):("function"!==typeof i.componentDidUpdate||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof i.getSnapshotBeforeUpdate||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=256),t.memoizedProps=r,t.memoizedState=h),i.props=r,i.state=h,i.context=u,r=c):("function"!==typeof i.componentDidUpdate||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof i.getSnapshotBeforeUpdate||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=256),r=!1)}return Hi(e,t,n,r,o,a)}function Hi(e,t,n,r,a,o){Ui(e,t);var i=0!==(64&t.flags);if(!r&&!i)return a&&ka(t,n,!1),os(e,t,o);r=t.stateNode,ji.current=t;var s=i&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&i?(t.child=Co(t,e.child,null,o),t.child=Co(t,null,s,o)):Li(e,t,s,o),t.memoizedState=r.state,a&&ka(t,n,!0),t.child}function Gi(e){var t=e.stateNode;t.pendingContext?ba(0,t.pendingContext,t.pendingContext!==t.context):t.context&&ba(0,t.context,!1),Ro(e,t.containerInfo)}var Ki,Xi,Yi,$i={dehydrated:null,retryLane:0};function Ji(e,t,n){var r,a=t.pendingProps,o=Lo.current,i=!1;return(r=0!==(64&t.flags))||(r=(null===e||null!==e.memoizedState)&&0!==(2&o)),r?(i=!0,t.flags&=-65):null!==e&&null===e.memoizedState||void 0===a.fallback||!0===a.unstable_avoidThisFallback||(o|=1),fa(Lo,1&o),null===e?(void 0!==a.fallback&&Wo(t),e=a.children,o=a.fallback,i?(e=Qi(t,e,o,n),t.child.memoizedState={baseLanes:n},t.memoizedState=$i,e):"number"===typeof a.unstable_expectedLoadTime?(e=Qi(t,e,o,n),t.child.memoizedState={baseLanes:n},t.memoizedState=$i,t.lanes=33554432,e):((n=Xu({mode:"visible",children:e},t.mode,n,null)).return=t,t.child=n)):(e.memoizedState,i?(a=ts(e,t,a.children,a.fallback,n),i=t.child,o=e.child.memoizedState,i.memoizedState=null===o?{baseLanes:n}:{baseLanes:o.baseLanes|n},i.childLanes=e.childLanes&~n,t.memoizedState=$i,a):(n=es(e,t,a.children,n),t.memoizedState=null,n))}function Qi(e,t,n,r){var a=e.mode,o=e.child;return t={mode:"hidden",children:t},0===(2&a)&&null!==o?(o.childLanes=0,o.pendingProps=t):o=Xu(t,a,0,null),n=Ku(n,a,r,null),o.return=e,n.return=e,o.sibling=n,e.child=o,n}function es(e,t,n,r){var a=e.child;return e=a.sibling,n=Hu(a,{mode:"visible",children:n}),0===(2&t.mode)&&(n.lanes=r),n.return=t,n.sibling=null,null!==e&&(e.nextEffect=null,e.flags=8,t.firstEffect=t.lastEffect=e),t.child=n}function ts(e,t,n,r,a){var o=t.mode,i=e.child;e=i.sibling;var s={mode:"hidden",children:n};return 0===(2&o)&&t.child!==i?((n=t.child).childLanes=0,n.pendingProps=s,null!==(i=n.lastEffect)?(t.firstEffect=n.firstEffect,t.lastEffect=i,i.nextEffect=null):t.firstEffect=t.lastEffect=null):n=Hu(i,s),null!==e?r=Hu(e,r):(r=Ku(r,o,a,null)).flags|=2,r.return=t,n.return=t,n.sibling=r,t.child=n,r}function ns(e,t){e.lanes|=t;var n=e.alternate;null!==n&&(n.lanes|=t),ao(e.return,t)}function rs(e,t,n,r,a,o){var i=e.memoizedState;null===i?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:a,lastEffect:o}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=a,i.lastEffect=o)}function as(e,t,n){var r=t.pendingProps,a=r.revealOrder,o=r.tail;if(Li(e,t,r.children,n),0!==(2&(r=Lo.current)))r=1&r|2,t.flags|=64;else{if(null!==e&&0!==(64&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&ns(e,n);else if(19===e.tag)ns(e,n);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(fa(Lo,r),0===(2&t.mode))t.memoizedState=null;else switch(a){case"forwards":for(n=t.child,a=null;null!==n;)null!==(e=n.alternate)&&null===Bo(e)&&(a=n),n=n.sibling;null===(n=a)?(a=t.child,t.child=null):(a=n.sibling,n.sibling=null),rs(t,!1,a,n,o,t.lastEffect);break;case"backwards":for(n=null,a=t.child,t.child=null;null!==a;){if(null!==(e=a.alternate)&&null===Bo(e)){t.child=a;break}e=a.sibling,a.sibling=n,n=a,a=e}rs(t,!0,n,null,o,t.lastEffect);break;case"together":rs(t,!1,null,null,void 0,t.lastEffect);break;default:t.memoizedState=null}return t.child}function os(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Zs|=t.lanes,0!==(n&t.childLanes)){if(null!==e&&t.child!==e.child)throw Error(i(153));if(null!==t.child){for(n=Hu(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Hu(e,e.pendingProps)).return=t;n.sibling=null}return t.child}return null}function is(e,t){if(!Vo)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function ss(e,t,n){var r=t.pendingProps;switch(t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:case 17:return ga(t.type)&&ya(),null;case 3:return Po(),la(ha),la(pa),Yo(),(r=t.stateNode).pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(Go(t)?t.flags|=4:r.hydrate||(t.flags|=256)),null;case 5:Fo(t);var o=Mo(Do.current);if(n=t.type,null!==e&&null!=t.stateNode)Xi(e,t,n,r),e.ref!==t.ref&&(t.flags|=128);else{if(!r){if(null===t.stateNode)throw Error(i(166));return null}if(e=Mo(Oo.current),Go(t)){r=t.stateNode,n=t.type;var s=t.memoizedProps;switch(r[Jr]=t,r[Qr]=s,n){case"dialog":Or("cancel",r),Or("close",r);break;case"iframe":case"object":case"embed":Or("load",r);break;case"video":case"audio":for(e=0;e<Er.length;e++)Or(Er[e],r);break;case"source":Or("error",r);break;case"img":case"image":case"link":Or("error",r),Or("load",r);break;case"details":Or("toggle",r);break;case"input":ee(r,s),Or("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Or("invalid",r);break;case"textarea":ue(r,s),Or("invalid",r)}for(var c in _e(n,s),e=null,s)s.hasOwnProperty(c)&&(o=s[c],"children"===c?"string"===typeof o?r.textContent!==o&&(e=["children",o]):"number"===typeof o&&r.textContent!==""+o&&(e=["children",""+o]):u.hasOwnProperty(c)&&null!=o&&"onScroll"===c&&Or("scroll",r));switch(n){case"input":Y(r),re(r,s,!0);break;case"textarea":Y(r),le(r);break;case"select":case"option":break;default:"function"===typeof s.onClick&&(r.onclick=zr)}r=e,t.updateQueue=r,null!==r&&(t.flags|=4)}else{switch(c=9===o.nodeType?o:o.ownerDocument,e===fe&&(e=pe(n)),e===fe?"script"===n?((e=c.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=c.createElement(n,{is:r.is}):(e=c.createElement(n),"select"===n&&(c=e,r.multiple?c.multiple=!0:r.size&&(c.size=r.size))):e=c.createElementNS(e,n),e[Jr]=t,e[Qr]=r,Ki(e,t),t.stateNode=e,c=Ne(n,r),n){case"dialog":Or("cancel",e),Or("close",e),o=r;break;case"iframe":case"object":case"embed":Or("load",e),o=r;break;case"video":case"audio":for(o=0;o<Er.length;o++)Or(Er[o],e);o=r;break;case"source":Or("error",e),o=r;break;case"img":case"image":case"link":Or("error",e),Or("load",e),o=r;break;case"details":Or("toggle",e),o=r;break;case"input":ee(e,r),o=Q(e,r),Or("invalid",e);break;case"option":o=oe(e,r);break;case"select":e._wrapperState={wasMultiple:!!r.multiple},o=a({},r,{value:void 0}),Or("invalid",e);break;case"textarea":ue(e,r),o=se(e,r),Or("invalid",e);break;default:o=r}_e(n,o);var l=o;for(s in l)if(l.hasOwnProperty(s)){var f=l[s];"style"===s?ke(e,f):"dangerouslySetInnerHTML"===s?null!=(f=f?f.__html:void 0)&&ge(e,f):"children"===s?"string"===typeof f?("textarea"!==n||""!==f)&&ye(e,f):"number"===typeof f&&ye(e,""+f):"suppressContentEditableWarning"!==s&&"suppressHydrationWarning"!==s&&"autoFocus"!==s&&(u.hasOwnProperty(s)?null!=f&&"onScroll"===s&&Or("scroll",e):null!=f&&x(e,s,f,c))}switch(n){case"input":Y(e),re(e,r,!1);break;case"textarea":Y(e),le(e);break;case"option":null!=r.value&&e.setAttribute("value",""+K(r.value));break;case"select":e.multiple=!!r.multiple,null!=(s=r.value)?ie(e,!!r.multiple,s,!1):null!=r.defaultValue&&ie(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof o.onClick&&(e.onclick=zr)}Ur(n,r)&&(t.flags|=4)}null!==t.ref&&(t.flags|=128)}return null;case 6:if(e&&null!=t.stateNode)Yi(0,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(i(166));n=Mo(Do.current),Mo(Oo.current),Go(t)?(r=t.stateNode,n=t.memoizedProps,r[Jr]=t,r.nodeValue!==n&&(t.flags|=4)):((r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[Jr]=t,t.stateNode=r)}return null;case 13:return la(Lo),r=t.memoizedState,0!==(64&t.flags)?(t.lanes=n,t):(r=null!==r,n=!1,null===e?void 0!==t.memoizedProps.fallback&&Go(t):n=null!==e.memoizedState,r&&!n&&0!==(2&t.mode)&&(null===e&&!0!==t.memoizedProps.unstable_avoidThisFallback||0!==(1&Lo.current)?0===Ls&&(Ls=3):(0!==Ls&&3!==Ls||(Ls=4),null===Ms||0===(134217727&Zs)&&0===(134217727&Vs)||yu(Ms,Ps))),(r||n)&&(t.flags|=4),null);case 4:return Po(),null===e&&Dr(t.stateNode.containerInfo),null;case 10:return ro(t),null;case 19:if(la(Lo),null===(r=t.memoizedState))return null;if(s=0!==(64&t.flags),null===(c=r.rendering))if(s)is(r,!1);else{if(0!==Ls||null!==e&&0!==(64&e.flags))for(e=t.child;null!==e;){if(null!==(c=Bo(e))){for(t.flags|=64,is(r,!1),null!==(s=c.updateQueue)&&(t.updateQueue=s,t.flags|=4),null===r.lastEffect&&(t.firstEffect=null),t.lastEffect=r.lastEffect,r=n,n=t.child;null!==n;)e=r,(s=n).flags&=2,s.nextEffect=null,s.firstEffect=null,s.lastEffect=null,null===(c=s.alternate)?(s.childLanes=0,s.lanes=e,s.child=null,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=c.childLanes,s.lanes=c.lanes,s.child=c.child,s.memoizedProps=c.memoizedProps,s.memoizedState=c.memoizedState,s.updateQueue=c.updateQueue,s.type=c.type,e=c.dependencies,s.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return fa(Lo,1&Lo.current|2),t.child}e=e.sibling}null!==r.tail&&Ua()>Hs&&(t.flags|=64,s=!0,is(r,!1),t.lanes=33554432)}else{if(!s)if(null!==(e=Bo(c))){if(t.flags|=64,s=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),is(r,!0),null===r.tail&&"hidden"===r.tailMode&&!c.alternate&&!Vo)return null!==(t=t.lastEffect=r.lastEffect)&&(t.nextEffect=null),null}else 2*Ua()-r.renderingStartTime>Hs&&1073741824!==n&&(t.flags|=64,s=!0,is(r,!1),t.lanes=33554432);r.isBackwards?(c.sibling=t.child,t.child=c):(null!==(n=r.last)?n.sibling=c:t.child=c,r.last=c)}return null!==r.tail?(n=r.tail,r.rendering=n,r.tail=n.sibling,r.lastEffect=t.lastEffect,r.renderingStartTime=Ua(),n.sibling=null,t=Lo.current,fa(Lo,s?1&t|2:1&t),n):null;case 23:case 24:return Su(),null!==e&&null!==e.memoizedState!==(null!==t.memoizedState)&&"unstable-defer-without-hiding"!==r.mode&&(t.flags|=4),null}throw Error(i(156,t.tag))}function us(e){switch(e.tag){case 1:ga(e.type)&&ya();var t=e.flags;return 4096&t?(e.flags=-4097&t|64,e):null;case 3:if(Po(),la(ha),la(pa),Yo(),0!==(64&(t=e.flags)))throw Error(i(285));return e.flags=-4097&t|64,e;case 5:return Fo(e),null;case 13:return la(Lo),4096&(t=e.flags)?(e.flags=-4097&t|64,e):null;case 19:return la(Lo),null;case 4:return Po(),null;case 10:return ro(e),null;case 23:case 24:return Su(),null;default:return null}}function cs(e,t){try{var n="",r=t;do{n+=H(r),r=r.return}while(r);var a=n}catch(o){a="\nError generating stack: "+o.message+"\n"+o.stack}return{value:e,source:t,stack:a}}function ls(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}Ki=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Xi=function(e,t,n,r){var o=e.memoizedProps;if(o!==r){e=t.stateNode,Mo(Oo.current);var i,s=null;switch(n){case"input":o=Q(e,o),r=Q(e,r),s=[];break;case"option":o=oe(e,o),r=oe(e,r),s=[];break;case"select":o=a({},o,{value:void 0}),r=a({},r,{value:void 0}),s=[];break;case"textarea":o=se(e,o),r=se(e,r),s=[];break;default:"function"!==typeof o.onClick&&"function"===typeof r.onClick&&(e.onclick=zr)}for(f in _e(n,r),n=null,o)if(!r.hasOwnProperty(f)&&o.hasOwnProperty(f)&&null!=o[f])if("style"===f){var c=o[f];for(i in c)c.hasOwnProperty(i)&&(n||(n={}),n[i]="")}else"dangerouslySetInnerHTML"!==f&&"children"!==f&&"suppressContentEditableWarning"!==f&&"suppressHydrationWarning"!==f&&"autoFocus"!==f&&(u.hasOwnProperty(f)?s||(s=[]):(s=s||[]).push(f,null));for(f in r){var l=r[f];if(c=null!=o?o[f]:void 0,r.hasOwnProperty(f)&&l!==c&&(null!=l||null!=c))if("style"===f)if(c){for(i in c)!c.hasOwnProperty(i)||l&&l.hasOwnProperty(i)||(n||(n={}),n[i]="");for(i in l)l.hasOwnProperty(i)&&c[i]!==l[i]&&(n||(n={}),n[i]=l[i])}else n||(s||(s=[]),s.push(f,n)),n=l;else"dangerouslySetInnerHTML"===f?(l=l?l.__html:void 0,c=c?c.__html:void 0,null!=l&&c!==l&&(s=s||[]).push(f,l)):"children"===f?"string"!==typeof l&&"number"!==typeof l||(s=s||[]).push(f,""+l):"suppressContentEditableWarning"!==f&&"suppressHydrationWarning"!==f&&(u.hasOwnProperty(f)?(null!=l&&"onScroll"===f&&Or("scroll",e),s||c===l||(s=[])):"object"===typeof l&&null!==l&&l.$$typeof===P?l.toString():(s=s||[]).push(f,l))}n&&(s=s||[]).push("style",n);var f=s;(t.updateQueue=f)&&(t.flags|=4)}},Yi=function(e,t,n,r){n!==r&&(t.flags|=4)};var fs="function"===typeof WeakMap?WeakMap:Map;function ds(e,t,n){(n=lo(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Ys||(Ys=!0,$s=r),ls(0,t)},n}function ps(e,t,n){(n=lo(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var a=t.value;n.payload=function(){return ls(0,t),r(a)}}var o=e.stateNode;return null!==o&&"function"===typeof o.componentDidCatch&&(n.callback=function(){"function"!==typeof r&&(null===Js?Js=new Set([this]):Js.add(this),ls(0,t));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}var hs="function"===typeof WeakSet?WeakSet:Set;function ms(e){var t=e.ref;if(null!==t)if("function"===typeof t)try{t(null)}catch(n){zu(e,n)}else t.current=null}function vs(e,t){switch(t.tag){case 0:case 11:case 15:case 22:case 5:case 6:case 4:case 17:return;case 1:if(256&t.flags&&null!==e){var n=e.memoizedProps,r=e.memoizedState;t=(e=t.stateNode).getSnapshotBeforeUpdate(t.elementType===t.type?n:$a(t.type,n),r),e.__reactInternalSnapshotBeforeUpdate=t}return;case 3:return void(256&t.flags&&Gr(t.stateNode.containerInfo))}throw Error(i(163))}function gs(e,t,n){switch(n.tag){case 0:case 11:case 15:case 22:if(null!==(t=null!==(t=n.updateQueue)?t.lastEffect:null)){e=t=t.next;do{if(3===(3&e.tag)){var r=e.create;e.destroy=r()}e=e.next}while(e!==t)}if(null!==(t=null!==(t=n.updateQueue)?t.lastEffect:null)){e=t=t.next;do{var a=e;r=a.next,0!==(4&(a=a.tag))&&0!==(1&a)&&(Fu(n,e),ju(n,e)),e=r}while(e!==t)}return;case 1:return e=n.stateNode,4&n.flags&&(null===t?e.componentDidMount():(r=n.elementType===n.type?t.memoizedProps:$a(n.type,t.memoizedProps),e.componentDidUpdate(r,t.memoizedState,e.__reactInternalSnapshotBeforeUpdate))),void(null!==(t=n.updateQueue)&&mo(n,t,e));case 3:if(null!==(t=n.updateQueue)){if(e=null,null!==n.child)switch(n.child.tag){case 5:case 1:e=n.child.stateNode}mo(n,t,e)}return;case 5:return e=n.stateNode,void(null===t&&4&n.flags&&Ur(n.type,n.memoizedProps)&&e.focus());case 6:case 4:case 12:case 19:case 17:case 20:case 21:case 23:case 24:return;case 13:return void(null===n.memoizedState&&(n=n.alternate,null!==n&&(n=n.memoizedState,null!==n&&(n=n.dehydrated,null!==n&&kt(n)))))}throw Error(i(163))}function ys(e,t){for(var n=e;;){if(5===n.tag){var r=n.stateNode;if(t)"function"===typeof(r=r.style).setProperty?r.setProperty("display","none","important"):r.display="none";else{r=n.stateNode;var a=n.memoizedProps.style;a=void 0!==a&&null!==a&&a.hasOwnProperty("display")?a.display:null,r.style.display=we("display",a)}}else if(6===n.tag)n.stateNode.nodeValue=t?"":n.memoizedProps;else if((23!==n.tag&&24!==n.tag||null===n.memoizedState||n===e)&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===e)break;for(;null===n.sibling;){if(null===n.return||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}}function bs(e,t){if(_a&&"function"===typeof _a.onCommitFiberUnmount)try{_a.onCommitFiberUnmount(Sa,t)}catch(o){}switch(t.tag){case 0:case 11:case 14:case 15:case 22:if(null!==(e=t.updateQueue)&&null!==(e=e.lastEffect)){var n=e=e.next;do{var r=n,a=r.destroy;if(r=r.tag,void 0!==a)if(0!==(4&r))Fu(t,n);else{r=t;try{a()}catch(o){zu(r,o)}}n=n.next}while(n!==e)}break;case 1:if(ms(t),"function"===typeof(e=t.stateNode).componentWillUnmount)try{e.props=t.memoizedProps,e.state=t.memoizedState,e.componentWillUnmount()}catch(o){zu(t,o)}break;case 5:ms(t);break;case 4:Ns(e,t)}}function xs(e){e.alternate=null,e.child=null,e.dependencies=null,e.firstEffect=null,e.lastEffect=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.return=null,e.updateQueue=null}function ws(e){return 5===e.tag||3===e.tag||4===e.tag}function ks(e){e:{for(var t=e.return;null!==t;){if(ws(t))break e;t=t.return}throw Error(i(160))}var n=t;switch(t=n.stateNode,n.tag){case 5:var r=!1;break;case 3:case 4:t=t.containerInfo,r=!0;break;default:throw Error(i(161))}16&n.flags&&(ye(t,""),n.flags&=-17);e:t:for(n=e;;){for(;null===n.sibling;){if(null===n.return||ws(n.return)){n=null;break e}n=n.return}for(n.sibling.return=n.return,n=n.sibling;5!==n.tag&&6!==n.tag&&18!==n.tag;){if(2&n.flags)continue t;if(null===n.child||4===n.tag)continue t;n.child.return=n,n=n.child}if(!(2&n.flags)){n=n.stateNode;break e}}r?Ss(e,n,t):_s(e,n,t)}function Ss(e,t,n){var r=e.tag,a=5===r||6===r;if(a)e=a?e.stateNode:e.stateNode.instance,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=zr));else if(4!==r&&null!==(e=e.child))for(Ss(e,t,n),e=e.sibling;null!==e;)Ss(e,t,n),e=e.sibling}function _s(e,t,n){var r=e.tag,a=5===r||6===r;if(a)e=a?e.stateNode:e.stateNode.instance,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(_s(e,t,n),e=e.sibling;null!==e;)_s(e,t,n),e=e.sibling}function Ns(e,t){for(var n,r,a=t,o=!1;;){if(!o){o=a.return;e:for(;;){if(null===o)throw Error(i(160));switch(n=o.stateNode,o.tag){case 5:r=!1;break e;case 3:case 4:n=n.containerInfo,r=!0;break e}o=o.return}o=!0}if(5===a.tag||6===a.tag){e:for(var s=e,u=a,c=u;;)if(bs(s,c),null!==c.child&&4!==c.tag)c.child.return=c,c=c.child;else{if(c===u)break e;for(;null===c.sibling;){if(null===c.return||c.return===u)break e;c=c.return}c.sibling.return=c.return,c=c.sibling}r?(s=n,u=a.stateNode,8===s.nodeType?s.parentNode.removeChild(u):s.removeChild(u)):n.removeChild(a.stateNode)}else if(4===a.tag){if(null!==a.child){n=a.stateNode.containerInfo,r=!0,a.child.return=a,a=a.child;continue}}else if(bs(e,a),null!==a.child){a.child.return=a,a=a.child;continue}if(a===t)break;for(;null===a.sibling;){if(null===a.return||a.return===t)return;4===(a=a.return).tag&&(o=!1)}a.sibling.return=a.return,a=a.sibling}}function Es(e,t){switch(t.tag){case 0:case 11:case 14:case 15:case 22:var n=t.updateQueue;if(null!==(n=null!==n?n.lastEffect:null)){var r=n=n.next;do{3===(3&r.tag)&&(e=r.destroy,r.destroy=void 0,void 0!==e&&e()),r=r.next}while(r!==n)}return;case 1:case 12:case 17:return;case 5:if(null!=(n=t.stateNode)){r=t.memoizedProps;var a=null!==e?e.memoizedProps:r;e=t.type;var o=t.updateQueue;if(t.updateQueue=null,null!==o){for(n[Qr]=r,"input"===e&&"radio"===r.type&&null!=r.name&&te(n,r),Ne(e,a),t=Ne(e,r),a=0;a<o.length;a+=2){var s=o[a],u=o[a+1];"style"===s?ke(n,u):"dangerouslySetInnerHTML"===s?ge(n,u):"children"===s?ye(n,u):x(n,s,u,t)}switch(e){case"input":ne(n,r);break;case"textarea":ce(n,r);break;case"select":e=n._wrapperState.wasMultiple,n._wrapperState.wasMultiple=!!r.multiple,null!=(o=r.value)?ie(n,!!r.multiple,o,!1):e!==!!r.multiple&&(null!=r.defaultValue?ie(n,!!r.multiple,r.defaultValue,!0):ie(n,!!r.multiple,r.multiple?[]:"",!1))}}}return;case 6:if(null===t.stateNode)throw Error(i(162));return void(t.stateNode.nodeValue=t.memoizedProps);case 3:return void((n=t.stateNode).hydrate&&(n.hydrate=!1,kt(n.containerInfo)));case 13:return null!==t.memoizedState&&(Ws=Ua(),ys(t.child,!0)),void Cs(t);case 19:return void Cs(t);case 23:case 24:return void ys(t,null!==t.memoizedState)}throw Error(i(163))}function Cs(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new hs),t.forEach((function(t){var r=Vu.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function Ts(e,t){return null!==e&&(null===(e=e.memoizedState)||null!==e.dehydrated)&&(null!==(t=t.memoizedState)&&null===t.dehydrated)}var Is=Math.ceil,Os=w.ReactCurrentDispatcher,As=w.ReactCurrentOwner,Ds=0,Ms=null,Rs=null,Ps=0,js=0,Fs=ca(0),Ls=0,Bs=null,zs=0,Zs=0,Vs=0,Us=0,qs=null,Ws=0,Hs=1/0;function Gs(){Hs=Ua()+500}var Ks,Xs=null,Ys=!1,$s=null,Js=null,Qs=!1,eu=null,tu=90,nu=[],ru=[],au=null,ou=0,iu=null,su=-1,uu=0,cu=0,lu=null,fu=!1;function du(){return 0!==(48&Ds)?Ua():-1!==su?su:su=Ua()}function pu(e){if(0===(2&(e=e.mode)))return 1;if(0===(4&e))return 99===qa()?1:2;if(0===uu&&(uu=zs),0!==Ya.transition){0!==cu&&(cu=null!==qs?qs.pendingLanes:0),e=uu;var t=4186112&~cu;return 0===(t&=-t)&&(0===(t=(e=4186112&~e)&-e)&&(t=8192)),t}return e=qa(),0!==(4&Ds)&&98===e?e=zt(12,uu):e=zt(e=function(e){switch(e){case 99:return 15;case 98:return 10;case 97:case 96:return 8;case 95:return 2;default:return 0}}(e),uu),e}function hu(e,t,n){if(50<ou)throw ou=0,iu=null,Error(i(185));if(null===(e=mu(e,t)))return null;Ut(e,t,n),e===Ms&&(Vs|=t,4===Ls&&yu(e,Ps));var r=qa();1===t?0!==(8&Ds)&&0===(48&Ds)?bu(e):(vu(e,n),0===Ds&&(Gs(),Ka())):(0===(4&Ds)||98!==r&&99!==r||(null===au?au=new Set([e]):au.add(e)),vu(e,n)),qs=e}function mu(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}function vu(e,t){for(var n=e.callbackNode,r=e.suspendedLanes,a=e.pingedLanes,o=e.expirationTimes,s=e.pendingLanes;0<s;){var u=31-qt(s),c=1<<u,l=o[u];if(-1===l){if(0===(c&r)||0!==(c&a)){l=t,Ft(c);var f=jt;o[u]=10<=f?l+250:6<=f?l+5e3:-1}}else l<=t&&(e.expiredLanes|=c);s&=~c}if(r=Lt(e,e===Ms?Ps:0),t=jt,0===r)null!==n&&(n!==Fa&&Ca(n),e.callbackNode=null,e.callbackPriority=0);else{if(null!==n){if(e.callbackPriority===t)return;n!==Fa&&Ca(n)}15===t?(n=bu.bind(null,e),null===Ba?(Ba=[n],za=Ea(Da,Xa)):Ba.push(n),n=Fa):14===t?n=Ga(99,bu.bind(null,e)):(n=function(e){switch(e){case 15:case 14:return 99;case 13:case 12:case 11:case 10:return 98;case 9:case 8:case 7:case 6:case 4:case 5:return 97;case 3:case 2:case 1:return 95;case 0:return 90;default:throw Error(i(358,e))}}(t),n=Ga(n,gu.bind(null,e))),e.callbackPriority=t,e.callbackNode=n}}function gu(e){if(su=-1,cu=uu=0,0!==(48&Ds))throw Error(i(327));var t=e.callbackNode;if(Pu()&&e.callbackNode!==t)return null;var n=Lt(e,e===Ms?Ps:0);if(0===n)return null;var r=n,a=Ds;Ds|=16;var o=Eu();for(Ms===e&&Ps===r||(Gs(),_u(e,r));;)try{Iu();break}catch(u){Nu(e,u)}if(no(),Os.current=o,Ds=a,null!==Rs?r=0:(Ms=null,Ps=0,r=Ls),0!==(zs&Vs))_u(e,0);else if(0!==r){if(2===r&&(Ds|=64,e.hydrate&&(e.hydrate=!1,Gr(e.containerInfo)),0!==(n=Bt(e))&&(r=Cu(e,n))),1===r)throw t=Bs,_u(e,0),yu(e,n),vu(e,Ua()),t;switch(e.finishedWork=e.current.alternate,e.finishedLanes=n,r){case 0:case 1:throw Error(i(345));case 2:case 5:Du(e);break;case 3:if(yu(e,n),(62914560&n)===n&&10<(r=Ws+500-Ua())){if(0!==Lt(e,0))break;if(((a=e.suspendedLanes)&n)!==n){du(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=Wr(Du.bind(null,e),r);break}Du(e);break;case 4:if(yu(e,n),(4186112&n)===n)break;for(r=e.eventTimes,a=-1;0<n;){var s=31-qt(n);o=1<<s,(s=r[s])>a&&(a=s),n&=~o}if(n=a,10<(n=(120>(n=Ua()-n)?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*Is(n/1960))-n)){e.timeoutHandle=Wr(Du.bind(null,e),n);break}Du(e);break;default:throw Error(i(329))}}return vu(e,Ua()),e.callbackNode===t?gu.bind(null,e):null}function yu(e,t){for(t&=~Us,t&=~Vs,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-qt(t),r=1<<n;e[n]=-1,t&=~r}}function bu(e){if(0!==(48&Ds))throw Error(i(327));if(Pu(),e===Ms&&0!==(e.expiredLanes&Ps)){var t=Ps,n=Cu(e,t);0!==(zs&Vs)&&(n=Cu(e,t=Lt(e,t)))}else n=Cu(e,t=Lt(e,0));if(0!==e.tag&&2===n&&(Ds|=64,e.hydrate&&(e.hydrate=!1,Gr(e.containerInfo)),0!==(t=Bt(e))&&(n=Cu(e,t))),1===n)throw n=Bs,_u(e,0),yu(e,t),vu(e,Ua()),n;return e.finishedWork=e.current.alternate,e.finishedLanes=t,Du(e),vu(e,Ua()),null}function xu(e,t){var n=Ds;Ds|=1;try{return e(t)}finally{0===(Ds=n)&&(Gs(),Ka())}}function wu(e,t){var n=Ds;Ds&=-2,Ds|=8;try{return e(t)}finally{0===(Ds=n)&&(Gs(),Ka())}}function ku(e,t){fa(Fs,js),js|=t,zs|=t}function Su(){js=Fs.current,la(Fs)}function _u(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,Hr(n)),null!==Rs)for(n=Rs.return;null!==n;){var r=n;switch(r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&ya();break;case 3:Po(),la(ha),la(pa),Yo();break;case 5:Fo(r);break;case 4:Po();break;case 13:case 19:la(Lo);break;case 10:ro(r);break;case 23:case 24:Su()}n=n.return}Ms=e,Rs=Hu(e.current,null),Ps=js=zs=t,Ls=0,Bs=null,Us=Vs=Zs=0}function Nu(e,t){for(;;){var n=Rs;try{if(no(),$o.current=Di,ri){for(var r=ei.memoizedState;null!==r;){var a=r.queue;null!==a&&(a.pending=null),r=r.next}ri=!1}if(Qo=0,ni=ti=ei=null,ai=!1,As.current=null,null===n||null===n.return){Ls=1,Bs=t,Rs=null;break}e:{var o=e,i=n.return,s=n,u=t;if(t=Ps,s.flags|=2048,s.firstEffect=s.lastEffect=null,null!==u&&"object"===typeof u&&"function"===typeof u.then){var c=u;if(0===(2&s.mode)){var l=s.alternate;l?(s.updateQueue=l.updateQueue,s.memoizedState=l.memoizedState,s.lanes=l.lanes):(s.updateQueue=null,s.memoizedState=null)}var f=0!==(1&Lo.current),d=i;do{var p;if(p=13===d.tag){var h=d.memoizedState;if(null!==h)p=null!==h.dehydrated;else{var m=d.memoizedProps;p=void 0!==m.fallback&&(!0!==m.unstable_avoidThisFallback||!f)}}if(p){var v=d.updateQueue;if(null===v){var g=new Set;g.add(c),d.updateQueue=g}else v.add(c);if(0===(2&d.mode)){if(d.flags|=64,s.flags|=16384,s.flags&=-2981,1===s.tag)if(null===s.alternate)s.tag=17;else{var y=lo(-1,1);y.tag=2,fo(s,y)}s.lanes|=1;break e}u=void 0,s=t;var b=o.pingCache;if(null===b?(b=o.pingCache=new fs,u=new Set,b.set(c,u)):void 0===(u=b.get(c))&&(u=new Set,b.set(c,u)),!u.has(s)){u.add(s);var x=Zu.bind(null,o,c,s);c.then(x,x)}d.flags|=4096,d.lanes=t;break e}d=d.return}while(null!==d);u=Error((G(s.type)||"A React component")+" suspended while rendering, but no fallback UI was specified.\n\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display.")}5!==Ls&&(Ls=2),u=cs(u,s),d=i;do{switch(d.tag){case 3:o=u,d.flags|=4096,t&=-t,d.lanes|=t,po(d,ds(0,o,t));break e;case 1:o=u;var w=d.type,k=d.stateNode;if(0===(64&d.flags)&&("function"===typeof w.getDerivedStateFromError||null!==k&&"function"===typeof k.componentDidCatch&&(null===Js||!Js.has(k)))){d.flags|=4096,t&=-t,d.lanes|=t,po(d,ps(d,o,t));break e}}d=d.return}while(null!==d)}Au(n)}catch(S){t=S,Rs===n&&null!==n&&(Rs=n=n.return);continue}break}}function Eu(){var e=Os.current;return Os.current=Di,null===e?Di:e}function Cu(e,t){var n=Ds;Ds|=16;var r=Eu();for(Ms===e&&Ps===t||_u(e,t);;)try{Tu();break}catch(a){Nu(e,a)}if(no(),Ds=n,Os.current=r,null!==Rs)throw Error(i(261));return Ms=null,Ps=0,Ls}function Tu(){for(;null!==Rs;)Ou(Rs)}function Iu(){for(;null!==Rs&&!Ta();)Ou(Rs)}function Ou(e){var t=Ks(e.alternate,e,js);e.memoizedProps=e.pendingProps,null===t?Au(e):Rs=t,As.current=null}function Au(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(2048&t.flags)){if(null!==(n=ss(n,t,js)))return void(Rs=n);if(24!==(n=t).tag&&23!==n.tag||null===n.memoizedState||0!==(1073741824&js)||0===(4&n.mode)){for(var r=0,a=n.child;null!==a;)r|=a.lanes|a.childLanes,a=a.sibling;n.childLanes=r}null!==e&&0===(2048&e.flags)&&(null===e.firstEffect&&(e.firstEffect=t.firstEffect),null!==t.lastEffect&&(null!==e.lastEffect&&(e.lastEffect.nextEffect=t.firstEffect),e.lastEffect=t.lastEffect),1<t.flags&&(null!==e.lastEffect?e.lastEffect.nextEffect=t:e.firstEffect=t,e.lastEffect=t))}else{if(null!==(n=us(t)))return n.flags&=2047,void(Rs=n);null!==e&&(e.firstEffect=e.lastEffect=null,e.flags|=2048)}if(null!==(t=t.sibling))return void(Rs=t);Rs=t=e}while(null!==t);0===Ls&&(Ls=5)}function Du(e){var t=qa();return Ha(99,Mu.bind(null,e,t)),null}function Mu(e,t){do{Pu()}while(null!==eu);if(0!==(48&Ds))throw Error(i(327));var n=e.finishedWork;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(i(177));e.callbackNode=null;var r=n.lanes|n.childLanes,a=r,o=e.pendingLanes&~a;e.pendingLanes=a,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=a,e.mutableReadLanes&=a,e.entangledLanes&=a,a=e.entanglements;for(var s=e.eventTimes,u=e.expirationTimes;0<o;){var c=31-qt(o),l=1<<c;a[c]=0,s[c]=-1,u[c]=-1,o&=~l}if(null!==au&&0===(24&r)&&au.has(e)&&au.delete(e),e===Ms&&(Rs=Ms=null,Ps=0),1<n.flags?null!==n.lastEffect?(n.lastEffect.nextEffect=n,r=n.firstEffect):r=n:r=n.firstEffect,null!==r){if(a=Ds,Ds|=32,As.current=null,Zr=Xt,gr(s=vr())){if("selectionStart"in s)u={start:s.selectionStart,end:s.selectionEnd};else e:if(u=(u=s.ownerDocument)&&u.defaultView||window,(l=u.getSelection&&u.getSelection())&&0!==l.rangeCount){u=l.anchorNode,o=l.anchorOffset,c=l.focusNode,l=l.focusOffset;try{u.nodeType,c.nodeType}catch(E){u=null;break e}var f=0,d=-1,p=-1,h=0,m=0,v=s,g=null;t:for(;;){for(var y;v!==u||0!==o&&3!==v.nodeType||(d=f+o),v!==c||0!==l&&3!==v.nodeType||(p=f+l),3===v.nodeType&&(f+=v.nodeValue.length),null!==(y=v.firstChild);)g=v,v=y;for(;;){if(v===s)break t;if(g===u&&++h===o&&(d=f),g===c&&++m===l&&(p=f),null!==(y=v.nextSibling))break;g=(v=g).parentNode}v=y}u=-1===d||-1===p?null:{start:d,end:p}}else u=null;u=u||{start:0,end:0}}else u=null;Vr={focusedElem:s,selectionRange:u},Xt=!1,lu=null,fu=!1,Xs=r;do{try{Ru()}catch(E){if(null===Xs)throw Error(i(330));zu(Xs,E),Xs=Xs.nextEffect}}while(null!==Xs);lu=null,Xs=r;do{try{for(s=e;null!==Xs;){var b=Xs.flags;if(16&b&&ye(Xs.stateNode,""),128&b){var x=Xs.alternate;if(null!==x){var w=x.ref;null!==w&&("function"===typeof w?w(null):w.current=null)}}switch(1038&b){case 2:ks(Xs),Xs.flags&=-3;break;case 6:ks(Xs),Xs.flags&=-3,Es(Xs.alternate,Xs);break;case 1024:Xs.flags&=-1025;break;case 1028:Xs.flags&=-1025,Es(Xs.alternate,Xs);break;case 4:Es(Xs.alternate,Xs);break;case 8:Ns(s,u=Xs);var k=u.alternate;xs(u),null!==k&&xs(k)}Xs=Xs.nextEffect}}catch(E){if(null===Xs)throw Error(i(330));zu(Xs,E),Xs=Xs.nextEffect}}while(null!==Xs);if(w=Vr,x=vr(),b=w.focusedElem,s=w.selectionRange,x!==b&&b&&b.ownerDocument&&mr(b.ownerDocument.documentElement,b)){null!==s&&gr(b)&&(x=s.start,void 0===(w=s.end)&&(w=x),"selectionStart"in b?(b.selectionStart=x,b.selectionEnd=Math.min(w,b.value.length)):(w=(x=b.ownerDocument||document)&&x.defaultView||window).getSelection&&(w=w.getSelection(),u=b.textContent.length,k=Math.min(s.start,u),s=void 0===s.end?k:Math.min(s.end,u),!w.extend&&k>s&&(u=s,s=k,k=u),u=hr(b,k),o=hr(b,s),u&&o&&(1!==w.rangeCount||w.anchorNode!==u.node||w.anchorOffset!==u.offset||w.focusNode!==o.node||w.focusOffset!==o.offset)&&((x=x.createRange()).setStart(u.node,u.offset),w.removeAllRanges(),k>s?(w.addRange(x),w.extend(o.node,o.offset)):(x.setEnd(o.node,o.offset),w.addRange(x))))),x=[];for(w=b;w=w.parentNode;)1===w.nodeType&&x.push({element:w,left:w.scrollLeft,top:w.scrollTop});for("function"===typeof b.focus&&b.focus(),b=0;b<x.length;b++)(w=x[b]).element.scrollLeft=w.left,w.element.scrollTop=w.top}Xt=!!Zr,Vr=Zr=null,e.current=n,Xs=r;do{try{for(b=e;null!==Xs;){var S=Xs.flags;if(36&S&&gs(b,Xs.alternate,Xs),128&S){x=void 0;var _=Xs.ref;if(null!==_){var N=Xs.stateNode;Xs.tag,x=N,"function"===typeof _?_(x):_.current=x}}Xs=Xs.nextEffect}}catch(E){if(null===Xs)throw Error(i(330));zu(Xs,E),Xs=Xs.nextEffect}}while(null!==Xs);Xs=null,La(),Ds=a}else e.current=n;if(Qs)Qs=!1,eu=e,tu=t;else for(Xs=r;null!==Xs;)t=Xs.nextEffect,Xs.nextEffect=null,8&Xs.flags&&((S=Xs).sibling=null,S.stateNode=null),Xs=t;if(0===(r=e.pendingLanes)&&(Js=null),1===r?e===iu?ou++:(ou=0,iu=e):ou=0,n=n.stateNode,_a&&"function"===typeof _a.onCommitFiberRoot)try{_a.onCommitFiberRoot(Sa,n,void 0,64===(64&n.current.flags))}catch(E){}if(vu(e,Ua()),Ys)throw Ys=!1,e=$s,$s=null,e;return 0!==(8&Ds)||Ka(),null}function Ru(){for(;null!==Xs;){var e=Xs.alternate;fu||null===lu||(0!==(8&Xs.flags)?et(Xs,lu)&&(fu=!0):13===Xs.tag&&Ts(e,Xs)&&et(Xs,lu)&&(fu=!0));var t=Xs.flags;0!==(256&t)&&vs(e,Xs),0===(512&t)||Qs||(Qs=!0,Ga(97,(function(){return Pu(),null}))),Xs=Xs.nextEffect}}function Pu(){if(90!==tu){var e=97<tu?97:tu;return tu=90,Ha(e,Lu)}return!1}function ju(e,t){nu.push(t,e),Qs||(Qs=!0,Ga(97,(function(){return Pu(),null})))}function Fu(e,t){ru.push(t,e),Qs||(Qs=!0,Ga(97,(function(){return Pu(),null})))}function Lu(){if(null===eu)return!1;var e=eu;if(eu=null,0!==(48&Ds))throw Error(i(331));var t=Ds;Ds|=32;var n=ru;ru=[];for(var r=0;r<n.length;r+=2){var a=n[r],o=n[r+1],s=a.destroy;if(a.destroy=void 0,"function"===typeof s)try{s()}catch(c){if(null===o)throw Error(i(330));zu(o,c)}}for(n=nu,nu=[],r=0;r<n.length;r+=2){a=n[r],o=n[r+1];try{var u=a.create;a.destroy=u()}catch(c){if(null===o)throw Error(i(330));zu(o,c)}}for(u=e.current.firstEffect;null!==u;)e=u.nextEffect,u.nextEffect=null,8&u.flags&&(u.sibling=null,u.stateNode=null),u=e;return Ds=t,Ka(),!0}function Bu(e,t,n){fo(e,t=ds(0,t=cs(n,t),1)),t=du(),null!==(e=mu(e,1))&&(Ut(e,1,t),vu(e,t))}function zu(e,t){if(3===e.tag)Bu(e,e,t);else for(var n=e.return;null!==n;){if(3===n.tag){Bu(n,e,t);break}if(1===n.tag){var r=n.stateNode;if("function"===typeof n.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Js||!Js.has(r))){var a=ps(n,e=cs(t,e),1);if(fo(n,a),a=du(),null!==(n=mu(n,1)))Ut(n,1,a),vu(n,a);else if("function"===typeof r.componentDidCatch&&(null===Js||!Js.has(r)))try{r.componentDidCatch(t,e)}catch(o){}break}}n=n.return}}function Zu(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=du(),e.pingedLanes|=e.suspendedLanes&n,Ms===e&&(Ps&n)===n&&(4===Ls||3===Ls&&(62914560&Ps)===Ps&&500>Ua()-Ws?_u(e,0):Us|=n),vu(e,t)}function Vu(e,t){var n=e.stateNode;null!==n&&n.delete(t),0===(t=0)&&(0===(2&(t=e.mode))?t=1:0===(4&t)?t=99===qa()?1:2:(0===uu&&(uu=zs),0===(t=Zt(62914560&~uu))&&(t=4194304))),n=du(),null!==(e=mu(e,t))&&(Ut(e,t,n),vu(e,n))}function Uu(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.flags=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childLanes=this.lanes=0,this.alternate=null}function qu(e,t,n,r){return new Uu(e,t,n,r)}function Wu(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Hu(e,t){var n=e.alternate;return null===n?((n=qu(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.nextEffect=null,n.firstEffect=null,n.lastEffect=null),n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Gu(e,t,n,r,a,o){var s=2;if(r=e,"function"===typeof e)Wu(e)&&(s=1);else if("string"===typeof e)s=5;else e:switch(e){case _:return Ku(n.children,a,o,t);case j:s=8,a|=16;break;case N:s=8,a|=1;break;case E:return(e=qu(12,n,t,8|a)).elementType=E,e.type=E,e.lanes=o,e;case O:return(e=qu(13,n,t,a)).type=O,e.elementType=O,e.lanes=o,e;case A:return(e=qu(19,n,t,a)).elementType=A,e.lanes=o,e;case F:return Xu(n,a,o,t);case L:return(e=qu(24,n,t,a)).elementType=L,e.lanes=o,e;default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case C:s=10;break e;case T:s=9;break e;case I:s=11;break e;case D:s=14;break e;case M:s=16,r=null;break e;case R:s=22;break e}throw Error(i(130,null==e?e:typeof e,""))}return(t=qu(s,n,t,a)).elementType=e,t.type=r,t.lanes=o,t}function Ku(e,t,n,r){return(e=qu(7,e,r,t)).lanes=n,e}function Xu(e,t,n,r){return(e=qu(23,e,r,t)).elementType=F,e.lanes=n,e}function Yu(e,t,n){return(e=qu(6,e,null,t)).lanes=n,e}function $u(e,t,n){return(t=qu(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Ju(e,t,n){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=n,this.callbackNode=null,this.callbackPriority=0,this.eventTimes=Vt(0),this.expirationTimes=Vt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Vt(0),this.mutableSourceEagerHydrationData=null}function Qu(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:S,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}function ec(e,t,n,r){var a=t.current,o=du(),s=pu(a);e:if(n){t:{if(Ye(n=n._reactInternals)!==n||1!==n.tag)throw Error(i(170));var u=n;do{switch(u.tag){case 3:u=u.stateNode.context;break t;case 1:if(ga(u.type)){u=u.stateNode.__reactInternalMemoizedMergedChildContext;break t}}u=u.return}while(null!==u);throw Error(i(171))}if(1===n.tag){var c=n.type;if(ga(c)){n=xa(n,c,u);break e}}n=u}else n=da;return null===t.context?t.context=n:t.pendingContext=n,(t=lo(o,s)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),fo(a,t),hu(a,s,o),s}function tc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function nc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function rc(e,t){nc(e,t),(e=e.alternate)&&nc(e,t)}function ac(e,t,n){var r=null!=n&&null!=n.hydrationOptions&&n.hydrationOptions.mutableSources||null;if(n=new Ju(e,t,null!=n&&!0===n.hydrate),t=qu(3,null,null,2===t?7:1===t?3:0),n.current=t,t.stateNode=n,uo(t),e[ea]=n.current,Dr(8===e.nodeType?e.parentNode:e),r)for(e=0;e<r.length;e++){var a=(t=r[e])._getVersion;a=a(t._source),null==n.mutableSourceEagerHydrationData?n.mutableSourceEagerHydrationData=[t,a]:n.mutableSourceEagerHydrationData.push(t,a)}this._internalRoot=n}function oc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function ic(e,t,n,r,a){var o=n._reactRootContainer;if(o){var i=o._internalRoot;if("function"===typeof a){var s=a;a=function(){var e=tc(i);s.call(e)}}ec(t,i,e,a)}else{if(o=n._reactRootContainer=function(e,t){if(t||(t=!(!(t=e?9===e.nodeType?e.documentElement:e.firstChild:null)||1!==t.nodeType||!t.hasAttribute("data-reactroot"))),!t)for(var n;n=e.lastChild;)e.removeChild(n);return new ac(e,0,t?{hydrate:!0}:void 0)}(n,r),i=o._internalRoot,"function"===typeof a){var u=a;a=function(){var e=tc(i);u.call(e)}}wu((function(){ec(t,i,e,a)}))}return tc(i)}function sc(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!oc(t))throw Error(i(200));return Qu(e,t,null,n)}Ks=function(e,t,n){var r=t.lanes;if(null!==e)if(e.memoizedProps!==t.pendingProps||ha.current)Fi=!0;else{if(0===(n&r)){switch(Fi=!1,t.tag){case 3:Gi(t),Ko();break;case 5:jo(t);break;case 1:ga(t.type)&&wa(t);break;case 4:Ro(t,t.stateNode.containerInfo);break;case 10:r=t.memoizedProps.value;var a=t.type._context;fa(Ja,a._currentValue),a._currentValue=r;break;case 13:if(null!==t.memoizedState)return 0!==(n&t.child.childLanes)?Ji(e,t,n):(fa(Lo,1&Lo.current),null!==(t=os(e,t,n))?t.sibling:null);fa(Lo,1&Lo.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(64&e.flags)){if(r)return as(e,t,n);t.flags|=64}if(null!==(a=t.memoizedState)&&(a.rendering=null,a.tail=null,a.lastEffect=null),fa(Lo,Lo.current),r)break;return null;case 23:case 24:return t.lanes=0,Vi(e,t,n)}return os(e,t,n)}Fi=0!==(16384&e.flags)}else Fi=!1;switch(t.lanes=0,t.tag){case 2:if(r=t.type,null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,a=va(t,pa.current),oo(t,n),a=si(null,t,r,e,a,n),t.flags|=1,"object"===typeof a&&null!==a&&"function"===typeof a.render&&void 0===a.$$typeof){if(t.tag=1,t.memoizedState=null,t.updateQueue=null,ga(r)){var o=!0;wa(t)}else o=!1;t.memoizedState=null!==a.state&&void 0!==a.state?a.state:null,uo(t);var s=r.getDerivedStateFromProps;"function"===typeof s&&go(t,r,s,e),a.updater=yo,t.stateNode=a,a._reactInternals=t,ko(t,r,e,n),t=Hi(null,t,r,!0,o,n)}else t.tag=0,Li(null,t,a,n),t=t.child;return t;case 16:a=t.elementType;e:{switch(null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,a=(o=a._init)(a._payload),t.type=a,o=t.tag=function(e){if("function"===typeof e)return Wu(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===I)return 11;if(e===D)return 14}return 2}(a),e=$a(a,e),o){case 0:t=qi(null,t,a,e,n);break e;case 1:t=Wi(null,t,a,e,n);break e;case 11:t=Bi(null,t,a,e,n);break e;case 14:t=zi(null,t,a,$a(a.type,e),r,n);break e}throw Error(i(306,a,""))}return t;case 0:return r=t.type,a=t.pendingProps,qi(e,t,r,a=t.elementType===r?a:$a(r,a),n);case 1:return r=t.type,a=t.pendingProps,Wi(e,t,r,a=t.elementType===r?a:$a(r,a),n);case 3:if(Gi(t),r=t.updateQueue,null===e||null===r)throw Error(i(282));if(r=t.pendingProps,a=null!==(a=t.memoizedState)?a.element:null,co(e,t),ho(t,r,null,n),(r=t.memoizedState.element)===a)Ko(),t=os(e,t,n);else{if((o=(a=t.stateNode).hydrate)&&(Zo=Kr(t.stateNode.containerInfo.firstChild),zo=t,o=Vo=!0),o){if(null!=(e=a.mutableSourceEagerHydrationData))for(a=0;a<e.length;a+=2)(o=e[a])._workInProgressVersionPrimary=e[a+1],Xo.push(o);for(n=To(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|1024,n=n.sibling}else Li(e,t,r,n),Ko();t=t.child}return t;case 5:return jo(t),null===e&&Wo(t),r=t.type,a=t.pendingProps,o=null!==e?e.memoizedProps:null,s=a.children,qr(r,a)?s=null:null!==o&&qr(r,o)&&(t.flags|=16),Ui(e,t),Li(e,t,s,n),t.child;case 6:return null===e&&Wo(t),null;case 13:return Ji(e,t,n);case 4:return Ro(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Co(t,null,r,n):Li(e,t,r,n),t.child;case 11:return r=t.type,a=t.pendingProps,Bi(e,t,r,a=t.elementType===r?a:$a(r,a),n);case 7:return Li(e,t,t.pendingProps,n),t.child;case 8:case 12:return Li(e,t,t.pendingProps.children,n),t.child;case 10:e:{r=t.type._context,a=t.pendingProps,s=t.memoizedProps,o=a.value;var u=t.type._context;if(fa(Ja,u._currentValue),u._currentValue=o,null!==s)if(u=s.value,0===(o=lr(u,o)?0:0|("function"===typeof r._calculateChangedBits?r._calculateChangedBits(u,o):1073741823))){if(s.children===a.children&&!ha.current){t=os(e,t,n);break e}}else for(null!==(u=t.child)&&(u.return=t);null!==u;){var c=u.dependencies;if(null!==c){s=u.child;for(var l=c.firstContext;null!==l;){if(l.context===r&&0!==(l.observedBits&o)){1===u.tag&&((l=lo(-1,n&-n)).tag=2,fo(u,l)),u.lanes|=n,null!==(l=u.alternate)&&(l.lanes|=n),ao(u.return,n),c.lanes|=n;break}l=l.next}}else s=10===u.tag&&u.type===t.type?null:u.child;if(null!==s)s.return=u;else for(s=u;null!==s;){if(s===t){s=null;break}if(null!==(u=s.sibling)){u.return=s.return,s=u;break}s=s.return}u=s}Li(e,t,a.children,n),t=t.child}return t;case 9:return a=t.type,r=(o=t.pendingProps).children,oo(t,n),r=r(a=io(a,o.unstable_observedBits)),t.flags|=1,Li(e,t,r,n),t.child;case 14:return o=$a(a=t.type,t.pendingProps),zi(e,t,a,o=$a(a.type,o),r,n);case 15:return Zi(e,t,t.type,t.pendingProps,r,n);case 17:return r=t.type,a=t.pendingProps,a=t.elementType===r?a:$a(r,a),null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),t.tag=1,ga(r)?(e=!0,wa(t)):e=!1,oo(t,n),xo(t,r,a),ko(t,r,a,n),Hi(null,t,r,!0,e,n);case 19:return as(e,t,n);case 23:case 24:return Vi(e,t,n)}throw Error(i(156,t.tag))},ac.prototype.render=function(e){ec(e,this._internalRoot,null,null)},ac.prototype.unmount=function(){var e=this._internalRoot,t=e.containerInfo;ec(null,e,null,(function(){t[ea]=null}))},tt=function(e){13===e.tag&&(hu(e,4,du()),rc(e,4))},nt=function(e){13===e.tag&&(hu(e,67108864,du()),rc(e,67108864))},rt=function(e){if(13===e.tag){var t=du(),n=pu(e);hu(e,n,t),rc(e,n)}},at=function(e,t){return t()},Ce=function(e,t,n){switch(t){case"input":if(ne(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var a=oa(r);if(!a)throw Error(i(90));$(r),ne(r,a)}}}break;case"textarea":ce(e,n);break;case"select":null!=(t=n.value)&&ie(e,!!n.multiple,t,!1)}},Me=xu,Re=function(e,t,n,r,a){var o=Ds;Ds|=4;try{return Ha(98,e.bind(null,t,n,r,a))}finally{0===(Ds=o)&&(Gs(),Ka())}},Pe=function(){0===(49&Ds)&&(function(){if(null!==au){var e=au;au=null,e.forEach((function(e){e.expiredLanes|=24&e.pendingLanes,vu(e,Ua())}))}Ka()}(),Pu())},je=function(e,t){var n=Ds;Ds|=2;try{return e(t)}finally{0===(Ds=n)&&(Gs(),Ka())}};var uc={Events:[ra,aa,oa,Ae,De,Pu,{current:!1}]},cc={findFiberByHostInstance:na,bundleType:0,version:"17.0.2",rendererPackageName:"react-dom"},lc={bundleType:cc.bundleType,version:cc.version,rendererPackageName:cc.rendererPackageName,rendererConfig:cc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:w.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Qe(e))?null:e.stateNode},findFiberByHostInstance:cc.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var fc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!fc.isDisabled&&fc.supportsFiber)try{Sa=fc.inject(lc),_a=fc}catch(ve){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=uc,t.createPortal=sc,t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(i(188));throw Error(i(268,Object.keys(e)))}return e=null===(e=Qe(t))?null:e.stateNode},t.flushSync=function(e,t){var n=Ds;if(0!==(48&n))return e(t);Ds|=1;try{if(e)return Ha(99,e.bind(null,t))}finally{Ds=n,Ka()}},t.hydrate=function(e,t,n){if(!oc(t))throw Error(i(200));return ic(null,e,t,!0,n)},t.render=function(e,t,n){if(!oc(t))throw Error(i(200));return ic(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!oc(e))throw Error(i(40));return!!e._reactRootContainer&&(wu((function(){ic(null,null,e,!1,(function(){e._reactRootContainer=null,e[ea]=null}))})),!0)},t.unstable_batchedUpdates=xu,t.unstable_createPortal=function(e,t){return sc(e,t,2<arguments.length&&void 0!==arguments[2]?arguments[2]:null)},t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!oc(n))throw Error(i(200));if(null==e||void 0===e._reactInternals)throw Error(i(38));return ic(e,t,n,!1,r)},t.version="17.0.2"},4164:function(e,t,n){"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(4463)},8340:function(e,t,n){"use strict";e.exports=n(4424)},4903:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_DATA_URL_KEY=t.INIT_MAX_NUMBER=t.DEFAULT_NULL_INDEX=void 0,t.DEFAULT_NULL_INDEX=-1,t.INIT_MAX_NUMBER=1e3,t.DEFAULT_DATA_URL_KEY="dataURL"},3264:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},r.apply(this,arguments)},a=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&a(t,e,n);return o(t,e),t},s=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(a,o){function i(e){try{u(r.next(e))}catch(t){o(t)}}function s(e){try{u(r.throw(e))}catch(t){o(t)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}u((r=r.apply(e,t||[])).next())}))},u=this&&this.__generator||function(e,t){var n,r,a,o,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(a=2&o[0]?r.return:o[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,o[1])).done)return a;switch(r=0,a&&(o=[2&o[0],a.value]),o[0]){case 0:case 1:a=o;break;case 4:return i.label++,{value:o[1],done:!1};case 5:i.label++,r=o[1],o=[0];continue;case 7:o=i.ops.pop(),i.trys.pop();continue;default:if(!(a=(a=i.trys).length>0&&a[a.length-1])&&(6===o[0]||2===o[0])){i=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){i.label=o[1];break}if(6===o[0]&&i.label<a[1]){i.label=a[1],a=o;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(o);break}a[2]&&i.ops.pop(),i.trys.pop();continue}o=t.call(e,i)}catch(s){o=[6,s],r=0}finally{n=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},c=this&&this.__spreadArrays||function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),a=0;for(t=0;t<n;t++)for(var o=arguments[t],i=0,s=o.length;i<s;i++,a++)r[a]=o[i];return r};Object.defineProperty(t,"__esModule",{value:!0});var l=i(n(2791)),f=n(6842),d=n(2718),p=n(4903);t.default=function(e){var t=e.value,n=void 0===t?[]:t,a=e.onChange,o=e.onError,i=e.children,h=e.dataURLKey,m=void 0===h?p.DEFAULT_DATA_URL_KEY:h,v=e.multiple,g=void 0!==v&&v,y=e.maxNumber,b=void 0===y?p.INIT_MAX_NUMBER:y,x=e.acceptType,w=e.maxFileSize,k=e.resolutionWidth,S=e.resolutionHeight,_=e.resolutionType,N=e.inputProps,E=void 0===N?{}:N,C=n||[],T=l.useRef(null),I=l.useState(p.DEFAULT_NULL_INDEX),O=I[0],A=I[1],D=l.useState(null),M=D[0],R=D[1],P=l.useState(!1),j=P[0],F=P[1],L=l.useCallback((function(){return f.openFileDialog(T)}),[T]),B=l.useCallback((function(){A(p.DEFAULT_NULL_INDEX),L()}),[L]),z=l.useCallback((function(){null===a||void 0===a||a([])}),[a]),Z=function(e){return s(void 0,void 0,void 0,(function(){var t;return u(this,(function(n){switch(n.label){case 0:return[4,d.getErrorValidation({fileList:e,maxFileSize:w,maxNumber:b,acceptType:x,keyUpdate:O,resolutionType:_,resolutionWidth:k,resolutionHeight:S,value:C})];case 1:return(t=n.sent())?(R(t),null===o||void 0===o||o(t,e),[2,!1]):(M&&R(null),[2,!0])}}))}))},V=function(e){return s(void 0,void 0,void 0,(function(){var t,n,r,o,i;return u(this,(function(s){switch(s.label){case 0:return e?[4,f.getListFiles(e,m)]:[2];case 1:return(t=s.sent()).length?[4,Z(t)]:[2];case 2:if(!s.sent())return[2];if(r=[],O>p.DEFAULT_NULL_INDEX)o=t[0],(n=c(C))[O]=o,r.push(O);else if(g)for(n=c(C,t),i=C.length;i<n.length;i+=1)r.push(i);else n=[t[0]],r.push(0);return null===a||void 0===a||a(n,r),[2]}}))}))},U=l.useMemo((function(){return f.getAcceptTypeString(x)}),[x]);return l.default.createElement(l.default.Fragment,null,l.default.createElement("input",r({type:"file",accept:U,ref:T,multiple:g&&O===p.DEFAULT_NULL_INDEX,onChange:function(e){return s(void 0,void 0,void 0,(function(){return u(this,(function(t){switch(t.label){case 0:return[4,V(e.target.files)];case 1:return t.sent(),O>p.DEFAULT_NULL_INDEX&&A(p.DEFAULT_NULL_INDEX),T.current&&(T.current.value=""),[2]}}))}))},style:{display:"none"}},E)),null===i||void 0===i?void 0:i({imageList:C,onImageUpload:B,onImageRemoveAll:z,onImageUpdate:function(e){A(e),L()},onImageRemove:function(e){var t=c(C);Array.isArray(e)?e.forEach((function(e){t.splice(e,1)})):t.splice(e,1),null===a||void 0===a||a(t)},errors:M,dragProps:{onDrop:function(e){e.preventDefault(),e.stopPropagation(),F(!1),e.dataTransfer.files&&e.dataTransfer.files.length>0&&V(e.dataTransfer.files)},onDragEnter:function(e){e.preventDefault(),e.stopPropagation(),e.dataTransfer.items&&e.dataTransfer.items.length>0&&F(!0)},onDragLeave:function(e){e.preventDefault(),e.stopPropagation(),F(!1)},onDragOver:function(e){e.preventDefault(),e.stopPropagation()},onDragStart:function(e){e.preventDefault(),e.stopPropagation(),e.dataTransfer.clearData()}},isDragging:j}))}},6842:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getListFiles=t.getImage=t.getBase64=t.getAcceptTypeString=t.openFileDialog=void 0,t.openFileDialog=function(e){e.current&&e.current.click()},t.getAcceptTypeString=function(e){return e&&e.length>0?e.map((function(e){return"."+e})).join(", "):"image/*"},t.getBase64=function(e){var t=new FileReader;return new Promise((function(n){t.addEventListener("load",(function(){return n(String(t.result))})),t.readAsDataURL(e)}))},t.getImage=function(e){var t=new Image;return new Promise((function(n){t.addEventListener("load",(function(){return n(t)})),t.src=URL.createObjectURL(e)}))},t.getListFiles=function(e,n){for(var r=[],a=0;a<e.length;a+=1)r.push(t.getBase64(e[a]));return Promise.all(r).then((function(t){return t.map((function(t,r){var a;return(a={})[n]=t,a.file=e[r],a}))}))}},2718:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(a,o){function i(e){try{u(r.next(e))}catch(t){o(t)}}function s(e){try{u(r.throw(e))}catch(t){o(t)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}u((r=r.apply(e,t||[])).next())}))},a=this&&this.__generator||function(e,t){var n,r,a,o,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(a=2&o[0]?r.return:o[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,o[1])).done)return a;switch(r=0,a&&(o=[2&o[0],a.value]),o[0]){case 0:case 1:a=o;break;case 4:return i.label++,{value:o[1],done:!1};case 5:i.label++,r=o[1],o=[0];continue;case 7:o=i.ops.pop(),i.trys.pop();continue;default:if(!(a=(a=i.trys).length>0&&a[a.length-1])&&(6===o[0]||2===o[0])){i=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){i.label=o[1];break}if(6===o[0]&&i.label<a[1]){i.label=a[1],a=o;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(o);break}a[2]&&i.ops.pop(),i.trys.pop();continue}o=t.call(e,i)}catch(s){o=[6,s],r=0}finally{n=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.getErrorValidation=t.isMaxNumberValid=t.isAcceptTypeValid=t.isMaxFileSizeValid=t.isImageValid=t.isResolutionValid=void 0;var o=n(4903),i=n(6842);t.isResolutionValid=function(e,t,n,r){if(void 0===n&&(n=0),void 0===r&&(r=1),!n||!r||!e.width||!e.height)return!0;switch(t){case"absolute":if(e.width===n&&e.height===r)return!0;break;case"ratio":var a=n/r;if(e.width/e.height===a)return!0;break;case"less":if(e.width<=n&&e.height<=r)return!0;break;case"more":if(e.width>=n&&e.height>=r)return!0}return!1},t.isImageValid=function(e){return!!e.includes("image")},t.isMaxFileSizeValid=function(e,t){return!t||e<=t},t.isAcceptTypeValid=function(e,t){if(e&&e.length>0){var n=t.split(".").pop()||"";if(e.findIndex((function(e){return e.toLowerCase()===n.toLowerCase()}))<0)return!1}return!0},t.isMaxNumberValid=function(e,t,n){if(0!==t&&!t)return!0;if(n===o.DEFAULT_NULL_INDEX){if(e<=t)return!0}else if(e<=t+1)return!0;return!1},t.getErrorValidation=function(e){var n=e.fileList,o=e.value,s=e.maxNumber,u=e.keyUpdate,c=e.acceptType,l=e.maxFileSize,f=e.resolutionType,d=e.resolutionWidth,p=e.resolutionHeight;return r(void 0,void 0,void 0,(function(){var e,r,h,m;return a(this,(function(a){switch(a.label){case 0:return e={},t.isMaxNumberValid(n.length+o.length,s,u)?[3,1]:(e.maxNumber=!0,[3,5]);case 1:r=0,a.label=2;case 2:return r<n.length?(h=n[r].file)?t.isImageValid(h.type)&&t.isAcceptTypeValid(c,h.name)?t.isMaxFileSizeValid(h.size,l)?f?[4,i.getImage(h)]:[3,4]:(e.maxFileSize=!0,[3,5]):(e.acceptType=!0,[3,5]):[3,4]:[3,5];case 3:if(m=a.sent(),!t.isResolutionValid(m,f,d,p))return e.resolution=!0,[3,5];a.label=4;case 4:return r+=1,[3,2];case 5:return Object.values(e).find(Boolean)?[2,e]:[2,null]}}))}))}},1372:function(e,t){"use strict";var n="function"===typeof Symbol&&Symbol.for,r=n?Symbol.for("react.element"):60103,a=n?Symbol.for("react.portal"):60106,o=n?Symbol.for("react.fragment"):60107,i=n?Symbol.for("react.strict_mode"):60108,s=n?Symbol.for("react.profiler"):60114,u=n?Symbol.for("react.provider"):60109,c=n?Symbol.for("react.context"):60110,l=n?Symbol.for("react.async_mode"):60111,f=n?Symbol.for("react.concurrent_mode"):60111,d=n?Symbol.for("react.forward_ref"):60112,p=n?Symbol.for("react.suspense"):60113,h=n?Symbol.for("react.suspense_list"):60120,m=n?Symbol.for("react.memo"):60115,v=n?Symbol.for("react.lazy"):60116,g=n?Symbol.for("react.block"):60121,y=n?Symbol.for("react.fundamental"):60117,b=n?Symbol.for("react.responder"):60118,x=n?Symbol.for("react.scope"):60119;function w(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case l:case f:case o:case s:case i:case p:return e;default:switch(e=e&&e.$$typeof){case c:case d:case v:case m:case u:return e;default:return t}}case a:return t}}}function k(e){return w(e)===f}t.AsyncMode=l,t.ConcurrentMode=f,t.ContextConsumer=c,t.ContextProvider=u,t.Element=r,t.ForwardRef=d,t.Fragment=o,t.Lazy=v,t.Memo=m,t.Portal=a,t.Profiler=s,t.StrictMode=i,t.Suspense=p,t.isAsyncMode=function(e){return k(e)||w(e)===l},t.isConcurrentMode=k,t.isContextConsumer=function(e){return w(e)===c},t.isContextProvider=function(e){return w(e)===u},t.isElement=function(e){return"object"===typeof e&&null!==e&&e.$$typeof===r},t.isForwardRef=function(e){return w(e)===d},t.isFragment=function(e){return w(e)===o},t.isLazy=function(e){return w(e)===v},t.isMemo=function(e){return w(e)===m},t.isPortal=function(e){return w(e)===a},t.isProfiler=function(e){return w(e)===s},t.isStrictMode=function(e){return w(e)===i},t.isSuspense=function(e){return w(e)===p},t.isValidElementType=function(e){return"string"===typeof e||"function"===typeof e||e===o||e===f||e===s||e===i||e===p||e===h||"object"===typeof e&&null!==e&&(e.$$typeof===v||e.$$typeof===m||e.$$typeof===u||e.$$typeof===c||e.$$typeof===d||e.$$typeof===y||e.$$typeof===b||e.$$typeof===x||e.$$typeof===g)},t.typeOf=w},7441:function(e,t,n){"use strict";e.exports=n(1372)},3959:function(e,t,n){"use strict";t.be=void 0;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(2791),o=f(a),i=f(n(2007)),s=n(214),u=f(n(6172)),c=f(n(3287)),l=f(n(9054));function f(e){return e&&e.__esModule?e:{default:e}}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function h(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var m=0,v=0,g=0,y=0,b="data-lazyload-listened",x=[],w=[],k=!1;try{var S=Object.defineProperty({},"passive",{get:function(){k=!0}});window.addEventListener("test",null,S)}catch(D){}var _=!!k&&{capture:!1,passive:!0},N=function(e){var t=e.ref;if(t instanceof HTMLElement){var n=(0,u.default)(t),r=e.props.overflow&&n!==t.ownerDocument&&n!==document&&n!==document.documentElement?function(e,t){var n=e.ref,r=void 0,a=void 0,o=void 0,i=void 0;try{var s=t.getBoundingClientRect();r=s.top,a=s.left,o=s.height,i=s.width}catch(D){r=m,a=v,o=y,i=g}var u=window.innerHeight||document.documentElement.clientHeight,c=window.innerWidth||document.documentElement.clientWidth,l=Math.max(r,0),f=Math.max(a,0),d=Math.min(u,r+o)-l,p=Math.min(c,a+i)-f,h=void 0,b=void 0,x=void 0,w=void 0;try{var k=n.getBoundingClientRect();h=k.top,b=k.left,x=k.height,w=k.width}catch(D){h=m,b=v,x=y,w=g}var S=h-l,_=b-f,N=Array.isArray(e.props.offset)?e.props.offset:[e.props.offset,e.props.offset];return S-N[0]<=d&&S+x+N[1]>=0&&_-N[0]<=p&&_+w+N[1]>=0}(e,n):function(e){var t=e.ref;if(!(t.offsetWidth||t.offsetHeight||t.getClientRects().length))return!1;var n=void 0,r=void 0;try{var a=t.getBoundingClientRect();n=a.top,r=a.height}catch(D){n=m,r=y}var o=window.innerHeight||document.documentElement.clientHeight,i=Array.isArray(e.props.offset)?e.props.offset:[e.props.offset,e.props.offset];return n-i[0]<=o&&n+r+i[1]>=0}(e);r?e.visible||(e.props.once&&w.push(e),e.visible=!0,e.forceUpdate()):e.props.once&&e.visible||(e.visible=!1,e.props.unmountIfInvisible&&e.forceUpdate())}},E=function(){w.forEach((function(e){var t=x.indexOf(e);-1!==t&&x.splice(t,1)})),w=[]},C=function(){for(var e=0;e<x.length;++e){var t=x[e];N(t)}E()},T=void 0,I=null,O=function(e){function t(e){d(this,t);var n=p(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.visible=!1,n.setRef=n.setRef.bind(n),n}return h(t,e),r(t,[{key:"componentDidMount",value:function(){var e=window,t=this.props.scrollContainer;t&&"string"===typeof t&&(e=e.document.querySelector(t));var n=void 0!==this.props.debounce&&"throttle"===T||"debounce"===T&&void 0===this.props.debounce;if(n&&((0,s.off)(e,"scroll",I,_),(0,s.off)(window,"resize",I,_),I=null),I||(void 0!==this.props.debounce?(I=(0,c.default)(C,"number"===typeof this.props.debounce?this.props.debounce:300),T="debounce"):void 0!==this.props.throttle?(I=(0,l.default)(C,"number"===typeof this.props.throttle?this.props.throttle:300),T="throttle"):I=C),this.props.overflow){var r=(0,u.default)(this.ref);if(r&&"function"===typeof r.getAttribute){var a=+r.getAttribute(b)+1;1===a&&r.addEventListener("scroll",I,_),r.setAttribute(b,a)}}else if(0===x.length||n){var o=this.props,i=o.scroll,f=o.resize;i&&(0,s.on)(e,"scroll",I,_),f&&(0,s.on)(window,"resize",I,_)}x.push(this),N(this)}},{key:"shouldComponentUpdate",value:function(){return this.visible}},{key:"componentWillUnmount",value:function(){if(this.props.overflow){var e=(0,u.default)(this.ref);if(e&&"function"===typeof e.getAttribute){var t=+e.getAttribute(b)-1;0===t?(e.removeEventListener("scroll",I,_),e.removeAttribute(b)):e.setAttribute(b,t)}}var n=x.indexOf(this);-1!==n&&x.splice(n,1),0===x.length&&"undefined"!==typeof window&&((0,s.off)(window,"resize",I,_),(0,s.off)(window,"scroll",I,_))}},{key:"setRef",value:function(e){e&&(this.ref=e)}},{key:"render",value:function(){var e=this.props,t=e.height,n=e.children,r=e.placeholder,a=e.className,i=e.classNamePrefix,s=e.style;return o.default.createElement("div",{className:i+"-wrapper "+a,ref:this.setRef,style:s},this.visible?n:r||o.default.createElement("div",{style:{height:t},className:i+"-placeholder"}))}}]),t}(a.Component);O.propTypes={className:i.default.string,classNamePrefix:i.default.string,once:i.default.bool,height:i.default.oneOfType([i.default.number,i.default.string]),offset:i.default.oneOfType([i.default.number,i.default.arrayOf(i.default.number)]),overflow:i.default.bool,resize:i.default.bool,scroll:i.default.bool,children:i.default.node,throttle:i.default.oneOfType([i.default.number,i.default.bool]),debounce:i.default.oneOfType([i.default.number,i.default.bool]),placeholder:i.default.node,scrollContainer:i.default.oneOfType([i.default.string,i.default.object]),unmountIfInvisible:i.default.bool,style:i.default.object},O.defaultProps={className:"",classNamePrefix:"lazyload",once:!1,offset:0,overflow:!1,resize:!1,scroll:!0,unmountIfInvisible:!1};var A=function(e){return e.displayName||e.name||"Component"};t.ZP=O,t.be=C},3287:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){var r=void 0,a=void 0,o=void 0,i=void 0,s=void 0,u=function u(){var c=+new Date-i;c<t&&c>=0?r=setTimeout(u,t-c):(r=null,n||(s=e.apply(o,a),r||(o=null,a=null)))};return function(){o=this,a=arguments,i=+new Date;var c=n&&!r;return r||(r=setTimeout(u,t)),c&&(s=e.apply(o,a),o=null,a=null),s}}},214:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.on=function(e,t,n,r){r=r||!1,e.addEventListener?e.addEventListener(t,n,r):e.attachEvent&&e.attachEvent("on"+t,(function(t){n.call(e,t||window.event)}))},t.off=function(e,t,n,r){r=r||!1,e.removeEventListener?e.removeEventListener(t,n,r):e.detachEvent&&e.detachEvent("on"+t,n)}},6172:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){if(!(e instanceof HTMLElement))return document.documentElement;for(var t="absolute"===e.style.position,n=/(scroll|auto)/,r=e;r;){if(!r.parentNode)return e.ownerDocument||document.documentElement;var a=window.getComputedStyle(r),o=a.position,i=a.overflow,s=a["overflow-x"],u=a["overflow-y"];if("static"===o&&t)r=r.parentNode;else{if(n.test(i)&&n.test(s)&&n.test(u))return r;r=r.parentNode}}return e.ownerDocument||e.documentElement||document.documentElement}},9054:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){var r,a;return t||(t=250),function(){var o=n||this,i=+new Date,s=arguments;r&&i<r+t?(clearTimeout(a),a=setTimeout((function(){r=i,e.apply(o,s)}),t)):(r=i,e.apply(o,s))}}},642:function(e,t,n){"use strict";var r=n(2791),a=n(4164),o=n(2157),i=n(420),s=(n(1211),n(4064)),u=n(8111),c=n(2007),l=n(8045),f=o({displayName:"Quill",mixins:[i],propTypes:{id:c.string,className:c.string,theme:c.string,style:c.object,readOnly:c.bool,value:c.oneOfType([c.string,c.shape({ops:c.array})]),defaultValue:c.oneOfType([c.string,c.shape({ops:c.array})]),placeholder:c.string,tabIndex:c.number,bounds:c.oneOfType([c.string,c.element]),onChange:c.func,onChangeSelection:c.func,onFocus:c.func,onBlur:c.func,onKeyPress:c.func,onKeyDown:c.func,onKeyUp:c.func,preserveWhitespace:c.bool,modules:function(e){var t=c.object.apply(this,arguments);return t||(e.modules&&e.modules.toolbar&&e.modules.toolbar[0]&&e.modules.toolbar[0].type?new Error("Since v1.0.0, React Quill will not create a custom toolbar for you anymore. Create a toolbar explictly, or let Quill create one. See: https://github.com/zenoamaro/react-quill#upgrading-to-react-quill-v100"):void 0)},toolbar:function(e){if("toolbar"in e)return new Error("The `toolbar` prop has been deprecated. Use `modules.toolbar` instead. See: https://github.com/zenoamaro/react-quill#upgrading-to-react-quill-v100")},formats:function(e){var t=c.arrayOf(c.string).apply(this,arguments);if(t)return new Error("You cannot specify custom `formats` anymore. Use Parchment instead.  See: https://github.com/zenoamaro/react-quill#upgrading-to-react-quill-v100.")},styles:function(e){if("styles"in e)return new Error("The `styles` prop has been deprecated. Use custom stylesheets instead. See: https://github.com/zenoamaro/react-quill#upgrading-to-react-quill-v100.")},pollInterval:function(e){if("pollInterval"in e)return new Error("The `pollInterval` property does not have any effect anymore. You can safely remove it from your props.See: https://github.com/zenoamaro/react-quill#upgrading-to-react-quill-v100.")},children:function(e){var t=c.element.apply(this,arguments);if(t)return new Error("The Quill editing area can only be composed of a single React element.");if(r.Children.count(e.children)){var n=r.Children.only(e.children);if("textarea"===n.type)return new Error("Quill does not support editing on a <textarea>. Use a <div> instead.")}}},dirtyProps:["modules","formats","bounds","theme","children"],cleanProps:["id","className","style","placeholder","tabIndex","onChange","onChangeSelection","onFocus","onBlur","onKeyPress","onKeyDown","onKeyUp"],getDefaultProps:function(){return{theme:"snow",modules:{}}},isControlled:function(){return"value"in this.props},getInitialState:function(){return{generation:0,value:this.isControlled()?this.props.value:this.props.defaultValue}},componentWillReceiveProps:function(e,t){var n=this.editor;if(n){if("value"in e){var r=this.getEditorContents(),a=e.value;if(a===this.lastDeltaChangeSet)throw new Error("You are passing the `delta` object from the `onChange` event back as `value`. You most probably want `editor.getContents()` instead. See: https://github.com/zenoamaro/react-quill#using-deltas");this.isEqualValue(a,r)||this.setEditorContents(n,a)}return"readOnly"in e&&e.readOnly!==this.props.readOnly&&this.setEditorReadOnly(n,e.readOnly),this.shouldComponentRegenerate(e,t)?this.regenerate():void 0}},componentDidMount:function(){if(this.editor=this.createEditor(this.getEditingArea(),this.getEditorConfig()),this.quillDelta)return this.editor.setContents(this.quillDelta),this.editor.setSelection(this.quillSelection),this.editor.focus(),void(this.quillDelta=this.quillSelection=null);this.state.value&&this.setEditorContents(this.editor,this.state.value)},componentWillUnmount:function(){var e;(e=this.getEditor())&&(this.unhookEditor(e),this.editor=null)},shouldComponentUpdate:function(e,t){var n=this;return this.state.generation!==t.generation||s(this.cleanProps,(function(t){return!u(e[t],n.props[t])}))},shouldComponentRegenerate:function(e,t){var n=this;return s(this.dirtyProps,(function(t){return!u(e[t],n.props[t])}))},componentWillUpdate:function(e,t){this.state.generation!==t.generation&&this.componentWillUnmount()},componentDidUpdate:function(e,t){this.state.generation!==t.generation&&this.componentDidMount()},getEditorConfig:function(){return{bounds:this.props.bounds,formats:this.props.formats,modules:this.props.modules,placeholder:this.props.placeholder,readOnly:this.props.readOnly,scrollingContainer:this.props.scrollingContainer,tabIndex:this.props.tabIndex,theme:this.props.theme}},getEditor:function(){return this.editor},getEditingArea:function(){return a.findDOMNode(this.editingArea)},getEditorContents:function(){return this.state.value},getEditorSelection:function(){return this.state.selection},isDelta:function(e){return e&&e.ops},isEqualValue:function(e,t){return this.isDelta(e)&&this.isDelta(t)?u(e.ops,t.ops):u(e,t)},regenerate:function(){this.quillDelta=this.editor.getContents(),this.quillSelection=this.editor.getSelection(),this.setState({generation:this.state.generation+1})},renderEditingArea:function(){var e=this,t=this.props.children,n=this.props.preserveWhitespace,a={key:this.state.generation,tabIndex:this.props.tabIndex,ref:function(t){e.editingArea=t}},o=r.Children.count(t)?r.Children.only(t):null,i=n?l.pre:l.div;return o?r.cloneElement(o,a):i(a)},render:function(){return l.div({id:this.props.id,style:this.props.style,key:this.state.generation,className:["quill"].concat(this.props.className).join(" "),onKeyPress:this.props.onKeyPress,onKeyDown:this.props.onKeyDown,onKeyUp:this.props.onKeyUp},this.renderEditingArea())},onEditorChangeText:function(e,t,n,r){var a=this.getEditorContents(),o=this.isDelta(a)?r.getContents():r.getHTML();this.isEqualValue(o,a)||(this.lastDeltaChangeSet=t,this.setState({value:o}),this.props.onChange&&this.props.onChange(e,t,n,r))},onEditorChangeSelection:function(e,t,n){var r=this.getEditorSelection(),a=!r&&e,o=r&&!e;u(e,r)||(this.setState({selection:e}),this.props.onChangeSelection&&this.props.onChangeSelection(e,t,n),a&&this.props.onFocus?this.props.onFocus(e,t,n):o&&this.props.onBlur&&this.props.onBlur(r,t,n))},focus:function(){this.editor.focus()},blur:function(){this.setEditorSelection(this.editor,null)}});e.exports=f},6770:function(e,t,n){var r=n(6921),a=n(642);e.exports=a,e.exports.default=a,e.exports.Quill=r,e.exports.Mixin=n(420),e.exports.Toolbar=n(2376)},420:function(e,t,n){"use strict";var r=n(6921),a={createEditor:function(e,t){var n=new r(e,t);return void 0!==t.tabIndex&&this.setEditorTabIndex(n,t.tabIndex),this.hookEditor(n),n},hookEditor:function(e){var t=this.makeUnprivilegedEditor(e);this.handleTextChange=function(n,r,a){this.onEditorChangeText&&(this.onEditorChangeText(e.root.innerHTML,n,a,t),this.onEditorChangeSelection(e.getSelection(),a,t))}.bind(this),this.handleSelectionChange=function(e,n,r){this.onEditorChangeSelection&&this.onEditorChangeSelection(e,r,t)}.bind(this),e.on("editor-change",function(e,t,n,a){e===r.events.SELECTION_CHANGE&&this.handleSelectionChange(t,n,a),e===r.events.TEXT_CHANGE&&this.handleTextChange(t,n,a)}.bind(this))},unhookEditor:function(e){e.off("selection-change"),e.off("text-change")},setEditorReadOnly:function(e,t){t?e.disable():e.enable()},setEditorContents:function(e,t){var n=e.getSelection();"string"===typeof t?e.setContents(e.clipboard.convert(t)):e.setContents(t),n&&e.hasFocus()&&this.setEditorSelection(e,n)},setEditorSelection:function(e,t){if(t){var n=e.getLength();t.index=Math.max(0,Math.min(t.index,n-1)),t.length=Math.max(0,Math.min(t.length,n-1-t.index))}e.setSelection(t)},setEditorTabIndex:function(e,t){e.editor&&e.editor.scroll&&e.editor.scroll.domNode&&(e.editor.scroll.domNode.tabIndex=t)},makeUnprivilegedEditor:function(e){var t=e;return{getLength:function(){return t.getLength.apply(t,arguments)},getText:function(){return t.getText.apply(t,arguments)},getHTML:function(){return t.root.innerHTML},getContents:function(){return t.getContents.apply(t,arguments)},getSelection:function(){return t.getSelection.apply(t,arguments)},getBounds:function(){return t.getBounds.apply(t,arguments)}}}};e.exports=a},2376:function(e,t,n){"use strict";n(2791);var r=n(8340),a=n(2157),o=n(1211),i=n(8111),s=n(2007),u=n(8045),c=["rgb(  0,   0,   0)","rgb(230,   0,   0)","rgb(255, 153,   0)","rgb(255, 255,   0)","rgb(  0, 138,   0)","rgb(  0, 102, 204)","rgb(153,  51, 255)","rgb(255, 255, 255)","rgb(250, 204, 204)","rgb(255, 235, 204)","rgb(255, 255, 204)","rgb(204, 232, 204)","rgb(204, 224, 245)","rgb(235, 214, 255)","rgb(187, 187, 187)","rgb(240, 102, 102)","rgb(255, 194, 102)","rgb(255, 255, 102)","rgb(102, 185, 102)","rgb(102, 163, 224)","rgb(194, 133, 255)","rgb(136, 136, 136)","rgb(161,   0,   0)","rgb(178, 107,   0)","rgb(178, 178,   0)","rgb(  0,  97,   0)","rgb(  0,  71, 178)","rgb(107,  36, 178)","rgb( 68,  68,  68)","rgb( 92,   0,   0)","rgb(102,  61,   0)","rgb(102, 102,   0)","rgb(  0,  55,   0)","rgb(  0,  41, 102)","rgb( 61,  20,  10)"].map((function(e){return{value:e}})),l=[{label:"Formats",type:"group",items:[{label:"Font",type:"font",items:[{label:"Sans Serif",value:"sans-serif",selected:!0},{label:"Serif",value:"serif"},{label:"Monospace",value:"monospace"}]},{label:"Size",type:"size",items:[{label:"Small",value:"10px"},{label:"Normal",value:"13px",selected:!0},{label:"Large",value:"18px"},{label:"Huge",value:"32px"}]},{label:"Alignment",type:"align",items:[{label:"",value:"",selected:!0},{label:"",value:"center"},{label:"",value:"right"},{label:"",value:"justify"}]}]},{label:"Text",type:"group",items:[{type:"bold",label:"Bold"},{type:"italic",label:"Italic"},{type:"strike",label:"Strike"},{type:"underline",label:"Underline"},{type:"color",label:"Color",items:c},{type:"background",label:"Background color",items:c},{type:"link",label:"Link"}]},{label:"Blocks",type:"group",items:[{type:"list",value:"bullet"},{type:"list",value:"ordered"}]},{label:"Blocks",type:"group",items:[{type:"image",label:"Image"}]}],f=a({displayName:"Quill Toolbar",propTypes:{id:s.string,className:s.string,style:s.object,items:s.array},getDefaultProps:function(){return{items:l}},componentDidMount:function(){console.warn("QuillToolbar is deprecated. Consider switching to the official Quill toolbar format, or providing your own toolbar instead. See: https://github.com/zenoamaro/react-quill#upgrading-to-react-quill-v1-0-0")},shouldComponentUpdate:function(e,t){return!i(e,this.props)},renderGroup:function(e,t){return u.span({key:e.label||t,className:"ql-formats"},e.items.map(this.renderItem))},renderChoiceItem:function(e,t){return u.option({key:e.label||e.value||t,value:e.value},e.label)},renderChoices:function(e,t){var n=e.items.map(this.renderChoiceItem),r=o(e.items,(function(e){return e.selected})),a={key:e.label||t,title:e.label,className:"ql-"+e.type,value:r.value};return u.select(a,n)},renderButton:function(e,t){return u.button({type:"button",key:e.label||e.value||t,value:e.value,className:"ql-"+e.type,title:e.label},e.children)},renderAction:function(e,t){return u.button({key:e.label||e.value||t,className:"ql-"+e.type,title:e.label},e.children)},renderItem:function(e,t){switch(e.type){case"group":return this.renderGroup(e,t);case"font":case"header":case"align":case"size":case"color":case"background":return this.renderChoices(e,t);case"bold":case"italic":case"underline":case"strike":case"link":case"list":case"bullet":case"ordered":case"indent":case"image":case"video":return this.renderButton(e,t);default:return this.renderAction(e,t)}},getClassName:function(){return"quill-toolbar "+(this.props.className||"")},render:function(){var e=this.props.items.map(this.renderItem).map(r.renderToStaticMarkup).join("");return u.div({id:this.props.id,className:this.getClassName(),style:this.props.style,dangerouslySetInnerHTML:{__html:e}})}});e.exports=f,f.defaultItems=l,f.defaultColors=c},8459:function(e,t){"use strict";var n=60103,r=60106,a=60107,o=60108,i=60114,s=60109,u=60110,c=60112,l=60113,f=60120,d=60115,p=60116,h=60121,m=60122,v=60117,g=60129,y=60131;if("function"===typeof Symbol&&Symbol.for){var b=Symbol.for;n=b("react.element"),r=b("react.portal"),a=b("react.fragment"),o=b("react.strict_mode"),i=b("react.profiler"),s=b("react.provider"),u=b("react.context"),c=b("react.forward_ref"),l=b("react.suspense"),f=b("react.suspense_list"),d=b("react.memo"),p=b("react.lazy"),h=b("react.block"),m=b("react.server.block"),v=b("react.fundamental"),g=b("react.debug_trace_mode"),y=b("react.legacy_hidden")}function x(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case n:switch(e=e.type){case a:case i:case o:case l:case f:return e;default:switch(e=e&&e.$$typeof){case u:case c:case p:case d:case s:return e;default:return t}}case r:return t}}}t.isContextConsumer=function(e){return x(e)===u}},6900:function(e,t,n){"use strict";e.exports=n(8459)},4805:function(e,t,n){!function(t,r){var a;e.exports=(a=n(2791),function(e){function t(r){if(n[r])return n[r].exports;var a=n[r]={i:r,l:!1,exports:{}};return e[r].call(a.exports,a,a.exports,t),a.l=!0,a.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=8)}([function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var a=r(n(1)),o=r(n(9)),i=r(n(2)),s=n(11),u=r(n(3)),c=r(n(7)),l=function(e){return e.query||(0,u.default)(e)},f=function(e){if(e)return Object.keys(e).reduce((function(t,n){return t[(0,i.default)(n)]=e[n],t}),{})},d=function(){var e=a.default.useRef(!1);return a.default.useEffect((function(){e.current=!0}),[]),e.current},p=function(e){var t=a.default.useContext(c.default),n=function(){return f(e)||f(t)},r=a.default.useState(n),o=r[0],i=r[1];return a.default.useEffect((function(){var e=n();(0,s.shallowEqualObjects)(o,e)||i(e)}),[e,t]),o},h=function(e){var t=function(){return l(e)},n=a.default.useState(t),r=n[0],o=n[1];return a.default.useEffect((function(){var e=t();r!==e&&o(e)}),[e]),r},m=function(e,t){var n=function(){return(0,o.default)(e,t||{},!!t)},r=a.default.useState(n),i=r[0],s=r[1],u=d();return a.default.useEffect((function(){if(u){var e=n();return s(e),function(){e&&e.dispose()}}}),[e,t]),i},v=function(e){var t=a.default.useState(e.matches),n=t[0],r=t[1];return a.default.useEffect((function(){var t=function(){r(e.matches)};return e.addListener(t),t(),function(){e.removeListener(t)}}),[e]),n},g=function(e,t,n){var r=p(t),o=h(e);if(!o)throw new Error("Invalid or missing MediaQuery!");var i=m(o,r),s=v(i),u=d();return a.default.useEffect((function(){u&&n&&n(s)}),[s]),a.default.useEffect((function(){return function(){i&&i.dispose()}}),[]),s};t.default=g},function(e,t){e.exports=a},function(e,t,n){"use strict";function r(e){return"-"+e.toLowerCase()}function a(e){if(s.hasOwnProperty(e))return s[e];var t=e.replace(o,r);return s[e]=i.test(t)?"-"+t:t}Object.defineProperty(t,"__esModule",{value:!0});var o=/[A-Z]/g,i=/^ms-/,s={};t.default=a},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var a=r(n(2)),o=r(n(12)),i=function(e){return"not ".concat(e)},s=function(e,t){var n=(0,a.default)(e);return"number"==typeof t&&(t="".concat(t,"px")),!0===t?n:!1===t?i(n):"(".concat(n,": ").concat(t,")")},u=function(e){return e.join(" and ")},c=function(e){var t=[];return Object.keys(o.default.all).forEach((function(n){var r=e[n];null!=r&&t.push(s(n,r))})),u(t)};t.default=c},function(e,t,n){"use strict";e.exports=n(14)},function(e,t,n){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},function(e,t){e.exports=Function.call.bind(Object.prototype.hasOwnProperty)},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var a=r(n(1)).default.createContext(void 0);t.default=a},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Context=t.toQuery=t.useMediaQuery=t.default=void 0;var a=r(n(0));t.useMediaQuery=a.default;var o=r(n(18));t.default=o.default;var i=r(n(3));t.toQuery=i.default;var s=r(n(7));t.Context=s.default},function(e,t,n){"use strict";function r(e,t,n){function r(e){l&&l.addListener(e)}function a(e){l&&l.removeListener(e)}function s(e){c.matches=e.matches,c.media=e.media}function u(){l&&l.removeListener(s)}var c=this;if(i&&!n){var l=i.call(window,e);this.matches=l.matches,this.media=l.media,l.addListener(s)}else this.matches=o(e,t),this.media=e;this.addListener=r,this.removeListener=a,this.dispose=u}function a(e,t,n){return new r(e,t,n)}var o=n(10).match,i="undefined"!=typeof window?window.matchMedia:null;e.exports=a},function(e,t,n){"use strict";function r(e,t){return a(e).some((function(e){var n=e.inverse,r="all"===e.type||t.type===e.type;if(r&&n||!r&&!n)return!1;var a=e.expressions.every((function(e){var n=e.feature,r=e.modifier,a=e.value,u=t[n];if(!u)return!1;switch(n){case"orientation":case"scan":return u.toLowerCase()===a.toLowerCase();case"width":case"height":case"device-width":case"device-height":a=s(a),u=s(u);break;case"resolution":a=i(a),u=i(u);break;case"aspect-ratio":case"device-aspect-ratio":case"device-pixel-ratio":a=o(a),u=o(u);break;case"grid":case"color":case"color-index":case"monochrome":a=parseInt(a,10)||1,u=parseInt(u,10)||0}switch(r){case"min":return u>=a;case"max":return u<=a;default:return u===a}}));return a&&!n||!a&&n}))}function a(e){return e.split(",").map((function(e){var t=(e=e.trim()).match(u),n=t[1],r=t[2],a=t[3]||"",o={};return o.inverse=!!n&&"not"===n.toLowerCase(),o.type=r?r.toLowerCase():"all",a=a.match(/\([^\)]+\)/g)||[],o.expressions=a.map((function(e){var t=e.match(c),n=t[1].toLowerCase().match(l);return{modifier:n[1],feature:n[2],value:t[2]}})),o}))}function o(e){var t,n=Number(e);return n||(n=(t=e.match(/^(\d+)\s*\/\s*(\d+)$/))[1]/t[2]),n}function i(e){var t=parseFloat(e);switch(String(e).match(d)[1]){case"dpcm":return t/2.54;case"dppx":return 96*t;default:return t}}function s(e){var t=parseFloat(e);switch(String(e).match(f)[1]){case"em":case"rem":return 16*t;case"cm":return 96*t/2.54;case"mm":return 96*t/2.54/10;case"in":return 96*t;case"pt":return 72*t;case"pc":return 72*t/12;default:return t}}t.match=r,t.parse=a;var u=/(?:(only|not)?\s*([^\s\(\)]+)(?:\s*and)?\s*)?(.+)?/i,c=/\(\s*([^\s\:\)]+)\s*(?:\:\s*([^\s\)]+))?\s*\)/,l=/^(?:(min|max)-)?(.+)/,f=/(em|rem|px|cm|mm|in|pt|pc)?$/,d=/(dpi|dpcm|dppx)?$/},function(e,t,n){"use strict";function r(e,t){if(e===t)return!0;if(!e||!t)return!1;var n=Object.keys(e),r=Object.keys(t),a=n.length;if(r.length!==a)return!1;for(var o=0;o<a;o++){var i=n[o];if(e[i]!==t[i]||!Object.prototype.hasOwnProperty.call(t,i))return!1}return!0}function a(e,t){if(e===t)return!0;if(!e||!t)return!1;var n=e.length;if(t.length!==n)return!1;for(var r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"shallowEqualArrays",(function(){return a})),n.d(t,"shallowEqualObjects",(function(){return r}))},function(e,t,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},r.apply(this,arguments)},a=this&&this.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=o(n(13)),s=i.default.oneOfType([i.default.string,i.default.number]),u={all:i.default.bool,grid:i.default.bool,aural:i.default.bool,braille:i.default.bool,handheld:i.default.bool,print:i.default.bool,projection:i.default.bool,screen:i.default.bool,tty:i.default.bool,tv:i.default.bool,embossed:i.default.bool},c={orientation:i.default.oneOf(["portrait","landscape"]),scan:i.default.oneOf(["progressive","interlace"]),aspectRatio:i.default.string,deviceAspectRatio:i.default.string,height:s,deviceHeight:s,width:s,deviceWidth:s,color:i.default.bool,colorIndex:i.default.bool,monochrome:i.default.bool,resolution:s,type:Object.keys(u)},l=a(c,["type"]),f=r({minAspectRatio:i.default.string,maxAspectRatio:i.default.string,minDeviceAspectRatio:i.default.string,maxDeviceAspectRatio:i.default.string,minHeight:s,maxHeight:s,minDeviceHeight:s,maxDeviceHeight:s,minWidth:s,maxWidth:s,minDeviceWidth:s,maxDeviceWidth:s,minColor:i.default.number,maxColor:i.default.number,minColorIndex:i.default.number,maxColorIndex:i.default.number,minMonochrome:i.default.number,maxMonochrome:i.default.number,minResolution:s,maxResolution:s},l),d=r(r({},u),f);t.default={all:d,types:u,matchers:c,features:f}},function(e,t,n){var r=n(4);e.exports=n(15)(r.isElement,!0)},function(e,t,n){"use strict";!function(){function e(e){return"string"==typeof e||"function"==typeof e||e===b||e===N||e===w||e===x||e===C||e===T||"object"==typeof e&&null!==e&&(e.$$typeof===O||e.$$typeof===I||e.$$typeof===k||e.$$typeof===S||e.$$typeof===E||e.$$typeof===D||e.$$typeof===M||e.$$typeof===R||e.$$typeof===A)}function n(e){if("object"==typeof e&&null!==e){var t=e.$$typeof;switch(t){case g:var n=e.type;switch(n){case _:case N:case b:case w:case x:case C:return n;default:var r=n&&n.$$typeof;switch(r){case S:case E:case O:case I:case k:return r;default:return t}}case y:return t}}}function r(e){return K||(K=!0,console.warn("The ReactIs.isAsyncMode() alias has been deprecated, and will be removed in React 17+. Update your code to use ReactIs.isConcurrentMode() instead. It has the exact same API.")),a(e)||n(e)===_}function a(e){return n(e)===N}function o(e){return n(e)===S}function i(e){return n(e)===k}function s(e){return"object"==typeof e&&null!==e&&e.$$typeof===g}function u(e){return n(e)===E}function c(e){return n(e)===b}function l(e){return n(e)===O}function f(e){return n(e)===I}function d(e){return n(e)===y}function p(e){return n(e)===w}function h(e){return n(e)===x}function m(e){return n(e)===C}var v="function"==typeof Symbol&&Symbol.for,g=v?Symbol.for("react.element"):60103,y=v?Symbol.for("react.portal"):60106,b=v?Symbol.for("react.fragment"):60107,x=v?Symbol.for("react.strict_mode"):60108,w=v?Symbol.for("react.profiler"):60114,k=v?Symbol.for("react.provider"):60109,S=v?Symbol.for("react.context"):60110,_=v?Symbol.for("react.async_mode"):60111,N=v?Symbol.for("react.concurrent_mode"):60111,E=v?Symbol.for("react.forward_ref"):60112,C=v?Symbol.for("react.suspense"):60113,T=v?Symbol.for("react.suspense_list"):60120,I=v?Symbol.for("react.memo"):60115,O=v?Symbol.for("react.lazy"):60116,A=v?Symbol.for("react.block"):60121,D=v?Symbol.for("react.fundamental"):60117,M=v?Symbol.for("react.responder"):60118,R=v?Symbol.for("react.scope"):60119,P=_,j=N,F=S,L=k,B=g,z=E,Z=b,V=O,U=I,q=y,W=w,H=x,G=C,K=!1;t.AsyncMode=P,t.ConcurrentMode=j,t.ContextConsumer=F,t.ContextProvider=L,t.Element=B,t.ForwardRef=z,t.Fragment=Z,t.Lazy=V,t.Memo=U,t.Portal=q,t.Profiler=W,t.StrictMode=H,t.Suspense=G,t.isAsyncMode=r,t.isConcurrentMode=a,t.isContextConsumer=o,t.isContextProvider=i,t.isElement=s,t.isForwardRef=u,t.isFragment=c,t.isLazy=l,t.isMemo=f,t.isPortal=d,t.isProfiler=p,t.isStrictMode=h,t.isSuspense=m,t.isValidElementType=e,t.typeOf=n}()},function(e,t,n){"use strict";function r(){return null}var a=n(4),o=n(16),i=n(5),s=n(6),u=n(17),c=function(){};c=function(e){var t="Warning: "+e;"undefined"!=typeof console&&console.error(t);try{throw new Error(t)}catch(n){}},e.exports=function(e,t){function n(e){var t=e&&(T&&e[T]||e[I]);if("function"==typeof t)return t}function l(e,t){return e===t?0!==e||1/e==1/t:e!==e&&t!==t}function f(e,t){this.message=e,this.data=t&&"object"==typeof t?t:{},this.stack=""}function d(e){function n(n,o,s,u,l,d,p){if(u=u||O,d=d||s,p!==i){if(t){var h=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use `PropTypes.checkPropTypes()` to call them. Read more at http://fb.me/use-check-prop-types");throw h.name="Invariant Violation",h}if("undefined"!=typeof console){var m=u+":"+s;!r[m]&&a<3&&(c("You are manually calling a React.PropTypes validation function for the `"+d+"` prop on `"+u+"`. This is deprecated and will throw in the standalone `prop-types` package. You may be seeing this warning due to a third-party PropTypes library. See https://fb.me/react-warning-dont-call-proptypes for details."),r[m]=!0,a++)}}return null==o[s]?n?new f(null===o[s]?"The "+l+" `"+d+"` is marked as required in `"+u+"`, but its value is `null`.":"The "+l+" `"+d+"` is marked as required in `"+u+"`, but its value is `undefined`."):null:e(o,s,u,l,d)}var r={},a=0,o=n.bind(null,!1);return o.isRequired=n.bind(null,!0),o}function p(e){function t(t,n,r,a,o,i){var s=t[n];return _(s)!==e?new f("Invalid "+a+" `"+o+"` of type `"+N(s)+"` supplied to `"+r+"`, expected `"+e+"`.",{expectedType:e}):null}return d(t)}function h(e){function t(t,n,r,a,o){if("function"!=typeof e)return new f("Property `"+o+"` of component `"+r+"` has invalid PropType notation inside arrayOf.");var s=t[n];if(!Array.isArray(s))return new f("Invalid "+a+" `"+o+"` of type `"+_(s)+"` supplied to `"+r+"`, expected an array.");for(var u=0;u<s.length;u++){var c=e(s,u,r,a,o+"["+u+"]",i);if(c instanceof Error)return c}return null}return d(t)}function m(e){function t(t,n,r,a,o){if(!(t[n]instanceof e)){var i=e.name||O;return new f("Invalid "+a+" `"+o+"` of type `"+C(t[n])+"` supplied to `"+r+"`, expected instance of `"+i+"`.")}return null}return d(t)}function v(e){function t(t,n,r,a,o){for(var i=t[n],s=0;s<e.length;s++)if(l(i,e[s]))return null;var u=JSON.stringify(e,(function(e,t){return"symbol"===N(t)?String(t):t}));return new f("Invalid "+a+" `"+o+"` of value `"+String(i)+"` supplied to `"+r+"`, expected one of "+u+".")}return Array.isArray(e)?d(t):(c(arguments.length>1?"Invalid arguments supplied to oneOf, expected an array, got "+arguments.length+" arguments. A common mistake is to write oneOf(x, y, z) instead of oneOf([x, y, z]).":"Invalid argument supplied to oneOf, expected an array."),r)}function g(e){function t(t,n,r,a,o){if("function"!=typeof e)return new f("Property `"+o+"` of component `"+r+"` has invalid PropType notation inside objectOf.");var u=t[n],c=_(u);if("object"!==c)return new f("Invalid "+a+" `"+o+"` of type `"+c+"` supplied to `"+r+"`, expected an object.");for(var l in u)if(s(u,l)){var d=e(u,l,r,a,o+"."+l,i);if(d instanceof Error)return d}return null}return d(t)}function y(e){function t(t,n,r,a,o){for(var u=[],c=0;c<e.length;c++){var l=(0,e[c])(t,n,r,a,o,i);if(null==l)return null;l.data&&s(l.data,"expectedType")&&u.push(l.data.expectedType)}return new f("Invalid "+a+" `"+o+"` supplied to `"+r+"`"+(u.length>0?", expected one of type ["+u.join(", ")+"]":"")+".")}if(!Array.isArray(e))return c("Invalid argument supplied to oneOfType, expected an instance of array."),r;for(var n=0;n<e.length;n++){var a=e[n];if("function"!=typeof a)return c("Invalid argument supplied to oneOfType. Expected an array of check functions, but received "+E(a)+" at index "+n+"."),r}return d(t)}function b(e,t,n,r,a){return new f((e||"React class")+": "+t+" type `"+n+"."+r+"` is invalid; it must be a function, usually from the `prop-types` package, but received `"+a+"`.")}function x(e){function t(t,n,r,a,o){var s=t[n],u=_(s);if("object"!==u)return new f("Invalid "+a+" `"+o+"` of type `"+u+"` supplied to `"+r+"`, expected `object`.");for(var c in e){var l=e[c];if("function"!=typeof l)return b(r,a,o,c,N(l));var d=l(s,c,r,a,o+"."+c,i);if(d)return d}return null}return d(t)}function w(e){function t(t,n,r,a,u){var c=t[n],l=_(c);if("object"!==l)return new f("Invalid "+a+" `"+u+"` of type `"+l+"` supplied to `"+r+"`, expected `object`.");var d=o({},t[n],e);for(var p in d){var h=e[p];if(s(e,p)&&"function"!=typeof h)return b(r,a,u,p,N(h));if(!h)return new f("Invalid "+a+" `"+u+"` key `"+p+"` supplied to `"+r+"`.\nBad object: "+JSON.stringify(t[n],null,"  ")+"\nValid keys: "+JSON.stringify(Object.keys(e),null,"  "));var m=h(c,p,r,a,u+"."+p,i);if(m)return m}return null}return d(t)}function k(t){switch(typeof t){case"number":case"string":case"undefined":return!0;case"boolean":return!t;case"object":if(Array.isArray(t))return t.every(k);if(null===t||e(t))return!0;var r=n(t);if(!r)return!1;var a,o=r.call(t);if(r!==t.entries){for(;!(a=o.next()).done;)if(!k(a.value))return!1}else for(;!(a=o.next()).done;){var i=a.value;if(i&&!k(i[1]))return!1}return!0;default:return!1}}function S(e,t){return"symbol"===e||!!t&&("Symbol"===t["@@toStringTag"]||"function"==typeof Symbol&&t instanceof Symbol)}function _(e){var t=typeof e;return Array.isArray(e)?"array":e instanceof RegExp?"object":S(t,e)?"symbol":t}function N(e){if(void 0===e||null===e)return""+e;var t=_(e);if("object"===t){if(e instanceof Date)return"date";if(e instanceof RegExp)return"regexp"}return t}function E(e){var t=N(e);switch(t){case"array":case"object":return"an "+t;case"boolean":case"date":case"regexp":return"a "+t;default:return t}}function C(e){return e.constructor&&e.constructor.name?e.constructor.name:O}var T="function"==typeof Symbol&&Symbol.iterator,I="@@iterator",O="<<anonymous>>",A={array:p("array"),bigint:p("bigint"),bool:p("boolean"),func:p("function"),number:p("number"),object:p("object"),string:p("string"),symbol:p("symbol"),any:d(r),arrayOf:h,element:function(){function t(t,n,r,a,o){var i=t[n];return e(i)?null:new f("Invalid "+a+" `"+o+"` of type `"+_(i)+"` supplied to `"+r+"`, expected a single ReactElement.")}return d(t)}(),elementType:function(){function e(e,t,n,r,o){var i=e[t];return a.isValidElementType(i)?null:new f("Invalid "+r+" `"+o+"` of type `"+_(i)+"` supplied to `"+n+"`, expected a single ReactElement type.")}return d(e)}(),instanceOf:m,node:function(){function e(e,t,n,r,a){return k(e[t])?null:new f("Invalid "+r+" `"+a+"` supplied to `"+n+"`, expected a ReactNode.")}return d(e)}(),objectOf:g,oneOf:v,oneOfType:y,shape:x,exact:w};return f.prototype=Error.prototype,A.checkPropTypes=u,A.resetWarningCache=u.resetWarningCache,A.PropTypes=A,A}},function(e,t,n){"use strict";function r(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}var a=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable;e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(e){r[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(a){return!1}}()?Object.assign:function(e,t){for(var n,s,u=r(e),c=1;c<arguments.length;c++){for(var l in n=Object(arguments[c]))o.call(n,l)&&(u[l]=n[l]);if(a){s=a(n);for(var f=0;f<s.length;f++)i.call(n,s[f])&&(u[s[f]]=n[s[f]])}}return u}},function(e,t,n){"use strict";function r(e,t,n,r,u){for(var c in e)if(s(e,c)){var l;try{if("function"!=typeof e[c]){var f=Error((r||"React class")+": "+n+" type `"+c+"` is invalid; it must be a function, usually from the `prop-types` package, but received `"+typeof e[c]+"`.This often happens because of typos such as `PropTypes.function` instead of `PropTypes.func`.");throw f.name="Invariant Violation",f}l=e[c](t,c,r,n,null,o)}catch(p){l=p}if(!l||l instanceof Error||a((r||"React class")+": type specification of "+n+" `"+c+"` is invalid; the type checker function must return `null` or an `Error` but returned a "+typeof l+". You may have forgotten to pass an argument to the type checker creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and shape all require an argument)."),l instanceof Error&&!(l.message in i)){i[l.message]=!0;var d=u?u():"";a("Failed "+n+" type: "+l.message+(null!=d?d:""))}}}var a=function(){},o=n(5),i={},s=n(6);a=function(e){var t="Warning: "+e;"undefined"!=typeof console&&console.error(t);try{throw new Error(t)}catch(n){}},r.resetWarningCache=function(){i={}},e.exports=r},function(e,t,n){"use strict";var r=this&&this.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=a(n(0)),i=function(e){var t=e.children,n=e.device,a=e.onChange,i=r(e,["children","device","onChange"]),s=(0,o.default)(i,n,a);return"function"==typeof t?t(s):s?t:null};t.default=i}]))}("undefined"!=typeof self&&self)},6374:function(e,t,n){"use strict";n(1725);var r=n(2791),a=60103;if(t.Fragment=60107,"function"===typeof Symbol&&Symbol.for){var o=Symbol.for;a=o("react.element"),t.Fragment=o("react.fragment")}var i=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s=Object.prototype.hasOwnProperty,u={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,o={},c=null,l=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(l=t.ref),t)s.call(t,r)&&!u.hasOwnProperty(r)&&(o[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===o[r]&&(o[r]=t[r]);return{$$typeof:a,type:e,key:c,ref:l,props:o,_owner:i.current}}t.jsx=c,t.jsxs=c},9117:function(e,t,n){"use strict";var r=n(1725),a=60103,o=60106;t.Fragment=60107,t.StrictMode=60108,t.Profiler=60114;var i=60109,s=60110,u=60112;t.Suspense=60113;var c=60115,l=60116;if("function"===typeof Symbol&&Symbol.for){var f=Symbol.for;a=f("react.element"),o=f("react.portal"),t.Fragment=f("react.fragment"),t.StrictMode=f("react.strict_mode"),t.Profiler=f("react.profiler"),i=f("react.provider"),s=f("react.context"),u=f("react.forward_ref"),t.Suspense=f("react.suspense"),c=f("react.memo"),l=f("react.lazy")}var d="function"===typeof Symbol&&Symbol.iterator;function p(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var h={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m={};function v(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||h}function g(){}function y(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||h}v.prototype.isReactComponent={},v.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error(p(85));this.updater.enqueueSetState(this,e,t,"setState")},v.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},g.prototype=v.prototype;var b=y.prototype=new g;b.constructor=y,r(b,v.prototype),b.isPureReactComponent=!0;var x={current:null},w=Object.prototype.hasOwnProperty,k={key:!0,ref:!0,__self:!0,__source:!0};function S(e,t,n){var r,o={},i=null,s=null;if(null!=t)for(r in void 0!==t.ref&&(s=t.ref),void 0!==t.key&&(i=""+t.key),t)w.call(t,r)&&!k.hasOwnProperty(r)&&(o[r]=t[r]);var u=arguments.length-2;if(1===u)o.children=n;else if(1<u){for(var c=Array(u),l=0;l<u;l++)c[l]=arguments[l+2];o.children=c}if(e&&e.defaultProps)for(r in u=e.defaultProps)void 0===o[r]&&(o[r]=u[r]);return{$$typeof:a,type:e,key:i,ref:s,props:o,_owner:x.current}}function _(e){return"object"===typeof e&&null!==e&&e.$$typeof===a}var N=/\/+/g;function E(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function C(e,t,n,r,i){var s=typeof e;"undefined"!==s&&"boolean"!==s||(e=null);var u=!1;if(null===e)u=!0;else switch(s){case"string":case"number":u=!0;break;case"object":switch(e.$$typeof){case a:case o:u=!0}}if(u)return i=i(u=e),e=""===r?"."+E(u,0):r,Array.isArray(i)?(n="",null!=e&&(n=e.replace(N,"$&/")+"/"),C(i,t,n,"",(function(e){return e}))):null!=i&&(_(i)&&(i=function(e,t){return{$$typeof:a,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(i,n+(!i.key||u&&u.key===i.key?"":(""+i.key).replace(N,"$&/")+"/")+e)),t.push(i)),1;if(u=0,r=""===r?".":r+":",Array.isArray(e))for(var c=0;c<e.length;c++){var l=r+E(s=e[c],c);u+=C(s,t,n,l,i)}else if(l=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=d&&e[d]||e["@@iterator"])?e:null}(e),"function"===typeof l)for(e=l.call(e),c=0;!(s=e.next()).done;)u+=C(s=s.value,t,n,l=r+E(s,c++),i);else if("object"===s)throw t=""+e,Error(p(31,"[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t));return u}function T(e,t,n){if(null==e)return e;var r=[],a=0;return C(e,r,"","",(function(e){return t.call(n,e,a++)})),r}function I(e){if(-1===e._status){var t=e._result;t=t(),e._status=0,e._result=t,t.then((function(t){0===e._status&&(t=t.default,e._status=1,e._result=t)}),(function(t){0===e._status&&(e._status=2,e._result=t)}))}if(1===e._status)return e._result;throw e._result}var O={current:null};function A(){var e=O.current;if(null===e)throw Error(p(321));return e}var D={ReactCurrentDispatcher:O,ReactCurrentBatchConfig:{transition:0},ReactCurrentOwner:x,IsSomeRendererActing:{current:!1},assign:r};t.Children={map:T,forEach:function(e,t,n){T(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return T(e,(function(){t++})),t},toArray:function(e){return T(e,(function(e){return e}))||[]},only:function(e){if(!_(e))throw Error(p(143));return e}},t.Component=v,t.PureComponent=y,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=D,t.cloneElement=function(e,t,n){if(null===e||void 0===e)throw Error(p(267,e));var o=r({},e.props),i=e.key,s=e.ref,u=e._owner;if(null!=t){if(void 0!==t.ref&&(s=t.ref,u=x.current),void 0!==t.key&&(i=""+t.key),e.type&&e.type.defaultProps)var c=e.type.defaultProps;for(l in t)w.call(t,l)&&!k.hasOwnProperty(l)&&(o[l]=void 0===t[l]&&void 0!==c?c[l]:t[l])}var l=arguments.length-2;if(1===l)o.children=n;else if(1<l){c=Array(l);for(var f=0;f<l;f++)c[f]=arguments[f+2];o.children=c}return{$$typeof:a,type:e.type,key:i,ref:s,props:o,_owner:u}},t.createContext=function(e,t){return void 0===t&&(t=null),(e={$$typeof:s,_calculateChangedBits:t,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:i,_context:e},e.Consumer=e},t.createElement=S,t.createFactory=function(e){var t=S.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:u,render:e}},t.isValidElement=_,t.lazy=function(e){return{$$typeof:l,_payload:{_status:-1,_result:e},_init:I}},t.memo=function(e,t){return{$$typeof:c,type:e,compare:void 0===t?null:t}},t.useCallback=function(e,t){return A().useCallback(e,t)},t.useContext=function(e,t){return A().useContext(e,t)},t.useDebugValue=function(){},t.useEffect=function(e,t){return A().useEffect(e,t)},t.useImperativeHandle=function(e,t,n){return A().useImperativeHandle(e,t,n)},t.useLayoutEffect=function(e,t){return A().useLayoutEffect(e,t)},t.useMemo=function(e,t){return A().useMemo(e,t)},t.useReducer=function(e,t,n){return A().useReducer(e,t,n)},t.useRef=function(e){return A().useRef(e)},t.useState=function(e){return A().useState(e)},t.version="17.0.2"},2791:function(e,t,n){"use strict";e.exports=n(9117)},184:function(e,t,n){"use strict";e.exports=n(6374)},124:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.autoprefix=void 0;var r,a=n(4689),o=(r=a)&&r.__esModule?r:{default:r},i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};var s={borderRadius:function(e){return{msBorderRadius:e,MozBorderRadius:e,OBorderRadius:e,WebkitBorderRadius:e,borderRadius:e}},boxShadow:function(e){return{msBoxShadow:e,MozBoxShadow:e,OBoxShadow:e,WebkitBoxShadow:e,boxShadow:e}},userSelect:function(e){return{WebkitTouchCallout:e,KhtmlUserSelect:e,MozUserSelect:e,msUserSelect:e,WebkitUserSelect:e,userSelect:e}},flex:function(e){return{WebkitBoxFlex:e,MozBoxFlex:e,WebkitFlex:e,msFlex:e,flex:e}},flexBasis:function(e){return{WebkitFlexBasis:e,flexBasis:e}},justifyContent:function(e){return{WebkitJustifyContent:e,justifyContent:e}},transition:function(e){return{msTransition:e,MozTransition:e,OTransition:e,WebkitTransition:e,transition:e}},transform:function(e){return{msTransform:e,MozTransform:e,OTransform:e,WebkitTransform:e,transform:e}},absolute:function(e){var t=e&&e.split(" ");return{position:"absolute",top:t&&t[0],right:t&&t[1],bottom:t&&t[2],left:t&&t[3]}},extend:function(e,t){var n=t[e];return n||{extend:e}}},u=t.autoprefix=function(e){var t={};return(0,o.default)(e,(function(e,n){var r={};(0,o.default)(e,(function(e,t){var n=s[t];n?r=i({},r,n(e)):r[t]=e})),t[n]=r})),t};t.default=u},8438:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.active=void 0;var r,a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=n(2791),i=(r=o)&&r.__esModule?r:{default:r};function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function c(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var l=t.active=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"span";return function(n){function r(){var n,o,c;s(this,r);for(var l=arguments.length,f=Array(l),d=0;d<l;d++)f[d]=arguments[d];return o=c=u(this,(n=r.__proto__||Object.getPrototypeOf(r)).call.apply(n,[this].concat(f))),c.state={active:!1},c.handleMouseDown=function(){return c.setState({active:!0})},c.handleMouseUp=function(){return c.setState({active:!1})},c.render=function(){return i.default.createElement(t,{onMouseDown:c.handleMouseDown,onMouseUp:c.handleMouseUp},i.default.createElement(e,a({},c.props,c.state)))},u(c,o)}return c(r,n),r}(i.default.Component)};t.default=l},296:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.hover=void 0;var r,a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=n(2791),i=(r=o)&&r.__esModule?r:{default:r};function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function c(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var l=t.hover=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"span";return function(n){function r(){var n,o,c;s(this,r);for(var l=arguments.length,f=Array(l),d=0;d<l;d++)f[d]=arguments[d];return o=c=u(this,(n=r.__proto__||Object.getPrototypeOf(r)).call.apply(n,[this].concat(f))),c.state={hover:!1},c.handleMouseOver=function(){return c.setState({hover:!0})},c.handleMouseOut=function(){return c.setState({hover:!1})},c.render=function(){return i.default.createElement(t,{onMouseOver:c.handleMouseOver,onMouseOut:c.handleMouseOut},i.default.createElement(e,a({},c.props,c.state)))},u(c,o)}return c(r,n),r}(i.default.Component)};t.default=l},9198:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.flattenNames=void 0;var r=s(n(6769)),a=s(n(4689)),o=s(n(3977)),i=s(n(2034));function s(e){return e&&e.__esModule?e:{default:e}}var u=t.flattenNames=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=[];return(0,i.default)(t,(function(t){Array.isArray(t)?e(t).map((function(e){return n.push(e)})):(0,o.default)(t)?(0,a.default)(t,(function(e,t){!0===e&&n.push(t),n.push(t+"-"+e)})):(0,r.default)(t)&&n.push(t)})),n};t.default=u},4093:function(e,t,n){"use strict";t.tz=void 0;var r=c(n(9198)),a=c(n(8351)),o=c(n(124)),i=c(n(296)),s=c(n(8438)),u=c(n(2196));function c(e){return e&&e.__esModule?e:{default:e}}i.default,t.tz=i.default,s.default,u.default;var l=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];var s=(0,r.default)(n),u=(0,a.default)(e,s);return(0,o.default)(u)};t.ZP=l},2196:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=function(e,t){var n={},r=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];n[e]=t};return 0===e&&r("first-child"),e===t-1&&r("last-child"),(0===e||e%2===0)&&r("even"),1===Math.abs(e%2)&&r("odd"),r("nth-child",e),n}},8351:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.mergeClasses=void 0;var r=i(n(4689)),a=i(n(8121)),o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};function i(e){return e&&e.__esModule?e:{default:e}}var s=t.mergeClasses=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=e.default&&(0,a.default)(e.default)||{};return t.map((function(t){var a=e[t];return a&&(0,r.default)(a,(function(e,t){n[t]||(n[t]={}),n[t]=o({},n[t],a[t])})),t})),n};t.default=s},9727:function(e){var t=function(e){"use strict";var t,n=Object.prototype,r=n.hasOwnProperty,a="function"===typeof Symbol?Symbol:{},o=a.iterator||"@@iterator",i=a.asyncIterator||"@@asyncIterator",s=a.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(A){u=function(e,t,n){return e[t]=n}}function c(e,t,n,r){var a=t&&t.prototype instanceof v?t:v,o=Object.create(a.prototype),i=new T(r||[]);return o._invoke=function(e,t,n){var r=f;return function(a,o){if(r===p)throw new Error("Generator is already running");if(r===h){if("throw"===a)throw o;return O()}for(n.method=a,n.arg=o;;){var i=n.delegate;if(i){var s=N(i,n);if(s){if(s===m)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===f)throw r=h,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=p;var u=l(e,t,n);if("normal"===u.type){if(r=n.done?h:d,u.arg===m)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r=h,n.method="throw",n.arg=u.arg)}}}(e,n,i),o}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(A){return{type:"throw",arg:A}}}e.wrap=c;var f="suspendedStart",d="suspendedYield",p="executing",h="completed",m={};function v(){}function g(){}function y(){}var b={};u(b,o,(function(){return this}));var x=Object.getPrototypeOf,w=x&&x(x(I([])));w&&w!==n&&r.call(w,o)&&(b=w);var k=y.prototype=v.prototype=Object.create(b);function S(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function _(e,t){function n(a,o,i,s){var u=l(e[a],e,o);if("throw"!==u.type){var c=u.arg,f=c.value;return f&&"object"===typeof f&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){n("next",e,i,s)}),(function(e){n("throw",e,i,s)})):t.resolve(f).then((function(e){c.value=e,i(c)}),(function(e){return n("throw",e,i,s)}))}s(u.arg)}var a;this._invoke=function(e,r){function o(){return new t((function(t,a){n(e,r,t,a)}))}return a=a?a.then(o,o):o()}}function N(e,n){var r=e.iterator[n.method];if(r===t){if(n.delegate=null,"throw"===n.method){if(e.iterator.return&&(n.method="return",n.arg=t,N(e,n),"throw"===n.method))return m;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return m}var a=l(r,e.iterator,n.arg);if("throw"===a.type)return n.method="throw",n.arg=a.arg,n.delegate=null,m;var o=a.arg;return o?o.done?(n[e.resultName]=o.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,m):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,m)}function E(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function C(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(E,this),this.reset(!0)}function I(e){if(e){var n=e[o];if(n)return n.call(e);if("function"===typeof e.next)return e;if(!isNaN(e.length)){var a=-1,i=function n(){for(;++a<e.length;)if(r.call(e,a))return n.value=e[a],n.done=!1,n;return n.value=t,n.done=!0,n};return i.next=i}}return{next:O}}function O(){return{value:t,done:!0}}return g.prototype=y,u(k,"constructor",y),u(y,"constructor",g),g.displayName=u(y,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"===typeof e&&e.constructor;return!!t&&(t===g||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,u(e,s,"GeneratorFunction")),e.prototype=Object.create(k),e},e.awrap=function(e){return{__await:e}},S(_.prototype),u(_.prototype,i,(function(){return this})),e.AsyncIterator=_,e.async=function(t,n,r,a,o){void 0===o&&(o=Promise);var i=new _(c(t,n,r,a),o);return e.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},S(k),u(k,s,"Generator"),u(k,o,(function(){return this})),u(k,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=I,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(C),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function a(r,a){return s.type="throw",s.arg=e,n.next=r,a&&(n.method="next",n.arg=t),!!a}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],s=i.completion;if("root"===i.tryLoc)return a("end");if(i.tryLoc<=this.prev){var u=r.call(i,"catchLoc"),c=r.call(i,"finallyLoc");if(u&&c){if(this.prev<i.catchLoc)return a(i.catchLoc,!0);if(this.prev<i.finallyLoc)return a(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return a(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return a(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&r.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,m):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),m},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),C(n),m}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var a=r.arg;C(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:I(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),m}},e}(e.exports);try{regeneratorRuntime=t}catch(n){"object"===typeof globalThis?globalThis.regeneratorRuntime=t:Function("r","regeneratorRuntime = r")(t)}},6813:function(e,t){"use strict";var n,r,a,o;if("object"===typeof performance&&"function"===typeof performance.now){var i=performance;t.unstable_now=function(){return i.now()}}else{var s=Date,u=s.now();t.unstable_now=function(){return s.now()-u}}if("undefined"===typeof window||"function"!==typeof MessageChannel){var c=null,l=null,f=function e(){if(null!==c)try{var n=t.unstable_now();c(!0,n),c=null}catch(r){throw setTimeout(e,0),r}};n=function(e){null!==c?setTimeout(n,0,e):(c=e,setTimeout(f,0))},r=function(e,t){l=setTimeout(e,t)},a=function(){clearTimeout(l)},t.unstable_shouldYield=function(){return!1},o=t.unstable_forceFrameRate=function(){}}else{var d=window.setTimeout,p=window.clearTimeout;if("undefined"!==typeof console){var h=window.cancelAnimationFrame;"function"!==typeof window.requestAnimationFrame&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills"),"function"!==typeof h&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills")}var m=!1,v=null,g=-1,y=5,b=0;t.unstable_shouldYield=function(){return t.unstable_now()>=b},o=function(){},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):y=0<e?Math.floor(1e3/e):5};var x=new MessageChannel,w=x.port2;x.port1.onmessage=function(){if(null!==v){var e=t.unstable_now();b=e+y;try{v(!0,e)?w.postMessage(null):(m=!1,v=null)}catch(n){throw w.postMessage(null),n}}else m=!1},n=function(e){v=e,m||(m=!0,w.postMessage(null))},r=function(e,n){g=d((function(){e(t.unstable_now())}),n)},a=function(){p(g),g=-1}}function k(e,t){var n=e.length;e.push(t);e:for(;;){var r=n-1>>>1,a=e[r];if(!(void 0!==a&&0<N(a,t)))break e;e[r]=t,e[n]=a,n=r}}function S(e){return void 0===(e=e[0])?null:e}function _(e){var t=e[0];if(void 0!==t){var n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,a=e.length;r<a;){var o=2*(r+1)-1,i=e[o],s=o+1,u=e[s];if(void 0!==i&&0>N(i,n))void 0!==u&&0>N(u,i)?(e[r]=u,e[s]=n,r=s):(e[r]=i,e[o]=n,r=o);else{if(!(void 0!==u&&0>N(u,n)))break e;e[r]=u,e[s]=n,r=s}}}return t}return null}function N(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}var E=[],C=[],T=1,I=null,O=3,A=!1,D=!1,M=!1;function R(e){for(var t=S(C);null!==t;){if(null===t.callback)_(C);else{if(!(t.startTime<=e))break;_(C),t.sortIndex=t.expirationTime,k(E,t)}t=S(C)}}function P(e){if(M=!1,R(e),!D)if(null!==S(E))D=!0,n(j);else{var t=S(C);null!==t&&r(P,t.startTime-e)}}function j(e,n){D=!1,M&&(M=!1,a()),A=!0;var o=O;try{for(R(n),I=S(E);null!==I&&(!(I.expirationTime>n)||e&&!t.unstable_shouldYield());){var i=I.callback;if("function"===typeof i){I.callback=null,O=I.priorityLevel;var s=i(I.expirationTime<=n);n=t.unstable_now(),"function"===typeof s?I.callback=s:I===S(E)&&_(E),R(n)}else _(E);I=S(E)}if(null!==I)var u=!0;else{var c=S(C);null!==c&&r(P,c.startTime-n),u=!1}return u}finally{I=null,O=o,A=!1}}var F=o;t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){D||A||(D=!0,n(j))},t.unstable_getCurrentPriorityLevel=function(){return O},t.unstable_getFirstCallbackNode=function(){return S(E)},t.unstable_next=function(e){switch(O){case 1:case 2:case 3:var t=3;break;default:t=O}var n=O;O=t;try{return e()}finally{O=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=F,t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=O;O=e;try{return t()}finally{O=n}},t.unstable_scheduleCallback=function(e,o,i){var s=t.unstable_now();switch("object"===typeof i&&null!==i?i="number"===typeof(i=i.delay)&&0<i?s+i:s:i=s,e){case 1:var u=-1;break;case 2:u=250;break;case 5:u=1073741823;break;case 4:u=1e4;break;default:u=5e3}return e={id:T++,callback:o,priorityLevel:e,startTime:i,expirationTime:u=i+u,sortIndex:-1},i>s?(e.sortIndex=i,k(C,e),null===S(E)&&e===S(C)&&(M?a():M=!0,r(P,i-s))):(e.sortIndex=u,k(E,e),D||A||(D=!0,n(j))),e},t.unstable_wrapCallback=function(e){var t=O;return function(){var n=O;O=t;try{return e.apply(this,arguments)}finally{O=n}}}},5296:function(e,t,n){"use strict";e.exports=n(6813)},6699:function(e,t,n){var r=n(2501),a=n(9112),o=n(2132),i=n(890),s=n(4113),u=n(1350),c=n(3411);c.alea=r,c.xor128=a,c.xorwow=o,c.xorshift7=i,c.xor4096=s,c.tychei=u,e.exports=c},2501:function(e,t,n){var r;!function(e,a,o){function i(e){var t=this,n=function(){var e=4022871197;return function(t){t=t.toString();for(var n=0;n<t.length;n++){var r=.02519603282416938*(e+=t.charCodeAt(n));r-=e=r>>>0,e=(r*=e)>>>0,e+=4294967296*(r-=e)}return 2.3283064365386963e-10*(e>>>0)}}();t.next=function(){var e=2091639*t.s0+2.3283064365386963e-10*t.c;return t.s0=t.s1,t.s1=t.s2,t.s2=e-(t.c=0|e)},t.c=1,t.s0=n(" "),t.s1=n(" "),t.s2=n(" "),t.s0-=n(e),t.s0<0&&(t.s0+=1),t.s1-=n(e),t.s1<0&&(t.s1+=1),t.s2-=n(e),t.s2<0&&(t.s2+=1),n=null}function s(e,t){return t.c=e.c,t.s0=e.s0,t.s1=e.s1,t.s2=e.s2,t}function u(e,t){var n=new i(e),r=t&&t.state,a=n.next;return a.int32=function(){return 4294967296*n.next()|0},a.double=function(){return a()+11102230246251565e-32*(2097152*a()|0)},a.quick=a,r&&("object"==typeof r&&s(r,n),a.state=function(){return s(n,{})}),a}a&&a.exports?a.exports=u:n.amdD&&n.amdO?void 0===(r=function(){return u}.call(t,n,t,a))||(a.exports=r):this.alea=u}(0,e=n.nmd(e),n.amdD)},1350:function(e,t,n){var r;!function(e,a,o){function i(e){var t=this,n="";t.next=function(){var e=t.b,n=t.c,r=t.d,a=t.a;return e=e<<25^e>>>7^n,n=n-r|0,r=r<<24^r>>>8^a,a=a-e|0,t.b=e=e<<20^e>>>12^n,t.c=n=n-r|0,t.d=r<<16^n>>>16^a,t.a=a-e|0},t.a=0,t.b=0,t.c=-1640531527,t.d=1367130551,e===Math.floor(e)?(t.a=e/4294967296|0,t.b=0|e):n+=e;for(var r=0;r<n.length+20;r++)t.b^=0|n.charCodeAt(r),t.next()}function s(e,t){return t.a=e.a,t.b=e.b,t.c=e.c,t.d=e.d,t}function u(e,t){var n=new i(e),r=t&&t.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},a.int32=n.next,a.quick=a,r&&("object"==typeof r&&s(r,n),a.state=function(){return s(n,{})}),a}a&&a.exports?a.exports=u:n.amdD&&n.amdO?void 0===(r=function(){return u}.call(t,n,t,a))||(a.exports=r):this.tychei=u}(0,e=n.nmd(e),n.amdD)},9112:function(e,t,n){var r;!function(e,a,o){function i(e){var t=this,n="";t.x=0,t.y=0,t.z=0,t.w=0,t.next=function(){var e=t.x^t.x<<11;return t.x=t.y,t.y=t.z,t.z=t.w,t.w^=t.w>>>19^e^e>>>8},e===(0|e)?t.x=e:n+=e;for(var r=0;r<n.length+64;r++)t.x^=0|n.charCodeAt(r),t.next()}function s(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t}function u(e,t){var n=new i(e),r=t&&t.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},a.int32=n.next,a.quick=a,r&&("object"==typeof r&&s(r,n),a.state=function(){return s(n,{})}),a}a&&a.exports?a.exports=u:n.amdD&&n.amdO?void 0===(r=function(){return u}.call(t,n,t,a))||(a.exports=r):this.xor128=u}(0,e=n.nmd(e),n.amdD)},4113:function(e,t,n){var r;!function(e,a,o){function i(e){var t=this;t.next=function(){var e,n,r=t.w,a=t.X,o=t.i;return t.w=r=r+1640531527|0,n=a[o+34&127],e=a[o=o+1&127],n^=n<<13,e^=e<<17,n^=n>>>15,e^=e>>>12,n=a[o]=n^e,t.i=o,n+(r^r>>>16)|0},function(e,t){var n,r,a,o,i,s=[],u=128;for(t===(0|t)?(r=t,t=null):(t+="\0",r=0,u=Math.max(u,t.length)),a=0,o=-32;o<u;++o)t&&(r^=t.charCodeAt((o+32)%t.length)),0===o&&(i=r),r^=r<<10,r^=r>>>15,r^=r<<4,r^=r>>>13,o>=0&&(i=i+1640531527|0,a=0==(n=s[127&o]^=r+i)?a+1:0);for(a>=128&&(s[127&(t&&t.length||0)]=-1),a=127,o=512;o>0;--o)r=s[a+34&127],n=s[a=a+1&127],r^=r<<13,n^=n<<17,r^=r>>>15,n^=n>>>12,s[a]=r^n;e.w=i,e.X=s,e.i=a}(t,e)}function s(e,t){return t.i=e.i,t.w=e.w,t.X=e.X.slice(),t}function u(e,t){null==e&&(e=+new Date);var n=new i(e),r=t&&t.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},a.int32=n.next,a.quick=a,r&&(r.X&&s(r,n),a.state=function(){return s(n,{})}),a}a&&a.exports?a.exports=u:n.amdD&&n.amdO?void 0===(r=function(){return u}.call(t,n,t,a))||(a.exports=r):this.xor4096=u}(0,e=n.nmd(e),n.amdD)},890:function(e,t,n){var r;!function(e,a,o){function i(e){var t=this;t.next=function(){var e,n,r=t.x,a=t.i;return e=r[a],n=(e^=e>>>7)^e<<24,n^=(e=r[a+1&7])^e>>>10,n^=(e=r[a+3&7])^e>>>3,n^=(e=r[a+4&7])^e<<7,e=r[a+7&7],n^=(e^=e<<13)^e<<9,r[a]=n,t.i=a+1&7,n},function(e,t){var n,r=[];if(t===(0|t))r[0]=t;else for(t=""+t,n=0;n<t.length;++n)r[7&n]=r[7&n]<<15^t.charCodeAt(n)+r[n+1&7]<<13;for(;r.length<8;)r.push(0);for(n=0;n<8&&0===r[n];++n);for(8==n?r[7]=-1:r[n],e.x=r,e.i=0,n=256;n>0;--n)e.next()}(t,e)}function s(e,t){return t.x=e.x.slice(),t.i=e.i,t}function u(e,t){null==e&&(e=+new Date);var n=new i(e),r=t&&t.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},a.int32=n.next,a.quick=a,r&&(r.x&&s(r,n),a.state=function(){return s(n,{})}),a}a&&a.exports?a.exports=u:n.amdD&&n.amdO?void 0===(r=function(){return u}.call(t,n,t,a))||(a.exports=r):this.xorshift7=u}(0,e=n.nmd(e),n.amdD)},2132:function(e,t,n){var r;!function(e,a,o){function i(e){var t=this,n="";t.next=function(){var e=t.x^t.x>>>2;return t.x=t.y,t.y=t.z,t.z=t.w,t.w=t.v,(t.d=t.d+362437|0)+(t.v=t.v^t.v<<4^e^e<<1)|0},t.x=0,t.y=0,t.z=0,t.w=0,t.v=0,e===(0|e)?t.x=e:n+=e;for(var r=0;r<n.length+64;r++)t.x^=0|n.charCodeAt(r),r==n.length&&(t.d=t.x<<10^t.x>>>4),t.next()}function s(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t.v=e.v,t.d=e.d,t}function u(e,t){var n=new i(e),r=t&&t.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},a.int32=n.next,a.quick=a,r&&("object"==typeof r&&s(r,n),a.state=function(){return s(n,{})}),a}a&&a.exports?a.exports=u:n.amdD&&n.amdO?void 0===(r=function(){return u}.call(t,n,t,a))||(a.exports=r):this.xorwow=u}(0,e=n.nmd(e),n.amdD)},3411:function(e,t,n){var r;!function(a,o){var i,s=this,u=256,c=o.pow(u,6),l=o.pow(2,52),f=2*l,d=255;function p(e,t,n){var r=[],d=g(v((t=1==t?{entropy:!0}:t||{}).entropy?[e,y(a)]:null==e?function(){try{var e;return i&&(e=i.randomBytes)?e=e(u):(e=new Uint8Array(u),(s.crypto||s.msCrypto).getRandomValues(e)),y(e)}catch(r){var t=s.navigator,n=t&&t.plugins;return[+new Date,s,n,s.screen,y(a)]}}():e,3),r),p=new h(r),b=function(){for(var e=p.g(6),t=c,n=0;e<l;)e=(e+n)*u,t*=u,n=p.g(1);for(;e>=f;)e/=2,t/=2,n>>>=1;return(e+n)/t};return b.int32=function(){return 0|p.g(4)},b.quick=function(){return p.g(4)/4294967296},b.double=b,g(y(p.S),a),(t.pass||n||function(e,t,n,r){return r&&(r.S&&m(r,p),e.state=function(){return m(p,{})}),n?(o.random=e,t):e})(b,d,"global"in t?t.global:this==o,t.state)}function h(e){var t,n=e.length,r=this,a=0,o=r.i=r.j=0,i=r.S=[];for(n||(e=[n++]);a<u;)i[a]=a++;for(a=0;a<u;a++)i[a]=i[o=d&o+e[a%n]+(t=i[a])],i[o]=t;(r.g=function(e){for(var t,n=0,a=r.i,o=r.j,i=r.S;e--;)t=i[a=d&a+1],n=n*u+i[d&(i[a]=i[o=d&o+t])+(i[o]=t)];return r.i=a,r.j=o,n})(u)}function m(e,t){return t.i=e.i,t.j=e.j,t.S=e.S.slice(),t}function v(e,t){var n,r=[],a=typeof e;if(t&&"object"==a)for(n in e)try{r.push(v(e[n],t-1))}catch(o){}return r.length?r:"string"==a?e:e+"\0"}function g(e,t){for(var n,r=e+"",a=0;a<r.length;)t[d&a]=d&(n^=19*t[d&a])+r.charCodeAt(a++);return y(t)}function y(e){return String.fromCharCode.apply(0,e)}if(o.seedrandom=p,g(o.random(),a),e.exports){e.exports=p;try{i=n(5042)}catch(b){}}else void 0===(r=function(){return p}.call(t,n,t,e))||(e.exports=r)}([],Math)},3175:function(e,t,n){var r=n(4578);e.exports=(r.__esModule?r:{default:r}).default},4578:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,a=n(8629),o=(r=n(9859))&&r.__esModule?r:{default:r};var i=a.cloneDeep(o.default.theme);t.default=i},8629:function(e,t,n){"use strict";var r=n(3038).default;Object.defineProperty(t,"__esModule",{value:!0}),t.cloneDeep=function e(t){if(Array.isArray(t))return t.map((function(t){return e(t)}));if("object"===typeof t&&null!==t)return Object.fromEntries(Object.entries(t).map((function(t){var n=r(t,2),a=n[0],o=n[1];return[a,e(o)]})));return t}},9859:function(e,t,n){var r=n(1109).default;e.exports={content:[],presets:[],darkMode:"media",theme:{screens:{sm:"640px",md:"768px",lg:"1024px",xl:"1280px","2xl":"1536px"},colors:function(e){var t=e.colors;return{inherit:t.inherit,current:t.current,transparent:t.transparent,black:t.black,white:t.white,slate:t.slate,gray:t.gray,zinc:t.zinc,neutral:t.neutral,stone:t.stone,red:t.red,orange:t.orange,amber:t.amber,yellow:t.yellow,lime:t.lime,green:t.green,emerald:t.emerald,teal:t.teal,cyan:t.cyan,sky:t.sky,blue:t.blue,indigo:t.indigo,violet:t.violet,purple:t.purple,fuchsia:t.fuchsia,pink:t.pink,rose:t.rose}},columns:{auto:"auto",1:"1",2:"2",3:"3",4:"4",5:"5",6:"6",7:"7",8:"8",9:"9",10:"10",11:"11",12:"12","3xs":"16rem","2xs":"18rem",xs:"20rem",sm:"24rem",md:"28rem",lg:"32rem",xl:"36rem","2xl":"42rem","3xl":"48rem","4xl":"56rem","5xl":"64rem","6xl":"72rem","7xl":"80rem"},spacing:{px:"1px",0:"0px",.5:"0.125rem",1:"0.25rem",1.5:"0.375rem",2:"0.5rem",2.5:"0.625rem",3:"0.75rem",3.5:"0.875rem",4:"1rem",5:"1.25rem",6:"1.5rem",7:"1.75rem",8:"2rem",9:"2.25rem",10:"2.5rem",11:"2.75rem",12:"3rem",14:"3.5rem",16:"4rem",20:"5rem",24:"6rem",28:"7rem",32:"8rem",36:"9rem",40:"10rem",44:"11rem",48:"12rem",52:"13rem",56:"14rem",60:"15rem",64:"16rem",72:"18rem",80:"20rem",96:"24rem"},animation:{none:"none",spin:"spin 1s linear infinite",ping:"ping 1s cubic-bezier(0, 0, 0.2, 1) infinite",pulse:"pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite",bounce:"bounce 1s infinite"},aspectRatio:{auto:"auto",square:"1 / 1",video:"16 / 9"},backdropBlur:function(e){return(0,e.theme)("blur")},backdropBrightness:function(e){return(0,e.theme)("brightness")},backdropContrast:function(e){return(0,e.theme)("contrast")},backdropGrayscale:function(e){return(0,e.theme)("grayscale")},backdropHueRotate:function(e){return(0,e.theme)("hueRotate")},backdropInvert:function(e){return(0,e.theme)("invert")},backdropOpacity:function(e){return(0,e.theme)("opacity")},backdropSaturate:function(e){return(0,e.theme)("saturate")},backdropSepia:function(e){return(0,e.theme)("sepia")},backgroundColor:function(e){return(0,e.theme)("colors")},backgroundImage:{none:"none","gradient-to-t":"linear-gradient(to top, var(--tw-gradient-stops))","gradient-to-tr":"linear-gradient(to top right, var(--tw-gradient-stops))","gradient-to-r":"linear-gradient(to right, var(--tw-gradient-stops))","gradient-to-br":"linear-gradient(to bottom right, var(--tw-gradient-stops))","gradient-to-b":"linear-gradient(to bottom, var(--tw-gradient-stops))","gradient-to-bl":"linear-gradient(to bottom left, var(--tw-gradient-stops))","gradient-to-l":"linear-gradient(to left, var(--tw-gradient-stops))","gradient-to-tl":"linear-gradient(to top left, var(--tw-gradient-stops))"},backgroundOpacity:function(e){return(0,e.theme)("opacity")},backgroundPosition:{bottom:"bottom",center:"center",left:"left","left-bottom":"left bottom","left-top":"left top",right:"right","right-bottom":"right bottom","right-top":"right top",top:"top"},backgroundSize:{auto:"auto",cover:"cover",contain:"contain"},blur:{0:"0",none:"0",sm:"4px",DEFAULT:"8px",md:"12px",lg:"16px",xl:"24px","2xl":"40px","3xl":"64px"},brightness:{0:"0",50:".5",75:".75",90:".9",95:".95",100:"1",105:"1.05",110:"1.1",125:"1.25",150:"1.5",200:"2"},borderColor:function(e){var t=e.theme;return r(r({},t("colors")),{},{DEFAULT:t("colors.gray.200","currentColor")})},borderOpacity:function(e){return(0,e.theme)("opacity")},borderRadius:{none:"0px",sm:"0.125rem",DEFAULT:"0.25rem",md:"0.375rem",lg:"0.5rem",xl:"0.75rem","2xl":"1rem","3xl":"1.5rem",full:"9999px"},borderWidth:{DEFAULT:"1px",0:"0px",2:"2px",4:"4px",8:"8px"},boxShadow:{sm:"0 1px 2px 0 rgb(0 0 0 / 0.05)",DEFAULT:"0 1px 3px 0 rgb(0 0 0 / 0.1), 0 1px 2px -1px rgb(0 0 0 / 0.1)",md:"0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1)",lg:"0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1)",xl:"0 20px 25px -5px rgb(0 0 0 / 0.1), 0 8px 10px -6px rgb(0 0 0 / 0.1)","2xl":"0 25px 50px -12px rgb(0 0 0 / 0.25)",inner:"inset 0 2px 4px 0 rgb(0 0 0 / 0.05)",none:"none"},boxShadowColor:function(e){return(0,e.theme)("colors")},caretColor:function(e){return(0,e.theme)("colors")},accentColor:function(e){var t=e.theme;return r(r({},t("colors")),{},{auto:"auto"})},contrast:{0:"0",50:".5",75:".75",100:"1",125:"1.25",150:"1.5",200:"2"},container:{},content:{none:"none"},cursor:{auto:"auto",default:"default",pointer:"pointer",wait:"wait",text:"text",move:"move",help:"help","not-allowed":"not-allowed",none:"none","context-menu":"context-menu",progress:"progress",cell:"cell",crosshair:"crosshair","vertical-text":"vertical-text",alias:"alias",copy:"copy","no-drop":"no-drop",grab:"grab",grabbing:"grabbing","all-scroll":"all-scroll","col-resize":"col-resize","row-resize":"row-resize","n-resize":"n-resize","e-resize":"e-resize","s-resize":"s-resize","w-resize":"w-resize","ne-resize":"ne-resize","nw-resize":"nw-resize","se-resize":"se-resize","sw-resize":"sw-resize","ew-resize":"ew-resize","ns-resize":"ns-resize","nesw-resize":"nesw-resize","nwse-resize":"nwse-resize","zoom-in":"zoom-in","zoom-out":"zoom-out"},divideColor:function(e){return(0,e.theme)("borderColor")},divideOpacity:function(e){return(0,e.theme)("borderOpacity")},divideWidth:function(e){return(0,e.theme)("borderWidth")},dropShadow:{sm:"0 1px 1px rgb(0 0 0 / 0.05)",DEFAULT:["0 1px 2px rgb(0 0 0 / 0.1)","0 1px 1px rgb(0 0 0 / 0.06)"],md:["0 4px 3px rgb(0 0 0 / 0.07)","0 2px 2px rgb(0 0 0 / 0.06)"],lg:["0 10px 8px rgb(0 0 0 / 0.04)","0 4px 3px rgb(0 0 0 / 0.1)"],xl:["0 20px 13px rgb(0 0 0 / 0.03)","0 8px 5px rgb(0 0 0 / 0.08)"],"2xl":"0 25px 25px rgb(0 0 0 / 0.15)",none:"0 0 #0000"},fill:function(e){return(0,e.theme)("colors")},grayscale:{0:"0",DEFAULT:"100%"},hueRotate:{0:"0deg",15:"15deg",30:"30deg",60:"60deg",90:"90deg",180:"180deg"},invert:{0:"0",DEFAULT:"100%"},flex:{1:"1 1 0%",auto:"1 1 auto",initial:"0 1 auto",none:"none"},flexBasis:function(e){var t=e.theme;return r(r({auto:"auto"},t("spacing")),{},{"1/2":"50%","1/3":"33.333333%","2/3":"66.666667%","1/4":"25%","2/4":"50%","3/4":"75%","1/5":"20%","2/5":"40%","3/5":"60%","4/5":"80%","1/6":"16.666667%","2/6":"33.333333%","3/6":"50%","4/6":"66.666667%","5/6":"83.333333%","1/12":"8.333333%","2/12":"16.666667%","3/12":"25%","4/12":"33.333333%","5/12":"41.666667%","6/12":"50%","7/12":"58.333333%","8/12":"66.666667%","9/12":"75%","10/12":"83.333333%","11/12":"91.666667%",full:"100%"})},flexGrow:{0:"0",DEFAULT:"1"},flexShrink:{0:"0",DEFAULT:"1"},fontFamily:{sans:["ui-sans-serif","system-ui","-apple-system","BlinkMacSystemFont",'"Segoe UI"',"Roboto",'"Helvetica Neue"',"Arial",'"Noto Sans"',"sans-serif",'"Apple Color Emoji"','"Segoe UI Emoji"','"Segoe UI Symbol"','"Noto Color Emoji"'],serif:["ui-serif","Georgia","Cambria",'"Times New Roman"',"Times","serif"],mono:["ui-monospace","SFMono-Regular","Menlo","Monaco","Consolas",'"Liberation Mono"','"Courier New"',"monospace"]},fontSize:{xs:["0.75rem",{lineHeight:"1rem"}],sm:["0.875rem",{lineHeight:"1.25rem"}],base:["1rem",{lineHeight:"1.5rem"}],lg:["1.125rem",{lineHeight:"1.75rem"}],xl:["1.25rem",{lineHeight:"1.75rem"}],"2xl":["1.5rem",{lineHeight:"2rem"}],"3xl":["1.875rem",{lineHeight:"2.25rem"}],"4xl":["2.25rem",{lineHeight:"2.5rem"}],"5xl":["3rem",{lineHeight:"1"}],"6xl":["3.75rem",{lineHeight:"1"}],"7xl":["4.5rem",{lineHeight:"1"}],"8xl":["6rem",{lineHeight:"1"}],"9xl":["8rem",{lineHeight:"1"}]},fontWeight:{thin:"100",extralight:"200",light:"300",normal:"400",medium:"500",semibold:"600",bold:"700",extrabold:"800",black:"900"},gap:function(e){return(0,e.theme)("spacing")},gradientColorStops:function(e){return(0,e.theme)("colors")},gridAutoColumns:{auto:"auto",min:"min-content",max:"max-content",fr:"minmax(0, 1fr)"},gridAutoRows:{auto:"auto",min:"min-content",max:"max-content",fr:"minmax(0, 1fr)"},gridColumn:{auto:"auto","span-1":"span 1 / span 1","span-2":"span 2 / span 2","span-3":"span 3 / span 3","span-4":"span 4 / span 4","span-5":"span 5 / span 5","span-6":"span 6 / span 6","span-7":"span 7 / span 7","span-8":"span 8 / span 8","span-9":"span 9 / span 9","span-10":"span 10 / span 10","span-11":"span 11 / span 11","span-12":"span 12 / span 12","span-full":"1 / -1"},gridColumnEnd:{auto:"auto",1:"1",2:"2",3:"3",4:"4",5:"5",6:"6",7:"7",8:"8",9:"9",10:"10",11:"11",12:"12",13:"13"},gridColumnStart:{auto:"auto",1:"1",2:"2",3:"3",4:"4",5:"5",6:"6",7:"7",8:"8",9:"9",10:"10",11:"11",12:"12",13:"13"},gridRow:{auto:"auto","span-1":"span 1 / span 1","span-2":"span 2 / span 2","span-3":"span 3 / span 3","span-4":"span 4 / span 4","span-5":"span 5 / span 5","span-6":"span 6 / span 6","span-full":"1 / -1"},gridRowStart:{auto:"auto",1:"1",2:"2",3:"3",4:"4",5:"5",6:"6",7:"7"},gridRowEnd:{auto:"auto",1:"1",2:"2",3:"3",4:"4",5:"5",6:"6",7:"7"},gridTemplateColumns:{none:"none",1:"repeat(1, minmax(0, 1fr))",2:"repeat(2, minmax(0, 1fr))",3:"repeat(3, minmax(0, 1fr))",4:"repeat(4, minmax(0, 1fr))",5:"repeat(5, minmax(0, 1fr))",6:"repeat(6, minmax(0, 1fr))",7:"repeat(7, minmax(0, 1fr))",8:"repeat(8, minmax(0, 1fr))",9:"repeat(9, minmax(0, 1fr))",10:"repeat(10, minmax(0, 1fr))",11:"repeat(11, minmax(0, 1fr))",12:"repeat(12, minmax(0, 1fr))"},gridTemplateRows:{none:"none",1:"repeat(1, minmax(0, 1fr))",2:"repeat(2, minmax(0, 1fr))",3:"repeat(3, minmax(0, 1fr))",4:"repeat(4, minmax(0, 1fr))",5:"repeat(5, minmax(0, 1fr))",6:"repeat(6, minmax(0, 1fr))"},height:function(e){var t=e.theme;return r(r({auto:"auto"},t("spacing")),{},{"1/2":"50%","1/3":"33.333333%","2/3":"66.666667%","1/4":"25%","2/4":"50%","3/4":"75%","1/5":"20%","2/5":"40%","3/5":"60%","4/5":"80%","1/6":"16.666667%","2/6":"33.333333%","3/6":"50%","4/6":"66.666667%","5/6":"83.333333%",full:"100%",screen:"100vh",min:"min-content",max:"max-content",fit:"fit-content"})},inset:function(e){var t=e.theme;return r(r({auto:"auto"},t("spacing")),{},{"1/2":"50%","1/3":"33.333333%","2/3":"66.666667%","1/4":"25%","2/4":"50%","3/4":"75%",full:"100%"})},keyframes:{spin:{to:{transform:"rotate(360deg)"}},ping:{"75%, 100%":{transform:"scale(2)",opacity:"0"}},pulse:{"50%":{opacity:".5"}},bounce:{"0%, 100%":{transform:"translateY(-25%)",animationTimingFunction:"cubic-bezier(0.8,0,1,1)"},"50%":{transform:"none",animationTimingFunction:"cubic-bezier(0,0,0.2,1)"}}},letterSpacing:{tighter:"-0.05em",tight:"-0.025em",normal:"0em",wide:"0.025em",wider:"0.05em",widest:"0.1em"},lineHeight:{none:"1",tight:"1.25",snug:"1.375",normal:"1.5",relaxed:"1.625",loose:"2",3:".75rem",4:"1rem",5:"1.25rem",6:"1.5rem",7:"1.75rem",8:"2rem",9:"2.25rem",10:"2.5rem"},listStyleType:{none:"none",disc:"disc",decimal:"decimal"},margin:function(e){var t=e.theme;return r({auto:"auto"},t("spacing"))},maxHeight:function(e){var t=e.theme;return r(r({},t("spacing")),{},{full:"100%",screen:"100vh",min:"min-content",max:"max-content",fit:"fit-content"})},maxWidth:function(e){var t=e.theme,n=e.breakpoints;return r({none:"none",0:"0rem",xs:"20rem",sm:"24rem",md:"28rem",lg:"32rem",xl:"36rem","2xl":"42rem","3xl":"48rem","4xl":"56rem","5xl":"64rem","6xl":"72rem","7xl":"80rem",full:"100%",min:"min-content",max:"max-content",fit:"fit-content",prose:"65ch"},n(t("screens")))},minHeight:{0:"0px",full:"100%",screen:"100vh",min:"min-content",max:"max-content",fit:"fit-content"},minWidth:{0:"0px",full:"100%",min:"min-content",max:"max-content",fit:"fit-content"},objectPosition:{bottom:"bottom",center:"center",left:"left","left-bottom":"left bottom","left-top":"left top",right:"right","right-bottom":"right bottom","right-top":"right top",top:"top"},opacity:{0:"0",5:"0.05",10:"0.1",20:"0.2",25:"0.25",30:"0.3",40:"0.4",50:"0.5",60:"0.6",70:"0.7",75:"0.75",80:"0.8",90:"0.9",95:"0.95",100:"1"},order:{first:"-9999",last:"9999",none:"0",1:"1",2:"2",3:"3",4:"4",5:"5",6:"6",7:"7",8:"8",9:"9",10:"10",11:"11",12:"12"},padding:function(e){return(0,e.theme)("spacing")},placeholderColor:function(e){return(0,e.theme)("colors")},placeholderOpacity:function(e){return(0,e.theme)("opacity")},outlineColor:function(e){return(0,e.theme)("colors")},outlineOffset:{0:"0px",1:"1px",2:"2px",4:"4px",8:"8px"},outlineWidth:{0:"0px",1:"1px",2:"2px",4:"4px",8:"8px"},ringColor:function(e){var t=e.theme;return r({DEFAULT:t("colors.blue.500","#3b82f6")},t("colors"))},ringOffsetColor:function(e){return(0,e.theme)("colors")},ringOffsetWidth:{0:"0px",1:"1px",2:"2px",4:"4px",8:"8px"},ringOpacity:function(e){var t=e.theme;return r({DEFAULT:"0.5"},t("opacity"))},ringWidth:{DEFAULT:"3px",0:"0px",1:"1px",2:"2px",4:"4px",8:"8px"},rotate:{0:"0deg",1:"1deg",2:"2deg",3:"3deg",6:"6deg",12:"12deg",45:"45deg",90:"90deg",180:"180deg"},saturate:{0:"0",50:".5",100:"1",150:"1.5",200:"2"},scale:{0:"0",50:".5",75:".75",90:".9",95:".95",100:"1",105:"1.05",110:"1.1",125:"1.25",150:"1.5"},scrollMargin:function(e){var t=e.theme;return r({},t("spacing"))},scrollPadding:function(e){return(0,e.theme)("spacing")},sepia:{0:"0",DEFAULT:"100%"},skew:{0:"0deg",1:"1deg",2:"2deg",3:"3deg",6:"6deg",12:"12deg"},space:function(e){var t=e.theme;return r({},t("spacing"))},stroke:function(e){return(0,e.theme)("colors")},strokeWidth:{0:"0",1:"1",2:"2"},textColor:function(e){return(0,e.theme)("colors")},textDecorationColor:function(e){return(0,e.theme)("colors")},textDecorationThickness:{auto:"auto","from-font":"from-font",0:"0px",1:"1px",2:"2px",4:"4px",8:"8px"},textUnderlineOffset:{auto:"auto",0:"0px",1:"1px",2:"2px",4:"4px",8:"8px"},textIndent:function(e){var t=e.theme;return r({},t("spacing"))},textOpacity:function(e){return(0,e.theme)("opacity")},transformOrigin:{center:"center",top:"top","top-right":"top right",right:"right","bottom-right":"bottom right",bottom:"bottom","bottom-left":"bottom left",left:"left","top-left":"top left"},transitionDelay:{75:"75ms",100:"100ms",150:"150ms",200:"200ms",300:"300ms",500:"500ms",700:"700ms",1e3:"1000ms"},transitionDuration:{DEFAULT:"150ms",75:"75ms",100:"100ms",150:"150ms",200:"200ms",300:"300ms",500:"500ms",700:"700ms",1e3:"1000ms"},transitionProperty:{none:"none",all:"all",DEFAULT:"color, background-color, border-color, text-decoration-color, fill, stroke, opacity, box-shadow, transform, filter, backdrop-filter",colors:"color, background-color, border-color, text-decoration-color, fill, stroke",opacity:"opacity",shadow:"box-shadow",transform:"transform"},transitionTimingFunction:{DEFAULT:"cubic-bezier(0.4, 0, 0.2, 1)",linear:"linear",in:"cubic-bezier(0.4, 0, 1, 1)",out:"cubic-bezier(0, 0, 0.2, 1)","in-out":"cubic-bezier(0.4, 0, 0.2, 1)"},translate:function(e){var t=e.theme;return r(r({},t("spacing")),{},{"1/2":"50%","1/3":"33.333333%","2/3":"66.666667%","1/4":"25%","2/4":"50%","3/4":"75%",full:"100%"})},width:function(e){var t=e.theme;return r(r({auto:"auto"},t("spacing")),{},{"1/2":"50%","1/3":"33.333333%","2/3":"66.666667%","1/4":"25%","2/4":"50%","3/4":"75%","1/5":"20%","2/5":"40%","3/5":"60%","4/5":"80%","1/6":"16.666667%","2/6":"33.333333%","3/6":"50%","4/6":"66.666667%","5/6":"83.333333%","1/12":"8.333333%","2/12":"16.666667%","3/12":"25%","4/12":"33.333333%","5/12":"41.666667%","6/12":"50%","7/12":"58.333333%","8/12":"66.666667%","9/12":"75%","10/12":"83.333333%","11/12":"91.666667%",full:"100%",screen:"100vw",min:"min-content",max:"max-content",fit:"fit-content"})},willChange:{auto:"auto",scroll:"scroll-position",contents:"contents",transform:"transform"},zIndex:{auto:"auto",0:"0",10:"10",20:"20",30:"30",40:"40",50:"50"}},variantOrder:["first","last","odd","even","visited","checked","empty","read-only","group-hover","group-focus","focus-within","hover","focus","focus-visible","active","disabled"],plugins:[]}},7045:function(e,t,n){var r;!function(a){var o=/^\s+/,i=/\s+$/,s=0,u=a.round,c=a.min,l=a.max,f=a.random;function d(e,t){if(t=t||{},(e=e||"")instanceof d)return e;if(!(this instanceof d))return new d(e,t);var n=function(e){var t={r:0,g:0,b:0},n=1,r=null,s=null,u=null,f=!1,d=!1;"string"==typeof e&&(e=function(e){e=e.replace(o,"").replace(i,"").toLowerCase();var t,n=!1;if(O[e])e=O[e],n=!0;else if("transparent"==e)return{r:0,g:0,b:0,a:0,format:"name"};if(t=z.rgb.exec(e))return{r:t[1],g:t[2],b:t[3]};if(t=z.rgba.exec(e))return{r:t[1],g:t[2],b:t[3],a:t[4]};if(t=z.hsl.exec(e))return{h:t[1],s:t[2],l:t[3]};if(t=z.hsla.exec(e))return{h:t[1],s:t[2],l:t[3],a:t[4]};if(t=z.hsv.exec(e))return{h:t[1],s:t[2],v:t[3]};if(t=z.hsva.exec(e))return{h:t[1],s:t[2],v:t[3],a:t[4]};if(t=z.hex8.exec(e))return{r:P(t[1]),g:P(t[2]),b:P(t[3]),a:B(t[4]),format:n?"name":"hex8"};if(t=z.hex6.exec(e))return{r:P(t[1]),g:P(t[2]),b:P(t[3]),format:n?"name":"hex"};if(t=z.hex4.exec(e))return{r:P(t[1]+""+t[1]),g:P(t[2]+""+t[2]),b:P(t[3]+""+t[3]),a:B(t[4]+""+t[4]),format:n?"name":"hex8"};if(t=z.hex3.exec(e))return{r:P(t[1]+""+t[1]),g:P(t[2]+""+t[2]),b:P(t[3]+""+t[3]),format:n?"name":"hex"};return!1}(e));"object"==typeof e&&(Z(e.r)&&Z(e.g)&&Z(e.b)?(p=e.r,h=e.g,m=e.b,t={r:255*M(p,255),g:255*M(h,255),b:255*M(m,255)},f=!0,d="%"===String(e.r).substr(-1)?"prgb":"rgb"):Z(e.h)&&Z(e.s)&&Z(e.v)?(r=F(e.s),s=F(e.v),t=function(e,t,n){e=6*M(e,360),t=M(t,100),n=M(n,100);var r=a.floor(e),o=e-r,i=n*(1-t),s=n*(1-o*t),u=n*(1-(1-o)*t),c=r%6;return{r:255*[n,s,i,i,u,n][c],g:255*[u,n,n,s,i,i][c],b:255*[i,i,u,n,n,s][c]}}(e.h,r,s),f=!0,d="hsv"):Z(e.h)&&Z(e.s)&&Z(e.l)&&(r=F(e.s),u=F(e.l),t=function(e,t,n){var r,a,o;function i(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e}if(e=M(e,360),t=M(t,100),n=M(n,100),0===t)r=a=o=n;else{var s=n<.5?n*(1+t):n+t-n*t,u=2*n-s;r=i(u,s,e+1/3),a=i(u,s,e),o=i(u,s,e-1/3)}return{r:255*r,g:255*a,b:255*o}}(e.h,r,u),f=!0,d="hsl"),e.hasOwnProperty("a")&&(n=e.a));var p,h,m;return n=D(n),{ok:f,format:e.format||d,r:c(255,l(t.r,0)),g:c(255,l(t.g,0)),b:c(255,l(t.b,0)),a:n}}(e);this._originalInput=e,this._r=n.r,this._g=n.g,this._b=n.b,this._a=n.a,this._roundA=u(100*this._a)/100,this._format=t.format||n.format,this._gradientType=t.gradientType,this._r<1&&(this._r=u(this._r)),this._g<1&&(this._g=u(this._g)),this._b<1&&(this._b=u(this._b)),this._ok=n.ok,this._tc_id=s++}function p(e,t,n){e=M(e,255),t=M(t,255),n=M(n,255);var r,a,o=l(e,t,n),i=c(e,t,n),s=(o+i)/2;if(o==i)r=a=0;else{var u=o-i;switch(a=s>.5?u/(2-o-i):u/(o+i),o){case e:r=(t-n)/u+(t<n?6:0);break;case t:r=(n-e)/u+2;break;case n:r=(e-t)/u+4}r/=6}return{h:r,s:a,l:s}}function h(e,t,n){e=M(e,255),t=M(t,255),n=M(n,255);var r,a,o=l(e,t,n),i=c(e,t,n),s=o,u=o-i;if(a=0===o?0:u/o,o==i)r=0;else{switch(o){case e:r=(t-n)/u+(t<n?6:0);break;case t:r=(n-e)/u+2;break;case n:r=(e-t)/u+4}r/=6}return{h:r,s:a,v:s}}function m(e,t,n,r){var a=[j(u(e).toString(16)),j(u(t).toString(16)),j(u(n).toString(16))];return r&&a[0].charAt(0)==a[0].charAt(1)&&a[1].charAt(0)==a[1].charAt(1)&&a[2].charAt(0)==a[2].charAt(1)?a[0].charAt(0)+a[1].charAt(0)+a[2].charAt(0):a.join("")}function v(e,t,n,r){return[j(L(r)),j(u(e).toString(16)),j(u(t).toString(16)),j(u(n).toString(16))].join("")}function g(e,t){t=0===t?0:t||10;var n=d(e).toHsl();return n.s-=t/100,n.s=R(n.s),d(n)}function y(e,t){t=0===t?0:t||10;var n=d(e).toHsl();return n.s+=t/100,n.s=R(n.s),d(n)}function b(e){return d(e).desaturate(100)}function x(e,t){t=0===t?0:t||10;var n=d(e).toHsl();return n.l+=t/100,n.l=R(n.l),d(n)}function w(e,t){t=0===t?0:t||10;var n=d(e).toRgb();return n.r=l(0,c(255,n.r-u(-t/100*255))),n.g=l(0,c(255,n.g-u(-t/100*255))),n.b=l(0,c(255,n.b-u(-t/100*255))),d(n)}function k(e,t){t=0===t?0:t||10;var n=d(e).toHsl();return n.l-=t/100,n.l=R(n.l),d(n)}function S(e,t){var n=d(e).toHsl(),r=(n.h+t)%360;return n.h=r<0?360+r:r,d(n)}function _(e){var t=d(e).toHsl();return t.h=(t.h+180)%360,d(t)}function N(e){var t=d(e).toHsl(),n=t.h;return[d(e),d({h:(n+120)%360,s:t.s,l:t.l}),d({h:(n+240)%360,s:t.s,l:t.l})]}function E(e){var t=d(e).toHsl(),n=t.h;return[d(e),d({h:(n+90)%360,s:t.s,l:t.l}),d({h:(n+180)%360,s:t.s,l:t.l}),d({h:(n+270)%360,s:t.s,l:t.l})]}function C(e){var t=d(e).toHsl(),n=t.h;return[d(e),d({h:(n+72)%360,s:t.s,l:t.l}),d({h:(n+216)%360,s:t.s,l:t.l})]}function T(e,t,n){t=t||6,n=n||30;var r=d(e).toHsl(),a=360/n,o=[d(e)];for(r.h=(r.h-(a*t>>1)+720)%360;--t;)r.h=(r.h+a)%360,o.push(d(r));return o}function I(e,t){t=t||6;for(var n=d(e).toHsv(),r=n.h,a=n.s,o=n.v,i=[],s=1/t;t--;)i.push(d({h:r,s:a,v:o})),o=(o+s)%1;return i}d.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var e=this.toRgb();return(299*e.r+587*e.g+114*e.b)/1e3},getLuminance:function(){var e,t,n,r=this.toRgb();return e=r.r/255,t=r.g/255,n=r.b/255,.2126*(e<=.03928?e/12.92:a.pow((e+.055)/1.055,2.4))+.7152*(t<=.03928?t/12.92:a.pow((t+.055)/1.055,2.4))+.0722*(n<=.03928?n/12.92:a.pow((n+.055)/1.055,2.4))},setAlpha:function(e){return this._a=D(e),this._roundA=u(100*this._a)/100,this},toHsv:function(){var e=h(this._r,this._g,this._b);return{h:360*e.h,s:e.s,v:e.v,a:this._a}},toHsvString:function(){var e=h(this._r,this._g,this._b),t=u(360*e.h),n=u(100*e.s),r=u(100*e.v);return 1==this._a?"hsv("+t+", "+n+"%, "+r+"%)":"hsva("+t+", "+n+"%, "+r+"%, "+this._roundA+")"},toHsl:function(){var e=p(this._r,this._g,this._b);return{h:360*e.h,s:e.s,l:e.l,a:this._a}},toHslString:function(){var e=p(this._r,this._g,this._b),t=u(360*e.h),n=u(100*e.s),r=u(100*e.l);return 1==this._a?"hsl("+t+", "+n+"%, "+r+"%)":"hsla("+t+", "+n+"%, "+r+"%, "+this._roundA+")"},toHex:function(e){return m(this._r,this._g,this._b,e)},toHexString:function(e){return"#"+this.toHex(e)},toHex8:function(e){return function(e,t,n,r,a){var o=[j(u(e).toString(16)),j(u(t).toString(16)),j(u(n).toString(16)),j(L(r))];if(a&&o[0].charAt(0)==o[0].charAt(1)&&o[1].charAt(0)==o[1].charAt(1)&&o[2].charAt(0)==o[2].charAt(1)&&o[3].charAt(0)==o[3].charAt(1))return o[0].charAt(0)+o[1].charAt(0)+o[2].charAt(0)+o[3].charAt(0);return o.join("")}(this._r,this._g,this._b,this._a,e)},toHex8String:function(e){return"#"+this.toHex8(e)},toRgb:function(){return{r:u(this._r),g:u(this._g),b:u(this._b),a:this._a}},toRgbString:function(){return 1==this._a?"rgb("+u(this._r)+", "+u(this._g)+", "+u(this._b)+")":"rgba("+u(this._r)+", "+u(this._g)+", "+u(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:u(100*M(this._r,255))+"%",g:u(100*M(this._g,255))+"%",b:u(100*M(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return 1==this._a?"rgb("+u(100*M(this._r,255))+"%, "+u(100*M(this._g,255))+"%, "+u(100*M(this._b,255))+"%)":"rgba("+u(100*M(this._r,255))+"%, "+u(100*M(this._g,255))+"%, "+u(100*M(this._b,255))+"%, "+this._roundA+")"},toName:function(){return 0===this._a?"transparent":!(this._a<1)&&(A[m(this._r,this._g,this._b,!0)]||!1)},toFilter:function(e){var t="#"+v(this._r,this._g,this._b,this._a),n=t,r=this._gradientType?"GradientType = 1, ":"";if(e){var a=d(e);n="#"+v(a._r,a._g,a._b,a._a)}return"progid:DXImageTransform.Microsoft.gradient("+r+"startColorstr="+t+",endColorstr="+n+")"},toString:function(e){var t=!!e;e=e||this._format;var n=!1,r=this._a<1&&this._a>=0;return t||!r||"hex"!==e&&"hex6"!==e&&"hex3"!==e&&"hex4"!==e&&"hex8"!==e&&"name"!==e?("rgb"===e&&(n=this.toRgbString()),"prgb"===e&&(n=this.toPercentageRgbString()),"hex"!==e&&"hex6"!==e||(n=this.toHexString()),"hex3"===e&&(n=this.toHexString(!0)),"hex4"===e&&(n=this.toHex8String(!0)),"hex8"===e&&(n=this.toHex8String()),"name"===e&&(n=this.toName()),"hsl"===e&&(n=this.toHslString()),"hsv"===e&&(n=this.toHsvString()),n||this.toHexString()):"name"===e&&0===this._a?this.toName():this.toRgbString()},clone:function(){return d(this.toString())},_applyModification:function(e,t){var n=e.apply(null,[this].concat([].slice.call(t)));return this._r=n._r,this._g=n._g,this._b=n._b,this.setAlpha(n._a),this},lighten:function(){return this._applyModification(x,arguments)},brighten:function(){return this._applyModification(w,arguments)},darken:function(){return this._applyModification(k,arguments)},desaturate:function(){return this._applyModification(g,arguments)},saturate:function(){return this._applyModification(y,arguments)},greyscale:function(){return this._applyModification(b,arguments)},spin:function(){return this._applyModification(S,arguments)},_applyCombination:function(e,t){return e.apply(null,[this].concat([].slice.call(t)))},analogous:function(){return this._applyCombination(T,arguments)},complement:function(){return this._applyCombination(_,arguments)},monochromatic:function(){return this._applyCombination(I,arguments)},splitcomplement:function(){return this._applyCombination(C,arguments)},triad:function(){return this._applyCombination(N,arguments)},tetrad:function(){return this._applyCombination(E,arguments)}},d.fromRatio=function(e,t){if("object"==typeof e){var n={};for(var r in e)e.hasOwnProperty(r)&&(n[r]="a"===r?e[r]:F(e[r]));e=n}return d(e,t)},d.equals=function(e,t){return!(!e||!t)&&d(e).toRgbString()==d(t).toRgbString()},d.random=function(){return d.fromRatio({r:f(),g:f(),b:f()})},d.mix=function(e,t,n){n=0===n?0:n||50;var r=d(e).toRgb(),a=d(t).toRgb(),o=n/100;return d({r:(a.r-r.r)*o+r.r,g:(a.g-r.g)*o+r.g,b:(a.b-r.b)*o+r.b,a:(a.a-r.a)*o+r.a})},d.readability=function(e,t){var n=d(e),r=d(t);return(a.max(n.getLuminance(),r.getLuminance())+.05)/(a.min(n.getLuminance(),r.getLuminance())+.05)},d.isReadable=function(e,t,n){var r,a,o=d.readability(e,t);switch(a=!1,(r=function(e){var t,n;t=((e=e||{level:"AA",size:"small"}).level||"AA").toUpperCase(),n=(e.size||"small").toLowerCase(),"AA"!==t&&"AAA"!==t&&(t="AA");"small"!==n&&"large"!==n&&(n="small");return{level:t,size:n}}(n)).level+r.size){case"AAsmall":case"AAAlarge":a=o>=4.5;break;case"AAlarge":a=o>=3;break;case"AAAsmall":a=o>=7}return a},d.mostReadable=function(e,t,n){var r,a,o,i,s=null,u=0;a=(n=n||{}).includeFallbackColors,o=n.level,i=n.size;for(var c=0;c<t.length;c++)(r=d.readability(e,t[c]))>u&&(u=r,s=d(t[c]));return d.isReadable(e,s,{level:o,size:i})||!a?s:(n.includeFallbackColors=!1,d.mostReadable(e,["#fff","#000"],n))};var O=d.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},A=d.hexNames=function(e){var t={};for(var n in e)e.hasOwnProperty(n)&&(t[e[n]]=n);return t}(O);function D(e){return e=parseFloat(e),(isNaN(e)||e<0||e>1)&&(e=1),e}function M(e,t){(function(e){return"string"==typeof e&&-1!=e.indexOf(".")&&1===parseFloat(e)})(e)&&(e="100%");var n=function(e){return"string"===typeof e&&-1!=e.indexOf("%")}(e);return e=c(t,l(0,parseFloat(e))),n&&(e=parseInt(e*t,10)/100),a.abs(e-t)<1e-6?1:e%t/parseFloat(t)}function R(e){return c(1,l(0,e))}function P(e){return parseInt(e,16)}function j(e){return 1==e.length?"0"+e:""+e}function F(e){return e<=1&&(e=100*e+"%"),e}function L(e){return a.round(255*parseFloat(e)).toString(16)}function B(e){return P(e)/255}var z=function(){var e="(?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?)",t="[\\s|\\(]+("+e+")[,|\\s]+("+e+")[,|\\s]+("+e+")\\s*\\)?",n="[\\s|\\(]+("+e+")[,|\\s]+("+e+")[,|\\s]+("+e+")[,|\\s]+("+e+")\\s*\\)?";return{CSS_UNIT:new RegExp(e),rgb:new RegExp("rgb"+t),rgba:new RegExp("rgba"+n),hsl:new RegExp("hsl"+t),hsla:new RegExp("hsla"+n),hsv:new RegExp("hsv"+t),hsva:new RegExp("hsva"+n),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}}();function Z(e){return!!z.CSS_UNIT.exec(e)}e.exports?e.exports=d:void 0===(r=function(){return d}.call(t,n,t,e))||(e.exports=r)}(Math)},6369:function(e,t,n){var r;e=n.nmd(e),function(a){t&&t.nodeType,e&&e.nodeType;var o="object"==typeof n.g&&n.g;o.global!==o&&o.window!==o&&o.self;var i,s=2147483647,u=36,c=/^xn--/,l=/[^\x20-\x7E]/,f=/[\x2E\u3002\uFF0E\uFF61]/g,d={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},p=Math.floor,h=String.fromCharCode;function m(e){throw RangeError(d[e])}function v(e,t){for(var n=e.length,r=[];n--;)r[n]=t(e[n]);return r}function g(e,t){var n=e.split("@"),r="";return n.length>1&&(r=n[0]+"@",e=n[1]),r+v((e=e.replace(f,".")).split("."),t).join(".")}function y(e){for(var t,n,r=[],a=0,o=e.length;a<o;)(t=e.charCodeAt(a++))>=55296&&t<=56319&&a<o?56320==(64512&(n=e.charCodeAt(a++)))?r.push(((1023&t)<<10)+(1023&n)+65536):(r.push(t),a--):r.push(t);return r}function b(e){return v(e,(function(e){var t="";return e>65535&&(t+=h((e-=65536)>>>10&1023|55296),e=56320|1023&e),t+=h(e)})).join("")}function x(e,t){return e+22+75*(e<26)-((0!=t)<<5)}function w(e,t,n){var r=0;for(e=n?p(e/700):e>>1,e+=p(e/t);e>455;r+=u)e=p(e/35);return p(r+36*e/(e+38))}function k(e){var t,n,r,a,o,i,c,l,f,d,h,v=[],g=e.length,y=0,x=128,k=72;for((n=e.lastIndexOf("-"))<0&&(n=0),r=0;r<n;++r)e.charCodeAt(r)>=128&&m("not-basic"),v.push(e.charCodeAt(r));for(a=n>0?n+1:0;a<g;){for(o=y,i=1,c=u;a>=g&&m("invalid-input"),((l=(h=e.charCodeAt(a++))-48<10?h-22:h-65<26?h-65:h-97<26?h-97:u)>=u||l>p((s-y)/i))&&m("overflow"),y+=l*i,!(l<(f=c<=k?1:c>=k+26?26:c-k));c+=u)i>p(s/(d=u-f))&&m("overflow"),i*=d;k=w(y-o,t=v.length+1,0==o),p(y/t)>s-x&&m("overflow"),x+=p(y/t),y%=t,v.splice(y++,0,x)}return b(v)}function S(e){var t,n,r,a,o,i,c,l,f,d,v,g,b,k,S,_=[];for(g=(e=y(e)).length,t=128,n=0,o=72,i=0;i<g;++i)(v=e[i])<128&&_.push(h(v));for(r=a=_.length,a&&_.push("-");r<g;){for(c=s,i=0;i<g;++i)(v=e[i])>=t&&v<c&&(c=v);for(c-t>p((s-n)/(b=r+1))&&m("overflow"),n+=(c-t)*b,t=c,i=0;i<g;++i)if((v=e[i])<t&&++n>s&&m("overflow"),v==t){for(l=n,f=u;!(l<(d=f<=o?1:f>=o+26?26:f-o));f+=u)S=l-d,k=u-d,_.push(h(x(d+S%k,0))),l=p(S/k);_.push(h(x(l,0))),o=w(n,b,r==a),n=0,++r}++n,++t}return _.join("")}i={version:"1.3.2",ucs2:{decode:y,encode:b},decode:k,encode:S,toASCII:function(e){return g(e,(function(e){return l.test(e)?"xn--"+S(e):e}))},toUnicode:function(e){return g(e,(function(e){return c.test(e)?k(e.slice(4).toLowerCase()):e}))}},void 0===(r=function(){return i}.call(t,n,t,e))||(e.exports=r)}()},2114:function(e,t,n){"use strict";var r=n(6369),a=n(9939);function o(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}t.parse=b,t.resolve=function(e,t){return b(e,!1,!0).resolve(t)},t.resolveObject=function(e,t){return e?b(e,!1,!0).resolveObject(t):t},t.format=function(e){a.isString(e)&&(e=b(e));return e instanceof o?e.format():o.prototype.format.call(e)},t.Url=o;var i=/^([a-z0-9.+-]+:)/i,s=/:[0-9]*$/,u=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,c=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),l=["'"].concat(c),f=["%","/","?",";","#"].concat(l),d=["/","?","#"],p=/^[+a-z0-9A-Z_-]{0,63}$/,h=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,m={javascript:!0,"javascript:":!0},v={javascript:!0,"javascript:":!0},g={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},y=n(863);function b(e,t,n){if(e&&a.isObject(e)&&e instanceof o)return e;var r=new o;return r.parse(e,t,n),r}o.prototype.parse=function(e,t,n){if(!a.isString(e))throw new TypeError("Parameter 'url' must be a string, not "+typeof e);var o=e.indexOf("?"),s=-1!==o&&o<e.indexOf("#")?"?":"#",c=e.split(s);c[0]=c[0].replace(/\\/g,"/");var b=e=c.join(s);if(b=b.trim(),!n&&1===e.split("#").length){var x=u.exec(b);if(x)return this.path=b,this.href=b,this.pathname=x[1],x[2]?(this.search=x[2],this.query=t?y.parse(this.search.substr(1)):this.search.substr(1)):t&&(this.search="",this.query={}),this}var w=i.exec(b);if(w){var k=(w=w[0]).toLowerCase();this.protocol=k,b=b.substr(w.length)}if(n||w||b.match(/^\/\/[^@\/]+@[^@\/]+/)){var S="//"===b.substr(0,2);!S||w&&v[w]||(b=b.substr(2),this.slashes=!0)}if(!v[w]&&(S||w&&!g[w])){for(var _,N,E=-1,C=0;C<d.length;C++){-1!==(T=b.indexOf(d[C]))&&(-1===E||T<E)&&(E=T)}-1!==(N=-1===E?b.lastIndexOf("@"):b.lastIndexOf("@",E))&&(_=b.slice(0,N),b=b.slice(N+1),this.auth=decodeURIComponent(_)),E=-1;for(C=0;C<f.length;C++){var T;-1!==(T=b.indexOf(f[C]))&&(-1===E||T<E)&&(E=T)}-1===E&&(E=b.length),this.host=b.slice(0,E),b=b.slice(E),this.parseHost(),this.hostname=this.hostname||"";var I="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!I)for(var O=this.hostname.split(/\./),A=(C=0,O.length);C<A;C++){var D=O[C];if(D&&!D.match(p)){for(var M="",R=0,P=D.length;R<P;R++)D.charCodeAt(R)>127?M+="x":M+=D[R];if(!M.match(p)){var j=O.slice(0,C),F=O.slice(C+1),L=D.match(h);L&&(j.push(L[1]),F.unshift(L[2])),F.length&&(b="/"+F.join(".")+b),this.hostname=j.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),I||(this.hostname=r.toASCII(this.hostname));var B=this.port?":"+this.port:"",z=this.hostname||"";this.host=z+B,this.href+=this.host,I&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==b[0]&&(b="/"+b))}if(!m[k])for(C=0,A=l.length;C<A;C++){var Z=l[C];if(-1!==b.indexOf(Z)){var V=encodeURIComponent(Z);V===Z&&(V=escape(Z)),b=b.split(Z).join(V)}}var U=b.indexOf("#");-1!==U&&(this.hash=b.substr(U),b=b.slice(0,U));var q=b.indexOf("?");if(-1!==q?(this.search=b.substr(q),this.query=b.substr(q+1),t&&(this.query=y.parse(this.query)),b=b.slice(0,q)):t&&(this.search="",this.query={}),b&&(this.pathname=b),g[k]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){B=this.pathname||"";var W=this.search||"";this.path=B+W}return this.href=this.format(),this},o.prototype.format=function(){var e=this.auth||"";e&&(e=(e=encodeURIComponent(e)).replace(/%3A/i,":"),e+="@");var t=this.protocol||"",n=this.pathname||"",r=this.hash||"",o=!1,i="";this.host?o=e+this.host:this.hostname&&(o=e+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(o+=":"+this.port)),this.query&&a.isObject(this.query)&&Object.keys(this.query).length&&(i=y.stringify(this.query));var s=this.search||i&&"?"+i||"";return t&&":"!==t.substr(-1)&&(t+=":"),this.slashes||(!t||g[t])&&!1!==o?(o="//"+(o||""),n&&"/"!==n.charAt(0)&&(n="/"+n)):o||(o=""),r&&"#"!==r.charAt(0)&&(r="#"+r),s&&"?"!==s.charAt(0)&&(s="?"+s),t+o+(n=n.replace(/[?#]/g,(function(e){return encodeURIComponent(e)})))+(s=s.replace("#","%23"))+r},o.prototype.resolve=function(e){return this.resolveObject(b(e,!1,!0)).format()},o.prototype.resolveObject=function(e){if(a.isString(e)){var t=new o;t.parse(e,!1,!0),e=t}for(var n=new o,r=Object.keys(this),i=0;i<r.length;i++){var s=r[i];n[s]=this[s]}if(n.hash=e.hash,""===e.href)return n.href=n.format(),n;if(e.slashes&&!e.protocol){for(var u=Object.keys(e),c=0;c<u.length;c++){var l=u[c];"protocol"!==l&&(n[l]=e[l])}return g[n.protocol]&&n.hostname&&!n.pathname&&(n.path=n.pathname="/"),n.href=n.format(),n}if(e.protocol&&e.protocol!==n.protocol){if(!g[e.protocol]){for(var f=Object.keys(e),d=0;d<f.length;d++){var p=f[d];n[p]=e[p]}return n.href=n.format(),n}if(n.protocol=e.protocol,e.host||v[e.protocol])n.pathname=e.pathname;else{for(var h=(e.pathname||"").split("/");h.length&&!(e.host=h.shift()););e.host||(e.host=""),e.hostname||(e.hostname=""),""!==h[0]&&h.unshift(""),h.length<2&&h.unshift(""),n.pathname=h.join("/")}if(n.search=e.search,n.query=e.query,n.host=e.host||"",n.auth=e.auth,n.hostname=e.hostname||e.host,n.port=e.port,n.pathname||n.search){var m=n.pathname||"",y=n.search||"";n.path=m+y}return n.slashes=n.slashes||e.slashes,n.href=n.format(),n}var b=n.pathname&&"/"===n.pathname.charAt(0),x=e.host||e.pathname&&"/"===e.pathname.charAt(0),w=x||b||n.host&&e.pathname,k=w,S=n.pathname&&n.pathname.split("/")||[],_=(h=e.pathname&&e.pathname.split("/")||[],n.protocol&&!g[n.protocol]);if(_&&(n.hostname="",n.port=null,n.host&&(""===S[0]?S[0]=n.host:S.unshift(n.host)),n.host="",e.protocol&&(e.hostname=null,e.port=null,e.host&&(""===h[0]?h[0]=e.host:h.unshift(e.host)),e.host=null),w=w&&(""===h[0]||""===S[0])),x)n.host=e.host||""===e.host?e.host:n.host,n.hostname=e.hostname||""===e.hostname?e.hostname:n.hostname,n.search=e.search,n.query=e.query,S=h;else if(h.length)S||(S=[]),S.pop(),S=S.concat(h),n.search=e.search,n.query=e.query;else if(!a.isNullOrUndefined(e.search)){if(_)n.hostname=n.host=S.shift(),(I=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@"))&&(n.auth=I.shift(),n.host=n.hostname=I.shift());return n.search=e.search,n.query=e.query,a.isNull(n.pathname)&&a.isNull(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.href=n.format(),n}if(!S.length)return n.pathname=null,n.search?n.path="/"+n.search:n.path=null,n.href=n.format(),n;for(var N=S.slice(-1)[0],E=(n.host||e.host||S.length>1)&&("."===N||".."===N)||""===N,C=0,T=S.length;T>=0;T--)"."===(N=S[T])?S.splice(T,1):".."===N?(S.splice(T,1),C++):C&&(S.splice(T,1),C--);if(!w&&!k)for(;C--;C)S.unshift("..");!w||""===S[0]||S[0]&&"/"===S[0].charAt(0)||S.unshift(""),E&&"/"!==S.join("/").substr(-1)&&S.push("");var I,O=""===S[0]||S[0]&&"/"===S[0].charAt(0);_&&(n.hostname=n.host=O?"":S.length?S.shift():"",(I=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@"))&&(n.auth=I.shift(),n.host=n.hostname=I.shift()));return(w=w||n.host&&S.length)&&!O&&S.unshift(""),S.length?n.pathname=S.join("/"):(n.pathname=null,n.path=null),a.isNull(n.pathname)&&a.isNull(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.auth=e.auth||n.auth,n.slashes=n.slashes||e.slashes,n.href=n.format(),n},o.prototype.parseHost=function(){var e=this.host,t=s.exec(e);t&&(":"!==(t=t[0])&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)}},9939:function(e){"use strict";e.exports={isString:function(e){return"string"===typeof e},isObject:function(e){return"object"===typeof e&&null!==e},isNull:function(e){return null===e},isNullOrUndefined:function(e){return null==e}}},5410:function(){},8628:function(){},1601:function(){},7792:function(){},4977:function(){},5042:function(){},907:function(e,t,n){"use strict";function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}n.d(t,{Z:function(){return r}})},3878:function(e,t,n){"use strict";function r(e){if(Array.isArray(e))return e}n.d(t,{Z:function(){return r}})},7326:function(e,t,n){"use strict";function r(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}n.d(t,{Z:function(){return r}})},5861:function(e,t,n){"use strict";function r(e,t,n,r,a,o,i){try{var s=e[o](i),u=s.value}catch(c){return void n(c)}s.done?t(u):Promise.resolve(u).then(r,a)}function a(e){return function(){var t=this,n=arguments;return new Promise((function(a,o){var i=e.apply(t,n);function s(e){r(i,a,o,s,u,"next",e)}function u(e){r(i,a,o,s,u,"throw",e)}s(void 0)}))}}n.d(t,{Z:function(){return a}})},5671:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}n.d(t,{Z:function(){return r}})},3144:function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}n.d(t,{Z:function(){return a}})},7762:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var r=n(181);function a(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=(0,r.Z)(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var a=0,o=function(){};return{s:o,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){u=!0,i=e},f:function(){try{s||null==n.return||n.return()}finally{if(u)throw i}}}}},3668:function(e,t,n){"use strict";n.d(t,{Z:function(){return u}});var r=n(1120),a=n(8814);function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}var i=n(7326);function s(e,t){if(t&&("object"===o(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return(0,i.Z)(e)}function u(e){var t=(0,a.Z)();return function(){var n,a=(0,r.Z)(e);if(t){var o=(0,r.Z)(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return s(this,n)}}},1120:function(e,t,n){"use strict";function r(e){return r=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},r(e)}n.d(t,{Z:function(){return r}})},136:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var r=n(9611);function a(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&(0,r.Z)(e,t)}},8814:function(e,t,n){"use strict";function r(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}n.d(t,{Z:function(){return r}})},9199:function(e,t,n){"use strict";function r(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}n.d(t,{Z:function(){return r}})},5267:function(e,t,n){"use strict";function r(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}n.d(t,{Z:function(){return r}})},9611:function(e,t,n){"use strict";function r(e,t){return r=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},r(e,t)}n.d(t,{Z:function(){return r}})},9439:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=n(3878);var a=n(181),o=n(5267);function i(e,t){return(0,r.Z)(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o=[],i=!0,s=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(u){s=!0,a=u}finally{try{i||null==n.return||n.return()}finally{if(s)throw a}}return o}}(e,t)||(0,a.Z)(e,t)||(0,o.Z)()}},4506:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});var r=n(3878),a=n(9199),o=n(181),i=n(5267);function s(e){return(0,r.Z)(e)||(0,a.Z)(e)||(0,o.Z)(e)||(0,i.Z)()}},3433:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=n(907);var a=n(9199),o=n(181);function i(e){return function(e){if(Array.isArray(e))return(0,r.Z)(e)}(e)||(0,a.Z)(e)||(0,o.Z)(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},181:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var r=n(907);function a(e,t){if(e){if("string"===typeof e)return(0,r.Z)(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?(0,r.Z)(e,t):void 0}}}},t={};function n(r){var a=t[r];if(void 0!==a)return a.exports;var o=t[r]={id:r,loaded:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.loaded=!0,o.exports}n.m=e,n.amdD=function(){throw new Error("define cannot be used indirect")},n.amdO={},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.f={},n.e=function(e){return Promise.all(Object.keys(n.f).reduce((function(t,r){return n.f[r](e,t),t}),[]))},n.u=function(e){return"static/js/"+e+".419a64c4.chunk.js"},n.miniCssF=function(e){},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},function(){var e={},t="netsign_react_app_beta:";n.l=function(r,a,o,i){if(e[r])e[r].push(a);else{var s,u;if(void 0!==o)for(var c=document.getElementsByTagName("script"),l=0;l<c.length;l++){var f=c[l];if(f.getAttribute("src")==r||f.getAttribute("data-webpack")==t+o){s=f;break}}s||(u=!0,(s=document.createElement("script")).charset="utf-8",s.timeout=120,n.nc&&s.setAttribute("nonce",n.nc),s.setAttribute("data-webpack",t+o),s.src=r),e[r]=[a];var d=function(t,n){s.onerror=s.onload=null,clearTimeout(p);var a=e[r];if(delete e[r],s.parentNode&&s.parentNode.removeChild(s),a&&a.forEach((function(e){return e(n)})),t)return t(n)},p=setTimeout(d.bind(null,void 0,{type:"timeout",target:s}),12e4);s.onerror=d.bind(null,s.onerror),s.onload=d.bind(null,s.onload),u&&document.head.appendChild(s)}}}(),n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e},n.p="/",function(){var e={179:0};n.f.j=function(t,r){var a=n.o(e,t)?e[t]:void 0;if(0!==a)if(a)r.push(a[2]);else{var o=new Promise((function(n,r){a=e[t]=[n,r]}));r.push(a[2]=o);var i=n.p+n.u(t),s=new Error;n.l(i,(function(r){if(n.o(e,t)&&(0!==(a=e[t])&&(e[t]=void 0),a)){var o=r&&("load"===r.type?"missing":r.type),i=r&&r.target&&r.target.src;s.message="Loading chunk "+t+" failed.\n("+o+": "+i+")",s.name="ChunkLoadError",s.type=o,s.request=i,a[1](s)}}),"chunk-"+t,t)}};var t=function(t,r){var a,o,i=r[0],s=r[1],u=r[2],c=0;if(i.some((function(t){return 0!==e[t]}))){for(a in s)n.o(s,a)&&(n.m[a]=s[a]);if(u)u(n)}for(t&&t(r);c<i.length;c++)o=i[c],n.o(e,o)&&e[o]&&e[o][0](),e[o]=0},r=self.webpackChunknetsign_react_app_beta=self.webpackChunknetsign_react_app_beta||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))}(),function(){"use strict";var e=n(2791),t=n(4164),r=n(3433),a=n(9439),o=n(5861);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var c=n(7757),l=n.n(c),f=n(5671),d=n(3144),p="AIzaSyB_G4h_ieTxS9887-cy9uQhFG25nDN-0iU",h=function(){function e(){(0,f.Z)(this,e)}return(0,d.Z)(e,null,[{key:"replaceWord",value:function(e,t,n,r){return e.substring(0,r)+n+e.substring(r+t.length,e.length)}},{key:"analyzeEntities",value:function(){var e=(0,o.Z)(l().mark((function e(t){var n,r,a,o,s,u,c,f,d,h,m,v,g=this;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={fr:(n={abaisser:"abaissement",abandonner:"abandon",abattre:"abattage arbres, abattement sentiments",abolir:"abolition",abonder:"abondance",abonner:"abonnement",aboutir:"aboutissement",aboyer:"aboiement","abr\xe9ger":"abr\xe9viation lettres, abr\xe8gement longueur",abriter:"abri",absoudre:"absolution",abstenir:"abstention",accabler:"accablement","acc\xe9l\xe9rer":"acc\xe9l\xe9ration",acclamer:"acclamation",accoucher:"accouchement",accoutumer:"accoutumance",accrocher:"accrochage","accro\xeetre":"accroissement",accueillir:"accueil",accumuler:"accumulation",accuser:"accusation",acharner:"acharnement",acheter:"achat",achever:"ach\xe8vement","acqu\xe9rir":"acquisition",acquitter:"acquittement",activer:"activation",actualiser:"actualisation",adapter:"adaptation",adopter:"adoption",additionner:"addition","adh\xe9rer":"adh\xe9sion",adjoindre:"adjonction",admettre:"admission",administrer:"administration",admirer:"admiration",adorer:"adoration",adoucir:"adoucissement","a\xe9rer":"a\xe9ration",affaiblir:"affaiblissement",affirmer:"affirmation",afficher:"affichage",affronter:"affrontement",agacer:"agacement",aggraver:"aggravation",agir:"action",agoniser:"agonie",agrafer:"agrafage",agrandir:"agrandissement",aider:"aide",aimer:"amour",ajourner:"ajournement",alerter:"alerte",aligner:"alignement",alimenter:"alimentation","all\xe9ger":"all\xe9gement",allonger:"allongement",allumer:"allumage",alourdir:"alourdissement",alunir:"alunissage",amarrer:"amarrage","am\xe9liorer":"am\xe9lioration","am\xe9nager":"am\xe9nagement",amerrir:"amerrissage",atterrir:"atterrissage",amincir:"amincissement",amonceler:"amoncellement",amortir:"amortissement",amplifier:"amplification",amputer:"amputation",amuser:"amusement",analyser:"analyse","an\xe9antir":"an\xe9antissement",animer:"animation",annexer:"annexion",annoncer:"annonce",annuler:"annulation",apaiser:"apaisement",aplanir:"aplanissement","appara\xeetre":"apparition",appeler:"appel",applaudir:"applaudissement",appliquer:"application",apporter:"apport","appr\xe9cier":"appr\xe9ciation",apprivoiser:"apprivoisement",approcher:"approche",approfondir:"approfondissement",approuver:"approbation","arr\xeater":"arr\xeat, arrestation",arriver:"arriv\xe9e",arroser:"arrosage, arrosement",articuler:"articulation",asphyxier:"asphyxie",assassiner:"assassinat",asservir:"asservissement",attaquer:"attaque",attendre:"attente",augmenter:"augmentation",autoriser:"autorisation",avorter:"avortement",avouer:"aveu",sebagarrer:"bagarre",baigner:"bain","b\xe2iller":"b\xe2illement","b\xe9gayer":"b\xe9gaiement","b\xealer":"b\xealement","b\xe9nir":"b\xe9n\xe9diction",bavarder:"bavardage","bl\xeamir":"bl\xeamissement",bloquer:"blocage",bondir:"bond",bourdonner:"bourdonnement",boycotter:"boycottage",bronzer:"bronzage",cambrioler:"cambriolage",capituler:"capitulation",capturer:"capture","c\xe9l\xe9brer":"c\xe9l\xe9bration",censurer:"censure",chahuter:"chahut",changer:"changement, change argent",chanter:"chant",charger:"chargement",choisir:"choix",circuler:"circulation",cirer:"cirage",collaborer:"collaboration",commencer:"commencement, d\xe9but",comparer:"comparaison",conclure:"conclusion",condamner:"condamnation",conduire:"conduite",confirmer:"confirmation","conqu\xe9rir":"conqu\xeate",consentir:"consentement",consoler:"consolation",consommer:"consommation",construire:"construction",contaminer:"contamination souillure, contagion maladie",contempler:"contemplation",contester:"contestation",contraindre:"contrainte","contr\xf4ler":"contr\xf4le",convoquer:"convocation","coop\xe9rer":"coop\xe9ration",coordonner:"coordination",corrompre:"corruption",corriger:"correction","cr\xe9er":"cr\xe9ation",cueillir:"cueillette",cuire:"cuisson","d\xe9barquer":"d\xe9barquement","sed\xe9barrasser":"d\xe9barras","d\xe9boiser":"d\xe9boisement","d\xe9charger":"d\xe9chargement de marchandises, d\xe9charge pour un travail","d\xe9chiffrer":"d\xe9chiffrement, d\xe9chiffrage","d\xe9cider":"d\xe9cision","d\xe9clarer":"d\xe9claration","d\xe9molir":"d\xe9molition","d\xe9peindre":"description","d\xe9porter":"d\xe9portation","d\xe9primer":"d\xe9pression, d\xe9prime","d\xe9railler":"d\xe9raillement","d\xe9ranger":"d\xe9rangement","d\xe9raper":"d\xe9rapage","d\xe9truire":"destruction","d\xe9vaster":"d\xe9vastation","d\xe9velopper":"d\xe9veloppement",diminuer:"diminution",diriger:"direction",discuter:"discussion","dispara\xeetre":"disparition",disperser:"dispersion",disqualifier:"disqualification",dissimuler:"dissimulation",distinguer:"distinction",distraire:"distraction",distribuer:"distribution",divertir:"divertissement",dominer:"domination","\xe9blouir":"\xe9blouissement","\xe9changer":"\xe9change","\xe9chapper":"\xe9chappement","\xe9clairer":"\xe9clairage",effondrer:"effondrement","\xe9largir":"\xe9largissement","\xe9lectrifier":"\xe9lectrification","\xe9lectrocuter":"\xe9lectrocution","\xe9liminer":"\xe9limination","\xe9lire":"\xe9lection","\xe9manciper":"\xe9mancipation",embarquer:"embarquement",embarrasser:"embarras",embellir:"embellissement","\xe9mouvoir":"\xe9motion",employer:"emploi",empoisonner:"empoisonnement",emprunter:"emprunt",encercler:"encerclement",encombrer:"encombrement",enfreindre:"infraction toujours: \xe0 qch.",enfuir:"fuite",engager:"engagement",enlever:"enl\xe8vement",enrichir:"enrichissement",enrouer:"enrouement",enseigner:"enseignement",entrer:"entr\xe9e",envahir:"invasion",envoyer:"envoi","\xe9pouser":"mariage","\xe9teindre":"extinction","\xe9treindre":"\xe9treinte","\xe9vacuer":"\xe9vacuation","\xe9vader":"\xe9vasion","\xe9vanouir":"\xe9vanouissement","\xe9voluer":"\xe9volution","exag\xe9rer":"exag\xe9ration",examiner:"examen","ex\xe9cuter":"ex\xe9cution",expliquer:"explication",exploiter:"exploitation",explorer:"exploration",exploser:"explosion",exporter:"exportation",exposer:"exposition de tableaux, expos\xe9 discours",expulser:"expulsion",extrader:"extradition",exterminer:"extermination",fabriquer:"fabrication",fermer:"fermeture",fondre:"fonte",former:"formation",fouiller:"fouille",fuir:"fuite",gagner:"gain argent"},i(n,"gagner","victoire au jeu"),i(n,"gu\xe9rir","gu\xe9rison"),i(n,"guider","guidage"),i(n,"ha\xefr","haine"),i(n,"h\xe9siter","h\xe9sitation"),i(n,"imiter","imitation"),i(n,"immigrer","immigration"),i(n,"inaugurer","inauguration"),i(n,"inculper","inculpation"),i(n,"indemniser","indemnisation"),i(n,"indigner","indignation"),i(n,"indiquer","indication"),i(n,"initier","initiation"),i(n,"injecter","injection"),i(n,"inonder","inondation"),i(n,"inspecter","inspection"),i(n,"installer","installation"),i(n,"instruire","instruction"),i(n,"interdire","interdiction"),i(n,"interrompre","interruption"),i(n,"intervenir","intervention"),i(n,"intimider","intimidation"),i(n,"introduire","introduction"),i(n,"inviter","invitation"),i(n,"isoler","isolation, isolement solitude"),i(n,"kidnapper","kidnappage, kidnapping"),i(n,"lancer","lancement"),i(n,"larguer","largage"),i(n,"lib\xe9rer","lib\xe9ration"),i(n,"licencier","licenciement"),i(n,"lire","lecture"),i(n,"livrer","livraison"),i(n,"lyncher","lynchage"),i(n,"maigrir","amaigrissement"),i(n,"maintenir","maintien"),i(n,"manifester","manifestation"),i(n,"manipuler","manipulation"),i(n,"manoeuvrer","manoeuvre"),i(n,"marcher","marche"),i(n,"marier","mariage"),i(n,"massacrer","massacre"),i(n,"maudire","mal\xe9diction"),i(n,"m\xe9dire","m\xe9disance"),i(n,"m\xe9contenter","m\xe9contentement"),i(n,"m\xe9diter","m\xe9ditation"),i(n,"sem\xe9fier","m\xe9fiance"),i(n,"mentir","mensonge"),i(n,"m\xe9priser","m\xe9pris"),i(n,"sem\xe9prendre","m\xe9prise"),i(n,"modifier","modification"),i(n,"mordre","morsure"),i(n,"mourir","mort"),i(n,"mouvoir","mouvement"),i(n,"na\xeetre","naissance"),i(n,"nettoyer","nettoyage nettoiement"),i(n,"omettre","omission"),i(n,"ouvrir","ouverture"),i(n,"parachuter","parachutage"),i(n,"partir","d\xe9part"),i(n,"passer","passage"),i(n,"peindre","peinture"),i(n,"perdre","perte"),i(n,"pers\xe9cuter","pers\xe9cution"),i(n,"piller","pillage"),i(n,"plonger","plong\xe9e"),i(n,"polluer","pollution"),i(n,"poursuivre","poursuite"),i(n,"pr\xe9dire","pr\xe9diction"),i(n,"prendre","prise"),i(n,"pr\xe9parer","pr\xe9paration"),i(n,"pr\xeater","pr\xeat"),i(n,"pr\xe9voir","pr\xe9vision m\xe9t\xe9o, pr\xe9voyance prudence"),i(n,"produire","production"),i(n,"prolonger","prolongation"),i(n,"prouver","preuve"),i(n,"prot\xe9ger","protection"),i(n,"publier","publication"),i(n,"rapatrier","rapatriement"),i(n,"regretter","regret"),i(n,"r\xe9p\xe9ter","r\xe9p\xe9tition"),i(n,"reprendre","reprise"),i(n,"r\xe9pliquer","r\xe9plique"),i(n,"r\xe9soudre","solution"),i(n,"ser\xe9soudre\xe0","r\xe9solution"),i(n,"revenir","retour"),i(n,"r\xe9ussir","r\xe9ussite"),i(n,"rompre","rupture"),i(n,"sacrifier","sacrifice"),i(n,"satisfaire","satisfaction"),i(n,"sauver","sauvetage"),i(n,"sortir","sortie"),i(n,"supprimer","suppression"),i(n,"suspendre","suspension"),i(n,"terminer","terminaison, fin"),i(n,"transformer","transformation"),i(n,"transgresser","transgression"),i(n,"tr\xe9passer","tr\xe9pas"),i(n,"tuer","meurtre, assassinat, tuerie en masse"),i(n,"user","usage"),i(n,"utiliser","utilisation"),i(n,"vacciner","vaccination"),i(n,"venir","venue"),i(n,"violer","viol"),i(n,"visiter","visite"),i(n,"voler","vol Flug, Diebstahl"),i(n,"\xeatre sinc\xe8re","sinc\xe9rit\xe9"),i(n,"\xeatre honn\xeate","honn\xeatet\xe9"),i(n,"\xeatre gai","ga\xeet\xe9"),i(n,"\xeatre heureux","bonheur"),i(n,"\xeatre loyal","loyaut\xe9"),i(n,"\xeatre l\xe0","pr\xe9sence"),i(n,"\xeatre absent","absence"),i(n,"ne pas \xeatre l\xe0","absence"),i(n,"fumer","fum\xe9e, fumeur, cigarrette"),i(n,"rappeler","rappel"),i(n,"ouvrer","ouverture"),i(n,"communiquer","communication"),i(n,"neiger","hiver, neige"),i(n,"pleuvoir","pluie, averse"),n),en:{enable:"ability",accept:"acceptance",accuse:"accusation",achieve:"achievement",act:"act, action, activity",add:"addition",admire:"admiration",advise:"advice",agree:"agreement",anger:"anger",appreciate:"appreciation",approve:"approval",approximate:"approximation",argue:"argument",attend:"attention",attract:"attraction",base:"base, basis",beautify:"beauty",believe:"belief",bore:"bore, boredom",breathe:"breath",calm:"calm, calmness",care:"care",centralize:"centre, centralization",characterize:"character",circulate:"circulation",clean:"cleanliness",clear:"clarity, clearance",collect:"collection",colour:"colour",comfort:"comfort",compare:"comparison",compete:"competition",complete:"completion",conclude:"conclusion",condition:"condition",confide:"confidence",confuse:"confusion",consider:"consideration",continue:"continuation, continuity",cool:"cool, coolness",correct:"correction, correctness",create:"creation, creativity",criticize:"critic",accustom:"custom",dare:"dare",darken:"dark, darkness",deaden:"death",deceive:"deceit, deception",decide:"decision",decorate:"decoration",deepen:"deep, depth",defend:"defence",define:"definition",demonstrate:"demonstration",depend:"dependent, dependence",describe:"description",destroy:"destruction",determine:"determination",differentiate:"difference",direct:"direction",disagree:"disagreement",disappoint:"disappointment",distance:"distance",disturb:"disturbance",doubt:"doubt",dream:"dream",dress:"dress",drink:"drink, drunkenness",ease:"ease, easiness",educate:"education",effect:"effect, effectiveness",electrify:"electricity",embarrass:"embarrassment",emphasize:"emphasis",encourage:"encouragement",end:"end",energize:"energy",enjoy:"enjoyment",entertain:"entertainment",enthuse:"enthusiasm",equalize:"equality",excel:"excellence",excite:"excitement",excuse:"excuse",expect:"expectation",expend:"expenditure, expense",experiment:"experiment",explain:"explanation",explode:"explosion",express:"expression",familiarize:"familiarity",fashion:"fashion",fear:"fear",finalize:"final",fish:"fish, fishing",fit:"fit",force:"force",forget:"forgetfulness",formalize:"formality",frequent:"frequency",freshen:"freshness",frighten:"fright",harden:"hardship",harm:"harm, harmfulness",overheat:"heat",help:"help",hope:"hope",hurry:"hurry",hurt:"hurt",ice:"ice",imagine:"imagination",impress:"impression",increase:"increase",infect:"infection",insist:"insistence",instruct:"instruction",intend:"intent, intention",interest:"interest",invent:"invention",invite:"invitation, invite",know:"knowledge",enlarge:"enlargement",laugh:"laugh",outlaw:"law",legalize:"legality",lengthen:"length",lighten:"light","locate,":"location",love:"love",lower:"low",man:"man, mankind",mark:"mark",match:"match",materialize:"material, materialism",mean:"meaning, meaningfulness",measure:"measurement",memorize:"memory",mind:"mind, mindlessness",minimize:"minimum",mistake:"mistake",moralize:"moral, morality",mother:"mother, motherhood",move:"move, movement",murder:"murder",rename:"name",nationalize:"nation, nationalization, nationality",naturalize:"nature, naturalist, naturalization",necessitate:"necessity",need:"need",unnerve:"nerve, nervousness",renew:"news, newness",normalize:"normality",notice:"notice",obey:"obedience",offend:"offence",officiate:"office",open:"openness",operate:"operation",cooperate:"operation",opt:"option",originate:"origin",pain:"pain",part:"part, partition",impart:"part, partition",pacify:"peace",perfect:"perfection",personalize:"person, personality",personify:"person, personality",persuade:"persuasion, persuasiveness",play:"play, playfulness",outplay:"play, playfulness",please:"pleasure",point:"point, pointlessness",politicize:"politics",popularize:"popularity","power, empower":"power",prefer:"preference",present:"presence, presentation,",privatize:"privacy, privatization",profit:"profit, profitability",progress:"progress, progression",provide:"provision",publicize:"public, publicity",punish:"punishment",purify:"purification, purity",question:"question",quieten:"quiet",race:"race",realize:"realism, reality",reason:"reason",receive:"receipt, reception,",recognize:"recognition",reflect:"reflection",regret:"regret",regulate:"regular, regularity",relate:"relation, relationship",rely:"reliability",remark:"remark",repair:"repair",repeat:"repeat, repetition",report:"report",respect:"respect",respond:"response, responsiveness",rest:"rest",enrich:"riches, richness",right:"right, rightness,",romanticize:"romance, romanticism",roughen:"rough, roughness",round:"round",sadden:"sadness",satisfy:"satisfaction",school:"school, pre-school",search:"search, research",research:"search, research",sense:"sense, sensibility, sensitivity, sensitiveness",sensitize:"sense, sensibility, sensitivity, sensitiveness",separate:"separation",shake:"shake, shakiness",shape:"shape",sharpen:"sharpness",shock:"shock",shorten:"short, shortness",shy:"shyness",sicken:"sick, sickness",signify:"significance",silence:"silence",simplify:"simplicity, simplification",single:"single",sleep:"sleep, sleepiness",socialize:"society,",soften:"softness",solidify:"solid, solidity",specialize:"specialty",speed:"speed, speediness",spot:"spot",stand:"stand, standstill",withstand:"stand, standstill",steepen:"steepness",stiffen:"stiffness",strengthen:"strength",strike:"strike",structure:"structure, structuralism",study:"student, study",style:"style, stylishness",substantiate:"substance",succeed:"success, succession",suggest:"suggestion",support:"support, supportiveness",suppose:"supposition",presuppose:"supposition",surprise:"surprise",suspect:"suspect, suspicion",sweeten:"sweet, sweetness",symbolize:"symbol, symbolism",sympathize:"sympathy",systematize:"system, systematization",talk:"talk, talks",taste:"taste",thank:"thanks, thankfulness",theorize:"theory, theorem",thicken:"thick, thickness",thin:"thinness",think:"thought, thoughtfulness,",threaten:"threat",tighten:"tightness",tire:"tiredness",touch:"touch",trouble:"trouble",trust:"trust, trusteeship",entrust:"trust, trusteeship",typify:"type",understand:"understanding",use:"usage, use",vary:"variant, variety, variation",violate:"violence",wrong:"wrong",warm:"warmth",waste:"wastage, waste",watch:"watch, watchfulness",weaken:"weakness",weigh:"weight",outweigh:"weight",widen:"width",wonder:"wonder",worry:"worry",write:"writing",rewrite:"writing"}},{fr:["!","moment","qu'il","qu'elle","qu'ils","qu'elles","s'","a","\xe0","\xe2","abord","afin","ah","ai","aie","ainsi","allaient","allo","all\xf4","allons","apr\xe8s","assez","attendu","au","aucun","aucune","aujourd","aujourd'hui","auquel","aura","auront","aussi","autre","autres","aux","auxquelles","auxquels","avaient","avais","avait","avant","avec","avoir","ayant","b","bah","beaucoup","bien","bigre","boum","bravo","brrr","c","\xe7a","car","ce","ceci","cela","celle","celle-ci","celle-l\xe0","celles","celles-ci","celles-l\xe0","celui","celui-ci","celui-l\xe0","cent","cependant","certain","certaine","certaines","certains","certes","ces","cet","cette","ceux","ceux-ci","ceux-l\xe0","chacun","chaque","cher","ch\xe8re","ch\xe8res","chers","chez","chiche","chut","ci","cinq","cinquantaine","cinquante","cinquanti\xe8me","cinqui\xe8me","clac","clic","combien","comme","comment","compris","concernant","contre","couic","crac","d","da","dans","de","debout","dedans","dehors","del\xe0","depuis","derri\xe8re","des","d\xe8s","d\xe9sormais","desquelles","desquels","dessous","dessus","deux","deuxi\xe8me","deuxi\xe8mement","devant","devers","devra","diff\xe9rent","diff\xe9rente","diff\xe9rentes","diff\xe9rents","dire","divers","diverse","diverses","dix","dix-huit","dixi\xe8me","dix-neuf","dix-sept","doit","doivent","donc","dont","douze","douzi\xe8me","dring","du","duquel","durant","e","effet","eh","elle","elle-m\xeame","elles","elles-m\xeames","en","encore","entre","envers","environ","es","\xe8s","est","et","etant","\xe9taient","\xe9tais","\xe9tait","\xe9tant","etc","\xe9t\xe9","etre","\xeatre","eu","euh","eux","eux-m\xeames","except\xe9","f","fa\xe7on","fais","faisaient","faisant","fait","feront","fi","flac","floc","font","g","gens","h","ha","h\xe9","hein","h\xe9las","hem","hep","hi","ho","hol\xe0","hop","hormis","hors","hou","houp","hue","hui","huit","huiti\xe8me","hum","hurrah","i","il","ils","importe","j","je","jusqu","jusque","k","l","la","l\xe0","laquelle","las","le","lequel","les","l\xe8s","lesquelles","lesquels","leur","leurs","longtemps","lorsque","lui","lui-m\xeame","m","ma","maint","mais","malgr\xe9","me","m\xeame","m\xeames","merci","mes","mien","mienne","miennes","miens","mille","mince","moi","moi-m\xeame","moins","mon","moyennant","n","na","ne","n\xe9anmoins","neuf","neuvi\xe8me","ni","nombreuses","nombreux","non","nos","notre","n\xf4tre","n\xf4tres","nous","nous-m\xeames","nul","o","o|","\xf4","oh","oh\xe9","ol\xe9","oll\xe9","on","ont","onze","onzi\xe8me","ore","ou","o\xf9","ouf","ouias","oust","ouste","outre","p","paf","pan","par","parmi","partant","particulier","particuli\xe8re","particuli\xe8rement","pas","pass\xe9","pendant","personne","peu","peut","peuvent","peux","pff","pfft","pfut","pif","plein","plouf","plus","plusieurs","plut\xf4t","pouah","pour","pourquoi","premier","premi\xe8re","premi\xe8rement","pr\xe8s","proche","psitt","puisque","q","qu","quand","quant","quanta","quant-\xe0-soi","quarante","quatorze","quatre","quatre-vingt","quatri\xe8me","quatri\xe8mement","que","quel","quelconque","quelle","quelles","quelque","quelques","quelqu'un","quels","qui","quiconque","quinze","quoi","quoique","r","revoici","revoil\xe0","rien","s","sa","sacrebleu","sans","sapristi","sauf","se","seize","selon","sept","septi\xe8me","sera","seront","ses","si","sien","sienne","siennes","siens","sinon","six","sixi\xe8me","soi","soi-m\xeame","soit","soixante","son","sont","sous","stop","suis","suivant","sur","surtout","t","ta","tac","tant","te","t\xe9","tel","telle","tellement","telles","tels","tenant","tes","tic","tien","tienne","tiennes","tiens","toc","toi","toi-m\xeame","ton","touchant","toujours","tous","tout","toute","toutes","treize","trente","tr\xe8s","trois","troisi\xe8me","troisi\xe8mement","trop","tsoin","tsouin","tu","u","un","une","unes","uns","v","va","vais","vas","v\xe9","vers","via","vif","vifs","vingt","vivat","vive","vives","vlan","voici","voil\xe0","vont","vos","votre","v\xf4tre","v\xf4tres","vous","vous-m\xeames","vu","w","x","y","z","zut","alors","aucuns","bon","devrait","dos","droite","d\xe9but","essai","faites","fois","force","haut","ici","juste","maintenant","mine","mot","nomm\xe9s","nouveaux","parce","parole","personnes","pi\xe8ce","plupart","seulement","soyez","sujet","tandis","valeur","voie","voient","\xe9tat","\xe9tions"],en:["0o","0s","3a","3b","3d","6b","6o","a","a1","a2","a3","a4","ab","able","about","above","abst","ac","accordance","according","accordingly","across","act","actually","ad","added","adj","ae","af","affected","affecting","affects","after","afterwards","ag","again","against","ah","ain","ain't","aj","al","all","allow","allows","almost","alone","along","already","also","although","always","am","among","amongst","amoungst","amount","an","and","announce","another","any","anybody","anyhow","anymore","anyone","anything","anyway","anyways","anywhere","ao","ap","apart","apparently","appear","appreciate","appropriate","approximately","ar","are","aren","arent","aren't","arise","around","as","a's","aside","ask","asking","associated","at","au","auth","av","available","aw","away","awfully","ax","ay","az","b","b1","b2","b3","ba","back","bc","bd","be","became","because","become","becomes","becoming","been","before","beforehand","begin","beginning","beginnings","begins","behind","being","believe","below","beside","besides","best","better","between","beyond","bi","bill","biol","bj","bk","bl","bn","both","bottom","bp","br","brief","briefly","bs","bt","bu","but","bx","by","c","c1","c2","c3","ca","call","came","can","cannot","cant","can't","cause","causes","cc","cd","ce","certain","certainly","cf","cg","ch","changes","ci","cit","cj","cl","clearly","cm","c'mon","cn","co","com","come","comes","con","concerning","consequently","consider","considering","contain","containing","contains","corresponding","could","couldn","couldnt","couldn't","course","cp","cq","cr","cry","cs","c's","ct","cu","currently","cv","cx","cy","cz","d","d2","da","date","dc","dd","de","definitely","describe","described","despite","detail","df","di","did","didn","didn't","different","dj","dk","dl","do","does","doesn","doesn't","doing","don","done","don't","down","downwards","dp","dr","ds","dt","du","due","during","dx","dy","e","e2","e3","ea","each","ec","ed","edu","ee","ef","effect","eg","ei","eight","eighty","either","ej","el","eleven","else","elsewhere","em","empty","en","end","ending","enough","entirely","eo","ep","eq","er","es","especially","est","et","et-al","etc","eu","ev","even","ever","every","everybody","everyone","everything","everywhere","ex","exactly","example","except","ey","f","f2","fa","far","fc","few","ff","fi","fifteen","fifth","fify","fill","find","fire","first","five","fix","fj","fl","fn","fo","followed","following","follows","for","former","formerly","forth","forty","found","four","fr","from","front","fs","ft","fu","full","further","furthermore","fy","g","ga","gave","ge","get","gets","getting","gi","give","given","gives","giving","gj","gl","go","goes","going","gone","got","gotten","gr","greetings","gs","gy","h","h2","h3","had","hadn","hadn't","happens","hardly","has","hasn","hasnt","hasn't","have","haven","haven't","having","he","hed","he'd","he'll","hello","help","hence","her","here","hereafter","hereby","herein","heres","here's","hereupon","hers","herself","hes","he's","hh","hi","hid","him","himself","his","hither","hj","ho","home","hopefully","how","howbeit","however","how's","hr","hs","http","hu","hundred","hy","i","i2","i3","i4","i6","i7","i8","ia","ib","ibid","ic","id","i'd","ie","if","ig","ignored","ih","ii","ij","il","i'll","im","i'm","immediate","immediately","importance","important","in","inasmuch","inc","indeed","index","indicate","indicated","indicates","information","inner","insofar","instead","interest","into","invention","inward","io","ip","iq","ir","is","isn","isn't","it","itd","it'd","it'll","its","it's","itself","iv","i've","ix","iy","iz","j","jj","jr","js","jt","ju","just","k","ke","keep","keeps","kept","kg","kj","km","know","known","knows","ko","l","l2","la","largely","last","lately","later","latter","latterly","lb","lc","le","least","les","less","lest","let","lets","let's","lf","like","liked","likely","line","little","lj","ll","ll","ln","lo","look","looking","looks","los","lr","ls","lt","ltd","m","m2","ma","made","mainly","make","makes","many","may","maybe","me","mean","means","meantime","meanwhile","merely","mg","might","mightn","mightn't","mill","million","mine","miss","ml","mn","mo","more","moreover","most","mostly","move","mr","mrs","ms","mt","mu","much","mug","must","mustn","mustn't","my","myself","n","n2","na","name","namely","nay","nc","nd","ne","near","nearly","necessarily","necessary","need","needn","needn't","needs","neither","never","nevertheless","new","next","ng","ni","nine","ninety","nj","nl","nn","no","nobody","non","none","nonetheless","noone","nor","normally","nos","not","noted","nothing","novel","now","nowhere","nr","ns","nt","ny","o","oa","ob","obtain","obtained","obviously","oc","od","of","off","often","og","oh","oi","oj","ok","okay","ol","old","om","omitted","on","once","one","ones","only","onto","oo","op","oq","or","ord","os","ot","other","others","otherwise","ou","ought","our","ours","ourselves","out","outside","over","overall","ow","owing","own","ox","oz","p","p1","p2","p3","page","pagecount","pages","par","part","particular","particularly","pas","past","pc","pd","pe","per","perhaps","pf","ph","pi","pj","pk","pl","placed","please","plus","pm","pn","po","poorly","possible","possibly","potentially","pp","pq","pr","predominantly","present","presumably","previously","primarily","probably","promptly","proud","provides","ps","pt","pu","put","py","q","qj","qu","que","quickly","quite","qv","r","r2","ra","ran","rather","rc","rd","re","readily","really","reasonably","recent","recently","ref","refs","regarding","regardless","regards","related","relatively","research","research-articl","respectively","resulted","resulting","results","rf","rh","ri","right","rj","rl","rm","rn","ro","rq","rr","rs","rt","ru","run","rv","ry","s","s2","sa","said","same","saw","say","saying","says","sc","sd","se","sec","second","secondly","section","see","seeing","seem","seemed","seeming","seems","seen","self","selves","sensible","sent","serious","seriously","seven","several","sf","shall","shan","shan't","she","shed","she'd","she'll","shes","she's","should","shouldn","shouldn't","should've","show","showed","shown","showns","shows","si","side","significant","significantly","similar","similarly","since","sincere","six","sixty","sj","sl","slightly","sm","sn","so","some","somebody","somehow","someone","somethan","something","sometime","sometimes","somewhat","somewhere","soon","sorry","sp","specifically","specified","specify","specifying","sq","sr","ss","st","still","stop","strongly","sub","substantially","successfully","such","sufficiently","suggest","sup","sure","sy","system","sz","t","t1","t2","t3","take","taken","taking","tb","tc","td","te","tell","ten","tends","tf","th","than","thank","thanks","thanx","that","that'll","thats","that's","that've","the","their","theirs","them","themselves","then","thence","there","thereafter","thereby","thered","therefore","therein","there'll","thereof","therere","theres","there's","thereto","thereupon","there've","these","they","theyd","they'd","they'll","theyre","they're","they've","thickv","thin","think","third","this","thorough","thoroughly","those","thou","though","thoughh","thousand","three","throug","through","throughout","thru","thus","ti","til","tip","tj","tl","tm","tn","to","together","too","took","top","toward","towards","tp","tq","tr","tried","tries","truly","try","trying","ts","t's","tt","tv","twelve","twenty","twice","two","tx","u","u201d","ue","ui","uj","uk","um","un","under","unfortunately","unless","unlike","unlikely","until","unto","uo","up","upon","ups","ur","us","use","used","useful","usefully","usefulness","uses","using","usually","ut","v","va","value","various","vd","ve","ve","very","via","viz","vj","vo","vol","vols","volumtype","vq","vs","vt","vu","w","wa","want","wants","was","wasn","wasnt","wasn't","way","we","wed","we'd","welcome","well","we'll","well-b","went","were","we're","weren","werent","weren't","we've","what","whatever","what'll","whats","what's","when","whence","whenever","when's","where","whereafter","whereas","whereby","wherein","wheres","where's","whereupon","wherever","whether","which","while","whim","whither","who","whod","whoever","whole","who'll","whom","whomever","whos","who's","whose","why","why's","wi","widely","will","willing","wish","with","within","without","wo","won","wonder","wont","won't","words","world","would","wouldn","wouldnt","wouldn't","www","x","x1","x2","x3","xf","xi","xj","xk","xl","xn","xo","xs","xt","xv","xx","y","y2","yes","yet","yj","yl","you","youd","you'd","you'll","your","youre","you're","yours","yourself","yourselves","you've","yr","ys","yt","z","zero","zi","zz"]},a={document:{type:"PLAIN_TEXT",content:t},encodingType:"UTF16"},o={method:"post",mode:"cors",cache:"no-cache",redirect:"follow",referrerPolicy:"no-referrer",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)},e.prev=4,e.next=7,fetch("https://language.googleapis.com/v1/documents:analyzeSyntax?key=".concat(p),o);case 7:return s=e.sent,e.next=10,s.json();case 10:if(u=e.sent,[],c=[],f=t.length,u){e.next=16;break}return e.abrupt("return",null);case 16:if(!u){e.next=32;break}return console.log("annotateText",u),u.tokens&&(c=u.tokens.filter((function(e){return"ADJ"===e.partOfSpeech.tag})),u.tokens.forEach((function(e){var n=e.lemma;if("VERB"===e.partOfSpeech.tag){var a=r[u.language][n.toLowerCase()];a?n=a:console.log("Nominalisation non existante :",n.toLowerCase())}t=g.replaceWord(t,e.text.content,n+" ",e.text.beginOffset-(f-t.length))})),console.log("Nominalisation : ",t),t=t.replace(/  +/g," "),console.log("Stop Words : ",t)),d={document:{type:"PLAIN_TEXT",content:t},encodingType:"UTF16"},h={method:"post",mode:"cors",cache:"no-cache",redirect:"follow",referrerPolicy:"no-referrer",headers:{"Content-Type":"application/json"},body:JSON.stringify(d)},e.next=23,fetch("https://language.googleapis.com/v1/documents:analyzeEntities?key=".concat(p),h);case 23:return m=e.sent,e.next=26,m.json();case 26:if(v=e.sent){e.next=29;break}return e.abrupt("return",null);case 29:if(!v){e.next=32;break}return c.forEach((function(e){v.entities.push({name:e.lemma,type:"CONSUMER_GOOD",metadata:{},salience:.07})})),e.abrupt("return",v);case 32:return e.abrupt("return",null);case 35:return e.prev=35,e.t0=e.catch(4),console.log("analyzeEntities",e.t0),e.abrupt("return",[]);case 39:case"end":return e.stop()}}),e,null,[[4,35]])})));return function(t){return e.apply(this,arguments)}}()}]),e}(),m=h,v="9038251-9744656b30d3839e753549b56",g="lW928RQmwlCfkfVVMqcBwDHtkJpwVR_r58ovOPAhN8Q",y=function(){function e(){(0,f.Z)(this,e)}return(0,d.Z)(e,null,[{key:"getCorrespondingImages",value:function(){var e=(0,o.Z)(l().mark((function e(t,n){var r,a,o,i,s,u=arguments;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>2&&void 0!==u[2]?u[2]:200,a="",t.forEach((function(e,n){a+=e+(n+1<t.length?"+":"")})),o="https://pixabay.com/api/?key=".concat(v,"&q=").concat(encodeURIComponent(a),"&image_type=photo&lang=").concat(n,"&safesearch=true&per_page=").concat(r),0===t.length&&(o="https://pixabay.com/api/?key=".concat(v,"&category=backgrounds&image_type=photo&lang=").concat(n,"&safesearch=true&per_page=").concat(r)),e.prev=5,e.next=8,fetch(o);case 8:return i=e.sent,e.next=11,i.json();case 11:if(s=e.sent){e.next=14;break}return e.abrupt("return",null);case 14:if(!s){e.next=16;break}return e.abrupt("return",s);case 16:return e.abrupt("return",null);case 19:return e.prev=19,e.t0=e.catch(5),console.log("getCorrespondingImages",e.t0),e.abrupt("return",[]);case 23:case"end":return e.stop()}}),e,null,[[5,19]])})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getCorrespondingImagesUnsplash",value:function(){var e=(0,o.Z)(l().mark((function e(t,n){var r,a,o,i,s=arguments;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s.length>2&&void 0!==s[2]?s[2]:20,r="",t.forEach((function(e,n){r+=e+(n+1<t.length?" ":"")})),e.prev=3,e.next=6,fetch("https://api.unsplash.com/search/photos?client_id=".concat(g,"&per_page=50&query=").concat(encodeURIComponent(r),"&lang=").concat(n));case 6:return a=e.sent,e.next=9,a.json();case 9:if(o=e.sent){e.next=12;break}return e.abrupt("return",null);case 12:if(!o){e.next=17;break}return i=[],o.results.forEach((function(e){i.push({previewURL:e.urls.thumb,id:e.id,tags:e.description})})),o.hits=i,e.abrupt("return",o);case 17:return e.abrupt("return",null);case 20:return e.prev=20,e.t0=e.catch(3),console.log("analyzeEntitiesUnsplash",e.t0),e.abrupt("return",[]);case 24:case"end":return e.stop()}}),e,null,[[3,20]])})));return function(t,n){return e.apply(this,arguments)}}()}]),e}(),b=y;var x=function(t){return e.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true"},t),e.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 15l-3-3m0 0l3-3m-3 3h8M3 12a9 9 0 1118 0 9 9 0 01-18 0z"}))};var w=function(t){return e.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true"},t),e.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 9l3 3m0 0l-3 3m3-3H8m13 0a9 9 0 11-18 0 9 9 0 0118 0z"}))};var k=function(t){return e.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true"},t),e.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 13l-5 5m0 0l-5-5m5 5V6"}))};var S=function(t){return e.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true"},t),e.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 17l-5-5m0 0l5-5m-5 5h12"}))};var _=function(t){return e.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true"},t),e.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 7l5 5m0 0l-5 5m5-5H6"}))};var N=function(t){return e.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true"},t),e.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 11l5-5m0 0l5 5m-5-5v12"}))};var E=function(t){return e.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true"},t),e.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 15.546c-.523 0-1.046.151-1.5.454a2.704 2.704 0 01-3 0 2.704 2.704 0 00-3 0 2.704 2.704 0 01-3 0 2.704 2.704 0 00-3 0 2.704 2.704 0 01-3 0 2.701 2.701 0 00-1.5-.454M9 6v2m3-2v2m3-2v2M9 3h.01M12 3h.01M15 3h.01M21 21v-7a2 2 0 00-2-2H5a2 2 0 00-2 2v7h18zm-3-9v-2a2 2 0 00-2-2H8a2 2 0 00-2 2v2h12z"}))};var C=function(t){return e.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true"},t),e.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z"}),e.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 13a3 3 0 11-6 0 3 3 0 016 0z"}))};var T=function(t){return e.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true"},t),e.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"}))};var I=function(t){return e.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true"},t),e.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"}))};var O=function(t){return e.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true"},t),e.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"}))};var A=function(t){return e.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true"},t),e.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 15l7-7 7 7"}))};var D=function(t){return e.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true"},t),e.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"}))};var M=function(t){return e.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true"},t),e.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 15l-2 5L9 9l11 4-5 2zm0 0l5 5M7.188 2.239l.777 2.897M5.136 7.965l-2.898-.777M13.95 4.05l-2.122 2.122m-5.657 5.656l-2.12 2.122"}))};var R=function(t){return e.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true"},t),e.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 7v10c0 2.21 3.582 4 8 4s8-1.79 8-4V7M4 7c0 2.21 3.582 4 8 4s8-1.79 8-4M4 7c0-2.21 3.582-4 8-4s8 1.79 8 4m0 5c0 2.21-3.582 4-8 4s-8-1.79-8-4"}))};var P=function(t){return e.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true"},t),e.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"}))};var j=function(t){return e.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true"},t),e.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 4v16M17 4v16M3 8h4m10 0h4M3 12h18M3 16h4m10 0h4M4 20h16a1 1 0 001-1V5a1 1 0 00-1-1H4a1 1 0 00-1 1v14a1 1 0 001 1z"}))};var F=function(t){return e.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true"},t),e.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 11c0 3.517-1.009 6.799-2.753 9.571m-3.44-2.04l.054-.09A13.916 13.916 0 008 11a4 4 0 118 0c0 1.017-.07 2.019-.203 3m-2.118 6.844A21.88 21.88 0 0015.171 17m3.839 1.132c.645-2.266.99-4.659.99-7.132A8 8 0 008 4.07M3 15.364c.64-1.319 1-2.8 1-4.364 0-1.457.39-2.823 1.07-4"}))};var L=function(t){return e.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true"},t),e.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 11.5V14m0-2.5v-6a1.5 1.5 0 113 0m-3 6a1.5 1.5 0 00-3 0v2a7.5 7.5 0 0015 0v-5a1.5 1.5 0 00-3 0m-6-3V11m0-5.5v-1a1.5 1.5 0 013 0v1m0 0V11m0-5.5a1.5 1.5 0 013 0v3m0 0V11"}))};var B=function(t){return e.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true"},t),e.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h7"}))};var z=function(t){return e.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true"},t),e.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 12H4"}))};var Z=function(t){return e.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true"},t),e.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"}))};var V=function(t){return e.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true"},t),e.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"}))};var U=function(t){return e.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true"},t),e.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z"}),e.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 12a9 9 0 11-18 0 9 9 0 0118 0z"}))};var q=function(t){return e.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true"},t),e.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v3m0 0v3m0-3h3m-3 0H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z"}))};var W=function(t){return e.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true"},t),e.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"}))};var H=function(t){return e.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true"},t),e.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v1m6 11h2m-6 0h-2v4m0-11v3m0 0h.01M12 12h4.01M16 20h4M4 12h4m12 0h.01M5 8h2a1 1 0 001-1V5a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1zm12 0h2a1 1 0 001-1V5a1 1 0 00-1-1h-2a1 1 0 00-1 1v2a1 1 0 001 1zM5 20h2a1 1 0 001-1v-2a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1z"}))};var G=function(t){return e.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true"},t),e.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-3m-1 4l-3 3m0 0l-3-3m3 3V4"}))};var K=function(t){return e.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true"},t),e.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"}))};var X=function(t){return e.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true"},t),e.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 12a9 9 0 11-18 0 9 9 0 0118 0z"}),e.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 10a1 1 0 011-1h4a1 1 0 011 1v4a1 1 0 01-1 1h-4a1 1 0 01-1-1v-4z"}))};var Y=function(t){return e.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true"},t),e.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 10h18M3 14h18m-9-4v8m-7 0h14a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z"}))};var $=function(t){return e.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true"},t),e.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 5a1 1 0 011-1h14a1 1 0 011 1v2a1 1 0 01-1 1H5a1 1 0 01-1-1V5zM4 13a1 1 0 011-1h6a1 1 0 011 1v6a1 1 0 01-1 1H5a1 1 0 01-1-1v-6zM16 13a1 1 0 011-1h2a1 1 0 011 1v6a1 1 0 01-1 1h-2a1 1 0 01-1-1v-6z"}))};var J=function(t){return e.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true"},t),e.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"}))};var Q=function(t){return e.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true"},t),e.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12"}))};var ee=function(t){return e.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true"},t),e.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 14v6m-3-3h6M6 10h2a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v2a2 2 0 002 2zm10 0h2a2 2 0 002-2V6a2 2 0 00-2-2h-2a2 2 0 00-2 2v2a2 2 0 002 2zM6 20h2a2 2 0 002-2v-2a2 2 0 00-2-2H6a2 2 0 00-2 2v2a2 2 0 002 2z"}))};var te=function(t){return e.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true"},t),e.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"}))};var ne=function(t){return e.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true"},t),e.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"}))};var re=n(184),ae=n(4802),oe=n(8340),ie=function(e,t,n,r){return new(n||(n=Promise))((function(a,o){function i(e){try{u(r.next(e))}catch(t){o(t)}}function s(e){try{u(r.throw(e))}catch(t){o(t)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}u((r=r.apply(e,t||[])).next())}))},se="application/font-woff",ue="image/jpeg",ce={woff:se,woff2:se,ttf:"application/font-truetype",eot:"application/vnd.ms-fontobject",png:"image/png",jpg:ue,jpeg:ue,gif:"image/gif",tiff:"image/tiff",svg:"image/svg+xml"};function le(e){var t=function(e){var t=/\.([^./]*?)$/g.exec(e);return t?t[1]:""}(e).toLowerCase();return ce[t]||""}function fe(e){return-1!==e.search(/^(data:)/)}function de(e,t){return"data:".concat(t,";base64,").concat(e)}var pe=function(){var e=0;return function(){return e+=1,"u".concat("0000".concat((Math.random()*Math.pow(36,4)<<0).toString(36)).slice(-4)).concat(e)}}();function he(e){for(var t=[],n=0,r=e.length;n<r;n+=1)t.push(e[n]);return t}function me(e,t){var n=window.getComputedStyle(e).getPropertyValue(t);return parseFloat(n.replace("px",""))}function ve(e){var t=me(e,"border-left-width"),n=me(e,"border-right-width");return e.clientWidth+t+n}function ge(e){var t=me(e,"border-top-width"),n=me(e,"border-bottom-width");return e.clientHeight+t+n}function ye(){var e,t;try{t=process}catch(r){}var n=t&&t.env?t.env.devicePixelRatio:null;return n&&(e=parseInt(n,10),Number.isNaN(e)&&(e=1)),e||window.devicePixelRatio||1}function be(e){return e.toBlob?new Promise((function(t){return e.toBlob(t)})):new Promise((function(t){for(var n=window.atob(e.toDataURL().split(",")[1]),r=n.length,a=new Uint8Array(r),o=0;o<r;o+=1)a[o]=n.charCodeAt(o);t(new Blob([a],{type:"image/png"}))}))}function xe(e){return new Promise((function(t,n){var r=new Image;r.onload=function(){return t(r)},r.onerror=n,r.crossOrigin="anonymous",r.decoding="sync",r.src=e}))}function we(e){return ie(this,void 0,void 0,l().mark((function t(){return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",Promise.resolve().then((function(){return(new XMLSerializer).serializeToString(e)})).then(encodeURIComponent).then((function(e){return"data:image/svg+xml;charset=utf-8,".concat(e)})));case 1:case"end":return t.stop()}}),t)})))}function ke(e,t,n){return ie(this,void 0,void 0,l().mark((function r(){var a,o,i;return l().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return a="http://www.w3.org/2000/svg",o=document.createElementNS(a,"svg"),i=document.createElementNS(a,"foreignObject"),o.setAttribute("width","".concat(t)),o.setAttribute("height","".concat(n)),o.setAttribute("viewBox","0 0 ".concat(t," ").concat(n)),i.setAttribute("width","100%"),i.setAttribute("height","100%"),i.setAttribute("x","0"),i.setAttribute("y","0"),i.setAttribute("externalResourcesRequired","true"),o.appendChild(i),i.appendChild(e),r.abrupt("return",we(o));case 14:case"end":return r.stop()}}),r)})))}var Se={};function _e(e,t){var n=function(e){var t=e.replace(/\?.*/,"");return/ttf|otf|eot|woff2?/i.test(t)&&(t=t.replace(/.*\//,"")),t}(e);if(null!=Se[n])return Se[n];t.cacheBust&&(e+=(/\?/.test(e)?"&":"?")+(new Date).getTime());var r=window.fetch(e).then((function(e){return e.blob().then((function(t){return{blob:t,contentType:e.headers.get("Content-Type")||""}}))})).then((function(e){var t=e.blob,n=e.contentType;return new Promise((function(e,r){var a=new FileReader;a.onloadend=function(){return e({contentType:n,blob:a.result})},a.onerror=r,a.readAsDataURL(t)}))})).then((function(e){var t,n=e.blob;return{contentType:e.contentType,blob:(t=n,t.split(/,/)[1])}})).catch((function(n){var r="";if(t.imagePlaceholder){var a=t.imagePlaceholder.split(/,/);a&&a[1]&&(r=a[1])}var o="Failed to fetch resource: ".concat(e);return n&&(o="string"===typeof n?n:n.message),o&&console.error(o),{blob:r,contentType:""}}));return Se[n]=r,r}function Ne(e,t,n){var r=".".concat(e,":").concat(t),a=n.cssText?function(e){var t=e.getPropertyValue("content");return"".concat(e.cssText," content: '").concat(t.replace(/'|"/g,""),"';")}(n):function(e){return he(e).map((function(t){var n=e.getPropertyValue(t),r=e.getPropertyPriority(t);return"".concat(t,": ").concat(n).concat(r?" !important":"",";")})).join(" ")}(n);return document.createTextNode("".concat(r,"{").concat(a,"}"))}function Ee(e,t,n){var r=window.getComputedStyle(e,n),a=r.getPropertyValue("content");if(""!==a&&"none"!==a){var o=pe();try{t.className="".concat(t.className," ").concat(o)}catch(s){return}var i=document.createElement("style");i.appendChild(Ne(o,n,r)),t.appendChild(i)}}function Ce(e,t){Ee(e,t,":before"),Ee(e,t,":after")}var Te=function(e,t,n,r){return new(n||(n=Promise))((function(a,o){function i(e){try{u(r.next(e))}catch(t){o(t)}}function s(e){try{u(r.throw(e))}catch(t){o(t)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}u((r=r.apply(e,t||[])).next())}))};function Ie(e){return Te(this,void 0,void 0,l().mark((function t(){var n;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("data:,"!==(n=e.toDataURL())){t.next=3;break}return t.abrupt("return",Promise.resolve(e.cloneNode(!1)));case 3:return t.abrupt("return",xe(n));case 4:case"end":return t.stop()}}),t)})))}function Oe(e,t){return Te(this,void 0,void 0,l().mark((function n(){return l().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",Promise.resolve(e.poster).then((function(e){return _e(e,t)})).then((function(t){return de(t.blob,le(e.poster)||t.contentType)})).then((function(e){return xe(e)})));case 1:case"end":return n.stop()}}),n)})))}function Ae(e,t){return Te(this,void 0,void 0,l().mark((function n(){return l().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!(e instanceof HTMLCanvasElement)){n.next=2;break}return n.abrupt("return",Ie(e));case 2:if(!(e instanceof HTMLVideoElement&&e.poster)){n.next=4;break}return n.abrupt("return",Oe(e,t));case 4:return n.abrupt("return",Promise.resolve(e.cloneNode(!1)));case 5:case"end":return n.stop()}}),n)})))}function De(e,t,n){var r;return Te(this,void 0,void 0,l().mark((function a(){var o;return l().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(!(0===(o=null!=(i=e).tagName&&"SLOT"===i.tagName.toUpperCase()&&e.assignedNodes?he(e.assignedNodes()):he((null!==(r=e.shadowRoot)&&void 0!==r?r:e).childNodes)).length||e instanceof HTMLVideoElement)){a.next=3;break}return a.abrupt("return",Promise.resolve(t));case 3:return a.abrupt("return",o.reduce((function(e,r){return e.then((function(){return je(r,n)})).then((function(e){e&&t.appendChild(e)}))}),Promise.resolve()).then((function(){return t})));case 4:case"end":return a.stop()}var i}),a)})))}function Me(e,t){var n=window.getComputedStyle(e),r=t.style;r&&(n.cssText?r.cssText=n.cssText:he(n).forEach((function(e){r.setProperty(e,n.getPropertyValue(e),n.getPropertyPriority(e))})))}function Re(e,t){e instanceof HTMLTextAreaElement&&(t.innerHTML=e.value),e instanceof HTMLInputElement&&t.setAttribute("value",e.value)}function Pe(e,t){return Te(this,void 0,void 0,l().mark((function n(){return l().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(t instanceof Element){n.next=2;break}return n.abrupt("return",Promise.resolve(t));case 2:return n.abrupt("return",Promise.resolve().then((function(){return Me(e,t)})).then((function(){return Ce(e,t)})).then((function(){return Re(e,t)})).then((function(){return t})));case 3:case"end":return n.stop()}}),n)})))}function je(e,t,n){return Te(this,void 0,void 0,l().mark((function r(){return l().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(n||!t.filter||t.filter(e)){r.next=2;break}return r.abrupt("return",Promise.resolve(null));case 2:return r.abrupt("return",Promise.resolve(e).then((function(e){return Ae(e,t)})).then((function(n){return De(e,n,t)})).then((function(t){return Pe(e,t)})));case 3:case"end":return r.stop()}}),r)})))}var Fe=function(e,t,n,r){return new(n||(n=Promise))((function(a,o){function i(e){try{u(r.next(e))}catch(t){o(t)}}function s(e){try{u(r.throw(e))}catch(t){o(t)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}u((r=r.apply(e,t||[])).next())}))},Le=/url\((['"]?)([^'"]+?)\1\)/g,Be=/url\([^)]+\)\s*format\((["'])([^"']+)\1\)/g,ze=/src:\s*(?:url\([^)]+\)\s*format\([^)]+\)[,;]\s*)+/g;function Ze(e){var t=[];return e.replace(Le,(function(e,n,r){return t.push(r),e})),t.filter((function(e){return!fe(e)}))}function Ve(e,t,n,r,a){var o=n?function(e,t){if(e.match(/^[a-z]+:\/\//i))return e;if(e.match(/^\/\//))return window.location.protocol+e;if(e.match(/^[a-z]+:/i))return e;var n=document.implementation.createHTMLDocument(),r=n.createElement("base"),a=n.createElement("a");return n.head.appendChild(r),n.body.appendChild(a),t&&(r.href=t),a.href=e,a.href}(t,n):t;return Promise.resolve(o).then((function(e){return a?a(e):_e(e,r)})).then((function(e){return"string"===typeof e?de(e,le(t)):de(e.blob,le(t)||e.contentType)})).then((function(n){return e.replace(function(e){var t=e.replace(/([.*+?^${}()|\[\]\/\\])/g,"\\$1");return new RegExp("(url\\(['\"]?)(".concat(t,")(['\"]?\\))"),"g")}(t),"$1".concat(n,"$3"))})).then((function(e){return e}),(function(){return o}))}function Ue(e,t){var n=t.preferredFontFormat;return n?e.replace(ze,(function(e){for(;;){var t=Be.exec(e)||[],r=(0,a.Z)(t,3),o=r[0],i=r[2];if(!i)return"";if(i===n)return"src: ".concat(o,";")}})):e}function qe(e){return-1!==e.search(Le)}function We(e,t,n){return Fe(this,void 0,void 0,l().mark((function r(){var a;return l().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(qe(e)){r.next=2;break}return r.abrupt("return",Promise.resolve(e));case 2:return a=Ue(e,n),r.abrupt("return",Promise.resolve(a).then(Ze).then((function(e){return e.reduce((function(e,r){return e.then((function(e){return Ve(e,r,t,n)}))}),Promise.resolve(a))})));case 4:case"end":return r.stop()}}),r)})))}var He=function(e,t,n,r){return new(n||(n=Promise))((function(a,o){function i(e){try{u(r.next(e))}catch(t){o(t)}}function s(e){try{u(r.throw(e))}catch(t){o(t)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}u((r=r.apply(e,t||[])).next())}))};function Ge(e,t){var n;return He(this,void 0,void 0,l().mark((function r(){var a;return l().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(a=null===(n=e.style)||void 0===n?void 0:n.getPropertyValue("background")){r.next=3;break}return r.abrupt("return",Promise.resolve(e));case 3:return r.abrupt("return",Promise.resolve(a).then((function(e){return We(e,null,t)})).then((function(t){return e.style.setProperty("background",t,e.style.getPropertyPriority("background")),e})));case 4:case"end":return r.stop()}}),r)})))}function Ke(e,t){return He(this,void 0,void 0,l().mark((function n(){var r;return l().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(e instanceof HTMLImageElement&&!fe(e.src)||e instanceof SVGImageElement&&!fe(e.href.baseVal)){n.next=2;break}return n.abrupt("return",Promise.resolve(e));case 2:return r=e instanceof HTMLImageElement?e.src:e.href.baseVal,n.abrupt("return",Promise.resolve(r).then((function(e){return _e(e,t)})).then((function(e){return de(e.blob,le(r)||e.contentType)})).then((function(t){return new Promise((function(n,r){e.onload=n,e.onerror=r,e instanceof HTMLImageElement?(e.srcset="",e.src=t):e.href.baseVal=t}))})).then((function(){return e}),(function(){return e})));case 4:case"end":return n.stop()}}),n)})))}function Xe(e,t){return He(this,void 0,void 0,l().mark((function n(){var r,a;return l().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=he(e.childNodes),a=r.map((function(e){return Ye(e,t)})),n.abrupt("return",Promise.all(a).then((function(){return e})));case 3:case"end":return n.stop()}}),n)})))}function Ye(e,t){return He(this,void 0,void 0,l().mark((function n(){return l().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(e instanceof Element){n.next=2;break}return n.abrupt("return",Promise.resolve(e));case 2:return n.abrupt("return",Promise.resolve(e).then((function(e){return Ge(e,t)})).then((function(e){return Ke(e,t)})).then((function(e){return Xe(e,t)})));case 3:case"end":return n.stop()}}),n)})))}function $e(e,t){var n=e.style;t.backgroundColor&&(n.backgroundColor=t.backgroundColor),t.width&&(n.width="".concat(t.width,"px")),t.height&&(n.height="".concat(t.height,"px"));var r=t.style;return null!=r&&Object.keys(r).forEach((function(e){n[e]=r[e]})),e}var Je=function(e,t,n,r){return new(n||(n=Promise))((function(a,o){function i(e){try{u(r.next(e))}catch(t){o(t)}}function s(e){try{u(r.throw(e))}catch(t){o(t)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}u((r=r.apply(e,t||[])).next())}))},Qe={};function et(e){var t=Qe[e];if(null!=t)return t;var n=window.fetch(e).then((function(t){return{url:e,cssText:t.text()}}));return Qe[e]=n,n}function tt(e){return Je(this,void 0,void 0,l().mark((function t(){return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e.cssText.then((function(t){var n=t,r=/url\(["']?([^"')]+)["']?\)/g,a=(n.match(/url\([^)]+\)/g)||[]).map((function(t){var a=t.replace(r,"$1");return a.startsWith("https://")||(a=new URL(a,e.url).href),window.fetch(a).then((function(e){return e.blob()})).then((function(e){return new Promise((function(r,a){var o=new FileReader;o.onloadend=function(){n=n.replace(t,"url(".concat(o.result,")")),r([t,o.result])},o.onerror=a,o.readAsDataURL(e)}))}))}));return Promise.all(a).then((function(){return n}))})));case 1:case"end":return t.stop()}}),t)})))}function nt(e){if(null==e)return[];for(var t=[],n=e.replace(/(\/\*[\s\S]*?\*\/)/gi,""),r=new RegExp("((@.*?keyframes [\\s\\S]*?){([\\s\\S]*?}\\s*?)})","gi");;){var a=r.exec(n);if(null===a)break;t.push(a[0])}n=n.replace(r,"");for(var o=/@import[\s\S]*?url\([^)]*\)[\s\S]*?;/gi,i=new RegExp("((\\s*?(?:\\/\\*[\\s\\S]*?\\*\\/)?\\s*?@media[\\s\\S]*?){([\\s\\S]*?)}\\s*?})|(([\\s\\S]*?){([\\s\\S]*?)})","gi");;){var s=o.exec(n);if(null===s){if(null===(s=i.exec(n)))break;o.lastIndex=i.lastIndex}else i.lastIndex=o.lastIndex;t.push(s[0])}return t}function rt(e){return Je(this,void 0,void 0,l().mark((function t(){var n,r;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=[],r=[],e.forEach((function(t){if("cssRules"in t)try{he(t.cssRules).forEach((function(e,n){if(e.type===CSSRule.IMPORT_RULE){var a=n+1,o=et(e.href).then((function(e){return e?tt(e):""})).then((function(e){return nt(e).forEach((function(e){try{t.insertRule(e,e.startsWith("@import")?a+=1:t.cssRules.length)}catch(n){console.error("Error inserting rule from remote css",{rule:e,error:n})}}))})).catch((function(e){console.error("Error loading remote css",e.toString())}));r.push(o)}}))}catch(a){var n=e.find((function(e){return null==e.href}))||document.styleSheets[0];null!=t.href&&r.push(et(t.href).then((function(e){return e?tt(e):""})).then((function(e){return nt(e).forEach((function(e){n.insertRule(e,t.cssRules.length)}))})).catch((function(e){console.error("Error loading remote stylesheet",e.toString())}))),console.error("Error inlining remote css file",a.toString())}})),t.abrupt("return",Promise.all(r).then((function(){return e.forEach((function(e){if("cssRules"in e)try{he(e.cssRules).forEach((function(e){n.push(e)}))}catch(t){console.error("Error while reading CSS rules from ".concat(e.href),t.toString())}})),n})));case 4:case"end":return t.stop()}}),t)})))}function at(e){return e.filter((function(e){return e.type===CSSRule.FONT_FACE_RULE})).filter((function(e){return qe(e.style.getPropertyValue("src"))}))}function ot(e){return Je(this,void 0,void 0,l().mark((function t(){return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t,n){null==e.ownerDocument&&n(new Error("Provided element is not within a Document")),t(he(e.ownerDocument.styleSheets))})).then((function(e){return rt(e)})).then(at));case 1:case"end":return t.stop()}}),t)})))}function it(e,t){return Je(this,void 0,void 0,l().mark((function n(){return l().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",ot(e).then((function(e){return Promise.all(e.map((function(e){var n=e.parentStyleSheet?e.parentStyleSheet.href:null;return We(e.cssText,n,t)})))})).then((function(e){return e.join("\n")})));case 1:case"end":return n.stop()}}),n)})))}function st(e,t){return Je(this,void 0,void 0,l().mark((function n(){return l().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(null!=t.fontEmbedCSS?Promise.resolve(t.fontEmbedCSS):it(e,t)).then((function(t){var n=document.createElement("style"),r=document.createTextNode(t);return n.appendChild(r),e.firstChild?e.insertBefore(n,e.firstChild):e.appendChild(n),e})));case 1:case"end":return n.stop()}}),n)})))}var ut=function(e,t,n,r){return new(n||(n=Promise))((function(a,o){function i(e){try{u(r.next(e))}catch(t){o(t)}}function s(e){try{u(r.throw(e))}catch(t){o(t)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}u((r=r.apply(e,t||[])).next())}))};function ct(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.width||ve(e),r=t.height||ge(e);return{width:n,height:r}}function lt(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return ut(this,void 0,void 0,l().mark((function n(){var r,a,o;return l().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=ct(e,t),a=r.width,o=r.height,n.abrupt("return",Promise.resolve(e).then((function(e){return je(e,t,!0)})).then((function(e){return st(e,t)})).then((function(e){return Ye(e,t)})).then((function(e){return $e(e,t)})).then((function(e){return ke(e,a,o)})));case 2:case"end":return n.stop()}}),n)})))}var ft=16384;function dt(e){(e.width>ft||e.height>ft)&&(e.width>ft&&e.height>ft?e.width>e.height?(e.height*=ft/e.width,e.width=ft):(e.width*=ft/e.height,e.height=ft):e.width>ft?(e.height*=ft/e.width,e.width=ft):(e.width*=ft/e.height,e.height=ft))}function pt(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return ut(this,void 0,void 0,l().mark((function n(){return l().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",lt(e,t).then(xe).then((function(n){var r=document.createElement("canvas"),a=r.getContext("2d"),o=t.pixelRatio||ye(),i=ct(e,t),s=i.width,u=i.height,c=t.canvasWidth||s,l=t.canvasHeight||u;return r.width=c*o,r.height=l*o,t.skipAutoScale||dt(r),r.style.width="".concat(c),r.style.height="".concat(l),t.backgroundColor&&(a.fillStyle=t.backgroundColor,a.fillRect(0,0,r.width,r.height)),a.drawImage(n,0,0,r.width,r.height),r})));case 1:case"end":return n.stop()}}),n)})))}function ht(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return ut(this,void 0,void 0,l().mark((function n(){return l().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",pt(e,t).then(be));case 1:case"end":return n.stop()}}),n)})))}var mt=n(4805),vt="0",gt="cursor-pointer hover:bg-blue-600 hover:bg-opacity-20 rounded-md text-transparent",yt=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],bt={1:{containerClass:"items-start justify-start",zoneClass:"mr-10 mb-10 max-w-60 rounded-br-sm",textClass:"pt-8 pl-8 pb-4 pr-5",margins:[0,40,40,0],paddings:[32,20,16,32]},2:{containerClass:"items-start justify-start",zoneClass:"mx-10 mb-10 max-w-60 rounded-b-sm",textClass:"pt-8 pb-3 px-4",margins:[0,40,40,40],paddings:[32,16,12,16]},3:{containerClass:"items-start justify-center",zoneClass:"mx-10 mb-10 max-w-60 rounded-b-sm text-center",textClass:"pt-8 pb-3 px-4",margins:[0,40,40,40],paddings:[32,16,12,16]},4:{containerClass:"items-start justify-end",zoneClass:"mx-10 mb-10 max-w-60 rounded-b-sm",textClass:"pt-8 pb-3 px-4",margins:[0,40,40,40],paddings:[32,16,12,16]},5:{containerClass:"items-start justify-end",zoneClass:"ml-10 mb-10 max-w-60 rounded-bl-sm",textClass:"pt-8 pr-8 pb-4 pl-5",margins:[0,0,40,40],paddings:[32,32,16,20]},6:{containerClass:"items-start justify-start",zoneClass:"my-10 mr-10 max-w-60 rounded-r-sm",textClass:"pl-8 py-3 pr-4",margins:[60,40,40,0],paddings:[12,16,12,32]},7:{containerClass:"items-start justify-start",zoneClass:"my-10 mx-10 max-w-60 rounded-sm",textClass:"py-3 px-4",margins:[60,40,40,40],paddings:[12,16,12,16]},8:{containerClass:"items-start justify-center",zoneClass:"my-10 mx-10 max-w-60 rounded-sm text-center",textClass:"py-3 px-4",margins:[60,40,40,40],paddings:[12,16,12,16]},9:{containerClass:"items-start justify-end",zoneClass:"my-10 mx-10 max-w-60 rounded-sm",textClass:"py-3 px-4",margins:[60,40,40,40],paddings:[12,16,12,16]},10:{containerClass:"items-start justify-end",zoneClass:"my-10 ml-10 max-w-60 rounded-l-sm",textClass:"pr-8 py-3 pl-4",margins:[60,0,40,40],paddings:[12,32,12,16]},11:{containerClass:"items-center justify-start",zoneClass:"my-10 mr-10 max-w-60 rounded-r-sm",textClass:"pl-8 py-3 pr-4",margins:[40,40,40,0],paddings:[12,16,12,32]},12:{containerClass:"items-center justify-start",zoneClass:"my-10 mx-10 max-w-60 rounded-sm",textClass:"py-3 px-4",margins:[40,40,40,40],paddings:[12,16,12,16]},13:{containerClass:"items-center justify-center",zoneClass:"my-10 mx-10 max-w-60 rounded-sm text-center",textClass:"py-3 px-4",margins:[40,40,40,40],paddings:[12,16,12,16]},14:{containerClass:"items-center justify-end",zoneClass:"my-10 mx-10 max-w-60 rounded-sm",textClass:"py-3 px-4",margins:[40,40,40,40],paddings:[12,16,12,16]},15:{containerClass:"items-center justify-end",zoneClass:"my-10 ml-10 max-w-60 rounded-l-sm",textClass:"pr-8 py-3 pl-4",margins:[40,0,40,40],paddings:[12,32,12,16]},16:{containerClass:"items-end justify-start",zoneClass:"my-10 mr-10 max-w-60 rounded-r-sm",textClass:"pl-8 py-3 pr-4",margins:[40,40,60,0],paddings:[12,16,12,32]},17:{containerClass:"items-end justify-start",zoneClass:"my-10 mx-10 max-w-60 rounded-sm",textClass:"py-3 px-4",margins:[40,40,60,40],paddings:[12,16,12,16]},18:{containerClass:"items-end justify-center",zoneClass:"my-10 mx-10 max-w-60 rounded-sm text-center",textClass:"py-3 px-4",margins:[40,40,60,40],paddings:[12,16,12,16]},19:{containerClass:"items-end justify-end",zoneClass:"my-10 mx-10 max-w-60 rounded-sm",textClass:"py-3 px-4",margins:[40,40,60,40],paddings:[12,16,12,16]},20:{containerClass:"items-end justify-end",zoneClass:"my-10 ml-10 max-w-60 rounded-l-sm",textClass:"pr-8 py-3 pl-4",margins:[40,0,60,40],paddings:[12,32,12,16]},21:{containerClass:"items-end justify-start",zoneClass:"mr-10 mt-10 max-w-60 rounded-tr-sm",textClass:"pb-8 pl-8 pt-4 pr-5",margins:[40,40,0,0],paddings:[16,20,32,32]},22:{containerClass:"items-end justify-start",zoneClass:"mx-10 mt-10 max-w-60 rounded-t-sm",textClass:"pb-8 pt-3 px-4",margins:[40,40,0,40],paddings:[12,16,32,16]},23:{containerClass:"items-end justify-center",zoneClass:"mx-10 mt-10 max-w-60 rounded-t-sm text-center",textClass:"pb-8 pt-3 px-4",margins:[40,40,0,40],paddings:[12,16,32,16]},24:{containerClass:"items-end justify-end",zoneClass:"mx-10 mt-10 max-w-60 rounded-t-sm",textClass:"pb-8 pt-3 px-4",margins:[40,40,0,40],paddings:[12,16,32,16]},25:{containerClass:"items-end justify-end",zoneClass:"ml-10 mt-10 max-w-60 rounded-tl-sm",textClass:"pb-8 pr-8 pt-4 pl-5",margins:[40,0,0,40],paddings:[16,32,32,20]}},xt="0px 0px 2px rgba(0,0,0,0.70)",wt="0 0px 2px rgba(255,255,255,0.50)",kt={0:[18.4,23.2],1:[21.6,26.4],2:[24.8,29.6],3:[28,32.8],4:[31.2,34.4],5:[34.4,38.4],6:[37.6,41.6],7:[40.8,44.8],8:[44,48],9:[47.2,50.4],10:[50.4,53.6]},St=function(t){var n=t.src,r=(t.alt,t.onClick),o=t.hoverOptions,i=(0,e.useState)({}),s=(0,a.Z)(i,2),u=s[0],c=(s[1],(0,e.useState)(n)),l=(0,a.Z)(c,2),f=l[0],d=(l[1],(0,e.useState)(!0)),p=(0,a.Z)(d,2),h=p[0],m=p[1],v=(0,e.useState)(!1),g=(0,a.Z)(v,2),y=(g[0],g[1]),b=(0,mt.useMediaQuery)({query:"(max-width: 760px)"});return(0,re.jsx)(re.Fragment,{children:b?(0,re.jsxs)("div",{onClick:r,className:"aspect-w-16 aspect-h-9 cursor-pointer",children:[h&&(0,re.jsx)("div",{className:"flex w-full h-full items-center justify-center",children:(0,re.jsx)(_t,{className:"h-6 w-6 text-blue-600"})}),(0,re.jsx)("img",{onLoad:function(){return m(!1)},src:f,alt:u.tags,className:"select-none rounded-sm shadow w-full h-full object-center object-cover"}),o.length>0&&(0,re.jsx)("div",{className:"flex flex-row items-end justify-end",children:(0,re.jsx)("div",{className:"p-1 bg-gray-800 bg-opacity-50 rounded-tl-lg rounded-br-sm",children:o.map((function(e){return e}))})})]}):(0,re.jsxs)("div",{onClick:r,onMouseOver:function(){return y(!0)},onMouseLeave:function(){return y(!1)},className:"aspect-w-16 aspect-h-9 cursor-pointer",children:[h&&(0,re.jsx)("div",{className:"flex w-full h-full items-center justify-center",children:(0,re.jsx)(_t,{className:"h-6 w-6 text-blue-600"})}),(0,re.jsx)("img",{onLoad:function(){return m(!1)},src:f,alt:u.tags,className:"select-none rounded-sm shadow w-full h-full object-center object-cover"}),o.length>0&&(0,re.jsx)("div",{className:"flex flex-row items-end justify-end",children:(0,re.jsx)("div",{className:"p-1 bg-gray-800 bg-opacity-50 rounded-tl-lg rounded-tl-lg rounded-br-sm",children:o.map((function(e){return e}))})})]})})},_t=function(e){var t=e.className;return(0,re.jsxs)("svg",{className:"animate-spin ".concat(t),xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,re.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,re.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})},Nt=function(t){var n=t.isHidden,i=(0,e.useState)(""),s=(0,a.Z)(i,2),c=s[0],f=s[1],d=(0,e.useState)(60),p=(0,a.Z)(d,2),h=p[0],v=p[1],g=(0,e.useState)([]),y=(0,a.Z)(g,2),w=y[0],k=y[1],S=(0,e.useState)([]),_=(0,a.Z)(S,2),N=_[0],E=_[1],T=(0,e.useState)([]),I=(0,a.Z)(T,2),O=I[0],A=I[1],D=(0,e.useState)("fr"),R=(0,a.Z)(D,2),P=R[0],j=R[1],L=(0,e.useState)({}),B=(0,a.Z)(L,2),z=(B[0],B[1],(0,e.useState)("")),Z=(0,a.Z)(z,2),V=Z[0],W=Z[1],H=(0,e.useState)(""),G=(0,a.Z)(H,2),K=G[0],X=G[1],Y=(0,e.useState)(4),$=(0,a.Z)(Y,2),J=$[0],Q=$[1],ne=(0,e.useState)(!0),ie=(0,a.Z)(ne,2),se=ie[0],ue=ie[1],ce=(0,e.useState)(0),le=(0,a.Z)(ce,2),fe=le[0],de=le[1],pe=(0,e.useState)({}),he=(0,a.Z)(pe,2),me=he[0],ve=he[1],ge=(0,e.useState)(bt[13]),ye=(0,a.Z)(ge,2),be=ye[0],xe=ye[1],we=(0,e.useState)(!0),ke=(0,a.Z)(we,2),Se=ke[0],_e=ke[1],Ne=(0,e.useState)([]),Ee=(0,a.Z)(Ne,2),Ce=Ee[0],Te=Ee[1],Ie=(0,e.useState)([]),Oe=(0,a.Z)(Ie,2),Ae=Oe[0],De=Oe[1],Me=(0,e.useState)({}),Re=(0,a.Z)(Me,2),Pe=(Re[0],Re[1]),je=(0,e.useState)(gt),Fe=(0,a.Z)(je,2),Le=Fe[0],Be=Fe[1],ze=(0,e.useState)(4),Ze=(0,a.Z)(ze,2),Ve=Ze[0],Ue=Ze[1],qe=(0,e.useRef)(),We=(0,e.useState)(!1),He=(0,a.Z)(We,2),Ge=He[0],Ke=He[1],Xe=(0,e.useState)(!1),Ye=(0,a.Z)(Xe,2),$e=Ye[0],Je=Ye[1],Qe=(0,e.useState)(!1),et=(0,a.Z)(Qe,2),tt=et[0],nt=et[1],rt=(0,mt.useMediaQuery)({query:"(max-width: 760px)"}),at=rt?21:20,ot=function(e){m.analyzeEntities(e).then((function(e){if(console.log("analyzeEntities",e),Ke(!1),e.entities.length>0){var t=[],n=[];j(e.language),e.entities.forEach((function(e,r){var a={considered:!1};a.text=e.name.toLowerCase(),a.salience=e.salience,a.searched=!1,a.addedSearch=!1,e.salience>=.07&&-1==t.findIndex((function(t){return t.text.toUpperCase()===e.name.toUpperCase()}))&&(a.considered=!0,(r>0&&e.salience>=.5||r<1)&&(n.push(e.name.toLowerCase()),a.searched=!0)),t.push(a)}));var r=t.filter((function(e){return e.considered}));it(n,e.language),De([]),ue(!0),ut(r,e.language,r,n),console.log("wordsArray",t)}else it([],e.language),De([]),k([]),ue(!0);Ke(!1)})).catch((function(e){console.log("Saving API errors",e),Ke(!1)}))},it=function(e,t){b.getCorrespondingImages(e,t).then((function(t){console.log("getCorrespondingImages",t),E(t.hits);var n=(0,r.Z)(t.hits);A(n.splice(0,at)),Ke(!1);var a=st(t.hits,e);Te(a)})).catch((function(e){console.log("Saving API errors",e),Ke(!1)}))},st=function(e,t){var n={},r=[];return e.forEach((function(e){e.tags.split(", ").forEach((function(e){e=e.toLowerCase(),n[e]?n[e]+=1:n[e]=1}))})),Object.entries(n).forEach((function(n){var o=(0,a.Z)(n,2),i=o[0],s=o[1],u=s/e.length*100;s>=3&&(t.includes(i)||r.push({word:i,confidence:u,nbImages:s}))})),console.log("getCustomTags",r),De([]),r},ut=function(e,t,n,r){var o=[];e.forEach((function(e){o.push(b.getCorrespondingImages([e.text],t,200).then((function(t){var n={},r=[],o=!1;return t.hits?(t.hits.forEach((function(e){e.tags.split(", ").forEach((function(e){e=e.toLowerCase(),n[e]?n[e]+=1:n[e]=1}))})),Object.entries(n).forEach((function(n){var i=(0,a.Z)(n,2),s=i[0],u=i[1],c=u/t.hits.length*100;u>=7&&(e.text.toLowerCase()===s&&(o=!0),r.push({word:s,confidence:c,nbImages:u}))})),{word:e.text,tags:r,result:t.hits,total:t.total,totalHits:t.totalHits,wordExistInTags:o}):{word:e.text,tags:r,result:[],total:0,totalHits:0,wordExistInTags:!1}})).catch((function(e){console.log("Saving API errors",e)})))})),Promise.all(o).then((function(e){console.log(e);e.filter((function(e){return!e||!e.wordExistInTags}));var r={};e.forEach((function(e){e.result.length<10&&n.splice(n.findIndex((function(t){return t.text===e.word})),1),r[e.word]=e.tags})),n.length>0&&(n[0].searched=!0,it([n[0].text],t)),k(n),0===n.length&&it([],t),Pe(r)})).catch((function(e){console.log(e)}))};(0,e.useEffect)((function(){qe.current.scrollIntoView({behavior:"smooth"})}),[V]);var ct=function(e){var t=Ae.length>0?Ae[Ae.length-1]:"",n=!1;return O[e].tags.split(", ").forEach((function(e){Ce.find((function(t){return t.word===e}))&&t!==e&&!Ae.includes(e)&&(n=!0)})),n},lt=function(e,t){e.preventDefault();e.target;Q(t)},ft=function(e,t){e.preventDefault(),e.stopPropagation();e.target;Se&&ve(bt[t])},dt=function(e,t){e.preventDefault();e.target;Se||rt?(u({},me),xe(bt[t]),ve({}),_e(!1),Be("text-transparent")):(u({},me),_e(!0),Be(gt),ve(bt[t]))},pt=function(e,t){e.preventDefault();e.target;ue(t)};(0,e.useEffect)((function(){de(qe.current.offsetWidth)}),[qe]);var Nt=function(e){var t=fe;return 0===fe&&(t=qe.current.offsetWidth,de(t)),t/672*e},Et=function(e,t){return t/672*e},Ct=function(){var e=(0,o.Z)(l().mark((function e(){var t,n,r,a;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(t=document.createElement("div")).classList.add("overflow-hidden"),t.classList.add("fixed"),n=document.createElement("div"),r=Tt(),n.innerHTML=oe.renderToStaticMarkup(r),document.body.appendChild(t),t.appendChild(n),e.next=10,ht(n);case 10:a=e.sent,(0,ae.saveAs)(a,"thumb.png"),document.body.removeChild(t);case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Tt=function(){return(0,re.jsxs)("div",{className:"aspect-w-16 aspect-h-9 bg-gray-100 overflow-hidden",style:{width:"1920px",height:"1080px"},ref:qe,children:[(0,re.jsx)("div",{className:"overflow-hidden",children:(0,re.jsx)("img",{src:V,alt:"ThumbBg",className:"select-none w-full h-full object-center object-cover"})}),qe&&be.containerClass&&!me.containerClass&&(0,re.jsx)("div",{className:"pointer-events-none flex w-full h-full ".concat(be.containerClass," ").concat(3===J&&"bg-gray-900 bg-opacity-15"," ").concat(6===J&&"bg-gray-50 bg-opacity-20"),children:(0,re.jsx)("div",{className:"min-w-min pointer-events-none ".concat(be.zoneClass.replaceAll("sm","md")," ").concat(1===J&&"bg-gray-900 bg-opacity-50"," ").concat(4===J&&"bg-gray-50 bg-opacity-70"),style:{maxWidth:"".concat(h,"%"),margin:"".concat(Et(be.margins[0],1920),"px ").concat(Et(be.margins[1],1920),"px ").concat(Et(be.margins[2],1920),"px ").concat(Et(be.margins[3],1920),"px")},children:(0,re.jsx)("div",{className:"select-none pointer-events-none font-medium ".concat(be.textClass," ").concat(J>=4?"text-gray-900":"text-white"),style:J>=4?{textShadow:wt,padding:"".concat(Et(be.paddings[0],1920),"px ").concat(Et(be.paddings[1],1920),"px ").concat(Et(be.paddings[2],1920),"px ").concat(Et(be.paddings[3],1920),"px"),fontSize:"".concat(Et(kt[Ve][0],1920),"px"),lineHeight:"".concat(Et(kt[Ve][1],1920),"px")}:{textShadow:xt,padding:"".concat(Et(be.paddings[0],1920),"px ").concat(Et(be.paddings[1],1920),"px ").concat(Et(be.paddings[2],1920),"px ").concat(Et(be.paddings[3],1920),"px"),fontSize:"".concat(Et(kt[Ve][0],1920),"px"),lineHeight:"".concat(Et(kt[Ve][1],1920),"px")},children:K})})})]})};return(0,re.jsxs)("div",{className:"min-h-screen flex-col lg:flex-row items-start justify-center bg-gray-50 py-20 lg:py-12 px-4 sm:px-6 lg:px-8 space-y-8 lg:space-y-0 lg:space-x-40 ".concat(n?"hidden":"flex"),children:[(0,re.jsxs)("div",{className:"lg:max-w-2xl w-full space-y-3",children:[(0,re.jsx)("div",{className:"flex flex-col items-start justify-start",children:(0,re.jsx)("h2",{className:"ml-2 text-left text-3xl font-extrabold text-gray-900 select-none",children:"Cr\xe9ation simplifi\xe9e"})}),(0,re.jsx)("div",{className:"flex flex-col items-center justify-center space-y-4 w-full",children:(0,re.jsxs)("div",{className:"flex flex-row item-center justify-center align-middle space-x-2 bg-gray-100 p-2 rounded-md w-full",children:[(0,re.jsxs)("div",{className:"w-full",children:[(0,re.jsx)("label",{htmlFor:"texte",className:"sr-only",children:"\xc9crivez le texte qui s'affichera dans la vignette"}),(0,re.jsx)("textarea",{id:"texte",onChange:function(e){var t=e.target.value;e.persist(),f(t)},value:c,name:"texte",type:"textarea",onClick:function(e){var t=e.target;""!==K&&t.select()},required:!0,className:"resize-none select-all appearance-none relative block w-full h-20 max-h-20 px-3 py-2 border border-gray-300 placeholder-gray-400 text-gray-900 rounded-md focus:placeholder-transparent focus:outline-none focus:ring-blue-500 focus:border-blue-500 focus:z-10 sm:text-sm",placeholder:"\xc9crivez le texte qui s'affichera dans la vignette",onKeyDown:function(e){"Enter"===e.key&&(e.preventDefault(),Ke(!0),nt(!0),ot(c),X(c),W(""))}})]}),(0,re.jsx)("div",{onClick:function(e){e.preventDefault(),Ke(!0),nt(!0),ot(c),X(c)},className:"rounded-md select-none font-medium py-1 px-2 text-center text-sm text-white shadow align-middle bg-blue-600 hover:bg-blue-500 cursor-pointer border-2 border-blue-600 hover:border-blue-500 flex items-center justify-center",children:Ge?(0,re.jsx)(_t,{className:"h-5 w-5 text-white"}):"GO"})]})}),tt?(0,re.jsxs)(re.Fragment,{children:[(Ae.length>0||w.length>0)&&(0,re.jsxs)("div",{className:"flex flex-col flex-wrap item-center justify-start align-middle bg-gray-100 py-1 px-2 rounded-md w-full",children:[(0,re.jsx)("div",{className:"flex flex-row flex-wrap item-center justify-start align-middle",children:w.length>0&&w.map((function(e,t){return(0,re.jsxs)("div",{className:"flex flex-row flex-wrap item-center justify-start align-middle rounded-full my-1 ".concat((e.searched||e.addedSearch)&&w[t+1]&&!w[t+1].addedSearch?"mr-8":e.searched||e.addedSearch?"mr-px":"mr-1 ml-1"),children:[!e.searched&&!(e.addedSearch&&!e.searched)&&(0,re.jsx)("div",{onClick:function(e){return function(e,t){e.preventDefault(),e.target;var n=(0,r.Z)(w),a=[];n[t].addedSearch=!n[t].addedSearch,n.sort((function(e,t){return(e.searched?1:e.addedSearch?2:3)<(t.searched?1:t.addedSearch?2:3)?-1:(e.searched?1:e.addedSearch?2:3)>(t.searched?1:t.addedSearch?2:3)?1:0})),k(n),n.forEach((function(e){(e.searched||e.addedSearch)&&a.push(e.text)})),b.getCorrespondingImages(a,P).then((function(e){console.log("getCorrespondingImages",e),E(e.hits);var t=(0,r.Z)(e.hits);A(t.splice(0,at)),Ke(!1);var n=st(e.hits,a);Te(n)})).catch((function(e){console.log("Saving API errors",e),Ke(!1)}))}(e,t)},className:"rounded-full mx-0.5 text-center text-sm lg:text-xs flex items-center justify-center align-middle cursor-pointer border-2 text-blue-600 hover:text-blue-500 border-gray-100",children:(0,re.jsx)(q,{className:"lg:h-5 lg:w-5 h-6 w-6"})}),(0,re.jsxs)("div",{onClick:function(e){return function(e,t){e.preventDefault(),e.target;var n=(0,r.Z)(w),a=[];if(n[t].addedSearch)n[t].addedSearch=!1;else if(n[t].searched)n.forEach((function(e){e.addedSearch=!1}));else{var o=n.findIndex((function(e){return e.searched}));n[o].searched=!1,n[t].searched=!0,n.forEach((function(e){e.addedSearch=!1}))}n.sort((function(e,t){return(e.searched?1:e.addedSearch?2:3)<(t.searched?1:t.addedSearch?2:3)?-1:(e.searched?1:e.addedSearch?2:3)>(t.searched?1:t.addedSearch?2:3)?1:0})),k(n),n.forEach((function(e){(e.searched||e.addedSearch)&&a.push(e.text)})),b.getCorrespondingImages(a,P).then((function(e){console.log("getCorrespondingImages",e),E(e.hits);var t=(0,r.Z)(e.hits);A(t.splice(0,at)),Ke(!1);var n=st(e.hits,a);Te(n)})).catch((function(e){console.log("Saving API errors",e),Ke(!1)}))}(e,t)},className:"".concat(e.searched&&w[t+1]&&w[t+1].addedSearch?"rounded-l-full":e.addedSearch&&w[t+1]&&w[t+1].addedSearch?"":e.addedSearch?"rounded-r-full":"rounded-full"," py-0.5 px-2 text-center text-sm lg:text-xs flex items-center justify-center align-middle cursor-pointer border-2 select-none ")+(e.searched?"text-white bg-blue-600 hover:bg-blue-500 cursor-pointer border-2 border-blue-600 hover:border-blue-500":e.addedSearch&&!e.searched?"text-white bg-blue-500 hover:bg-blue-400 cursor-pointer border-2 border-blue-500 hover:border-blue-400":"text-gray-900 bg-gray-300 hover:bg-gray-200 border-gray-300 hover:border-gray-200 rounded-r-full"),children:[e.text," ",e.addedSearch&&(0,re.jsx)(te,{className:"ml-2 h-4 w-4"})]})]},e.text+"-words")}))}),(0,re.jsxs)("div",{className:"flex flex-row flex-wrap item-center justify-start align-middle",children:[Ae.length>0&&(0,re.jsx)("div",{onClick:function(e){e.preventDefault();e.target;var t=(0,r.Z)(Ae).splice(0,Ae.length-1);De(t);var n=(0,r.Z)(N),a=t.length-1;t.length>0?(n=n.filter((function(e){var n=!1;return n||(n=e.tags.includes(t[a])),n})),n.length>0&&(n.length>at&&(n=n.splice(0,at)),A(n))):(n.length>at&&(n=n.splice(0,at)),A(n))},className:"flex flex-row flex-wrap item-center justify-start align-middle m-1 cursor-pointer",children:(0,re.jsx)(x,{className:"lg:h-5 lg:w-5 h-6 w-6 text-blue-500"})}),Ae.map((function(e,t){return(0,re.jsxs)("div",{onClick:function(e){return function(e,t){e.preventDefault(),e.target;var n=(0,r.Z)(Ae).splice(0,t+1);De(n);var a=(0,r.Z)(N),o=n.length-1;n.length>0?(a=a.filter((function(e){var t=!1;return t||(t=e.tags.includes(n[o])),t})),a.length>0&&(a.length>at&&(a=a.splice(0,at)),A(a))):(a.length>at&&(a=a.splice(0,at)),A(a))}(e,t)},value:t,className:"select-none rounded-md ml-1 text-center text-sm lg:text-xs flex items-center justify-center align-middle cursor-pointer "+(Ae.length-1===t?"text-blue-500 cursor-pointer":"text-gray-500 cursor-pointer"),children:[e," ",Ae.length-1!==t&&"/"]},e+"-selectedSearchTags")}))]})]}),tt&&O.length>0&&!Ge&&(0,re.jsxs)("div",{className:"flex flex-row w-full mt-1 items-center justify-center",children:[rt?(0,re.jsx)(F,{className:"h-4 w-4 text-green-500 mr-1"}):(0,re.jsx)(M,{className:"h-4 w-4 text-green-500 mr-1"}),(0,re.jsx)("div",{className:"select-none text-green-500 text-xs text-center",children:"S\xe9lectionnez une image ci-dessous"})]}),(0,re.jsx)("div",{className:"container grid grid-cols-3 gap-1 lg:grid-cols-4 lg:gap-2 mx-auto",children:O.map((function(e,t){return(0,re.jsx)(St,{alt:e.tags,onClick:function(e){return function(e,t){e.preventDefault(),e.target,V!==O[t].fullHDURL&&Je(!0),W(O[t].fullHDURL)}(e,t)},src:e.previewURL,hoverOptions:ct(t)?[(0,re.jsx)(ee,{onClick:function(e){return function(e,t){e.preventDefault(),e.stopPropagation();var n="",a=0,o=Ae.length>0?Ae[Ae.length-1]:"";if(O[t].tags.split(", ").forEach((function(e){var t=Ce.find((function(t){return t.word===e}));t&&t.nbImages>a&&o!==e&&!Ae.includes(e)&&(n=t.word,a=t.nbImages)})),""!==n){var i=(0,r.Z)(Ae);i.push(n),De(i);var s=(0,r.Z)(N),u=i.length-1;i.length>0?(s=s.filter((function(e){var t=!1;return t||(t=e.tags.includes(i[u])),t})),s.length>0&&(s.length>at&&(s=s.splice(0,at)),A(s))):(s.length>at&&(s=s.splice(0,at)),A(s))}}(e,t)},className:"h-4 w-4 lg:h-5 lg:w-5 text-white hover:text-opacity-75"})]:[]},e.id)}))})]}):(0,re.jsx)(re.Fragment,{})]}),(0,re.jsx)("div",{className:"lg:max-w-2xl w-full",ref:qe,children:tt&&""!==V&&(0,re.jsxs)(re.Fragment,{children:[(0,re.jsxs)("div",{className:"w-full aspect-w-16 aspect-h-9 bg-gray-100 rounded-md shadow overflow-hidden",children:[""!==V&&(0,re.jsx)("div",{className:"overflow-hidden",children:(0,re.jsx)("img",{src:V,alt:"ThumbBg",onLoad:function(e){pt(e,!0),Je(!1)},onAnimationStart:function(e){return pt(e,!0)},onAnimationEnd:function(e){return pt(e,!1)},className:"".concat(se?"zoom-in-zoom-out":"zoom-ended"," select-none rounded-md w-full h-full object-center object-cover")})}),(0,re.jsxs)("div",{className:"flex flex-col w-full h-full p-".concat(vt," space-y-").concat(vt),onMouseLeave:function(e){return(t=e).preventDefault(),t.target,ve({}),_e(!0),void Be(gt);var t},children:[[1,4,2,3,5,6].includes(J)&&(0,re.jsxs)("div",{className:"flex flex-auto flex-row space-x-".concat(vt),children:[(0,re.jsx)("div",{className:"flex-auto h-full ".concat(Le),onClick:function(e){return dt(e,1)},onMouseOver:function(e){return ft(e,1)},children:yt[5]}),(0,re.jsx)("div",{className:"flex-auto h-full ".concat(Le),onClick:function(e){return dt(e,2)},onMouseOver:function(e){return ft(e,2)},children:yt[6]}),(0,re.jsx)("div",{className:"flex-auto h-full ".concat(Le),onClick:function(e){return dt(e,3)},onMouseOver:function(e){return ft(e,3)},children:yt[7]}),(0,re.jsx)("div",{className:"flex-auto h-full ".concat(Le),onClick:function(e){return dt(e,4)},onMouseOver:function(e){return ft(e,4)},children:yt[8]}),(0,re.jsx)("div",{className:"flex-auto h-full ".concat(Le),onClick:function(e){return dt(e,5)},onMouseOver:function(e){return ft(e,5)},children:yt[9]})]}),(0,re.jsxs)("div",{className:"flex flex-auto flex-row space-x-".concat(vt),children:[[1,4,2,3,5,6].includes(J)&&(0,re.jsx)("div",{className:"flex-auto h-full ".concat(Le),onClick:function(e){return dt(e,6)},onMouseOver:function(e){return ft(e,6)},children:yt[33]}),(0,re.jsx)("div",{className:"flex-auto h-full ".concat(Le),onClick:function(e){return dt(e,7)},onMouseOver:function(e){return ft(e,7)},children:yt[34]}),(0,re.jsx)("div",{className:"flex-auto h-full ".concat(Le),onClick:function(e){return dt(e,8)},onMouseOver:function(e){return ft(e,8)},children:yt[35]}),(0,re.jsx)("div",{className:"flex-auto h-full ".concat(Le),onClick:function(e){return dt(e,9)},onMouseOver:function(e){return ft(e,9)},children:yt[36]}),[1,4,2,3,5,6].includes(J)&&(0,re.jsx)("div",{className:"flex-auto h-full ".concat(Le),onClick:function(e){return dt(e,10)},onMouseOver:function(e){return ft(e,10)},children:yt[37]})]}),(0,re.jsxs)("div",{className:"flex flex-auto flex-row space-x-".concat(vt),children:[[1,4,2,3,5,6].includes(J)&&(0,re.jsx)("div",{className:"flex-auto h-full ".concat(Le),onClick:function(e){return dt(e,11)},onMouseOver:function(e){return ft(e,11)},children:yt[33]}),(0,re.jsx)("div",{className:"flex-auto h-full ".concat(Le),onClick:function(e){return dt(e,12)},onMouseOver:function(e){return ft(e,12)},children:yt[34]}),(0,re.jsx)("div",{className:"flex-auto h-full ".concat(Le),onClick:function(e){return dt(e,13)},onMouseOver:function(e){return ft(e,13)},children:yt[35]}),(0,re.jsx)("div",{className:"flex-auto h-full ".concat(Le),onClick:function(e){return dt(e,14)},onMouseOver:function(e){return ft(e,14)},children:yt[36]}),[1,4,2,3,5,6].includes(J)&&(0,re.jsx)("div",{className:"flex-auto h-full ".concat(Le),onClick:function(e){return dt(e,15)},onMouseOver:function(e){return ft(e,15)},children:yt[37]})]}),(0,re.jsxs)("div",{className:"flex flex-auto flex-row space-x-".concat(vt),children:[[1,4,2,3,5,6].includes(J)&&(0,re.jsx)("div",{className:"flex-auto h-full ".concat(Le),onClick:function(e){return dt(e,16)},onMouseOver:function(e){return ft(e,16)},children:yt[33]}),(0,re.jsx)("div",{className:"flex-auto h-full ".concat(Le),onClick:function(e){return dt(e,17)},onMouseOver:function(e){return ft(e,17)},children:yt[34]}),(0,re.jsx)("div",{className:"flex-auto h-full ".concat(Le),onClick:function(e){return dt(e,18)},onMouseOver:function(e){return ft(e,18)},children:yt[35]}),(0,re.jsx)("div",{className:"flex-auto h-full ".concat(Le),onClick:function(e){return dt(e,19)},onMouseOver:function(e){return ft(e,19)},children:yt[36]}),[1,4,2,3,5,6].includes(J)&&(0,re.jsx)("div",{className:"flex-auto h-full ".concat(Le),onClick:function(e){return dt(e,20)},onMouseOver:function(e){return ft(e,20)},children:yt[37]})]}),[1,4,2,3,5,6].includes(J)&&(0,re.jsxs)("div",{className:"flex flex-auto flex-row space-x-".concat(vt),children:[(0,re.jsx)("div",{className:"flex-auto h-full ".concat(Le),onClick:function(e){return dt(e,21)},onMouseOver:function(e){return ft(e,21)},children:yt[33]}),(0,re.jsx)("div",{className:"flex-auto h-full ".concat(Le),onClick:function(e){return dt(e,22)},onMouseOver:function(e){return ft(e,22)},children:yt[34]}),(0,re.jsx)("div",{className:"flex-auto h-full ".concat(Le),onClick:function(e){return dt(e,23)},onMouseOver:function(e){return ft(e,23)},children:yt[35]}),(0,re.jsx)("div",{className:"flex-auto h-full ".concat(Le),onClick:function(e){return dt(e,24)},onMouseOver:function(e){return ft(e,24)},children:yt[36]}),(0,re.jsx)("div",{className:"flex-auto h-full ".concat(Le),onClick:function(e){return dt(e,25)},onMouseOver:function(e){return ft(e,25)},children:yt[37]})]})]}),qe&&me.containerClass&&Se&&(0,re.jsx)("div",{className:"pointer-events-none flex w-full h-full ".concat(me.containerClass," ").concat(3===J&&"bg-gray-800 bg-opacity-15","  ").concat(6===J&&"bg-gray-50 bg-opacity-20"),children:(0,re.jsx)("div",{className:"min-w-min pointer-events-none ".concat(me.zoneClass," ").concat(1===J&&"bg-gray-900 bg-opacity-40"," ").concat(4===J&&"bg-gray-50 bg-opacity-60"," ","border-3 border-blue-600 border-opacity-75"," rounded"),style:{maxWidth:"".concat(parseInt(h)+2,"%"),margin:"".concat(Nt(me.margins[0]),"px ").concat(Nt(me.margins[1]),"px ").concat(Nt(me.margins[2]),"px ").concat(Nt(me.margins[3]),"px")},children:(0,re.jsx)("div",{className:"select-none pointer-events-none align-middle font-medium rounded ".concat(me.textClass," ").concat(J>=4?"text-gray-900":"text-white"),style:J>=4?{textShadow:wt,padding:"".concat(Nt(me.paddings[0]),"px ").concat(Nt(me.paddings[1]),"px ").concat(Nt(me.paddings[2]),"px ").concat(Nt(me.paddings[3]),"px"),fontSize:"".concat(Nt(kt[Ve][0]),"px"),lineHeight:"".concat(Nt(kt[Ve][1]),"px")}:{textShadow:xt,padding:"".concat(Nt(me.paddings[0]),"px ").concat(Nt(me.paddings[1]),"px ").concat(Nt(me.paddings[2]),"px ").concat(Nt(me.paddings[3]),"px"),fontSize:"".concat(Nt(kt[Ve][0]),"px"),lineHeight:"".concat(Nt(kt[Ve][1]),"px")},children:K})})}),qe&&be.containerClass&&!me.containerClass&&(0,re.jsx)("div",{className:"pointer-events-none flex w-full h-full ".concat(be.containerClass," ").concat(3===J&&"bg-gray-900 bg-opacity-15"," ").concat(6===J&&"bg-gray-50 bg-opacity-20"),children:(0,re.jsx)("div",{className:"min-w-min pointer-events-none ".concat(be.zoneClass," ").concat(1===J&&"bg-gray-900 bg-opacity-50"," ").concat(4===J&&"bg-gray-50 bg-opacity-70"),style:{maxWidth:"".concat(h,"%"),margin:"".concat(Nt(be.margins[0]),"px ").concat(Nt(be.margins[1]),"px ").concat(Nt(be.margins[2]),"px ").concat(Nt(be.margins[3]),"px")},children:(0,re.jsx)("div",{className:"select-none pointer-events-none font-medium ".concat(be.textClass," ").concat(J>=4?"text-gray-900":"text-white"),style:J>=4?{textShadow:wt,padding:"".concat(Nt(be.paddings[0]),"px ").concat(Nt(be.paddings[1]),"px ").concat(Nt(be.paddings[2]),"px ").concat(Nt(be.paddings[3]),"px"),fontSize:"".concat(Nt(kt[Ve][0]),"px"),lineHeight:"".concat(Nt(kt[Ve][1]),"px")}:{textShadow:xt,padding:"".concat(Nt(be.paddings[0]),"px ").concat(Nt(be.paddings[1]),"px ").concat(Nt(be.paddings[2]),"px ").concat(Nt(be.paddings[3]),"px"),fontSize:"".concat(Nt(kt[Ve][0]),"px"),lineHeight:"".concat(Nt(kt[Ve][1]),"px")},children:K})})}),$e&&(0,re.jsx)("div",{className:"flex w-full h-full bg-gray-800 bg-opacity-70 items-center justify-center p-3",children:(0,re.jsx)(_t,{className:"h-8 w-8 text-white"})})]}),(0,re.jsxs)("div",{className:"flex flex-row flex-wrap item-center justify-start align-middle w-full mt-2",children:[""!==V&&(0,re.jsxs)("div",{className:"relative w-full",children:[!se&&(0,re.jsx)(U,{onClick:function(e){return pt(e,!0)},className:"absolute right-10 top-0 h-7 w-7 -mt-1 text-blue-600 hover:text-blue-500 cursor-pointer"}),(0,re.jsx)(C,{onClick:Ct,className:"absolute right-1 top-0 h-7 w-7 -mt-1 text-blue-600 hover:text-blue-500 cursor-pointer"})]}),(0,re.jsxs)("div",{className:"flex flex-row w-3/4 md:w-full mt-0 items-center ml-1",children:[rt?(0,re.jsx)(F,{className:"h-4 w-4 text-green-500 mr-1 md:self-center self-start"}):(0,re.jsx)(M,{className:"h-4 w-4 text-green-500 mr-1"}),(0,re.jsx)("div",{className:"select-none text-green-500 text-xs text-left md:text-center",children:"Cliquez dans la vignette pour d\xe9placer le texte"})]})]}),(0,re.jsxs)("div",{className:"flex flex-col lg:flex-row flex-wrap item-center justify-start align-middle w-full mt-4",children:[(0,re.jsxs)("div",{className:"flex flex-row",children:[(0,re.jsx)("div",{className:"select-none rounded-md m-1 py-0.5 text-center text-xs flex items-center font-medium justify-center align-middle border-2 text-gray-600 bg-gray-50 border-gray-50",children:"Taille du texte :"}),(0,re.jsx)("div",{className:"select-none rounded-md m-1 px-2 py-0.5 text-center text-xs flex items-center font-medium justify-center align-middle border-2 text-gray-600 bg-gray-50 border-gray-50",children:(0,re.jsx)("input",{type:"range",id:"fontSize",step:1,name:"fontSize",min:"0",max:"10",onChange:function(e){return Ue(e.target.value)},defaultValue:4})})]}),(0,re.jsxs)("div",{className:"flex flex-row",children:[(0,re.jsx)("div",{className:"select-none rounded-md m-1 lg:pl-6 py-0.5 text-center text-xs flex items-center font-medium justify-center align-middle border-2 text-gray-600 bg-gray-50 border-gray-50",children:"Largeur du texte :"}),(0,re.jsx)("div",{className:"select-none rounded-md m-1 px-2 py-0.5 text-center text-xs flex items-center font-medium justify-center align-middle border-2 text-gray-600 bg-gray-50 border-gray-50",children:(0,re.jsx)("input",{type:"range",id:"textWidth",step:1,name:"textWidth",min:"0",max:"100",onChange:function(e){return v(e.target.value)},defaultValue:60})})]})]}),(0,re.jsxs)("div",{className:"container grid grid-cols-3 gap-2 mx-auto mt-4",children:[(0,re.jsxs)("div",{onClick:function(e){return lt(e,4)},className:"w-full aspect-w-16 aspect-h-9 bg-gray-100 rounded-md overflow-hidden border-2 ".concat(4===J?"border-blue-600 shadow ".concat(""!==V?"bg-gray-200":"bg-gray-100"):"border-gray-100 bg-gray-100"," hover:border-blue-400 hover:").concat(""!==V?"bg-gray-200":"bg-gray-100"," cursor-pointer"),children:[""!==V&&(0,re.jsx)("img",{src:V,alt:"ThumbBg",className:"w-full h-full object-center object-cover"}),(0,re.jsxs)("div",{className:"flex flex-col w-full h-full shadow justify-center items-center",children:[(0,re.jsx)("div",{className:"w-full rounded-t-md"}),(0,re.jsx)("div",{className:"justify-center items-center text-center align-middle flex flex-row bg-gray-50 bg-opacity-75 rounded-sm",children:(0,re.jsx)("div",{className:"pt-1 pb-1 px-2 lg:px-4 text-center text-gray-900 align-middle font-medium select-none",style:{textShadow:wt,fontSize:"".concat(Nt(30),"px")},children:"Abc"})}),(0,re.jsx)("div",{className:"w-full rounded-b-md"})]})]}),(0,re.jsxs)("div",{onClick:function(e){return lt(e,2)},className:"w-full aspect-w-16 aspect-h-9 bg-gray-100 rounded-md overflow-hidden border-2 ".concat(2===J?"border-blue-600 shadow ".concat(""!==V?"bg-gray-200":"bg-gray-100"):"border-gray-100 bg-gray-100"," hover:border-blue-400 hover:").concat(""!==V?"bg-gray-200":"bg-gray-100"," cursor-pointer"),children:[""!==V&&(0,re.jsx)("img",{src:V,alt:"ThumbBg",className:"w-full h-full object-center object-cover"}),(0,re.jsxs)("div",{className:"flex flex-col w-full h-full shadow",children:[(0,re.jsx)("div",{className:"w-full flex-auto rounded-t-md"}),(0,re.jsx)("div",{className:"w-full flex-auto justify-center items-center text-center align-middle flex flex-row",children:(0,re.jsx)("div",{className:"py-2 px-24 text-center text-white align-middle font-medium select-none",style:rt?{textShadow:wt,fontSize:"".concat(Nt(35),"px")}:{textShadow:xt,fontSize:"".concat(Nt(35),"px")},children:"Abc"})}),(0,re.jsx)("div",{className:"w-full flex-auto rounded-b-md"})]})]}),(0,re.jsxs)("div",{onClick:function(e){return lt(e,3)},className:"w-full aspect-w-16 aspect-h-9 bg-gray-100 rounded-md overflow-hidden border-2 ".concat(3===J?"border-blue-600 shadow ".concat(""!==V?"bg-gray-200":"bg-gray-100"):"border-gray-100 bg-gray-100"," hover:border-blue-400 hover:").concat(""!==V?"bg-gray-200":"bg-gray-100"," cursor-pointer"),children:[""!==V&&(0,re.jsx)("img",{src:V,alt:"ThumbBg",className:"w-full h-full object-center object-cover"}),(0,re.jsx)("div",{className:"bg-gray-900 bg-opacity-20"}),(0,re.jsxs)("div",{className:"flex flex-col w-full h-full shadow",children:[(0,re.jsx)("div",{className:"w-full flex-auto rounded-t-md"}),(0,re.jsx)("div",{className:"w-full flex-auto justify-center items-center text-center align-middle flex flex-row",children:(0,re.jsx)("div",{className:"py-2 px-24 text-center text-white align-middle font-medium select-none",style:{textShadow:xt,fontSize:"".concat(Nt(35),"px")},children:"Abc"})}),(0,re.jsx)("div",{className:"w-full flex-auto rounded-b-md"})]})]}),(0,re.jsxs)("div",{onClick:function(e){return lt(e,1)},className:"w-full aspect-w-16 aspect-h-9 bg-gray-100 rounded-md overflow-hidden border-2 ".concat(1===J?"border-blue-600 shadow ".concat(""!==V?"bg-gray-200":"bg-gray-100"):"border-gray-100 bg-gray-100"," hover:border-blue-400 hover:").concat(""!==V?"bg-gray-200":"bg-gray-100"," cursor-pointer"),children:[""!==V&&(0,re.jsx)("img",{src:V,alt:"ThumbBg",className:"w-full h-full object-center object-cover"}),(0,re.jsxs)("div",{className:"flex flex-col w-full h-full shadow justify-center items-center",children:[(0,re.jsx)("div",{className:"w-full rounded-t-md"}),(0,re.jsx)("div",{className:"justify-center items-center text-center align-middle flex flex-row bg-gray-900 bg-opacity-75 rounded-sm",children:(0,re.jsx)("div",{className:"pt-1 pb-1 px-2 lg:px-4 text-center text-white align-middle font-medium select-none",style:{textShadow:xt,fontSize:"".concat(Nt(30),"px")},children:"Abc"})}),(0,re.jsx)("div",{className:"w-full rounded-b-md"})]})]}),(0,re.jsxs)("div",{onClick:function(e){return lt(e,5)},className:"w-full aspect-w-16 aspect-h-9 bg-gray-100 rounded-md overflow-hidden border-2 ".concat(5===J?"border-blue-600 shadow ".concat(""!==V?"bg-gray-200":"bg-gray-100"):"border-gray-100 bg-gray-100"," hover:border-blue-400 hover:").concat(""!==V?"bg-gray-200":"bg-gray-100"," cursor-pointer"),children:[""!==V&&(0,re.jsx)("img",{src:V,alt:"ThumbBg",className:"w-full h-full object-center object-cover"}),(0,re.jsxs)("div",{className:"flex flex-col w-full h-full shadow",children:[(0,re.jsx)("div",{className:"w-full flex-auto rounded-t-md"}),(0,re.jsx)("div",{className:"w-full flex-auto justify-center items-center text-center align-middle flex flex-row",children:(0,re.jsx)("div",{className:"py-2 px-24 text-center text-gray-900 align-middle font-medium select-none",style:{textShadow:wt,fontSize:"".concat(Nt(35),"px")},children:"Abc"})}),(0,re.jsx)("div",{className:"w-full flex-auto rounded-b-md"})]})]}),(0,re.jsxs)("div",{onClick:function(e){return lt(e,6)},className:"w-full aspect-w-16 aspect-h-9 bg-gray-100 rounded-md overflow-hidden border-2 ".concat(6===J?"border-blue-600 shadow ".concat(""!==V?"bg-gray-200":"bg-gray-100"):"border-gray-100 bg-gray-100"," hover:border-blue-400 hover:").concat(""!==V?"bg-gray-200":"bg-gray-100"," cursor-pointer"),children:[""!==V&&(0,re.jsx)("img",{src:V,alt:"ThumbBg",className:"w-full h-full object-center object-cover"}),(0,re.jsx)("div",{className:"bg-gray-50 bg-opacity-20"}),(0,re.jsxs)("div",{className:"flex flex-col w-full h-full shadow",children:[(0,re.jsx)("div",{className:"w-full flex-auto rounded-t-md"}),(0,re.jsx)("div",{className:"w-full flex-auto justify-center items-center text-center align-middle flex flex-row",children:(0,re.jsx)("div",{className:"py-2 px-24 text-center text-gray-900 align-middle font-medium select-none",style:{textShadow:wt,fontSize:"".concat(Nt(35),"px")},children:"Abc"})}),(0,re.jsx)("div",{className:"w-full flex-auto rounded-b-md"})]})]})]})]})})]})},Et=n(7762),Ct=function(){var e={},t={refs:[]},n={},r={refs:[]},i={refs:[]},s={GOOGLESHEET_API_KEY:"",DATASOURCE_CONFIG_FETCH_URL:"",DATASOURCE_CONFIG_REFRESH_RATE:36e5,DATASOURCE_CONFIG_INTERVAL:void 0},u="GOOGLESHEET",c="API",f={GOOGLESHEET:"",API:""},d={id:0,ref:"",type:"",name:"",baseUrl:"",properties:{},dataSets:{refs:[]}},p={id:0,ref:"",type:"",name:"",baseUrl:"",dataLoaded:!1,storeRefreshRate:36e5,dataStoreRef:"",fetching:null,columns:{refs:[]}},h={id:0,ref:"",dataType:"",name:"",index:0},m=function(){var t=(0,o.Z)(l().mark((function t(n){return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(Object.assign(s,Object.assign({},n)),n.GOOGLESHEET_API_KEY&&(f.GOOGLESHEET="?alt=json&key="+s.GOOGLESHEET_API_KEY),!n.DATASOURCE_CONFIG_FETCH_URL){t.next=5;break}return t.next=5,e.init(s.DATASOURCE_CONFIG_FETCH_URL);case 5:return t.abrupt("return",!0);case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();e.init=function(){var t=(0,o.Z)(l().mark((function t(n){return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,b(n).then((function(t){var n=F(t);n&&(n.dataSources&&n.dataSources.forEach((function(t){e.createFromJson(t)})),n.queries&&n.queries.forEach((function(e){D(r,r.refs,e.ref,e)})),n.tableModels&&n.tableModels.forEach((function(e){D(i,i.refs,e.ref,e)})))}));case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.initModelObject=function(t){var n=F(t);n&&(n.dataSources&&n.dataSources.forEach((function(t){e.createFromJson(t)})),n.queries&&n.queries.forEach((function(e){D(r,r.refs,e.ref,e)})),n.tableModels&&n.tableModels.forEach((function(e){D(i,i.refs,e.ref,e)})))},e.add=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{var r=t[e];if(r)throw new Error("Une source de donn\xe9es nomm\xe9e '".concat(e,"' existe d\xe9j\xe0."));n=Object.assign(JSON.parse(JSON.stringify(d)),n),D(t,t.refs,e,n)}catch(a){console.error("FcmBd.DataSources.add() : "+a.message)}},e.addDataSet=function(e,r){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};try{O(e);var o=t[e],i=o.dataSets;if(i[r])throw new Error("Un ensemble de donn\xe9es nomm\xe9 '".concat(r,"' existe d\xe9j\xe0 dans '").concat(e,"'."));if(a=Object.assign(JSON.parse(JSON.stringify(p)),a),D(i,i.refs,r,a),n[a.dataStoreRef])throw new Error("Un stockage de donn\xe9es nomm\xe9 '".concat(a.dataStoreRef,"' existe d\xe9j\xe0."));n[a.dataStoreRef]=[],g(e,r)}catch(s){console.error("FcmBd.DataSources.addDataSet() : "+s.message)}},e.addDataSetColumn=function(e,n,r){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};try{O(e,n);var o=t[e],i=o.dataSets[n],s=i.columns;if(s[r])throw new Error("Une colonne nomm\xe9e '".concat(r,"' existe d\xe9j\xe0 dans '").concat(n,"'."));a=Object.assign(JSON.parse(JSON.stringify(h)),a),D(s,s.refs,r,a)}catch(u){console.error("FcmBd.DataSources.addDataSetColumn() : "+u.message)}},e.remove=function(e){try{O(e),M(t,t.refs,e)}catch(n){console.error("FcmBd.DataSources.remove() : "+n.message)}},e.removeDataSet=function(e,r){try{O(e,r);var a=t[e],o=a.dataSets[r];y(e,r),delete n[o.dataStoreRef],M(a.dataSets,a.dataSets.refs,r)}catch(i){console.error("FcmBd.DataSources.removeDataSet() : "+i.message)}},e.removeDataSetColumn=function(e,n,r){try{O(e,n,r);var a=t[e].dataSets[n];M(a.columns,a.columns.refs,r)}catch(o){console.error("FcmBd.DataSources.removeDataSetColumn() : "+o.message)}},e.create=function(){var r=(0,o.Z)(l().mark((function r(a,o,i){var s;return l().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.delegateYield(l().mark((function r(){var s,d,p,h,m,v,g,y;return l().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!t[a]){r.next=2;break}throw new Error("Une source de donn\xe9es nomm\xe9e '".concat(a,"' existe d\xe9j\xe0."));case 2:s={id:t.refs.length+1,type:R(o),ref:a},e.add(a,s),d=t[a],r.t0=d.type,r.next=r.t0===u?8:r.t0===c?22:24;break;case 8:return p=o.substring(o.indexOf("/d/")+3,o.lastIndexOf("/")),d.properties.spreadsheetId=p,d.baseUrl="https://sheets.googleapis.com/v4/spreadsheets/".concat(p),r.next=13,b(d.baseUrl+f[d.type]);case 13:h=r.sent,d.name=h.properties.title,m=[],v=(0,Et.Z)(h.sheets);try{for(y=function(){var t=g.value;m.push(b(d.baseUrl+"/values/"+t.properties.title+f[d.type]).then((function(r){var o=t.properties.sheetId,i="".concat(a,"_").concat(o),s=t.properties.title,u={id:o,type:"JSON",name:s,baseUrl:"/values/"+s,dataStoreRef:i};e.addDataSet(a,s,u);var c=d.dataSets[s];r.values.length>0&&r.values[0].forEach((function(t,n){var o={id:n+1,ref:t,dataType:P(r.values[1][n]),name:t,index:n};e.addDataSetColumn(a,s,t,o)})),r.values.splice(0,1),r.values.forEach((function(e,t){var r={};c.columns.refs.forEach((function(t,n){r[t]=e[n]?e[n]:""})),n[i].push(r)})),c.dataLoaded=!0})))},v.s();!(g=v.n()).done;)y()}catch(l){v.e(l)}finally{v.f()}return r.next=21,Promise.all(m);case 21:return r.abrupt("break",26);case 22:case 24:return d.baseUrl=o,r.abrupt("break",26);case 26:return r.abrupt("return",{v:i(null,t[a])});case 27:case"end":return r.stop()}}),r)}))(),"t0",2);case 2:if("object"!==typeof(s=r.t0)){r.next=5;break}return r.abrupt("return",s.v);case 5:r.next=10;break;case 7:r.prev=7,r.t1=r.catch(0),console.error("FcmBd.DataSources.create() : "+r.t1.message);case 10:case"end":return r.stop()}}),r,null,[[0,7]])})));return function(e,t,n){return r.apply(this,arguments)}}(),e.createFromJson=function(t){var n=t.dataSets;delete t.dataSets;var r=t,a=r.ref;e.add(a,r),n.refs.forEach((function(t){var r=n[t].columns;delete n[t].columns,e.addDataSet(a,t,n[t]),r.refs.forEach((function(n){e.addDataSetColumn(a,t,n,r[n])}))}))},e.find=function(e){return t[e]},e.queryExist=function(e){return r.refs.includes(e)},e.list=function(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;return n?n&&!r?e=t[n].dataSets.refs:n&&r&&(e=t[n].dataSets[r].columns.refs):e=t.refs,e},e.executeStoredQuery=function(){var t=(0,o.Z)(l().mark((function t(n){var a,o,i=arguments;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=i.length>1&&void 0!==i[1]?i[1]:void 0,t.prev=1,!(o=r[n])){t.next=8;break}return a&&(o=Object.assign({},o,a)),t.abrupt("return",e.query(o.dataSourceRef,!!o.liveData,o));case 8:throw new Error("La requ\xeate '".concat(n,"' n'existe pas."));case 9:t.next=14;break;case 11:t.prev=11,t.t0=t.catch(1),console.error("FcmBd.DataSources.executeStoredQuery() : "+t.t0.message);case 14:case"end":return t.stop()}}),t,null,[[1,11]])})));return function(e){return t.apply(this,arguments)}}(),e.getStoredQueryTableModel=function(e){try{var t=r[e];if(t){if(t.tableModel){var n=Object.assign({},i[t.tableModel]);if(n)return n;throw new Error("Le mod\xe8le de tableau '".concat(t.tableModel,"' n'existe pas."))}throw new Error("Aucun mod\xe8le de tableau n'existe pour la requ\xeate '".concat(e,"'."))}throw new Error("La requ\xeate '".concat(e,"' n'existe pas."))}catch(a){console.error("FcmBd.DataSources.executeStoredQuery() : "+a.message)}},e.query=function(){var r=(0,o.Z)(l().mark((function r(a){var o,s,u,c,f,d,p,h,m=arguments;return l().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(o=m.length>1&&void 0!==m[1]&&m[1],s=m.length>2&&void 0!==m[2]?m[2]:{},r.prev=2,O(a,s.from),u=A(),c={datasetNbRows:0,matchedNbRows:0,returnedNbRows:0,duration:0,data:[]},f=[],!(d=t[a])){r.next=29;break}if(!(p=d.dataSets[s.from]).dataLoaded||o){r.next=26;break}return f=n[p.dataStoreRef],c.datasetNbRows=f.length,s.where&&(f=C(f,s.where,p.columns)),s.select&&f.length>0&&(f=I(f,s.select,p.columns)),s.orderBy&&f.length>0&&(f=T(f,s.orderBy,p.columns)),c.matchedNbRows=f.length,s.skip&&s.limit?f=f.slice(s.skip,s.skip+s.limit):s.limit?f=f.slice(0,s.limit):s.skip&&(f=f.slice(s.skip)),s.tableModel&&(h=i[s.tableModel])&&(c.tableModel=Object.assign({},h)),c.returnedNbRows=f.length,c.data=f,c.duration=(A()-u)/1e3,0===c.duration&&(c.duration=1e-4),r.abrupt("return",c);case 26:return r.next=28,v(d.ref,p.ref).then((function(){return e.query(a,!1,s)}));case 28:return r.abrupt("return",r.sent);case 29:r.next=34;break;case 31:r.prev=31,r.t0=r.catch(2),console.error("FcmBd.DataSources.query() : "+r.t0.message);case 34:case"end":return r.stop()}}),r,null,[[2,31]])})));return function(e){return r.apply(this,arguments)}}(),e.checkStoredQueryResultUpdated=function(e,n){try{var a=r[e];if(a)return t[a.dataSourceRef].dataSets[a.from].lastUpdateTime>n;throw new Error("La requ\xeate '".concat(e,"' n'existe pas."))}catch(o){console.error("FcmBd.DataSources.executeStoredQuery() : "+o.message)}};var v=function(){var e=(0,o.Z)(l().mark((function e(r,a){var o,i,s,u;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(i=(o=t[r]).dataSets[a]).fetching||(s=o.baseUrl+i.baseUrl+f[o.type],"API"===o.type&&(u=A(),s+=s.includes("?")?"&".concat(u,"=").concat(u):"?".concat(u,"=").concat(u)),i.fetching=b(s).then((function(e){var t=void 0;if(e)if("GOOGLESHEET"===o.type)t=[],e.values&&(e.values.splice(0,1),e.values.forEach((function(e,n){var r={};i.columns.refs.forEach((function(t,n){r[t]=e[n]?e[n]:""})),t.push(r)})));else if("CSV"===i.type)t=[],e.forEach((function(e,n){var r={};i.columns.refs.forEach((function(t,n){r[t]=e[n]?e[n]:""})),t.push(r)}));else t=e;return t&&n[i.dataStoreRef]&&JSON.stringify(n[i.dataStoreRef])!==JSON.stringify(t)&&(n[i.dataStoreRef]=t,i.lastUpdateTime=A()),i.dataLoaded=!0,i.fetching=null,!0}))),e.abrupt("return",i.fetching);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),g=function(e,n){var r=t[e].dataSets[n];!r.updateStoreInterval&&r.storeRefreshRate&&(r.updateStoreInterval=setInterval((function(){v(e,n)}),r.storeRefreshRate<1e3?1e3:r.storeRefreshRate))},y=function(e,n){var r=t[e].dataSets[n];r.updateStoreInterval&&(clearInterval(r.updateStoreInterval),r.updateStoreInterval=void 0)},b=function(){var e=(0,o.Z)(l().mark((function e(t){var n,r;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(t);case 3:return n=e.sent,e.next=6,x(n);case 6:return r=e.sent,e.abrupt("return",r);case 10:e.prev=10,e.t0=e.catch(0);case 12:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}(),x=function(e){var t=e.headers.get("content-type");if(t.includes("application/json"))return w(e);if(t.includes("text/html"))return k(e);if(t.includes("text/csv"))return S(e);throw new Error("Sorry, content-type ".concat(t," not supported"))},w=function(e){return e.json().then((function(t){return e.ok?t:Promise.reject(Object.assign({},t,{status:e.status,statusText:e.statusText}))}))},k=function(e){return e.text().then((function(t){return e.ok?t:Promise.reject({status:e.status,statusText:e.statusText,err:t})}))},S=function(e){return e.text().then((function(t){return e.ok?B(t):Promise.reject({status:e.status,statusText:e.statusText,err:t})}))},_=function e(t,n){var r,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(null!==t&&"object"==typeof t)if(Array.isArray(t))r=[],t.forEach((function(t){r.push(e(t,n,o))}));else for(var i=0,s=Object.entries(t);i<s.length;i++){var u=(0,a.Z)(s[i],2),c=u[0],l=u[1];if(c.includes("$"))r=["$first","$last"].includes(c)?N(t,n):E[c.substring(1)](e(l,n,o));else if(null!==l&&"object"==typeof l)if(Array.isArray(l))r=E.in([n[c],l]);else for(var f=0,d=Object.entries(l);f<d.length;f++){var p=(0,a.Z)(d[f],2),h=p[0],m=p[1];r=E[h.substring(1)]([n[c],e(m,n,o)])}else r=E.eq([n[c],l])}else"string"==typeof t&&t.startsWith("$")?void 0===(r=n[t.substring(1)])?r=t:o[t.substring(1)]&&(r=j(r,o[t.substring(1)].dataType)):r=t;return r},N=function(e,t){for(var n,r=0,o=Object.entries(e);r<o.length;r++){var i=(0,a.Z)(o[r],2),s=i[0],u=i[1];switch(s){case"$first":n=_(u,t[0]);break;case"$last":n=_(u,t[t.length-1]);break;default:n=_(e,t)}}return n},E={concat:function(e){return e.join("")},lower:function(e){return"string"==typeof e?e.toLowerCase():e},upper:function(e){return"string"==typeof e?e.toUpperCase():e},toLower:function(e){return"string"==typeof e?e.toLowerCase():e},toUpper:function(e){return"string"==typeof e?e.toUpperCase():e},substr:function(e){return"string"==typeof e[0]?e[0].substring(e[1],e[2]):e},multiply:function(e){return Number(e[0])*Number(e[1])},subtract:function(e){return Number(e[0])-Number(e[1])},dateAdd:function(e){var t=e[0],n=e[1],r=e[2];"date"!=typeof t&&(t=Date.parse(t)?new Date(t):new Date);switch(n){case"year":t.setYear(t.getYear()+r);break;case"quarter":t.setMonth(t.getMonth()+3*r);break;case"week":t.setDate(t.getDate()+7*r);break;case"month":t.setMonth(t.getMonth()+r);break;case"day":t.setDate(t.getDate()+r);break;case"hour":t.setHours(t.getHours()+r);break;case"minute":t.setMinutes(t.getMinutes()+r);break;case"second":t.setSeconds(t.getSeconds()+r);break;case"millisecond":t.setMilliseconds(t.getMilliseconds()+r)}return t},dayOfMonth:function(e){return(e=j(e,"date")).getUTCDate()},dayOfWeek:function(e){return(e=j(e,"date")).getUTCDay()},dayOfYear:function(e){"date"!=typeof e&&(e=Date.parse(e)&&(e.includes("-")||e.includes(":"))?new Date(e):new Date);var t=new Date(e.getFullYear(),0,0),n=e-t+60*(t.getTimezoneOffset()-e.getTimezoneOffset())*1e3;return Math.floor(n/864e5)},month:function(e){return(e=j(e,"date")).getUTCMonth()},year:function(e){return(e=j(e,"date")).getUTCFullYear()},hours:function(e){return(e=j(e,"date")).getUTCHours()},minutes:function(e){return(e=j(e,"date")).getUTCMinutes()},seconds:function(e){return(e=j(e,"date")).getUTCSeconds()},milliseconds:function(e){return(e=j(e,"date")).getUTCMilliseconds()},and:function(e){var t,n=(0,Et.Z)(e);try{for(n.s();!(t=n.n()).done;){if(!t.value)return!1}}catch(r){n.e(r)}finally{n.f()}return!0},or:function(e){var t,n=(0,Et.Z)(e);try{for(n.s();!(t=n.n()).done;){if(t.value)return!0}}catch(r){n.e(r)}finally{n.f()}return!1},eq:function(e){return e[0]==e[1]},gt:function(e){return e[0]>e[1]},lt:function(e){return e[0]<e[1]},gte:function(e){return e[0]>=e[1]},lte:function(e){return e[0]<=e[1]},ne:function(e){return e[0]!==e[1]},in:function(e){return e[1].includes(e[0])},null:function(e){return null}},C=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=e.filter((function(e){return _(t,e,n)}));return r},T=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=t.map((function(e){return Object.entries(e)[0]})),o=e.sort((function(e,t){var o,i=0,s=(0,Et.Z)(r);try{for(s.s();!(o=s.n()).done;){var u=(0,a.Z)(o.value,2),c=u[0],l=u[1],f=l?e[c]:t[c],d=l?t[c]:e[c];if("number"===n[c].dataType||"date"===n[c].dataType?((f=j(f,n[c].dataType))<(d=j(d,n[c].dataType))&&(i=-1),f>d&&(i=1)):i=f.localeCompare(d)*l,0!==i)break}}catch(p){s.e(p)}finally{s.f()}return i}));return o},I=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=Object.entries(t),o=e.map((function(e){var t,o={},i=(0,Et.Z)(r);try{for(i.s();!(t=i.n()).done;){var s=(0,a.Z)(t.value,2),u=s[0],c=s[1];o[u]=null!==c&&"object"==typeof c?_(c,e,n):e[u]}}catch(l){i.e(l)}finally{i.f()}return o}));return o},O=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=t[e];if(!a)throw new Error("La source de donn\xe9es '".concat(e,"' n'existe pas."));if(n&&!a.dataSets[n])throw new Error("L'ensemble de donn\xe9es '".concat(n,"' n'existe pas dans '").concat(e,"'."));if(r&&!a.dataSets[n].columns[r])throw new Error("La colonne '".concat(r,"' n'existe pas dans '").concat(n,"'."))},A=function(){return(new Date).getTime()},D=function(e,t,n,r){r.ref=n,e[n]=r,t.push(n)},M=function(e,t,n){delete e[n];var r=t.indexOf(n);r>-1&&t.splice(r,1)},R=function(e){return e.indexOf("https://docs.google.com/spreadsheets/")>-1?u:c},P=function(e){var t="string";return""===e?t="string":"true"===e||"false"===e?t="boolean":Date.parse(e)&&(e.includes("-")||e.includes(":"))?t="date":isNaN(parseFloat(e))||(t="number"),t},j=function(e,t){var n;switch(t){case"string":n=String(e);break;case"number":n=Number(e);break;case"boolean":n=Boolean(e);break;case"date":n=new Date(e)}return n},F=function e(t){var n;if("string"==typeof t&&L(t)){if(null!==(n=JSON.parse(t))&&"object"==typeof n)if(Array.isArray(n))n.forEach((function(t,r){n[r]=e(t)}));else for(var r=0,o=Object.entries(n);r<o.length;r++){var i=(0,a.Z)(o[r],2),s=i[0],u=i[1];n[s]=e(u)}}else n=t;return n},L=function(e){try{return JSON.parse(e),!0}catch(t){return!1}},B=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(e){return e},r=Object.create(null);r.options=t||{},r.reviver=n,r.value="",r.entry=[],r.output=[],r.col=1,r.row=1;for(var a=new RegExp('"|,|\\r\\n|\\n|\\r|[^",\\r\\n]+',"y"),o=/^(\r\n|\n|\r)$/,i=[],s="",u=0;null!==(i=a.exec(e));)switch(s=i[0],u){case 0:switch(!0){case'"'===s:u=3;break;case","===s:u=0,z(r);break;case o.test(s):u=0,z(r),Z(r);break;default:r.value+=s,u=2}break;case 2:switch(!0){case","===s:u=0,z(r);break;case o.test(s):u=0,z(r),Z(r);break;default:throw u=4,Error("CSVError: Illegal state [row:".concat(r.row,", col:").concat(r.col,"]"))}break;case 3:if(!0===('"'===s))u=4;else u=3,r.value+=s;break;case 4:switch(!0){case'"'===s:u=3,r.value+=s;break;case","===s:u=0,z(r);break;case o.test(s):u=0,z(r),Z(r);break;default:throw Error("CSVError: Illegal state [row:".concat(r.row,", col:").concat(r.col,"]"))}break;default:throw Error("CSVError: Illegal state [row:".concat(r.row,", col:").concat(r.col,"]"))}return 0!==r.entry.length&&(z(r),Z(r)),r.output},z=function(e){var t=e.options.typed?V(e.value):e.value;e.entry.push(e.reviver(t,e.row,e.col)),e.value="",e.col++},Z=function(e){e.output.push(e.entry),e.entry=[],e.row++,e.col=1},V=function(e){switch(!0){case"true"===e:case"false"===e:return"true"===e;case/.\./.test(e):return parseFloat(e);case isFinite(e):return parseInt(e);default:return e}};return{DataSources:e,init:m,expression:_,utils:{deepCopy:function e(t){var n,r,a;if("object"!==typeof t||null==t)return t;for(a in n=Array.isArray(t)?[]:{},t)r=t[a],n[a]=e(r);return n},deepParse:F}}}(),Tt=Ct;function It(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ot(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}var At,Dt,Mt,Rt,Pt,jt,Ft,Lt,Bt,zt={autoSleep:120,force3D:"auto",nullTargetWarn:1,units:{lineHeight:""}},Zt={duration:.5,overwrite:!1,delay:0},Vt=1e8,Ut=1e-8,qt=2*Math.PI,Wt=qt/4,Ht=0,Gt=Math.sqrt,Kt=Math.cos,Xt=Math.sin,Yt=function(e){return"string"===typeof e},$t=function(e){return"function"===typeof e},Jt=function(e){return"number"===typeof e},Qt=function(e){return"undefined"===typeof e},en=function(e){return"object"===typeof e},tn=function(e){return!1!==e},nn=function(){return"undefined"!==typeof window},rn=function(e){return $t(e)||Yt(e)},an="function"===typeof ArrayBuffer&&ArrayBuffer.isView||function(){},on=Array.isArray,sn=/(?:-?\.?\d|\.)+/gi,un=/[-+=.]*\d+[.e\-+]*\d*[e\-+]*\d*/g,cn=/[-+=.]*\d+[.e-]*\d*[a-z%]*/g,ln=/[-+=.]*\d+\.?\d*(?:e-|e\+)?\d*/gi,fn=/[+-]=-?[.\d]+/,dn=/[^,'"\[\]\s]+/gi,pn=/[\d.+\-=]+(?:e[-+]\d*)*/i,hn={},mn={},vn=function(e){return(mn=Zn(e,hn))&&Ta},gn=function(e,t){return console.warn("Invalid property",e,"set to",t,"Missing plugin? gsap.registerPlugin()")},yn=function(e,t){return!t&&console.warn(e)},bn=function(e,t){return e&&(hn[e]=t)&&mn&&(mn[e]=t)||hn},xn=function(){return 0},wn={},kn=[],Sn={},_n={},Nn={},En=30,Cn=[],Tn="",In=function(e){var t,n,r=e[0];if(en(r)||$t(r)||(e=[e]),!(t=(r._gsap||{}).harness)){for(n=Cn.length;n--&&!Cn[n].targetTest(r););t=Cn[n]}for(n=e.length;n--;)e[n]&&(e[n]._gsap||(e[n]._gsap=new Jr(e[n],t)))||e.splice(n,1);return e},On=function(e){return e._gsap||In(gr(e))[0]._gsap},An=function(e,t,n){return(n=e[t])&&$t(n)?e[t]():Qt(n)&&e.getAttribute&&e.getAttribute(t)||n},Dn=function(e,t){return(e=e.split(",")).forEach(t)||e},Mn=function(e){return Math.round(1e5*e)/1e5||0},Rn=function(e){return Math.round(1e7*e)/1e7||0},Pn=function(e,t){for(var n=t.length,r=0;e.indexOf(t[r])<0&&++r<n;);return r<n},jn=function(){var e,t,n=kn.length,r=kn.slice(0);for(Sn={},kn.length=0,e=0;e<n;e++)(t=r[e])&&t._lazy&&(t.render(t._lazy[0],t._lazy[1],!0)._lazy=0)},Fn=function(e,t,n,r){kn.length&&jn(),e.render(t,n,r),kn.length&&jn()},Ln=function(e){var t=parseFloat(e);return(t||0===t)&&(e+"").match(dn).length<2?t:Yt(e)?e.trim():e},Bn=function(e){return e},zn=function(e,t){for(var n in t)n in e||(e[n]=t[n]);return e},Zn=function(e,t){for(var n in t)e[n]=t[n];return e},Vn=function e(t,n){for(var r in n)"__proto__"!==r&&"constructor"!==r&&"prototype"!==r&&(t[r]=en(n[r])?e(t[r]||(t[r]={}),n[r]):n[r]);return t},Un=function(e,t){var n,r={};for(n in e)n in t||(r[n]=e[n]);return r},qn=function(e){var t,n=e.parent||Dt,r=e.keyframes?(t=on(e.keyframes),function(e,n){for(var r in n)r in e||"duration"===r&&t||"ease"===r||(e[r]=n[r])}):zn;if(tn(e.inherit))for(;n;)r(e,n.vars.defaults),n=n.parent||n._dp;return e},Wn=function(e,t,n,r){void 0===n&&(n="_first"),void 0===r&&(r="_last");var a=t._prev,o=t._next;a?a._next=o:e[n]===t&&(e[n]=o),o?o._prev=a:e[r]===t&&(e[r]=a),t._next=t._prev=t.parent=null},Hn=function(e,t){e.parent&&(!t||e.parent.autoRemoveChildren)&&e.parent.remove(e),e._act=0},Gn=function(e,t){if(e&&(!t||t._end>e._dur||t._start<0))for(var n=e;n;)n._dirty=1,n=n.parent;return e},Kn=function(e){for(var t=e.parent;t&&t.parent;)t._dirty=1,t.totalDuration(),t=t.parent;return e},Xn=function e(t){return!t||t._ts&&e(t.parent)},Yn=function(e){return e._repeat?$n(e._tTime,e=e.duration()+e._rDelay)*e:0},$n=function(e,t){var n=Math.floor(e/=t);return e&&n===e?n-1:n},Jn=function(e,t){return(e-t._start)*t._ts+(t._ts>=0?0:t._dirty?t.totalDuration():t._tDur)},Qn=function(e){return e._end=Rn(e._start+(e._tDur/Math.abs(e._ts||e._rts||Ut)||0))},er=function(e,t){var n=e._dp;return n&&n.smoothChildTiming&&e._ts&&(e._start=Rn(n._time-(e._ts>0?t/e._ts:((e._dirty?e.totalDuration():e._tDur)-t)/-e._ts)),Qn(e),n._dirty||Gn(n,e)),e},tr=function(e,t){var n;if((t._time||t._initted&&!t._dur)&&(n=Jn(e.rawTime(),t),(!t._dur||pr(0,t.totalDuration(),n)-t._tTime>Ut)&&t.render(n,!0)),Gn(e,t)._dp&&e._initted&&e._time>=e._dur&&e._ts){if(e._dur<e.duration())for(n=e;n._dp;)n.rawTime()>=0&&n.totalTime(n._tTime),n=n._dp;e._zTime=-1e-8}},nr=function(e,t,n,r){return t.parent&&Hn(t),t._start=Rn((Jt(n)?n:n||e!==Dt?lr(e,n,t):e._time)+t._delay),t._end=Rn(t._start+(t.totalDuration()/Math.abs(t.timeScale())||0)),function(e,t,n,r,a){void 0===n&&(n="_first"),void 0===r&&(r="_last");var o,i=e[r];if(a)for(o=t[a];i&&i[a]>o;)i=i._prev;i?(t._next=i._next,i._next=t):(t._next=e[n],e[n]=t),t._next?t._next._prev=t:e[r]=t,t._prev=i,t.parent=t._dp=e}(e,t,"_first","_last",e._sort?"_start":0),ir(t)||(e._recent=t),r||tr(e,t),e},rr=function(e,t){return(hn.ScrollTrigger||gn("scrollTrigger",t))&&hn.ScrollTrigger.create(t,e)},ar=function(e,t,n,r){return oa(e,t),e._initted?!n&&e._pt&&(e._dur&&!1!==e.vars.lazy||!e._dur&&e.vars.lazy)&&Ft!==Br.frame?(kn.push(e),e._lazy=[t,r],1):void 0:1},or=function e(t){var n=t.parent;return n&&n._ts&&n._initted&&!n._lock&&(n.rawTime()<0||e(n))},ir=function(e){var t=e.data;return"isFromStart"===t||"isStart"===t},sr=function(e,t,n,r){var a=e._repeat,o=Rn(t)||0,i=e._tTime/e._tDur;return i&&!r&&(e._time*=o/e._dur),e._dur=o,e._tDur=a?a<0?1e10:Rn(o*(a+1)+e._rDelay*a):o,i>0&&!r?er(e,e._tTime=e._tDur*i):e.parent&&Qn(e),n||Gn(e.parent,e),e},ur=function(e){return e instanceof ea?Gn(e):sr(e,e._dur)},cr={_start:0,endTime:xn,totalDuration:xn},lr=function e(t,n,r){var a,o,i,s=t.labels,u=t._recent||cr,c=t.duration()>=Vt?u.endTime(!1):t._dur;return Yt(n)&&(isNaN(n)||n in s)?(o=n.charAt(0),i="%"===n.substr(-1),a=n.indexOf("="),"<"===o||">"===o?(a>=0&&(n=n.replace(/=/,"")),("<"===o?u._start:u.endTime(u._repeat>=0))+(parseFloat(n.substr(1))||0)*(i?(a<0?u:r).totalDuration()/100:1)):a<0?(n in s||(s[n]=c),s[n]):(o=parseFloat(n.charAt(a-1)+n.substr(a+1)),i&&r&&(o=o/100*(on(r)?r[0]:r).totalDuration()),a>1?e(t,n.substr(0,a-1),r)+o:c+o)):null==n?c:+n},fr=function(e,t,n){var r,a,o=Jt(t[1]),i=(o?2:1)+(e<2?0:1),s=t[i];if(o&&(s.duration=t[1]),s.parent=n,e){for(r=s,a=n;a&&!("immediateRender"in r);)r=a.vars.defaults||{},a=tn(a.vars.inherit)&&a.parent;s.immediateRender=tn(r.immediateRender),e<2?s.runBackwards=1:s.startAt=t[i-1]}return new la(t[0],s,t[i+1])},dr=function(e,t){return e||0===e?t(e):t},pr=function(e,t,n){return n<e?e:n>t?t:n},hr=function(e,t){return Yt(e)&&(t=pn.exec(e))?e.substr(t.index+t[0].length):""},mr=[].slice,vr=function(e,t){return e&&en(e)&&"length"in e&&(!t&&!e.length||e.length-1 in e&&en(e[0]))&&!e.nodeType&&e!==Mt},gr=function(e,t,n){return!Yt(e)||n||!Rt&&zr()?on(e)?function(e,t,n){return void 0===n&&(n=[]),e.forEach((function(e){var r;return Yt(e)&&!t||vr(e,1)?(r=n).push.apply(r,gr(e)):n.push(e)}))||n}(e,n):vr(e)?mr.call(e,0):e?[e]:[]:mr.call((t||Pt).querySelectorAll(e),0)},yr=function(e){return e.sort((function(){return.5-Math.random()}))},br=function(e){if($t(e))return e;var t=en(e)?e:{each:e},n=Gr(t.ease),r=t.from||0,a=parseFloat(t.base)||0,o={},i=r>0&&r<1,s=isNaN(r)||i,u=t.axis,c=r,l=r;return Yt(r)?c=l={center:.5,edges:.5,end:1}[r]||0:!i&&s&&(c=r[0],l=r[1]),function(e,i,f){var d,p,h,m,v,g,y,b,x,w=(f||t).length,k=o[w];if(!k){if(!(x="auto"===t.grid?0:(t.grid||[1,Vt])[1])){for(y=-Vt;y<(y=f[x++].getBoundingClientRect().left)&&x<w;);x--}for(k=o[w]=[],d=s?Math.min(x,w)*c-.5:r%x,p=x===Vt?0:s?w*l/x-.5:r/x|0,y=0,b=Vt,g=0;g<w;g++)h=g%x-d,m=p-(g/x|0),k[g]=v=u?Math.abs("y"===u?m:h):Gt(h*h+m*m),v>y&&(y=v),v<b&&(b=v);"random"===r&&yr(k),k.max=y-b,k.min=b,k.v=w=(parseFloat(t.amount)||parseFloat(t.each)*(x>w?w-1:u?"y"===u?w/x:x:Math.max(x,w/x))||0)*("edges"===r?-1:1),k.b=w<0?a-w:a,k.u=hr(t.amount||t.each)||0,n=n&&w<0?Wr(n):n}return w=(k[e]-k.min)/k.max||0,Rn(k.b+(n?n(w):w)*k.v)+k.u}},xr=function(e){var t=Math.pow(10,((e+"").split(".")[1]||"").length);return function(n){var r=Math.round(parseFloat(n)/e)*e*t;return(r-r%1)/t+(Jt(n)?0:hr(n))}},wr=function(e,t){var n,r,a=on(e);return!a&&en(e)&&(n=a=e.radius||Vt,e.values?(e=gr(e.values),(r=!Jt(e[0]))&&(n*=n)):e=xr(e.increment)),dr(t,a?$t(e)?function(t){return r=e(t),Math.abs(r-t)<=n?r:t}:function(t){for(var a,o,i=parseFloat(r?t.x:t),s=parseFloat(r?t.y:0),u=Vt,c=0,l=e.length;l--;)(a=r?(a=e[l].x-i)*a+(o=e[l].y-s)*o:Math.abs(e[l]-i))<u&&(u=a,c=l);return c=!n||u<=n?e[c]:t,r||c===t||Jt(t)?c:c+hr(t)}:xr(e))},kr=function(e,t,n,r){return dr(on(e)?!t:!0===n?!!(n=0):!r,(function(){return on(e)?e[~~(Math.random()*e.length)]:(n=n||1e-5)&&(r=n<1?Math.pow(10,(n+"").length-2):1)&&Math.floor(Math.round((e-n/2+Math.random()*(t-e+.99*n))/n)*n*r)/r}))},Sr=function(e,t,n){return dr(n,(function(n){return e[~~t(n)]}))},_r=function(e){for(var t,n,r,a,o=0,i="";~(t=e.indexOf("random(",o));)r=e.indexOf(")",t),a="["===e.charAt(t+7),n=e.substr(t+7,r-t-7).match(a?dn:sn),i+=e.substr(o,t-o)+kr(a?n:+n[0],a?0:+n[1],+n[2]||1e-5),o=r+1;return i+e.substr(o,e.length-o)},Nr=function(e,t,n,r,a){var o=t-e,i=r-n;return dr(a,(function(t){return n+((t-e)/o*i||0)}))},Er=function(e,t,n){var r,a,o,i=e.labels,s=Vt;for(r in i)(a=i[r]-t)<0===!!n&&a&&s>(a=Math.abs(a))&&(o=r,s=a);return o},Cr=function(e,t,n){var r,a,o=e.vars,i=o[t];if(i)return r=o[t+"Params"],a=o.callbackScope||e,n&&kn.length&&jn(),r?i.apply(a,r):i.call(a)},Tr=function(e){return Hn(e),e.scrollTrigger&&e.scrollTrigger.kill(!1),e.progress()<1&&Cr(e,"onInterrupt"),e},Ir=function(e){var t=(e=!e.name&&e.default||e).name,n=$t(e),r=t&&!n&&e.init?function(){this._props=[]}:e,a={init:xn,render:ba,add:ra,kill:wa,modifier:xa,rawVars:0},o={targetTest:0,get:0,getSetter:ma,aliases:{},register:0};if(zr(),e!==r){if(_n[t])return;zn(r,zn(Un(e,a),o)),Zn(r.prototype,Zn(a,Un(e,o))),_n[r.prop=t]=r,e.targetTest&&(Cn.push(r),wn[t]=1),t=("css"===t?"CSS":t.charAt(0).toUpperCase()+t.substr(1))+"Plugin"}bn(t,r),e.register&&e.register(Ta,r,_a)},Or=255,Ar={aqua:[0,Or,Or],lime:[0,Or,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,Or],navy:[0,0,128],white:[Or,Or,Or],olive:[128,128,0],yellow:[Or,Or,0],orange:[Or,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[Or,0,0],pink:[Or,192,203],cyan:[0,Or,Or],transparent:[Or,Or,Or,0]},Dr=function(e,t,n){return(6*(e+=e<0?1:e>1?-1:0)<1?t+(n-t)*e*6:e<.5?n:3*e<2?t+(n-t)*(2/3-e)*6:t)*Or+.5|0},Mr=function(e,t,n){var r,a,o,i,s,u,c,l,f,d,p=e?Jt(e)?[e>>16,e>>8&Or,e&Or]:0:Ar.black;if(!p){if(","===e.substr(-1)&&(e=e.substr(0,e.length-1)),Ar[e])p=Ar[e];else if("#"===e.charAt(0)){if(e.length<6&&(r=e.charAt(1),a=e.charAt(2),o=e.charAt(3),e="#"+r+r+a+a+o+o+(5===e.length?e.charAt(4)+e.charAt(4):"")),9===e.length)return[(p=parseInt(e.substr(1,6),16))>>16,p>>8&Or,p&Or,parseInt(e.substr(7),16)/255];p=[(e=parseInt(e.substr(1),16))>>16,e>>8&Or,e&Or]}else if("hsl"===e.substr(0,3))if(p=d=e.match(sn),t){if(~e.indexOf("="))return p=e.match(un),n&&p.length<4&&(p[3]=1),p}else i=+p[0]%360/360,s=+p[1]/100,r=2*(u=+p[2]/100)-(a=u<=.5?u*(s+1):u+s-u*s),p.length>3&&(p[3]*=1),p[0]=Dr(i+1/3,r,a),p[1]=Dr(i,r,a),p[2]=Dr(i-1/3,r,a);else p=e.match(sn)||Ar.transparent;p=p.map(Number)}return t&&!d&&(r=p[0]/Or,a=p[1]/Or,o=p[2]/Or,u=((c=Math.max(r,a,o))+(l=Math.min(r,a,o)))/2,c===l?i=s=0:(f=c-l,s=u>.5?f/(2-c-l):f/(c+l),i=c===r?(a-o)/f+(a<o?6:0):c===a?(o-r)/f+2:(r-a)/f+4,i*=60),p[0]=~~(i+.5),p[1]=~~(100*s+.5),p[2]=~~(100*u+.5)),n&&p.length<4&&(p[3]=1),p},Rr=function(e){var t=[],n=[],r=-1;return e.split(jr).forEach((function(e){var a=e.match(cn)||[];t.push.apply(t,a),n.push(r+=a.length+1)})),t.c=n,t},Pr=function(e,t,n){var r,a,o,i,s="",u=(e+s).match(jr),c=t?"hsla(":"rgba(",l=0;if(!u)return e;if(u=u.map((function(e){return(e=Mr(e,t,1))&&c+(t?e[0]+","+e[1]+"%,"+e[2]+"%,"+e[3]:e.join(","))+")"})),n&&(o=Rr(e),(r=n.c).join(s)!==o.c.join(s)))for(i=(a=e.replace(jr,"1").split(cn)).length-1;l<i;l++)s+=a[l]+(~r.indexOf(l)?u.shift()||c+"0,0,0,0)":(o.length?o:u.length?u:n).shift());if(!a)for(i=(a=e.split(jr)).length-1;l<i;l++)s+=a[l]+u[l];return s+a[i]},jr=function(){var e,t="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3,4}){1,2}\\b";for(e in Ar)t+="|"+e+"\\b";return new RegExp(t+")","gi")}(),Fr=/hsl[a]?\(/,Lr=function(e){var t,n=e.join(" ");if(jr.lastIndex=0,jr.test(n))return t=Fr.test(n),e[1]=Pr(e[1],t),e[0]=Pr(e[0],t,Rr(e[1])),!0},Br=function(){var e,t,n,r,a,o,i=Date.now,s=500,u=33,c=i(),l=c,f=1e3/240,d=f,p=[],h=function n(h){var m,v,g,y,b=i()-l,x=!0===h;if(b>s&&(c+=b-u),((m=(g=(l+=b)-c)-d)>0||x)&&(y=++r.frame,a=g-1e3*r.time,r.time=g/=1e3,d+=m+(m>=f?4:f-m),v=1),x||(e=t(n)),v)for(o=0;o<p.length;o++)p[o](g,a,y,h)};return r={time:0,frame:0,tick:function(){h(!0)},deltaRatio:function(e){return a/(1e3/(e||60))},wake:function(){jt&&(!Rt&&nn()&&(Mt=Rt=window,Pt=Mt.document||{},hn.gsap=Ta,(Mt.gsapVersions||(Mt.gsapVersions=[])).push(Ta.version),vn(mn||Mt.GreenSockGlobals||!Mt.gsap&&Mt||{}),n=Mt.requestAnimationFrame),e&&r.sleep(),t=n||function(e){return setTimeout(e,d-1e3*r.time+1|0)},Bt=1,h(2))},sleep:function(){(n?Mt.cancelAnimationFrame:clearTimeout)(e),Bt=0,t=xn},lagSmoothing:function(e,t){s=e||1e8,u=Math.min(t,s,0)},fps:function(e){f=1e3/(e||240),d=1e3*r.time+f},add:function(e){p.indexOf(e)<0&&p.push(e),zr()},remove:function(e,t){~(t=p.indexOf(e))&&p.splice(t,1)&&o>=t&&o--},_listeners:p},r}(),zr=function(){return!Bt&&Br.wake()},Zr={},Vr=/^[\d.\-M][\d.\-,\s]/,Ur=/["']/g,qr=function(e){for(var t,n,r,a={},o=e.substr(1,e.length-3).split(":"),i=o[0],s=1,u=o.length;s<u;s++)n=o[s],t=s!==u-1?n.lastIndexOf(","):n.length,r=n.substr(0,t),a[i]=isNaN(r)?r.replace(Ur,"").trim():+r,i=n.substr(t+1).trim();return a},Wr=function(e){return function(t){return 1-e(1-t)}},Hr=function e(t,n){for(var r,a=t._first;a;)a instanceof ea?e(a,n):!a.vars.yoyoEase||a._yoyo&&a._repeat||a._yoyo===n||(a.timeline?e(a.timeline,n):(r=a._ease,a._ease=a._yEase,a._yEase=r,a._yoyo=n)),a=a._next},Gr=function(e,t){return e&&($t(e)?e:Zr[e]||function(e){var t=(e+"").split("("),n=Zr[t[0]];return n&&t.length>1&&n.config?n.config.apply(null,~e.indexOf("{")?[qr(t[1])]:function(e){var t=e.indexOf("(")+1,n=e.indexOf(")"),r=e.indexOf("(",t);return e.substring(t,~r&&r<n?e.indexOf(")",n+1):n)}(e).split(",").map(Ln)):Zr._CE&&Vr.test(e)?Zr._CE("",e):n}(e))||t},Kr=function(e,t,n,r){void 0===n&&(n=function(e){return 1-t(1-e)}),void 0===r&&(r=function(e){return e<.5?t(2*e)/2:1-t(2*(1-e))/2});var a,o={easeIn:t,easeOut:n,easeInOut:r};return Dn(e,(function(e){for(var t in Zr[e]=hn[e]=o,Zr[a=e.toLowerCase()]=n,o)Zr[a+("easeIn"===t?".in":"easeOut"===t?".out":".inOut")]=Zr[e+"."+t]=o[t]})),o},Xr=function(e){return function(t){return t<.5?(1-e(1-2*t))/2:.5+e(2*(t-.5))/2}},Yr=function e(t,n,r){var a=n>=1?n:1,o=(r||(t?.3:.45))/(n<1?n:1),i=o/qt*(Math.asin(1/a)||0),s=function(e){return 1===e?1:a*Math.pow(2,-10*e)*Xt((e-i)*o)+1},u="out"===t?s:"in"===t?function(e){return 1-s(1-e)}:Xr(s);return o=qt/o,u.config=function(n,r){return e(t,n,r)},u},$r=function e(t,n){void 0===n&&(n=1.70158);var r=function(e){return e?--e*e*((n+1)*e+n)+1:0},a="out"===t?r:"in"===t?function(e){return 1-r(1-e)}:Xr(r);return a.config=function(n){return e(t,n)},a};Dn("Linear,Quad,Cubic,Quart,Quint,Strong",(function(e,t){var n=t<5?t+1:t;Kr(e+",Power"+(n-1),t?function(e){return Math.pow(e,n)}:function(e){return e},(function(e){return 1-Math.pow(1-e,n)}),(function(e){return e<.5?Math.pow(2*e,n)/2:1-Math.pow(2*(1-e),n)/2}))})),Zr.Linear.easeNone=Zr.none=Zr.Linear.easeIn,Kr("Elastic",Yr("in"),Yr("out"),Yr()),function(e,t){var n=1/t,r=function(r){return r<n?e*r*r:r<.7272727272727273?e*Math.pow(r-1.5/t,2)+.75:r<.9090909090909092?e*(r-=2.25/t)*r+.9375:e*Math.pow(r-2.625/t,2)+.984375};Kr("Bounce",(function(e){return 1-r(1-e)}),r)}(7.5625,2.75),Kr("Expo",(function(e){return e?Math.pow(2,10*(e-1)):0})),Kr("Circ",(function(e){return-(Gt(1-e*e)-1)})),Kr("Sine",(function(e){return 1===e?1:1-Kt(e*Wt)})),Kr("Back",$r("in"),$r("out"),$r()),Zr.SteppedEase=Zr.steps=hn.SteppedEase={config:function(e,t){void 0===e&&(e=1);var n=1/e,r=e+(t?0:1),a=t?1:0;return function(e){return((r*pr(0,.99999999,e)|0)+a)*n}}},Zt.ease=Zr["quad.out"],Dn("onComplete,onUpdate,onStart,onRepeat,onReverseComplete,onInterrupt",(function(e){return Tn+=e+","+e+"Params,"}));var Jr=function(e,t){this.id=Ht++,e._gsap=this,this.target=e,this.harness=t,this.get=t?t.get:An,this.set=t?t.getSetter:ma},Qr=function(){function e(e){this.vars=e,this._delay=+e.delay||0,(this._repeat=e.repeat===1/0?-2:e.repeat||0)&&(this._rDelay=e.repeatDelay||0,this._yoyo=!!e.yoyo||!!e.yoyoEase),this._ts=1,sr(this,+e.duration,1,1),this.data=e.data,Bt||Br.wake()}var t=e.prototype;return t.delay=function(e){return e||0===e?(this.parent&&this.parent.smoothChildTiming&&this.startTime(this._start+e-this._delay),this._delay=e,this):this._delay},t.duration=function(e){return arguments.length?this.totalDuration(this._repeat>0?e+(e+this._rDelay)*this._repeat:e):this.totalDuration()&&this._dur},t.totalDuration=function(e){return arguments.length?(this._dirty=0,sr(this,this._repeat<0?e:(e-this._repeat*this._rDelay)/(this._repeat+1))):this._tDur},t.totalTime=function(e,t){if(zr(),!arguments.length)return this._tTime;var n=this._dp;if(n&&n.smoothChildTiming&&this._ts){for(er(this,e),!n._dp||n.parent||tr(n,this);n&&n.parent;)n.parent._time!==n._start+(n._ts>=0?n._tTime/n._ts:(n.totalDuration()-n._tTime)/-n._ts)&&n.totalTime(n._tTime,!0),n=n.parent;!this.parent&&this._dp.autoRemoveChildren&&(this._ts>0&&e<this._tDur||this._ts<0&&e>0||!this._tDur&&!e)&&nr(this._dp,this,this._start-this._delay)}return(this._tTime!==e||!this._dur&&!t||this._initted&&Math.abs(this._zTime)===Ut||!e&&!this._initted&&(this.add||this._ptLookup))&&(this._ts||(this._pTime=e),Fn(this,e,t)),this},t.time=function(e,t){return arguments.length?this.totalTime(Math.min(this.totalDuration(),e+Yn(this))%(this._dur+this._rDelay)||(e?this._dur:0),t):this._time},t.totalProgress=function(e,t){return arguments.length?this.totalTime(this.totalDuration()*e,t):this.totalDuration()?Math.min(1,this._tTime/this._tDur):this.ratio},t.progress=function(e,t){return arguments.length?this.totalTime(this.duration()*(!this._yoyo||1&this.iteration()?e:1-e)+Yn(this),t):this.duration()?Math.min(1,this._time/this._dur):this.ratio},t.iteration=function(e,t){var n=this.duration()+this._rDelay;return arguments.length?this.totalTime(this._time+(e-1)*n,t):this._repeat?$n(this._tTime,n)+1:1},t.timeScale=function(e){if(!arguments.length)return-1e-8===this._rts?0:this._rts;if(this._rts===e)return this;var t=this.parent&&this._ts?Jn(this.parent._time,this):this._tTime;return this._rts=+e||0,this._ts=this._ps||-1e-8===e?0:this._rts,Kn(this.totalTime(pr(-this._delay,this._tDur,t),!0)),Qn(this),this},t.paused=function(e){return arguments.length?(this._ps!==e&&(this._ps=e,e?(this._pTime=this._tTime||Math.max(-this._delay,this.rawTime()),this._ts=this._act=0):(zr(),this._ts=this._rts,this.totalTime(this.parent&&!this.parent.smoothChildTiming?this.rawTime():this._tTime||this._pTime,1===this.progress()&&Math.abs(this._zTime)!==Ut&&(this._tTime-=Ut)))),this):this._ps},t.startTime=function(e){if(arguments.length){this._start=e;var t=this.parent||this._dp;return t&&(t._sort||!this.parent)&&nr(t,this,e-this._delay),this}return this._start},t.endTime=function(e){return this._start+(tn(e)?this.totalDuration():this.duration())/Math.abs(this._ts||1)},t.rawTime=function(e){var t=this.parent||this._dp;return t?e&&(!this._ts||this._repeat&&this._time&&this.totalProgress()<1)?this._tTime%(this._dur+this._rDelay):this._ts?Jn(t.rawTime(e),this):this._tTime:this._tTime},t.globalTime=function(e){for(var t=this,n=arguments.length?e:t.rawTime();t;)n=t._start+n/(t._ts||1),t=t._dp;return n},t.repeat=function(e){return arguments.length?(this._repeat=e===1/0?-2:e,ur(this)):-2===this._repeat?1/0:this._repeat},t.repeatDelay=function(e){if(arguments.length){var t=this._time;return this._rDelay=e,ur(this),t?this.time(t):this}return this._rDelay},t.yoyo=function(e){return arguments.length?(this._yoyo=e,this):this._yoyo},t.seek=function(e,t){return this.totalTime(lr(this,e),tn(t))},t.restart=function(e,t){return this.play().totalTime(e?-this._delay:0,tn(t))},t.play=function(e,t){return null!=e&&this.seek(e,t),this.reversed(!1).paused(!1)},t.reverse=function(e,t){return null!=e&&this.seek(e||this.totalDuration(),t),this.reversed(!0).paused(!1)},t.pause=function(e,t){return null!=e&&this.seek(e,t),this.paused(!0)},t.resume=function(){return this.paused(!1)},t.reversed=function(e){return arguments.length?(!!e!==this.reversed()&&this.timeScale(-this._rts||(e?-1e-8:0)),this):this._rts<0},t.invalidate=function(){return this._initted=this._act=0,this._zTime=-1e-8,this},t.isActive=function(){var e,t=this.parent||this._dp,n=this._start;return!(t&&!(this._ts&&this._initted&&t.isActive()&&(e=t.rawTime(!0))>=n&&e<this.endTime(!0)-Ut))},t.eventCallback=function(e,t,n){var r=this.vars;return arguments.length>1?(t?(r[e]=t,n&&(r[e+"Params"]=n),"onUpdate"===e&&(this._onUpdate=t)):delete r[e],this):r[e]},t.then=function(e){var t=this;return new Promise((function(n){var r=$t(e)?e:Bn,a=function(){var e=t.then;t.then=null,$t(r)&&(r=r(t))&&(r.then||r===t)&&(t.then=e),n(r),t.then=e};t._initted&&1===t.totalProgress()&&t._ts>=0||!t._tTime&&t._ts<0?a():t._prom=a}))},t.kill=function(){Tr(this)},e}();zn(Qr.prototype,{_time:0,_start:0,_end:0,_tTime:0,_tDur:0,_dirty:0,_repeat:0,_yoyo:!1,parent:null,_initted:!1,_rDelay:0,_ts:1,_dp:0,ratio:0,_zTime:-1e-8,_prom:0,_ps:!1,_rts:1});var ea=function(e){function t(t,n){var r;return void 0===t&&(t={}),(r=e.call(this,t)||this).labels={},r.smoothChildTiming=!!t.smoothChildTiming,r.autoRemoveChildren=!!t.autoRemoveChildren,r._sort=tn(t.sortChildren),Dt&&nr(t.parent||Dt,It(r),n),t.reversed&&r.reverse(),t.paused&&r.paused(!0),t.scrollTrigger&&rr(It(r),t.scrollTrigger),r}Ot(t,e);var n=t.prototype;return n.to=function(e,t,n){return fr(0,arguments,this),this},n.from=function(e,t,n){return fr(1,arguments,this),this},n.fromTo=function(e,t,n,r){return fr(2,arguments,this),this},n.set=function(e,t,n){return t.duration=0,t.parent=this,qn(t).repeatDelay||(t.repeat=0),t.immediateRender=!!t.immediateRender,new la(e,t,lr(this,n),1),this},n.call=function(e,t,n){return nr(this,la.delayedCall(0,e,t),n)},n.staggerTo=function(e,t,n,r,a,o,i){return n.duration=t,n.stagger=n.stagger||r,n.onComplete=o,n.onCompleteParams=i,n.parent=this,new la(e,n,lr(this,a)),this},n.staggerFrom=function(e,t,n,r,a,o,i){return n.runBackwards=1,qn(n).immediateRender=tn(n.immediateRender),this.staggerTo(e,t,n,r,a,o,i)},n.staggerFromTo=function(e,t,n,r,a,o,i,s){return r.startAt=n,qn(r).immediateRender=tn(r.immediateRender),this.staggerTo(e,t,r,a,o,i,s)},n.render=function(e,t,n){var r,a,o,i,s,u,c,l,f,d,p,h,m=this._time,v=this._dirty?this.totalDuration():this._tDur,g=this._dur,y=e<=0?0:Rn(e),b=this._zTime<0!==e<0&&(this._initted||!g);if(this!==Dt&&y>v&&e>=0&&(y=v),y!==this._tTime||n||b){if(m!==this._time&&g&&(y+=this._time-m,e+=this._time-m),r=y,f=this._start,u=!(l=this._ts),b&&(g||(m=this._zTime),(e||!t)&&(this._zTime=e)),this._repeat){if(p=this._yoyo,s=g+this._rDelay,this._repeat<-1&&e<0)return this.totalTime(100*s+e,t,n);if(r=Rn(y%s),y===v?(i=this._repeat,r=g):((i=~~(y/s))&&i===y/s&&(r=g,i--),r>g&&(r=g)),d=$n(this._tTime,s),!m&&this._tTime&&d!==i&&(d=i),p&&1&i&&(r=g-r,h=1),i!==d&&!this._lock){var x=p&&1&d,w=x===(p&&1&i);if(i<d&&(x=!x),m=x?0:g,this._lock=1,this.render(m||(h?0:Rn(i*s)),t,!g)._lock=0,this._tTime=y,!t&&this.parent&&Cr(this,"onRepeat"),this.vars.repeatRefresh&&!h&&(this.invalidate()._lock=1),m&&m!==this._time||u!==!this._ts||this.vars.onRepeat&&!this.parent&&!this._act)return this;if(g=this._dur,v=this._tDur,w&&(this._lock=2,m=x?g:-1e-4,this.render(m,!0),this.vars.repeatRefresh&&!h&&this.invalidate()),this._lock=0,!this._ts&&!u)return this;Hr(this,h)}}if(this._hasPause&&!this._forcing&&this._lock<2&&(c=function(e,t,n){var r;if(n>t)for(r=e._first;r&&r._start<=n;){if("isPause"===r.data&&r._start>t)return r;r=r._next}else for(r=e._last;r&&r._start>=n;){if("isPause"===r.data&&r._start<t)return r;r=r._prev}}(this,Rn(m),Rn(r)),c&&(y-=r-(r=c._start))),this._tTime=y,this._time=r,this._act=!l,this._initted||(this._onUpdate=this.vars.onUpdate,this._initted=1,this._zTime=e,m=0),!m&&r&&!t&&(Cr(this,"onStart"),this._tTime!==y))return this;if(r>=m&&e>=0)for(a=this._first;a;){if(o=a._next,(a._act||r>=a._start)&&a._ts&&c!==a){if(a.parent!==this)return this.render(e,t,n);if(a.render(a._ts>0?(r-a._start)*a._ts:(a._dirty?a.totalDuration():a._tDur)+(r-a._start)*a._ts,t,n),r!==this._time||!this._ts&&!u){c=0,o&&(y+=this._zTime=-1e-8);break}}a=o}else{a=this._last;for(var k=e<0?e:r;a;){if(o=a._prev,(a._act||k<=a._end)&&a._ts&&c!==a){if(a.parent!==this)return this.render(e,t,n);if(a.render(a._ts>0?(k-a._start)*a._ts:(a._dirty?a.totalDuration():a._tDur)+(k-a._start)*a._ts,t,n),r!==this._time||!this._ts&&!u){c=0,o&&(y+=this._zTime=k?-1e-8:Ut);break}}a=o}}if(c&&!t&&(this.pause(),c.render(r>=m?0:-1e-8)._zTime=r>=m?1:-1,this._ts))return this._start=f,Qn(this),this.render(e,t,n);this._onUpdate&&!t&&Cr(this,"onUpdate",!0),(y===v&&v>=this.totalDuration()||!y&&m)&&(f!==this._start&&Math.abs(l)===Math.abs(this._ts)||this._lock||((e||!g)&&(y===v&&this._ts>0||!y&&this._ts<0)&&Hn(this,1),t||e<0&&!m||!y&&!m&&v||(Cr(this,y===v&&e>=0?"onComplete":"onReverseComplete",!0),this._prom&&!(y<v&&this.timeScale()>0)&&this._prom())))}return this},n.add=function(e,t){var n=this;if(Jt(t)||(t=lr(this,t,e)),!(e instanceof Qr)){if(on(e))return e.forEach((function(e){return n.add(e,t)})),this;if(Yt(e))return this.addLabel(e,t);if(!$t(e))return this;e=la.delayedCall(0,e)}return this!==e?nr(this,e,t):this},n.getChildren=function(e,t,n,r){void 0===e&&(e=!0),void 0===t&&(t=!0),void 0===n&&(n=!0),void 0===r&&(r=-Vt);for(var a=[],o=this._first;o;)o._start>=r&&(o instanceof la?t&&a.push(o):(n&&a.push(o),e&&a.push.apply(a,o.getChildren(!0,t,n)))),o=o._next;return a},n.getById=function(e){for(var t=this.getChildren(1,1,1),n=t.length;n--;)if(t[n].vars.id===e)return t[n]},n.remove=function(e){return Yt(e)?this.removeLabel(e):$t(e)?this.killTweensOf(e):(Wn(this,e),e===this._recent&&(this._recent=this._last),Gn(this))},n.totalTime=function(t,n){return arguments.length?(this._forcing=1,!this._dp&&this._ts&&(this._start=Rn(Br.time-(this._ts>0?t/this._ts:(this.totalDuration()-t)/-this._ts))),e.prototype.totalTime.call(this,t,n),this._forcing=0,this):this._tTime},n.addLabel=function(e,t){return this.labels[e]=lr(this,t),this},n.removeLabel=function(e){return delete this.labels[e],this},n.addPause=function(e,t,n){var r=la.delayedCall(0,t||xn,n);return r.data="isPause",this._hasPause=1,nr(this,r,lr(this,e))},n.removePause=function(e){var t=this._first;for(e=lr(this,e);t;)t._start===e&&"isPause"===t.data&&Hn(t),t=t._next},n.killTweensOf=function(e,t,n){for(var r=this.getTweensOf(e,n),a=r.length;a--;)ta!==r[a]&&r[a].kill(e,t);return this},n.getTweensOf=function(e,t){for(var n,r=[],a=gr(e),o=this._first,i=Jt(t);o;)o instanceof la?Pn(o._targets,a)&&(i?(!ta||o._initted&&o._ts)&&o.globalTime(0)<=t&&o.globalTime(o.totalDuration())>t:!t||o.isActive())&&r.push(o):(n=o.getTweensOf(a,t)).length&&r.push.apply(r,n),o=o._next;return r},n.tweenTo=function(e,t){t=t||{};var n,r=this,a=lr(r,e),o=t,i=o.startAt,s=o.onStart,u=o.onStartParams,c=o.immediateRender,l=la.to(r,zn({ease:t.ease||"none",lazy:!1,immediateRender:!1,time:a,overwrite:"auto",duration:t.duration||Math.abs((a-(i&&"time"in i?i.time:r._time))/r.timeScale())||Ut,onStart:function(){if(r.pause(),!n){var e=t.duration||Math.abs((a-(i&&"time"in i?i.time:r._time))/r.timeScale());l._dur!==e&&sr(l,e,0,1).render(l._time,!0,!0),n=1}s&&s.apply(l,u||[])}},t));return c?l.render(0):l},n.tweenFromTo=function(e,t,n){return this.tweenTo(t,zn({startAt:{time:lr(this,e)}},n))},n.recent=function(){return this._recent},n.nextLabel=function(e){return void 0===e&&(e=this._time),Er(this,lr(this,e))},n.previousLabel=function(e){return void 0===e&&(e=this._time),Er(this,lr(this,e),1)},n.currentLabel=function(e){return arguments.length?this.seek(e,!0):this.previousLabel(this._time+Ut)},n.shiftChildren=function(e,t,n){void 0===n&&(n=0);for(var r,a=this._first,o=this.labels;a;)a._start>=n&&(a._start+=e,a._end+=e),a=a._next;if(t)for(r in o)o[r]>=n&&(o[r]+=e);return Gn(this)},n.invalidate=function(){var t=this._first;for(this._lock=0;t;)t.invalidate(),t=t._next;return e.prototype.invalidate.call(this)},n.clear=function(e){void 0===e&&(e=!0);for(var t,n=this._first;n;)t=n._next,this.remove(n),n=t;return this._dp&&(this._time=this._tTime=this._pTime=0),e&&(this.labels={}),Gn(this)},n.totalDuration=function(e){var t,n,r,a=0,o=this,i=o._last,s=Vt;if(arguments.length)return o.timeScale((o._repeat<0?o.duration():o.totalDuration())/(o.reversed()?-e:e));if(o._dirty){for(r=o.parent;i;)t=i._prev,i._dirty&&i.totalDuration(),(n=i._start)>s&&o._sort&&i._ts&&!o._lock?(o._lock=1,nr(o,i,n-i._delay,1)._lock=0):s=n,n<0&&i._ts&&(a-=n,(!r&&!o._dp||r&&r.smoothChildTiming)&&(o._start+=n/o._ts,o._time-=n,o._tTime-=n),o.shiftChildren(-n,!1,-Infinity),s=0),i._end>a&&i._ts&&(a=i._end),i=t;sr(o,o===Dt&&o._time>a?o._time:a,1,1),o._dirty=0}return o._tDur},t.updateRoot=function(e){if(Dt._ts&&(Fn(Dt,Jn(e,Dt)),Ft=Br.frame),Br.frame>=En){En+=zt.autoSleep||120;var t=Dt._first;if((!t||!t._ts)&&zt.autoSleep&&Br._listeners.length<2){for(;t&&!t._ts;)t=t._next;t||Br.sleep()}}},t}(Qr);zn(ea.prototype,{_lock:0,_hasPause:0,_forcing:0});var ta,na=function(e,t,n,r,a,o,i){var s,u,c,l,f,d,p,h,m=new _a(this._pt,e,t,0,1,ya,null,a),v=0,g=0;for(m.b=n,m.e=r,n+="",(p=~(r+="").indexOf("random("))&&(r=_r(r)),o&&(o(h=[n,r],e,t),n=h[0],r=h[1]),u=n.match(ln)||[];s=ln.exec(r);)l=s[0],f=r.substring(v,s.index),c?c=(c+1)%5:"rgba("===f.substr(-5)&&(c=1),l!==u[g++]&&(d=parseFloat(u[g-1])||0,m._pt={_next:m._pt,p:f||1===g?f:",",s:d,c:"="===l.charAt(1)?parseFloat(l.substr(2))*("-"===l.charAt(0)?-1:1):parseFloat(l)-d,m:c&&c<4?Math.round:0},v=ln.lastIndex);return m.c=v<r.length?r.substring(v,r.length):"",m.fp=i,(fn.test(r)||p)&&(m.e=0),this._pt=m,m},ra=function(e,t,n,r,a,o,i,s,u){$t(r)&&(r=r(a||0,e,o));var c,l=e[t],f="get"!==n?n:$t(l)?u?e[t.indexOf("set")||!$t(e["get"+t.substr(3)])?t:"get"+t.substr(3)](u):e[t]():l,d=$t(l)?u?pa:da:fa;if(Yt(r)&&(~r.indexOf("random(")&&(r=_r(r)),"="===r.charAt(1)&&((c=parseFloat(f)+parseFloat(r.substr(2))*("-"===r.charAt(0)?-1:1)+(hr(f)||0))||0===c)&&(r=c)),f!==r)return isNaN(f*r)||""===r?(!l&&!(t in e)&&gn(t,r),na.call(this,e,t,f,r,d,s||zt.stringFilter,u)):(c=new _a(this._pt,e,t,+f||0,r-(f||0),"boolean"===typeof l?ga:va,0,d),u&&(c.fp=u),i&&c.modifier(i,this,e),this._pt=c)},aa=function(e,t,n,r,a,o){var i,s,u,c;if(_n[e]&&!1!==(i=new _n[e]).init(a,i.rawVars?t[e]:function(e,t,n,r,a){if($t(e)&&(e=sa(e,a,t,n,r)),!en(e)||e.style&&e.nodeType||on(e)||an(e))return Yt(e)?sa(e,a,t,n,r):e;var o,i={};for(o in e)i[o]=sa(e[o],a,t,n,r);return i}(t[e],r,a,o,n),n,r,o)&&(n._pt=s=new _a(n._pt,a,e,0,1,i.render,i,0,i.priority),n!==Lt))for(u=n._ptLookup[n._targets.indexOf(a)],c=i._props.length;c--;)u[i._props[c]]=s;return i},oa=function e(t,n){var r,a,o,i,s,u,c,l,f,d,p,h,m,v=t.vars,g=v.ease,y=v.startAt,b=v.immediateRender,x=v.lazy,w=v.onUpdate,k=v.onUpdateParams,S=v.callbackScope,_=v.runBackwards,N=v.yoyoEase,E=v.keyframes,C=v.autoRevert,T=t._dur,I=t._startAt,O=t._targets,A=t.parent,D=A&&"nested"===A.data?A.parent._targets:O,M="auto"===t._overwrite&&!At,R=t.timeline;if(R&&(!E||!g)&&(g="none"),t._ease=Gr(g,Zt.ease),t._yEase=N?Wr(Gr(!0===N?g:N,Zt.ease)):0,N&&t._yoyo&&!t._repeat&&(N=t._yEase,t._yEase=t._ease,t._ease=N),t._from=!R&&!!v.runBackwards,!R||E&&!v.stagger){if(h=(l=O[0]?On(O[0]).harness:0)&&v[l.prop],r=Un(v,wn),I&&Hn(I.render(-1,!0)),y)if(Hn(t._startAt=la.set(O,zn({data:"isStart",overwrite:!1,parent:A,immediateRender:!0,lazy:tn(x),startAt:null,delay:0,onUpdate:w,onUpdateParams:k,callbackScope:S,stagger:0},y))),n<0&&!b&&!C&&t._startAt.render(-1,!0),b){if(n>0&&!C&&(t._startAt=0),T&&n<=0)return void(n&&(t._zTime=n))}else!1===C&&(t._startAt=0);else if(_&&T)if(I)!C&&(t._startAt=0);else if(n&&(b=!1),o=zn({overwrite:!1,data:"isFromStart",lazy:b&&tn(x),immediateRender:b,stagger:0,parent:A},r),h&&(o[l.prop]=h),Hn(t._startAt=la.set(O,o)),n<0&&t._startAt.render(-1,!0),t._zTime=n,b){if(!n)return}else e(t._startAt,Ut);for(t._pt=0,x=T&&tn(x)||x&&!T,a=0;a<O.length;a++){if(c=(s=O[a])._gsap||In(O)[a]._gsap,t._ptLookup[a]=d={},Sn[c.id]&&kn.length&&jn(),p=D===O?a:D.indexOf(s),l&&!1!==(f=new l).init(s,h||r,t,p,D)&&(t._pt=i=new _a(t._pt,s,f.name,0,1,f.render,f,0,f.priority),f._props.forEach((function(e){d[e]=i})),f.priority&&(u=1)),!l||h)for(o in r)_n[o]&&(f=aa(o,r,t,p,s,D))?f.priority&&(u=1):d[o]=i=ra.call(t,s,o,"get",r[o],p,D,0,v.stringFilter);t._op&&t._op[a]&&t.kill(s,t._op[a]),M&&t._pt&&(ta=t,Dt.killTweensOf(s,d,t.globalTime(n)),m=!t.parent,ta=0),t._pt&&x&&(Sn[c.id]=1)}u&&Sa(t),t._onInit&&t._onInit(t)}t._onUpdate=w,t._initted=(!t._op||t._pt)&&!m,E&&n<=0&&R.render(Vt,!0,!0)},ia=function(e,t,n,r){var a,o,i=t.ease||r||"power1.inOut";if(on(t))o=n[e]||(n[e]=[]),t.forEach((function(e,n){return o.push({t:n/(t.length-1)*100,v:e,e:i})}));else for(a in t)o=n[a]||(n[a]=[]),"ease"===a||o.push({t:parseFloat(e),v:t[a],e:i})},sa=function(e,t,n,r,a){return $t(e)?e.call(t,n,r,a):Yt(e)&&~e.indexOf("random(")?_r(e):e},ua=Tn+"repeat,repeatDelay,yoyo,repeatRefresh,yoyoEase",ca={};Dn(ua+",id,stagger,delay,duration,paused,scrollTrigger",(function(e){return ca[e]=1}));var la=function(e){function t(t,n,r,a){var o;"number"===typeof n&&(r.duration=n,n=r,r=null);var i,s,u,c,l,f,d,p,h=(o=e.call(this,a?n:qn(n))||this).vars,m=h.duration,v=h.delay,g=h.immediateRender,y=h.stagger,b=h.overwrite,x=h.keyframes,w=h.defaults,k=h.scrollTrigger,S=h.yoyoEase,_=n.parent||Dt,N=(on(t)||an(t)?Jt(t[0]):"length"in n)?[t]:gr(t);if(o._targets=N.length?In(N):yn("GSAP target "+t+" not found. https://greensock.com",!zt.nullTargetWarn)||[],o._ptLookup=[],o._overwrite=b,x||y||rn(m)||rn(v)){if(n=o.vars,(i=o.timeline=new ea({data:"nested",defaults:w||{}})).kill(),i.parent=i._dp=It(o),i._start=0,y||rn(m)||rn(v)){if(c=N.length,d=y&&br(y),en(y))for(l in y)~ua.indexOf(l)&&(p||(p={}),p[l]=y[l]);for(s=0;s<c;s++)(u=Un(n,ca)).stagger=0,S&&(u.yoyoEase=S),p&&Zn(u,p),f=N[s],u.duration=+sa(m,It(o),s,f,N),u.delay=(+sa(v,It(o),s,f,N)||0)-o._delay,!y&&1===c&&u.delay&&(o._delay=v=u.delay,o._start+=v,u.delay=0),i.to(f,u,d?d(s,f,N):0),i._ease=Zr.none;i.duration()?m=v=0:o.timeline=0}else if(x){qn(zn(i.vars.defaults,{ease:"none"})),i._ease=Gr(x.ease||n.ease||"none");var E,C,T,I=0;if(on(x))x.forEach((function(e){return i.to(N,e,">")}));else{for(l in u={},x)"ease"===l||"easeEach"===l||ia(l,x[l],u,x.easeEach);for(l in u)for(E=u[l].sort((function(e,t){return e.t-t.t})),I=0,s=0;s<E.length;s++)(T={ease:(C=E[s]).e,duration:(C.t-(s?E[s-1].t:0))/100*m})[l]=C.v,i.to(N,T,I),I+=T.duration;i.duration()<m&&i.to({},{duration:m-i.duration()})}}m||o.duration(m=i.duration())}else o.timeline=0;return!0!==b||At||(ta=It(o),Dt.killTweensOf(N),ta=0),nr(_,It(o),r),n.reversed&&o.reverse(),n.paused&&o.paused(!0),(g||!m&&!x&&o._start===Rn(_._time)&&tn(g)&&Xn(It(o))&&"nested"!==_.data)&&(o._tTime=-1e-8,o.render(Math.max(0,-v))),k&&rr(It(o),k),o}Ot(t,e);var n=t.prototype;return n.render=function(e,t,n){var r,a,o,i,s,u,c,l,f,d=this._time,p=this._tDur,h=this._dur,m=e>p-Ut&&e>=0?p:e<Ut?0:e;if(h){if(m!==this._tTime||!e||n||!this._initted&&this._tTime||this._startAt&&this._zTime<0!==e<0){if(r=m,l=this.timeline,this._repeat){if(i=h+this._rDelay,this._repeat<-1&&e<0)return this.totalTime(100*i+e,t,n);if(r=Rn(m%i),m===p?(o=this._repeat,r=h):((o=~~(m/i))&&o===m/i&&(r=h,o--),r>h&&(r=h)),(u=this._yoyo&&1&o)&&(f=this._yEase,r=h-r),s=$n(this._tTime,i),r===d&&!n&&this._initted)return this;o!==s&&(l&&this._yEase&&Hr(l,u),!this.vars.repeatRefresh||u||this._lock||(this._lock=n=1,this.render(Rn(i*o),!0).invalidate()._lock=0))}if(!this._initted){if(ar(this,e<0?e:r,n,t))return this._tTime=0,this;if(h!==this._dur)return this.render(e,t,n)}if(this._tTime=m,this._time=r,!this._act&&this._ts&&(this._act=1,this._lazy=0),this.ratio=c=(f||this._ease)(r/h),this._from&&(this.ratio=c=1-c),r&&!d&&!t&&(Cr(this,"onStart"),this._tTime!==m))return this;for(a=this._pt;a;)a.r(c,a.d),a=a._next;l&&l.render(e<0?e:!r&&u?-1e-8:l._dur*l._ease(r/this._dur),t,n)||this._startAt&&(this._zTime=e),this._onUpdate&&!t&&(e<0&&this._startAt&&this._startAt.render(e,!0,n),Cr(this,"onUpdate")),this._repeat&&o!==s&&this.vars.onRepeat&&!t&&this.parent&&Cr(this,"onRepeat"),m!==this._tDur&&m||this._tTime!==m||(e<0&&this._startAt&&!this._onUpdate&&this._startAt.render(e,!0,!0),(e||!h)&&(m===this._tDur&&this._ts>0||!m&&this._ts<0)&&Hn(this,1),t||e<0&&!d||!m&&!d||(Cr(this,m===p?"onComplete":"onReverseComplete",!0),this._prom&&!(m<p&&this.timeScale()>0)&&this._prom()))}}else!function(e,t,n,r){var a,o,i,s=e.ratio,u=t<0||!t&&(!e._start&&or(e)&&(e._initted||!ir(e))||(e._ts<0||e._dp._ts<0)&&!ir(e))?0:1,c=e._rDelay,l=0;if(c&&e._repeat&&(l=pr(0,e._tDur,t),o=$n(l,c),e._yoyo&&1&o&&(u=1-u),o!==$n(e._tTime,c)&&(s=1-u,e.vars.repeatRefresh&&e._initted&&e.invalidate())),u!==s||r||e._zTime===Ut||!t&&e._zTime){if(!e._initted&&ar(e,t,r,n))return;for(i=e._zTime,e._zTime=t||(n?Ut:0),n||(n=t&&!i),e.ratio=u,e._from&&(u=1-u),e._time=0,e._tTime=l,a=e._pt;a;)a.r(u,a.d),a=a._next;e._startAt&&t<0&&e._startAt.render(t,!0,!0),e._onUpdate&&!n&&Cr(e,"onUpdate"),l&&e._repeat&&!n&&e.parent&&Cr(e,"onRepeat"),(t>=e._tDur||t<0)&&e.ratio===u&&(u&&Hn(e,1),n||(Cr(e,u?"onComplete":"onReverseComplete",!0),e._prom&&e._prom()))}else e._zTime||(e._zTime=t)}(this,e,t,n);return this},n.targets=function(){return this._targets},n.invalidate=function(){return this._pt=this._op=this._startAt=this._onUpdate=this._lazy=this.ratio=0,this._ptLookup=[],this.timeline&&this.timeline.invalidate(),e.prototype.invalidate.call(this)},n.kill=function(e,t){if(void 0===t&&(t="all"),!e&&(!t||"all"===t))return this._lazy=this._pt=0,this.parent?Tr(this):this;if(this.timeline){var n=this.timeline.totalDuration();return this.timeline.killTweensOf(e,t,ta&&!0!==ta.vars.overwrite)._first||Tr(this),this.parent&&n!==this.timeline.totalDuration()&&sr(this,this._dur*this.timeline._tDur/n,0,1),this}var r,a,o,i,s,u,c,l=this._targets,f=e?gr(e):l,d=this._ptLookup,p=this._pt;if((!t||"all"===t)&&function(e,t){for(var n=e.length,r=n===t.length;r&&n--&&e[n]===t[n];);return n<0}(l,f))return"all"===t&&(this._pt=0),Tr(this);for(r=this._op=this._op||[],"all"!==t&&(Yt(t)&&(s={},Dn(t,(function(e){return s[e]=1})),t=s),t=function(e,t){var n,r,a,o,i=e[0]?On(e[0]).harness:0,s=i&&i.aliases;if(!s)return t;for(r in n=Zn({},t),s)if(r in n)for(a=(o=s[r].split(",")).length;a--;)n[o[a]]=n[r];return n}(l,t)),c=l.length;c--;)if(~f.indexOf(l[c]))for(s in a=d[c],"all"===t?(r[c]=t,i=a,o={}):(o=r[c]=r[c]||{},i=t),i)(u=a&&a[s])&&("kill"in u.d&&!0!==u.d.kill(s)||Wn(this,u,"_pt"),delete a[s]),"all"!==o&&(o[s]=1);return this._initted&&!this._pt&&p&&Tr(this),this},t.to=function(e,n){return new t(e,n,arguments[2])},t.from=function(e,t){return fr(1,arguments)},t.delayedCall=function(e,n,r,a){return new t(n,0,{immediateRender:!1,lazy:!1,overwrite:!1,delay:e,onComplete:n,onReverseComplete:n,onCompleteParams:r,onReverseCompleteParams:r,callbackScope:a})},t.fromTo=function(e,t,n){return fr(2,arguments)},t.set=function(e,n){return n.duration=0,n.repeatDelay||(n.repeat=0),new t(e,n)},t.killTweensOf=function(e,t,n){return Dt.killTweensOf(e,t,n)},t}(Qr);zn(la.prototype,{_targets:[],_lazy:0,_startAt:0,_op:0,_onInit:0}),Dn("staggerTo,staggerFrom,staggerFromTo",(function(e){la[e]=function(){var t=new ea,n=mr.call(arguments,0);return n.splice("staggerFromTo"===e?5:4,0,0),t[e].apply(t,n)}}));var fa=function(e,t,n){return e[t]=n},da=function(e,t,n){return e[t](n)},pa=function(e,t,n,r){return e[t](r.fp,n)},ha=function(e,t,n){return e.setAttribute(t,n)},ma=function(e,t){return $t(e[t])?da:Qt(e[t])&&e.setAttribute?ha:fa},va=function(e,t){return t.set(t.t,t.p,Math.round(1e6*(t.s+t.c*e))/1e6,t)},ga=function(e,t){return t.set(t.t,t.p,!!(t.s+t.c*e),t)},ya=function(e,t){var n=t._pt,r="";if(!e&&t.b)r=t.b;else if(1===e&&t.e)r=t.e;else{for(;n;)r=n.p+(n.m?n.m(n.s+n.c*e):Math.round(1e4*(n.s+n.c*e))/1e4)+r,n=n._next;r+=t.c}t.set(t.t,t.p,r,t)},ba=function(e,t){for(var n=t._pt;n;)n.r(e,n.d),n=n._next},xa=function(e,t,n,r){for(var a,o=this._pt;o;)a=o._next,o.p===r&&o.modifier(e,t,n),o=a},wa=function(e){for(var t,n,r=this._pt;r;)n=r._next,r.p===e&&!r.op||r.op===e?Wn(this,r,"_pt"):r.dep||(t=1),r=n;return!t},ka=function(e,t,n,r){r.mSet(e,t,r.m.call(r.tween,n,r.mt),r)},Sa=function(e){for(var t,n,r,a,o=e._pt;o;){for(t=o._next,n=r;n&&n.pr>o.pr;)n=n._next;(o._prev=n?n._prev:a)?o._prev._next=o:r=o,(o._next=n)?n._prev=o:a=o,o=t}e._pt=r},_a=function(){function e(e,t,n,r,a,o,i,s,u){this.t=t,this.s=r,this.c=a,this.p=n,this.r=o||va,this.d=i||this,this.set=s||fa,this.pr=u||0,this._next=e,e&&(e._prev=this)}return e.prototype.modifier=function(e,t,n){this.mSet=this.mSet||this.set,this.set=ka,this.m=e,this.mt=n,this.tween=t},e}();Dn(Tn+"parent,duration,ease,delay,overwrite,runBackwards,startAt,yoyo,immediateRender,repeat,repeatDelay,data,paused,reversed,lazy,callbackScope,stringFilter,id,yoyoEase,stagger,inherit,repeatRefresh,keyframes,autoRevert,scrollTrigger",(function(e){return wn[e]=1})),hn.TweenMax=hn.TweenLite=la,hn.TimelineLite=hn.TimelineMax=ea,Dt=new ea({sortChildren:!1,defaults:Zt,autoRemoveChildren:!0,id:"root",smoothChildTiming:!0}),zt.stringFilter=Lr;var Na={registerPlugin:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];t.forEach((function(e){return Ir(e)}))},timeline:function(e){return new ea(e)},getTweensOf:function(e,t){return Dt.getTweensOf(e,t)},getProperty:function(e,t,n,r){Yt(e)&&(e=gr(e)[0]);var a=On(e||{}).get,o=n?Bn:Ln;return"native"===n&&(n=""),e?t?o((_n[t]&&_n[t].get||a)(e,t,n,r)):function(t,n,r){return o((_n[t]&&_n[t].get||a)(e,t,n,r))}:e},quickSetter:function(e,t,n){if((e=gr(e)).length>1){var r=e.map((function(e){return Ta.quickSetter(e,t,n)})),a=r.length;return function(e){for(var t=a;t--;)r[t](e)}}e=e[0]||{};var o=_n[t],i=On(e),s=i.harness&&(i.harness.aliases||{})[t]||t,u=o?function(t){var r=new o;Lt._pt=0,r.init(e,n?t+n:t,Lt,0,[e]),r.render(1,r),Lt._pt&&ba(1,Lt)}:i.set(e,s);return o?u:function(t){return u(e,s,n?t+n:t,i,1)}},isTweening:function(e){return Dt.getTweensOf(e,!0).length>0},defaults:function(e){return e&&e.ease&&(e.ease=Gr(e.ease,Zt.ease)),Vn(Zt,e||{})},config:function(e){return Vn(zt,e||{})},registerEffect:function(e){var t=e.name,n=e.effect,r=e.plugins,a=e.defaults,o=e.extendTimeline;(r||"").split(",").forEach((function(e){return e&&!_n[e]&&!hn[e]&&yn(t+" effect requires "+e+" plugin.")})),Nn[t]=function(e,t,r){return n(gr(e),zn(t||{},a),r)},o&&(ea.prototype[t]=function(e,n,r){return this.add(Nn[t](e,en(n)?n:(r=n)&&{},this),r)})},registerEase:function(e,t){Zr[e]=Gr(t)},parseEase:function(e,t){return arguments.length?Gr(e,t):Zr},getById:function(e){return Dt.getById(e)},exportRoot:function(e,t){void 0===e&&(e={});var n,r,a=new ea(e);for(a.smoothChildTiming=tn(e.smoothChildTiming),Dt.remove(a),a._dp=0,a._time=a._tTime=Dt._time,n=Dt._first;n;)r=n._next,!t&&!n._dur&&n instanceof la&&n.vars.onComplete===n._targets[0]||nr(a,n,n._start-n._delay),n=r;return nr(Dt,a,0),a},utils:{wrap:function e(t,n,r){var a=n-t;return on(t)?Sr(t,e(0,t.length),n):dr(r,(function(e){return(a+(e-t)%a)%a+t}))},wrapYoyo:function e(t,n,r){var a=n-t,o=2*a;return on(t)?Sr(t,e(0,t.length-1),n):dr(r,(function(e){return t+((e=(o+(e-t)%o)%o||0)>a?o-e:e)}))},distribute:br,random:kr,snap:wr,normalize:function(e,t,n){return Nr(e,t,0,1,n)},getUnit:hr,clamp:function(e,t,n){return dr(n,(function(n){return pr(e,t,n)}))},splitColor:Mr,toArray:gr,selector:function(e){return e=gr(e)[0]||yn("Invalid scope")||{},function(t){var n=e.current||e.nativeElement||e;return gr(t,n.querySelectorAll?n:n===e?yn("Invalid scope")||Pt.createElement("div"):e)}},mapRange:Nr,pipe:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){return t.reduce((function(e,t){return t(e)}),e)}},unitize:function(e,t){return function(n){return e(parseFloat(n))+(t||hr(n))}},interpolate:function e(t,n,r,a){var o=isNaN(t+n)?0:function(e){return(1-e)*t+e*n};if(!o){var i,s,u,c,l,f=Yt(t),d={};if(!0===r&&(a=1)&&(r=null),f)t={p:t},n={p:n};else if(on(t)&&!on(n)){for(u=[],c=t.length,l=c-2,s=1;s<c;s++)u.push(e(t[s-1],t[s]));c--,o=function(e){e*=c;var t=Math.min(l,~~e);return u[t](e-t)},r=n}else a||(t=Zn(on(t)?[]:{},t));if(!u){for(i in n)ra.call(d,t,i,"get",n[i]);o=function(e){return ba(e,d)||(f?t.p:t)}}}return dr(r,o)},shuffle:yr},install:vn,effects:Nn,ticker:Br,updateRoot:ea.updateRoot,plugins:_n,globalTimeline:Dt,core:{PropTween:_a,globals:bn,Tween:la,Timeline:ea,Animation:Qr,getCache:On,_removeLinkedListItem:Wn,suppressOverwrites:function(e){return At=e}}};Dn("to,from,fromTo,delayedCall,set,killTweensOf",(function(e){return Na[e]=la[e]})),Br.add(ea.updateRoot),Lt=Na.to({},{duration:0});var Ea=function(e,t){for(var n=e._pt;n&&n.p!==t&&n.op!==t&&n.fp!==t;)n=n._next;return n},Ca=function(e,t){return{name:e,rawVars:1,init:function(e,n,r){r._onInit=function(e){var r,a;if(Yt(n)&&(r={},Dn(n,(function(e){return r[e]=1})),n=r),t){for(a in r={},n)r[a]=t(n[a]);n=r}!function(e,t){var n,r,a,o=e._targets;for(n in t)for(r=o.length;r--;)(a=e._ptLookup[r][n])&&(a=a.d)&&(a._pt&&(a=Ea(a,n)),a&&a.modifier&&a.modifier(t[n],e,o[r],n))}(e,n)}}}},Ta=Na.registerPlugin({name:"attr",init:function(e,t,n,r,a){var o,i;for(o in t)(i=this.add(e,"setAttribute",(e.getAttribute(o)||0)+"",t[o],r,a,0,0,o))&&(i.op=o),this._props.push(o)}},{name:"endArray",init:function(e,t){for(var n=t.length;n--;)this.add(e,n,e[n]||0,t[n])}},Ca("roundProps",xr),Ca("modifiers"),Ca("snap",wr))||Na;la.version=ea.version=Ta.version="3.9.1",jt=1,nn()&&zr();Zr.Power0,Zr.Power1,Zr.Power2,Zr.Power3,Zr.Power4,Zr.Linear,Zr.Quad,Zr.Cubic,Zr.Quart,Zr.Quint,Zr.Strong,Zr.Elastic,Zr.Back,Zr.SteppedEase,Zr.Bounce,Zr.Sine,Zr.Expo,Zr.Circ;var Ia,Oa,Aa,Da,Ma,Ra,Pa,ja={},Fa=180/Math.PI,La=Math.PI/180,Ba=Math.atan2,za=/([A-Z])/g,Za=/(?:left|right|width|margin|padding|x)/i,Va=/[\s,\(]\S/,Ua={autoAlpha:"opacity,visibility",scale:"scaleX,scaleY",alpha:"opacity"},qa=function(e,t){return t.set(t.t,t.p,Math.round(1e4*(t.s+t.c*e))/1e4+t.u,t)},Wa=function(e,t){return t.set(t.t,t.p,1===e?t.e:Math.round(1e4*(t.s+t.c*e))/1e4+t.u,t)},Ha=function(e,t){return t.set(t.t,t.p,e?Math.round(1e4*(t.s+t.c*e))/1e4+t.u:t.b,t)},Ga=function(e,t){var n=t.s+t.c*e;t.set(t.t,t.p,~~(n+(n<0?-.5:.5))+t.u,t)},Ka=function(e,t){return t.set(t.t,t.p,e?t.e:t.b,t)},Xa=function(e,t){return t.set(t.t,t.p,1!==e?t.b:t.e,t)},Ya=function(e,t,n){return e.style[t]=n},$a=function(e,t,n){return e.style.setProperty(t,n)},Ja=function(e,t,n){return e._gsap[t]=n},Qa=function(e,t,n){return e._gsap.scaleX=e._gsap.scaleY=n},eo=function(e,t,n,r,a){var o=e._gsap;o.scaleX=o.scaleY=n,o.renderTransform(a,o)},to=function(e,t,n,r,a){var o=e._gsap;o[t]=n,o.renderTransform(a,o)},no="transform",ro=no+"Origin",ao=function(e,t){var n=Oa.createElementNS?Oa.createElementNS((t||"http://www.w3.org/1999/xhtml").replace(/^https/,"http"),e):Oa.createElement(e);return n.style?n:Oa.createElement(e)},oo=function e(t,n,r){var a=getComputedStyle(t);return a[n]||a.getPropertyValue(n.replace(za,"-$1").toLowerCase())||a.getPropertyValue(n)||!r&&e(t,so(n)||n,1)||""},io="O,Moz,ms,Ms,Webkit".split(","),so=function(e,t,n){var r=(t||Ma).style,a=5;if(e in r&&!n)return e;for(e=e.charAt(0).toUpperCase()+e.substr(1);a--&&!(io[a]+e in r););return a<0?null:(3===a?"ms":a>=0?io[a]:"")+e},uo=function(){"undefined"!==typeof window&&window.document&&(Ia=window,Oa=Ia.document,Aa=Oa.documentElement,Ma=ao("div")||{style:{}},ao("div"),no=so(no),ro=no+"Origin",Ma.style.cssText="border-width:0;line-height:0;position:absolute;padding:0",Pa=!!so("perspective"),Da=1)},co=function e(t){var n,r=ao("svg",this.ownerSVGElement&&this.ownerSVGElement.getAttribute("xmlns")||"http://www.w3.org/2000/svg"),a=this.parentNode,o=this.nextSibling,i=this.style.cssText;if(Aa.appendChild(r),r.appendChild(this),this.style.display="block",t)try{n=this.getBBox(),this._gsapBBox=this.getBBox,this.getBBox=e}catch(s){}else this._gsapBBox&&(n=this._gsapBBox());return a&&(o?a.insertBefore(this,o):a.appendChild(this)),Aa.removeChild(r),this.style.cssText=i,n},lo=function(e,t){for(var n=t.length;n--;)if(e.hasAttribute(t[n]))return e.getAttribute(t[n])},fo=function(e){var t;try{t=e.getBBox()}catch(n){t=co.call(e,!0)}return t&&(t.width||t.height)||e.getBBox===co||(t=co.call(e,!0)),!t||t.width||t.x||t.y?t:{x:+lo(e,["x","cx","x1"])||0,y:+lo(e,["y","cy","y1"])||0,width:0,height:0}},po=function(e){return!(!e.getCTM||e.parentNode&&!e.ownerSVGElement||!fo(e))},ho=function(e,t){if(t){var n=e.style;t in ja&&t!==ro&&(t=no),n.removeProperty?("ms"!==t.substr(0,2)&&"webkit"!==t.substr(0,6)||(t="-"+t),n.removeProperty(t.replace(za,"-$1").toLowerCase())):n.removeAttribute(t)}},mo=function(e,t,n,r,a,o){var i=new _a(e._pt,t,n,0,1,o?Xa:Ka);return e._pt=i,i.b=r,i.e=a,e._props.push(n),i},vo={deg:1,rad:1,turn:1},go=function e(t,n,r,a){var o,i,s,u,c=parseFloat(r)||0,l=(r+"").trim().substr((c+"").length)||"px",f=Ma.style,d=Za.test(n),p="svg"===t.tagName.toLowerCase(),h=(p?"client":"offset")+(d?"Width":"Height"),m=100,v="px"===a,g="%"===a;return a===l||!c||vo[a]||vo[l]?c:("px"!==l&&!v&&(c=e(t,n,r,"px")),u=t.getCTM&&po(t),!g&&"%"!==l||!ja[n]&&!~n.indexOf("adius")?(f[d?"width":"height"]=m+(v?l:a),i=~n.indexOf("adius")||"em"===a&&t.appendChild&&!p?t:t.parentNode,u&&(i=(t.ownerSVGElement||{}).parentNode),i&&i!==Oa&&i.appendChild||(i=Oa.body),(s=i._gsap)&&g&&s.width&&d&&s.time===Br.time?Mn(c/s.width*m):((g||"%"===l)&&(f.position=oo(t,"position")),i===t&&(f.position="static"),i.appendChild(Ma),o=Ma[h],i.removeChild(Ma),f.position="absolute",d&&g&&((s=On(i)).time=Br.time,s.width=i[h]),Mn(v?o*c/m:o&&c?m/o*c:0))):(o=u?t.getBBox()[d?"width":"height"]:t[h],Mn(g?c/o*m:c/100*o)))},yo=function(e,t,n,r){var a;return Da||uo(),t in Ua&&"transform"!==t&&~(t=Ua[t]).indexOf(",")&&(t=t.split(",")[0]),ja[t]&&"transform"!==t?(a=Oo(e,r),a="transformOrigin"!==t?a[t]:a.svg?a.origin:Ao(oo(e,ro))+" "+a.zOrigin+"px"):(!(a=e.style[t])||"auto"===a||r||~(a+"").indexOf("calc("))&&(a=So[t]&&So[t](e,t,n)||oo(e,t)||An(e,t)||("opacity"===t?1:0)),n&&!~(a+"").trim().indexOf(" ")?go(e,t,a,n)+n:a},bo=function(e,t,n,r){if(!n||"none"===n){var a=so(t,e,1),o=a&&oo(e,a,1);o&&o!==n?(t=a,n=o):"borderColor"===t&&(n=oo(e,"borderTopColor"))}var i,s,u,c,l,f,d,p,h,m,v,g,y=new _a(this._pt,e.style,t,0,1,ya),b=0,x=0;if(y.b=n,y.e=r,n+="","auto"===(r+="")&&(e.style[t]=r,r=oo(e,t)||r,e.style[t]=n),Lr(i=[n,r]),r=i[1],u=(n=i[0]).match(cn)||[],(r.match(cn)||[]).length){for(;s=cn.exec(r);)d=s[0],h=r.substring(b,s.index),l?l=(l+1)%5:"rgba("!==h.substr(-5)&&"hsla("!==h.substr(-5)||(l=1),d!==(f=u[x++]||"")&&(c=parseFloat(f)||0,v=f.substr((c+"").length),(g="="===d.charAt(1)?+(d.charAt(0)+"1"):0)&&(d=d.substr(2)),p=parseFloat(d),m=d.substr((p+"").length),b=cn.lastIndex-m.length,m||(m=m||zt.units[t]||v,b===r.length&&(r+=m,y.e+=m)),v!==m&&(c=go(e,t,f,m)||0),y._pt={_next:y._pt,p:h||1===x?h:",",s:c,c:g?g*p:p-c,m:l&&l<4||"zIndex"===t?Math.round:0});y.c=b<r.length?r.substring(b,r.length):""}else y.r="display"===t&&"none"===r?Xa:Ka;return fn.test(r)&&(y.e=0),this._pt=y,y},xo={top:"0%",bottom:"100%",left:"0%",right:"100%",center:"50%"},wo=function(e){var t=e.split(" "),n=t[0],r=t[1]||"50%";return"top"!==n&&"bottom"!==n&&"left"!==r&&"right"!==r||(e=n,n=r,r=e),t[0]=xo[n]||n,t[1]=xo[r]||r,t.join(" ")},ko=function(e,t){if(t.tween&&t.tween._time===t.tween._dur){var n,r,a,o=t.t,i=o.style,s=t.u,u=o._gsap;if("all"===s||!0===s)i.cssText="",r=1;else for(a=(s=s.split(",")).length;--a>-1;)n=s[a],ja[n]&&(r=1,n="transformOrigin"===n?ro:no),ho(o,n);r&&(ho(o,no),u&&(u.svg&&o.removeAttribute("transform"),Oo(o,1),u.uncache=1))}},So={clearProps:function(e,t,n,r,a){if("isFromStart"!==a.data){var o=e._pt=new _a(e._pt,t,n,0,0,ko);return o.u=r,o.pr=-10,o.tween=a,e._props.push(n),1}}},_o=[1,0,0,1,0,0],No={},Eo=function(e){return"matrix(1, 0, 0, 1, 0, 0)"===e||"none"===e||!e},Co=function(e){var t=oo(e,no);return Eo(t)?_o:t.substr(7).match(un).map(Mn)},To=function(e,t){var n,r,a,o,i=e._gsap||On(e),s=e.style,u=Co(e);return i.svg&&e.getAttribute("transform")?"1,0,0,1,0,0"===(u=[(a=e.transform.baseVal.consolidate().matrix).a,a.b,a.c,a.d,a.e,a.f]).join(",")?_o:u:(u!==_o||e.offsetParent||e===Aa||i.svg||(a=s.display,s.display="block",(n=e.parentNode)&&e.offsetParent||(o=1,r=e.nextSibling,Aa.appendChild(e)),u=Co(e),a?s.display=a:ho(e,"display"),o&&(r?n.insertBefore(e,r):n?n.appendChild(e):Aa.removeChild(e))),t&&u.length>6?[u[0],u[1],u[4],u[5],u[12],u[13]]:u)},Io=function(e,t,n,r,a,o){var i,s,u,c=e._gsap,l=a||To(e,!0),f=c.xOrigin||0,d=c.yOrigin||0,p=c.xOffset||0,h=c.yOffset||0,m=l[0],v=l[1],g=l[2],y=l[3],b=l[4],x=l[5],w=t.split(" "),k=parseFloat(w[0])||0,S=parseFloat(w[1])||0;n?l!==_o&&(s=m*y-v*g)&&(u=k*(-v/s)+S*(m/s)-(m*x-v*b)/s,k=k*(y/s)+S*(-g/s)+(g*x-y*b)/s,S=u):(k=(i=fo(e)).x+(~w[0].indexOf("%")?k/100*i.width:k),S=i.y+(~(w[1]||w[0]).indexOf("%")?S/100*i.height:S)),r||!1!==r&&c.smooth?(b=k-f,x=S-d,c.xOffset=p+(b*m+x*g)-b,c.yOffset=h+(b*v+x*y)-x):c.xOffset=c.yOffset=0,c.xOrigin=k,c.yOrigin=S,c.smooth=!!r,c.origin=t,c.originIsAbsolute=!!n,e.style[ro]="0px 0px",o&&(mo(o,c,"xOrigin",f,k),mo(o,c,"yOrigin",d,S),mo(o,c,"xOffset",p,c.xOffset),mo(o,c,"yOffset",h,c.yOffset)),e.setAttribute("data-svg-origin",k+" "+S)},Oo=function(e,t){var n=e._gsap||new Jr(e);if("x"in n&&!t&&!n.uncache)return n;var r,a,o,i,s,u,c,l,f,d,p,h,m,v,g,y,b,x,w,k,S,_,N,E,C,T,I,O,A,D,M,R,P=e.style,j=n.scaleX<0,F="px",L="deg",B=oo(e,ro)||"0";return r=a=o=u=c=l=f=d=p=0,i=s=1,n.svg=!(!e.getCTM||!po(e)),v=To(e,n.svg),n.svg&&(E=(!n.uncache||"0px 0px"===B)&&!t&&e.getAttribute("data-svg-origin"),Io(e,E||B,!!E||n.originIsAbsolute,!1!==n.smooth,v)),h=n.xOrigin||0,m=n.yOrigin||0,v!==_o&&(x=v[0],w=v[1],k=v[2],S=v[3],r=_=v[4],a=N=v[5],6===v.length?(i=Math.sqrt(x*x+w*w),s=Math.sqrt(S*S+k*k),u=x||w?Ba(w,x)*Fa:0,(f=k||S?Ba(k,S)*Fa+u:0)&&(s*=Math.abs(Math.cos(f*La))),n.svg&&(r-=h-(h*x+m*k),a-=m-(h*w+m*S))):(R=v[6],D=v[7],I=v[8],O=v[9],A=v[10],M=v[11],r=v[12],a=v[13],o=v[14],c=(g=Ba(R,A))*Fa,g&&(E=_*(y=Math.cos(-g))+I*(b=Math.sin(-g)),C=N*y+O*b,T=R*y+A*b,I=_*-b+I*y,O=N*-b+O*y,A=R*-b+A*y,M=D*-b+M*y,_=E,N=C,R=T),l=(g=Ba(-k,A))*Fa,g&&(y=Math.cos(-g),M=S*(b=Math.sin(-g))+M*y,x=E=x*y-I*b,w=C=w*y-O*b,k=T=k*y-A*b),u=(g=Ba(w,x))*Fa,g&&(E=x*(y=Math.cos(g))+w*(b=Math.sin(g)),C=_*y+N*b,w=w*y-x*b,N=N*y-_*b,x=E,_=C),c&&Math.abs(c)+Math.abs(u)>359.9&&(c=u=0,l=180-l),i=Mn(Math.sqrt(x*x+w*w+k*k)),s=Mn(Math.sqrt(N*N+R*R)),g=Ba(_,N),f=Math.abs(g)>2e-4?g*Fa:0,p=M?1/(M<0?-M:M):0),n.svg&&(E=e.getAttribute("transform"),n.forceCSS=e.setAttribute("transform","")||!Eo(oo(e,no)),E&&e.setAttribute("transform",E))),Math.abs(f)>90&&Math.abs(f)<270&&(j?(i*=-1,f+=u<=0?180:-180,u+=u<=0?180:-180):(s*=-1,f+=f<=0?180:-180)),n.x=r-((n.xPercent=r&&(n.xPercent||(Math.round(e.offsetWidth/2)===Math.round(-r)?-50:0)))?e.offsetWidth*n.xPercent/100:0)+F,n.y=a-((n.yPercent=a&&(n.yPercent||(Math.round(e.offsetHeight/2)===Math.round(-a)?-50:0)))?e.offsetHeight*n.yPercent/100:0)+F,n.z=o+F,n.scaleX=Mn(i),n.scaleY=Mn(s),n.rotation=Mn(u)+L,n.rotationX=Mn(c)+L,n.rotationY=Mn(l)+L,n.skewX=f+L,n.skewY=d+L,n.transformPerspective=p+F,(n.zOrigin=parseFloat(B.split(" ")[2])||0)&&(P[ro]=Ao(B)),n.xOffset=n.yOffset=0,n.force3D=zt.force3D,n.renderTransform=n.svg?Lo:Pa?Fo:Mo,n.uncache=0,n},Ao=function(e){return(e=e.split(" "))[0]+" "+e[1]},Do=function(e,t,n){var r=hr(t);return Mn(parseFloat(t)+parseFloat(go(e,"x",n+"px",r)))+r},Mo=function(e,t){t.z="0px",t.rotationY=t.rotationX="0deg",t.force3D=0,Fo(e,t)},Ro="0deg",Po="0px",jo=") ",Fo=function(e,t){var n=t||this,r=n.xPercent,a=n.yPercent,o=n.x,i=n.y,s=n.z,u=n.rotation,c=n.rotationY,l=n.rotationX,f=n.skewX,d=n.skewY,p=n.scaleX,h=n.scaleY,m=n.transformPerspective,v=n.force3D,g=n.target,y=n.zOrigin,b="",x="auto"===v&&e&&1!==e||!0===v;if(y&&(l!==Ro||c!==Ro)){var w,k=parseFloat(c)*La,S=Math.sin(k),_=Math.cos(k);k=parseFloat(l)*La,w=Math.cos(k),o=Do(g,o,S*w*-y),i=Do(g,i,-Math.sin(k)*-y),s=Do(g,s,_*w*-y+y)}m!==Po&&(b+="perspective("+m+jo),(r||a)&&(b+="translate("+r+"%, "+a+"%) "),(x||o!==Po||i!==Po||s!==Po)&&(b+=s!==Po||x?"translate3d("+o+", "+i+", "+s+") ":"translate("+o+", "+i+jo),u!==Ro&&(b+="rotate("+u+jo),c!==Ro&&(b+="rotateY("+c+jo),l!==Ro&&(b+="rotateX("+l+jo),f===Ro&&d===Ro||(b+="skew("+f+", "+d+jo),1===p&&1===h||(b+="scale("+p+", "+h+jo),g.style[no]=b||"translate(0, 0)"},Lo=function(e,t){var n,r,a,o,i,s=t||this,u=s.xPercent,c=s.yPercent,l=s.x,f=s.y,d=s.rotation,p=s.skewX,h=s.skewY,m=s.scaleX,v=s.scaleY,g=s.target,y=s.xOrigin,b=s.yOrigin,x=s.xOffset,w=s.yOffset,k=s.forceCSS,S=parseFloat(l),_=parseFloat(f);d=parseFloat(d),p=parseFloat(p),(h=parseFloat(h))&&(p+=h=parseFloat(h),d+=h),d||p?(d*=La,p*=La,n=Math.cos(d)*m,r=Math.sin(d)*m,a=Math.sin(d-p)*-v,o=Math.cos(d-p)*v,p&&(h*=La,i=Math.tan(p-h),a*=i=Math.sqrt(1+i*i),o*=i,h&&(i=Math.tan(h),n*=i=Math.sqrt(1+i*i),r*=i)),n=Mn(n),r=Mn(r),a=Mn(a),o=Mn(o)):(n=m,o=v,r=a=0),(S&&!~(l+"").indexOf("px")||_&&!~(f+"").indexOf("px"))&&(S=go(g,"x",l,"px"),_=go(g,"y",f,"px")),(y||b||x||w)&&(S=Mn(S+y-(y*n+b*a)+x),_=Mn(_+b-(y*r+b*o)+w)),(u||c)&&(i=g.getBBox(),S=Mn(S+u/100*i.width),_=Mn(_+c/100*i.height)),i="matrix("+n+","+r+","+a+","+o+","+S+","+_+")",g.setAttribute("transform",i),k&&(g.style[no]=i)},Bo=function(e,t,n,r,a,o){var i,s,u=360,c=Yt(a),l=parseFloat(a)*(c&&~a.indexOf("rad")?Fa:1),f=o?l*o:l-r,d=r+f+"deg";return c&&("short"===(i=a.split("_")[1])&&(f%=u)!==f%180&&(f+=f<0?u:-360),"cw"===i&&f<0?f=(f+36e9)%u-~~(f/u)*u:"ccw"===i&&f>0&&(f=(f-36e9)%u-~~(f/u)*u)),e._pt=s=new _a(e._pt,t,n,r,f,Wa),s.e=d,s.u="deg",e._props.push(n),s},zo=function(e,t){for(var n in t)e[n]=t[n];return e},Zo=function(e,t,n){var r,a,o,i,s,u,c,l=zo({},n._gsap),f=n.style;for(a in l.svg?(o=n.getAttribute("transform"),n.setAttribute("transform",""),f[no]=t,r=Oo(n,1),ho(n,no),n.setAttribute("transform",o)):(o=getComputedStyle(n)[no],f[no]=t,r=Oo(n,1),f[no]=o),ja)(o=l[a])!==(i=r[a])&&"perspective,force3D,transformOrigin,svgOrigin".indexOf(a)<0&&(s=hr(o)!==(c=hr(i))?go(n,a,o,c):parseFloat(o),u=parseFloat(i),e._pt=new _a(e._pt,r,a,s,u-s,qa),e._pt.u=c||0,e._props.push(a));zo(r,l)};Dn("padding,margin,Width,Radius",(function(e,t){var n="Top",r="Right",a="Bottom",o="Left",i=(t<3?[n,r,a,o]:[n+o,n+r,a+r,a+o]).map((function(n){return t<2?e+n:"border"+n+e}));So[t>1?"border"+e:e]=function(e,t,n,r,a){var o,s;if(arguments.length<4)return o=i.map((function(t){return yo(e,t,n)})),5===(s=o.join(" ")).split(o[0]).length?o[0]:s;o=(r+"").split(" "),s={},i.forEach((function(e,t){return s[e]=o[t]=o[t]||o[(t-1)/2|0]})),e.init(t,s,a)}}));var Vo={name:"css",register:uo,targetTest:function(e){return e.style&&e.nodeType},init:function(e,t,n,r,a){var o,i,s,u,c,l,f,d,p,h,m,v,g,y,b,x=this._props,w=e.style,k=n.vars.startAt;for(f in Da||uo(),t)if("autoRound"!==f&&(i=t[f],!_n[f]||!aa(f,t,n,r,e,a)))if(c=typeof i,l=So[f],"function"===c&&(c=typeof(i=i.call(n,r,e,a))),"string"===c&&~i.indexOf("random(")&&(i=_r(i)),l)l(this,e,f,i,n)&&(b=1);else if("--"===f.substr(0,2))o=(getComputedStyle(e).getPropertyValue(f)+"").trim(),i+="",jr.lastIndex=0,jr.test(o)||(d=hr(o),p=hr(i)),p?d!==p&&(o=go(e,f,o,p)+p):d&&(i+=d),this.add(w,"setProperty",o,i,r,a,0,0,f),x.push(f);else if("undefined"!==c){if(k&&f in k?(o="function"===typeof k[f]?k[f].call(n,r,e,a):k[f],Yt(o)&&~o.indexOf("random(")&&(o=_r(o)),hr(o+"")||(o+=zt.units[f]||hr(yo(e,f))||""),"="===(o+"").charAt(1)&&(o=yo(e,f))):o=yo(e,f),u=parseFloat(o),(h="string"===c&&"="===i.charAt(1)?+(i.charAt(0)+"1"):0)&&(i=i.substr(2)),s=parseFloat(i),f in Ua&&("autoAlpha"===f&&(1===u&&"hidden"===yo(e,"visibility")&&s&&(u=0),mo(this,w,"visibility",u?"inherit":"hidden",s?"inherit":"hidden",!s)),"scale"!==f&&"transform"!==f&&~(f=Ua[f]).indexOf(",")&&(f=f.split(",")[0])),m=f in ja)if(v||((g=e._gsap).renderTransform&&!t.parseTransform||Oo(e,t.parseTransform),y=!1!==t.smoothOrigin&&g.smooth,(v=this._pt=new _a(this._pt,w,no,0,1,g.renderTransform,g,0,-1)).dep=1),"scale"===f)this._pt=new _a(this._pt,g,"scaleY",g.scaleY,(h?h*s:s-g.scaleY)||0),x.push("scaleY",f),f+="X";else{if("transformOrigin"===f){i=wo(i),g.svg?Io(e,i,0,y,0,this):((p=parseFloat(i.split(" ")[2])||0)!==g.zOrigin&&mo(this,g,"zOrigin",g.zOrigin,p),mo(this,w,f,Ao(o),Ao(i)));continue}if("svgOrigin"===f){Io(e,i,1,y,0,this);continue}if(f in No){Bo(this,g,f,u,i,h);continue}if("smoothOrigin"===f){mo(this,g,"smooth",g.smooth,i);continue}if("force3D"===f){g[f]=i;continue}if("transform"===f){Zo(this,i,e);continue}}else f in w||(f=so(f)||f);if(m||(s||0===s)&&(u||0===u)&&!Va.test(i)&&f in w)s||(s=0),(d=(o+"").substr((u+"").length))!==(p=hr(i)||(f in zt.units?zt.units[f]:d))&&(u=go(e,f,o,p)),this._pt=new _a(this._pt,m?g:w,f,u,h?h*s:s-u,m||"px"!==p&&"zIndex"!==f||!1===t.autoRound?qa:Ga),this._pt.u=p||0,d!==p&&"%"!==p&&(this._pt.b=o,this._pt.r=Ha);else if(f in w)bo.call(this,e,f,o,i);else{if(!(f in e)){gn(f,i);continue}this.add(e,f,o||e[f],i,r,a)}x.push(f)}b&&Sa(this)},get:yo,aliases:Ua,getSetter:function(e,t,n){var r=Ua[t];return r&&r.indexOf(",")<0&&(t=r),t in ja&&t!==ro&&(e._gsap.x||yo(e,"x"))?n&&Ra===n?"scale"===t?Qa:Ja:(Ra=n||{})&&("scale"===t?eo:to):e.style&&!Qt(e.style[t])?Ya:~t.indexOf("-")?$a:ma(e,t)},core:{_removeProperty:ho,_getMatrix:To}};Ta.utils.checkPrefix=so,function(e,t,n,r){var a=Dn(e+","+t+",transform,transformOrigin,svgOrigin,force3D,smoothOrigin,transformPerspective",(function(e){ja[e]=1}));Dn(t,(function(e){zt.units[e]="deg",No[e]=1})),Ua[a[13]]=e+","+t,Dn("0:translateX,1:translateY,2:translateZ,8:rotate,8:rotationZ,8:rotateZ,9:rotateX,10:rotateY",(function(e){var t=e.split(":");Ua[t[1]]=a[t[0]]}))}("x,y,z,scale,scaleX,scaleY,xPercent,yPercent","rotation,rotationX,rotationY,skewX,skewY"),Dn("x,y,z,top,right,bottom,left,width,height,fontSize,padding,margin,perspective",(function(e){zt.units[e]="px"})),Ta.registerPlugin(Vo);var Uo,qo,Wo,Ho=Ta.registerPlugin(Vo)||Ta,Go=(Ho.core.Tween,n(6059)),Ko=n.n(Go);function Xo(){return Xo=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Xo.apply(this,arguments)}function Yo(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}function $o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Jo(e,t){var n;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"===typeof e)return $o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?$o(e,t):void 0}}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0;return function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(n=e[Symbol.iterator]()).next.bind(n)}function Qo(e,t){if(e in t){for(var n=t[e],r=arguments.length,a=new Array(r>2?r-2:0),o=2;o<r;o++)a[o-2]=arguments[o];return"function"===typeof n?n.apply(void 0,a):n}var i=new Error('Tried to handle "'+e+'" but there is no handler defined. Only defined handlers are: '+Object.keys(t).map((function(e){return'"'+e+'"'})).join(", ")+".");throw Error.captureStackTrace&&Error.captureStackTrace(i,Qo),i}function ei(e){var t=e.props,n=e.slot,r=e.defaultTag,a=e.features,o=e.visible,i=void 0===o||o,s=e.name;if(i)return ti(t,n,r,s);var u=null!=a?a:Uo.None;if(u&Uo.Static){var c=t.static,l=void 0!==c&&c,f=Yo(t,["static"]);if(l)return ti(f,n,r,s)}if(u&Uo.RenderStrategy){var d,p=t.unmount,h=void 0===p||p,m=Yo(t,["unmount"]);return Qo(h?qo.Unmount:qo.Hidden,((d={})[qo.Unmount]=function(){return null},d[qo.Hidden]=function(){return ti(Xo({},m,{hidden:!0,style:{display:"none"}}),n,r,s)},d))}return ti(t,n,r,s)}function ti(t,n,r,a){var o;void 0===n&&(n={});var i=ri(t,["unmount","static"]),s=i.as,u=void 0===s?r:s,c=i.children,l=i.refName,f=void 0===l?"ref":l,d=Yo(i,["as","children","refName"]),p=void 0!==t.ref?((o={})[f]=t.ref,o):{},h="function"===typeof c?c(n):c;if(d.className&&"function"===typeof d.className&&(d.className=d.className(n)),u===e.Fragment&&Object.keys(d).length>0){if(!(0,e.isValidElement)(h)||Array.isArray(h)&&h.length>1)throw new Error(['Passing props on "Fragment"!',"","The current component <"+a+' /> is rendering a "Fragment".',"However we need to passthrough the following props:",Object.keys(d).map((function(e){return"  - "+e})).join("\n"),"","You can apply a few solutions:",['Add an `as="..."` prop, to ensure that we render an actual element instead of a "Fragment".',"Render a single element as the child so that we can forward the props onto that element."].map((function(e){return"  - "+e})).join("\n")].join("\n"));return(0,e.cloneElement)(h,Object.assign({},function(e,t,n){for(var r,a=Object.assign({},e),o=function(){var n,o=r.value;void 0!==e[o]&&void 0!==t[o]&&Object.assign(a,((n={})[o]=function(n){n.defaultPrevented||e[o](n),n.defaultPrevented||t[o](n)},n))},i=Jo(n);!(r=i()).done;)o();return a}(function(e){var t=Object.assign({},e);for(var n in t)void 0===t[n]&&delete t[n];return t}(ri(d,["ref"])),h.props,["onClick"]),p))}return(0,e.createElement)(u,Object.assign({},ri(d,["ref"]),u!==e.Fragment&&p),h)}function ni(t){var n;return Object.assign((0,e.forwardRef)(t),{displayName:null!=(n=t.displayName)?n:t.name})}function ri(e,t){void 0===t&&(t=[]);for(var n,r=Object.assign({},e),a=Jo(t);!(n=a()).done;){var o=n.value;o in r&&delete r[o]}return r}function ai(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var a=(0,e.useRef)(n);return(0,e.useEffect)((function(){a.current=n}),[n]),(0,e.useCallback)((function(e){for(var t,n=Jo(a.current);!(t=n()).done;){var r=t.value;null!=r&&("function"===typeof r?r(e):r.current=e)}}),[a])}function oi(e){for(var t,n,r=e.parentElement,a=null;r&&!(r instanceof HTMLFieldSetElement);)r instanceof HTMLLegendElement&&(a=r),r=r.parentElement;var o=null!=(t=""===(null==(n=r)?void 0:n.getAttribute("disabled")))&&t;return(!o||!function(e){if(!e)return!1;var t=e.previousElementSibling;for(;null!==t;){if(t instanceof HTMLLegendElement)return!1;t=t.previousElementSibling}return!0}(a))&&o}!function(e){e[e.None=0]="None",e[e.RenderStrategy=1]="RenderStrategy",e[e.Static=2]="Static"}(Uo||(Uo={})),function(e){e[e.Unmount=0]="Unmount",e[e.Hidden=1]="Hidden"}(qo||(qo={})),function(e){e.Space=" ",e.Enter="Enter",e.Escape="Escape",e.Backspace="Backspace",e.ArrowLeft="ArrowLeft",e.ArrowUp="ArrowUp",e.ArrowRight="ArrowRight",e.ArrowDown="ArrowDown",e.Home="Home",e.End="End",e.PageUp="PageUp",e.PageDown="PageDown",e.Tab="Tab"}(Wo||(Wo={}));var ii="undefined"!==typeof window?e.useLayoutEffect:e.useEffect,si={serverHandoffComplete:!1};function ui(){var t=(0,e.useState)(si.serverHandoffComplete),n=t[0],r=t[1];return(0,e.useEffect)((function(){!0!==n&&r(!0)}),[n]),(0,e.useEffect)((function(){!1===si.serverHandoffComplete&&(si.serverHandoffComplete=!0)}),[]),n}var ci=0;function li(){return++ci}function fi(){var t=ui(),n=(0,e.useState)(t?li:null),r=n[0],a=n[1];return ii((function(){null===r&&a(li())}),[r]),null!=r?""+r:void 0}var di,pi,hi,mi,vi=["[contentEditable=true]","[tabindex]","a[href]","area[href]","button:not([disabled])","iframe","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].map((function(e){return e+":not([tabindex='-1'])"})).join(",");!function(e){e[e.First=1]="First",e[e.Previous=2]="Previous",e[e.Next=4]="Next",e[e.Last=8]="Last",e[e.WrapAround=16]="WrapAround",e[e.NoScroll=32]="NoScroll"}(di||(di={})),function(e){e[e.Error=0]="Error",e[e.Overflow=1]="Overflow",e[e.Success=2]="Success",e[e.Underflow=3]="Underflow"}(pi||(pi={})),function(e){e[e.Previous=-1]="Previous",e[e.Next=1]="Next"}(hi||(hi={})),function(e){e[e.Strict=0]="Strict",e[e.Loose=1]="Loose"}(mi||(mi={}));var gi,yi,bi,xi,wi,ki=(0,e.createContext)(null);function Si(){return(0,e.useContext)(ki)}function _i(t){var n=t.value,r=t.children;return e.createElement(ki.Provider,{value:n},r)}function Ni(e){var t;if(e.type)return e.type;var n=null!=(t=e.as)?t:"button";return"string"===typeof n&&"button"===n.toLowerCase()?"button":void 0}function Ei(t,n){var r=(0,e.useState)((function(){return Ni(t)})),a=r[0],o=r[1];return ii((function(){o(Ni(t))}),[t.type,t.as]),ii((function(){a||n.current&&n.current instanceof HTMLButtonElement&&!n.current.hasAttribute("type")&&o("button")}),[a,n]),a}function Ci(){var e=[],t={requestAnimationFrame:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){var e=requestAnimationFrame.apply(void 0,arguments);t.add((function(){return cancelAnimationFrame(e)}))})),nextFrame:function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];t.requestAnimationFrame((function(){t.requestAnimationFrame.apply(t,n)}))},setTimeout:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){var e=setTimeout.apply(void 0,arguments);t.add((function(){return clearTimeout(e)}))})),add:function(t){e.push(t)},dispose:function(){for(var t,n=Jo(e.splice(0));!(t=n()).done;){var r=t.value;r()}}};return t}function Ti(){var t=(0,e.useState)(Ci)[0];return(0,e.useEffect)((function(){return function(){return t.dispose()}}),[t]),t}function Ii(t,n){var r=(0,e.useState)(t),a=r[0],o=r[1],i=(0,e.useRef)(t);return ii((function(){i.current=t}),[t]),ii((function(){return o(i.current)}),[i,o].concat(n)),a}function Oi(e,t){var n=t.resolveItems();if(n.length<=0)return null;var r=t.resolveActiveIndex(),a=null!=r?r:-1,o=function(){switch(e.focus){case yi.First:return n.findIndex((function(e){return!t.resolveDisabled(e)}));case yi.Previous:var r=n.slice().reverse().findIndex((function(e,n,r){return!(-1!==a&&r.length-n-1>=a)&&!t.resolveDisabled(e)}));return-1===r?r:n.length-1-r;case yi.Next:return n.findIndex((function(e,n){return!(n<=a)&&!t.resolveDisabled(e)}));case yi.Last:var o=n.slice().reverse().findIndex((function(e){return!t.resolveDisabled(e)}));return-1===o?o:n.length-1-o;case yi.Specific:return n.findIndex((function(n){return t.resolveId(n)===e.id}));case yi.Nothing:return null;default:!function(e){throw new Error("Unexpected object: "+e)}(e)}}();return-1===o?r:o}ki.displayName="OpenClosedContext",function(e){e[e.Open=0]="Open",e[e.Closed=1]="Closed"}(gi||(gi={})),function(e){e[e.First=0]="First",e[e.Previous=1]="Previous",e[e.Next=2]="Next",e[e.Last=3]="Last",e[e.Specific=4]="Specific",e[e.Nothing=5]="Nothing"}(yi||(yi={})),function(e){e[e.Open=0]="Open",e[e.Closed=1]="Closed"}(xi||(xi={})),function(e){e[e.OpenListbox=0]="OpenListbox",e[e.CloseListbox=1]="CloseListbox",e[e.SetDisabled=2]="SetDisabled",e[e.SetOrientation=3]="SetOrientation",e[e.GoToOption=4]="GoToOption",e[e.Search=5]="Search",e[e.ClearSearch=6]="ClearSearch",e[e.RegisterOption=7]="RegisterOption",e[e.UnregisterOption=8]="UnregisterOption"}(wi||(wi={}));var Ai=((bi={})[wi.CloseListbox]=function(e){return e.disabled||e.listboxState===xi.Closed?e:Xo({},e,{activeOptionIndex:null,listboxState:xi.Closed})},bi[wi.OpenListbox]=function(e){return e.disabled||e.listboxState===xi.Open?e:Xo({},e,{listboxState:xi.Open})},bi[wi.SetDisabled]=function(e,t){return e.disabled===t.disabled?e:Xo({},e,{disabled:t.disabled})},bi[wi.SetOrientation]=function(e,t){return e.orientation===t.orientation?e:Xo({},e,{orientation:t.orientation})},bi[wi.GoToOption]=function(e,t){if(e.disabled)return e;if(e.listboxState===xi.Closed)return e;var n=Oi(t,{resolveItems:function(){return e.options},resolveActiveIndex:function(){return e.activeOptionIndex},resolveId:function(e){return e.id},resolveDisabled:function(e){return e.dataRef.current.disabled}});return""===e.searchQuery&&e.activeOptionIndex===n?e:Xo({},e,{searchQuery:"",activeOptionIndex:n})},bi[wi.Search]=function(e,t){if(e.disabled)return e;if(e.listboxState===xi.Closed)return e;var n=e.searchQuery+t.value.toLowerCase(),r=e.options.findIndex((function(e){var t;return!e.dataRef.current.disabled&&(null==(t=e.dataRef.current.textValue)?void 0:t.startsWith(n))}));return-1===r||r===e.activeOptionIndex?Xo({},e,{searchQuery:n}):Xo({},e,{searchQuery:n,activeOptionIndex:r})},bi[wi.ClearSearch]=function(e){return e.disabled||e.listboxState===xi.Closed||""===e.searchQuery?e:Xo({},e,{searchQuery:""})},bi[wi.RegisterOption]=function(e,t){return Xo({},e,{options:[].concat(e.options,[{id:t.id,dataRef:t.dataRef}])})},bi[wi.UnregisterOption]=function(e,t){var n=e.options.slice(),r=null!==e.activeOptionIndex?n[e.activeOptionIndex]:null,a=n.findIndex((function(e){return e.id===t.id}));return-1!==a&&n.splice(a,1),Xo({},e,{options:n,activeOptionIndex:a===e.activeOptionIndex||null===r?null:n.indexOf(r)})},bi),Di=(0,e.createContext)(null);function Mi(t){var n=(0,e.useContext)(Di);if(null===n){var r=new Error("<"+t+" /> is missing a parent <"+ji.name+" /> component.");throw Error.captureStackTrace&&Error.captureStackTrace(r,Mi),r}return n}function Ri(e,t){return Qo(t.type,Ai,e,t)}Di.displayName="ListboxContext";var Pi=e.Fragment;function ji(t){var n,r=t.value,a=t.onChange,o=t.disabled,i=void 0!==o&&o,s=t.horizontal,u=void 0!==s&&s,c=Yo(t,["value","onChange","disabled","horizontal"]),l=u?"horizontal":"vertical",f=(0,e.useReducer)(Ri,{listboxState:xi.Closed,propsRef:{current:{value:r,onChange:a}},labelRef:(0,e.createRef)(),buttonRef:(0,e.createRef)(),optionsRef:(0,e.createRef)(),disabled:i,orientation:l,options:[],searchQuery:"",activeOptionIndex:null}),d=f[0],p=d.listboxState,h=d.propsRef,m=d.optionsRef,v=d.buttonRef,g=f[1];ii((function(){h.current.value=r}),[r,h]),ii((function(){h.current.onChange=a}),[a,h]),ii((function(){return g({type:wi.SetDisabled,disabled:i})}),[i]),ii((function(){return g({type:wi.SetOrientation,orientation:l})}),[l]),function(t,n,r){var a=(0,e.useRef)(n);a.current=n,(0,e.useEffect)((function(){function e(e){a.current.call(window,e)}return window.addEventListener(t,e,r),function(){return window.removeEventListener(t,e,r)}}),[t,r])}("mousedown",(function(e){var t,n,r,a=e.target;p===xi.Open&&((null==(t=v.current)?void 0:t.contains(a))||(null==(n=m.current)?void 0:n.contains(a))||(g({type:wi.CloseListbox}),function(e,t){var n;return void 0===t&&(t=mi.Strict),e!==document.body&&Qo(t,((n={})[mi.Strict]=function(){return e.matches(vi)},n[mi.Loose]=function(){for(var t=e;null!==t;){if(t.matches(vi))return!0;t=t.parentElement}return!1},n))}(a,mi.Loose)||(e.preventDefault(),null==(r=v.current)||r.focus())))}));var y=(0,e.useMemo)((function(){return{open:p===xi.Open,disabled:i}}),[p,i]);return e.createElement(Di.Provider,{value:f},e.createElement(_i,{value:Qo(p,(n={},n[xi.Open]=gi.Open,n[xi.Closed]=gi.Closed,n))},ei({props:c,slot:y,defaultTag:Pi,name:"Listbox"})))}var Fi=ni((function t(n,r){var a,o=Mi([ji.name,t.name].join(".")),i=o[0],s=o[1],u=ai(i.buttonRef,r),c="headlessui-listbox-button-"+fi(),l=Ti(),f=(0,e.useCallback)((function(e){switch(e.key){case Wo.Space:case Wo.Enter:case Wo.ArrowDown:e.preventDefault(),s({type:wi.OpenListbox}),l.nextFrame((function(){i.propsRef.current.value||s({type:wi.GoToOption,focus:yi.First})}));break;case Wo.ArrowUp:e.preventDefault(),s({type:wi.OpenListbox}),l.nextFrame((function(){i.propsRef.current.value||s({type:wi.GoToOption,focus:yi.Last})}))}}),[s,i,l]),d=(0,e.useCallback)((function(e){if(e.key===Wo.Space)e.preventDefault()}),[]),p=(0,e.useCallback)((function(e){if(oi(e.currentTarget))return e.preventDefault();i.listboxState===xi.Open?(s({type:wi.CloseListbox}),l.nextFrame((function(){var e;return null==(e=i.buttonRef.current)?void 0:e.focus({preventScroll:!0})}))):(e.preventDefault(),s({type:wi.OpenListbox}))}),[s,l,i]),h=Ii((function(){if(i.labelRef.current)return[i.labelRef.current.id,c].join(" ")}),[i.labelRef.current,c]),m=(0,e.useMemo)((function(){return{open:i.listboxState===xi.Open,disabled:i.disabled}}),[i]);return ei({props:Xo({},n,{ref:u,id:c,type:Ei(n,i.buttonRef),"aria-haspopup":!0,"aria-controls":null==(a=i.optionsRef.current)?void 0:a.id,"aria-expanded":i.disabled?void 0:i.listboxState===xi.Open,"aria-labelledby":h,disabled:i.disabled,onKeyDown:f,onKeyUp:d,onClick:p}),slot:m,defaultTag:"button",name:"Listbox.Button"})}));var Li,Bi=Uo.RenderStrategy|Uo.Static,zi=ni((function t(n,r){var a,o=Mi([ji.name,t.name].join(".")),i=o[0],s=o[1],u=ai(i.optionsRef,r),c="headlessui-listbox-options-"+fi(),l=Ti(),f=Ti(),d=Si(),p=null!==d?d===gi.Open:i.listboxState===xi.Open;ii((function(){var e=i.optionsRef.current;e&&i.listboxState===xi.Open&&e!==document.activeElement&&e.focus({preventScroll:!0})}),[i.listboxState,i.optionsRef]);var h=(0,e.useCallback)((function(e){switch(f.dispose(),e.key){case Wo.Space:if(""!==i.searchQuery)return e.preventDefault(),e.stopPropagation(),s({type:wi.Search,value:e.key});case Wo.Enter:if(e.preventDefault(),e.stopPropagation(),s({type:wi.CloseListbox}),null!==i.activeOptionIndex){var t=i.options[i.activeOptionIndex].dataRef;i.propsRef.current.onChange(t.current.value)}Ci().nextFrame((function(){var e;return null==(e=i.buttonRef.current)?void 0:e.focus({preventScroll:!0})}));break;case Qo(i.orientation,{vertical:Wo.ArrowDown,horizontal:Wo.ArrowRight}):return e.preventDefault(),e.stopPropagation(),s({type:wi.GoToOption,focus:yi.Next});case Qo(i.orientation,{vertical:Wo.ArrowUp,horizontal:Wo.ArrowLeft}):return e.preventDefault(),e.stopPropagation(),s({type:wi.GoToOption,focus:yi.Previous});case Wo.Home:case Wo.PageUp:return e.preventDefault(),e.stopPropagation(),s({type:wi.GoToOption,focus:yi.First});case Wo.End:case Wo.PageDown:return e.preventDefault(),e.stopPropagation(),s({type:wi.GoToOption,focus:yi.Last});case Wo.Escape:return e.preventDefault(),e.stopPropagation(),s({type:wi.CloseListbox}),l.nextFrame((function(){var e;return null==(e=i.buttonRef.current)?void 0:e.focus({preventScroll:!0})}));case Wo.Tab:e.preventDefault(),e.stopPropagation();break;default:1===e.key.length&&(s({type:wi.Search,value:e.key}),f.setTimeout((function(){return s({type:wi.ClearSearch})}),350))}}),[l,s,f,i]),m=Ii((function(){var e,t,n;return null!=(e=null==(t=i.labelRef.current)?void 0:t.id)?e:null==(n=i.buttonRef.current)?void 0:n.id}),[i.labelRef.current,i.buttonRef.current]),v=(0,e.useMemo)((function(){return{open:i.listboxState===xi.Open}}),[i]);return ei({props:Xo({},n,{"aria-activedescendant":null===i.activeOptionIndex||null==(a=i.options[i.activeOptionIndex])?void 0:a.id,"aria-labelledby":m,"aria-orientation":i.orientation,id:c,onKeyDown:h,role:"listbox",tabIndex:0,ref:u}),slot:v,defaultTag:"ul",features:Bi,visible:p,name:"Listbox.Options"})}));function Zi(e){for(var t,n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];e&&r.length>0&&(t=e.classList).add.apply(t,r)}function Vi(e){for(var t,n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];e&&r.length>0&&(t=e.classList).remove.apply(t,r)}function Ui(e,t,n,r,a,o){var i=Ci(),s=void 0!==o?function(e){var t={called:!1};return function(){if(!t.called)return t.called=!0,e.apply(void 0,arguments)}}(o):function(){};return Vi.apply(void 0,[e].concat(a)),Zi.apply(void 0,[e].concat(t,n)),i.nextFrame((function(){Vi.apply(void 0,[e].concat(n)),Zi.apply(void 0,[e].concat(r)),i.add(function(e,t){var n=Ci();if(!e)return n.dispose;var r=getComputedStyle(e),a=[r.transitionDuration,r.transitionDelay].map((function(e){var t=e.split(",").filter(Boolean).map((function(e){return e.includes("ms")?parseFloat(e):1e3*parseFloat(e)})).sort((function(e,t){return t-e})),n=t[0];return void 0===n?0:n})),o=a[0],i=a[1];return 0!==o?n.setTimeout((function(){t(Li.Finished)}),o+i):t(Li.Finished),n.add((function(){return t(Li.Cancelled)})),n.dispose}(e,(function(n){return Vi.apply(void 0,[e].concat(r,t)),Zi.apply(void 0,[e].concat(a)),s(n)})))})),i.add((function(){return Vi.apply(void 0,[e].concat(t,n,r,a))})),i.add((function(){return s(Li.Cancelled)})),i.dispose}function qi(t){return void 0===t&&(t=""),(0,e.useMemo)((function(){return t.split(" ").filter((function(e){return e.trim().length>1}))}),[t])}ji.Button=Fi,ji.Label=function t(n){var r=Mi([ji.name,t.name].join("."))[0],a="headlessui-listbox-label-"+fi(),o=(0,e.useCallback)((function(){var e;return null==(e=r.buttonRef.current)?void 0:e.focus({preventScroll:!0})}),[r.buttonRef]),i=(0,e.useMemo)((function(){return{open:r.listboxState===xi.Open,disabled:r.disabled}}),[r]);return ei({props:Xo({},n,{ref:r.labelRef,id:a,onClick:o}),slot:i,defaultTag:"label",name:"Listbox.Label"})},ji.Options=zi,ji.Option=function t(n){var r=n.disabled,a=void 0!==r&&r,o=n.value,i=Yo(n,["disabled","value"]),s=Mi([ji.name,t.name].join(".")),u=s[0],c=s[1],l="headlessui-listbox-option-"+fi(),f=null!==u.activeOptionIndex&&u.options[u.activeOptionIndex].id===l,d=u.propsRef.current.value===o,p=(0,e.useRef)({disabled:a,value:o});ii((function(){p.current.disabled=a}),[p,a]),ii((function(){p.current.value=o}),[p,o]),ii((function(){var e,t;p.current.textValue=null==(e=document.getElementById(l))||null==(t=e.textContent)?void 0:t.toLowerCase()}),[p,l]);var h=(0,e.useCallback)((function(){return u.propsRef.current.onChange(o)}),[u.propsRef,o]);ii((function(){return c({type:wi.RegisterOption,id:l,dataRef:p}),function(){return c({type:wi.UnregisterOption,id:l})}}),[p,l]),ii((function(){var e;u.listboxState===xi.Open&&d&&(c({type:wi.GoToOption,focus:yi.Specific,id:l}),null==(e=document.getElementById(l))||null==e.focus||e.focus())}),[u.listboxState]),ii((function(){if(u.listboxState===xi.Open&&f){var e=Ci();return e.nextFrame((function(){var e;return null==(e=document.getElementById(l))||null==e.scrollIntoView?void 0:e.scrollIntoView({block:"nearest"})})),e.dispose}}),[l,f,u.listboxState]);var m=(0,e.useCallback)((function(e){if(a)return e.preventDefault();h(),c({type:wi.CloseListbox}),Ci().nextFrame((function(){var e;return null==(e=u.buttonRef.current)?void 0:e.focus({preventScroll:!0})}))}),[c,u.buttonRef,a,h]),v=(0,e.useCallback)((function(){if(a)return c({type:wi.GoToOption,focus:yi.Nothing});c({type:wi.GoToOption,focus:yi.Specific,id:l})}),[a,l,c]),g=(0,e.useCallback)((function(){a||f||c({type:wi.GoToOption,focus:yi.Specific,id:l})}),[a,f,l,c]),y=(0,e.useCallback)((function(){a||f&&c({type:wi.GoToOption,focus:yi.Nothing})}),[a,f,c]),b=(0,e.useMemo)((function(){return{active:f,selected:d,disabled:a}}),[f,d,a]);return ei({props:Xo({},i,{id:l,role:"option",tabIndex:!0===a?void 0:-1,"aria-disabled":!0===a||void 0,"aria-selected":!0===d||void 0,disabled:void 0,onClick:m,onFocus:v,onPointerMove:g,onMouseMove:g,onPointerLeave:y,onMouseLeave:y}),slot:b,defaultTag:"li",name:"Listbox.Option"})},function(e){e.Finished="finished",e.Cancelled="cancelled"}(Li||(Li={}));var Wi,Hi=(0,e.createContext)(null);Hi.displayName="TransitionContext",function(e){e.Visible="visible",e.Hidden="hidden"}(Wi||(Wi={}));var Gi=(0,e.createContext)(null);function Ki(e){return"children"in e?Ki(e.children):e.current.filter((function(e){return e.state===Wi.Visible})).length>0}function Xi(t){var n=(0,e.useRef)(t),r=(0,e.useRef)([]),a=function(){var t=(0,e.useRef)(!1);return(0,e.useEffect)((function(){return t.current=!0,function(){t.current=!1}}),[]),t}();(0,e.useEffect)((function(){n.current=t}),[t]);var o=(0,e.useCallback)((function(e,t){var o;void 0===t&&(t=qo.Hidden);var i=r.current.findIndex((function(t){return t.id===e}));-1!==i&&(Qo(t,((o={})[qo.Unmount]=function(){r.current.splice(i,1)},o[qo.Hidden]=function(){r.current[i].state=Wi.Hidden},o)),!Ki(r)&&a.current&&(null==n.current||n.current()))}),[n,a,r]),i=(0,e.useCallback)((function(e){var t=r.current.find((function(t){return t.id===e}));return t?t.state!==Wi.Visible&&(t.state=Wi.Visible):r.current.push({id:e,state:Wi.Visible}),function(){return o(e,qo.Unmount)}}),[r,o]);return(0,e.useMemo)((function(){return{children:r,register:i,unregister:o}}),[i,o,r])}function Yi(){}Gi.displayName="NestingContext";var $i=["beforeEnter","afterEnter","beforeLeave","afterLeave"];function Ji(e){for(var t,n={},r=Jo($i);!(t=r()).done;){var a,o=t.value;n[o]=null!=(a=e[o])?a:Yi}return n}var Qi=Uo.RenderStrategy;function es(t){var n,r=t.beforeEnter,a=t.afterEnter,o=t.beforeLeave,i=t.afterLeave,s=t.enter,u=t.enterFrom,c=t.enterTo,l=t.entered,f=t.leave,d=t.leaveFrom,p=t.leaveTo,h=Yo(t,["beforeEnter","afterEnter","beforeLeave","afterLeave","enter","enterFrom","enterTo","entered","leave","leaveFrom","leaveTo"]),m=(0,e.useRef)(null),v=(0,e.useState)(Wi.Visible),g=v[0],y=v[1],b=h.unmount?qo.Unmount:qo.Hidden,x=function(){var t=(0,e.useContext)(Hi);if(null===t)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return t}(),w=x.show,k=x.appear,S=x.initial,_=function(){var t=(0,e.useContext)(Gi);if(null===t)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return t}(),N=_.register,E=_.unregister,C=fi(),T=(0,e.useRef)(!1),I=Xi((function(){T.current||(y(Wi.Hidden),E(C),F.current.afterLeave())}));ii((function(){if(C)return N(C)}),[N,C]),ii((function(){var e;b===qo.Hidden&&C&&(w&&g!==Wi.Visible?y(Wi.Visible):Qo(g,((e={})[Wi.Hidden]=function(){return E(C)},e[Wi.Visible]=function(){return N(C)},e)))}),[g,C,N,E,w,b]);var O=qi(s),A=qi(u),D=qi(c),M=qi(l),R=qi(f),P=qi(d),j=qi(p),F=function(t){var n=(0,e.useRef)(Ji(t));return(0,e.useEffect)((function(){n.current=Ji(t)}),[t]),n}({beforeEnter:r,afterEnter:a,beforeLeave:o,afterLeave:i}),L=ui();(0,e.useEffect)((function(){if(L&&g===Wi.Visible&&null===m.current)throw new Error("Did you forget to passthrough the `ref` to the actual DOM node?")}),[m,g,L]);var B=S&&!k;ii((function(){var e=m.current;if(e&&!B)return T.current=!0,w&&F.current.beforeEnter(),w||F.current.beforeLeave(),w?Ui(e,O,A,D,M,(function(e){T.current=!1,e===Li.Finished&&F.current.afterEnter()})):Ui(e,R,P,j,M,(function(e){T.current=!1,e===Li.Finished&&(Ki(I)||(y(Wi.Hidden),E(C),F.current.afterLeave()))}))}),[F,C,T,E,I,m,B,w,O,A,D,R,P,j]);var z={ref:m},Z=h;return e.createElement(Gi.Provider,{value:I},e.createElement(_i,{value:Qo(g,(n={},n[Wi.Visible]=gi.Open,n[Wi.Hidden]=gi.Closed,n))},ei({props:Xo({},Z,z),defaultTag:"div",features:Qi,visible:g===Wi.Visible,name:"Transition.Child"})))}function ts(t){var n,r=t.show,a=t.appear,o=void 0!==a&&a,i=t.unmount,s=Yo(t,["show","appear","unmount"]),u=Si();void 0===r&&null!==u&&(r=Qo(u,((n={})[gi.Open]=!0,n[gi.Closed]=!1,n)));if(![!0,!1].includes(r))throw new Error("A <Transition /> is used but it is missing a `show={true | false}` prop.");var c=(0,e.useState)(r?Wi.Visible:Wi.Hidden),l=c[0],f=c[1],d=Xi((function(){f(Wi.Hidden)})),p=function(){var t=(0,e.useRef)(!0);return(0,e.useEffect)((function(){t.current=!1}),[]),t.current}(),h=(0,e.useMemo)((function(){return{show:r,appear:o||!p,initial:p}}),[r,o,p]);(0,e.useEffect)((function(){r?f(Wi.Visible):Ki(d)||f(Wi.Hidden)}),[r,d]);var m={unmount:i};return e.createElement(Gi.Provider,{value:d},e.createElement(Hi.Provider,{value:h},ei({props:Xo({},m,{as:e.Fragment,children:e.createElement(es,Object.assign({},m,s))}),defaultTag:e.Fragment,features:Qi,visible:l===Wi.Visible,name:"Transition"})))}ts.Child=function(t){var n=null!==(0,e.useContext)(Hi),r=null!==Si();return!n&&r?e.createElement(ts,Object.assign({},t)):e.createElement(es,Object.assign({},t))},ts.Root=ts;var ns=function(t){return e.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},t),e.createElement("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"}))};var rs=function(t){return e.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},t),e.createElement("path",{fillRule:"evenodd",d:"M10 3a1 1 0 01.707.293l3 3a1 1 0 01-1.414 1.414L10 5.414 7.707 7.707a1 1 0 01-1.414-1.414l3-3A1 1 0 0110 3zm-3.707 9.293a1 1 0 011.414 0L10 14.586l2.293-2.293a1 1 0 011.414 1.414l-3 3a1 1 0 01-1.414 0l-3-3a1 1 0 010-1.414z",clipRule:"evenodd"}))};var as=n(3264),is=n.n(as),ss=n(6370),us=n.n(ss),cs=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},ls=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t},fs=function(t){function n(){var e,r;cs(this,n);for(var a=arguments.length,o=Array(a),i=0;i<a;i++)o[i]=arguments[i];return e=r=ls(this,t.call.apply(t,[this].concat(o))),r.processImage=function(){r.props.children?r.props.children.props.src&&r.parseImage(r.props.children.props.src,r.props):r.props.src&&"string"===typeof r.props.src&&r.props.src.length>0?r.parseImage(r.props.src,r.props):console.error("Please provide an image url using the 'src' prop or wrap an image element under the <ColorExtractor /> component. Check out the docs for more info - https://goo.gl/rMZ5L7")},r.parseImage=function(e,t){us().from(e).maxColorCount(t.maxColors).getSwatches().then((function(e){return t.getColors(r.getColorsFromSwatches(e,t))})).catch((function(n){n&&r.useDefaultImageClass(e,t)}))},r.useDefaultImageClass=function(e,t){(new(us().DefaultOpts.ImageClass)).load(e.src).then((function(e){e.image&&us().from(e.image).getSwatches().then((function(e){return t.getColors(r.getColorsFromSwatches(e,t))})).catch((function(e){e&&t.onError(e)}))})).catch((function(e){e&&t.onError(e)}))},r.getColorsFromSwatches=function(e,t){var n=[];for(var r in e)e.hasOwnProperty(r)&&e[r]&&(t.rgb?n.push(e[r].getRgb()):n.push(e[r].getHex()));return n},ls(r,e)}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,t),n.prototype.componentDidMount=function(){this.processImage()},n.prototype.componentDidUpdate=function(e){e.src!==this.props.src&&"string"===typeof this.props.src&&this.props.src.length>0?this.parseImage(this.props.src,this.props):this.props.children&&e.children.props.src!==this.props.children.props.src&&this.parseImage(this.props.children.props.src,this.props)},n.prototype.render=function(){var t=e.Children.count(this.props.children);if(t>1)throw new Error("Expected only one image element.");if(1===t){if("img"===this.props.children.type)return this.props.children;throw new Error('Expected children to be an image element but instead got a "'+this.props.children.type+'"')}return null},n}(e.Component);fs.defaultProps={onError:function(e){},getColors:function(e){},rgb:!1,hex:!0,src:null,maxColors:64};n(6770);var ds=n(3959),ps=["Parcs nationaux","Divertissement","Activit\xe9s du jour","Menu du jour"],hs=[{img:"https://images.unsplash.com/photo-1517054612019-1bf855127c43?ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&ixlib=rb-1.2.1&auto=format&fit=crop&w=1940&q=80",title:"Yosemite",color:"#a54a5e",category:"Parc national",desc:"Le parc national de Yosemite se trouve dans les montagnes de la Sierra Nevada, en Californie.",desc2:"Il est renomm\xe9 pour ses s\xe9quoias g\xe9ants centenaires et pour Tunnel View, point de vue embl\xe9matique sur la chute vertigineuse du Voile de la Mari\xe9e, et les falaises granitiques d'El Capitan et du Half Dome."},{img:"https://images.unsplash.com/photo-1604542246637-7994c14147bd?ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&ixlib=rb-1.2.1&auto=format&fit=crop&w=1964&q=80",title:"Sequoia",color:"#86836c",category:"Parc national",desc:"Le parc national de Sequoia se trouve dans les montagnes du sud de la Sierra Nevada, en Californie.",desc2:"Il est connu pour ses \xe9normes s\xe9quoias, notamment le General Sherman qui domine la Giant Forest."},{img:"https://images.unsplash.com/photo-1598382569575-b13e69afc96c?ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&ixlib=rb-1.2.1&auto=format&fit=crop&w=1974&q=80",title:"La vall\xe9e de la Mort",color:"#c7a685",category:"Parc national",desc:"Le parc national de la vall\xe9e de la Mort chevauche la fronti\xe8re entre l'est de la Californie et le Nevada.",desc2:"Il est notamment connu pour le Titus Canyon, qui comprend une ville fant\xf4me et des formations rocheuses color\xe9es, ainsi que pour les salines du bassin de Badwater, le point le plus bas de l'Am\xe9rique du Nord."},{img:"https://images.unsplash.com/photo-1516302350523-4c29d47b89e0?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=2070&q=80",title:"Grand Canyon",color:"#c27351",category:"Parc national",desc:"Le Grand Canyon, situ\xe9 en Arizona, est une formation naturelle caract\xe9ris\xe9e par des couches de roche rouge visibles sur ses versants, r\xe9v\xe9lant des millions d'ann\xe9es d'histoire g\xe9ologique.",desc2:"Le canyon, extr\xeamement imposant, s'\xe9tend sur environ 16 km de largeur et 446 km de longueur, avec une profondeur moyenne de 1 600 m."},{img:"https://images.unsplash.com/photo-1529439322271-42931c09bce1?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=2070&q=80",title:"Yellowstone",color:"#ffb106",category:"Parc national",desc:"Le parc national de Yellowstone est une zone de loisirs sauvage d'environ 9000 km\xb2 surplombant un site g\xe9othermique volcanique.",desc2:"Principalement situ\xe9 dans le Wyoming, le parc s'\xe9tend \xe9galement sur des parties du Montana et de l'Idaho."}],ms=[{img:"./coverimages40282636.jpg",title:"Visitez la maison Boho-Chic de Z\xf6e Kravitz",color:"",category:"",desc:"L'actrice Z\xf6e Kravitz s'offre une maison cach\xe9e dans les bois \xe0 Pound Ridge, New York. Visite guid\xe9e.",desc2:""},{img:"./1.jpeg",title:"La maison",color:"",category:"Visitez la maison Boho-Chic de Z\xf6e Kravitz",desc:"L'ancienne cidrerie des ann\xe9es 1700 a \xe9t\xe9 convertie en maison. Elle est camoufl\xe9e derri\xe8re la v\xe9g\xe9tation.",desc2:""},{img:"./2.jpeg",title:"S\xe9jour",color:"",category:"Visitez la maison Boho-Chic de Z\xf6e Kravitz",desc:"En p\xe9n\xe9trant dans la maison par les deux portes massives, nous d\xe9couvrons le s\xe9jour et sa grande chemin\xe9e.",desc2:""},{img:"./3.jpeg",title:"Cuisine",color:"",category:"Visitez la maison Boho-Chic de Z\xf6e Kravitz",desc:"La cuisine allie modernisme et rusticit\xe9. Un grand \xeelot en longueur offre une vaste surface de travail.",desc2:""},{img:"./4.jpeg",title:"Salle \xe0 manger",color:"",category:"Visitez la maison Boho-Chic de Z\xf6e Kravitz",desc:"\xc0 c\xf4t\xe9 de la cuisine se trouve la salle \xe0 manger. Six personnes peuvent y prendre le repas.",desc2:""}],vs=[{img:"https://images.unsplash.com/photo-1620856516969-6b6f1c1e780b?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=2070&q=80",title:"Bingo",color:"",category:"Activit\xe9s du jour",desc:"De 10h \xe0 12h dans le salon principal.",desc2:""},{img:"https://images.unsplash.com/photo-1608751613440-8880d1a0a1a0?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1974&q=80",title:"Quilles",color:"",category:"Activit\xe9s du jour",desc:"De 10h \xe0 12h.",desc2:""},{img:"https://lsf-france.com/wp-content/uploads/2019/03/14736ba4e37f7b48c7311bda14370d94-savoie-un-arbitre-de-petanque-violemment-tabasse-lors-d-un-championnat.jpg",title:"P\xe9tanque",color:"",category:"Activit\xe9s du jour",desc:"De 13h \xe0 15h dans la cour arri\xe8re.",desc2:""},{img:"https://www.vsj.ca/wp-content/uploads/2020/04/aquaforme.jpg",title:"Aquaforme",color:"#1491b9",category:"Activit\xe9s du jour",desc:"De 14h \xe0 15h.",desc2:""},{img:"https://images.unsplash.com/photo-1440404653325-ab127d49abc1?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=2070&q=80",title:"Cin\xe9ma",color:"",category:"Activit\xe9s du jour",desc:"Titanic ce soir \xe0 19h.",desc2:""}],gs=[{img:"https://images.unsplash.com/photo-1536236397240-9b229a37a286?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=2070&q=80",title:"Menu du jour",color:"",category:"Lundi midi 13 d\xe9cembre 2021",desc:"Bon app\xe9tit!",desc2:""},{img:"https://images.unsplash.com/photo-1603105037880-880cd4edfb0d?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1974&q=80",title:"Soupe aux l\xe9gumes",color:"",category:"Entr\xe9e",desc:"",desc2:""},{img:"https://images.unsplash.com/photo-1572441713132-c542fc4fe282?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1964&q=80",title:"Spaghetti",color:"",category:"Plat principal",desc:"",desc2:""},{img:"https://images.unsplash.com/photo-1552058091-1a614f470415?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=2134&q=80",title:"Filet de sol",color:"",category:"Plat principal",desc:"",desc2:""},{img:"https://images.unsplash.com/photo-1562007908-17c67e878c88?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1974&q=80",title:"Tarte aux pommes",color:"",category:"Dessert",desc:"",desc2:""}],ys=function(t){var n=(0,e.useState)(""),r=(0,a.Z)(n,2),o=r[0],i=r[1],s=(0,e.useState)([]),u=(0,a.Z)(s,2),c=u[0],l=u[1],f=(0,e.useState)([]),d=(0,a.Z)(f,2),p=d[0],h=d[1],v=(0,e.useState)([]),g=(0,a.Z)(v,2),y=g[0],x=g[1],w=(0,e.useState)("fr"),k=(0,a.Z)(w,2),S=k[0],_=k[1],N=(0,e.useState)(!0),E=(0,a.Z)(N,2),C=E[0],T=E[1],I=(0,e.useState)(!1),O=(0,a.Z)(I,2),A=O[0],D=O[1],M=(0,mt.useMediaQuery)({query:"(max-width: 1024px)"});(0,e.useEffect)((function(){t.isHidden||t.preSearchText===o||(i(t.preSearchText),R(t.preSearchText))}),[t.isHidden]);var R=function(e){m.analyzeEntities(e).then((function(e){if(console.log("analyzeEntities",e),T(!1),e.entities.length>0){var t=[],n=[];_(e.language),e.entities.forEach((function(e,r){var a={considered:!1};a.text=e.name.toLowerCase(),a.salience=e.salience,a.searched=!1,a.addedSearch=!1,e.salience>=.07&&-1==t.findIndex((function(t){return t.text.toUpperCase()===e.name.toUpperCase()}))&&(a.considered=!0,(r>0&&e.salience>=.5||r<1)&&(n.push(e.name.toLowerCase()),a.searched=!0)),t.push(a)}));var r=t.filter((function(e){return e.considered})).map((function(e){return e.text}));h(r),x(n),P(n,e.language),console.log("wordsArray",t)}else P([],e.language);T(!1)})).catch((function(e){console.log("Saving API errors",e),T(!1)}))},P=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:S;D(!0),b.getCorrespondingImages(e,t).then((function(e){console.log("getCorrespondingImages",e),l(e.hits),T(!1),D(!1)})).catch((function(e){console.log("Saving API errors",e),T(!1)}))};return(0,re.jsx)("div",{className:"".concat(M||t.modal?"fixed z-50 top-0 left-0":"absolute top-0 left-0"," pointer-events-auto p-4 lg:p-12 w-full h-full flex flex-col space-y-2 items-center justify-start bg-gray-800 bg-opacity-30 ").concat(t.isHidden?"hidden":""),style:{background:"rgba(16,18,27,0.4)",backdropFilter:"blur(6px)"},children:(0,re.jsxs)("div",{className:"pointer-events-auto relative flex flex-col lg:max-w-2xl w-full h-full items-start justify-start bg-gray-100 rounded",children:[C&&(0,re.jsx)("div",{className:"absolute top-0 left-0 flex w-full h-full items-center justify-center",children:(0,re.jsx)(Cs,{className:"h-6 w-6 text-blue-600"})}),(0,re.jsx)(ne,{onClick:function(){return t.setShowLibrary(!1)},className:"absolute top-2 right-2 text-gray-700 hover:text-gray-600 cursor-pointer h-5 w-5 lg:h-6 lg:w-6"}),(0,re.jsx)(ws,{className:"mb-2 pt-3 pl-3 pr-8",onChange:P,tags:p,selectedTags:y}),(0,re.jsx)(ks,{className:"rounded-sm mb-3 pl-3 mr-3",isLoading:A,setSrc:t.setSrc,medias:c})]})})},bs=function(t){var n=t.src,r=(t.alt,t.onClick),o=t.hoverOptions,i=t.selected,s=t.metadata,u=(t.gridId,t.gridContainer),c=(0,e.useState)(s||{}),l=(0,a.Z)(c,2),f=l[0],d=(l[1],(0,e.useState)(n)),p=(0,a.Z)(d,2),h=p[0],m=(p[1],(0,e.useState)(!0)),v=(0,a.Z)(m,2),g=v[0],y=v[1],b=(0,e.useState)(!1),x=(0,a.Z)(b,2),w=(x[0],x[1]),k=(0,e.useState)(!!i),S=(0,a.Z)(k,2),_=S[0],N=S[1],E=(0,mt.useMediaQuery)({query:"(max-width: 768px)"}),C=function(e){N(!_),r&&r({value:f,selected:!_})};return(0,re.jsx)(re.Fragment,{children:E?(0,re.jsxs)("div",{onClick:C,className:"aspect-w-16 aspect-h-9 cursor-pointer",children:[g&&(0,re.jsx)("div",{className:"flex w-full h-full items-center justify-center",children:(0,re.jsx)(Cs,{className:"h-6 w-6 text-blue-600"})}),(0,re.jsx)(ds.ZP,{overflow:!0,height:200,scrollContainer:u,children:(0,re.jsx)("img",{onLoad:function(){return y(!1)},src:h,alt:f.tags,className:"select-none rounded-sm shadow w-full h-full object-center object-cover"})}),o&&o.length>0&&(0,re.jsx)("div",{className:"flex flex-row items-end justify-end",children:(0,re.jsx)("div",{className:"p-1 bg-gray-800 bg-opacity-50 rounded-tl-lg rounded-br-sm",children:o.map((function(e){return e}))})})]}):(0,re.jsxs)("div",{onClick:C,onMouseOver:function(){return w(!0)},onMouseLeave:function(){return w(!1)},className:"aspect-w-16 aspect-h-9 cursor-pointer",children:[g&&(0,re.jsx)("div",{className:"flex w-full h-full items-center justify-center",children:(0,re.jsx)(Cs,{className:"h-6 w-6 text-blue-600"})}),(0,re.jsx)(ds.ZP,{overflow:!0,height:200,scrollContainer:u,children:(0,re.jsx)("img",{onLoad:function(){return y(!1)},src:h,alt:f.tags,className:"select-none rounded-sm shadow w-full h-full object-center object-cover"})}),o&&o.length>0&&(0,re.jsx)("div",{className:"flex flex-row items-end justify-end",children:(0,re.jsx)("div",{className:"p-1 bg-gray-800 bg-opacity-50 rounded-tl-lg rounded-tl-lg rounded-br-sm",children:o.map((function(e){return e}))})})]})})},xs=function(t){var n=(0,e.useState)(t.label||t.value),r=(0,a.Z)(n,2),o=r[0],i=(r[1],(0,e.useState)(t.value||t.label)),s=(0,a.Z)(i,2),u=s[0],c=(s[1],(0,e.useState)(!!t.selected)),l=(0,a.Z)(c,2),f=l[0],d=l[1];(0,e.useEffect)((function(){d(t.selected)}),[t.selected]);return(0,re.jsx)("div",{onClick:function(e){var n=!f;d(n),t.onClick&&t.onClick({value:u,selected:n})},className:"rounded-full m-0.5 lg:m-1 py-0.5 px-2 text-center text-xs lg:text-xs flex items-center justify-center align-middle cursor-pointer border-1 lg:border-2 select-none ".concat(f?"text-white bg-blue-600 hover:bg-blue-500 border-blue-600 hover:border-blue-500":"text-gray-900 bg-gray-300 hover:bg-gray-200 border-gray-300 hover:border-gray-200"),children:o})},ws=function(t){var n=(0,e.useState)(t.tags),o=(0,a.Z)(n,2),i=o[0],s=o[1],u=(0,e.useState)(t.selectedTags?t.selectedTags:[]),c=(0,a.Z)(u,2),l=c[0],f=c[1];(0,e.useEffect)((function(){s(t.tags)}),[t.tags]),(0,e.useEffect)((function(){f(t.selectedTags)}),[t.selectedTags]);(0,mt.useMediaQuery)({query:"(max-width: 1024px)"});var d=(0,e.useState)(!1),p=(0,a.Z)(d,2),h=p[0],m=p[1],v=function(e){var n=e.value,a=e.selected,o=(0,r.Z)(l);if(a)o.push(n);else{var i=o.indexOf(n);i>-1&&o.splice(i,1)}f(o),t.onChange(o)};return(0,re.jsx)("div",{className:"flex flex-col flex-wrap items-start justify-start align-middle py-1 rounded-md w-full ".concat(t.className?t.className:""),children:(0,re.jsxs)("div",{className:"flex flex-row flex-wrap items-center justify-start align-middle",children:[h?(0,re.jsx)(z,{onClick:function(){return m(!1)},className:"m-0.5 text-gray-700 hover:text-gray-600 cursor-pointer h-5 w-5 lg:h-6 lg:w-6"}):(0,re.jsx)(W,{onClick:function(){return m(!0)},className:"m-0.5 text-gray-700 hover:text-gray-600 cursor-pointer h-5 w-5 lg:h-6 lg:w-6"}),h?i.map((function(e,t){return(0,re.jsx)(xs,{label:e,value:e,selected:l.includes(e),onClick:v},"".concat(e))})):l.map((function(e,t){return(0,re.jsx)(xs,{label:e,value:e,selected:!0},"selected-".concat(e))}))]})})},ks=function(t){var n=(0,e.useState)(t.medias||[]),o=(0,a.Z)(n,2),i=o[0],s=o[1],u=(0,e.useState)(t.selectedMedias||[]),c=(0,a.Z)(u,2),l=c[0],f=c[1],d=(0,e.useState)(Math.floor(1e5*Math.random())),p=(0,a.Z)(d,2),h=p[0],m=(p[1],(0,e.useRef)(null)),v=(0,e.useState)(!1),g=(0,a.Z)(v,2),y=g[0],b=g[1];(0,e.useEffect)((function(){s(t.medias),(0,ds.be)()}),[t.medias]),(0,e.useEffect)((function(){b(t.isLoading),(0,ds.be)()}),[t.isLoading]);var x=(0,e.useState)([]),w=(0,a.Z)(x,2),k=(w[0],w[1],function(e){var n=e.value,a=e.isSelected,o=(0,r.Z)(l);if(a)o.push(n);else{var i=o.indexOf(n);i>-1&&o.splice(i,1)}f(o),t.setSrc(n.largeImageURL)});return(0,re.jsxs)("div",{id:"MediaGrid-".concat(h),ref:m,className:"container grid md:grid-cols-4 grid-cols-3 gap-1 lg:grid-cols-4 lg:gap-2 max-h-full overflow-auto ".concat(t.className),children:[i.map((function(e,t){return(0,re.jsx)(bs,{gridContainer:m,gridId:"MediaGrid-".concat(h),alt:e.tags,metadata:e,onClick:k,src:e.previewURL},"Media-".concat(e.id,"-").concat(h))})),y&&(0,re.jsx)("div",{className:"absolute top-0 left-0 flex w-full h-full items-center justify-center bg-white bg-opacity-30",children:(0,re.jsx)(Cs,{className:"h-6 w-6 text-blue-600"})})]})},Ss=function(e){var t=e.children,n=e.id,r=e.className;return(0,re.jsx)("div",{id:n,className:"pointer-events-none h-full w-full "+r,children:t})},_s=function(e){var t=e.children,n=e.id,r=e.className;return(0,re.jsx)("div",{id:n,className:"pointer-events-none flex h-full w-full absolute "+r,children:t})},Ns=function(t){var n=(0,e.useState)(t.src),r=(0,a.Z)(n,2),o=r[0],i=r[1],s=(0,e.useState)([]),c=(0,a.Z)(s,2),l=c[0],f=c[1],d=(0,e.useState)(!0),p=(0,a.Z)(d,2),h=p[0],m=p[1],v=(0,e.useState)(!1),g=(0,a.Z)(v,2),y=g[0],b=g[1],x=(0,e.useState)(!1),w=(0,a.Z)(x,2),k=w[0],S=w[1],_=t.id,N=function(e){e.preventDefault();e.target;S(!k)};(0,e.useEffect)((function(){i(t.src)}),[t.src]);var E=function(e){S(!1),m(!0),t.onChange(e)};return(0,re.jsx)(is(),{value:l,onChange:function(e,n){console.log(e,n),f(e),b(!1),m(!0),t.onChange(e[n[0]].data_url)},maxNumber:2,dataURLKey:"data_url",children:function(e){e.imageList;var n=e.onImageUpload,r=(e.onImageRemoveAll,e.onImageUpdate,e.onImageRemove,e.isDragging),a=e.dragProps;return(0,re.jsxs)("div",u(u({id:_},a),{},{onMouseOver:function(){return b(!t.disabled&&!0)},onMouseLeave:function(){return b(!t.disabled&&!1)},className:"relative pointer-events-auto bg-white h-full overflow-hidden ".concat(t.className?t.className:""),style:t.style,children:[o&&(0,re.jsx)("img",{onLoad:function(){return m(!1)},src:o,alt:t.alt,className:"select-none w-full h-full object-center object-cover bg-white ".concat(t.imgClassName&&t.imgClassName)}),o&&h&&(0,re.jsx)("div",{className:"pointer-events-none absolute top-0 left-0 flex w-full h-full items-center justify-center bg-gray-800 bg-opacity-30",children:(0,re.jsx)(Cs,{className:"text-white h-8 w-8 lg:h-12 lg:w-12"})}),(y&&!h&&!r&&!k&&!t.disabled||!o&&!t.disabled&&!t.controlsOnly&&!r)&&(0,re.jsxs)("div",{className:"absolute top-0 left-0 w-full h-full flex flex-row items-center justify-center bg-gray-800 bg-opacity-30",children:[(0,re.jsx)(ee,{onClick:function(e){return N(e)},className:"text-white m-2 hover:text-white cursor-pointer h-8 w-8 lg:h-12 lg:w-12"}),(0,re.jsx)(Q,{onClick:n,className:"text-white m-2 hover:text-white cursor-pointer h-8 w-8 lg:h-12 lg:w-12"})]}),t.controlsOnly&&(0,re.jsxs)("div",{className:"w-full h-full flex flex-row items-center justify-center",children:[(0,re.jsx)(ee,{onClick:function(e){return N(e)},className:"mr-2 text-gray-700 hover:text-gray-600 cursor-pointer h-4 w-4 lg:h-6 lg:w-6"}),(0,re.jsx)(Q,{onClick:n,className:"ml-2 text-gray-700 hover:text-gray-600 cursor-pointer h-4 w-4 lg:h-6 lg:w-6"})]}),(0,re.jsx)(ys,{modal:t.modalLibrary,isHidden:!k||!!t.disabled,preSearchText:t.preSearchText,setSrc:E,setShowLibrary:S}),!o&&t.disabled&&(0,re.jsx)("div",{className:"absolute top-0 left-0 flex w-full h-full items-center justify-center bg-gray-800 bg-opacity-30",children:(0,re.jsx)(V,{className:"text-white w-1/2"})}),r&&(0,re.jsx)("div",{className:"pointer-events-none absolute top-0 left-0 w-full h-full flex flex-row items-center justify-center bg-gray-800 bg-opacity-30",children:(0,re.jsx)(Q,{className:"text-white hover:text-white cursor-pointer h-12 w-12"})})]}))}})},Es=function(t){var n=(0,e.useState)(!1),r=(0,a.Z)(n,2),o=r[0],i=r[1],s=(0,e.useState)(!1),u=(0,a.Z)(s,2),c=u[0],l=u[1],f=t.id;return(0,re.jsxs)("div",{id:f,style:t.style,onMouseOver:function(){return i(!t.disabled&&!0)},onMouseLeave:function(){i(!t.disabled&&!1),l(!1)},className:"relative pointer-events-auto ".concat(t.className?t.className:""),children:[!t.disabled&&(o||t.editingInput)&&(0,re.jsx)("div",{className:"pointer-events-none absolute top-0 left-0 w-full h-full flex flex-row items-center justify-center rounded-sm ring-1 ring-blue-500 ring-offset-2"}),t.children,o&&!t.editingInput&&(0,re.jsxs)("div",{className:"bg-blue-500 pointer-events-none absolute -top-0.5 -right-0.5 flex flex-row items-center justify-center rounded-bl rounded-tr-sm",children:[c&&t.colors.filter((function(e){return e!==t.color})).map((function(e,n){return(0,re.jsx)("div",{className:"pointer-events-auto p-1",onClick:function(){return function(e){l(!1),t.onChange("color",e)}(e)},children:(0,re.jsx)("div",{className:"h-2 w-2 lg:h-4 lg:w-4 rounded-sm ring-1 ring-white cursor-pointer",style:{backgroundColor:e}})},"".concat(f,"_color_").concat(n))})),t.colors&&(0,re.jsx)("div",{className:"pointer-events-auto p-1",onClick:function(){return l(!c)},children:(0,re.jsx)("div",{className:"h-2 w-2 lg:h-4 lg:w-4 rounded-sm ring-1 ring-white cursor-pointer",style:{backgroundColor:t.color}})}),(0,re.jsx)("div",{className:"pointer-events-none p-1  ",children:(0,re.jsx)(Z,{className:"pointer-events-none text-white hover:text-white cursor-pointer h-2 w-2 lg:h-4 lg:w-4"})})]})]})},Cs=function(e){var t=e.className;return(0,re.jsxs)("svg",{className:"animate-spin ".concat(t),xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,re.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,re.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})},Ts=function(t){var n=t.preSelect,r=t.list,o=t.onChange,i=t.disabled,s=(0,e.useState)(n||""),u=(0,a.Z)(s,2),c=u[0],l=u[1];return(0,re.jsx)("div",{className:"w-52 lg:w-72 ".concat(i?"opacity-75":"cursor-pointer"),children:(0,re.jsx)(ji,{disabled:!!i,value:c,onChange:function(e){o(e),l(e)},children:(0,re.jsxs)("div",{className:"relative",children:[(0,re.jsxs)(ji.Button,{className:"".concat(i?"":"cursor-pointer"," relative text-white border-2  border-white w-full py-0.5 pl-3 pr-10 text-left rounded-lg cursor-default focus:outline-none focus-visible:ring-2 focus-visible:ring-opacity-75 focus-visible:ring-white focus-visible:ring-offset-orange-300 focus-visible:ring-offset-2 focus-visible:border-indigo-500 sm:text-sm"),children:[(0,re.jsx)("span",{className:"block truncate",children:c||"Choisir"}),(0,re.jsx)("span",{className:"absolute inset-y-0 right-0 flex items-center pr-2 pointer-events-none",children:(0,re.jsx)(rs,{className:"w-4 h-4 text-gray-200","aria-hidden":"true"})})]}),(0,re.jsx)(ts,{as:e.Fragment,leave:"transition ease-in duration-100",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:(0,re.jsx)(ji.Options,{className:"absolute w-full py-1 mt-1 overflow-auto text-base bg-white rounded-md shadow-lg max-h-60 ring-1 ring-black ring-opacity-5 focus:outline-none z-10 sm:text-sm",children:r.map((function(e,t){return(0,re.jsx)(ji.Option,{className:function(e){var t=e.active;return"".concat(t?"text-blue-900 bg-blue-100":"text-gray-900","\n                            select-none relative py-2 pl-10 pr-4 cursor-pointer")},value:e,children:function(t){var n=t.selected;t.active;return(0,re.jsxs)(re.Fragment,{children:[(0,re.jsx)("span",{className:"".concat(n?"font-medium":"font-normal"," block truncate"),children:e}),n?(0,re.jsx)("span",{className:"".concat("text-blue-600","\n                                    absolute inset-y-0 left-0 flex items-center pl-3"),children:(0,re.jsx)(ns,{className:"w-5 h-5","aria-hidden":"true"})}):null]})}},t)}))})})]})})})};var Is=function(t){var n=t.isHidden,o=(0,e.useState)(!1),i=(0,a.Z)(o,2),s=i[0],u=i[1],c=(0,e.useState)(!1),l=(0,a.Z)(c,2),f=(l[0],l[1],(0,e.useState)(0)),d=(0,a.Z)(f,2),p=d[0],h=d[1],m=(0,e.useState)(0),v=(0,a.Z)(m,2),g=v[0],y=v[1],b=(0,e.useRef)(null),x=(0,e.useRef)(null),w=(0,e.useState)(0),k=(0,a.Z)(w,2),S=k[0],_=k[1],N=(0,e.useState)(-1),E=(0,a.Z)(N,2),C=E[0],T=E[1],I=(0,e.useState)(hs),O=(0,a.Z)(I,2),A=O[0],D=O[1],M=(0,e.useState)(40),R=(0,a.Z)(M,2),P=R[0],j=R[1],F=(0,e.useState)(1),L=(0,a.Z)(F,2),B=L[0],z=L[1],Z={input:"",idx:-1},V=(0,e.useState)(Z),q=(0,a.Z)(V,2),W=q[0],H=q[1],G=(0,e.useState)(!1),K=(0,a.Z)(G,2),$=K[0],J=K[1],Q=(0,e.useState)(ps[0]),ee=(0,a.Z)(Q,2),te=ee[0],ae=ee[1],oe=((0,e.useRef)(),(0,e.useRef)(),(0,e.useState)(null)),ie=(0,a.Z)(oe,2),se=ie[0],ue=ie[1],ce=(0,e.useState)((function(){return Ho.config({force3D:!0}),Ho.timeline()})),le=(0,a.Z)(ce,2),fe=(le[0],le[1],(0,mt.useMediaQuery)({query:"(max-width: 1024px)"})),de=function(){var t=(0,e.useState)({width:void 0,height:void 0}),n=(0,a.Z)(t,2),r=n[0],o=n[1];return(0,e.useEffect)((function(){function e(){o({width:window.innerWidth,height:window.innerHeight})}return window.addEventListener("resize",e),e(),function(){return window.removeEventListener("resize",e)}}),[]),r}(),pe=function(e,t){e.preventDefault(),u(t)};(0,e.useEffect)((function(){}),[n]);var he=function(){var e=Ho.timeline({paused:!0}),t={from:{opacity:1,yPercent:100,xPercent:0,rotation:.01},to:{opacity:1,yPercent:0,duration:2,ease:"power3.inOut",rotation:0}},n={from:{opacity:1,yPercent:-100,xPercent:0,rotation:.01},to:{opacity:1,yPercent:0,duration:2,ease:"power3.inOut",rotation:0}},r={yPercent:-100,duration:2,ease:"power3.inOut",rotation:.01},a={opacity:1,yPercent:100,duration:2,ease:"power3.inOut",rotation:.01},o=[{layer1In:t,layer2In:n,layer1Out:{width:"200%",xPercent:50,duration:2,ease:"power3.inOut",rotation:.01},layer2Out:{opacity:1,xPercent:100-P,duration:2,ease:"power3.inOut",rotation:.01}},{layer1In:{from:{opacity:1,xPercent:-100+P,yPercent:0,rotation:.01},to:{opacity:1,xPercent:P,duration:2,ease:"power3.inOut",rotation:0}},layer2In:{from:{opacity:1,xPercent:-100,yPercent:0,rotation:.01},to:{opacity:1,xPercent:-100+P,duration:2,ease:"power3.inOut",rotation:0}},layer1Out:a,layer2Out:r},{layer1In:t,layer2In:n,layer1Out:{width:"95%",xPercent:-10,duration:2,ease:"power3.inOut",rotation:.01},layer2Out:{opacity:1,xPercent:-P,duration:2,ease:"power3.inOut",rotation:.01}},{layer1In:{from:{opacity:1,xPercent:100,yPercent:0,width:"100%",rotation:.01},to:{opacity:1,xPercent:0,width:"100%",duration:2,ease:"power3.inOut",rotation:0}},layer2In:{from:{opacity:1,xPercent:100,yPercent:0,rotation:.01},to:{opacity:1,xPercent:0,duration:2,ease:"power3.inOut",rotation:0}},layer1Out:{width:"110%",xPercent:25,duration:2,ease:"power3.inOut",rotation:.01},layer2Out:{opacity:1,xPercent:100-P,duration:2,ease:"power3.inOut",rotation:.01}},{layer1In:{from:{opacity:1,xPercent:-100+P,yPercent:0,rotation:.01},to:{opacity:1,xPercent:P,duration:2,ease:"power3.inOut",rotation:0}},layer2In:{from:{opacity:1,xPercent:-100,yPercent:0,rotation:.01},to:{opacity:1,xPercent:-100+P,duration:2,ease:"power3.inOut",rotation:0}},layer1Out:a,layer2Out:r}];return e.call((function(){return T(0)})),A.forEach((function(t,n){e.fromTo("#thumbPreview #slide-".concat(n+1," #layer-1"),o[n].layer1In.from,o[n].layer1In.to,"slide-".concat(n+1,"-in")),e.fromTo("#thumbPreview #slide-".concat(n+1," #layer-2"),o[n].layer2In.from,o[n].layer2In.to,"slide-".concat(n+1,"-in")),e.fromTo("#thumbPreview #slide-".concat(n+1," #layer-1 #img-1 img"),{scale:1,rotation:.01},{scale:1.1,rotation:0,ease:"linear",duration:7/B},"slide-".concat(n+1,"-in")),e.fromTo("#thumbPreview #slide-".concat(n+1," #layer-2 #progress"),{width:"0%"},{width:"85%",ease:"linear",duration:7/B},"slide-".concat(n+1,"-in")).call((function(){return T(n+1)})),n+1<A.length&&(e.to("#thumbPreview #slide-".concat(n+1," #layer-1"),o[n].layer1Out,"slide-".concat(n+2,"-in")),e.to("#thumbPreview #slide-".concat(n+1," #layer-2"),o[n].layer2Out,"slide-".concat(n+2,"-in")))})),e.then(me),e};(0,e.useEffect)((function(){if(!0===s){var e=he();e.restart(),ue(e)}else se&&se.progress(1)}),[s]);(0,e.useEffect)((function(){b.current&&h(b.current.offsetWidth),x.current&&y(x.current.offsetWidth)}),[de]);var me=function(e){T(-1),ve(S)},ve=function(e){(e!==S||s)&&(se&&se.isActive()&&se.progress(1),u(!1),A.forEach((function(e,t){Ho.set("#thumbPreview #slide-".concat(t+1," #layer-1"),{width:"100%",opacity:1,clearProps:"transform"}),Ho.set("#thumbPreview #slide-".concat(t+1," #layer-2"),{width:"100%",opacity:1,clearProps:"transform"}),Ho.set("#thumbPreview #slide-".concat(t+1," #layer-2 #progress"),{width:"85%"})})),_(e))},ge=function(e){var t=p;return(0===p||b.current&&b.current.offsetWidth!==p)&&(t=b.current.offsetWidth,h(t)),t/1920*e},ye=function(e){var t=g;return(0===g||x.current&&x.current.offsetWidth!==g)&&(t=x.current.offsetWidth,y(t)),t/1920*e},be=function(e,t,n){var a=(0,r.Z)(A);a[n][e]=t,D(a)};return(0,re.jsxs)(re.Fragment,{children:[$&&(0,re.jsx)("div",{className:"fixed z-50 p-2 lg:p-16 w-full h-full flex flex-col space-y-2 items-center justify-start bg-gray-800 bg-opacity-30",style:{background:"rgba(16,18,27,0.3)",backdropFilter:"blur(5px)"},children:(0,re.jsxs)("div",{className:"relative max-w-5xl flex flex-col w-full h-full items-start justify-start bg-white rounded ",children:[(0,re.jsx)(ne,{onClick:function(){return J(!1)},className:"absolute top-2 right-2 text-gray-700 hover:text-gray-600 cursor-pointer h-4 w-4 lg:h-6 lg:w-6"}),(0,re.jsx)("div",{className:"w-full h-full overflow-auto mt-10 pb-3 pl-3",children:(0,re.jsx)("div",{className:"w-full h-full overflow-auto",children:(0,re.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,re.jsx)("thead",{className:"sticky top-0 bg-white z-50",children:(0,re.jsxs)("tr",{children:[(0,re.jsx)("th",{scope:"col",className:"pl-1 pr-1 py-2 lg:pl-4 lg:pr-2 lg:pb-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"#"}),(0,re.jsx)("th",{scope:"col",className:"px-2 py-2 lg:px-6 lg:pb-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Cat\xe9gorie"}),(0,re.jsx)("th",{scope:"col",className:"px-2 py-2 lg:px-6 lg:pb-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Titre"}),(0,re.jsx)("th",{scope:"col",className:"px-2 py-2 lg:px-6 lg:pb-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Texte"}),(0,re.jsx)("th",{scope:"col",className:"px-2 py-2 lg:px-6 lg:pb-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Image"})]})}),(0,re.jsx)("tbody",{className:"divide-y divide-gray-200 overflow-auto",children:A.map((function(e,t){return(0,re.jsxs)("tr",{children:[(0,re.jsx)("td",{className:"pl-1 pr-2 py-2 lg:pl-4 lg:pr-2 lg:py-4 whitespace-nowrap text-gray-500 align-top",children:t+1}),(0,re.jsx)("td",{className:"px-2 py-2 lg:px-6 lg:py-4 whitespace-nowrap w-2/12 align-top",children:(0,re.jsx)(Ko(),{tagName:"p",html:e.category,className:"focus:placeholder-transparent rounded-sm focus:outline-none focus:ring-1 focus:ring-blue-500 focus:ring-offset-4 break-normal whitespace-normal",onPaste:function(e){e.preventDefault();var t=e.clipboardData.getData("text");document.execCommand("insertText",!1,t)},onChange:function(e){if("Enter"===e.key)e.preventDefault(),e.stopPropagation();else{var n=e.target.value;be("category",n.replace(/(<([^>]+)>)/gi,""),t)}}})}),(0,re.jsx)("td",{className:"px-2 py-2 lg:px-6 lg:py-4 whitespace-nowrap w-2/12 align-top",children:(0,re.jsx)(Ko(),{tagName:"p",html:e.title,className:"focus:placeholder-transparent rounded-sm focus:outline-none focus:ring-1 focus:ring-blue-500 focus:ring-offset-4 break-normal whitespace-normal",onPaste:function(e){e.preventDefault();var t=e.clipboardData.getData("text");document.execCommand("insertText",!1,t)},onChange:function(e){if("Enter"===e.key)e.preventDefault(),e.stopPropagation();else{var n=e.target.value;be("title",n.replace(/(<([^>]+)>)/gi,""),t)}}})}),(0,re.jsx)("td",{className:"px-2 py-2 lg:px-6 lg:py-4 whitespace-normal text-sm text-gray-500 w-5/12 align-top",children:(0,re.jsx)(Ko(),{tagName:"p",html:e.desc,className:"focus:placeholder-transparent rounded-sm focus:outline-none focus:ring-1 focus:ring-blue-500 focus:ring-offset-4 break-normal whitespace-normal",onPaste:function(e){e.preventDefault();var t=e.clipboardData.getData("text");document.execCommand("insertText",!1,t)},onChange:function(e){if("Enter"===e.key)e.preventDefault(),e.stopPropagation();else{var n=e.target.value;be("desc",n.replace(/(<([^>]+)>)/gi,""),t)}}})}),(0,re.jsx)("td",{className:"px-2 py-2 lg:px-6 lg:py-4 flex align-top",children:(0,re.jsx)(Ns,{src:e.img,onChange:function(e){be("img",e,t)},imgClassName:"object-contain",controlsOnly:""===e.img,alt:e.title,disabled:s,id:"img-1",modalLibrary:!0,preSearchText:"".concat(e.title,". ").concat(e.desc)})})]},"slide_".concat(t,"_table"))}))})]})})})]})}),(0,re.jsxs)("div",{className:"min-h-screen flex-col items-start justify-start bg-gray-900 py-20 lg:py-12 px-4 sm:px-6 lg:px-52 space-y-4 lg:space-y-8 ".concat(n?"hidden":"flex"),children:[(0,re.jsxs)("div",{className:"w-full flex flex-col-reverse space-x-0 lg:flex-row lg:space-x-6 lg:space-y-0 md:flex-row md:space-x-6 md:space-y-0 items-center justify-end",children:[(0,re.jsxs)("div",{className:"flex flex-row space-x-4 h-full w-full items-center justify-end mt-4 md:mt-0 lg:mt-0",children:[!s&&(0,re.jsx)(re.Fragment,{children:(0,re.jsx)(Y,{onClick:function(){return J(!$)},className:"text-white hover:text-blue-400 cursor-pointer h-7 w-7 ml-4 lg:ml-6"})}),s?(0,re.jsx)(X,{onClick:function(e){return pe(e,!1)},className:"text-white hover:text-blue-400 cursor-pointer h-7 w-7"}):(0,re.jsx)(U,{onClick:function(e){return pe(e,!0)},className:"text-white hover:text-blue-400 cursor-pointer h-7 w-7"})]}),!s&&(0,re.jsxs)(re.Fragment,{children:[(0,re.jsxs)("div",{className:"flex flex-row items-center",children:[(0,re.jsx)("div",{className:"select-none rounded-md m-1 py-0.5 text-center text-xs flex items-center font-medium justify-center align-middle text-white bg-transparent border-transparent",children:"Disposition"}),(0,re.jsx)("div",{className:"select-none rounded-md m-1 px-2 py-0.5 text-center text-xs flex items-center font-medium justify-center align-middle text-gray-600 bg-transparent border-transparent",children:(0,re.jsx)("input",{type:"range",id:"textZoneWidth",step:1,name:"textZoneWidth",min:"33",max:"65",onChange:function(e){return j(Number(e.target.value))},defaultValue:P})})]}),(0,re.jsxs)("div",{className:"flex flex-row items-center mt-3 lg:mt-0",children:[(0,re.jsx)("div",{className:"select-none rounded-md m-1 py-0.5 text-center text-xs flex items-center font-medium justify-center align-middle text-white bg-transparent border-transparent",children:"Vitesse"}),(0,re.jsx)("div",{className:"select-none rounded-md m-1 px-2 py-0.5 text-center text-xs flex items-center font-medium justify-center align-middle text-gray-600 bg-transparent border-transparent",children:(0,re.jsx)("input",{type:"range",id:"durationAdjustment",step:.05,className:"rangeNoFill",name:"durationAdjustment",min:"0.5",max:"1.5",onChange:function(e){return z(Number(e.target.value))},defaultValue:B})})]})]}),(0,re.jsx)(Ts,{disabled:s,preSelect:te,list:ps,onChange:function(e){if(e!==te)switch(ae(e),e){case ps[1]:D(ms);break;case ps[2]:D(vs);break;case ps[3]:D(gs);break;default:D(hs)}}})]}),!n&&(0,re.jsxs)("div",{className:"flex flex-col lg:flex-row w-full pointer-events-none",children:[(0,re.jsx)("div",{className:"w-full overflow-hidden shadow",children:(0,re.jsxs)("div",{id:"thumbPreview",className:"w-full aspect-w-16 aspect-h-9 bg-white overflow-hidden rounded-md",ref:b,children:[b.current&&p>0&&A.map((function(e,t){return(0,re.jsxs)(Ss,{id:"slide-".concat(t+1),className:S===t||s&&(t===C||t===C-1)?"":"hidden",children:[(0,re.jsxs)(_s,{id:"layer-1",children:[(0,re.jsx)(Ns,{src:e.img,onChange:function(e){be("img",e,t)},alt:e.title,disabled:s,id:"img-1",style:{width:"".concat(100-P,"%")},preSearchText:"".concat(e.title,". ").concat(e.desc)}),(0,re.jsx)(fs,{src:e.img,getColors:function(n){!e.colors&&e.color||be("color",n[0],t),be("colors",n,t)},maxColors:256})]}),(0,re.jsx)(_s,{id:"layer-2",className:"justify-end",children:(0,re.jsx)("div",{className:"flex pointer-events-auto bg-white h-full items-center",style:{width:"".concat(P,"%"),padding:"".concat(ge(36),"px")},children:(0,re.jsxs)("div",{className:"pointer-events-auto w-full",style:{padding:"".concat(ge(36),"px")},children:[(0,re.jsx)(Es,{id:"text-1",style:{marginBottom:"".concat(ge(12),"px")},editingInput:"category"===W.input&&W.idx===t,children:(0,re.jsx)(Ko(),{tagName:"h2",html:e.category,className:"focus:placeholder-transparent focus:outline-none focus:ring-blue-500 focus:ring-offset-4 font-bold uppercase tracking-widest max-w-full break-normal whitespace-normal",style:{fontSize:"".concat(ge(32),"px")},onPaste:function(e){e.preventDefault();var t=e.clipboardData.getData("text");document.execCommand("insertText",!1,t)},disabled:s,onFocus:function(){H({input:"category",idx:t})},onBlur:function(){H(Z)},onChange:function(e){if("Enter"===e.key)e.preventDefault(),e.stopPropagation();else{var n=e.target.value;be("category",n.replace(/(<([^>]+)>)/gi,""),t)}}})}),(0,re.jsx)(Es,{id:"text-2",colors:e.colors,color:e.color,onChange:function(e,n){return be(e,n,t)},style:{marginTop:"".concat(ge(12),"px"),marginBottom:"".concat(ge(12),"px")},editingInput:"title"===W.input&&W.idx===t,children:(0,re.jsx)(Ko(),{tagName:"h1",html:e.title,className:"focus:placeholder-transparent focus:outline-none focus:ring-blue-500 focus:border-blue-500 font-bold max-w-full break-normal whitespace-normal",style:{fontSize:"".concat(ge(84),"px"),lineHeight:"".concat(ge(97),"px"),color:e.color},onPaste:function(e){e.preventDefault();var t=e.clipboardData.getData("text");document.execCommand("insertText",!1,t)},disabled:s,onFocus:function(){H({input:"title",idx:t})},onBlur:function(){H(Z)},onChange:function(e){if("Enter"===e.key)e.preventDefault(),e.stopPropagation();else{var n=e.target.value;be("title",n.replace(/(<([^>]+)>)/gi,""),t)}}})}),(0,re.jsx)(Es,{id:"text-3",style:{marginTop:"".concat(ge(12),"px"),marginBottom:"".concat(ge(8),"px")},editingInput:"desc"===W.input&&W.idx===t,children:(0,re.jsx)(Ko(),{tagName:"p",html:e.desc,className:"focus:placeholder-transparent focus:outline-none focus:ring-blue-500 focus:border-blue-500 max-w-full break-normal whitespace-normal",style:{fontSize:"".concat(ge(35),"px")},onPaste:function(e){e.preventDefault();var t=e.clipboardData.getData("text");document.execCommand("insertText",!1,t)},disabled:s,onFocus:function(){H({input:"desc",idx:t})},onBlur:function(){H(Z)},onChange:function(e){if("Enter"===e.key)e.preventDefault(),e.stopPropagation();else{var n=e.target.value;be("desc",n.replace(/(<([^>]+)>)/gi,""),t)}}})}),(0,re.jsx)("div",{id:"progress",className:"",style:{width:"75%",height:"".concat(ge(6),"px"),marginTop:"".concat(ge(24),"px"),backgroundColor:""===e.color?"black":e.color}})]})})})]})})),s&&(0,re.jsx)("div",{className:"pointer-events-auto flex w-full h-full items-center justify-center"})]})}),(0,re.jsx)("div",{className:"mt-2 lg:ml-4 lg:mt-0 container grid grid-cols-3 gap-2 lg:grid-cols-1 lg:gap-2",style:{width:"".concat(fe?100:18.25,"%")},children:A.map((function(e,t){return(0,re.jsxs)("div",{className:"w-full aspect-w-16 aspect-h-9 bg-white overflow-hidden rounded ".concat(t===C?"ring-2 ring-red-700 ring-offset-2 ring-offset-gray-900":""," ").concat(t===S&&-1===C?"ring-2 ring-blue-500 ring-offset-2 ring-offset-gray-900":""),ref:x,children:[x.current&&g>0&&(0,re.jsxs)(Ss,{id:"slide-".concat(t+1),children:[(0,re.jsx)(_s,{id:"layer-1",children:(0,re.jsx)(Ns,{src:e.img,onChange:function(e){be("img",e,t)},disabled:!0,alt:e.title,id:"img-1",style:{width:"".concat(100-P,"%")},preSearchText:"".concat(e.title,". ").concat(e.desc)})}),(0,re.jsx)(_s,{id:"layer-2",className:"justify-end",children:(0,re.jsx)("div",{className:"flex pointer-events-none bg-white h-full items-center",style:{width:"".concat(P,"%"),padding:"".concat(ye(36),"px")},children:(0,re.jsxs)("div",{className:"pointer-events-none w-full",style:{padding:"".concat(ye(36),"px")},children:[(0,re.jsx)(Es,{id:"text-1",style:{marginBottom:"".concat(ye(12),"px")},disabled:!0,editingInput:"category"===W.input&&W.idx===t,children:(0,re.jsx)(Ko(),{tagName:"h2",html:e.category,className:"focus:placeholder-transparent focus:outline-none focus:ring-blue-500 focus:ring-offset-4 font-bold uppercase tracking-widest max-w-full break-normal whitespace-normal select-none",style:{fontSize:"".concat(ye(32),"px")},onPaste:function(e){e.preventDefault();var t=e.clipboardData.getData("text");document.execCommand("insertText",!1,t)},disabled:!0,onFocus:function(){H({input:"category",idx:t})},onBlur:function(){H(Z)},onChange:function(e){var n=e.target.value;be("category",n,t)}})}),(0,re.jsx)(Es,{id:"text-2",style:{marginTop:"".concat(ye(12),"px"),marginBottom:"".concat(ye(12),"px")},disabled:!0,editingInput:"title"===W.input&&W.idx===t,children:(0,re.jsx)(Ko(),{tagName:"h1",html:e.title,className:"focus:placeholder-transparent focus:outline-none focus:ring-blue-500 focus:border-blue-500 font-bold max-w-full break-normal whitespace-normal select-none",style:{fontSize:"".concat(ye(84),"px"),lineHeight:"".concat(ye(97),"px"),color:e.color},onPaste:function(e){e.preventDefault();var t=e.clipboardData.getData("text");document.execCommand("insertText",!1,t)},disabled:!0,onFocus:function(){H({input:"title",idx:t})},onBlur:function(){H(Z)},onChange:function(e){var n=e.target.value;be("title",n,t)}})}),(0,re.jsx)(Es,{id:"text-3",style:{marginTop:"".concat(ye(12),"px"),marginBottom:"".concat(ye(8),"px")},disabled:!0,editingInput:"desc"===W.input&&W.idx===t,children:(0,re.jsx)(Ko(),{tagName:"p",html:e.desc,className:"focus:placeholder-transparent focus:outline-none focus:ring-blue-500 focus:border-blue-500 max-w-full break-normal whitespace-normal select-none",style:{fontSize:"".concat(ye(35),"px")},onPaste:function(e){e.preventDefault();var t=e.clipboardData.getData("text");document.execCommand("insertText",!1,t)},disabled:!0,onFocus:function(){H({input:"desc",idx:t})},onBlur:function(){H(Z)},onChange:function(e){var n=e.target.value;be("desc",n,t)}})}),(0,re.jsx)("div",{id:"progress",className:"",style:{width:"75%",height:"".concat(ye(6),"px"),marginTop:"".concat(ye(24),"px"),backgroundColor:""===e.color?"black":e.color}})]})})})]}),(0,re.jsx)("div",{className:"pointer-events-auto flex w-full h-full items-center justify-center cursor-pointer",onClick:function(){return ve(t)}})]})}))})]}),(0,re.jsx)("section",{className:"container grid md:grid-cols-4 grid-cols-3 gap-1 lg:grid-cols-12 lg:gap-2 w-full"})]})]})},Os=function(e){var t=e.className;return(0,re.jsxs)("svg",{className:"animate-spin ".concat(t),xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,re.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,re.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})},As=function(t){var n=(0,e.useState)(t.label||t.value),r=(0,a.Z)(n,2),o=r[0],i=(r[1],(0,e.useState)(t.value||t.label)),s=(0,a.Z)(i,2),u=s[0],c=(s[1],(0,e.useState)(!!t.selected)),l=(0,a.Z)(c,2),f=l[0],d=l[1];(0,e.useEffect)((function(){d(t.selected)}),[t.selected]);return(0,re.jsx)("div",{onClick:function(e){var n=!f;d(n),t.onClick&&t.onClick({value:u,selected:n})},className:"rounded-full m-0.5 lg:m-1 py-0.5 px-2 text-center text-xs lg:text-xs flex items-center justify-center align-middle cursor-pointer border-1 lg:border-2 select-none ".concat(f?"text-white bg-blue-600 hover:bg-blue-500 border-blue-600 hover:border-blue-500":"text-gray-900 bg-gray-300 hover:bg-gray-200 border-gray-300 hover:border-gray-200"),children:o})},Ds=function(t){var n=(0,e.useState)(t.tags),o=(0,a.Z)(n,2),i=o[0],s=o[1],u=(0,e.useState)(t.selectedTags?t.selectedTags:[]),c=(0,a.Z)(u,2),l=c[0],f=c[1];(0,e.useEffect)((function(){s(t.tags)}),[t.tags]),(0,e.useEffect)((function(){f(t.selectedTags)}),[t.selectedTags]);(0,mt.useMediaQuery)({query:"(max-width: 1024px)"});var d=(0,e.useState)(!1),p=(0,a.Z)(d,2),h=p[0],m=p[1],v=function(e){var n=e.value,a=e.selected,o=(0,r.Z)(l);if(a)o.push(n);else{var i=o.indexOf(n);i>-1&&o.splice(i,1)}f(o),t.onChange(o)};return(0,re.jsx)("div",{className:"flex flex-col flex-wrap items-start justify-start align-middle py-1 rounded-md w-full ".concat(t.className?t.className:""),children:(0,re.jsxs)("div",{className:"flex flex-row flex-wrap items-center justify-start align-middle",children:[h?(0,re.jsx)(z,{onClick:function(){return m(!1)},className:"m-0.5 text-gray-700 hover:text-gray-600 cursor-pointer h-5 w-5 lg:h-6 lg:w-6"}):(0,re.jsx)(W,{onClick:function(){return m(!0)},className:"m-0.5 text-gray-700 hover:text-gray-600 cursor-pointer h-5 w-5 lg:h-6 lg:w-6"}),h?i.map((function(e,t){return(0,re.jsx)(As,{label:e,value:e,selected:l.includes(e),onClick:v},"".concat(e))})):l.map((function(e,t){return(0,re.jsx)(As,{label:e,value:e,selected:!0},"selected-".concat(e))}))]})})},Ms=function(t){var n=t.src,r=(t.alt,t.onClick),o=t.hoverOptions,i=t.selected,s=t.metadata,u=(0,e.useState)(s||{}),c=(0,a.Z)(u,2),l=c[0],f=(c[1],(0,e.useState)(n)),d=(0,a.Z)(f,2),p=d[0],h=(d[1],(0,e.useState)(!0)),m=(0,a.Z)(h,2),v=m[0],g=m[1],y=(0,e.useState)(!1),b=(0,a.Z)(y,2),x=(b[0],b[1]),w=(0,e.useState)(!!i),k=(0,a.Z)(w,2),S=k[0],_=k[1],N=(0,mt.useMediaQuery)({query:"(max-width: 768px)"}),E=function(e){_(!S),r&&r({value:l,selected:!S})};return(0,re.jsx)(re.Fragment,{children:N?(0,re.jsxs)("div",{onClick:E,className:"aspect-w-16 aspect-h-9 cursor-pointer",children:[v&&(0,re.jsx)("div",{className:"flex w-full h-full items-center justify-center",children:(0,re.jsx)(Os,{className:"h-6 w-6 text-blue-600"})}),(0,re.jsx)(ds.ZP,{scrollContainer:"#MediaGrid",children:(0,re.jsx)("img",{onLoad:function(){return g(!1)},onError:function(){return g(!1)},src:p,alt:l.tags,className:"select-none rounded-sm shadow w-full h-full object-center object-cover"})}),o&&o.length>0&&(0,re.jsx)("div",{className:"flex flex-row items-end justify-end",children:(0,re.jsx)("div",{className:"p-1 bg-gray-800 bg-opacity-50 rounded-tl-lg rounded-br-sm",children:o.map((function(e){return e}))})})]}):(0,re.jsxs)("div",{onClick:E,onMouseOver:function(){return x(!0)},onMouseLeave:function(){return x(!1)},className:"aspect-w-16 aspect-h-9 cursor-pointer",children:[v&&(0,re.jsx)("div",{className:"flex w-full h-full items-center justify-center",children:(0,re.jsx)(Os,{className:"h-6 w-6 text-blue-600"})}),(0,re.jsx)(ds.ZP,{scrollContainer:"#MediaGrid",children:(0,re.jsx)("img",{onLoad:function(){return g(!1)},onError:function(){return g(!1)},src:p,alt:l.tags,className:"select-none rounded-sm shadow w-full h-full object-center object-cover"})}),o&&o.length>0&&(0,re.jsx)("div",{className:"flex flex-row items-end justify-end",children:(0,re.jsx)("div",{className:"p-1 bg-gray-800 bg-opacity-50 rounded-tl-lg rounded-tl-lg rounded-br-sm",children:o.map((function(e){return e}))})})]})})},Rs=function(t){var n=(0,e.useState)(t.medias||[]),o=(0,a.Z)(n,2),i=o[0],s=o[1],u=(0,e.useState)(t.selectedMedias||[]),c=(0,a.Z)(u,2),l=c[0],f=c[1],d=(0,e.useState)(!1),p=(0,a.Z)(d,2),h=p[0],m=p[1];(0,e.useEffect)((function(){s(t.medias)}),[t.medias]),(0,e.useEffect)((function(){m(t.isLoading)}),[t.isLoading]);var v=(0,e.useState)([]),g=(0,a.Z)(v,2),y=(g[0],g[1],function(e){var n=e.value,a=e.isSelected,o=(0,r.Z)(l);if(a)o.push(n);else{var i=o.indexOf(n);i>-1&&o.splice(i,1)}f(o),t.setSrc(n.largeImageURL)});return(0,re.jsxs)("div",{id:"MediaGrid",className:"container grid md:grid-cols-4 grid-cols-3 gap-1 lg:grid-cols-4 lg:gap-2 max-h-full overflow-auto ".concat(t.className),children:[i.map((function(e,t){return(0,re.jsx)(Ms,{alt:e.tags,metadata:e,onClick:y,src:e.previewURL},e.id)})),h&&(0,re.jsx)("div",{className:"absolute top-0 left-0 flex w-full h-full items-center justify-center bg-white bg-opacity-30",children:(0,re.jsx)(Os,{className:"h-6 w-6 text-blue-600"})})]})},Ps=function(t){var n=(0,e.useState)(""),r=(0,a.Z)(n,2),o=r[0],i=r[1],s=(0,e.useState)([]),u=(0,a.Z)(s,2),c=u[0],l=u[1],f=(0,e.useState)([]),d=(0,a.Z)(f,2),p=d[0],h=d[1],v=(0,e.useState)([]),g=(0,a.Z)(v,2),y=g[0],x=g[1],w=(0,e.useState)("fr"),k=(0,a.Z)(w,2),S=k[0],_=k[1],N=(0,e.useState)(!0),E=(0,a.Z)(N,2),C=E[0],T=E[1],I=(0,e.useState)(!1),O=(0,a.Z)(I,2),A=O[0],D=O[1],M=(0,mt.useMediaQuery)({query:"(max-width: 1024px)"});(0,e.useEffect)((function(){t.isHidden||t.preSearchText===o||(i(t.preSearchText),R(t.preSearchText))}),[t.isHidden]);var R=function(e){m.analyzeEntities(e).then((function(e){if(console.log("analyzeEntities",e),T(!1),e.entities.length>0){var t=[],n=[];_(e.language),e.entities.forEach((function(e,r){var a={considered:!1};a.text=e.name.toLowerCase(),a.salience=e.salience,a.searched=!1,a.addedSearch=!1,e.salience>=.07&&-1==t.findIndex((function(t){return t.text.toUpperCase()===e.name.toUpperCase()}))&&(a.considered=!0,(r>0&&e.salience>=.5||r<1)&&(n.push(e.name.toLowerCase()),a.searched=!0)),t.push(a)}));var r=t.filter((function(e){return e.considered})).map((function(e){return e.text}));h(r),x(n),P(n,e.language),console.log("wordsArray",t)}else P([],e.language);T(!1)})).catch((function(e){console.log("Saving API errors",e),T(!1)}))},P=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:S;D(!0),b.getCorrespondingImages(e,t).then((function(e){console.log("getCorrespondingImages",e),l(e.hits),T(!1),D(!1)})).catch((function(e){console.log("Saving API errors",e),T(!1)}))};return(0,re.jsx)("div",{className:"".concat(M||t.modal?"fixed top-0 left-0":"absolute top-0 left-0"," pointer-events-auto p-4 lg:p-12 w-full h-full flex flex-col space-y-2 items-center justify-start bg-gray-800 bg-opacity-30 ").concat(t.isHidden?"hidden":""),style:{background:"rgba(16,18,27,0.4)",backdropFilter:"blur(6px)",zIndex:600},children:(0,re.jsxs)("div",{className:"pointer-events-auto relative flex flex-col lg:max-w-2xl w-full h-full items-start justify-start bg-gray-100 rounded",children:[C&&(0,re.jsx)("div",{className:"absolute top-0 left-0 flex w-full h-full items-center justify-center",children:(0,re.jsx)(Os,{className:"h-6 w-6 text-blue-600"})}),(0,re.jsx)(ne,{onClick:function(){return t.setShowLibrary(!1)},className:"absolute top-2 right-2 text-gray-700 hover:text-gray-600 cursor-pointer h-5 w-5 lg:h-6 lg:w-6"}),(0,re.jsx)(Ds,{className:"mb-2 pt-3 pl-3 pr-8",onChange:P,tags:p,selectedTags:y}),!C&&(0,re.jsx)(Rs,{className:"rounded-sm mb-3 pl-3 mr-3",isLoading:A,setSrc:t.setSrc,medias:c})]})})},js=function(t){var n=(0,e.useState)(t.src),r=(0,a.Z)(n,2),o=r[0],i=r[1],s=(0,e.useState)([]),c=(0,a.Z)(s,2),l=c[0],f=c[1],d=(0,e.useState)(!0),p=(0,a.Z)(d,2),h=p[0],m=p[1],v=(0,e.useState)(!1),g=(0,a.Z)(v,2),y=g[0],b=g[1],x=(0,e.useState)(!1),w=(0,a.Z)(x,2),k=w[0],S=w[1],_=t.id,N=t.imgId,E=t.useCanvas,C=t.canvasId,T=function(e){e.preventDefault();e.target;S(!k)};(0,e.useEffect)((function(){i(t.src),E&&(document.getElementById("objectDetectionCanvas").innerHTML="")}),[t.src]);var I=function(e){S(!1),m(!0),t.onChange(e)};return(0,re.jsx)(is(),{value:l,onChange:function(e,n){console.log(e,n),f(e),b(!1),m(!0),t.onChange(e[n[0]].data_url)},maxNumber:2,dataURLKey:"data_url",children:function(e){e.imageList;var n=e.onImageUpload,r=(e.onImageRemoveAll,e.onImageUpdate,e.onImageRemove,e.isDragging),a=e.dragProps;return(0,re.jsxs)("div",u(u({id:_},a),{},{onMouseOver:function(){return b(!t.disabled&&!0)},onMouseLeave:function(){return b(!t.disabled&&!1)},className:"relative pointer-events-auto bg-white h-full overflow-hidden ".concat(t.className?t.className:""),style:t.style,children:[o&&(0,re.jsx)("img",{id:N,onLoad:function(){return m(!1)},src:o,alt:t.alt,crossOrigin:"anonymous",className:"select-none w-full h-full object-center object-cover bg-white ".concat(t.imgClassName&&t.imgClassName)}),E&&(0,re.jsx)("div",{id:C,className:"absolute top-0 left-0 w-full h-full pointer-events-none select-none",style:{backgroundColor:"transparent"}}),o&&h&&(0,re.jsx)("div",{className:"pointer-events-none absolute top-0 left-0 flex w-full h-full items-center justify-center bg-gray-800 bg-opacity-30",children:(0,re.jsx)(Os,{className:"text-white h-8 w-8 lg:h-12 lg:w-12"})}),(y&&!h&&!r&&!k&&!t.disabled||!o&&!t.disabled&&!t.controlsOnly&&!r)&&(0,re.jsxs)("div",{className:"absolute top-0 left-0 w-full h-full flex flex-row items-center justify-center bg-gray-800 bg-opacity-30",children:[(0,re.jsx)(ee,{onClick:function(e){return T(e)},className:"text-white m-2 hover:text-white cursor-pointer h-8 w-8 lg:h-12 lg:w-12"}),(0,re.jsx)(Q,{onClick:n,className:"text-white m-2 hover:text-white cursor-pointer h-8 w-8 lg:h-12 lg:w-12"})]}),t.controlsOnly&&(0,re.jsxs)("div",{className:"w-full h-full flex flex-row items-center justify-center",children:[(0,re.jsx)(ee,{onClick:function(e){return T(e)},className:"mr-2 text-gray-700 hover:text-gray-600 cursor-pointer h-4 w-4 lg:h-6 lg:w-6"}),(0,re.jsx)(Q,{onClick:n,className:"ml-2 text-gray-700 hover:text-gray-600 cursor-pointer h-4 w-4 lg:h-6 lg:w-6"})]}),(0,re.jsx)(Ps,{modal:t.modalLibrary,isHidden:!k||!!t.disabled,preSearchText:t.preSearchText,setSrc:I,setShowLibrary:S}),!o&&t.disabled&&(0,re.jsx)("div",{className:"absolute top-0 left-0 flex w-full h-full items-center justify-center bg-gray-800 bg-opacity-30",children:(0,re.jsx)(V,{className:"text-white w-1/2"})}),r&&(0,re.jsx)("div",{className:"pointer-events-none absolute top-0 left-0 w-full h-full flex flex-row items-center justify-center bg-gray-800 bg-opacity-30",children:(0,re.jsx)(Q,{className:"text-white hover:text-white cursor-pointer h-12 w-12"})})]}))}})},Fs=function(t){var n=t.preSelect,r=t.list,o=t.onChange,i=t.disabled,s=(0,e.useState)(n||""),u=(0,a.Z)(s,2),c=u[0],l=u[1];return(0,re.jsx)("div",{className:"w-52 lg:w-72 ".concat(i?"opacity-75":"cursor-pointer"),children:(0,re.jsx)(ji,{disabled:!!i,value:c,onChange:function(e){o(e),l(e)},children:(0,re.jsxs)("div",{className:"relative",children:[(0,re.jsxs)(ji.Button,{className:"".concat(i?"":"cursor-pointer"," relative text-white border-2  border-white w-full py-0.5 pl-3 pr-10 text-left rounded-lg cursor-default focus:outline-none focus-visible:ring-2 focus-visible:ring-opacity-75 focus-visible:ring-white focus-visible:ring-offset-orange-300 focus-visible:ring-offset-2 focus-visible:border-indigo-500 sm:text-sm"),children:[(0,re.jsx)("span",{className:"block truncate",children:c||"Choisir"}),(0,re.jsx)("span",{className:"absolute inset-y-0 right-0 flex items-center pr-2 pointer-events-none",children:(0,re.jsx)(rs,{className:"w-4 h-4 text-gray-200","aria-hidden":"true"})})]}),(0,re.jsx)(ts,{as:e.Fragment,leave:"transition ease-in duration-100",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:(0,re.jsx)(ji.Options,{className:"absolute w-full py-1 mt-1 overflow-auto text-base bg-white rounded-md shadow-lg max-h-60 ring-1 ring-black ring-opacity-5 focus:outline-none z-10 sm:text-sm",children:r.map((function(e,t){return(0,re.jsx)(ji.Option,{className:function(e){var t=e.active;return"".concat(t?"text-blue-900 bg-blue-100":"text-gray-900","\n                            select-none relative py-2 pl-10 pr-4 cursor-pointer")},value:e,children:function(t){var n=t.selected;t.active;return(0,re.jsxs)(re.Fragment,{children:[(0,re.jsx)("span",{className:"".concat(n?"font-medium":"font-normal"," block truncate"),children:e}),n?(0,re.jsx)("span",{className:"".concat("text-blue-600","\n                                    absolute inset-y-0 left-0 flex items-center pl-3"),children:(0,re.jsx)(ns,{className:"w-5 h-5","aria-hidden":"true"})}):null]})}},t)}))})})]})})})};var Ls=function(){var t=(0,e.useState)({width:void 0,height:void 0}),n=(0,a.Z)(t,2),r=n[0],o=n[1];return(0,e.useEffect)((function(){function e(){o({width:window.innerWidth,height:window.innerHeight})}return window.removeEventListener("resize",e),window.addEventListener("resize",e),e(),function(){return window.removeEventListener("resize",e)}}),[]),r},Bs=["TEXTAREA","INPUT"],zs={overrideSystem:!1,ignoreInputFields:!0,repeatOnHold:!0},Zs=function(e){e&&(e.preventDefault&&e.preventDefault(),e.stopPropagation?e.stopPropagation():window.event&&(window.event.cancelBubble=!0))},Vs=function(e){for(var t={},n=[],r=e.length,a=0,o=0;o<r;o++){var i=e[o];1!==t[i]&&(t[i]=1,n[a++]=i)}return n},Us=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2?arguments[2]:void 0,a=arguments.length>3?arguments[3]:void 0,o=r.indexOf(t),i=r.indexOf(t)>=0;if(!i)return!1;var s=Math.max(a.length-1,0);if(a.length&&a[s]!==r[s])return!1;if(0===o)return!(n>0)||a.indexOf(t)>=0;var u=o-1,c=r[u],l=a[u]===c;return!!l&&e(c,o,r,a)},qs=function(t,n,a){var o=u(u({},zs),a);if(!Array.isArray(t))throw new Error("The first parameter to `useKeyboardShortcut` must be an ordered array of `KeyboardEvent.key` strings.");if(!t.length)throw new Error("The first parameter to `useKeyboardShortcut` must contain atleast one `KeyboardEvent.key` string.");if(!n||"function"!==typeof n)throw new Error("The second parameter to `useKeyboardShortcut` must be a function that will be envoked when the keys are pressed.");var i=(0,e.useMemo)((function(){return t.join()}),[t]),s=(0,e.useMemo)((function(){return Vs(t).map((function(e){return String(e).toLowerCase()}))}),[i]),c=(0,e.useRef)([]),l=(0,e.useCallback)((function(e){var a=String(e.key).toLowerCase();if(s.indexOf(a)>=0&&((!e.repeat||o.repeatOnHold)&&(!o.ignoreInputFields||!(Bs.indexOf(e.target.tagName)>=0||"true"===e.target.contentEditable))&&(o.overrideSystem&&Zs(e),Us(a,null,s,c.current)))){var i=[].concat((0,r.Z)(c.current),[a]);return i.join()===s.join()?(n(t),!1):(c.current=i,!1)}}),[i,n,o.overrideSystem,o.ignoreInputFields]),f=(0,e.useCallback)((function(e){var t=String(e.key).toLowerCase();if(s.indexOf(t)>=0){var n=c.current.indexOf(t);if(n>=0){var r,a=[];for(r=0;r<c.current.length;++r)r!==n&&a.push(c.current[r]);return c.current=a,!1}}}),[i]),d=(0,e.useCallback)((function(){c.current=[]}),[]);return(0,e.useEffect)((function(){return window.addEventListener("keydown",l),window.addEventListener("keyup",f),function(){window.removeEventListener("keydown",l),window.removeEventListener("keyup",f)}}),[l,f,i]),(0,e.useEffect)((function(){d()}),[i,d]),{flushHeldKeys:d}};var Ws=function(t,n,r,a){var o=e.useRef(r),i=e.useRef(a);e.useEffect((function(){o.current=r,i.current=a})),e.useEffect((function(){var e=t&&"current"in t?t.current:t;if(e){var r=0;e.addEventListener(n,s);var a=i.current;return function(){r=1,e.removeEventListener(n,s),a&&a()}}function s(){if(!r){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];o.current.apply(this,t)}}}),[t,n])},Hs=function(t){var n=e.useRef(t);return e.useEffect((function(){n.current=t})),n},Gs="undefined"!==typeof performance?performance:Date,Ks=function(){return Gs.now()};function Xs(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:30,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=Hs(t),o=1e3/n,i=e.useRef(0),s=e.useRef(),u=function(){return s.current&&clearTimeout(s.current)},c=[n,r,a];function l(){i.current=0,u()}return e.useEffect((function(){return l}),c),e.useCallback((function(){var e=arguments,t=Ks(),n=function(){i.current=t,u(),a.current.apply(null,e)},c=i.current;if(r&&0===c)return n();if(t-c>o){if(c>0)return n();i.current=t}u(),s.current=setTimeout((function(){n(),i.current=0}),o)}),c)}function Ys(e,t){if("undefined"===typeof window)return e;var n=t.event,r=t.element,a="touches"in n?n.touches[0]:n,o=a.clientX,i=a.clientY,s=a.screenX,c=a.screenY,l=a.pageX,f=void 0===l?0:l,d=a.pageY,p=void 0===d?0:d,h=r.getBoundingClientRect(),m=f-h.left-(window.pageXOffset||window.scrollX),v=p-h.top-(window.pageYOffset||window.scrollY);return"touches"in n&&(m<0||v<0||m>h.width||v>h.height)?u(u({},e),{},{context:u(u({},e.context),{},{hoverStatus:"leave",touchStatus:"end"})}):{context:u(u({},e.context),{},{hoverStatus:"enter"}),mouse:u(u({},e.mouse),{},{x:m,y:v,pageX:f,pageY:p,clientX:o,clientY:i,screenX:s,screenY:c,elementWidth:h.width,elementHeight:h.height,isOver:!0,isTouch:"touches"in n})}}function $s(e,t){var n=e.mouse,r=e.context,a=Ys;return"mousemove"===t.type?"end"===r.touchStatus?e:a(e,t):"touchmove"===t.type?a({context:u(u({},r),{},{touchStatus:"start"}),mouse:n},t):"touchdown"===t.type?a({context:u(u({},r),{},{touchStatus:"start"}),mouse:u(u({},n),{},{isDown:!0})},t):"mousedown"===t.type?{context:r,mouse:u(u({},n),{},{isDown:!0})}:"mouseup"===t.type?{context:r,mouse:u(u({},n),{},{isDown:!1})}:"mouseleave"===t.type?{context:u(u({},r),{},{hoverStatus:"leave"}),mouse:u(u({},n),{},{isOver:!1})}:"touchleave"===t.type?{context:u(u({},r),{},{hoverStatus:"leave",touchStatus:"end"}),mouse:u(u({},n),{},{isOver:!1,isDown:!1})}:"activeStatus"===t.type?{context:u(u({},r),{},{activeStatus:t.value}),mouse:n}:e}var Js={x:null,y:null,pageX:null,pageY:null,clientX:null,clientY:null,screenX:null,screenY:null,elementWidth:null,elementHeight:null,isOver:!1,isDown:!1,isTouch:!1},Qs={hoverStatus:"idle",touchStatus:"idle",activeStatus:"inactive"},eu=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.fps,o=void 0===r?30:r,i=n.enterDelay,s=void 0===i?0:i,u=n.leaveDelay,c=void 0===u?0:u,l=e.useReducer($s,{mouse:Js,context:Qs}),f=(0,a.Z)(l,2),d=f[0],p=f[1],h=Xs((function(e){var n=t&&"current"in t?t.current:t;n&&p({type:"mousemove",event:e,element:n})}),o,!0),m=Xs((function(e){var n=t&&"current"in t?t.current:t;n&&p({type:"touchmove",event:e,element:n})}),o,!0),v=Xs((function(){return p({type:"mouseleave"})}),o,!1),g=Xs((function(e){var n=t&&"current"in t?t.current:t;n&&p("touches"in e?{type:"touchdown",element:n,event:e}:{type:"mousedown",element:n,event:e})}),o,!0),y=Xs((function(){return p({type:"mouseup"})}),o,!1),b=Xs((function(){return p({type:"touchleave"})}),o,!1);function x(){return p({type:"activeStatus",value:"active"})}function w(){return p({type:"activeStatus",value:"inactive"})}return Ws(t,"mouseenter",h),Ws(t,"mousemove",h),Ws(t,"mouseleave",v),Ws(t,"mousedown",g),Ws("undefined"!==typeof window?window:null,"mousedown",g),Ws("undefined"!==typeof window?window:null,"mouseup",y),Ws(t,"touchstart",g),Ws(t,"touchmove",m),Ws(t,"touchend",b),Ws(t,"touchcancel",b),e.useEffect((function(){if("enter"===d.context.hoverStatus){if(s){var e=setTimeout(x,s);return function(){return clearTimeout(e)}}p({type:"activeStatus",value:"active"})}else{if(c){var t=setTimeout(w,c);return function(){return clearTimeout(t)}}p({type:"activeStatus",value:"inactive"})}}),[d.context.hoverStatus,s,c]),"active"===d.context.activeStatus?d.mouse:Js},tu=n(7326),nu=n(136),ru=n(3668);function au(e){this.content=e}au.prototype={constructor:au,find:function(e){for(var t=0;t<this.content.length;t+=2)if(this.content[t]===e)return t;return-1},get:function(e){var t=this.find(e);return-1==t?void 0:this.content[t+1]},update:function(e,t,n){var r=n&&n!=e?this.remove(n):this,a=r.find(e),o=r.content.slice();return-1==a?o.push(n||e,t):(o[a+1]=t,n&&(o[a]=n)),new au(o)},remove:function(e){var t=this.find(e);if(-1==t)return this;var n=this.content.slice();return n.splice(t,2),new au(n)},addToStart:function(e,t){return new au([e,t].concat(this.remove(e).content))},addToEnd:function(e,t){var n=this.remove(e).content.slice();return n.push(e,t),new au(n)},addBefore:function(e,t,n){var r=this.remove(t),a=r.content.slice(),o=r.find(e);return a.splice(-1==o?a.length:o,0,t,n),new au(a)},forEach:function(e){for(var t=0;t<this.content.length;t+=2)e(this.content[t],this.content[t+1])},prepend:function(e){return(e=au.from(e)).size?new au(e.content.concat(this.subtract(e).content)):this},append:function(e){return(e=au.from(e)).size?new au(this.subtract(e).content.concat(e.content)):this},subtract:function(e){var t=this;e=au.from(e);for(var n=0;n<e.content.length;n+=2)t=t.remove(e.content[n]);return t},get size(){return this.content.length>>1}},au.from=function(e){if(e instanceof au)return e;var t=[];if(e)for(var n in e)t.push(n,e[n]);return new au(t)};var ou=au;function iu(e,t,n){for(var r=0;;r++){if(r==e.childCount||r==t.childCount)return e.childCount==t.childCount?null:n;var a=e.child(r),o=t.child(r);if(a!=o){if(!a.sameMarkup(o))return n;if(a.isText&&a.text!=o.text){for(var i=0;a.text[i]==o.text[i];i++)n++;return n}if(a.content.size||o.content.size){var s=iu(a.content,o.content,n+1);if(null!=s)return s}n+=a.nodeSize}else n+=a.nodeSize}}function su(e,t,n,r){for(var a=e.childCount,o=t.childCount;;){if(0==a||0==o)return a==o?null:{a:n,b:r};var i=e.child(--a),s=t.child(--o),u=i.nodeSize;if(i!=s){if(!i.sameMarkup(s))return{a:n,b:r};if(i.isText&&i.text!=s.text){for(var c=0,l=Math.min(i.text.length,s.text.length);c<l&&i.text[i.text.length-c-1]==s.text[s.text.length-c-1];)c++,n--,r--;return{a:n,b:r}}if(i.content.size||s.content.size){var f=su(i.content,s.content,n-1,r-1);if(f)return f}n-=u,r-=u}else n-=u,r-=u}}var uu=function(e,t){if(this.content=e,this.size=t||0,null==t)for(var n=0;n<e.length;n++)this.size+=e[n].nodeSize},cu={firstChild:{configurable:!0},lastChild:{configurable:!0},childCount:{configurable:!0}};uu.prototype.nodesBetween=function(e,t,n,r,a){void 0===r&&(r=0);for(var o=0,i=0;i<t;o++){var s=this.content[o],u=i+s.nodeSize;if(u>e&&!1!==n(s,r+i,a,o)&&s.content.size){var c=i+1;s.nodesBetween(Math.max(0,e-c),Math.min(s.content.size,t-c),n,r+c)}i=u}},uu.prototype.descendants=function(e){this.nodesBetween(0,this.size,e)},uu.prototype.textBetween=function(e,t,n,r){var a="",o=!0;return this.nodesBetween(e,t,(function(i,s){i.isText?(a+=i.text.slice(Math.max(e,s)-s,t-s),o=!n):i.isLeaf&&r?(a+="function"===typeof r?r(i):r,o=!n):!o&&i.isBlock&&(a+=n,o=!0)}),0),a},uu.prototype.append=function(e){if(!e.size)return this;if(!this.size)return e;var t=this.lastChild,n=e.firstChild,r=this.content.slice(),a=0;for(t.isText&&t.sameMarkup(n)&&(r[r.length-1]=t.withText(t.text+n.text),a=1);a<e.content.length;a++)r.push(e.content[a]);return new uu(r,this.size+e.size)},uu.prototype.cut=function(e,t){if(null==t&&(t=this.size),0==e&&t==this.size)return this;var n=[],r=0;if(t>e)for(var a=0,o=0;o<t;a++){var i=this.content[a],s=o+i.nodeSize;s>e&&((o<e||s>t)&&(i=i.isText?i.cut(Math.max(0,e-o),Math.min(i.text.length,t-o)):i.cut(Math.max(0,e-o-1),Math.min(i.content.size,t-o-1))),n.push(i),r+=i.nodeSize),o=s}return new uu(n,r)},uu.prototype.cutByIndex=function(e,t){return e==t?uu.empty:0==e&&t==this.content.length?this:new uu(this.content.slice(e,t))},uu.prototype.replaceChild=function(e,t){var n=this.content[e];if(n==t)return this;var r=this.content.slice(),a=this.size+t.nodeSize-n.nodeSize;return r[e]=t,new uu(r,a)},uu.prototype.addToStart=function(e){return new uu([e].concat(this.content),this.size+e.nodeSize)},uu.prototype.addToEnd=function(e){return new uu(this.content.concat(e),this.size+e.nodeSize)},uu.prototype.eq=function(e){if(this.content.length!=e.content.length)return!1;for(var t=0;t<this.content.length;t++)if(!this.content[t].eq(e.content[t]))return!1;return!0},cu.firstChild.get=function(){return this.content.length?this.content[0]:null},cu.lastChild.get=function(){return this.content.length?this.content[this.content.length-1]:null},cu.childCount.get=function(){return this.content.length},uu.prototype.child=function(e){var t=this.content[e];if(!t)throw new RangeError("Index "+e+" out of range for "+this);return t},uu.prototype.maybeChild=function(e){return this.content[e]},uu.prototype.forEach=function(e){for(var t=0,n=0;t<this.content.length;t++){var r=this.content[t];e(r,n,t),n+=r.nodeSize}},uu.prototype.findDiffStart=function(e,t){return void 0===t&&(t=0),iu(this,e,t)},uu.prototype.findDiffEnd=function(e,t,n){return void 0===t&&(t=this.size),void 0===n&&(n=e.size),su(this,e,t,n)},uu.prototype.findIndex=function(e,t){if(void 0===t&&(t=-1),0==e)return fu(0,e);if(e==this.size)return fu(this.content.length,e);if(e>this.size||e<0)throw new RangeError("Position "+e+" outside of fragment ("+this+")");for(var n=0,r=0;;n++){var a=r+this.child(n).nodeSize;if(a>=e)return a==e||t>0?fu(n+1,a):fu(n,r);r=a}},uu.prototype.toString=function(){return"<"+this.toStringInner()+">"},uu.prototype.toStringInner=function(){return this.content.join(", ")},uu.prototype.toJSON=function(){return this.content.length?this.content.map((function(e){return e.toJSON()})):null},uu.fromJSON=function(e,t){if(!t)return uu.empty;if(!Array.isArray(t))throw new RangeError("Invalid input for Fragment.fromJSON");return new uu(t.map(e.nodeFromJSON))},uu.fromArray=function(e){if(!e.length)return uu.empty;for(var t,n=0,r=0;r<e.length;r++){var a=e[r];n+=a.nodeSize,r&&a.isText&&e[r-1].sameMarkup(a)?(t||(t=e.slice(0,r)),t[t.length-1]=a.withText(t[t.length-1].text+a.text)):t&&t.push(a)}return new uu(t||e,n)},uu.from=function(e){if(!e)return uu.empty;if(e instanceof uu)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new uu([e],e.nodeSize);throw new RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))},Object.defineProperties(uu.prototype,cu);var lu={index:0,offset:0};function fu(e,t){return lu.index=e,lu.offset=t,lu}function du(e,t){if(e===t)return!0;if(!e||"object"!=typeof e||!t||"object"!=typeof t)return!1;var n=Array.isArray(e);if(Array.isArray(t)!=n)return!1;if(n){if(e.length!=t.length)return!1;for(var r=0;r<e.length;r++)if(!du(e[r],t[r]))return!1}else{for(var a in e)if(!(a in t)||!du(e[a],t[a]))return!1;for(var o in t)if(!(o in e))return!1}return!0}uu.empty=new uu([],0);var pu=function(e,t){this.type=e,this.attrs=t};function hu(e){var t=Error.call(this,e);return t.__proto__=hu.prototype,t}pu.prototype.addToSet=function(e){for(var t,n=!1,r=0;r<e.length;r++){var a=e[r];if(this.eq(a))return e;if(this.type.excludes(a.type))t||(t=e.slice(0,r));else{if(a.type.excludes(this.type))return e;!n&&a.type.rank>this.type.rank&&(t||(t=e.slice(0,r)),t.push(this),n=!0),t&&t.push(a)}}return t||(t=e.slice()),n||t.push(this),t},pu.prototype.removeFromSet=function(e){for(var t=0;t<e.length;t++)if(this.eq(e[t]))return e.slice(0,t).concat(e.slice(t+1));return e},pu.prototype.isInSet=function(e){for(var t=0;t<e.length;t++)if(this.eq(e[t]))return!0;return!1},pu.prototype.eq=function(e){return this==e||this.type==e.type&&du(this.attrs,e.attrs)},pu.prototype.toJSON=function(){var e={type:this.type.name};for(var t in this.attrs){e.attrs=this.attrs;break}return e},pu.fromJSON=function(e,t){if(!t)throw new RangeError("Invalid input for Mark.fromJSON");var n=e.marks[t.type];if(!n)throw new RangeError("There is no mark type "+t.type+" in this schema");return n.create(t.attrs)},pu.sameSet=function(e,t){if(e==t)return!0;if(e.length!=t.length)return!1;for(var n=0;n<e.length;n++)if(!e[n].eq(t[n]))return!1;return!0},pu.setFrom=function(e){if(!e||0==e.length)return pu.none;if(e instanceof pu)return[e];var t=e.slice();return t.sort((function(e,t){return e.type.rank-t.type.rank})),t},pu.none=[],hu.prototype=Object.create(Error.prototype),hu.prototype.constructor=hu,hu.prototype.name="ReplaceError";var mu=function(e,t,n){this.content=e,this.openStart=t,this.openEnd=n},vu={size:{configurable:!0}};function gu(e,t,n){var r=e.findIndex(t),a=r.index,o=r.offset,i=e.maybeChild(a),s=e.findIndex(n),u=s.index,c=s.offset;if(o==t||i.isText){if(c!=n&&!e.child(u).isText)throw new RangeError("Removing non-flat range");return e.cut(0,t).append(e.cut(n))}if(a!=u)throw new RangeError("Removing non-flat range");return e.replaceChild(a,i.copy(gu(i.content,t-o-1,n-o-1)))}function yu(e,t,n,r){var a=e.findIndex(t),o=a.index,i=a.offset,s=e.maybeChild(o);if(i==t||s.isText)return r&&!r.canReplace(o,o,n)?null:e.cut(0,t).append(n).append(e.cut(t));var u=yu(s.content,t-i-1,n);return u&&e.replaceChild(o,s.copy(u))}function bu(e,t,n){if(n.openStart>e.depth)throw new hu("Inserted content deeper than insertion position");if(e.depth-n.openStart!=t.depth-n.openEnd)throw new hu("Inconsistent open depths");return xu(e,t,n,0)}function xu(e,t,n,r){var a=e.index(r),o=e.node(r);if(a==t.index(r)&&r<e.depth-n.openStart){var i=xu(e,t,n,r+1);return o.copy(o.content.replaceChild(a,i))}if(n.content.size){if(n.openStart||n.openEnd||e.depth!=r||t.depth!=r){var s=function(e,t){for(var n=t.depth-e.openStart,r=t.node(n).copy(e.content),a=n-1;a>=0;a--)r=t.node(a).copy(uu.from(r));return{start:r.resolveNoCache(e.openStart+n),end:r.resolveNoCache(r.content.size-e.openEnd-n)}}(n,e);return Nu(o,Eu(e,s.start,s.end,t,r))}var u=e.parent,c=u.content;return Nu(u,c.cut(0,e.parentOffset).append(n.content).append(c.cut(t.parentOffset)))}return Nu(o,Cu(e,t,r))}function wu(e,t){if(!t.type.compatibleContent(e.type))throw new hu("Cannot join "+t.type.name+" onto "+e.type.name)}function ku(e,t,n){var r=e.node(n);return wu(r,t.node(n)),r}function Su(e,t){var n=t.length-1;n>=0&&e.isText&&e.sameMarkup(t[n])?t[n]=e.withText(t[n].text+e.text):t.push(e)}function _u(e,t,n,r){var a=(t||e).node(n),o=0,i=t?t.index(n):a.childCount;e&&(o=e.index(n),e.depth>n?o++:e.textOffset&&(Su(e.nodeAfter,r),o++));for(var s=o;s<i;s++)Su(a.child(s),r);t&&t.depth==n&&t.textOffset&&Su(t.nodeBefore,r)}function Nu(e,t){if(!e.type.validContent(t))throw new hu("Invalid content for node "+e.type.name);return e.copy(t)}function Eu(e,t,n,r,a){var o=e.depth>a&&ku(e,t,a+1),i=r.depth>a&&ku(n,r,a+1),s=[];return _u(null,e,a,s),o&&i&&t.index(a)==n.index(a)?(wu(o,i),Su(Nu(o,Eu(e,t,n,r,a+1)),s)):(o&&Su(Nu(o,Cu(e,t,a+1)),s),_u(t,n,a,s),i&&Su(Nu(i,Cu(n,r,a+1)),s)),_u(r,null,a,s),new uu(s)}function Cu(e,t,n){var r=[];(_u(null,e,n,r),e.depth>n)&&Su(Nu(ku(e,t,n+1),Cu(e,t,n+1)),r);return _u(t,null,n,r),new uu(r)}vu.size.get=function(){return this.content.size-this.openStart-this.openEnd},mu.prototype.insertAt=function(e,t){var n=yu(this.content,e+this.openStart,t,null);return n&&new mu(n,this.openStart,this.openEnd)},mu.prototype.removeBetween=function(e,t){return new mu(gu(this.content,e+this.openStart,t+this.openStart),this.openStart,this.openEnd)},mu.prototype.eq=function(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd},mu.prototype.toString=function(){return this.content+"("+this.openStart+","+this.openEnd+")"},mu.prototype.toJSON=function(){if(!this.content.size)return null;var e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e},mu.fromJSON=function(e,t){if(!t)return mu.empty;var n=t.openStart||0,r=t.openEnd||0;if("number"!=typeof n||"number"!=typeof r)throw new RangeError("Invalid input for Slice.fromJSON");return new mu(uu.fromJSON(e,t.content),n,r)},mu.maxOpen=function(e,t){void 0===t&&(t=!0);for(var n=0,r=0,a=e.firstChild;a&&!a.isLeaf&&(t||!a.type.spec.isolating);a=a.firstChild)n++;for(var o=e.lastChild;o&&!o.isLeaf&&(t||!o.type.spec.isolating);o=o.lastChild)r++;return new mu(e,n,r)},Object.defineProperties(mu.prototype,vu),mu.empty=new mu(uu.empty,0,0);var Tu=function(e,t,n){this.pos=e,this.path=t,this.depth=t.length/3-1,this.parentOffset=n},Iu={parent:{configurable:!0},doc:{configurable:!0},textOffset:{configurable:!0},nodeAfter:{configurable:!0},nodeBefore:{configurable:!0}};Tu.prototype.resolveDepth=function(e){return null==e?this.depth:e<0?this.depth+e:e},Iu.parent.get=function(){return this.node(this.depth)},Iu.doc.get=function(){return this.node(0)},Tu.prototype.node=function(e){return this.path[3*this.resolveDepth(e)]},Tu.prototype.index=function(e){return this.path[3*this.resolveDepth(e)+1]},Tu.prototype.indexAfter=function(e){return e=this.resolveDepth(e),this.index(e)+(e!=this.depth||this.textOffset?1:0)},Tu.prototype.start=function(e){return 0==(e=this.resolveDepth(e))?0:this.path[3*e-1]+1},Tu.prototype.end=function(e){return e=this.resolveDepth(e),this.start(e)+this.node(e).content.size},Tu.prototype.before=function(e){if(!(e=this.resolveDepth(e)))throw new RangeError("There is no position before the top-level node");return e==this.depth+1?this.pos:this.path[3*e-1]},Tu.prototype.after=function(e){if(!(e=this.resolveDepth(e)))throw new RangeError("There is no position after the top-level node");return e==this.depth+1?this.pos:this.path[3*e-1]+this.path[3*e].nodeSize},Iu.textOffset.get=function(){return this.pos-this.path[this.path.length-1]},Iu.nodeAfter.get=function(){var e=this.parent,t=this.index(this.depth);if(t==e.childCount)return null;var n=this.pos-this.path[this.path.length-1],r=e.child(t);return n?e.child(t).cut(n):r},Iu.nodeBefore.get=function(){var e=this.index(this.depth),t=this.pos-this.path[this.path.length-1];return t?this.parent.child(e).cut(0,t):0==e?null:this.parent.child(e-1)},Tu.prototype.posAtIndex=function(e,t){t=this.resolveDepth(t);for(var n=this.path[3*t],r=0==t?0:this.path[3*t-1]+1,a=0;a<e;a++)r+=n.child(a).nodeSize;return r},Tu.prototype.marks=function(){var e=this.parent,t=this.index();if(0==e.content.size)return pu.none;if(this.textOffset)return e.child(t).marks;var n=e.maybeChild(t-1),r=e.maybeChild(t);if(!n){var a=n;n=r,r=a}for(var o=n.marks,i=0;i<o.length;i++)!1!==o[i].type.spec.inclusive||r&&o[i].isInSet(r.marks)||(o=o[i--].removeFromSet(o));return o},Tu.prototype.marksAcross=function(e){var t=this.parent.maybeChild(this.index());if(!t||!t.isInline)return null;for(var n=t.marks,r=e.parent.maybeChild(e.index()),a=0;a<n.length;a++)!1!==n[a].type.spec.inclusive||r&&n[a].isInSet(r.marks)||(n=n[a--].removeFromSet(n));return n},Tu.prototype.sharedDepth=function(e){for(var t=this.depth;t>0;t--)if(this.start(t)<=e&&this.end(t)>=e)return t;return 0},Tu.prototype.blockRange=function(e,t){if(void 0===e&&(e=this),e.pos<this.pos)return e.blockRange(this);for(var n=this.depth-(this.parent.inlineContent||this.pos==e.pos?1:0);n>=0;n--)if(e.pos<=this.end(n)&&(!t||t(this.node(n))))return new Mu(this,e,n)},Tu.prototype.sameParent=function(e){return this.pos-this.parentOffset==e.pos-e.parentOffset},Tu.prototype.max=function(e){return e.pos>this.pos?e:this},Tu.prototype.min=function(e){return e.pos<this.pos?e:this},Tu.prototype.toString=function(){for(var e="",t=1;t<=this.depth;t++)e+=(e?"/":"")+this.node(t).type.name+"_"+this.index(t-1);return e+":"+this.parentOffset},Tu.resolve=function(e,t){if(!(t>=0&&t<=e.content.size))throw new RangeError("Position "+t+" out of range");for(var n=[],r=0,a=t,o=e;;){var i=o.content.findIndex(a),s=i.index,u=i.offset,c=a-u;if(n.push(o,s,r+u),!c)break;if((o=o.child(s)).isText)break;a=c-1,r+=u+1}return new Tu(t,n,a)},Tu.resolveCached=function(e,t){for(var n=0;n<Ou.length;n++){var r=Ou[n];if(r.pos==t&&r.doc==e)return r}var a=Ou[Au]=Tu.resolve(e,t);return Au=(Au+1)%Du,a},Object.defineProperties(Tu.prototype,Iu);var Ou=[],Au=0,Du=12,Mu=function(e,t,n){this.$from=e,this.$to=t,this.depth=n},Ru={start:{configurable:!0},end:{configurable:!0},parent:{configurable:!0},startIndex:{configurable:!0},endIndex:{configurable:!0}};Ru.start.get=function(){return this.$from.before(this.depth+1)},Ru.end.get=function(){return this.$to.after(this.depth+1)},Ru.parent.get=function(){return this.$from.node(this.depth)},Ru.startIndex.get=function(){return this.$from.index(this.depth)},Ru.endIndex.get=function(){return this.$to.indexAfter(this.depth)},Object.defineProperties(Mu.prototype,Ru);var Pu=Object.create(null),ju=function(e,t,n,r){this.type=e,this.attrs=t,this.content=n||uu.empty,this.marks=r||pu.none},Fu={nodeSize:{configurable:!0},childCount:{configurable:!0},textContent:{configurable:!0},firstChild:{configurable:!0},lastChild:{configurable:!0},isBlock:{configurable:!0},isTextblock:{configurable:!0},inlineContent:{configurable:!0},isInline:{configurable:!0},isText:{configurable:!0},isLeaf:{configurable:!0},isAtom:{configurable:!0}};Fu.nodeSize.get=function(){return this.isLeaf?1:2+this.content.size},Fu.childCount.get=function(){return this.content.childCount},ju.prototype.child=function(e){return this.content.child(e)},ju.prototype.maybeChild=function(e){return this.content.maybeChild(e)},ju.prototype.forEach=function(e){this.content.forEach(e)},ju.prototype.nodesBetween=function(e,t,n,r){void 0===r&&(r=0),this.content.nodesBetween(e,t,n,r,this)},ju.prototype.descendants=function(e){this.nodesBetween(0,this.content.size,e)},Fu.textContent.get=function(){return this.textBetween(0,this.content.size,"")},ju.prototype.textBetween=function(e,t,n,r){return this.content.textBetween(e,t,n,r)},Fu.firstChild.get=function(){return this.content.firstChild},Fu.lastChild.get=function(){return this.content.lastChild},ju.prototype.eq=function(e){return this==e||this.sameMarkup(e)&&this.content.eq(e.content)},ju.prototype.sameMarkup=function(e){return this.hasMarkup(e.type,e.attrs,e.marks)},ju.prototype.hasMarkup=function(e,t,n){return this.type==e&&du(this.attrs,t||e.defaultAttrs||Pu)&&pu.sameSet(this.marks,n||pu.none)},ju.prototype.copy=function(e){return void 0===e&&(e=null),e==this.content?this:new this.constructor(this.type,this.attrs,e,this.marks)},ju.prototype.mark=function(e){return e==this.marks?this:new this.constructor(this.type,this.attrs,this.content,e)},ju.prototype.cut=function(e,t){return 0==e&&t==this.content.size?this:this.copy(this.content.cut(e,t))},ju.prototype.slice=function(e,t,n){if(void 0===t&&(t=this.content.size),void 0===n&&(n=!1),e==t)return mu.empty;var r=this.resolve(e),a=this.resolve(t),o=n?0:r.sharedDepth(t),i=r.start(o),s=r.node(o).content.cut(r.pos-i,a.pos-i);return new mu(s,r.depth-o,a.depth-o)},ju.prototype.replace=function(e,t,n){return bu(this.resolve(e),this.resolve(t),n)},ju.prototype.nodeAt=function(e){for(var t=this;;){var n=t.content.findIndex(e),r=n.index,a=n.offset;if(!(t=t.maybeChild(r)))return null;if(a==e||t.isText)return t;e-=a+1}},ju.prototype.childAfter=function(e){var t=this.content.findIndex(e),n=t.index,r=t.offset;return{node:this.content.maybeChild(n),index:n,offset:r}},ju.prototype.childBefore=function(e){if(0==e)return{node:null,index:0,offset:0};var t=this.content.findIndex(e),n=t.index,r=t.offset;if(r<e)return{node:this.content.child(n),index:n,offset:r};var a=this.content.child(n-1);return{node:a,index:n-1,offset:r-a.nodeSize}},ju.prototype.resolve=function(e){return Tu.resolveCached(this,e)},ju.prototype.resolveNoCache=function(e){return Tu.resolve(this,e)},ju.prototype.rangeHasMark=function(e,t,n){var r=!1;return t>e&&this.nodesBetween(e,t,(function(e){return n.isInSet(e.marks)&&(r=!0),!r})),r},Fu.isBlock.get=function(){return this.type.isBlock},Fu.isTextblock.get=function(){return this.type.isTextblock},Fu.inlineContent.get=function(){return this.type.inlineContent},Fu.isInline.get=function(){return this.type.isInline},Fu.isText.get=function(){return this.type.isText},Fu.isLeaf.get=function(){return this.type.isLeaf},Fu.isAtom.get=function(){return this.type.isAtom},ju.prototype.toString=function(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);var e=this.type.name;return this.content.size&&(e+="("+this.content.toStringInner()+")"),Bu(this.marks,e)},ju.prototype.contentMatchAt=function(e){var t=this.type.contentMatch.matchFragment(this.content,0,e);if(!t)throw new Error("Called contentMatchAt on a node with invalid content");return t},ju.prototype.canReplace=function(e,t,n,r,a){void 0===n&&(n=uu.empty),void 0===r&&(r=0),void 0===a&&(a=n.childCount);var o=this.contentMatchAt(e).matchFragment(n,r,a),i=o&&o.matchFragment(this.content,t);if(!i||!i.validEnd)return!1;for(var s=r;s<a;s++)if(!this.type.allowsMarks(n.child(s).marks))return!1;return!0},ju.prototype.canReplaceWith=function(e,t,n,r){if(r&&!this.type.allowsMarks(r))return!1;var a=this.contentMatchAt(e).matchType(n),o=a&&a.matchFragment(this.content,t);return!!o&&o.validEnd},ju.prototype.canAppend=function(e){return e.content.size?this.canReplace(this.childCount,this.childCount,e.content):this.type.compatibleContent(e.type)},ju.prototype.check=function(){if(!this.type.validContent(this.content))throw new RangeError("Invalid content for node "+this.type.name+": "+this.content.toString().slice(0,50));for(var e=pu.none,t=0;t<this.marks.length;t++)e=this.marks[t].addToSet(e);if(!pu.sameSet(e,this.marks))throw new RangeError("Invalid collection of marks for node "+this.type.name+": "+this.marks.map((function(e){return e.type.name})));this.content.forEach((function(e){return e.check()}))},ju.prototype.toJSON=function(){var e={type:this.type.name};for(var t in this.attrs){e.attrs=this.attrs;break}return this.content.size&&(e.content=this.content.toJSON()),this.marks.length&&(e.marks=this.marks.map((function(e){return e.toJSON()}))),e},ju.fromJSON=function(e,t){if(!t)throw new RangeError("Invalid input for Node.fromJSON");var n=null;if(t.marks){if(!Array.isArray(t.marks))throw new RangeError("Invalid mark data for Node.fromJSON");n=t.marks.map(e.markFromJSON)}if("text"==t.type){if("string"!=typeof t.text)throw new RangeError("Invalid text node in JSON");return e.text(t.text,n)}var r=uu.fromJSON(e,t.content);return e.nodeType(t.type).create(t.attrs,r,n)},Object.defineProperties(ju.prototype,Fu);var Lu=function(e){function t(t,n,r,a){if(e.call(this,t,n,null,a),!r)throw new RangeError("Empty text nodes are not allowed");this.text=r}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={textContent:{configurable:!0},nodeSize:{configurable:!0}};return t.prototype.toString=function(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):Bu(this.marks,JSON.stringify(this.text))},n.textContent.get=function(){return this.text},t.prototype.textBetween=function(e,t){return this.text.slice(e,t)},n.nodeSize.get=function(){return this.text.length},t.prototype.mark=function(e){return e==this.marks?this:new t(this.type,this.attrs,this.text,e)},t.prototype.withText=function(e){return e==this.text?this:new t(this.type,this.attrs,e,this.marks)},t.prototype.cut=function(e,t){return void 0===e&&(e=0),void 0===t&&(t=this.text.length),0==e&&t==this.text.length?this:this.withText(this.text.slice(e,t))},t.prototype.eq=function(e){return this.sameMarkup(e)&&this.text==e.text},t.prototype.toJSON=function(){var t=e.prototype.toJSON.call(this);return t.text=this.text,t},Object.defineProperties(t.prototype,n),t}(ju);function Bu(e,t){for(var n=e.length-1;n>=0;n--)t=e[n].type.name+"("+t+")";return t}var zu=function(e){this.validEnd=e,this.next=[],this.wrapCache=[]},Zu={inlineContent:{configurable:!0},defaultType:{configurable:!0},edgeCount:{configurable:!0}};zu.parse=function(e,t){var n=new Vu(e,t);if(null==n.next)return zu.empty;var r=qu(n);n.next&&n.err("Unexpected trailing text");var a=function(e){var t=Object.create(null);return n(Yu(e,0));function n(r){var a=[];r.forEach((function(t){e[t].forEach((function(t){var n=t.term,r=t.to;if(n){var o=a.indexOf(n),i=o>-1&&a[o+1];Yu(e,r).forEach((function(e){i||a.push(n,i=[]),-1==i.indexOf(e)&&i.push(e)}))}}))}));for(var o=t[r.join(",")]=new zu(r.indexOf(e.length-1)>-1),i=0;i<a.length;i+=2){var s=a[i+1].sort(Xu);o.next.push(a[i],t[s.join(",")]||n(s))}return o}}(function(e){var t=[[]];return a(o(e,0),n()),t;function n(){return t.push([])-1}function r(e,n,r){var a={term:r,to:n};return t[e].push(a),a}function a(e,t){e.forEach((function(e){return e.to=t}))}function o(e,t){if("choice"==e.type)return e.exprs.reduce((function(e,n){return e.concat(o(n,t))}),[]);if("seq"==e.type)for(var i=0;;i++){var s=o(e.exprs[i],t);if(i==e.exprs.length-1)return s;a(s,t=n())}else{if("star"==e.type){var u=n();return r(t,u),a(o(e.expr,u),u),[r(u)]}if("plus"==e.type){var c=n();return a(o(e.expr,t),c),a(o(e.expr,c),c),[r(c)]}if("opt"==e.type)return[r(t)].concat(o(e.expr,t));if("range"==e.type){for(var l=t,f=0;f<e.min;f++){var d=n();a(o(e.expr,l),d),l=d}if(-1==e.max)a(o(e.expr,l),l);else for(var p=e.min;p<e.max;p++){var h=n();r(l,h),a(o(e.expr,l),h),l=h}return[r(l)]}if("name"==e.type)return[r(t,null,e.value)]}}}(r));return function(e,t){for(var n=0,r=[e];n<r.length;n++){for(var a=r[n],o=!a.validEnd,i=[],s=0;s<a.next.length;s+=2){var u=a.next[s],c=a.next[s+1];i.push(u.name),!o||u.isText||u.hasRequiredAttrs()||(o=!1),-1==r.indexOf(c)&&r.push(c)}o&&t.err("Only non-generatable nodes ("+i.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}(a,n),a},zu.prototype.matchType=function(e){for(var t=0;t<this.next.length;t+=2)if(this.next[t]==e)return this.next[t+1];return null},zu.prototype.matchFragment=function(e,t,n){void 0===t&&(t=0),void 0===n&&(n=e.childCount);for(var r=this,a=t;r&&a<n;a++)r=r.matchType(e.child(a).type);return r},Zu.inlineContent.get=function(){var e=this.next[0];return!!e&&e.isInline},Zu.defaultType.get=function(){for(var e=0;e<this.next.length;e+=2){var t=this.next[e];if(!t.isText&&!t.hasRequiredAttrs())return t}},zu.prototype.compatible=function(e){for(var t=0;t<this.next.length;t+=2)for(var n=0;n<e.next.length;n+=2)if(this.next[t]==e.next[n])return!0;return!1},zu.prototype.fillBefore=function(e,t,n){void 0===t&&(t=!1),void 0===n&&(n=0);var r=[this];return function a(o,i){var s=o.matchFragment(e,n);if(s&&(!t||s.validEnd))return uu.from(i.map((function(e){return e.createAndFill()})));for(var u=0;u<o.next.length;u+=2){var c=o.next[u],l=o.next[u+1];if(!c.isText&&!c.hasRequiredAttrs()&&-1==r.indexOf(l)){r.push(l);var f=a(l,i.concat(c));if(f)return f}}}(this,[])},zu.prototype.findWrapping=function(e){for(var t=0;t<this.wrapCache.length;t+=2)if(this.wrapCache[t]==e)return this.wrapCache[t+1];var n=this.computeWrapping(e);return this.wrapCache.push(e,n),n},zu.prototype.computeWrapping=function(e){for(var t=Object.create(null),n=[{match:this,type:null,via:null}];n.length;){var r=n.shift(),a=r.match;if(a.matchType(e)){for(var o=[],i=r;i.type;i=i.via)o.push(i.type);return o.reverse()}for(var s=0;s<a.next.length;s+=2){var u=a.next[s];u.isLeaf||u.hasRequiredAttrs()||u.name in t||r.type&&!a.next[s+1].validEnd||(n.push({match:u.contentMatch,type:u,via:r}),t[u.name]=!0)}}},Zu.edgeCount.get=function(){return this.next.length>>1},zu.prototype.edge=function(e){var t=e<<1;if(t>=this.next.length)throw new RangeError("There's no "+e+"th edge in this content match");return{type:this.next[t],next:this.next[t+1]}},zu.prototype.toString=function(){var e=[];return function t(n){e.push(n);for(var r=1;r<n.next.length;r+=2)-1==e.indexOf(n.next[r])&&t(n.next[r])}(this),e.map((function(t,n){for(var r=n+(t.validEnd?"*":" ")+" ",a=0;a<t.next.length;a+=2)r+=(a?", ":"")+t.next[a].name+"->"+e.indexOf(t.next[a+1]);return r})).join("\n")},Object.defineProperties(zu.prototype,Zu),zu.empty=new zu(!0);var Vu=function(e,t){this.string=e,this.nodeTypes=t,this.inline=null,this.pos=0,this.tokens=e.split(/\s*(?=\b|\W|$)/),""==this.tokens[this.tokens.length-1]&&this.tokens.pop(),""==this.tokens[0]&&this.tokens.shift()},Uu={next:{configurable:!0}};function qu(e){var t=[];do{t.push(Wu(e))}while(e.eat("|"));return 1==t.length?t[0]:{type:"choice",exprs:t}}function Wu(e){var t=[];do{t.push(Hu(e))}while(e.next&&")"!=e.next&&"|"!=e.next);return 1==t.length?t[0]:{type:"seq",exprs:t}}function Hu(e){for(var t=function(e){if(e.eat("(")){var t=qu(e);return e.eat(")")||e.err("Missing closing paren"),t}if(!/\W/.test(e.next)){var n=function(e,t){var n=e.nodeTypes,r=n[t];if(r)return[r];var a=[];for(var o in n){var i=n[o];i.groups.indexOf(t)>-1&&a.push(i)}0==a.length&&e.err("No node type or group '"+t+"' found");return a}(e,e.next).map((function(t){return null==e.inline?e.inline=t.isInline:e.inline!=t.isInline&&e.err("Mixing inline and block content"),{type:"name",value:t}}));return e.pos++,1==n.length?n[0]:{type:"choice",exprs:n}}e.err("Unexpected token '"+e.next+"'")}(e);;)if(e.eat("+"))t={type:"plus",expr:t};else if(e.eat("*"))t={type:"star",expr:t};else if(e.eat("?"))t={type:"opt",expr:t};else{if(!e.eat("{"))break;t=Ku(e,t)}return t}function Gu(e){/\D/.test(e.next)&&e.err("Expected number, got '"+e.next+"'");var t=Number(e.next);return e.pos++,t}function Ku(e,t){var n=Gu(e),r=n;return e.eat(",")&&(r="}"!=e.next?Gu(e):-1),e.eat("}")||e.err("Unclosed braced range"),{type:"range",min:n,max:r,expr:t}}function Xu(e,t){return t-e}function Yu(e,t){var n=[];return function t(r){var a=e[r];if(1==a.length&&!a[0].term)return t(a[0].to);n.push(r);for(var o=0;o<a.length;o++){var i=a[o],s=i.term,u=i.to;s||-1!=n.indexOf(u)||t(u)}}(t),n.sort(Xu)}function $u(e){var t=Object.create(null);for(var n in e){var r=e[n];if(!r.hasDefault)return null;t[n]=r.default}return t}function Ju(e,t){var n=Object.create(null);for(var r in e){var a=t&&t[r];if(void 0===a){var o=e[r];if(!o.hasDefault)throw new RangeError("No value supplied for attribute "+r);a=o.default}n[r]=a}return n}function Qu(e){var t=Object.create(null);if(e)for(var n in e)t[n]=new nc(e[n]);return t}Uu.next.get=function(){return this.tokens[this.pos]},Vu.prototype.eat=function(e){return this.next==e&&(this.pos++||!0)},Vu.prototype.err=function(e){throw new SyntaxError(e+" (in content expression '"+this.string+"')")},Object.defineProperties(Vu.prototype,Uu);var ec=function(e,t,n){this.name=e,this.schema=t,this.spec=n,this.groups=n.group?n.group.split(" "):[],this.attrs=Qu(n.attrs),this.defaultAttrs=$u(this.attrs),this.contentMatch=null,this.markSet=null,this.inlineContent=null,this.isBlock=!(n.inline||"text"==e),this.isText="text"==e},tc={isInline:{configurable:!0},isTextblock:{configurable:!0},isLeaf:{configurable:!0},isAtom:{configurable:!0},whitespace:{configurable:!0}};tc.isInline.get=function(){return!this.isBlock},tc.isTextblock.get=function(){return this.isBlock&&this.inlineContent},tc.isLeaf.get=function(){return this.contentMatch==zu.empty},tc.isAtom.get=function(){return this.isLeaf||this.spec.atom},tc.whitespace.get=function(){return this.spec.whitespace||(this.spec.code?"pre":"normal")},ec.prototype.hasRequiredAttrs=function(){for(var e in this.attrs)if(this.attrs[e].isRequired)return!0;return!1},ec.prototype.compatibleContent=function(e){return this==e||this.contentMatch.compatible(e.contentMatch)},ec.prototype.computeAttrs=function(e){return!e&&this.defaultAttrs?this.defaultAttrs:Ju(this.attrs,e)},ec.prototype.create=function(e,t,n){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new ju(this,this.computeAttrs(e),uu.from(t),pu.setFrom(n))},ec.prototype.createChecked=function(e,t,n){if(t=uu.from(t),!this.validContent(t))throw new RangeError("Invalid content for node "+this.name);return new ju(this,this.computeAttrs(e),t,pu.setFrom(n))},ec.prototype.createAndFill=function(e,t,n){if(e=this.computeAttrs(e),(t=uu.from(t)).size){var r=this.contentMatch.fillBefore(t);if(!r)return null;t=r.append(t)}var a=this.contentMatch.matchFragment(t).fillBefore(uu.empty,!0);return a?new ju(this,e,t.append(a),pu.setFrom(n)):null},ec.prototype.validContent=function(e){var t=this.contentMatch.matchFragment(e);if(!t||!t.validEnd)return!1;for(var n=0;n<e.childCount;n++)if(!this.allowsMarks(e.child(n).marks))return!1;return!0},ec.prototype.allowsMarkType=function(e){return null==this.markSet||this.markSet.indexOf(e)>-1},ec.prototype.allowsMarks=function(e){if(null==this.markSet)return!0;for(var t=0;t<e.length;t++)if(!this.allowsMarkType(e[t].type))return!1;return!0},ec.prototype.allowedMarks=function(e){if(null==this.markSet)return e;for(var t,n=0;n<e.length;n++)this.allowsMarkType(e[n].type)?t&&t.push(e[n]):t||(t=e.slice(0,n));return t?t.length?t:pu.empty:e},ec.compile=function(e,t){var n=Object.create(null);e.forEach((function(e,r){return n[e]=new ec(e,t,r)}));var r=t.spec.topNode||"doc";if(!n[r])throw new RangeError("Schema is missing its top node type ('"+r+"')");if(!n.text)throw new RangeError("Every schema needs a 'text' type");for(var a in n.text.attrs)throw new RangeError("The text node type should not have attributes");return n},Object.defineProperties(ec.prototype,tc);var nc=function(e){this.hasDefault=Object.prototype.hasOwnProperty.call(e,"default"),this.default=e.default},rc={isRequired:{configurable:!0}};rc.isRequired.get=function(){return!this.hasDefault},Object.defineProperties(nc.prototype,rc);var ac=function(e,t,n,r){this.name=e,this.schema=n,this.spec=r,this.attrs=Qu(r.attrs),this.rank=t,this.excluded=null;var a=$u(this.attrs);this.instance=a&&new pu(this,a)};ac.prototype.create=function(e){return!e&&this.instance?this.instance:new pu(this,Ju(this.attrs,e))},ac.compile=function(e,t){var n=Object.create(null),r=0;return e.forEach((function(e,a){return n[e]=new ac(e,r++,t,a)})),n},ac.prototype.removeFromSet=function(e){for(var t=0;t<e.length;t++)e[t].type==this&&(e=e.slice(0,t).concat(e.slice(t+1)),t--);return e},ac.prototype.isInSet=function(e){for(var t=0;t<e.length;t++)if(e[t].type==this)return e[t]},ac.prototype.excludes=function(e){return this.excluded.indexOf(e)>-1};var oc=function(e){for(var t in this.spec={},e)this.spec[t]=e[t];this.spec.nodes=ou.from(e.nodes),this.spec.marks=ou.from(e.marks),this.nodes=ec.compile(this.spec.nodes,this),this.marks=ac.compile(this.spec.marks,this);var n=Object.create(null);for(var r in this.nodes){if(r in this.marks)throw new RangeError(r+" can not be both a node and a mark");var a=this.nodes[r],o=a.spec.content||"",i=a.spec.marks;a.contentMatch=n[o]||(n[o]=zu.parse(o,this.nodes)),a.inlineContent=a.contentMatch.inlineContent,a.markSet="_"==i?null:i?ic(this,i.split(" ")):""!=i&&a.inlineContent?null:[]}for(var s in this.marks){var u=this.marks[s],c=u.spec.excludes;u.excluded=null==c?[u]:""==c?[]:ic(this,c.split(" "))}this.nodeFromJSON=this.nodeFromJSON.bind(this),this.markFromJSON=this.markFromJSON.bind(this),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached=Object.create(null),this.cached.wrappings=Object.create(null)};function ic(e,t){for(var n=[],r=0;r<t.length;r++){var a=t[r],o=e.marks[a],i=o;if(o)n.push(o);else for(var s in e.marks){var u=e.marks[s];("_"==a||u.spec.group&&u.spec.group.split(" ").indexOf(a)>-1)&&n.push(i=u)}if(!i)throw new SyntaxError("Unknown mark type: '"+t[r]+"'")}return n}oc.prototype.node=function(e,t,n,r){if("string"==typeof e)e=this.nodeType(e);else{if(!(e instanceof ec))throw new RangeError("Invalid node type: "+e);if(e.schema!=this)throw new RangeError("Node type from different schema used ("+e.name+")")}return e.createChecked(t,n,r)},oc.prototype.text=function(e,t){var n=this.nodes.text;return new Lu(n,n.defaultAttrs,e,pu.setFrom(t))},oc.prototype.mark=function(e,t){return"string"==typeof e&&(e=this.marks[e]),e.create(t)},oc.prototype.nodeFromJSON=function(e){return ju.fromJSON(this,e)},oc.prototype.markFromJSON=function(e){return pu.fromJSON(this,e)},oc.prototype.nodeType=function(e){var t=this.nodes[e];if(!t)throw new RangeError("Unknown node type: "+e);return t};var sc=function(e,t){var n=this;this.schema=e,this.rules=t,this.tags=[],this.styles=[],t.forEach((function(e){e.tag?n.tags.push(e):e.style&&n.styles.push(e)})),this.normalizeLists=!this.tags.some((function(t){if(!/^(ul|ol)\b/.test(t.tag)||!t.node)return!1;var n=e.nodes[t.node];return n.contentMatch.matchType(n)}))};sc.prototype.parse=function(e,t){void 0===t&&(t={});var n=new pc(this,t,!1);return n.addAll(e,null,t.from,t.to),n.finish()},sc.prototype.parseSlice=function(e,t){void 0===t&&(t={});var n=new pc(this,t,!0);return n.addAll(e,null,t.from,t.to),mu.maxOpen(n.finish())},sc.prototype.matchTag=function(e,t,n){for(var r=n?this.tags.indexOf(n)+1:0;r<this.tags.length;r++){var a=this.tags[r];if(mc(e,a.tag)&&(void 0===a.namespace||e.namespaceURI==a.namespace)&&(!a.context||t.matchesContext(a.context))){if(a.getAttrs){var o=a.getAttrs(e);if(!1===o)continue;a.attrs=o}return a}}},sc.prototype.matchStyle=function(e,t,n,r){for(var a=r?this.styles.indexOf(r)+1:0;a<this.styles.length;a++){var o=this.styles[a];if(!(0!=o.style.indexOf(e)||o.context&&!n.matchesContext(o.context)||o.style.length>e.length&&(61!=o.style.charCodeAt(e.length)||o.style.slice(e.length+1)!=t))){if(o.getAttrs){var i=o.getAttrs(t);if(!1===i)continue;o.attrs=i}return o}}},sc.schemaRules=function(e){var t=[];function n(e){for(var n=null==e.priority?50:e.priority,r=0;r<t.length;r++){var a=t[r];if((null==a.priority?50:a.priority)<n)break}t.splice(r,0,e)}var r=function(t){var r=e.marks[t].spec.parseDOM;r&&r.forEach((function(e){n(e=vc(e)),e.mark=t}))};for(var a in e.marks)r(a);var o=function(t){var r=e.nodes[i].spec.parseDOM;r&&r.forEach((function(e){n(e=vc(e)),e.node=i}))};for(var i in e.nodes)o();return t},sc.fromSchema=function(e){return e.cached.domParser||(e.cached.domParser=new sc(e,sc.schemaRules(e)))};var uc={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},cc={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},lc={ol:!0,ul:!0};function fc(e,t,n){return null!=t?(t?1:0)|("full"===t?2:0):e&&"pre"==e.whitespace?3:-5&n}var dc=function(e,t,n,r,a,o,i){this.type=e,this.attrs=t,this.solid=a,this.match=o||(4&i?null:e.contentMatch),this.options=i,this.content=[],this.marks=n,this.activeMarks=pu.none,this.pendingMarks=r,this.stashMarks=[]};dc.prototype.findWrapping=function(e){if(!this.match){if(!this.type)return[];var t=this.type.contentMatch.fillBefore(uu.from(e));if(!t){var n,r=this.type.contentMatch;return(n=r.findWrapping(e.type))?(this.match=r,n):null}this.match=this.type.contentMatch.matchFragment(t)}return this.match.findWrapping(e.type)},dc.prototype.finish=function(e){if(!(1&this.options)){var t,n=this.content[this.content.length-1];n&&n.isText&&(t=/[ \t\r\n\u000c]+$/.exec(n.text))&&(n.text.length==t[0].length?this.content.pop():this.content[this.content.length-1]=n.withText(n.text.slice(0,n.text.length-t[0].length)))}var r=uu.from(this.content);return!e&&this.match&&(r=r.append(this.match.fillBefore(uu.empty,!0))),this.type?this.type.create(this.attrs,r,this.marks):r},dc.prototype.popFromStashMark=function(e){for(var t=this.stashMarks.length-1;t>=0;t--)if(e.eq(this.stashMarks[t]))return this.stashMarks.splice(t,1)[0]},dc.prototype.applyPending=function(e){for(var t=0,n=this.pendingMarks;t<n.length;t++){var r=n[t];(this.type?this.type.allowsMarkType(r.type):gc(r.type,e))&&!r.isInSet(this.activeMarks)&&(this.activeMarks=r.addToSet(this.activeMarks),this.pendingMarks=r.removeFromSet(this.pendingMarks))}},dc.prototype.inlineContext=function(e){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:e.parentNode&&!uc.hasOwnProperty(e.parentNode.nodeName.toLowerCase())};var pc=function(e,t,n){this.parser=e,this.options=t,this.isOpen=n;var r,a=t.topNode,o=fc(null,t.preserveWhitespace,0)|(n?4:0);r=a?new dc(a.type,a.attrs,pu.none,pu.none,!0,t.topMatch||a.type.contentMatch,o):new dc(n?null:e.schema.topNodeType,null,pu.none,pu.none,!0,null,o),this.nodes=[r],this.open=0,this.find=t.findPositions,this.needsBlock=!1},hc={top:{configurable:!0},currentPos:{configurable:!0}};function mc(e,t){return(e.matches||e.msMatchesSelector||e.webkitMatchesSelector||e.mozMatchesSelector).call(e,t)}function vc(e){var t={};for(var n in e)t[n]=e[n];return t}function gc(e,t){var n=t.schema.nodes,r=function(r){var a=n[r];if(a.allowsMarkType(e)){var o=[];return function e(n){o.push(n);for(var r=0;r<n.edgeCount;r++){var a=n.edge(r),i=a.type,s=a.next;if(i==t)return!0;if(o.indexOf(s)<0&&e(s))return!0}}(a.contentMatch)?{v:!0}:void 0}};for(var a in n){var o=r(a);if(o)return o.v}}hc.top.get=function(){return this.nodes[this.open]},pc.prototype.addDOM=function(e){if(3==e.nodeType)this.addTextNode(e);else if(1==e.nodeType){var t=e.getAttribute("style"),n=t?this.readStyles(function(e){var t,n=/\s*([\w-]+)\s*:\s*([^;]+)/g,r=[];for(;t=n.exec(e);)r.push(t[1],t[2].trim());return r}(t)):null,r=this.top;if(null!=n)for(var a=0;a<n.length;a++)this.addPendingMark(n[a]);if(this.addElement(e),null!=n)for(var o=0;o<n.length;o++)this.removePendingMark(n[o],r)}},pc.prototype.addTextNode=function(e){var t=e.nodeValue,n=this.top;if(2&n.options||n.inlineContext(e)||/[^ \t\r\n\u000c]/.test(t)){if(1&n.options)t=2&n.options?t.replace(/\r\n?/g,"\n"):t.replace(/\r?\n|\r/g," ");else if(t=t.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(t)&&this.open==this.nodes.length-1){var r=n.content[n.content.length-1],a=e.previousSibling;(!r||a&&"BR"==a.nodeName||r.isText&&/[ \t\r\n\u000c]$/.test(r.text))&&(t=t.slice(1))}t&&this.insertNode(this.parser.schema.text(t)),this.findInText(e)}else this.findInside(e)},pc.prototype.addElement=function(e,t){var n,r=e.nodeName.toLowerCase();lc.hasOwnProperty(r)&&this.parser.normalizeLists&&function(e){for(var t=e.firstChild,n=null;t;t=t.nextSibling){var r=1==t.nodeType?t.nodeName.toLowerCase():null;r&&lc.hasOwnProperty(r)&&n?(n.appendChild(t),t=n):"li"==r?n=t:r&&(n=null)}}(e);var a=this.options.ruleFromNode&&this.options.ruleFromNode(e)||(n=this.parser.matchTag(e,this,t));if(a?a.ignore:cc.hasOwnProperty(r))this.findInside(e),this.ignoreFallback(e);else if(!a||a.skip||a.closeParent){a&&a.closeParent?this.open=Math.max(0,this.open-1):a&&a.skip.nodeType&&(e=a.skip);var o,i=this.top,s=this.needsBlock;if(uc.hasOwnProperty(r))o=!0,i.type||(this.needsBlock=!0);else if(!e.firstChild)return void this.leafFallback(e);this.addAll(e),o&&this.sync(i),this.needsBlock=s}else this.addElementByRule(e,a,!1===a.consuming?n:null)},pc.prototype.leafFallback=function(e){"BR"==e.nodeName&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(e.ownerDocument.createTextNode("\n"))},pc.prototype.ignoreFallback=function(e){"BR"!=e.nodeName||this.top.type&&this.top.type.inlineContent||this.findPlace(this.parser.schema.text("-"))},pc.prototype.readStyles=function(e){var t=pu.none;e:for(var n=0;n<e.length;n+=2)for(var r=null;;){var a=this.parser.matchStyle(e[n],e[n+1],this,r);if(!a)continue e;if(a.ignore)return null;if(t=this.parser.schema.marks[a.mark].create(a.attrs).addToSet(t),!1!==a.consuming)break;r=a}return t},pc.prototype.addElementByRule=function(e,t,n){var r,a,o,i=this;t.node?(a=this.parser.schema.nodes[t.node]).isLeaf?this.insertNode(a.create(t.attrs))||this.leafFallback(e):r=this.enter(a,t.attrs,t.preserveWhitespace):(o=this.parser.schema.marks[t.mark].create(t.attrs),this.addPendingMark(o));var s=this.top;if(a&&a.isLeaf)this.findInside(e);else if(n)this.addElement(e,n);else if(t.getContent)this.findInside(e),t.getContent(e,this.parser.schema).forEach((function(e){return i.insertNode(e)}));else{var u=t.contentElement;"string"==typeof u?u=e.querySelector(u):"function"==typeof u&&(u=u(e)),u||(u=e),this.findAround(e,u,!0),this.addAll(u,r)}r&&(this.sync(s),this.open--),o&&this.removePendingMark(o,s)},pc.prototype.addAll=function(e,t,n,r){for(var a=n||0,o=n?e.childNodes[n]:e.firstChild,i=null==r?null:e.childNodes[r];o!=i;o=o.nextSibling,++a)this.findAtPoint(e,a),this.addDOM(o),t&&uc.hasOwnProperty(o.nodeName.toLowerCase())&&this.sync(t);this.findAtPoint(e,a)},pc.prototype.findPlace=function(e){for(var t,n,r=this.open;r>=0;r--){var a=this.nodes[r],o=a.findWrapping(e);if(o&&(!t||t.length>o.length)&&(t=o,n=a,!o.length))break;if(a.solid)break}if(!t)return!1;this.sync(n);for(var i=0;i<t.length;i++)this.enterInner(t[i],null,!1);return!0},pc.prototype.insertNode=function(e){if(e.isInline&&this.needsBlock&&!this.top.type){var t=this.textblockFromContext();t&&this.enterInner(t)}if(this.findPlace(e)){this.closeExtra();var n=this.top;n.applyPending(e.type),n.match&&(n.match=n.match.matchType(e.type));for(var r=n.activeMarks,a=0;a<e.marks.length;a++)n.type&&!n.type.allowsMarkType(e.marks[a].type)||(r=e.marks[a].addToSet(r));return n.content.push(e.mark(r)),!0}return!1},pc.prototype.enter=function(e,t,n){var r=this.findPlace(e.create(t));return r&&this.enterInner(e,t,!0,n),r},pc.prototype.enterInner=function(e,t,n,r){this.closeExtra();var a=this.top;a.applyPending(e),a.match=a.match&&a.match.matchType(e,t);var o=fc(e,r,a.options);4&a.options&&0==a.content.length&&(o|=4),this.nodes.push(new dc(e,t,a.activeMarks,a.pendingMarks,n,null,o)),this.open++},pc.prototype.closeExtra=function(e){var t=this.nodes.length-1;if(t>this.open){for(;t>this.open;t--)this.nodes[t-1].content.push(this.nodes[t].finish(e));this.nodes.length=this.open+1}},pc.prototype.finish=function(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(this.isOpen||this.options.topOpen)},pc.prototype.sync=function(e){for(var t=this.open;t>=0;t--)if(this.nodes[t]==e)return void(this.open=t)},hc.currentPos.get=function(){this.closeExtra();for(var e=0,t=this.open;t>=0;t--){for(var n=this.nodes[t].content,r=n.length-1;r>=0;r--)e+=n[r].nodeSize;t&&e++}return e},pc.prototype.findAtPoint=function(e,t){if(this.find)for(var n=0;n<this.find.length;n++)this.find[n].node==e&&this.find[n].offset==t&&(this.find[n].pos=this.currentPos)},pc.prototype.findInside=function(e){if(this.find)for(var t=0;t<this.find.length;t++)null==this.find[t].pos&&1==e.nodeType&&e.contains(this.find[t].node)&&(this.find[t].pos=this.currentPos)},pc.prototype.findAround=function(e,t,n){if(e!=t&&this.find)for(var r=0;r<this.find.length;r++){if(null==this.find[r].pos&&1==e.nodeType&&e.contains(this.find[r].node))t.compareDocumentPosition(this.find[r].node)&(n?2:4)&&(this.find[r].pos=this.currentPos)}},pc.prototype.findInText=function(e){if(this.find)for(var t=0;t<this.find.length;t++)this.find[t].node==e&&(this.find[t].pos=this.currentPos-(e.nodeValue.length-this.find[t].offset))},pc.prototype.matchesContext=function(e){var t=this;if(e.indexOf("|")>-1)return e.split(/\s*\|\s*/).some(this.matchesContext,this);var n=e.split("/"),r=this.options.context,a=!this.isOpen&&(!r||r.parent.type==this.nodes[0].type),o=-(r?r.depth+1:0)+(a?0:1);return function e(i,s){for(;i>=0;i--){var u=n[i];if(""==u){if(i==n.length-1||0==i)continue;for(;s>=o;s--)if(e(i-1,s))return!0;return!1}var c=s>0||0==s&&a?t.nodes[s].type:r&&s>=o?r.node(s-o).type:null;if(!c||c.name!=u&&-1==c.groups.indexOf(u))return!1;s--}return!0}(n.length-1,this.open)},pc.prototype.textblockFromContext=function(){var e=this.options.context;if(e)for(var t=e.depth;t>=0;t--){var n=e.node(t).contentMatchAt(e.indexAfter(t)).defaultType;if(n&&n.isTextblock&&n.defaultAttrs)return n}for(var r in this.parser.schema.nodes){var a=this.parser.schema.nodes[r];if(a.isTextblock&&a.defaultAttrs)return a}},pc.prototype.addPendingMark=function(e){var t=function(e,t){for(var n=0;n<t.length;n++)if(e.eq(t[n]))return t[n]}(e,this.top.pendingMarks);t&&this.top.stashMarks.push(t),this.top.pendingMarks=e.addToSet(this.top.pendingMarks)},pc.prototype.removePendingMark=function(e,t){for(var n=this.open;n>=0;n--){var r=this.nodes[n];if(r.pendingMarks.lastIndexOf(e)>-1)r.pendingMarks=e.removeFromSet(r.pendingMarks);else{r.activeMarks=e.removeFromSet(r.activeMarks);var a=r.popFromStashMark(e);a&&r.type&&r.type.allowsMarkType(a.type)&&(r.activeMarks=a.addToSet(r.activeMarks))}if(r==t)break}},Object.defineProperties(pc.prototype,hc);var yc=function(e,t){this.nodes=e||{},this.marks=t||{}};function bc(e){var t={};for(var n in e){var r=e[n].spec.toDOM;r&&(t[n]=r)}return t}function xc(e){return e.document||window.document}yc.prototype.serializeFragment=function(e,t,n){var r=this;void 0===t&&(t={}),n||(n=xc(t).createDocumentFragment());var a=n,o=null;return e.forEach((function(e){if(o||e.marks.length){o||(o=[]);for(var n=0,i=0;n<o.length&&i<e.marks.length;){var s=e.marks[i];if(r.marks[s.type.name]){if(!s.eq(o[n])||!1===s.type.spec.spanning)break;n+=2,i++}else i++}for(;n<o.length;)a=o.pop(),o.pop();for(;i<e.marks.length;){var u=e.marks[i++],c=r.serializeMark(u,e.isInline,t);c&&(o.push(u,a),a.appendChild(c.dom),a=c.contentDOM||c.dom)}}a.appendChild(r.serializeNodeInner(e,t))})),n},yc.prototype.serializeNodeInner=function(e,t){void 0===t&&(t={});var n=yc.renderSpec(xc(t),this.nodes[e.type.name](e)),r=n.dom,a=n.contentDOM;if(a){if(e.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");t.onContent?t.onContent(e,a,t):this.serializeFragment(e.content,t,a)}return r},yc.prototype.serializeNode=function(e,t){void 0===t&&(t={});for(var n=this.serializeNodeInner(e,t),r=e.marks.length-1;r>=0;r--){var a=this.serializeMark(e.marks[r],e.isInline,t);a&&((a.contentDOM||a.dom).appendChild(n),n=a.dom)}return n},yc.prototype.serializeMark=function(e,t,n){void 0===n&&(n={});var r=this.marks[e.type.name];return r&&yc.renderSpec(xc(n),r(e,t))},yc.renderSpec=function(e,t,n){if(void 0===n&&(n=null),"string"==typeof t)return{dom:e.createTextNode(t)};if(null!=t.nodeType)return{dom:t};if(t.dom&&null!=t.dom.nodeType)return t;var r=t[0],a=r.indexOf(" ");a>0&&(n=r.slice(0,a),r=r.slice(a+1));var o=null,i=n?e.createElementNS(n,r):e.createElement(r),s=t[1],u=1;if(s&&"object"==typeof s&&null==s.nodeType&&!Array.isArray(s))for(var c in u=2,s)if(null!=s[c]){var l=c.indexOf(" ");l>0?i.setAttributeNS(c.slice(0,l),c.slice(l+1),s[c]):i.setAttribute(c,s[c])}for(var f=u;f<t.length;f++){var d=t[f];if(0===d){if(f<t.length-1||f>u)throw new RangeError("Content hole must be the only child of its parent node");return{dom:i,contentDOM:i}}var p=yc.renderSpec(e,d,n),h=p.dom,m=p.contentDOM;if(i.appendChild(h),m){if(o)throw new RangeError("Multiple content holes");o=m}}return{dom:i,contentDOM:o}},yc.fromSchema=function(e){return e.cached.domSerializer||(e.cached.domSerializer=new yc(this.nodesFromSchema(e),this.marksFromSchema(e)))},yc.nodesFromSchema=function(e){var t=bc(e.nodes);return t.text||(t.text=function(e){return e.text}),t},yc.marksFromSchema=function(e){return bc(e.marks)};var wc=Math.pow(2,16);function kc(e,t){return e+t*wc}function Sc(e){return 65535&e}var _c=function(e,t,n){void 0===t&&(t=!1),void 0===n&&(n=null),this.pos=e,this.deleted=t,this.recover=n},Nc=function e(t,n){if(void 0===n&&(n=!1),!t.length&&e.empty)return e.empty;this.ranges=t,this.inverted=n};Nc.prototype.recover=function(e){var t=0,n=Sc(e);if(!this.inverted)for(var r=0;r<n;r++)t+=this.ranges[3*r+2]-this.ranges[3*r+1];return this.ranges[3*n]+t+function(e){return(e-(65535&e))/wc}(e)},Nc.prototype.mapResult=function(e,t){return void 0===t&&(t=1),this._map(e,t,!1)},Nc.prototype.map=function(e,t){return void 0===t&&(t=1),this._map(e,t,!0)},Nc.prototype._map=function(e,t,n){for(var r=0,a=this.inverted?2:1,o=this.inverted?1:2,i=0;i<this.ranges.length;i+=3){var s=this.ranges[i]-(this.inverted?r:0);if(s>e)break;var u=this.ranges[i+a],c=this.ranges[i+o],l=s+u;if(e<=l){var f=s+r+((u?e==s?-1:e==l?1:t:t)<0?0:c);if(n)return f;var d=e==(t<0?s:l)?null:kc(i/3,e-s);return new _c(f,t<0?e!=s:e!=l,d)}r+=c-u}return n?e+r:new _c(e+r)},Nc.prototype.touches=function(e,t){for(var n=0,r=Sc(t),a=this.inverted?2:1,o=this.inverted?1:2,i=0;i<this.ranges.length;i+=3){var s=this.ranges[i]-(this.inverted?n:0);if(s>e)break;var u=this.ranges[i+a];if(e<=s+u&&i==3*r)return!0;n+=this.ranges[i+o]-u}return!1},Nc.prototype.forEach=function(e){for(var t=this.inverted?2:1,n=this.inverted?1:2,r=0,a=0;r<this.ranges.length;r+=3){var o=this.ranges[r],i=o-(this.inverted?a:0),s=o+(this.inverted?0:a),u=this.ranges[r+t],c=this.ranges[r+n];e(i,i+u,s,s+c),a+=c-u}},Nc.prototype.invert=function(){return new Nc(this.ranges,!this.inverted)},Nc.prototype.toString=function(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)},Nc.offset=function(e){return 0==e?Nc.empty:new Nc(e<0?[0,-e,0]:[0,0,e])},Nc.empty=new Nc([]);var Ec=function(e,t,n,r){this.maps=e||[],this.from=n||0,this.to=null==r?this.maps.length:r,this.mirror=t};function Cc(e){var t=Error.call(this,e);return t.__proto__=Cc.prototype,t}Ec.prototype.slice=function(e,t){return void 0===e&&(e=0),void 0===t&&(t=this.maps.length),new Ec(this.maps,this.mirror,e,t)},Ec.prototype.copy=function(){return new Ec(this.maps.slice(),this.mirror&&this.mirror.slice(),this.from,this.to)},Ec.prototype.appendMap=function(e,t){this.to=this.maps.push(e),null!=t&&this.setMirror(this.maps.length-1,t)},Ec.prototype.appendMapping=function(e){for(var t=0,n=this.maps.length;t<e.maps.length;t++){var r=e.getMirror(t);this.appendMap(e.maps[t],null!=r&&r<t?n+r:null)}},Ec.prototype.getMirror=function(e){if(this.mirror)for(var t=0;t<this.mirror.length;t++)if(this.mirror[t]==e)return this.mirror[t+(t%2?-1:1)]},Ec.prototype.setMirror=function(e,t){this.mirror||(this.mirror=[]),this.mirror.push(e,t)},Ec.prototype.appendMappingInverted=function(e){for(var t=e.maps.length-1,n=this.maps.length+e.maps.length;t>=0;t--){var r=e.getMirror(t);this.appendMap(e.maps[t].invert(),null!=r&&r>t?n-r-1:null)}},Ec.prototype.invert=function(){var e=new Ec;return e.appendMappingInverted(this),e},Ec.prototype.map=function(e,t){if(void 0===t&&(t=1),this.mirror)return this._map(e,t,!0);for(var n=this.from;n<this.to;n++)e=this.maps[n].map(e,t);return e},Ec.prototype.mapResult=function(e,t){return void 0===t&&(t=1),this._map(e,t,!1)},Ec.prototype._map=function(e,t,n){for(var r=!1,a=this.from;a<this.to;a++){var o=this.maps[a].mapResult(e,t);if(null!=o.recover){var i=this.getMirror(a);if(null!=i&&i>a&&i<this.to){a=i,e=this.maps[i].recover(o.recover);continue}}o.deleted&&(r=!0),e=o.pos}return n?e:new _c(e,r)},Cc.prototype=Object.create(Error.prototype),Cc.prototype.constructor=Cc,Cc.prototype.name="TransformError";var Tc=function(e){this.doc=e,this.steps=[],this.docs=[],this.mapping=new Ec},Ic={before:{configurable:!0},docChanged:{configurable:!0}};function Oc(){throw new Error("Override me")}Ic.before.get=function(){return this.docs.length?this.docs[0]:this.doc},Tc.prototype.step=function(e){var t=this.maybeStep(e);if(t.failed)throw new Cc(t.failed);return this},Tc.prototype.maybeStep=function(e){var t=e.apply(this.doc);return t.failed||this.addStep(e,t.doc),t},Ic.docChanged.get=function(){return this.steps.length>0},Tc.prototype.addStep=function(e,t){this.docs.push(this.doc),this.steps.push(e),this.mapping.appendMap(e.getMap()),this.doc=t},Object.defineProperties(Tc.prototype,Ic);var Ac=Object.create(null),Dc=function(){};Dc.prototype.apply=function(e){return Oc()},Dc.prototype.getMap=function(){return Nc.empty},Dc.prototype.invert=function(e){return Oc()},Dc.prototype.map=function(e){return Oc()},Dc.prototype.merge=function(e){return null},Dc.prototype.toJSON=function(){return Oc()},Dc.fromJSON=function(e,t){if(!t||!t.stepType)throw new RangeError("Invalid input for Step.fromJSON");var n=Ac[t.stepType];if(!n)throw new RangeError("No step type "+t.stepType+" defined");return n.fromJSON(e,t)},Dc.jsonID=function(e,t){if(e in Ac)throw new RangeError("Duplicate use of step JSON ID "+e);return Ac[e]=t,t.prototype.jsonID=e,t};var Mc=function(e,t){this.doc=e,this.failed=t};Mc.ok=function(e){return new Mc(e,null)},Mc.fail=function(e){return new Mc(null,e)},Mc.fromReplace=function(e,t,n,r){try{return Mc.ok(e.replace(t,n,r))}catch(a){if(a instanceof hu)return Mc.fail(a.message);throw a}};var Rc=function(e){function t(t,n,r,a){e.call(this),this.from=t,this.to=n,this.slice=r,this.structure=!!a}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.apply=function(e){return this.structure&&jc(e,this.from,this.to)?Mc.fail("Structure replace would overwrite content"):Mc.fromReplace(e,this.from,this.to,this.slice)},t.prototype.getMap=function(){return new Nc([this.from,this.to-this.from,this.slice.size])},t.prototype.invert=function(e){return new t(this.from,this.from+this.slice.size,e.slice(this.from,this.to))},t.prototype.map=function(e){var n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deleted&&r.deleted?null:new t(n.pos,Math.max(n.pos,r.pos),this.slice)},t.prototype.merge=function(e){if(!(e instanceof t)||e.structure||this.structure)return null;if(this.from+this.slice.size!=e.from||this.slice.openEnd||e.slice.openStart){if(e.to!=this.from||this.slice.openStart||e.slice.openEnd)return null;var n=this.slice.size+e.slice.size==0?mu.empty:new mu(e.slice.content.append(this.slice.content),e.slice.openStart,this.slice.openEnd);return new t(e.from,this.to,n,this.structure)}var r=this.slice.size+e.slice.size==0?mu.empty:new mu(this.slice.content.append(e.slice.content),this.slice.openStart,e.slice.openEnd);return new t(this.from,this.to+(e.to-e.from),r,this.structure)},t.prototype.toJSON=function(){var e={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e},t.fromJSON=function(e,n){if("number"!=typeof n.from||"number"!=typeof n.to)throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new t(n.from,n.to,mu.fromJSON(e,n.slice),!!n.structure)},t}(Dc);Dc.jsonID("replace",Rc);var Pc=function(e){function t(t,n,r,a,o,i,s){e.call(this),this.from=t,this.to=n,this.gapFrom=r,this.gapTo=a,this.slice=o,this.insert=i,this.structure=!!s}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.apply=function(e){if(this.structure&&(jc(e,this.from,this.gapFrom)||jc(e,this.gapTo,this.to)))return Mc.fail("Structure gap-replace would overwrite content");var t=e.slice(this.gapFrom,this.gapTo);if(t.openStart||t.openEnd)return Mc.fail("Gap is not a flat range");var n=this.slice.insertAt(this.insert,t.content);return n?Mc.fromReplace(e,this.from,this.to,n):Mc.fail("Content does not fit in gap")},t.prototype.getMap=function(){return new Nc([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])},t.prototype.invert=function(e){var n=this.gapTo-this.gapFrom;return new t(this.from,this.from+this.slice.size+n,this.from+this.insert,this.from+this.insert+n,e.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)},t.prototype.map=function(e){var n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1),a=e.map(this.gapFrom,-1),o=e.map(this.gapTo,1);return n.deleted&&r.deleted||a<n.pos||o>r.pos?null:new t(n.pos,r.pos,a,o,this.slice,this.insert,this.structure)},t.prototype.toJSON=function(){var e={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e},t.fromJSON=function(e,n){if("number"!=typeof n.from||"number"!=typeof n.to||"number"!=typeof n.gapFrom||"number"!=typeof n.gapTo||"number"!=typeof n.insert)throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new t(n.from,n.to,n.gapFrom,n.gapTo,mu.fromJSON(e,n.slice),n.insert,!!n.structure)},t}(Dc);function jc(e,t,n){for(var r=e.resolve(t),a=n-t,o=r.depth;a>0&&o>0&&r.indexAfter(o)==r.node(o).childCount;)o--,a--;if(a>0)for(var i=r.node(o).maybeChild(r.indexAfter(o));a>0;){if(!i||i.isLeaf)return!0;i=i.firstChild,a--}return!1}function Fc(e,t,n){return(0==t||e.canReplace(t,e.childCount))&&(n==e.childCount||e.canReplace(0,n))}function Lc(e){for(var t=e.parent.content.cutByIndex(e.startIndex,e.endIndex),n=e.depth;;--n){var r=e.$from.node(n),a=e.$from.index(n),o=e.$to.indexAfter(n);if(n<e.depth&&r.canReplace(a,o,t))return n;if(0==n||r.type.spec.isolating||!Fc(r,a,o))break}}function Bc(e,t,n,r){void 0===r&&(r=e);var a=function(e,t){var n=e.parent,r=e.startIndex,a=e.endIndex,o=n.contentMatchAt(r).findWrapping(t);if(!o)return null;var i=o.length?o[0]:t;return n.canReplaceWith(r,a,i)?o:null}(e,t),o=a&&function(e,t){var n=e.parent,r=e.startIndex,a=e.endIndex,o=n.child(r),i=t.contentMatch.findWrapping(o.type);if(!i)return null;for(var s=(i.length?i[i.length-1]:t).contentMatch,u=r;s&&u<a;u++)s=s.matchType(n.child(u).type);if(!s||!s.validEnd)return null;return i}(r,t);return o?a.map(zc).concat({type:t,attrs:n}).concat(o.map(zc)):null}function zc(e){return{type:e,attrs:null}}function Zc(e,t,n,r){void 0===n&&(n=1);var a=e.resolve(t),o=a.depth-n,i=r&&r[r.length-1]||a.parent;if(o<0||a.parent.type.spec.isolating||!a.parent.canReplace(a.index(),a.parent.childCount)||!i.type.validContent(a.parent.content.cutByIndex(a.index(),a.parent.childCount)))return!1;for(var s=a.depth-1,u=n-2;s>o;s--,u--){var c=a.node(s),l=a.index(s);if(c.type.spec.isolating)return!1;var f=c.content.cutByIndex(l,c.childCount),d=r&&r[u]||c;if(d!=c&&(f=f.replaceChild(0,d.type.create(d.attrs))),!c.canReplace(l+1,c.childCount)||!d.type.validContent(f))return!1}var p=a.indexAfter(o),h=r&&r[0];return a.node(o).canReplaceWith(p,p,h?h.type:a.node(o+1).type)}function Vc(e,t){var n=e.resolve(t),r=n.index();return Uc(n.nodeBefore,n.nodeAfter)&&n.parent.canReplace(r,r+1)}function Uc(e,t){return e&&t&&!e.isLeaf&&e.canAppend(t)}function qc(e,t,n){var r=e.resolve(t);if(!n.content.size)return t;for(var a=n.content,o=0;o<n.openStart;o++)a=a.firstChild.content;for(var i=1;i<=(0==n.openStart&&n.size?2:1);i++)for(var s=r.depth;s>=0;s--){var u=s==r.depth?0:r.pos<=(r.start(s+1)+r.end(s+1))/2?-1:1,c=r.index(s)+(u>0?1:0),l=r.node(s),f=!1;if(1==i)f=l.canReplace(c,c,a);else{var d=l.contentMatchAt(c).findWrapping(a.firstChild.type);f=d&&l.canReplaceWith(c,c,d[0])}if(f)return 0==u?r.pos:u<0?r.before(s+1):r.after(s+1)}return null}function Wc(e,t,n){for(var r=[],a=0;a<e.childCount;a++){var o=e.child(a);o.content.size&&(o=o.copy(Wc(o.content,t,o))),o.isInline&&(o=t(o,n,a)),r.push(o)}return uu.fromArray(r)}Dc.jsonID("replaceAround",Pc),Tc.prototype.lift=function(e,t){for(var n=e.$from,r=e.$to,a=e.depth,o=n.before(a+1),i=r.after(a+1),s=o,u=i,c=uu.empty,l=0,f=a,d=!1;f>t;f--)d||n.index(f)>0?(d=!0,c=uu.from(n.node(f).copy(c)),l++):s--;for(var p=uu.empty,h=0,m=a,v=!1;m>t;m--)v||r.after(m+1)<r.end(m)?(v=!0,p=uu.from(r.node(m).copy(p)),h++):u++;return this.step(new Pc(s,u,o,i,new mu(c.append(p),l,h),c.size-l,!0))},Tc.prototype.wrap=function(e,t){for(var n=uu.empty,r=t.length-1;r>=0;r--){if(n.size){var a=t[r].type.contentMatch.matchFragment(n);if(!a||!a.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}n=uu.from(t[r].type.create(t[r].attrs,n))}var o=e.start,i=e.end;return this.step(new Pc(o,i,o,i,new mu(n,0,0),t.length,!0))},Tc.prototype.setBlockType=function(e,t,n,r){var a=this;if(void 0===t&&(t=e),!n.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");var o=this.steps.length;return this.doc.nodesBetween(e,t,(function(e,t){if(e.isTextblock&&!e.hasMarkup(n,r)&&function(e,t,n){var r=e.resolve(t),a=r.index();return r.parent.canReplaceWith(a,a+1,n)}(a.doc,a.mapping.slice(o).map(t),n)){a.clearIncompatible(a.mapping.slice(o).map(t,1),n);var i=a.mapping.slice(o),s=i.map(t,1),u=i.map(t+e.nodeSize,1);return a.step(new Pc(s,u,s+1,u-1,new mu(uu.from(n.create(r,null,e.marks)),0,0),1,!0)),!1}})),this},Tc.prototype.setNodeMarkup=function(e,t,n,r){var a=this.doc.nodeAt(e);if(!a)throw new RangeError("No node at given position");t||(t=a.type);var o=t.create(n,null,r||a.marks);if(a.isLeaf)return this.replaceWith(e,e+a.nodeSize,o);if(!t.validContent(a.content))throw new RangeError("Invalid content for node type "+t.name);return this.step(new Pc(e,e+a.nodeSize,e+1,e+a.nodeSize-1,new mu(uu.from(o),0,0),1,!0))},Tc.prototype.split=function(e,t,n){void 0===t&&(t=1);for(var r=this.doc.resolve(e),a=uu.empty,o=uu.empty,i=r.depth,s=r.depth-t,u=t-1;i>s;i--,u--){a=uu.from(r.node(i).copy(a));var c=n&&n[u];o=uu.from(c?c.type.create(c.attrs,o):r.node(i).copy(o))}return this.step(new Rc(e,e,new mu(a.append(o),t,t),!0))},Tc.prototype.join=function(e,t){void 0===t&&(t=1);var n=new Rc(e-t,e+t,mu.empty,!0);return this.step(n)};var Hc=function(e){function t(t,n,r){e.call(this),this.from=t,this.to=n,this.mark=r}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.apply=function(e){var t=this,n=e.slice(this.from,this.to),r=e.resolve(this.from),a=r.node(r.sharedDepth(this.to)),o=new mu(Wc(n.content,(function(e,n){return e.isAtom&&n.type.allowsMarkType(t.mark.type)?e.mark(t.mark.addToSet(e.marks)):e}),a),n.openStart,n.openEnd);return Mc.fromReplace(e,this.from,this.to,o)},t.prototype.invert=function(){return new Gc(this.from,this.to,this.mark)},t.prototype.map=function(e){var n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new t(n.pos,r.pos,this.mark)},t.prototype.merge=function(e){if(e instanceof t&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from)return new t(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark)},t.prototype.toJSON=function(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}},t.fromJSON=function(e,n){if("number"!=typeof n.from||"number"!=typeof n.to)throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new t(n.from,n.to,e.markFromJSON(n.mark))},t}(Dc);Dc.jsonID("addMark",Hc);var Gc=function(e){function t(t,n,r){e.call(this),this.from=t,this.to=n,this.mark=r}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.apply=function(e){var t=this,n=e.slice(this.from,this.to),r=new mu(Wc(n.content,(function(e){return e.mark(t.mark.removeFromSet(e.marks))})),n.openStart,n.openEnd);return Mc.fromReplace(e,this.from,this.to,r)},t.prototype.invert=function(){return new Hc(this.from,this.to,this.mark)},t.prototype.map=function(e){var n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new t(n.pos,r.pos,this.mark)},t.prototype.merge=function(e){if(e instanceof t&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from)return new t(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark)},t.prototype.toJSON=function(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}},t.fromJSON=function(e,n){if("number"!=typeof n.from||"number"!=typeof n.to)throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new t(n.from,n.to,e.markFromJSON(n.mark))},t}(Dc);function Kc(e,t,n,r){if(void 0===n&&(n=t),void 0===r&&(r=mu.empty),t==n&&!r.size)return null;var a=e.resolve(t),o=e.resolve(n);return Xc(a,o,r)?new Rc(t,n,r):new Yc(a,o,r).fit()}function Xc(e,t,n){return!n.openStart&&!n.openEnd&&e.start()==t.start()&&e.parent.canReplace(e.index(),t.index(),n.content)}Dc.jsonID("removeMark",Gc),Tc.prototype.addMark=function(e,t,n){var r=this,a=[],o=[],i=null,s=null;return this.doc.nodesBetween(e,t,(function(r,u,c){if(r.isInline){var l=r.marks;if(!n.isInSet(l)&&c.type.allowsMarkType(n.type)){for(var f=Math.max(u,e),d=Math.min(u+r.nodeSize,t),p=n.addToSet(l),h=0;h<l.length;h++)l[h].isInSet(p)||(i&&i.to==f&&i.mark.eq(l[h])?i.to=d:a.push(i=new Gc(f,d,l[h])));s&&s.to==f?s.to=d:o.push(s=new Hc(f,d,n))}}})),a.forEach((function(e){return r.step(e)})),o.forEach((function(e){return r.step(e)})),this},Tc.prototype.removeMark=function(e,t,n){var r=this;void 0===n&&(n=null);var a=[],o=0;return this.doc.nodesBetween(e,t,(function(r,i){if(r.isInline){o++;var s=null;if(n instanceof ac)for(var u,c=r.marks;u=n.isInSet(c);)(s||(s=[])).push(u),c=u.removeFromSet(c);else n?n.isInSet(r.marks)&&(s=[n]):s=r.marks;if(s&&s.length)for(var l=Math.min(i+r.nodeSize,t),f=0;f<s.length;f++){for(var d=s[f],p=void 0,h=0;h<a.length;h++){var m=a[h];m.step==o-1&&d.eq(a[h].style)&&(p=m)}p?(p.to=l,p.step=o):a.push({style:d,from:Math.max(i,e),to:l,step:o})}}})),a.forEach((function(e){return r.step(new Gc(e.from,e.to,e.style))})),this},Tc.prototype.clearIncompatible=function(e,t,n){void 0===n&&(n=t.contentMatch);for(var r=this.doc.nodeAt(e),a=[],o=e+1,i=0;i<r.childCount;i++){var s=r.child(i),u=o+s.nodeSize,c=n.matchType(s.type,s.attrs);if(c){n=c;for(var l=0;l<s.marks.length;l++)t.allowsMarkType(s.marks[l].type)||this.step(new Gc(o,u,s.marks[l]))}else a.push(new Rc(o,u,mu.empty));o=u}if(!n.validEnd){var f=n.fillBefore(uu.empty,!0);this.replace(o,o,new mu(f,0,0))}for(var d=a.length-1;d>=0;d--)this.step(a[d]);return this},Tc.prototype.replace=function(e,t,n){void 0===t&&(t=e),void 0===n&&(n=mu.empty);var r=Kc(this.doc,e,t,n);return r&&this.step(r),this},Tc.prototype.replaceWith=function(e,t,n){return this.replace(e,t,new mu(uu.from(n),0,0))},Tc.prototype.delete=function(e,t){return this.replace(e,t,mu.empty)},Tc.prototype.insert=function(e,t){return this.replaceWith(e,e,t)};var Yc=function(e,t,n){this.$to=t,this.$from=e,this.unplaced=n,this.frontier=[];for(var r=0;r<=e.depth;r++){var a=e.node(r);this.frontier.push({type:a.type,match:a.contentMatchAt(e.indexAfter(r))})}this.placed=uu.empty;for(var o=e.depth;o>0;o--)this.placed=uu.from(e.node(o).copy(this.placed))},$c={depth:{configurable:!0}};function Jc(e,t,n){return 0==t?e.cutByIndex(n):e.replaceChild(0,e.firstChild.copy(Jc(e.firstChild.content,t-1,n)))}function Qc(e,t,n){return 0==t?e.append(n):e.replaceChild(e.childCount-1,e.lastChild.copy(Qc(e.lastChild.content,t-1,n)))}function el(e,t){for(var n=0;n<t;n++)e=e.firstChild.content;return e}function tl(e,t,n){if(t<=0)return e;var r=e.content;return t>1&&(r=r.replaceChild(0,tl(r.firstChild,t-1,1==r.childCount?n-1:0))),t>0&&(r=e.type.contentMatch.fillBefore(r).append(r),n<=0&&(r=r.append(e.type.contentMatch.matchFragment(r).fillBefore(uu.empty,!0)))),e.copy(r)}function nl(e,t,n,r,a){var o=e.node(t),i=a?e.indexAfter(t):e.index(t);if(i==o.childCount&&!n.compatibleContent(o.type))return null;var s=r.fillBefore(o.content,!0,i);return s&&!function(e,t,n){for(var r=n;r<t.childCount;r++)if(!e.allowsMarks(t.child(r).marks))return!0;return!1}(n,o.content,i)?s:null}function rl(e,t,n,r,a){if(t<n){var o=e.firstChild;e=e.replaceChild(0,o.copy(rl(o.content,t+1,n,r,o)))}if(t>r){var i=a.contentMatchAt(0),s=i.fillBefore(e).append(e);e=s.append(i.matchFragment(s).fillBefore(uu.empty,!0))}return e}function al(e,t){for(var n=[],r=Math.min(e.depth,t.depth);r>=0;r--){var a=e.start(r);if(a<e.pos-(e.depth-r)||t.end(r)>t.pos+(t.depth-r)||e.node(r).type.spec.isolating||t.node(r).type.spec.isolating)break;(a==t.start(r)||r==e.depth&&r==t.depth&&e.parent.inlineContent&&t.parent.inlineContent&&r&&t.start(r-1)==a-1)&&n.push(r)}return n}$c.depth.get=function(){return this.frontier.length-1},Yc.prototype.fit=function(){for(;this.unplaced.size;){var e=this.findFittable();e?this.placeNodes(e):this.openMore()||this.dropNode()}var t=this.mustMoveInline(),n=this.placed.size-this.depth-this.$from.depth,r=this.$from,a=this.close(t<0?this.$to:r.doc.resolve(t));if(!a)return null;for(var o=this.placed,i=r.depth,s=a.depth;i&&s&&1==o.childCount;)o=o.firstChild.content,i--,s--;var u=new mu(o,i,s);return t>-1?new Pc(r.pos,t,this.$to.pos,this.$to.end(),u,n):u.size||r.pos!=this.$to.pos?new Rc(r.pos,a.pos,u):void 0},Yc.prototype.findFittable=function(){for(var e=1;e<=2;e++)for(var t=this.unplaced.openStart;t>=0;t--)for(var n=void 0,r=(t?(n=el(this.unplaced.content,t-1).firstChild).content:this.unplaced.content).firstChild,a=this.depth;a>=0;a--){var o=this.frontier[a],i=o.type,s=o.match,u=void 0,c=void 0;if(1==e&&(r?s.matchType(r.type)||(c=s.fillBefore(uu.from(r),!1)):i.compatibleContent(n.type)))return{sliceDepth:t,frontierDepth:a,parent:n,inject:c};if(2==e&&r&&(u=s.findWrapping(r.type)))return{sliceDepth:t,frontierDepth:a,parent:n,wrap:u};if(n&&s.matchType(n.type))break}},Yc.prototype.openMore=function(){var e=this.unplaced,t=e.content,n=e.openStart,r=e.openEnd,a=el(t,n);return!(!a.childCount||a.firstChild.isLeaf)&&(this.unplaced=new mu(t,n+1,Math.max(r,a.size+n>=t.size-r?n+1:0)),!0)},Yc.prototype.dropNode=function(){var e=this.unplaced,t=e.content,n=e.openStart,r=e.openEnd,a=el(t,n);if(a.childCount<=1&&n>0){var o=t.size-n<=n+a.size;this.unplaced=new mu(Jc(t,n-1,1),n-1,o?n-1:r)}else this.unplaced=new mu(Jc(t,n,1),n,r)},Yc.prototype.placeNodes=function(e){for(var t=e.sliceDepth,n=e.frontierDepth,r=e.parent,a=e.inject,o=e.wrap;this.depth>n;)this.closeFrontierNode();if(o)for(var i=0;i<o.length;i++)this.openFrontierNode(o[i]);var s=this.unplaced,u=r?r.content:s.content,c=s.openStart-t,l=0,f=[],d=this.frontier[n],p=d.match,h=d.type;if(a){for(var m=0;m<a.childCount;m++)f.push(a.child(m));p=p.matchFragment(a)}for(var v=u.size+t-(s.content.size-s.openEnd);l<u.childCount;){var g=u.child(l),y=p.matchType(g.type);if(!y)break;(++l>1||0==c||g.content.size)&&(p=y,f.push(tl(g.mark(h.allowedMarks(g.marks)),1==l?c:0,l==u.childCount?v:-1)))}var b=l==u.childCount;b||(v=-1),this.placed=Qc(this.placed,n,uu.from(f)),this.frontier[n].match=p,b&&v<0&&r&&r.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(var x=0,w=u;x<v;x++){var k=w.lastChild;this.frontier.push({type:k.type,match:k.contentMatchAt(k.childCount)}),w=k.content}this.unplaced=b?0==t?mu.empty:new mu(Jc(s.content,t-1,1),t-1,v<0?s.openEnd:t-1):new mu(Jc(s.content,t,l),s.openStart,s.openEnd)},Yc.prototype.mustMoveInline=function(){if(!this.$to.parent.isTextblock||this.$to.end()==this.$to.pos)return-1;var e,t=this.frontier[this.depth];if(!t.type.isTextblock||!nl(this.$to,this.$to.depth,t.type,t.match,!1)||this.$to.depth==this.depth&&(e=this.findCloseLevel(this.$to))&&e.depth==this.depth)return-1;for(var n=this.$to.depth,r=this.$to.after(n);n>1&&r==this.$to.end(--n);)++r;return r},Yc.prototype.findCloseLevel=function(e){e:for(var t=Math.min(this.depth,e.depth);t>=0;t--){var n=this.frontier[t],r=n.match,a=n.type,o=t<e.depth&&e.end(t+1)==e.pos+(e.depth-(t+1)),i=nl(e,t,a,r,o);if(i){for(var s=t-1;s>=0;s--){var u=this.frontier[s],c=u.match,l=nl(e,s,u.type,c,!0);if(!l||l.childCount)continue e}return{depth:t,fit:i,move:o?e.doc.resolve(e.after(t+1)):e}}}},Yc.prototype.close=function(e){var t=this.findCloseLevel(e);if(!t)return null;for(;this.depth>t.depth;)this.closeFrontierNode();t.fit.childCount&&(this.placed=Qc(this.placed,t.depth,t.fit)),e=t.move;for(var n=t.depth+1;n<=e.depth;n++){var r=e.node(n),a=r.type.contentMatch.fillBefore(r.content,!0,e.index(n));this.openFrontierNode(r.type,r.attrs,a)}return e},Yc.prototype.openFrontierNode=function(e,t,n){var r=this.frontier[this.depth];r.match=r.match.matchType(e),this.placed=Qc(this.placed,this.depth,uu.from(e.create(t,n))),this.frontier.push({type:e,match:e.contentMatch})},Yc.prototype.closeFrontierNode=function(){var e=this.frontier.pop().match.fillBefore(uu.empty,!0);e.childCount&&(this.placed=Qc(this.placed,this.frontier.length,e))},Object.defineProperties(Yc.prototype,$c),Tc.prototype.replaceRange=function(e,t,n){if(!n.size)return this.deleteRange(e,t);var r=this.doc.resolve(e),a=this.doc.resolve(t);if(Xc(r,a,n))return this.step(new Rc(e,t,n));var o=al(r,this.doc.resolve(t));0==o[o.length-1]&&o.pop();var i=-(r.depth+1);o.unshift(i);for(var s=r.depth,u=r.pos-1;s>0;s--,u--){var c=r.node(s).type.spec;if(c.defining||c.isolating)break;o.indexOf(s)>-1?i=s:r.before(s)==u&&o.splice(1,0,-s)}for(var l=o.indexOf(i),f=[],d=n.openStart,p=n.content,h=0;;h++){var m=p.firstChild;if(f.push(m),h==n.openStart)break;p=m.content}d>0&&f[d-1].type.spec.defining&&r.node(l).type!=f[d-1].type?d-=1:d>=2&&f[d-1].isTextblock&&f[d-2].type.spec.defining&&r.node(l).type!=f[d-2].type&&(d-=2);for(var v=n.openStart;v>=0;v--){var g=(v+d+1)%(n.openStart+1),y=f[g];if(y)for(var b=0;b<o.length;b++){var x=o[(b+l)%o.length],w=!0;x<0&&(w=!1,x=-x);var k=r.node(x-1),S=r.index(x-1);if(k.canReplaceWith(S,S,y.type,y.marks))return this.replace(r.before(x),w?a.after(x):t,new mu(rl(n.content,0,n.openStart,g),g,n.openEnd))}}for(var _=this.steps.length,N=o.length-1;N>=0&&(this.replace(e,t,n),!(this.steps.length>_));N--){var E=o[N];E<0||(e=r.before(E),t=a.after(E))}return this},Tc.prototype.replaceRangeWith=function(e,t,n){if(!n.isInline&&e==t&&this.doc.resolve(e).parent.content.size){var r=function(e,t,n){var r=e.resolve(t);if(r.parent.canReplaceWith(r.index(),r.index(),n))return t;if(0==r.parentOffset)for(var a=r.depth-1;a>=0;a--){var o=r.index(a);if(r.node(a).canReplaceWith(o,o,n))return r.before(a+1);if(o>0)return null}if(r.parentOffset==r.parent.content.size)for(var i=r.depth-1;i>=0;i--){var s=r.indexAfter(i);if(r.node(i).canReplaceWith(s,s,n))return r.after(i+1);if(s<r.node(i).childCount)return null}}(this.doc,e,n.type);null!=r&&(e=t=r)}return this.replaceRange(e,t,new mu(uu.from(n),0,0))},Tc.prototype.deleteRange=function(e,t){for(var n=this.doc.resolve(e),r=this.doc.resolve(t),a=al(n,r),o=0;o<a.length;o++){var i=a[o],s=o==a.length-1;if(s&&0==i||n.node(i).type.contentMatch.validEnd)return this.delete(n.start(i),r.end(i));if(i>0&&(s||n.node(i-1).canReplace(n.index(i-1),r.indexAfter(i-1))))return this.delete(n.before(i),r.after(i))}for(var u=1;u<=n.depth&&u<=r.depth;u++)if(e-n.start(u)==n.depth-u&&t>n.end(u)&&r.end(u)-t!=r.depth-u)return this.delete(n.before(u),t);return this.delete(e,t)};var ol=Object.create(null),il=function(e,t,n){this.ranges=n||[new ul(e.min(t),e.max(t))],this.$anchor=e,this.$head=t},sl={anchor:{configurable:!0},head:{configurable:!0},from:{configurable:!0},to:{configurable:!0},$from:{configurable:!0},$to:{configurable:!0},empty:{configurable:!0}};sl.anchor.get=function(){return this.$anchor.pos},sl.head.get=function(){return this.$head.pos},sl.from.get=function(){return this.$from.pos},sl.to.get=function(){return this.$to.pos},sl.$from.get=function(){return this.ranges[0].$from},sl.$to.get=function(){return this.ranges[0].$to},sl.empty.get=function(){for(var e=this.ranges,t=0;t<e.length;t++)if(e[t].$from.pos!=e[t].$to.pos)return!1;return!0},il.prototype.content=function(){return this.$from.node(0).slice(this.from,this.to,!0)},il.prototype.replace=function(e,t){void 0===t&&(t=mu.empty);for(var n=t.content.lastChild,r=null,a=0;a<t.openEnd;a++)r=n,n=n.lastChild;for(var o=e.steps.length,i=this.ranges,s=0;s<i.length;s++){var u=i[s],c=u.$from,l=u.$to,f=e.mapping.slice(o);e.replaceRange(f.map(c.pos),f.map(l.pos),s?mu.empty:t),0==s&&vl(e,o,(n?n.isInline:r&&r.isTextblock)?-1:1)}},il.prototype.replaceWith=function(e,t){for(var n=e.steps.length,r=this.ranges,a=0;a<r.length;a++){var o=r[a],i=o.$from,s=o.$to,u=e.mapping.slice(n),c=u.map(i.pos),l=u.map(s.pos);a?e.deleteRange(c,l):(e.replaceRangeWith(c,l,t),vl(e,n,t.isInline?-1:1))}},il.findFrom=function(e,t,n){var r=e.parent.inlineContent?new cl(e):ml(e.node(0),e.parent,e.pos,e.index(),t,n);if(r)return r;for(var a=e.depth-1;a>=0;a--){var o=t<0?ml(e.node(0),e.node(a),e.before(a+1),e.index(a),t,n):ml(e.node(0),e.node(a),e.after(a+1),e.index(a)+1,t,n);if(o)return o}},il.near=function(e,t){return void 0===t&&(t=1),this.findFrom(e,t)||this.findFrom(e,-t)||new pl(e.node(0))},il.atStart=function(e){return ml(e,e,0,0,1)||new pl(e)},il.atEnd=function(e){return ml(e,e,e.content.size,e.childCount,-1)||new pl(e)},il.fromJSON=function(e,t){if(!t||!t.type)throw new RangeError("Invalid input for Selection.fromJSON");var n=ol[t.type];if(!n)throw new RangeError("No selection type "+t.type+" defined");return n.fromJSON(e,t)},il.jsonID=function(e,t){if(e in ol)throw new RangeError("Duplicate use of selection JSON ID "+e);return ol[e]=t,t.prototype.jsonID=e,t},il.prototype.getBookmark=function(){return cl.between(this.$anchor,this.$head).getBookmark()},Object.defineProperties(il.prototype,sl),il.prototype.visible=!0;var ul=function(e,t){this.$from=e,this.$to=t},cl=function(e){function t(t,n){void 0===n&&(n=t),e.call(this,t,n)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={$cursor:{configurable:!0}};return n.$cursor.get=function(){return this.$anchor.pos==this.$head.pos?this.$head:null},t.prototype.map=function(n,r){var a=n.resolve(r.map(this.head));if(!a.parent.inlineContent)return e.near(a);var o=n.resolve(r.map(this.anchor));return new t(o.parent.inlineContent?o:a,a)},t.prototype.replace=function(t,n){if(void 0===n&&(n=mu.empty),e.prototype.replace.call(this,t,n),n==mu.empty){var r=this.$from.marksAcross(this.$to);r&&t.ensureMarks(r)}},t.prototype.eq=function(e){return e instanceof t&&e.anchor==this.anchor&&e.head==this.head},t.prototype.getBookmark=function(){return new ll(this.anchor,this.head)},t.prototype.toJSON=function(){return{type:"text",anchor:this.anchor,head:this.head}},t.fromJSON=function(e,n){if("number"!=typeof n.anchor||"number"!=typeof n.head)throw new RangeError("Invalid input for TextSelection.fromJSON");return new t(e.resolve(n.anchor),e.resolve(n.head))},t.create=function(e,t,n){void 0===n&&(n=t);var r=e.resolve(t);return new this(r,n==t?r:e.resolve(n))},t.between=function(n,r,a){var o=n.pos-r.pos;if(a&&!o||(a=o>=0?1:-1),!r.parent.inlineContent){var i=e.findFrom(r,a,!0)||e.findFrom(r,-a,!0);if(!i)return e.near(r,a);r=i.$head}return n.parent.inlineContent||(0==o||(n=(e.findFrom(n,-a,!0)||e.findFrom(n,a,!0)).$anchor).pos<r.pos!=o<0)&&(n=r),new t(n,r)},Object.defineProperties(t.prototype,n),t}(il);il.jsonID("text",cl);var ll=function(e,t){this.anchor=e,this.head=t};ll.prototype.map=function(e){return new ll(e.map(this.anchor),e.map(this.head))},ll.prototype.resolve=function(e){return cl.between(e.resolve(this.anchor),e.resolve(this.head))};var fl=function(e){function t(t){var n=t.nodeAfter,r=t.node(0).resolve(t.pos+n.nodeSize);e.call(this,t,r),this.node=n}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.map=function(n,r){var a=r.mapResult(this.anchor),o=a.deleted,i=a.pos,s=n.resolve(i);return o?e.near(s):new t(s)},t.prototype.content=function(){return new mu(uu.from(this.node),0,0)},t.prototype.eq=function(e){return e instanceof t&&e.anchor==this.anchor},t.prototype.toJSON=function(){return{type:"node",anchor:this.anchor}},t.prototype.getBookmark=function(){return new dl(this.anchor)},t.fromJSON=function(e,n){if("number"!=typeof n.anchor)throw new RangeError("Invalid input for NodeSelection.fromJSON");return new t(e.resolve(n.anchor))},t.create=function(e,t){return new this(e.resolve(t))},t.isSelectable=function(e){return!e.isText&&!1!==e.type.spec.selectable},t}(il);fl.prototype.visible=!1,il.jsonID("node",fl);var dl=function(e){this.anchor=e};dl.prototype.map=function(e){var t=e.mapResult(this.anchor),n=t.deleted,r=t.pos;return n?new ll(r,r):new dl(r)},dl.prototype.resolve=function(e){var t=e.resolve(this.anchor),n=t.nodeAfter;return n&&fl.isSelectable(n)?new fl(t):il.near(t)};var pl=function(e){function t(t){e.call(this,t.resolve(0),t.resolve(t.content.size))}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.replace=function(t,n){if(void 0===n&&(n=mu.empty),n==mu.empty){t.delete(0,t.doc.content.size);var r=e.atStart(t.doc);r.eq(t.selection)||t.setSelection(r)}else e.prototype.replace.call(this,t,n)},t.prototype.toJSON=function(){return{type:"all"}},t.fromJSON=function(e){return new t(e)},t.prototype.map=function(e){return new t(e)},t.prototype.eq=function(e){return e instanceof t},t.prototype.getBookmark=function(){return hl},t}(il);il.jsonID("all",pl);var hl={map:function(){return this},resolve:function(e){return new pl(e)}};function ml(e,t,n,r,a,o){if(t.inlineContent)return cl.create(e,n);for(var i=r-(a>0?0:1);a>0?i<t.childCount:i>=0;i+=a){var s=t.child(i);if(s.isAtom){if(!o&&fl.isSelectable(s))return fl.create(e,n-(a<0?s.nodeSize:0))}else{var u=ml(e,s,n+a,a<0?s.childCount:0,a,o);if(u)return u}n+=s.nodeSize*a}}function vl(e,t,n){var r=e.steps.length-1;if(!(r<t)){var a,o=e.steps[r];if(o instanceof Rc||o instanceof Pc)e.mapping.maps[r].forEach((function(e,t,n,r){null==a&&(a=r)})),e.setSelection(il.near(e.doc.resolve(a),n))}}var gl=function(e){function t(t){e.call(this,t.doc),this.time=Date.now(),this.curSelection=t.selection,this.curSelectionFor=0,this.storedMarks=t.storedMarks,this.updated=0,this.meta=Object.create(null)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={selection:{configurable:!0},selectionSet:{configurable:!0},storedMarksSet:{configurable:!0},isGeneric:{configurable:!0},scrolledIntoView:{configurable:!0}};return n.selection.get=function(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection},t.prototype.setSelection=function(e){if(e.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=e,this.curSelectionFor=this.steps.length,this.updated=-3&(1|this.updated),this.storedMarks=null,this},n.selectionSet.get=function(){return(1&this.updated)>0},t.prototype.setStoredMarks=function(e){return this.storedMarks=e,this.updated|=2,this},t.prototype.ensureMarks=function(e){return pu.sameSet(this.storedMarks||this.selection.$from.marks(),e)||this.setStoredMarks(e),this},t.prototype.addStoredMark=function(e){return this.ensureMarks(e.addToSet(this.storedMarks||this.selection.$head.marks()))},t.prototype.removeStoredMark=function(e){return this.ensureMarks(e.removeFromSet(this.storedMarks||this.selection.$head.marks()))},n.storedMarksSet.get=function(){return(2&this.updated)>0},t.prototype.addStep=function(t,n){e.prototype.addStep.call(this,t,n),this.updated=-3&this.updated,this.storedMarks=null},t.prototype.setTime=function(e){return this.time=e,this},t.prototype.replaceSelection=function(e){return this.selection.replace(this,e),this},t.prototype.replaceSelectionWith=function(e,t){var n=this.selection;return!1!==t&&(e=e.mark(this.storedMarks||(n.empty?n.$from.marks():n.$from.marksAcross(n.$to)||pu.none))),n.replaceWith(this,e),this},t.prototype.deleteSelection=function(){return this.selection.replace(this),this},t.prototype.insertText=function(e,t,n){void 0===n&&(n=t);var r=this.doc.type.schema;if(null==t)return e?this.replaceSelectionWith(r.text(e),!0):this.deleteSelection();if(!e)return this.deleteRange(t,n);var a=this.storedMarks;if(!a){var o=this.doc.resolve(t);a=n==t?o.marks():o.marksAcross(this.doc.resolve(n))}return this.replaceRangeWith(t,n,r.text(e,a)),this.selection.empty||this.setSelection(il.near(this.selection.$to)),this},t.prototype.setMeta=function(e,t){return this.meta["string"==typeof e?e:e.key]=t,this},t.prototype.getMeta=function(e){return this.meta["string"==typeof e?e:e.key]},n.isGeneric.get=function(){for(var e in this.meta)return!1;return!0},t.prototype.scrollIntoView=function(){return this.updated|=4,this},n.scrolledIntoView.get=function(){return(4&this.updated)>0},Object.defineProperties(t.prototype,n),t}(Tc);function yl(e,t){return t&&e?e.bind(t):e}var bl=function(e,t,n){this.name=e,this.init=yl(t.init,n),this.apply=yl(t.apply,n)},xl=[new bl("doc",{init:function(e){return e.doc||e.schema.topNodeType.createAndFill()},apply:function(e){return e.doc}}),new bl("selection",{init:function(e,t){return e.selection||il.atStart(t.doc)},apply:function(e){return e.selection}}),new bl("storedMarks",{init:function(e){return e.storedMarks||null},apply:function(e,t,n,r){return r.selection.$cursor?e.storedMarks:null}}),new bl("scrollToSelection",{init:function(){return 0},apply:function(e,t){return e.scrolledIntoView?t+1:t}})],wl=function(e,t){var n=this;this.schema=e,this.fields=xl.concat(),this.plugins=[],this.pluginsByKey=Object.create(null),t&&t.forEach((function(e){if(n.pluginsByKey[e.key])throw new RangeError("Adding different instances of a keyed plugin ("+e.key+")");n.plugins.push(e),n.pluginsByKey[e.key]=e,e.spec.state&&n.fields.push(new bl(e.key,e.spec.state,e))}))},kl=function(e){this.config=e},Sl={schema:{configurable:!0},plugins:{configurable:!0},tr:{configurable:!0}};Sl.schema.get=function(){return this.config.schema},Sl.plugins.get=function(){return this.config.plugins},kl.prototype.apply=function(e){return this.applyTransaction(e).state},kl.prototype.filterTransaction=function(e,t){void 0===t&&(t=-1);for(var n=0;n<this.config.plugins.length;n++)if(n!=t){var r=this.config.plugins[n];if(r.spec.filterTransaction&&!r.spec.filterTransaction.call(r,e,this))return!1}return!0},kl.prototype.applyTransaction=function(e){if(!this.filterTransaction(e))return{state:this,transactions:[]};for(var t=[e],n=this.applyInner(e),r=null;;){for(var a=!1,o=0;o<this.config.plugins.length;o++){var i=this.config.plugins[o];if(i.spec.appendTransaction){var s=r?r[o].n:0,u=r?r[o].state:this,c=s<t.length&&i.spec.appendTransaction.call(i,s?t.slice(s):t,u,n);if(c&&n.filterTransaction(c,o)){if(c.setMeta("appendedTransaction",e),!r){r=[];for(var l=0;l<this.config.plugins.length;l++)r.push(l<o?{state:n,n:t.length}:{state:this,n:0})}t.push(c),n=n.applyInner(c),a=!0}r&&(r[o]={state:n,n:t.length})}}if(!a)return{state:n,transactions:t}}},kl.prototype.applyInner=function(e){if(!e.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");for(var t=new kl(this.config),n=this.config.fields,r=0;r<n.length;r++){var a=n[r];t[a.name]=a.apply(e,this[a.name],this,t)}for(var o=0;o<_l.length;o++)_l[o](this,e,t);return t},Sl.tr.get=function(){return new gl(this)},kl.create=function(e){for(var t=new wl(e.doc?e.doc.type.schema:e.schema,e.plugins),n=new kl(t),r=0;r<t.fields.length;r++)n[t.fields[r].name]=t.fields[r].init(e,n);return n},kl.prototype.reconfigure=function(e){for(var t=new wl(this.schema,e.plugins),n=t.fields,r=new kl(t),a=0;a<n.length;a++){var o=n[a].name;r[o]=this.hasOwnProperty(o)?this[o]:n[a].init(e,r)}return r},kl.prototype.toJSON=function(e){var t={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(t.storedMarks=this.storedMarks.map((function(e){return e.toJSON()}))),e&&"object"==typeof e)for(var n in e){if("doc"==n||"selection"==n)throw new RangeError("The JSON fields `doc` and `selection` are reserved");var r=e[n],a=r.spec.state;a&&a.toJSON&&(t[n]=a.toJSON.call(r,this[r.key]))}return t},kl.fromJSON=function(e,t,n){if(!t)throw new RangeError("Invalid input for EditorState.fromJSON");if(!e.schema)throw new RangeError("Required config field 'schema' missing");var r=new wl(e.schema,e.plugins),a=new kl(r);return r.fields.forEach((function(r){if("doc"==r.name)a.doc=ju.fromJSON(e.schema,t.doc);else if("selection"==r.name)a.selection=il.fromJSON(a.doc,t.selection);else if("storedMarks"==r.name)t.storedMarks&&(a.storedMarks=t.storedMarks.map(e.schema.markFromJSON));else{if(n)for(var o in n){var i=n[o],s=i.spec.state;if(i.key==r.name&&s&&s.fromJSON&&Object.prototype.hasOwnProperty.call(t,o))return void(a[r.name]=s.fromJSON.call(i,e,t[o],a))}a[r.name]=r.init(e,a)}})),a},kl.addApplyListener=function(e){_l.push(e)},kl.removeApplyListener=function(e){var t=_l.indexOf(e);t>-1&&_l.splice(t,1)},Object.defineProperties(kl.prototype,Sl);var _l=[];function Nl(e,t,n){for(var r in e){var a=e[r];a instanceof Function?a=a.bind(t):"handleDOMEvents"==r&&(a=Nl(a,t,{})),n[r]=a}return n}var El=function(e){this.props={},e.props&&Nl(e.props,this,this.props),this.spec=e,this.key=e.key?e.key.key:Tl("plugin")};El.prototype.getState=function(e){return e[this.key]};var Cl=Object.create(null);function Tl(e){return e in Cl?e+"$"+ ++Cl[e]:(Cl[e]=0,e+"$")}var Il=function(e){void 0===e&&(e="key"),this.key=Tl(e)};function Ol(e,t){return!e.selection.empty&&(t&&t(e.tr.deleteSelection().scrollIntoView()),!0)}function Al(e,t,n){var r=e.selection.$cursor;if(!r||(n?!n.endOfTextblock("backward",e):r.parentOffset>0))return!1;var a=Rl(r);if(!a){var o=r.blockRange(),i=o&&Lc(o);return null!=i&&(t&&t(e.tr.lift(o,i).scrollIntoView()),!0)}var s=a.nodeBefore;if(!s.type.spec.isolating&&Wl(e,a,t))return!0;if(0==r.parent.content.size&&(Dl(s,"end")||fl.isSelectable(s))){var u=Kc(e.doc,r.before(),r.after(),mu.empty);if(u.slice.size<u.to-u.from){if(t){var c=e.tr.step(u);c.setSelection(Dl(s,"end")?il.findFrom(c.doc.resolve(c.mapping.map(a.pos,-1)),-1):fl.create(c.doc,a.pos-s.nodeSize)),t(c.scrollIntoView())}return!0}}return!(!s.isAtom||a.depth!=r.depth-1)&&(t&&t(e.tr.delete(a.pos-s.nodeSize,a.pos).scrollIntoView()),!0)}function Dl(e,t,n){for(;e;e="start"==t?e.firstChild:e.lastChild){if(e.isTextblock)return!0;if(n&&1!=e.childCount)return!1}return!1}function Ml(e,t,n){var r=e.selection,a=r.$head,o=a;if(!r.empty)return!1;if(a.parent.isTextblock){if(n?!n.endOfTextblock("backward",e):a.parentOffset>0)return!1;o=Rl(a)}var i=o&&o.nodeBefore;return!(!i||!fl.isSelectable(i))&&(t&&t(e.tr.setSelection(fl.create(e.doc,o.pos-i.nodeSize)).scrollIntoView()),!0)}function Rl(e){if(!e.parent.type.spec.isolating)for(var t=e.depth-1;t>=0;t--){if(e.index(t)>0)return e.doc.resolve(e.before(t+1));if(e.node(t).type.spec.isolating)break}return null}function Pl(e,t,n){var r=e.selection.$cursor;if(!r||(n?!n.endOfTextblock("forward",e):r.parentOffset<r.parent.content.size))return!1;var a=Fl(r);if(!a)return!1;var o=a.nodeAfter;if(Wl(e,a,t))return!0;if(0==r.parent.content.size&&(Dl(o,"start")||fl.isSelectable(o))){var i=Kc(e.doc,r.before(),r.after(),mu.empty);if(i.slice.size<i.to-i.from){if(t){var s=e.tr.step(i);s.setSelection(Dl(o,"start")?il.findFrom(s.doc.resolve(s.mapping.map(a.pos)),1):fl.create(s.doc,s.mapping.map(a.pos))),t(s.scrollIntoView())}return!0}}return!(!o.isAtom||a.depth!=r.depth-1)&&(t&&t(e.tr.delete(a.pos,a.pos+o.nodeSize).scrollIntoView()),!0)}function jl(e,t,n){var r=e.selection,a=r.$head,o=a;if(!r.empty)return!1;if(a.parent.isTextblock){if(n?!n.endOfTextblock("forward",e):a.parentOffset<a.parent.content.size)return!1;o=Fl(a)}var i=o&&o.nodeAfter;return!(!i||!fl.isSelectable(i))&&(t&&t(e.tr.setSelection(fl.create(e.doc,o.pos)).scrollIntoView()),!0)}function Fl(e){if(!e.parent.type.spec.isolating)for(var t=e.depth-1;t>=0;t--){var n=e.node(t);if(e.index(t)+1<n.childCount)return e.doc.resolve(e.after(t+1));if(n.type.spec.isolating)break}return null}function Ll(e,t){var n=e.selection,r=n.$from,a=n.$to,o=r.blockRange(a),i=o&&Lc(o);return null!=i&&(t&&t(e.tr.lift(o,i).scrollIntoView()),!0)}function Bl(e,t){var n=e.selection,r=n.$head,a=n.$anchor;return!(!r.parent.type.spec.code||!r.sameParent(a))&&(t&&t(e.tr.insertText("\n").scrollIntoView()),!0)}function zl(e){for(var t=0;t<e.edgeCount;t++){var n=e.edge(t).type;if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}function Zl(e,t){var n=e.selection,r=n.$head,a=n.$anchor;if(!r.parent.type.spec.code||!r.sameParent(a))return!1;var o=r.node(-1),i=r.indexAfter(-1),s=zl(o.contentMatchAt(i));if(!o.canReplaceWith(i,i,s))return!1;if(t){var u=r.after(),c=e.tr.replaceWith(u,u,s.createAndFill());c.setSelection(il.near(c.doc.resolve(u),1)),t(c.scrollIntoView())}return!0}function Vl(e,t){var n=e.selection,r=n.$from,a=n.$to;if(n instanceof pl||r.parent.inlineContent||a.parent.inlineContent)return!1;var o=zl(a.parent.contentMatchAt(a.indexAfter()));if(!o||!o.isTextblock)return!1;if(t){var i=(!r.parentOffset&&a.index()<a.parent.childCount?r:a).pos,s=e.tr.insert(i,o.createAndFill());s.setSelection(cl.create(s.doc,i+1)),t(s.scrollIntoView())}return!0}function Ul(e,t){var n=e.selection.$cursor;if(!n||n.parent.content.size)return!1;if(n.depth>1&&n.after()!=n.end(-1)){var r=n.before();if(Zc(e.doc,r))return t&&t(e.tr.split(r).scrollIntoView()),!0}var a=n.blockRange(),o=a&&Lc(a);return null!=o&&(t&&t(e.tr.lift(a,o).scrollIntoView()),!0)}function ql(e,t){var n=e.selection,r=n.$from,a=n.$to;if(e.selection instanceof fl&&e.selection.node.isBlock)return!(!r.parentOffset||!Zc(e.doc,r.pos))&&(t&&t(e.tr.split(r.pos).scrollIntoView()),!0);if(!r.parent.isBlock)return!1;if(t){var o=a.parentOffset==a.parent.content.size,i=e.tr;(e.selection instanceof cl||e.selection instanceof pl)&&i.deleteSelection();var s=0==r.depth?null:zl(r.node(-1).contentMatchAt(r.indexAfter(-1))),u=o&&s?[{type:s}]:null,c=Zc(i.doc,i.mapping.map(r.pos),1,u);if(u||c||!Zc(i.doc,i.mapping.map(r.pos),1,s&&[{type:s}])||(u=[{type:s}],c=!0),c&&(i.split(i.mapping.map(r.pos),1,u),!o&&!r.parentOffset&&r.parent.type!=s)){var l=i.mapping.map(r.before()),f=i.doc.resolve(l);r.node(-1).canReplaceWith(f.index(),f.index()+1,s)&&i.setNodeMarkup(i.mapping.map(r.before()),s)}t(i.scrollIntoView())}return!0}function Wl(e,t,n){var r,a,o=t.nodeBefore,i=t.nodeAfter;if(o.type.spec.isolating||i.type.spec.isolating)return!1;if(function(e,t,n){var r=t.nodeBefore,a=t.nodeAfter,o=t.index();return!!(r&&a&&r.type.compatibleContent(a.type))&&(!r.content.size&&t.parent.canReplace(o-1,o)?(n&&n(e.tr.delete(t.pos-r.nodeSize,t.pos).scrollIntoView()),!0):!(!t.parent.canReplace(o,o+1)||!a.isTextblock&&!Vc(e.doc,t.pos))&&(n&&n(e.tr.clearIncompatible(t.pos,r.type,r.contentMatchAt(r.childCount)).join(t.pos).scrollIntoView()),!0))}(e,t,n))return!0;var s=t.parent.canReplace(t.index(),t.index()+1);if(s&&(r=(a=o.contentMatchAt(o.childCount)).findWrapping(i.type))&&a.matchType(r[0]||i.type).validEnd){if(n){for(var u=t.pos+i.nodeSize,c=uu.empty,l=r.length-1;l>=0;l--)c=uu.from(r[l].create(null,c));c=uu.from(o.copy(c));var f=e.tr.step(new Pc(t.pos-1,u,t.pos,u,new mu(c,1,0),r.length,!0)),d=u+2*r.length;Vc(f.doc,d)&&f.join(d),n(f.scrollIntoView())}return!0}var p=il.findFrom(t,1),h=p&&p.$from.blockRange(p.$to),m=h&&Lc(h);if(null!=m&&m>=t.depth)return n&&n(e.tr.lift(h,m).scrollIntoView()),!0;if(s&&Dl(i,"start",!0)&&Dl(o,"end")){for(var v=o,g=[];g.push(v),!v.isTextblock;)v=v.lastChild;for(var y=i,b=1;!y.isTextblock;y=y.firstChild)b++;if(v.canReplace(v.childCount,v.childCount,y.content)){if(n){for(var x=uu.empty,w=g.length-1;w>=0;w--)x=uu.from(g[w].copy(x));n(e.tr.step(new Pc(t.pos-g.length,t.pos+i.nodeSize,t.pos+b,t.pos+i.nodeSize-b,new mu(x,g.length,0),0,!0)).scrollIntoView())}return!0}}return!1}function Hl(e){return function(t,n){for(var r=t.selection,a=e<0?r.$from:r.$to,o=a.depth;a.node(o).isInline;){if(!o)return!1;o--}return!!a.node(o).isTextblock&&(n&&n(t.tr.setSelection(cl.create(t.doc,e<0?a.start(o):a.end(o)))),!0)}}Il.prototype.get=function(e){return e.config.pluginsByKey[this.key]},Il.prototype.getState=function(e){return e[this.key]};var Gl=Hl(-1),Kl=Hl(1);function Xl(e,t){return function(n,r){var a=n.selection,o=a.$from,i=a.$to,s=o.blockRange(i),u=s&&Bc(s,e,t);return!!u&&(r&&r(n.tr.wrap(s,u).scrollIntoView()),!0)}}function Yl(e,t){return function(n,r){var a=n.selection,o=a.from,i=a.to,s=!1;return n.doc.nodesBetween(o,i,(function(r,a){if(s)return!1;if(r.isTextblock&&!r.hasMarkup(e,t))if(r.type==e)s=!0;else{var o=n.doc.resolve(a),i=o.index();s=o.parent.canReplaceWith(i,i+1,e)}})),!!s&&(r&&r(n.tr.setBlockType(o,i,e,t).scrollIntoView()),!0)}}function $l(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return function(t,n,r){for(var a=0;a<e.length;a++)if(e[a](t,n,r))return!0;return!1}}var Jl=$l(Ol,Al,Ml),Ql=$l(Ol,Pl,jl),ef={Enter:$l(Bl,Vl,Ul,ql),"Mod-Enter":Zl,Backspace:Jl,"Mod-Backspace":Jl,"Shift-Backspace":Jl,Delete:Ql,"Mod-Delete":Ql,"Mod-a":function(e,t){return t&&t(e.tr.setSelection(new pl(e.doc))),!0}},tf={"Ctrl-h":ef.Backspace,"Alt-Backspace":ef["Mod-Backspace"],"Ctrl-d":ef.Delete,"Ctrl-Alt-Backspace":ef["Mod-Delete"],"Alt-Delete":ef["Mod-Delete"],"Alt-d":ef["Mod-Delete"],"Ctrl-a":Gl,"Ctrl-e":Kl};for(var nf in ef)tf[nf]=ef[nf];ef.Home=Gl,ef.End=Kl;"undefined"!=typeof navigator?/Mac|iP(hone|[oa]d)/.test(navigator.platform):"undefined"!=typeof os&&os.platform();function rf(e,t){return function(n,r){var a=n.selection,o=a.$from,i=a.$to,s=o.blockRange(i),u=!1,c=s;if(!s)return!1;if(s.depth>=2&&o.node(s.depth-1).type.compatibleContent(e)&&0==s.startIndex){if(0==o.index(s.depth-1))return!1;var l=n.doc.resolve(s.start-2);c=new Mu(l,l,s.depth),s.endIndex<s.parent.childCount&&(s=new Mu(o,n.doc.resolve(i.end(s.depth)),s.depth)),u=!0}var f=Bc(c,e,t,s);return!!f&&(r&&r(function(e,t,n,r,a){for(var o=uu.empty,i=n.length-1;i>=0;i--)o=uu.from(n[i].type.create(n[i].attrs,o));e.step(new Pc(t.start-(r?2:0),t.end,t.start,t.end,new mu(o,0,0),n.length,!0));for(var s=0,u=0;u<n.length;u++)n[u].type==a&&(s=u+1);for(var c=n.length-s,l=t.start+n.length-(r?2:0),f=t.parent,d=t.startIndex,p=t.endIndex,h=!0;d<p;d++,h=!1)!h&&Zc(e.doc,l,c)&&(e.split(l,c),l+=2*c),l+=f.child(d).nodeSize;return e}(n.tr,s,f,u,e).scrollIntoView()),!0)}}function af(e){return function(t,n){var r=t.selection,a=r.$from,o=r.$to,i=a.blockRange(o,(function(t){return t.childCount&&t.firstChild.type==e}));return!!i&&(!n||(a.node(i.depth-1).type==e?function(e,t,n,r){var a=e.tr,o=r.end,i=r.$to.end(r.depth);o<i&&(a.step(new Pc(o-1,i,o,i,new mu(uu.from(n.create(null,r.parent.copy())),1,0),1,!0)),r=new Mu(a.doc.resolve(r.$from.pos),a.doc.resolve(i),r.depth));return t(a.lift(r,Lc(r)).scrollIntoView()),!0}(t,n,e,i):function(e,t,n){for(var r=e.tr,a=n.parent,o=n.end,i=n.endIndex-1,s=n.startIndex;i>s;i--)o-=a.child(i).nodeSize,r.delete(o-1,o+1);var u=r.doc.resolve(n.start),c=u.nodeAfter;if(r.mapping.map(n.end)!=n.start+u.nodeAfter.nodeSize)return!1;var l=0==n.startIndex,f=n.endIndex==a.childCount,d=u.node(-1),p=u.index(-1);if(!d.canReplace(p+(l?0:1),p+1,c.content.append(f?uu.empty:uu.from(a))))return!1;var h=u.pos,m=h+c.nodeSize;return r.step(new Pc(h-(l?1:0),m+(f?1:0),h+1,m-1,new mu((l?uu.empty:uu.from(a.copy(uu.empty))).append(f?uu.empty:uu.from(a.copy(uu.empty))),l?0:1,f?0:1),l?0:1)),t(r.scrollIntoView()),!0}(t,n,i)))}}var of={};if("undefined"!=typeof navigator&&"undefined"!=typeof document){var sf=/Edge\/(\d+)/.exec(navigator.userAgent),uf=/MSIE \d/.test(navigator.userAgent),cf=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent),lf=of.ie=!!(uf||cf||sf);of.ie_version=uf?document.documentMode||6:cf?+cf[1]:sf?+sf[1]:null,of.gecko=!lf&&/gecko\/(\d+)/i.test(navigator.userAgent),of.gecko_version=of.gecko&&+(/Firefox\/(\d+)/.exec(navigator.userAgent)||[0,0])[1];var ff=!lf&&/Chrome\/(\d+)/.exec(navigator.userAgent);of.chrome=!!ff,of.chrome_version=ff&&+ff[1],of.safari=!lf&&/Apple Computer/.test(navigator.vendor),of.ios=of.safari&&(/Mobile\/\w+/.test(navigator.userAgent)||navigator.maxTouchPoints>2),of.mac=of.ios||/Mac/.test(navigator.platform),of.android=/Android \d/.test(navigator.userAgent),of.webkit="webkitFontSmoothing"in document.documentElement.style,of.webkit_version=of.webkit&&+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]}var df=function(e){for(var t=0;;t++)if(!(e=e.previousSibling))return t},pf=function(e){var t=e.assignedSlot||e.parentNode;return t&&11==t.nodeType?t.host:t},hf=null,mf=function(e,t,n){var r=hf||(hf=document.createRange());return r.setEnd(e,null==n?e.nodeValue.length:n),r.setStart(e,t||0),r},vf=function(e,t,n,r){return n&&(yf(e,t,n,r,-1)||yf(e,t,n,r,1))},gf=/^(img|br|input|textarea|hr)$/i;function yf(e,t,n,r,a){for(;;){if(e==n&&t==r)return!0;if(t==(a<0?0:bf(e))){var o=e.parentNode;if(!o||1!=o.nodeType||xf(e)||gf.test(e.nodeName)||"false"==e.contentEditable)return!1;t=df(e)+(a<0?0:1),e=o}else{if(1!=e.nodeType)return!1;if("false"==(e=e.childNodes[t+(a<0?-1:0)]).contentEditable)return!1;t=a<0?bf(e):0}}}function bf(e){return 3==e.nodeType?e.nodeValue.length:e.childNodes.length}function xf(e){for(var t,n=e;n&&!(t=n.pmViewDesc);n=n.parentNode);return t&&t.node&&t.node.isBlock&&(t.dom==e||t.contentDOM==e)}var wf=function(e){var t=e.isCollapsed;return t&&of.chrome&&e.rangeCount&&!e.getRangeAt(0).collapsed&&(t=!1),t};function kf(e,t){var n=document.createEvent("Event");return n.initEvent("keydown",!0,!0),n.keyCode=e,n.key=n.code=t,n}function Sf(e){return{left:0,right:e.documentElement.clientWidth,top:0,bottom:e.documentElement.clientHeight}}function _f(e,t){return"number"==typeof e?e:e[t]}function Nf(e){var t=e.getBoundingClientRect(),n=t.width/e.offsetWidth||1,r=t.height/e.offsetHeight||1;return{left:t.left,right:t.left+e.clientWidth*n,top:t.top,bottom:t.top+e.clientHeight*r}}function Ef(e,t,n){for(var r=e.someProp("scrollThreshold")||0,a=e.someProp("scrollMargin")||5,o=e.dom.ownerDocument,i=n||e.dom;i;i=pf(i))if(1==i.nodeType){var s=i==o.body||1!=i.nodeType,u=s?Sf(o):Nf(i),c=0,l=0;if(t.top<u.top+_f(r,"top")?l=-(u.top-t.top+_f(a,"top")):t.bottom>u.bottom-_f(r,"bottom")&&(l=t.bottom-u.bottom+_f(a,"bottom")),t.left<u.left+_f(r,"left")?c=-(u.left-t.left+_f(a,"left")):t.right>u.right-_f(r,"right")&&(c=t.right-u.right+_f(a,"right")),c||l)if(s)o.defaultView.scrollBy(c,l);else{var f=i.scrollLeft,d=i.scrollTop;l&&(i.scrollTop+=l),c&&(i.scrollLeft+=c);var p=i.scrollLeft-f,h=i.scrollTop-d;t={left:t.left-p,top:t.top-h,right:t.right-p,bottom:t.bottom-h}}if(s)break}}function Cf(e){for(var t=[],n=e.ownerDocument;e&&(t.push({dom:e,top:e.scrollTop,left:e.scrollLeft}),e!=n);e=pf(e));return t}function Tf(e,t){for(var n=0;n<e.length;n++){var r=e[n],a=r.dom,o=r.top,i=r.left;a.scrollTop!=o+t&&(a.scrollTop=o+t),a.scrollLeft!=i&&(a.scrollLeft=i)}}var If=null;function Of(e,t){for(var n,r,a=2e8,o=0,i=t.top,s=t.top,u=e.firstChild,c=0;u;u=u.nextSibling,c++){var l=void 0;if(1==u.nodeType)l=u.getClientRects();else{if(3!=u.nodeType)continue;l=mf(u).getClientRects()}for(var f=0;f<l.length;f++){var d=l[f];if(d.top<=i&&d.bottom>=s){i=Math.max(d.bottom,i),s=Math.min(d.top,s);var p=d.left>t.left?d.left-t.left:d.right<t.left?t.left-d.right:0;if(p<a){n=u,a=p,r=p&&3==n.nodeType?{left:d.right<t.left?d.right:d.left,top:t.top}:t,1==u.nodeType&&p&&(o=c+(t.left>=(d.left+d.right)/2?1:0));continue}}!n&&(t.left>=d.right&&t.top>=d.top||t.left>=d.left&&t.top>=d.bottom)&&(o=c+1)}}return n&&3==n.nodeType?function(e,t){for(var n=e.nodeValue.length,r=document.createRange(),a=0;a<n;a++){r.setEnd(e,a+1),r.setStart(e,a);var o=Rf(r,1);if(o.top!=o.bottom&&Af(t,o))return{node:e,offset:a+(t.left>=(o.left+o.right)/2?1:0)}}return{node:e,offset:0}}(n,r):!n||a&&1==n.nodeType?{node:e,offset:o}:Of(n,r)}function Af(e,t){return e.left>=t.left-1&&e.left<=t.right+1&&e.top>=t.top-1&&e.top<=t.bottom+1}function Df(e,t,n){var r=e.childNodes.length;if(r&&n.top<n.bottom)for(var a=Math.max(0,Math.min(r-1,Math.floor(r*(t.top-n.top)/(n.bottom-n.top))-2)),o=a;;){var i=e.childNodes[o];if(1==i.nodeType)for(var s=i.getClientRects(),u=0;u<s.length;u++){var c=s[u];if(Af(t,c))return Df(i,t,c)}if((o=(o+1)%r)==a)break}return e}function Mf(e,t){var n,r,a,o,i=e.dom.ownerDocument;if(i.caretPositionFromPoint)try{var s=i.caretPositionFromPoint(t.left,t.top);s&&(a=(n=s).offsetNode,o=n.offset)}catch(v){}if(!a&&i.caretRangeFromPoint){var u=i.caretRangeFromPoint(t.left,t.top);u&&(a=(r=u).startContainer,o=r.startOffset)}var c,l=(e.root.elementFromPoint?e.root:i).elementFromPoint(t.left,t.top+1);if(!l||!e.dom.contains(1!=l.nodeType?l.parentNode:l)){var f=e.dom.getBoundingClientRect();if(!Af(t,f))return null;if(!(l=Df(e.dom,t,f)))return null}if(of.safari)for(var d=l;a&&d;d=pf(d))d.draggable&&(a=o=null);if(l=function(e,t){var n=e.parentNode;return n&&/^li$/i.test(n.nodeName)&&t.left<e.getBoundingClientRect().left?n:e}(l,t),a){if(of.gecko&&1==a.nodeType&&(o=Math.min(o,a.childNodes.length))<a.childNodes.length){var p,h=a.childNodes[o];"IMG"==h.nodeName&&(p=h.getBoundingClientRect()).right<=t.left&&p.bottom>t.top&&o++}a==e.dom&&o==a.childNodes.length-1&&1==a.lastChild.nodeType&&t.top>a.lastChild.getBoundingClientRect().bottom?c=e.state.doc.content.size:0!=o&&1==a.nodeType&&"BR"==a.childNodes[o-1].nodeName||(c=function(e,t,n,r){for(var a=-1,o=t;o!=e.dom;){var i=e.docView.nearestDesc(o,!0);if(!i)return null;if(i.node.isBlock&&i.parent){var s=i.dom.getBoundingClientRect();if(s.left>r.left||s.top>r.top)a=i.posBefore;else{if(!(s.right<r.left||s.bottom<r.top))break;a=i.posAfter}}o=i.dom.parentNode}return a>-1?a:e.docView.posFromDOM(t,n)}(e,a,o,t))}null==c&&(c=function(e,t,n){var r=Of(t,n),a=r.node,o=r.offset,i=-1;if(1==a.nodeType&&!a.firstChild){var s=a.getBoundingClientRect();i=s.left!=s.right&&n.left>(s.left+s.right)/2?1:-1}return e.docView.posFromDOM(a,o,i)}(e,l,t));var m=e.docView.nearestDesc(l,!0);return{pos:c,inside:m?m.posAtStart-m.border:-1}}function Rf(e,t){var n=e.getClientRects();return n.length?n[t<0?0:n.length-1]:e.getBoundingClientRect()}var Pf=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function jf(e,t,n){var r=e.docView.domFromPos(t,n<0?-1:1),a=r.node,o=r.offset,i=of.webkit||of.gecko;if(3==a.nodeType){if(!i||!Pf.test(a.nodeValue)&&(n<0?o:o!=a.nodeValue.length)){var s=o,u=o,c=n<0?1:-1;return n<0&&!o?(u++,c=-1):n>=0&&o==a.nodeValue.length?(s--,c=1):n<0?s--:u++,Ff(Rf(mf(a,s,u),c),c<0)}var l=Rf(mf(a,o,o),n);if(of.gecko&&o&&/\s/.test(a.nodeValue[o-1])&&o<a.nodeValue.length){var f=Rf(mf(a,o-1,o-1),-1);if(f.top==l.top){var d=Rf(mf(a,o,o+1),-1);if(d.top!=l.top)return Ff(d,d.left<f.left)}}return l}if(!e.state.doc.resolve(t).parent.inlineContent){if(o&&(n<0||o==bf(a))){var p=a.childNodes[o-1];if(1==p.nodeType)return Lf(p.getBoundingClientRect(),!1)}if(o<bf(a)){var h=a.childNodes[o];if(1==h.nodeType)return Lf(h.getBoundingClientRect(),!0)}return Lf(a.getBoundingClientRect(),n>=0)}if(o&&(n<0||o==bf(a))){var m=a.childNodes[o-1],v=3==m.nodeType?mf(m,bf(m)-(i?0:1)):1!=m.nodeType||"BR"==m.nodeName&&m.nextSibling?null:m;if(v)return Ff(Rf(v,1),!1)}if(o<bf(a)){for(var g=a.childNodes[o];g.pmViewDesc&&g.pmViewDesc.ignoreForCoords;)g=g.nextSibling;var y=g?3==g.nodeType?mf(g,0,i?0:1):1==g.nodeType?g:null:null;if(y)return Ff(Rf(y,-1),!0)}return Ff(Rf(3==a.nodeType?mf(a):a,-n),n>=0)}function Ff(e,t){if(0==e.width)return e;var n=t?e.left:e.right;return{top:e.top,bottom:e.bottom,left:n,right:n}}function Lf(e,t){if(0==e.height)return e;var n=t?e.top:e.bottom;return{top:n,bottom:n,left:e.left,right:e.right}}function Bf(e,t,n){var r=e.state,a=e.root.activeElement;r!=t&&e.updateState(t),a!=e.dom&&e.focus();try{return n()}finally{r!=t&&e.updateState(r),a!=e.dom&&a&&a.focus()}}var zf=/[\u0590-\u08ac]/;var Zf=null,Vf=null,Uf=!1;function qf(e,t,n){return Zf==t&&Vf==n?Uf:(Zf=t,Vf=n,Uf="up"==n||"down"==n?function(e,t,n){var r=t.selection,a="up"==n?r.$from:r.$to;return Bf(e,t,(function(){for(var t=e.docView.domFromPos(a.pos,"up"==n?-1:1).node;;){var r=e.docView.nearestDesc(t,!0);if(!r)break;if(r.node.isBlock){t=r.dom;break}t=r.dom.parentNode}for(var o=jf(e,a.pos,1),i=t.firstChild;i;i=i.nextSibling){var s=void 0;if(1==i.nodeType)s=i.getClientRects();else{if(3!=i.nodeType)continue;s=mf(i,0,i.nodeValue.length).getClientRects()}for(var u=0;u<s.length;u++){var c=s[u];if(c.bottom>c.top+1&&("up"==n?o.top-c.top>2*(c.bottom-o.top):c.bottom-o.bottom>2*(o.bottom-c.top)))return!1}}return!0}))}(e,t,n):function(e,t,n){var r=t.selection.$head;if(!r.parent.isTextblock)return!1;var a=r.parentOffset,o=!a,i=a==r.parent.content.size,s=e.root.getSelection();return zf.test(r.parent.textContent)&&s.modify?Bf(e,t,(function(){var t=s.getRangeAt(0),a=s.focusNode,o=s.focusOffset,i=s.caretBidiLevel;s.modify("move",n,"character");var u=!(r.depth?e.docView.domAfterPos(r.before()):e.dom).contains(1==s.focusNode.nodeType?s.focusNode:s.focusNode.parentNode)||a==s.focusNode&&o==s.focusOffset;return s.removeAllRanges(),s.addRange(t),null!=i&&(s.caretBidiLevel=i),u})):"left"==n||"backward"==n?o:i}(e,t,n))}var Wf=function(e,t,n,r){this.parent=e,this.children=t,this.dom=n,n.pmViewDesc=this,this.contentDOM=r,this.dirty=0},Hf={size:{configurable:!0},border:{configurable:!0},posBefore:{configurable:!0},posAtStart:{configurable:!0},posAfter:{configurable:!0},posAtEnd:{configurable:!0},contentLost:{configurable:!0},domAtom:{configurable:!0},ignoreForCoords:{configurable:!0}};Wf.prototype.matchesWidget=function(){return!1},Wf.prototype.matchesMark=function(){return!1},Wf.prototype.matchesNode=function(){return!1},Wf.prototype.matchesHack=function(e){return!1},Wf.prototype.parseRule=function(){return null},Wf.prototype.stopEvent=function(){return!1},Hf.size.get=function(){for(var e=0,t=0;t<this.children.length;t++)e+=this.children[t].size;return e},Hf.border.get=function(){return 0},Wf.prototype.destroy=function(){this.parent=null,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=null);for(var e=0;e<this.children.length;e++)this.children[e].destroy()},Wf.prototype.posBeforeChild=function(e){for(var t=0,n=this.posAtStart;t<this.children.length;t++){var r=this.children[t];if(r==e)return n;n+=r.size}},Hf.posBefore.get=function(){return this.parent.posBeforeChild(this)},Hf.posAtStart.get=function(){return this.parent?this.parent.posBeforeChild(this)+this.border:0},Hf.posAfter.get=function(){return this.posBefore+this.size},Hf.posAtEnd.get=function(){return this.posAtStart+this.size-2*this.border},Wf.prototype.localPosFromDOM=function(e,t,n){if(this.contentDOM&&this.contentDOM.contains(1==e.nodeType?e:e.parentNode)){if(n<0){var r,a;if(e==this.contentDOM)r=e.childNodes[t-1];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;r=e.previousSibling}for(;r&&(!(a=r.pmViewDesc)||a.parent!=this);)r=r.previousSibling;return r?this.posBeforeChild(a)+a.size:this.posAtStart}var o,i;if(e==this.contentDOM)o=e.childNodes[t];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;o=e.nextSibling}for(;o&&(!(i=o.pmViewDesc)||i.parent!=this);)o=o.nextSibling;return o?this.posBeforeChild(i):this.posAtEnd}var s;if(e==this.dom&&this.contentDOM)s=t>df(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))s=2&e.compareDocumentPosition(this.contentDOM);else if(this.dom.firstChild){if(0==t)for(var u=e;;u=u.parentNode){if(u==this.dom){s=!1;break}if(u.parentNode.firstChild!=u)break}if(null==s&&t==e.childNodes.length)for(var c=e;;c=c.parentNode){if(c==this.dom){s=!0;break}if(c.parentNode.lastChild!=c)break}}return(null==s?n>0:s)?this.posAtEnd:this.posAtStart},Wf.prototype.nearestDesc=function(e,t){for(var n=!0,r=e;r;r=r.parentNode){var a=this.getDesc(r);if(a&&(!t||a.node)){if(!n||!a.nodeDOM||(1==a.nodeDOM.nodeType?a.nodeDOM.contains(1==e.nodeType?e:e.parentNode):a.nodeDOM==e))return a;n=!1}}},Wf.prototype.getDesc=function(e){for(var t=e.pmViewDesc,n=t;n;n=n.parent)if(n==this)return t},Wf.prototype.posFromDOM=function(e,t,n){for(var r=e;r;r=r.parentNode){var a=this.getDesc(r);if(a)return a.localPosFromDOM(e,t,n)}return-1},Wf.prototype.descAt=function(e){for(var t=0,n=0;t<this.children.length;t++){var r=this.children[t],a=n+r.size;if(n==e&&a!=n){for(;!r.border&&r.children.length;)r=r.children[0];return r}if(e<a)return r.descAt(e-n-r.border);n=a}},Wf.prototype.domFromPos=function(e,t){if(!this.contentDOM)return{node:this.dom,offset:0};for(var n=0,r=0,a=0;n<this.children.length;n++){var o=this.children[n],i=a+o.size;if(i>e||o instanceof ed){r=e-a;break}a=i}if(r)return this.children[n].domFromPos(r-this.children[n].border,t);for(var s=void 0;n&&!(s=this.children[n-1]).size&&s instanceof Kf&&s.widget.type.side>=0;n--);if(t<=0){for(var u,c=!0;(u=n?this.children[n-1]:null)&&u.dom.parentNode!=this.contentDOM;n--,c=!1);return u&&t&&c&&!u.border&&!u.domAtom?u.domFromPos(u.size,t):{node:this.contentDOM,offset:u?df(u.dom)+1:0}}for(var l,f=!0;(l=n<this.children.length?this.children[n]:null)&&l.dom.parentNode!=this.contentDOM;n++,f=!1);return l&&f&&!l.border&&!l.domAtom?l.domFromPos(0,t):{node:this.contentDOM,offset:l?df(l.dom):this.contentDOM.childNodes.length}},Wf.prototype.parseRange=function(e,t,n){if(void 0===n&&(n=0),0==this.children.length)return{node:this.contentDOM,from:e,to:t,fromOffset:0,toOffset:this.contentDOM.childNodes.length};for(var r=-1,a=-1,o=n,i=0;;i++){var s=this.children[i],u=o+s.size;if(-1==r&&e<=u){var c=o+s.border;if(e>=c&&t<=u-s.border&&s.node&&s.contentDOM&&this.contentDOM.contains(s.contentDOM))return s.parseRange(e,t,c);e=o;for(var l=i;l>0;l--){var f=this.children[l-1];if(f.size&&f.dom.parentNode==this.contentDOM&&!f.emptyChildAt(1)){r=df(f.dom)+1;break}e-=f.size}-1==r&&(r=0)}if(r>-1&&(u>t||i==this.children.length-1)){t=u;for(var d=i+1;d<this.children.length;d++){var p=this.children[d];if(p.size&&p.dom.parentNode==this.contentDOM&&!p.emptyChildAt(-1)){a=df(p.dom);break}t+=p.size}-1==a&&(a=this.contentDOM.childNodes.length);break}o=u}return{node:this.contentDOM,from:e,to:t,fromOffset:r,toOffset:a}},Wf.prototype.emptyChildAt=function(e){if(this.border||!this.contentDOM||!this.children.length)return!1;var t=this.children[e<0?0:this.children.length-1];return 0==t.size||t.emptyChildAt(e)},Wf.prototype.domAfterPos=function(e){var t=this.domFromPos(e,0),n=t.node,r=t.offset;if(1!=n.nodeType||r==n.childNodes.length)throw new RangeError("No node after pos "+e);return n.childNodes[r]},Wf.prototype.setSelection=function(e,t,n,r){for(var a=Math.min(e,t),o=Math.max(e,t),i=0,s=0;i<this.children.length;i++){var u=this.children[i],c=s+u.size;if(a>s&&o<c)return u.setSelection(e-s-u.border,t-s-u.border,n,r);s=c}var l=this.domFromPos(e,e?-1:1),f=t==e?l:this.domFromPos(t,t?-1:1),d=n.getSelection(),p=!1;if((of.gecko||of.safari)&&e==t){var h=l.node,m=l.offset;if(3==h.nodeType){if((p=m&&"\n"==h.nodeValue[m-1])&&m==h.nodeValue.length)for(var v=h,g=void 0;v;v=v.parentNode){if(g=v.nextSibling){"BR"==g.nodeName&&(l=f={node:g.parentNode,offset:df(g)+1});break}var y=v.pmViewDesc;if(y&&y.node&&y.node.isBlock)break}}else{var b=h.childNodes[m-1];p=b&&("BR"==b.nodeName||"false"==b.contentEditable)}}if(of.gecko&&d.focusNode&&d.focusNode!=f.node&&1==d.focusNode.nodeType){var x=d.focusNode.childNodes[d.focusOffset];x&&"false"==x.contentEditable&&(r=!0)}if(r||p&&of.safari||!vf(l.node,l.offset,d.anchorNode,d.anchorOffset)||!vf(f.node,f.offset,d.focusNode,d.focusOffset)){var w=!1;if((d.extend||e==t)&&!p){d.collapse(l.node,l.offset);try{e!=t&&d.extend(f.node,f.offset),w=!0}catch(_){if(!(_ instanceof DOMException))throw _}}if(!w){if(e>t){var k=l;l=f,f=k}var S=document.createRange();S.setEnd(f.node,f.offset),S.setStart(l.node,l.offset),d.removeAllRanges(),d.addRange(S)}}},Wf.prototype.ignoreMutation=function(e){return!this.contentDOM&&"selection"!=e.type},Hf.contentLost.get=function(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)},Wf.prototype.markDirty=function(e,t){for(var n=0,r=0;r<this.children.length;r++){var a=this.children[r],o=n+a.size;if(n==o?e<=o&&t>=n:e<o&&t>n){var i=n+a.border,s=o-a.border;if(e>=i&&t<=s)return this.dirty=e==n||t==o?2:1,void(e!=i||t!=s||!a.contentLost&&a.dom.parentNode==this.contentDOM?a.markDirty(e-i,t-i):a.dirty=3);a.dirty=a.dom!=a.contentDOM||a.dom.parentNode!=this.contentDOM||a.children.length?3:2}n=o}this.dirty=2},Wf.prototype.markParentsDirty=function(){for(var e=1,t=this.parent;t;t=t.parent,e++){var n=1==e?2:1;t.dirty<n&&(t.dirty=n)}},Hf.domAtom.get=function(){return!1},Hf.ignoreForCoords.get=function(){return!1},Object.defineProperties(Wf.prototype,Hf);var Gf=[],Kf=function(e){function t(t,n,r,a){var o,i=n.type.toDOM;if("function"==typeof i&&(i=i(r,(function(){return o?o.parent?o.parent.posBeforeChild(o):void 0:a}))),!n.type.spec.raw){if(1!=i.nodeType){var s=document.createElement("span");s.appendChild(i),i=s}i.contentEditable=!1,i.classList.add("ProseMirror-widget")}e.call(this,t,Gf,i,null),this.widget=n,o=this}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={domAtom:{configurable:!0}};return t.prototype.matchesWidget=function(e){return 0==this.dirty&&e.type.eq(this.widget.type)},t.prototype.parseRule=function(){return{ignore:!0}},t.prototype.stopEvent=function(e){var t=this.widget.spec.stopEvent;return!!t&&t(e)},t.prototype.ignoreMutation=function(e){return"selection"!=e.type||this.widget.spec.ignoreSelection},t.prototype.destroy=function(){this.widget.type.destroy(this.dom),e.prototype.destroy.call(this)},n.domAtom.get=function(){return!0},Object.defineProperties(t.prototype,n),t}(Wf),Xf=function(e){function t(t,n,r,a){e.call(this,t,Gf,n,null),this.textDOM=r,this.text=a}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={size:{configurable:!0}};return n.size.get=function(){return this.text.length},t.prototype.localPosFromDOM=function(e,t){return e!=this.textDOM?this.posAtStart+(t?this.size:0):this.posAtStart+t},t.prototype.domFromPos=function(e){return{node:this.textDOM,offset:e}},t.prototype.ignoreMutation=function(e){return"characterData"===e.type&&e.target.nodeValue==e.oldValue},Object.defineProperties(t.prototype,n),t}(Wf),Yf=function(e){function t(t,n,r,a){e.call(this,t,[],r,a),this.mark=n}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.create=function(e,n,r,a){var o=a.nodeViews[n.type.name],i=o&&o(n,a,r);return i&&i.dom||(i=yc.renderSpec(document,n.type.spec.toDOM(n,r))),new t(e,n,i.dom,i.contentDOM||i.dom)},t.prototype.parseRule=function(){return 3&this.dirty||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}},t.prototype.matchesMark=function(e){return 3!=this.dirty&&this.mark.eq(e)},t.prototype.markDirty=function(t,n){if(e.prototype.markDirty.call(this,t,n),0!=this.dirty){for(var r=this.parent;!r.node;)r=r.parent;r.dirty<this.dirty&&(r.dirty=this.dirty),this.dirty=0}},t.prototype.slice=function(e,n,r){var a=t.create(this.parent,this.mark,!0,r),o=this.children,i=this.size;n<i&&(o=pd(o,n,i,r)),e>0&&(o=pd(o,0,e,r));for(var s=0;s<o.length;s++)o[s].parent=a;return a.children=o,a},t}(Wf),$f=function(e){function t(t,n,r,a,o,i,s,u,c){e.call(this,t,n.isLeaf?Gf:[],o,i),this.nodeDOM=s,this.node=n,this.outerDeco=r,this.innerDeco=a,i&&this.updateChildren(u,c)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={size:{configurable:!0},border:{configurable:!0},domAtom:{configurable:!0}};return t.create=function(e,n,r,a,o,i){var s,u,c=o.nodeViews[n.type.name],l=c&&c(n,o,(function(){return u?u.parent?u.parent.posBeforeChild(u):void 0:i}),r,a),f=l&&l.dom,d=l&&l.contentDOM;if(n.isText)if(f){if(3!=f.nodeType)throw new RangeError("Text must be rendered as a DOM text node")}else f=document.createTextNode(n.text);else f||(f=(s=yc.renderSpec(document,n.type.spec.toDOM(n))).dom,d=s.contentDOM);d||n.isText||"BR"==f.nodeName||(f.hasAttribute("contenteditable")||(f.contentEditable=!1),n.type.spec.draggable&&(f.draggable=!0));var p=f;return f=ud(f,r,n),l?u=new td(e,n,r,a,f,d,p,l,o,i+1):n.isText?new Qf(e,n,r,a,f,p,o):new t(e,n,r,a,f,d,p,o,i+1)},t.prototype.parseRule=function(){var e=this;if(this.node.type.spec.reparseInView)return null;var t={node:this.node.type.name,attrs:this.node.attrs};return"pre"==this.node.type.whitespace&&(t.preserveWhitespace="full"),this.contentDOM&&!this.contentLost?t.contentElement=this.contentDOM:t.getContent=function(){return e.contentDOM?uu.empty:e.node.content},t},t.prototype.matchesNode=function(e,t,n){return 0==this.dirty&&e.eq(this.node)&&cd(t,this.outerDeco)&&n.eq(this.innerDeco)},n.size.get=function(){return this.node.nodeSize},n.border.get=function(){return this.node.isLeaf?0:1},t.prototype.updateChildren=function(e,t){var n=this,r=this.node.inlineContent,a=t,o=e.composing&&this.localCompositionInfo(e,t),i=o&&o.pos>-1?o:null,s=o&&o.pos<0,u=new fd(this,i&&i.node);!function(e,t,n,r){var a=t.locals(e),o=0;if(0==a.length){for(var i=0;i<e.childCount;i++){var s=e.child(i);r(s,a,t.forChild(o,s),i),o+=s.nodeSize}return}for(var u=0,c=[],l=null,f=0;;){if(u<a.length&&a[u].to==o){for(var d=a[u++],p=void 0;u<a.length&&a[u].to==o;)(p||(p=[d])).push(a[u++]);if(p){p.sort(dd);for(var h=0;h<p.length;h++)n(p[h],f,!!l)}else n(d,f,!!l)}var m=void 0,v=void 0;if(l)v=-1,m=l,l=null;else{if(!(f<e.childCount))break;v=f,m=e.child(f++)}for(var g=0;g<c.length;g++)c[g].to<=o&&c.splice(g--,1);for(;u<a.length&&a[u].from<=o&&a[u].to>o;)c.push(a[u++]);var y=o+m.nodeSize;if(m.isText){var b=y;u<a.length&&a[u].from<b&&(b=a[u].from);for(var x=0;x<c.length;x++)c[x].to<b&&(b=c[x].to);b<y&&(l=m.cut(b-o),m=m.cut(0,b-o),y=b,v=-1)}r(m,c.length?m.isInline&&!m.isLeaf?c.filter((function(e){return!e.inline})):c.slice():Gf,t.forChild(o,m),v),o=y}}(this.node,this.innerDeco,(function(t,o,i){t.spec.marks?u.syncToMarks(t.spec.marks,r,e):t.type.side>=0&&!i&&u.syncToMarks(o==n.node.childCount?pu.none:n.node.child(o).marks,r,e),u.placeWidget(t,e,a)}),(function(t,n,i,c){var l;u.syncToMarks(t.marks,r,e),u.findNodeMatch(t,n,i,c)||s&&e.state.selection.from>a&&e.state.selection.to<a+t.nodeSize&&(l=u.findIndexWithChild(o.node))>-1&&u.updateNodeAt(t,n,i,l,e)||u.updateNextNode(t,n,i,e,c)||u.addNode(t,n,i,e,a),a+=t.nodeSize})),u.syncToMarks(Gf,r,e),this.node.isTextblock&&u.addTextblockHacks(),u.destroyRest(),(u.changed||2==this.dirty)&&(i&&this.protectLocalComposition(e,i),nd(this.contentDOM,this.children,e),of.ios&&function(e){if("UL"==e.nodeName||"OL"==e.nodeName){var t=e.style.cssText;e.style.cssText=t+"; list-style: square !important",window.getComputedStyle(e).listStyle,e.style.cssText=t}}(this.dom))},t.prototype.localCompositionInfo=function(e,t){var n=e.state.selection,r=n.from,a=n.to;if(!(!(e.state.selection instanceof cl)||r<t||a>t+this.node.content.size)){var o=e.root.getSelection(),i=function(e,t){for(;;){if(3==e.nodeType)return e;if(1==e.nodeType&&t>0){if(e.childNodes.length>t&&3==e.childNodes[t].nodeType)return e.childNodes[t];t=bf(e=e.childNodes[t-1])}else{if(!(1==e.nodeType&&t<e.childNodes.length))return null;e=e.childNodes[t],t=0}}}(o.focusNode,o.focusOffset);if(i&&this.dom.contains(i.parentNode)){if(this.node.inlineContent){var s=i.nodeValue,u=function(e,t,n,r){for(var a=0,o=0;a<e.childCount&&o<=r;){var i=e.child(a++),s=o;if(o+=i.nodeSize,i.isText){for(var u=i.text;a<e.childCount;){var c=e.child(a++);if(o+=c.nodeSize,!c.isText)break;u+=c.text}if(o>=n&&s<r){var l=u.lastIndexOf(t,r-s-1);if(l>=0&&l+t.length+s>=n)return s+l}}}return-1}(this.node.content,s,r-t,a-t);return u<0?null:{node:i,pos:u,text:s}}return{node:i,pos:-1}}}},t.prototype.protectLocalComposition=function(e,t){var n=t.node,r=t.pos,a=t.text;if(!this.getDesc(n)){for(var o=n;o.parentNode!=this.contentDOM;o=o.parentNode){for(;o.previousSibling;)o.parentNode.removeChild(o.previousSibling);for(;o.nextSibling;)o.parentNode.removeChild(o.nextSibling);o.pmViewDesc&&(o.pmViewDesc=null)}var i=new Xf(this,o,n,a);e.compositionNodes.push(i),this.children=pd(this.children,r,r+a.length,e,i)}},t.prototype.update=function(e,t,n,r){return!(3==this.dirty||!e.sameMarkup(this.node))&&(this.updateInner(e,t,n,r),!0)},t.prototype.updateInner=function(e,t,n,r){this.updateOuterDeco(t),this.node=e,this.innerDeco=n,this.contentDOM&&this.updateChildren(r,this.posAtStart),this.dirty=0},t.prototype.updateOuterDeco=function(e){if(!cd(e,this.outerDeco)){var t=1!=this.nodeDOM.nodeType,n=this.dom;this.dom=id(this.dom,this.nodeDOM,od(this.outerDeco,this.node,t),od(e,this.node,t)),this.dom!=n&&(n.pmViewDesc=null,this.dom.pmViewDesc=this),this.outerDeco=e}},t.prototype.selectNode=function(){this.nodeDOM.classList.add("ProseMirror-selectednode"),!this.contentDOM&&this.node.type.spec.draggable||(this.dom.draggable=!0)},t.prototype.deselectNode=function(){this.nodeDOM.classList.remove("ProseMirror-selectednode"),!this.contentDOM&&this.node.type.spec.draggable||this.dom.removeAttribute("draggable")},n.domAtom.get=function(){return this.node.isAtom},Object.defineProperties(t.prototype,n),t}(Wf);function Jf(e,t,n,r,a){return ud(r,t,e),new $f(null,e,t,n,r,r,r,a,0)}var Qf=function(e){function t(t,n,r,a,o,i,s){e.call(this,t,n,r,a,o,null,i,s)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={domAtom:{configurable:!0}};return t.prototype.parseRule=function(){for(var e=this.nodeDOM.parentNode;e&&e!=this.dom&&!e.pmIsDeco;)e=e.parentNode;return{skip:e||!0}},t.prototype.update=function(e,t,n,r){return!(3==this.dirty||0!=this.dirty&&!this.inParent()||!e.sameMarkup(this.node))&&(this.updateOuterDeco(t),0==this.dirty&&e.text==this.node.text||e.text==this.nodeDOM.nodeValue||(this.nodeDOM.nodeValue=e.text,r.trackWrites==this.nodeDOM&&(r.trackWrites=null)),this.node=e,this.dirty=0,!0)},t.prototype.inParent=function(){for(var e=this.parent.contentDOM,t=this.nodeDOM;t;t=t.parentNode)if(t==e)return!0;return!1},t.prototype.domFromPos=function(e){return{node:this.nodeDOM,offset:e}},t.prototype.localPosFromDOM=function(t,n,r){return t==this.nodeDOM?this.posAtStart+Math.min(n,this.node.text.length):e.prototype.localPosFromDOM.call(this,t,n,r)},t.prototype.ignoreMutation=function(e){return"characterData"!=e.type&&"selection"!=e.type},t.prototype.slice=function(e,n,r){var a=this.node.cut(e,n),o=document.createTextNode(a.text);return new t(this.parent,a,this.outerDeco,this.innerDeco,o,o,r)},t.prototype.markDirty=function(t,n){e.prototype.markDirty.call(this,t,n),this.dom==this.nodeDOM||0!=t&&n!=this.nodeDOM.nodeValue.length||(this.dirty=3)},n.domAtom.get=function(){return!1},Object.defineProperties(t.prototype,n),t}($f),ed=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={domAtom:{configurable:!0},ignoreForCoords:{configurable:!0}};return t.prototype.parseRule=function(){return{ignore:!0}},t.prototype.matchesHack=function(e){return 0==this.dirty&&this.dom.nodeName==e},n.domAtom.get=function(){return!0},n.ignoreForCoords.get=function(){return"IMG"==this.dom.nodeName},Object.defineProperties(t.prototype,n),t}(Wf),td=function(e){function t(t,n,r,a,o,i,s,u,c,l){e.call(this,t,n,r,a,o,i,s,c,l),this.spec=u}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.update=function(t,n,r,a){if(3==this.dirty)return!1;if(this.spec.update){var o=this.spec.update(t,n,r);return o&&this.updateInner(t,n,r,a),o}return!(!this.contentDOM&&!t.isLeaf)&&e.prototype.update.call(this,t,n,r,a)},t.prototype.selectNode=function(){this.spec.selectNode?this.spec.selectNode():e.prototype.selectNode.call(this)},t.prototype.deselectNode=function(){this.spec.deselectNode?this.spec.deselectNode():e.prototype.deselectNode.call(this)},t.prototype.setSelection=function(t,n,r,a){this.spec.setSelection?this.spec.setSelection(t,n,r):e.prototype.setSelection.call(this,t,n,r,a)},t.prototype.destroy=function(){this.spec.destroy&&this.spec.destroy(),e.prototype.destroy.call(this)},t.prototype.stopEvent=function(e){return!!this.spec.stopEvent&&this.spec.stopEvent(e)},t.prototype.ignoreMutation=function(t){return this.spec.ignoreMutation?this.spec.ignoreMutation(t):e.prototype.ignoreMutation.call(this,t)},t}($f);function nd(e,t,n){for(var r=e.firstChild,a=!1,o=0;o<t.length;o++){var i=t[o],s=i.dom;if(s.parentNode==e){for(;s!=r;)r=ld(r),a=!0;r=r.nextSibling}else a=!0,e.insertBefore(s,r);if(i instanceof Yf){var u=r?r.previousSibling:e.lastChild;nd(i.contentDOM,i.children,n),r=u?u.nextSibling:e.firstChild}}for(;r;)r=ld(r),a=!0;a&&n.trackWrites==e&&(n.trackWrites=null)}function rd(e){e&&(this.nodeName=e)}rd.prototype=Object.create(null);var ad=[new rd];function od(e,t,n){if(0==e.length)return ad;for(var r=n?ad[0]:new rd,a=[r],o=0;o<e.length;o++){var i=e[o].type.attrs;if(i)for(var s in i.nodeName&&a.push(r=new rd(i.nodeName)),i){var u=i[s];null!=u&&(n&&1==a.length&&a.push(r=new rd(t.isInline?"span":"div")),"class"==s?r.class=(r.class?r.class+" ":"")+u:"style"==s?r.style=(r.style?r.style+";":"")+u:"nodeName"!=s&&(r[s]=u))}}return a}function id(e,t,n,r){if(n==ad&&r==ad)return t;for(var a=t,o=0;o<r.length;o++){var i=r[o],s=n[o];if(o){var u=void 0;s&&s.nodeName==i.nodeName&&a!=e&&(u=a.parentNode)&&u.tagName.toLowerCase()==i.nodeName||((u=document.createElement(i.nodeName)).pmIsDeco=!0,u.appendChild(a),s=ad[0]),a=u}sd(a,s||ad[0],i)}return a}function sd(e,t,n){for(var r in t)"class"==r||"style"==r||"nodeName"==r||r in n||e.removeAttribute(r);for(var a in n)"class"!=a&&"style"!=a&&"nodeName"!=a&&n[a]!=t[a]&&e.setAttribute(a,n[a]);if(t.class!=n.class){for(var o=t.class?t.class.split(" ").filter(Boolean):Gf,i=n.class?n.class.split(" ").filter(Boolean):Gf,s=0;s<o.length;s++)-1==i.indexOf(o[s])&&e.classList.remove(o[s]);for(var u=0;u<i.length;u++)-1==o.indexOf(i[u])&&e.classList.add(i[u]);0==e.classList.length&&e.removeAttribute("class")}if(t.style!=n.style){if(t.style)for(var c,l=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g;c=l.exec(t.style);)e.style.removeProperty(c[1]);n.style&&(e.style.cssText+=n.style)}}function ud(e,t,n){return id(e,e,ad,od(t,n,1!=e.nodeType))}function cd(e,t){if(e.length!=t.length)return!1;for(var n=0;n<e.length;n++)if(!e[n].type.eq(t[n].type))return!1;return!0}function ld(e){var t=e.nextSibling;return e.parentNode.removeChild(e),t}var fd=function(e,t){this.top=e,this.lock=t,this.index=0,this.stack=[],this.changed=!1,this.preMatch=function(e,t){var n=t,r=n.children.length,a=e.childCount,o=new Map,i=[];e:for(;a>0;){for(var s=void 0;;)if(r){var u=n.children[r-1];if(!(u instanceof Yf)){s=u,r--;break}n=u,r=u.children.length}else{if(n==t)break e;r=n.parent.children.indexOf(n),n=n.parent}var c=s.node;if(c){if(c!=e.child(a-1))break;--a,o.set(s,a),i.push(s)}}return{index:a,matched:o,matches:i.reverse()}}(e.node.content,e)};function dd(e,t){return e.type.side-t.type.side}function pd(e,t,n,r,a){for(var o=[],i=0,s=0;i<e.length;i++){var u=e[i],c=s,l=s+=u.size;c>=n||l<=t?o.push(u):(c<t&&o.push(u.slice(0,t-c,r)),a&&(o.push(a),a=null),l>n&&o.push(u.slice(n-c,u.size,r)))}return o}function hd(e,t){var n=e.root.getSelection(),r=e.state.doc;if(!n.focusNode)return null;var a=e.docView.nearestDesc(n.focusNode),o=a&&0==a.size,i=e.docView.posFromDOM(n.focusNode,n.focusOffset);if(i<0)return null;var s,u,c=r.resolve(i);if(wf(n)){for(s=c;a&&!a.node;)a=a.parent;if(a&&a.node.isAtom&&fl.isSelectable(a.node)&&a.parent&&(!a.node.isInline||!function(e,t,n){for(var r=0==t,a=t==bf(e);r||a;){if(e==n)return!0;var o=df(e);if(!(e=e.parentNode))return!1;r=r&&0==o,a=a&&o==bf(e)}}(n.focusNode,n.focusOffset,a.dom))){var l=a.posBefore;u=new fl(i==l?c:r.resolve(l))}}else{var f=e.docView.posFromDOM(n.anchorNode,n.anchorOffset);if(f<0)return null;s=r.resolve(f)}u||(u=Sd(e,s,c,"pointer"==t||e.state.selection.head<c.pos&&!o?1:-1));return u}function md(e){return e.editable?e.hasFocus():_d(e)&&document.activeElement&&document.activeElement.contains(e.dom)}function vd(e,t){var n=e.state.selection;if(wd(e,n),md(e)){if(!t&&e.mouseDown&&e.mouseDown.allowDefault&&of.chrome){var r=e.root.getSelection(),a=e.domObserver.currentSelection;if(r.anchorNode&&vf(r.anchorNode,r.anchorOffset,a.anchorNode,a.anchorOffset))return e.mouseDown.delayedSelectionSync=!0,void e.domObserver.setCurSelection()}if(e.domObserver.disconnectSelection(),e.cursorWrapper)!function(e){var t=e.root.getSelection(),n=document.createRange(),r=e.cursorWrapper.dom,a="IMG"==r.nodeName;a?n.setEnd(r.parentNode,df(r)+1):n.setEnd(r,0);n.collapse(!1),t.removeAllRanges(),t.addRange(n),!a&&!e.state.selection.visible&&of.ie&&of.ie_version<=11&&(r.disabled=!0,r.disabled=!1)}(e);else{var o,i,s=n.anchor,u=n.head;!gd||n instanceof cl||(n.$from.parent.inlineContent||(o=yd(e,n.from)),n.empty||n.$from.parent.inlineContent||(i=yd(e,n.to))),e.docView.setSelection(s,u,e.root,t),gd&&(o&&xd(o),i&&xd(i)),n.visible?e.dom.classList.remove("ProseMirror-hideselection"):(e.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&function(e){var t=e.dom.ownerDocument;t.removeEventListener("selectionchange",e.hideSelectionGuard);var n=e.root.getSelection(),r=n.anchorNode,a=n.anchorOffset;t.addEventListener("selectionchange",e.hideSelectionGuard=function(){n.anchorNode==r&&n.anchorOffset==a||(t.removeEventListener("selectionchange",e.hideSelectionGuard),setTimeout((function(){md(e)&&!e.state.selection.visible||e.dom.classList.remove("ProseMirror-hideselection")}),20))})}(e))}e.domObserver.setCurSelection(),e.domObserver.connectSelection()}}fd.prototype.destroyBetween=function(e,t){if(e!=t){for(var n=e;n<t;n++)this.top.children[n].destroy();this.top.children.splice(e,t-e),this.changed=!0}},fd.prototype.destroyRest=function(){this.destroyBetween(this.index,this.top.children.length)},fd.prototype.syncToMarks=function(e,t,n){for(var r=0,a=this.stack.length>>1,o=Math.min(a,e.length);r<o&&(r==a-1?this.top:this.stack[r+1<<1]).matchesMark(e[r])&&!1!==e[r].type.spec.spanning;)r++;for(;r<a;)this.destroyRest(),this.top.dirty=0,this.index=this.stack.pop(),this.top=this.stack.pop(),a--;for(;a<e.length;){this.stack.push(this.top,this.index+1);for(var i=-1,s=this.index;s<Math.min(this.index+3,this.top.children.length);s++)if(this.top.children[s].matchesMark(e[a])){i=s;break}if(i>-1)i>this.index&&(this.changed=!0,this.destroyBetween(this.index,i)),this.top=this.top.children[this.index];else{var u=Yf.create(this.top,e[a],t,n);this.top.children.splice(this.index,0,u),this.top=u,this.changed=!0}this.index=0,a++}},fd.prototype.findNodeMatch=function(e,t,n,r){var a,o=-1;if(r>=this.preMatch.index&&(a=this.preMatch.matches[r-this.preMatch.index]).parent==this.top&&a.matchesNode(e,t,n))o=this.top.children.indexOf(a,this.index);else for(var i=this.index,s=Math.min(this.top.children.length,i+5);i<s;i++){var u=this.top.children[i];if(u.matchesNode(e,t,n)&&!this.preMatch.matched.has(u)){o=i;break}}return!(o<0)&&(this.destroyBetween(this.index,o),this.index++,!0)},fd.prototype.updateNodeAt=function(e,t,n,r,a){return!!this.top.children[r].update(e,t,n,a)&&(this.destroyBetween(this.index,r),this.index=r+1,!0)},fd.prototype.findIndexWithChild=function(e){for(;;){var t=e.parentNode;if(!t)return-1;if(t==this.top.contentDOM){var n=e.pmViewDesc;if(n)for(var r=this.index;r<this.top.children.length;r++)if(this.top.children[r]==n)return r;return-1}e=t}},fd.prototype.updateNextNode=function(e,t,n,r,a){for(var o=this.index;o<this.top.children.length;o++){var i=this.top.children[o];if(i instanceof $f){var s=this.preMatch.matched.get(i);if(null!=s&&s!=a)return!1;var u=i.dom;if(!(this.lock&&(u==this.lock||1==u.nodeType&&u.contains(this.lock.parentNode))&&!(e.isText&&i.node&&i.node.isText&&i.nodeDOM.nodeValue==e.text&&3!=i.dirty&&cd(t,i.outerDeco)))&&i.update(e,t,n,r))return this.destroyBetween(this.index,o),i.dom!=u&&(this.changed=!0),this.index++,!0;break}}return!1},fd.prototype.addNode=function(e,t,n,r,a){this.top.children.splice(this.index++,0,$f.create(this.top,e,t,n,r,a)),this.changed=!0},fd.prototype.placeWidget=function(e,t,n){var r=this.index<this.top.children.length?this.top.children[this.index]:null;if(!r||!r.matchesWidget(e)||e!=r.widget&&r.widget.type.toDOM.parentNode){var a=new Kf(this.top,e,t,n);this.top.children.splice(this.index++,0,a),this.changed=!0}else this.index++},fd.prototype.addTextblockHacks=function(){for(var e=this.top.children[this.index-1];e instanceof Yf;)e=e.children[e.children.length-1];e&&e instanceof Qf&&!/\n$/.test(e.node.text)||((of.safari||of.chrome)&&e&&"false"==e.dom.contentEditable&&this.addHackNode("IMG"),this.addHackNode("BR"))},fd.prototype.addHackNode=function(e){if(this.index<this.top.children.length&&this.top.children[this.index].matchesHack(e))this.index++;else{var t=document.createElement(e);"IMG"==e&&(t.className="ProseMirror-separator"),"BR"==e&&(t.className="ProseMirror-trailingBreak"),this.top.children.splice(this.index++,0,new ed(this.top,Gf,t,null)),this.changed=!0}};var gd=of.safari||of.chrome&&of.chrome_version<63;function yd(e,t){var n=e.docView.domFromPos(t,0),r=n.node,a=n.offset,o=a<r.childNodes.length?r.childNodes[a]:null,i=a?r.childNodes[a-1]:null;if(of.safari&&o&&"false"==o.contentEditable)return bd(o);if((!o||"false"==o.contentEditable)&&(!i||"false"==i.contentEditable)){if(o)return bd(o);if(i)return bd(i)}}function bd(e){return e.contentEditable="true",of.safari&&e.draggable&&(e.draggable=!1,e.wasDraggable=!0),e}function xd(e){e.contentEditable="false",e.wasDraggable&&(e.draggable=!0,e.wasDraggable=null)}function wd(e,t){if(t instanceof fl){var n=e.docView.descAt(t.from);n!=e.lastSelectedViewDesc&&(kd(e),n&&n.selectNode(),e.lastSelectedViewDesc=n)}else kd(e)}function kd(e){e.lastSelectedViewDesc&&(e.lastSelectedViewDesc.parent&&e.lastSelectedViewDesc.deselectNode(),e.lastSelectedViewDesc=null)}function Sd(e,t,n,r){return e.someProp("createSelectionBetween",(function(r){return r(e,t,n)}))||cl.between(t,n,r)}function _d(e){var t=e.root.getSelection();if(!t.anchorNode)return!1;try{return e.dom.contains(3==t.anchorNode.nodeType?t.anchorNode.parentNode:t.anchorNode)&&(e.editable||e.dom.contains(3==t.focusNode.nodeType?t.focusNode.parentNode:t.focusNode))}catch(n){return!1}}function Nd(e,t){var n=e.selection,r=n.$anchor,a=n.$head,o=t>0?r.max(a):r.min(a),i=o.parent.inlineContent?o.depth?e.doc.resolve(t>0?o.after():o.before()):null:o;return i&&il.findFrom(i,t)}function Ed(e,t){return e.dispatch(e.state.tr.setSelection(t).scrollIntoView()),!0}function Cd(e,t,n){var r=e.state.selection;if(!(r instanceof cl)){if(r instanceof fl&&r.node.isInline)return Ed(e,new cl(t>0?r.$to:r.$from));var a=Nd(e.state,t);return!!a&&Ed(e,a)}if(!r.empty||n.indexOf("s")>-1)return!1;if(e.endOfTextblock(t>0?"right":"left")){var o=Nd(e.state,t);return!!(o&&o instanceof fl)&&Ed(e,o)}if(!(of.mac&&n.indexOf("m")>-1)){var i,s=r.$head,u=s.textOffset?null:t<0?s.nodeBefore:s.nodeAfter;if(!u||u.isText)return!1;var c=t<0?s.pos-u.nodeSize:s.pos;return!!(u.isAtom||(i=e.docView.descAt(c))&&!i.contentDOM)&&(fl.isSelectable(u)?Ed(e,new fl(t<0?e.state.doc.resolve(s.pos-u.nodeSize):s)):!!of.webkit&&Ed(e,new cl(e.state.doc.resolve(t<0?c:c+u.nodeSize))))}}function Td(e){return 3==e.nodeType?e.nodeValue.length:e.childNodes.length}function Id(e){var t=e.pmViewDesc;return t&&0==t.size&&(e.nextSibling||"BR"!=e.nodeName)}function Od(e){var t=e.root.getSelection(),n=t.focusNode,r=t.focusOffset;if(n){var a,o,i=!1;for(of.gecko&&1==n.nodeType&&r<Td(n)&&Id(n.childNodes[r])&&(i=!0);;)if(r>0){if(1!=n.nodeType)break;var s=n.childNodes[r-1];if(Id(s))a=n,o=--r;else{if(3!=s.nodeType)break;r=(n=s).nodeValue.length}}else{if(Dd(n))break;for(var u=n.previousSibling;u&&Id(u);)a=n.parentNode,o=df(u),u=u.previousSibling;if(u)r=Td(n=u);else{if((n=n.parentNode)==e.dom)break;r=0}}i?Md(e,t,n,r):a&&Md(e,t,a,o)}}function Ad(e){var t=e.root.getSelection(),n=t.focusNode,r=t.focusOffset;if(n){for(var a,o,i=Td(n);;)if(r<i){if(1!=n.nodeType)break;if(!Id(n.childNodes[r]))break;a=n,o=++r}else{if(Dd(n))break;for(var s=n.nextSibling;s&&Id(s);)a=s.parentNode,o=df(s)+1,s=s.nextSibling;if(s)r=0,i=Td(n=s);else{if((n=n.parentNode)==e.dom)break;r=i=0}}a&&Md(e,t,a,o)}}function Dd(e){var t=e.pmViewDesc;return t&&t.node&&t.node.isBlock}function Md(e,t,n,r){if(wf(t)){var a=document.createRange();a.setEnd(n,r),a.setStart(n,r),t.removeAllRanges(),t.addRange(a)}else t.extend&&t.extend(n,r);e.domObserver.setCurSelection();var o=e.state;setTimeout((function(){e.state==o&&vd(e)}),50)}function Rd(e,t,n){var r=e.state.selection;if(r instanceof cl&&!r.empty||n.indexOf("s")>-1)return!1;if(of.mac&&n.indexOf("m")>-1)return!1;var a=r.$from,o=r.$to;if(!a.parent.inlineContent||e.endOfTextblock(t<0?"up":"down")){var i=Nd(e.state,t);if(i&&i instanceof fl)return Ed(e,i)}if(!a.parent.inlineContent){var s=t<0?a:o,u=r instanceof pl?il.near(s,t):il.findFrom(s,t);return!!u&&Ed(e,u)}return!1}function Pd(e,t){if(!(e.state.selection instanceof cl))return!0;var n=e.state.selection,r=n.$head,a=n.$anchor,o=n.empty;if(!r.sameParent(a))return!0;if(!o)return!1;if(e.endOfTextblock(t>0?"forward":"backward"))return!0;var i=!r.textOffset&&(t<0?r.nodeBefore:r.nodeAfter);if(i&&!i.isText){var s=e.state.tr;return t<0?s.delete(r.pos-i.nodeSize,r.pos):s.delete(r.pos,r.pos+i.nodeSize),e.dispatch(s),!0}return!1}function jd(e,t,n){e.domObserver.stop(),t.contentEditable=n,e.domObserver.start()}function Fd(e,t){var n=t.keyCode,r=function(e){var t="";return e.ctrlKey&&(t+="c"),e.metaKey&&(t+="m"),e.altKey&&(t+="a"),e.shiftKey&&(t+="s"),t}(t);return 8==n||of.mac&&72==n&&"c"==r?Pd(e,-1)||Od(e):46==n||of.mac&&68==n&&"c"==r?Pd(e,1)||Ad(e):13==n||27==n||(37==n?Cd(e,-1,r)||Od(e):39==n?Cd(e,1,r)||Ad(e):38==n?Rd(e,-1,r)||Od(e):40==n?function(e){if(of.safari&&!(e.state.selection.$head.parentOffset>0)){var t=e.root.getSelection(),n=t.focusNode,r=t.focusOffset;if(n&&1==n.nodeType&&0==r&&n.firstChild&&"false"==n.firstChild.contentEditable){var a=n.firstChild;jd(e,a,!0),setTimeout((function(){return jd(e,a,!1)}),20)}}}(e)||Rd(e,1,r)||Ad(e):r==(of.mac?"m":"c")&&(66==n||73==n||89==n||90==n))}function Ld(e){var t=e.pmViewDesc;if(t)return t.parseRule();if("BR"==e.nodeName&&e.parentNode){if(of.safari&&/^(ul|ol)$/i.test(e.parentNode.nodeName)){var n=document.createElement("div");return n.appendChild(document.createElement("li")),{skip:n}}if(e.parentNode.lastChild==e||of.safari&&/^(tr|table)$/i.test(e.parentNode.nodeName))return{ignore:!0}}else if("IMG"==e.nodeName&&e.getAttribute("mark-placeholder"))return{ignore:!0}}function Bd(e,t,n,r,a){if(t<0){var o=e.lastSelectionTime>Date.now()-50?e.lastSelectionOrigin:null,i=hd(e,o);if(i&&!e.state.selection.eq(i)){var s=e.state.tr.setSelection(i);"pointer"==o?s.setMeta("pointer",!0):"key"==o&&s.scrollIntoView(),e.dispatch(s)}}else{var u=e.state.doc.resolve(t),c=u.sharedDepth(n);t=u.before(c+1),n=e.state.doc.resolve(n).after(c+1);var l=e.state.selection,f=function(e,t,n){var r=e.docView.parseRange(t,n),a=r.node,o=r.fromOffset,i=r.toOffset,s=r.from,u=r.to,c=e.root.getSelection(),l=null,f=c.anchorNode;if(f&&e.dom.contains(1==f.nodeType?f:f.parentNode)&&(l=[{node:f,offset:c.anchorOffset}],wf(c)||l.push({node:c.focusNode,offset:c.focusOffset})),of.chrome&&8===e.lastKeyCode)for(var d=i;d>o;d--){var p=a.childNodes[d-1],h=p.pmViewDesc;if("BR"==p.nodeName&&!h){i=d;break}if(!h||h.size)break}var m=e.state.doc,v=e.someProp("domParser")||sc.fromSchema(e.state.schema),g=m.resolve(s),y=null,b=v.parse(a,{topNode:g.parent,topMatch:g.parent.contentMatchAt(g.index()),topOpen:!0,from:o,to:i,preserveWhitespace:"pre"!=g.parent.type.whitespace||"full",editableContent:!0,findPositions:l,ruleFromNode:Ld,context:g});if(l&&null!=l[0].pos){var x=l[0].pos,w=l[1]&&l[1].pos;null==w&&(w=x),y={anchor:x+s,head:w+s}}return{doc:b,sel:y,from:s,to:u}}(e,t,n);if(of.chrome&&e.cursorWrapper&&f.sel&&f.sel.anchor==e.cursorWrapper.deco.from){var d=e.cursorWrapper.deco.type.toDOM.nextSibling,p=d&&d.nodeValue?d.nodeValue.length:1;f.sel={anchor:f.sel.anchor+p,head:f.sel.anchor+p}}var h,m,v=e.state.doc,g=v.slice(f.from,f.to);8===e.lastKeyCode&&Date.now()-100<e.lastKeyCodeTime?(h=e.state.selection.to,m="end"):(h=e.state.selection.from,m="start"),e.lastKeyCode=null;var y=function(e,t,n,r,a){var o=e.findDiffStart(t,n);if(null==o)return null;var i=e.findDiffEnd(t,n+e.size,n+t.size),s=i.a,u=i.b;if("end"==a){r-=s+Math.max(0,o-Math.min(s,u))-o}if(s<o&&e.size<t.size){u=(o-=r<=o&&r>=s?o-r:0)+(u-s),s=o}else if(u<o){s=(o-=r<=o&&r>=u?o-r:0)+(s-u),u=o}return{start:o,endA:s,endB:u}}(g.content,f.doc.content,f.from,h,m);if(!y){if(!(r&&l instanceof cl&&!l.empty&&l.$head.sameParent(l.$anchor))||e.composing||f.sel&&f.sel.anchor!=f.sel.head){if((of.ios&&e.lastIOSEnter>Date.now()-225||of.android)&&a.some((function(e){return"DIV"==e.nodeName||"P"==e.nodeName}))&&e.someProp("handleKeyDown",(function(t){return t(e,kf(13,"Enter"))})))return void(e.lastIOSEnter=0);if(f.sel){var b=zd(e,e.state.doc,f.sel);b&&!b.eq(e.state.selection)&&e.dispatch(e.state.tr.setSelection(b))}return}y={start:l.from,endA:l.to,endB:l.to}}e.domChangeCount++,e.state.selection.from<e.state.selection.to&&y.start==y.endB&&e.state.selection instanceof cl&&(y.start>e.state.selection.from&&y.start<=e.state.selection.from+2?y.start=e.state.selection.from:y.endA<e.state.selection.to&&y.endA>=e.state.selection.to-2&&(y.endB+=e.state.selection.to-y.endA,y.endA=e.state.selection.to)),of.ie&&of.ie_version<=11&&y.endB==y.start+1&&y.endA==y.start&&y.start>f.from&&" \xa0"==f.doc.textBetween(y.start-f.from-1,y.start-f.from+1)&&(y.start--,y.endA--,y.endB--);var x,w=f.doc.resolveNoCache(y.start-f.from),k=f.doc.resolveNoCache(y.endB-f.from),S=w.sameParent(k)&&w.parent.inlineContent;if((of.ios&&e.lastIOSEnter>Date.now()-225&&(!S||a.some((function(e){return"DIV"==e.nodeName||"P"==e.nodeName})))||!S&&w.pos<f.doc.content.size&&(x=il.findFrom(f.doc.resolve(w.pos+1),1,!0))&&x.head==k.pos)&&e.someProp("handleKeyDown",(function(t){return t(e,kf(13,"Enter"))})))e.lastIOSEnter=0;else if(e.state.selection.anchor>y.start&&function(e,t,n,r,a){if(!r.parent.isTextblock||n-t<=a.pos-r.pos||Zd(r,!0,!1)<a.pos)return!1;var o=e.resolve(t);if(o.parentOffset<o.parent.content.size||!o.parent.isTextblock)return!1;var i=e.resolve(Zd(o,!0,!0));if(!i.parent.isTextblock||i.pos>n||Zd(i,!0,!1)<n)return!1;return r.parent.content.cut(r.parentOffset).eq(i.parent.content)}(v,y.start,y.endA,w,k)&&e.someProp("handleKeyDown",(function(t){return t(e,kf(8,"Backspace"))})))of.android&&of.chrome&&e.domObserver.suppressSelectionUpdates();else{of.chrome&&of.android&&y.toB==y.from&&(e.lastAndroidDelete=Date.now()),of.android&&!S&&w.start()!=k.start()&&0==k.parentOffset&&w.depth==k.depth&&f.sel&&f.sel.anchor==f.sel.head&&f.sel.head==y.endA&&(y.endB-=2,k=f.doc.resolveNoCache(y.endB-f.from),setTimeout((function(){e.someProp("handleKeyDown",(function(t){return t(e,kf(13,"Enter"))}))}),20));var _,N,E,C,T=y.start,I=y.endA;if(S)if(w.pos==k.pos)of.ie&&of.ie_version<=11&&0==w.parentOffset&&(e.domObserver.suppressSelectionUpdates(),setTimeout((function(){return vd(e)}),20)),_=e.state.tr.delete(T,I),N=v.resolve(y.start).marksAcross(v.resolve(y.endA));else if(y.endA==y.endB&&(C=v.resolve(y.start))&&(E=function(e,t){for(var n,r,a,o=e.firstChild.marks,i=t.firstChild.marks,s=o,u=i,c=0;c<i.length;c++)s=i[c].removeFromSet(s);for(var l=0;l<o.length;l++)u=o[l].removeFromSet(u);if(1==s.length&&0==u.length)r=s[0],n="add",a=function(e){return e.mark(r.addToSet(e.marks))};else{if(0!=s.length||1!=u.length)return null;r=u[0],n="remove",a=function(e){return e.mark(r.removeFromSet(e.marks))}}for(var f=[],d=0;d<t.childCount;d++)f.push(a(t.child(d)));if(uu.from(f).eq(e))return{mark:r,type:n}}(w.parent.content.cut(w.parentOffset,k.parentOffset),C.parent.content.cut(C.parentOffset,y.endA-C.start()))))_=e.state.tr,"add"==E.type?_.addMark(T,I,E.mark):_.removeMark(T,I,E.mark);else if(w.parent.child(w.index()).isText&&w.index()==k.index()-(k.textOffset?0:1)){var O=w.parent.textBetween(w.parentOffset,k.parentOffset);if(e.someProp("handleTextInput",(function(t){return t(e,T,I,O)})))return;_=e.state.tr.insertText(O,T,I)}if(_||(_=e.state.tr.replace(T,I,f.doc.slice(y.start-f.from,y.endB-f.from))),f.sel){var A=zd(e,_.doc,f.sel);A&&!(of.chrome&&of.android&&e.composing&&A.empty&&(y.start!=y.endB||e.lastAndroidDelete<Date.now()-100)&&(A.head==T||A.head==_.mapping.map(I)-1)||of.ie&&A.empty&&A.head==T)&&_.setSelection(A)}N&&_.ensureMarks(N),e.dispatch(_.scrollIntoView())}}}function zd(e,t,n){return Math.max(n.anchor,n.head)>t.content.size?null:Sd(e,t.resolve(n.anchor),t.resolve(n.head))}function Zd(e,t,n){for(var r=e.depth,a=t?e.end():e.pos;r>0&&(t||e.indexAfter(r)==e.node(r).childCount);)r--,a++,t=!1;if(n)for(var o=e.node(r).maybeChild(e.indexAfter(r));o&&!o.isLeaf;)o=o.firstChild,a++;return a}function Vd(e,t){for(var n=[],r=t.content,a=t.openStart,o=t.openEnd;a>1&&o>1&&1==r.childCount&&1==r.firstChild.childCount;){a--,o--;var i=r.firstChild;n.push(i.type.name,i.attrs!=i.type.defaultAttrs?i.attrs:null),r=i.content}var s=e.someProp("clipboardSerializer")||yc.fromSchema(e.state.schema),u=Jd(),c=u.createElement("div");c.appendChild(s.serializeFragment(r,{document:u}));for(var l,f=c.firstChild;f&&1==f.nodeType&&(l=Yd[f.nodeName.toLowerCase()]);){for(var d=l.length-1;d>=0;d--){for(var p=u.createElement(l[d]);c.firstChild;)p.appendChild(c.firstChild);c.appendChild(p),"tbody"!=l[d]&&(a++,o++)}f=c.firstChild}f&&1==f.nodeType&&f.setAttribute("data-pm-slice",a+" "+o+" "+JSON.stringify(n));var h=e.someProp("clipboardTextSerializer",(function(e){return e(t)}))||t.content.textBetween(0,t.content.size,"\n\n");return{dom:c,text:h}}function Ud(e,t,n,r,a){var o,i,s=a.parent.type.spec.code;if(!n&&!t)return null;var u=t&&(r||s||!n);if(u){if(e.someProp("transformPastedText",(function(e){t=e(t,s||r)})),s)return t?new mu(uu.from(e.state.schema.text(t.replace(/\r\n?/g,"\n"))),0,0):mu.empty;var c=e.someProp("clipboardTextParser",(function(e){return e(t,a,r)}));if(c)i=c;else{var l=a.marks(),f=e.state.schema,d=yc.fromSchema(f);o=document.createElement("div"),t.split(/(?:\r\n?|\n)+/).forEach((function(e){var t=o.appendChild(document.createElement("p"));e&&t.appendChild(d.serializeNode(f.text(e,l)))}))}}else e.someProp("transformPastedHTML",(function(e){n=e(n)})),o=function(e){var t=/^(\s*<meta [^>]*>)*/.exec(e);t&&(e=e.slice(t[0].length));var n,r=Jd().createElement("div"),a=/<([a-z][^>\s]+)/i.exec(e);(n=a&&Yd[a[1].toLowerCase()])&&(e=n.map((function(e){return"<"+e+">"})).join("")+e+n.map((function(e){return"</"+e+">"})).reverse().join(""));if(r.innerHTML=e,n)for(var o=0;o<n.length;o++)r=r.querySelector(n[o])||r;return r}(n),of.webkit&&function(e){for(var t=e.querySelectorAll(of.chrome?"span:not([class]):not([style])":"span.Apple-converted-space"),n=0;n<t.length;n++){var r=t[n];1==r.childNodes.length&&"\xa0"==r.textContent&&r.parentNode&&r.parentNode.replaceChild(e.ownerDocument.createTextNode(" "),r)}}(o);var p=o&&o.querySelector("[data-pm-slice]"),h=p&&/^(\d+) (\d+) (.*)/.exec(p.getAttribute("data-pm-slice"));if(!i){var m=e.someProp("clipboardParser")||e.someProp("domParser")||sc.fromSchema(e.state.schema);i=m.parseSlice(o,{preserveWhitespace:!(!u&&!h),context:a,ruleFromNode:function(e){if("BR"==e.nodeName&&!e.nextSibling&&e.parentNode&&!qd.test(e.parentNode.nodeName))return{ignore:!0}}})}if(h)i=function(e,t){if(!e.size)return e;var n,r=e.content.firstChild.type.schema;try{n=JSON.parse(t)}catch(c){return e}for(var a=e.content,o=e.openStart,i=e.openEnd,s=n.length-2;s>=0;s-=2){var u=r.nodes[n[s]];if(!u||u.hasRequiredAttrs())break;a=uu.from(u.create(n[s+1],a)),o++,i++}return new mu(a,o,i)}(Xd(i,+h[1],+h[2]),h[3]);else if(i=mu.maxOpen(function(e,t){if(e.childCount<2)return e;for(var n=function(n){var r=t.node(n).contentMatchAt(t.index(n)),a=void 0,o=[];if(e.forEach((function(e){if(o){var t,n=r.findWrapping(e.type);if(!n)return o=null;if(t=o.length&&a.length&&Hd(n,a,e,o[o.length-1],0))o[o.length-1]=t;else{o.length&&(o[o.length-1]=Gd(o[o.length-1],a.length));var i=Wd(e,n);o.push(i),r=r.matchType(i.type,i.attrs),a=n}}})),o)return{v:uu.from(o)}},r=t.depth;r>=0;r--){var a=n(r);if(a)return a.v}return e}(i.content,a),!0),i.openStart||i.openEnd){for(var v=0,g=0,y=i.content.firstChild;v<i.openStart&&!y.type.spec.isolating;v++,y=y.firstChild);for(var b=i.content.lastChild;g<i.openEnd&&!b.type.spec.isolating;g++,b=b.lastChild);i=Xd(i,v,g)}return e.someProp("transformPasted",(function(e){i=e(i)})),i}var qd=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function Wd(e,t,n){void 0===n&&(n=0);for(var r=t.length-1;r>=n;r--)e=t[r].create(null,uu.from(e));return e}function Hd(e,t,n,r,a){if(a<e.length&&a<t.length&&e[a]==t[a]){var o=Hd(e,t,n,r.lastChild,a+1);if(o)return r.copy(r.content.replaceChild(r.childCount-1,o));if(r.contentMatchAt(r.childCount).matchType(a==e.length-1?n.type:e[a+1]))return r.copy(r.content.append(uu.from(Wd(n,e,a+1))))}}function Gd(e,t){if(0==t)return e;var n=e.content.replaceChild(e.childCount-1,Gd(e.lastChild,t-1)),r=e.contentMatchAt(e.childCount).fillBefore(uu.empty,!0);return e.copy(n.append(r))}function Kd(e,t,n,r,a,o){var i=t<0?e.firstChild:e.lastChild,s=i.content;return a<r-1&&(s=Kd(s,t,n,r,a+1,o)),a>=n&&(s=t<0?i.contentMatchAt(0).fillBefore(s,e.childCount>1||o<=a).append(s):s.append(i.contentMatchAt(i.childCount).fillBefore(uu.empty,!0))),e.replaceChild(t<0?0:e.childCount-1,i.copy(s))}function Xd(e,t,n){return t<e.openStart&&(e=new mu(Kd(e.content,-1,t,e.openStart,0,e.openEnd),t,e.openEnd)),n<e.openEnd&&(e=new mu(Kd(e.content,1,n,e.openEnd,0,0),e.openStart,n)),e}var Yd={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]},$d=null;function Jd(){return $d||($d=document.implementation.createHTMLDocument("title"))}var Qd={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},ep=of.ie&&of.ie_version<=11,tp=function(){this.anchorNode=this.anchorOffset=this.focusNode=this.focusOffset=null};tp.prototype.set=function(e){this.anchorNode=e.anchorNode,this.anchorOffset=e.anchorOffset,this.focusNode=e.focusNode,this.focusOffset=e.focusOffset},tp.prototype.eq=function(e){return e.anchorNode==this.anchorNode&&e.anchorOffset==this.anchorOffset&&e.focusNode==this.focusNode&&e.focusOffset==this.focusOffset};var np=function(e,t){var n=this;this.view=e,this.handleDOMChange=t,this.queue=[],this.flushingSoon=-1,this.observer=window.MutationObserver&&new window.MutationObserver((function(e){for(var t=0;t<e.length;t++)n.queue.push(e[t]);of.ie&&of.ie_version<=11&&e.some((function(e){return"childList"==e.type&&e.removedNodes.length||"characterData"==e.type&&e.oldValue.length>e.target.nodeValue.length}))?n.flushSoon():n.flush()})),this.currentSelection=new tp,ep&&(this.onCharData=function(e){n.queue.push({target:e.target,type:"characterData",oldValue:e.prevValue}),n.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.suppressingSelectionUpdates=!1};np.prototype.flushSoon=function(){var e=this;this.flushingSoon<0&&(this.flushingSoon=window.setTimeout((function(){e.flushingSoon=-1,e.flush()}),20))},np.prototype.forceFlush=function(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())},np.prototype.start=function(){this.observer&&this.observer.observe(this.view.dom,Qd),ep&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()},np.prototype.stop=function(){var e=this;if(this.observer){var t=this.observer.takeRecords();if(t.length){for(var n=0;n<t.length;n++)this.queue.push(t[n]);window.setTimeout((function(){return e.flush()}),20)}this.observer.disconnect()}ep&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()},np.prototype.connectSelection=function(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)},np.prototype.disconnectSelection=function(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)},np.prototype.suppressSelectionUpdates=function(){var e=this;this.suppressingSelectionUpdates=!0,setTimeout((function(){return e.suppressingSelectionUpdates=!1}),50)},np.prototype.onSelectionChange=function(){if((!(e=this.view).editable||e.root.activeElement==e.dom)&&_d(e)){var e;if(this.suppressingSelectionUpdates)return vd(this.view);if(of.ie&&of.ie_version<=11&&!this.view.state.selection.empty){var t=this.view.root.getSelection();if(t.focusNode&&vf(t.focusNode,t.focusOffset,t.anchorNode,t.anchorOffset))return this.flushSoon()}this.flush()}},np.prototype.setCurSelection=function(){this.currentSelection.set(this.view.root.getSelection())},np.prototype.ignoreSelectionChange=function(e){if(0==e.rangeCount)return!0;var t=e.getRangeAt(0).commonAncestorContainer,n=this.view.docView.nearestDesc(t);return n&&n.ignoreMutation({type:"selection",target:3==t.nodeType?t.parentNode:t})?(this.setCurSelection(),!0):void 0},np.prototype.flush=function(){if(this.view.docView&&!(this.flushingSoon>-1)){var e=this.observer?this.observer.takeRecords():[];this.queue.length&&(e=this.queue.concat(e),this.queue.length=0);var t=this.view.root.getSelection(),n=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(t)&&_d(this.view)&&!this.ignoreSelectionChange(t),r=-1,a=-1,o=!1,i=[];if(this.view.editable)for(var s=0;s<e.length;s++){var u=this.registerMutation(e[s],i);u&&(r=r<0?u.from:Math.min(u.from,r),a=a<0?u.to:Math.max(u.to,a),u.typeOver&&(o=!0))}if(of.gecko&&i.length>1){var c=i.filter((function(e){return"BR"==e.nodeName}));if(2==c.length){var l=c[0],f=c[1];l.parentNode&&l.parentNode.parentNode==f.parentNode?f.remove():l.remove()}}(r>-1||n)&&(r>-1&&(this.view.docView.markDirty(r,a),function(e){if(rp)return;rp=!0,"normal"==getComputedStyle(e.dom).whiteSpace&&console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package.")}(this.view)),this.handleDOMChange(r,a,o,i),this.view.docView&&this.view.docView.dirty?this.view.updateState(this.view.state):this.currentSelection.eq(t)||vd(this.view),this.currentSelection.set(t))}},np.prototype.registerMutation=function(e,t){if(t.indexOf(e.target)>-1)return null;var n=this.view.docView.nearestDesc(e.target);if("attributes"==e.type&&(n==this.view.docView||"contenteditable"==e.attributeName||"style"==e.attributeName&&!e.oldValue&&!e.target.getAttribute("style")))return null;if(!n||n.ignoreMutation(e))return null;if("childList"==e.type){for(var r=0;r<e.addedNodes.length;r++)t.push(e.addedNodes[r]);if(n.contentDOM&&n.contentDOM!=n.dom&&!n.contentDOM.contains(e.target))return{from:n.posBefore,to:n.posAfter};var a=e.previousSibling,o=e.nextSibling;if(of.ie&&of.ie_version<=11&&e.addedNodes.length)for(var i=0;i<e.addedNodes.length;i++){var s=e.addedNodes[i],u=s.previousSibling,c=s.nextSibling;(!u||Array.prototype.indexOf.call(e.addedNodes,u)<0)&&(a=u),(!c||Array.prototype.indexOf.call(e.addedNodes,c)<0)&&(o=c)}var l=a&&a.parentNode==e.target?df(a)+1:0,f=n.localPosFromDOM(e.target,l,-1),d=o&&o.parentNode==e.target?df(o):e.target.childNodes.length;return{from:f,to:n.localPosFromDOM(e.target,d,1)}}return"attributes"==e.type?{from:n.posAtStart-n.border,to:n.posAtEnd+n.border}:{from:n.posAtStart,to:n.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}};var rp=!1;var ap={},op={};function ip(e,t){e.lastSelectionOrigin=t,e.lastSelectionTime=Date.now()}function sp(e){e.someProp("handleDOMEvents",(function(t){for(var n in t)e.eventHandlers[n]||e.dom.addEventListener(n,e.eventHandlers[n]=function(t){return up(e,t)})}))}function up(e,t){return e.someProp("handleDOMEvents",(function(n){var r=n[t.type];return!!r&&(r(e,t)||t.defaultPrevented)}))}function cp(e){return{left:e.clientX,top:e.clientY}}function lp(e,t,n,r,a){if(-1==r)return!1;for(var o=e.state.doc.resolve(r),i=function(r){if(e.someProp(t,(function(t){return r>o.depth?t(e,n,o.nodeAfter,o.before(r),a,!0):t(e,n,o.node(r),o.before(r),a,!1)})))return{v:!0}},s=o.depth+1;s>0;s--){var u=i(s);if(u)return u.v}return!1}function fp(e,t,n){e.focused||e.focus();var r=e.state.tr.setSelection(t);"pointer"==n&&r.setMeta("pointer",!0),e.dispatch(r)}function dp(e,t,n,r,a){return lp(e,"handleClickOn",t,n,r)||e.someProp("handleClick",(function(n){return n(e,t,r)}))||(a?function(e,t){if(-1==t)return!1;var n,r,a=e.state.selection;a instanceof fl&&(n=a.node);for(var o=e.state.doc.resolve(t),i=o.depth+1;i>0;i--){var s=i>o.depth?o.nodeAfter:o.node(i);if(fl.isSelectable(s)){r=n&&a.$from.depth>0&&i>=a.$from.depth&&o.before(a.$from.depth+1)==a.$from.pos?o.before(a.$from.depth):o.before(i);break}}return null!=r&&(fp(e,fl.create(e.state.doc,r),"pointer"),!0)}(e,n):function(e,t){if(-1==t)return!1;var n=e.state.doc.resolve(t),r=n.nodeAfter;return!!(r&&r.isAtom&&fl.isSelectable(r))&&(fp(e,new fl(n),"pointer"),!0)}(e,n))}function pp(e,t,n,r){return lp(e,"handleDoubleClickOn",t,n,r)||e.someProp("handleDoubleClick",(function(n){return n(e,t,r)}))}function hp(e,t,n,r){return lp(e,"handleTripleClickOn",t,n,r)||e.someProp("handleTripleClick",(function(n){return n(e,t,r)}))||function(e,t,n){if(0!=n.button)return!1;var r=e.state.doc;if(-1==t)return!!r.inlineContent&&(fp(e,cl.create(r,0,r.content.size),"pointer"),!0);for(var a=r.resolve(t),o=a.depth+1;o>0;o--){var i=o>a.depth?a.nodeAfter:a.node(o),s=a.before(o);if(i.inlineContent)fp(e,cl.create(r,s+1,s+1+i.content.size),"pointer");else{if(!fl.isSelectable(i))continue;fp(e,fl.create(r,s),"pointer")}return!0}}(e,n,r)}function mp(e){return kp(e)}op.keydown=function(e,t){if(e.shiftKey=16==t.keyCode||t.shiftKey,!yp(e,t)&&(e.lastKeyCode=t.keyCode,e.lastKeyCodeTime=Date.now(),!of.android||!of.chrome||13!=t.keyCode))if(229!=t.keyCode&&e.domObserver.forceFlush(),!of.ios||13!=t.keyCode||t.ctrlKey||t.altKey||t.metaKey)e.someProp("handleKeyDown",(function(n){return n(e,t)}))||Fd(e,t)?t.preventDefault():ip(e,"key");else{var n=Date.now();e.lastIOSEnter=n,e.lastIOSEnterFallbackTimeout=setTimeout((function(){e.lastIOSEnter==n&&(e.someProp("handleKeyDown",(function(t){return t(e,kf(13,"Enter"))})),e.lastIOSEnter=0)}),200)}},op.keyup=function(e,t){16==t.keyCode&&(e.shiftKey=!1)},op.keypress=function(e,t){if(!(yp(e,t)||!t.charCode||t.ctrlKey&&!t.altKey||of.mac&&t.metaKey))if(e.someProp("handleKeyPress",(function(n){return n(e,t)})))t.preventDefault();else{var n=e.state.selection;if(!(n instanceof cl)||!n.$from.sameParent(n.$to)){var r=String.fromCharCode(t.charCode);e.someProp("handleTextInput",(function(t){return t(e,n.$from.pos,n.$to.pos,r)}))||e.dispatch(e.state.tr.insertText(r).scrollIntoView()),t.preventDefault()}}};var vp=of.mac?"metaKey":"ctrlKey";ap.mousedown=function(e,t){e.shiftKey=t.shiftKey;var n=mp(e),r=Date.now(),a="singleClick";r-e.lastClick.time<500&&function(e,t){var n=t.x-e.clientX,r=t.y-e.clientY;return n*n+r*r<100}(t,e.lastClick)&&!t[vp]&&("singleClick"==e.lastClick.type?a="doubleClick":"doubleClick"==e.lastClick.type&&(a="tripleClick")),e.lastClick={time:r,x:t.clientX,y:t.clientY,type:a};var o=e.posAtCoords(cp(t));o&&("singleClick"==a?(e.mouseDown&&e.mouseDown.done(),e.mouseDown=new gp(e,o,t,n)):("doubleClick"==a?pp:hp)(e,o.pos,o.inside,t)?t.preventDefault():ip(e,"pointer"))};var gp=function(e,t,n,r){var a,o,i=this;if(this.view=e,this.startDoc=e.state.doc,this.pos=t,this.event=n,this.flushed=r,this.selectNode=n[vp],this.allowDefault=n.shiftKey,this.delayedSelectionSync=!1,t.inside>-1)a=e.state.doc.nodeAt(t.inside),o=t.inside;else{var s=e.state.doc.resolve(t.pos);a=s.parent,o=s.depth?s.before():0}this.mightDrag=null;var u=r?null:n.target,c=u?e.docView.nearestDesc(u,!0):null;this.target=c?c.dom:null;var l=e.state.selection;(0==n.button&&a.type.spec.draggable&&!1!==a.type.spec.selectable||l instanceof fl&&l.from<=o&&l.to>o)&&(this.mightDrag={node:a,pos:o,addAttr:this.target&&!this.target.draggable,setUneditable:this.target&&of.gecko&&!this.target.hasAttribute("contentEditable")}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout((function(){i.view.mouseDown==i&&i.target.setAttribute("contentEditable","false")}),20),this.view.domObserver.start()),e.root.addEventListener("mouseup",this.up=this.up.bind(this)),e.root.addEventListener("mousemove",this.move=this.move.bind(this)),ip(e,"pointer")};function yp(e,t){return!!e.composing||!!(of.safari&&Math.abs(t.timeStamp-e.compositionEndedAt)<500)&&(e.compositionEndedAt=-2e8,!0)}gp.prototype.done=function(){var e=this;this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout((function(){return vd(e.view)})),this.view.mouseDown=null},gp.prototype.up=function(e){if(this.done(),this.view.dom.contains(3==e.target.nodeType?e.target.parentNode:e.target)){var t=this.pos;this.view.state.doc!=this.startDoc&&(t=this.view.posAtCoords(cp(e))),this.allowDefault||!t?ip(this.view,"pointer"):dp(this.view,t.pos,t.inside,e,this.selectNode)?e.preventDefault():0==e.button&&(this.flushed||of.safari&&this.mightDrag&&!this.mightDrag.node.isAtom||of.chrome&&!(this.view.state.selection instanceof cl)&&Math.min(Math.abs(t.pos-this.view.state.selection.from),Math.abs(t.pos-this.view.state.selection.to))<=2)?(fp(this.view,il.near(this.view.state.doc.resolve(t.pos)),"pointer"),e.preventDefault()):ip(this.view,"pointer")}},gp.prototype.move=function(e){!this.allowDefault&&(Math.abs(this.event.x-e.clientX)>4||Math.abs(this.event.y-e.clientY)>4)&&(this.allowDefault=!0),ip(this.view,"pointer"),0==e.buttons&&this.done()},ap.touchdown=function(e){mp(e),ip(e,"pointer")},ap.contextmenu=function(e){return mp(e)};var bp=of.android?5e3:-1;function xp(e,t){clearTimeout(e.composingTimeout),t>-1&&(e.composingTimeout=setTimeout((function(){return kp(e)}),t))}function wp(e){for(e.composing&&(e.composing=!1,e.compositionEndedAt=function(){var e=document.createEvent("Event");return e.initEvent("event",!0,!0),e.timeStamp}());e.compositionNodes.length>0;)e.compositionNodes.pop().markParentsDirty()}function kp(e,t){if(!(of.android&&e.domObserver.flushingSoon>=0)){if(e.domObserver.forceFlush(),wp(e),t||e.docView&&e.docView.dirty){var n=hd(e);return n&&!n.eq(e.state.selection)?e.dispatch(e.state.tr.setSelection(n)):e.updateState(e.state),!0}return!1}}op.compositionstart=op.compositionupdate=function(e){if(!e.composing){e.domObserver.flush();var t=e.state,n=t.selection.$from;if(t.selection.empty&&(t.storedMarks||!n.textOffset&&n.parentOffset&&n.nodeBefore.marks.some((function(e){return!1===e.type.spec.inclusive}))))e.markCursor=e.state.storedMarks||n.marks(),kp(e,!0),e.markCursor=null;else if(kp(e),of.gecko&&t.selection.empty&&n.parentOffset&&!n.textOffset&&n.nodeBefore.marks.length)for(var r=e.root.getSelection(),a=r.focusNode,o=r.focusOffset;a&&1==a.nodeType&&0!=o;){var i=o<0?a.lastChild:a.childNodes[o-1];if(!i)break;if(3==i.nodeType){r.collapse(i,i.nodeValue.length);break}a=i,o=-1}e.composing=!0}xp(e,bp)},op.compositionend=function(e,t){e.composing&&(e.composing=!1,e.compositionEndedAt=t.timeStamp,xp(e,20))};var Sp=of.ie&&of.ie_version<15||of.ios&&of.webkit_version<604;function _p(e,t,n,r){var a=Ud(e,t,n,e.shiftKey,e.state.selection.$from);if(e.someProp("handlePaste",(function(t){return t(e,r,a||mu.empty)})))return!0;if(!a)return!1;var o=function(e){return 0==e.openStart&&0==e.openEnd&&1==e.content.childCount?e.content.firstChild:null}(a),i=o?e.state.tr.replaceSelectionWith(o,e.shiftKey):e.state.tr.replaceSelection(a);return e.dispatch(i.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}ap.copy=op.cut=function(e,t){var n=e.state.selection,r="cut"==t.type;if(!n.empty){var a=Sp?null:t.clipboardData,o=Vd(e,n.content()),i=o.dom,s=o.text;a?(t.preventDefault(),a.clearData(),a.setData("text/html",i.innerHTML),a.setData("text/plain",s)):function(e,t){if(e.dom.parentNode){var n=e.dom.parentNode.appendChild(document.createElement("div"));n.appendChild(t),n.style.cssText="position: fixed; left: -10000px; top: 10px";var r=getSelection(),a=document.createRange();a.selectNodeContents(t),e.dom.blur(),r.removeAllRanges(),r.addRange(a),setTimeout((function(){n.parentNode&&n.parentNode.removeChild(n),e.focus()}),50)}}(e,i),r&&e.dispatch(e.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))}},op.paste=function(e,t){if(!e.composing||of.android){var n=Sp?null:t.clipboardData;n&&_p(e,n.getData("text/plain"),n.getData("text/html"),t)?t.preventDefault():function(e,t){if(e.dom.parentNode){var n=e.shiftKey||e.state.selection.$from.parent.type.spec.code,r=e.dom.parentNode.appendChild(document.createElement(n?"textarea":"div"));n||(r.contentEditable="true"),r.style.cssText="position: fixed; left: -10000px; top: 10px",r.focus(),setTimeout((function(){e.focus(),r.parentNode&&r.parentNode.removeChild(r),n?_p(e,r.value,null,t):_p(e,r.textContent,r.innerHTML,t)}),50)}}(e,t)}};var Np=function(e,t){this.slice=e,this.move=t},Ep=of.mac?"altKey":"ctrlKey";for(var Cp in ap.dragstart=function(e,t){var n=e.mouseDown;if(n&&n.done(),t.dataTransfer){var r=e.state.selection,a=r.empty?null:e.posAtCoords(cp(t));if(a&&a.pos>=r.from&&a.pos<=(r instanceof fl?r.to-1:r.to));else if(n&&n.mightDrag)e.dispatch(e.state.tr.setSelection(fl.create(e.state.doc,n.mightDrag.pos)));else if(t.target&&1==t.target.nodeType){var o=e.docView.nearestDesc(t.target,!0);o&&o.node.type.spec.draggable&&o!=e.docView&&e.dispatch(e.state.tr.setSelection(fl.create(e.state.doc,o.posBefore)))}var i=e.state.selection.content(),s=Vd(e,i),u=s.dom,c=s.text;t.dataTransfer.clearData(),t.dataTransfer.setData(Sp?"Text":"text/html",u.innerHTML),t.dataTransfer.effectAllowed="copyMove",Sp||t.dataTransfer.setData("text/plain",c),e.dragging=new Np(i,!t[Ep])}},ap.dragend=function(e){var t=e.dragging;window.setTimeout((function(){e.dragging==t&&(e.dragging=null)}),50)},op.dragover=op.dragenter=function(e,t){return t.preventDefault()},op.drop=function(e,t){var n=e.dragging;if(e.dragging=null,t.dataTransfer){var r=e.posAtCoords(cp(t));if(r){var a=e.state.doc.resolve(r.pos);if(a){var o=n&&n.slice;o?e.someProp("transformPasted",(function(e){o=e(o)})):o=Ud(e,t.dataTransfer.getData(Sp?"Text":"text/plain"),Sp?null:t.dataTransfer.getData("text/html"),!1,a);var i=n&&!t[Ep];if(e.someProp("handleDrop",(function(n){return n(e,t,o||mu.empty,i)})))t.preventDefault();else if(o){t.preventDefault();var s=o?qc(e.state.doc,a.pos,o):a.pos;null==s&&(s=a.pos);var u=e.state.tr;i&&u.deleteSelection();var c=u.mapping.map(s),l=0==o.openStart&&0==o.openEnd&&1==o.content.childCount,f=u.doc;if(l?u.replaceRangeWith(c,c,o.content.firstChild):u.replaceRange(c,c,o),!u.doc.eq(f)){var d=u.doc.resolve(c);if(l&&fl.isSelectable(o.content.firstChild)&&d.nodeAfter&&d.nodeAfter.sameMarkup(o.content.firstChild))u.setSelection(new fl(d));else{var p=u.mapping.map(s);u.mapping.maps[u.mapping.maps.length-1].forEach((function(e,t,n,r){return p=r})),u.setSelection(Sd(e,d,u.doc.resolve(p)))}e.focus(),e.dispatch(u.setMeta("uiEvent","drop"))}}}}}},ap.focus=function(e){e.focused||(e.domObserver.stop(),e.dom.classList.add("ProseMirror-focused"),e.domObserver.start(),e.focused=!0,setTimeout((function(){e.docView&&e.hasFocus()&&!e.domObserver.currentSelection.eq(e.root.getSelection())&&vd(e)}),20))},ap.blur=function(e,t){e.focused&&(e.domObserver.stop(),e.dom.classList.remove("ProseMirror-focused"),e.domObserver.start(),t.relatedTarget&&e.dom.contains(t.relatedTarget)&&e.domObserver.currentSelection.set({}),e.focused=!1)},ap.beforeinput=function(e,t){if(of.chrome&&of.android&&"deleteContentBackward"==t.inputType){e.domObserver.flushSoon();var n=e.domChangeCount;setTimeout((function(){if(e.domChangeCount==n&&(e.dom.blur(),e.focus(),!e.someProp("handleKeyDown",(function(t){return t(e,kf(8,"Backspace"))})))){var t=e.state.selection.$cursor;t&&t.pos>0&&e.dispatch(e.state.tr.delete(t.pos-1,t.pos).scrollIntoView())}}),50)}},op)ap[Cp]=op[Cp];function Tp(e,t){if(e==t)return!0;for(var n in e)if(e[n]!==t[n])return!1;for(var r in t)if(!(r in e))return!1;return!0}var Ip=function(e,t){this.spec=t||Pp,this.side=this.spec.side||0,this.toDOM=e};Ip.prototype.map=function(e,t,n,r){var a=e.mapResult(t.from+r,this.side<0?-1:1),o=a.pos;return a.deleted?null:new Dp(o-n,o-n,this)},Ip.prototype.valid=function(){return!0},Ip.prototype.eq=function(e){return this==e||e instanceof Ip&&(this.spec.key&&this.spec.key==e.spec.key||this.toDOM==e.toDOM&&Tp(this.spec,e.spec))},Ip.prototype.destroy=function(e){this.spec.destroy&&this.spec.destroy(e)};var Op=function(e,t){this.spec=t||Pp,this.attrs=e};Op.prototype.map=function(e,t,n,r){var a=e.map(t.from+r,this.spec.inclusiveStart?-1:1)-n,o=e.map(t.to+r,this.spec.inclusiveEnd?1:-1)-n;return a>=o?null:new Dp(a,o,this)},Op.prototype.valid=function(e,t){return t.from<t.to},Op.prototype.eq=function(e){return this==e||e instanceof Op&&Tp(this.attrs,e.attrs)&&Tp(this.spec,e.spec)},Op.is=function(e){return e.type instanceof Op};var Ap=function(e,t){this.spec=t||Pp,this.attrs=e};Ap.prototype.map=function(e,t,n,r){var a=e.mapResult(t.from+r,1);if(a.deleted)return null;var o=e.mapResult(t.to+r,-1);return o.deleted||o.pos<=a.pos?null:new Dp(a.pos-n,o.pos-n,this)},Ap.prototype.valid=function(e,t){var n,r=e.content.findIndex(t.from),a=r.index,o=r.offset;return o==t.from&&!(n=e.child(a)).isText&&o+n.nodeSize==t.to},Ap.prototype.eq=function(e){return this==e||e instanceof Ap&&Tp(this.attrs,e.attrs)&&Tp(this.spec,e.spec)};var Dp=function(e,t,n){this.from=e,this.to=t,this.type=n},Mp={spec:{configurable:!0},inline:{configurable:!0}};Dp.prototype.copy=function(e,t){return new Dp(e,t,this.type)},Dp.prototype.eq=function(e,t){return void 0===t&&(t=0),this.type.eq(e.type)&&this.from+t==e.from&&this.to+t==e.to},Dp.prototype.map=function(e,t,n){return this.type.map(e,this,t,n)},Dp.widget=function(e,t,n){return new Dp(e,e,new Ip(t,n))},Dp.inline=function(e,t,n,r){return new Dp(e,t,new Op(n,r))},Dp.node=function(e,t,n,r){return new Dp(e,t,new Ap(n,r))},Mp.spec.get=function(){return this.type.spec},Mp.inline.get=function(){return this.type instanceof Op},Object.defineProperties(Dp.prototype,Mp);var Rp=[],Pp={},jp=function(e,t){this.local=e&&e.length?e:Rp,this.children=t&&t.length?t:Rp};jp.create=function(e,t){return t.length?Vp(t,e,0,Pp):Fp},jp.prototype.find=function(e,t,n){var r=[];return this.findInner(null==e?0:e,null==t?1e9:t,r,0,n),r},jp.prototype.findInner=function(e,t,n,r,a){for(var o=0;o<this.local.length;o++){var i=this.local[o];i.from<=t&&i.to>=e&&(!a||a(i.spec))&&n.push(i.copy(i.from+r,i.to+r))}for(var s=0;s<this.children.length;s+=3)if(this.children[s]<t&&this.children[s+1]>e){var u=this.children[s]+1;this.children[s+2].findInner(e-u,t-u,n,r+u,a)}},jp.prototype.map=function(e,t,n){return this==Fp||0==e.maps.length?this:this.mapInner(e,t,0,0,n||Pp)},jp.prototype.mapInner=function(e,t,n,r,a){for(var o,i=0;i<this.local.length;i++){var s=this.local[i].map(e,n,r);s&&s.type.valid(t,s)?(o||(o=[])).push(s):a.onRemove&&a.onRemove(this.local[i].spec)}return this.children.length?function(e,t,n,r,a,o,i){for(var s=e.slice(),u=function(e,t,n,r){for(var i=0;i<s.length;i+=3){var u=s[i+1],c=void 0;-1==u||e>u+o||(t>=s[i]+o?s[i+1]=-1:n>=a&&(c=r-n-(t-e))&&(s[i]+=c,s[i+1]+=c))}},c=0;c<n.maps.length;c++)n.maps[c].forEach(u);for(var l=!1,f=0;f<s.length;f+=3)if(-1==s[f+1]){var d=n.map(e[f]+o),p=d-a;if(p<0||p>=r.content.size){l=!0;continue}var h=n.map(e[f+1]+o,-1)-a,m=r.content.findIndex(p),v=m.index,g=m.offset,y=r.maybeChild(v);if(y&&g==p&&g+y.nodeSize==h){var b=s[f+2].mapInner(n,y,d+1,e[f]+o+1,i);b!=Fp?(s[f]=p,s[f+1]=h,s[f+2]=b):(s[f+1]=-2,l=!0)}else l=!0}if(l){var x=function(e,t,n,r,a,o,i){function s(e,t){for(var o=0;o<e.local.length;o++){var u=e.local[o].map(r,a,t);u?n.push(u):i.onRemove&&i.onRemove(e.local[o].spec)}for(var c=0;c<e.children.length;c+=3)s(e.children[c+2],e.children[c]+t+1)}for(var u=0;u<e.length;u+=3)-1==e[u+1]&&s(e[u+2],t[u]+o+1);return n}(s,e,t||[],n,a,o,i),w=Vp(x,r,0,i);t=w.local;for(var k=0;k<s.length;k+=3)s[k+1]<0&&(s.splice(k,3),k-=3);for(var S=0,_=0;S<w.children.length;S+=3){for(var N=w.children[S];_<s.length&&s[_]<N;)_+=3;s.splice(_,0,w.children[S],w.children[S+1],w.children[S+2])}}return new jp(t&&t.sort(Up),s)}(this.children,o,e,t,n,r,a):o?new jp(o.sort(Up)):Fp},jp.prototype.add=function(e,t){return t.length?this==Fp?jp.create(e,t):this.addInner(e,t,0):this},jp.prototype.addInner=function(e,t,n){var r,a=this,o=0;e.forEach((function(e,i){var s,u=i+n;if(s=zp(t,e,u)){for(r||(r=a.children.slice());o<r.length&&r[o]<i;)o+=3;r[o]==i?r[o+2]=r[o+2].addInner(e,s,u+1):r.splice(o,0,i,i+e.nodeSize,Vp(s,e,u+1,Pp)),o+=3}}));for(var i=Bp(o?Zp(t):t,-n),s=0;s<i.length;s++)i[s].type.valid(e,i[s])||i.splice(s--,1);return new jp(i.length?this.local.concat(i).sort(Up):this.local,r||this.children)},jp.prototype.remove=function(e){return 0==e.length||this==Fp?this:this.removeInner(e,0)},jp.prototype.removeInner=function(e,t){for(var n=this.children,r=this.local,a=0;a<n.length;a+=3){for(var o=void 0,i=n[a]+t,s=n[a+1]+t,u=0,c=void 0;u<e.length;u++)(c=e[u])&&c.from>i&&c.to<s&&(e[u]=null,(o||(o=[])).push(c));if(o){n==this.children&&(n=this.children.slice());var l=n[a+2].removeInner(o,i+1);l!=Fp?n[a+2]=l:(n.splice(a,3),a-=3)}}if(r.length)for(var f=0,d=void 0;f<e.length;f++)if(d=e[f])for(var p=0;p<r.length;p++)r[p].eq(d,t)&&(r==this.local&&(r=this.local.slice()),r.splice(p--,1));return n==this.children&&r==this.local?this:r.length||n.length?new jp(r,n):Fp},jp.prototype.forChild=function(e,t){if(this==Fp)return this;if(t.isLeaf)return jp.empty;for(var n,r,a=0;a<this.children.length;a+=3)if(this.children[a]>=e){this.children[a]==e&&(n=this.children[a+2]);break}for(var o=e+1,i=o+t.content.size,s=0;s<this.local.length;s++){var u=this.local[s];if(u.from<i&&u.to>o&&u.type instanceof Op){var c=Math.max(o,u.from)-o,l=Math.min(i,u.to)-o;c<l&&(r||(r=[])).push(u.copy(c,l))}}if(r){var f=new jp(r.sort(Up));return n?new Lp([f,n]):f}return n||Fp},jp.prototype.eq=function(e){if(this==e)return!0;if(!(e instanceof jp)||this.local.length!=e.local.length||this.children.length!=e.children.length)return!1;for(var t=0;t<this.local.length;t++)if(!this.local[t].eq(e.local[t]))return!1;for(var n=0;n<this.children.length;n+=3)if(this.children[n]!=e.children[n]||this.children[n+1]!=e.children[n+1]||!this.children[n+2].eq(e.children[n+2]))return!1;return!0},jp.prototype.locals=function(e){return qp(this.localsInner(e))},jp.prototype.localsInner=function(e){if(this==Fp)return Rp;if(e.inlineContent||!this.local.some(Op.is))return this.local;for(var t=[],n=0;n<this.local.length;n++)this.local[n].type instanceof Op||t.push(this.local[n]);return t};var Fp=new jp;jp.empty=Fp,jp.removeOverlap=qp;var Lp=function(e){this.members=e};function Bp(e,t){if(!t||!e.length)return e;for(var n=[],r=0;r<e.length;r++){var a=e[r];n.push(new Dp(a.from+t,a.to+t,a.type))}return n}function zp(e,t,n){if(t.isLeaf)return null;for(var r=n+t.nodeSize,a=null,o=0,i=void 0;o<e.length;o++)(i=e[o])&&i.from>n&&i.to<r&&((a||(a=[])).push(i),e[o]=null);return a}function Zp(e){for(var t=[],n=0;n<e.length;n++)null!=e[n]&&t.push(e[n]);return t}function Vp(e,t,n,r){var a=[],o=!1;t.forEach((function(t,i){var s=zp(e,t,i+n);if(s){o=!0;var u=Vp(s,t,n+i+1,r);u!=Fp&&a.push(i,i+t.nodeSize,u)}}));for(var i=Bp(o?Zp(e):e,-n).sort(Up),s=0;s<i.length;s++)i[s].type.valid(t,i[s])||(r.onRemove&&r.onRemove(i[s].spec),i.splice(s--,1));return i.length||a.length?new jp(i,a):Fp}function Up(e,t){return e.from-t.from||e.to-t.to}function qp(e){for(var t=e,n=0;n<t.length-1;n++){var r=t[n];if(r.from!=r.to)for(var a=n+1;a<t.length;a++){var o=t[a];if(o.from!=r.from){o.from<r.to&&(t==e&&(t=e.slice()),t[n]=r.copy(r.from,o.from),Wp(t,a,r.copy(o.from,r.to)));break}o.to!=r.to&&(t==e&&(t=e.slice()),t[a]=o.copy(o.from,r.to),Wp(t,a+1,o.copy(r.to,o.to)))}}return t}function Wp(e,t,n){for(;t<e.length&&Up(n,e[t])>0;)t++;e.splice(t,0,n)}function Hp(e){var t=[];return e.someProp("decorations",(function(n){var r=n(e.state);r&&r!=Fp&&t.push(r)})),e.cursorWrapper&&t.push(jp.create(e.state.doc,[e.cursorWrapper.deco])),Lp.from(t)}Lp.prototype.map=function(e,t){var n=this.members.map((function(n){return n.map(e,t,Pp)}));return Lp.from(n)},Lp.prototype.forChild=function(e,t){if(t.isLeaf)return jp.empty;for(var n=[],r=0;r<this.members.length;r++){var a=this.members[r].forChild(e,t);a!=Fp&&(a instanceof Lp?n=n.concat(a.members):n.push(a))}return Lp.from(n)},Lp.prototype.eq=function(e){if(!(e instanceof Lp)||e.members.length!=this.members.length)return!1;for(var t=0;t<this.members.length;t++)if(!this.members[t].eq(e.members[t]))return!1;return!0},Lp.prototype.locals=function(e){for(var t,n=!0,r=0;r<this.members.length;r++){var a=this.members[r].localsInner(e);if(a.length)if(t){n&&(t=t.slice(),n=!1);for(var o=0;o<a.length;o++)t.push(a[o])}else t=a}return t?qp(n?t:t.sort(Up)):Rp},Lp.from=function(e){switch(e.length){case 0:return Fp;case 1:return e[0];default:return new Lp(e)}};var Gp=function(e,t){this._props=t,this.state=t.state,this.directPlugins=t.plugins||[],this.directPlugins.forEach(Qp),this.dispatch=this.dispatch.bind(this),this._root=null,this.focused=!1,this.trackWrites=null,this.dom=e&&e.mount||document.createElement("div"),e&&(e.appendChild?e.appendChild(this.dom):e.apply?e(this.dom):e.mount&&(this.mounted=!0)),this.editable=$p(this),this.markCursor=null,this.cursorWrapper=null,Yp(this),this.nodeViews=Jp(this),this.docView=Jf(this.state.doc,Xp(this),Hp(this),this.dom,this),this.lastSelectedViewDesc=null,this.dragging=null,function(e){e.shiftKey=!1,e.mouseDown=null,e.lastKeyCode=null,e.lastKeyCodeTime=0,e.lastClick={time:0,x:0,y:0,type:""},e.lastSelectionOrigin=null,e.lastSelectionTime=0,e.lastIOSEnter=0,e.lastIOSEnterFallbackTimeout=null,e.lastAndroidDelete=0,e.composing=!1,e.composingTimeout=null,e.compositionNodes=[],e.compositionEndedAt=-2e8,e.domObserver=new np(e,(function(t,n,r,a){return Bd(e,t,n,r,a)})),e.domObserver.start(),e.domChangeCount=0,e.eventHandlers=Object.create(null);var t=function(t){var n=ap[t];e.dom.addEventListener(t,e.eventHandlers[t]=function(t){!function(e,t){if(!t.bubbles)return!0;if(t.defaultPrevented)return!1;for(var n=t.target;n!=e.dom;n=n.parentNode)if(!n||11==n.nodeType||n.pmViewDesc&&n.pmViewDesc.stopEvent(t))return!1;return!0}(e,t)||up(e,t)||!e.editable&&t.type in op||n(e,t)})};for(var n in ap)t(n);of.safari&&e.dom.addEventListener("input",(function(){return null})),sp(e)}(this),this.prevDirectPlugins=[],this.pluginViews=[],this.updatePluginViews()},Kp={props:{configurable:!0},root:{configurable:!0},isDestroyed:{configurable:!0}};function Xp(e){var t=Object.create(null);return t.class="ProseMirror",t.contenteditable=String(e.editable),t.translate="no",e.someProp("attributes",(function(n){if("function"==typeof n&&(n=n(e.state)),n)for(var r in n)"class"==r&&(t.class+=" "+n[r]),"style"==r?t.style=(t.style?t.style+";":"")+n[r]:t[r]||"contenteditable"==r||"nodeName"==r||(t[r]=String(n[r]))})),[Dp.node(0,e.state.doc.content.size,t)]}function Yp(e){if(e.markCursor){var t=document.createElement("img");t.className="ProseMirror-separator",t.setAttribute("mark-placeholder","true"),e.cursorWrapper={dom:t,deco:Dp.widget(e.state.selection.head,t,{raw:!0,marks:e.markCursor})}}else e.cursorWrapper=null}function $p(e){return!e.someProp("editable",(function(t){return!1===t(e.state)}))}function Jp(e){var t={};return e.someProp("nodeViews",(function(e){for(var n in e)Object.prototype.hasOwnProperty.call(t,n)||(t[n]=e[n])})),t}function Qp(e){if(e.spec.state||e.spec.filterTransaction||e.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}Kp.props.get=function(){if(this._props.state!=this.state){var e=this._props;for(var t in this._props={},e)this._props[t]=e[t];this._props.state=this.state}return this._props},Gp.prototype.update=function(e){e.handleDOMEvents!=this._props.handleDOMEvents&&sp(this),this._props=e,e.plugins&&(e.plugins.forEach(Qp),this.directPlugins=e.plugins),this.updateStateInner(e.state,!0)},Gp.prototype.setProps=function(e){var t={};for(var n in this._props)t[n]=this._props[n];for(var r in t.state=this.state,e)t[r]=e[r];this.update(t)},Gp.prototype.updateState=function(e){this.updateStateInner(e,this.state.plugins!=e.plugins)},Gp.prototype.updateStateInner=function(e,t){var n=this,r=this.state,a=!1,o=!1;if(e.storedMarks&&this.composing&&(wp(this),o=!0),this.state=e,t){var i=Jp(this);(function(e,t){var n=0,r=0;for(var a in e){if(e[a]!=t[a])return!0;n++}for(var o in t)r++;return n!=r})(i,this.nodeViews)&&(this.nodeViews=i,a=!0),sp(this)}this.editable=$p(this),Yp(this);var s=Hp(this),u=Xp(this),c=t?"reset":e.scrollToSelection>r.scrollToSelection?"to selection":"preserve",l=a||!this.docView.matchesNode(e.doc,u,s);!l&&e.selection.eq(r.selection)||(o=!0);var f="preserve"==c&&o&&null==this.dom.style.overflowAnchor&&function(e){for(var t,n,r=e.dom.getBoundingClientRect(),a=Math.max(0,r.top),o=(r.left+r.right)/2,i=a+1;i<Math.min(innerHeight,r.bottom);i+=5){var s=e.root.elementFromPoint(o,i);if(s!=e.dom&&e.dom.contains(s)){var u=s.getBoundingClientRect();if(u.top>=a-20){t=s,n=u.top;break}}}return{refDOM:t,refTop:n,stack:Cf(e.dom)}}(this);if(o){this.domObserver.stop();var d=l&&(of.ie||of.chrome)&&!this.composing&&!r.selection.empty&&!e.selection.empty&&function(e,t){var n=Math.min(e.$anchor.sharedDepth(e.head),t.$anchor.sharedDepth(t.head));return e.$anchor.start(n)!=t.$anchor.start(n)}(r.selection,e.selection);if(l){var p=of.chrome?this.trackWrites=this.root.getSelection().focusNode:null;!a&&this.docView.update(e.doc,u,s,this)||(this.docView.updateOuterDeco([]),this.docView.destroy(),this.docView=Jf(e.doc,u,s,this.dom,this)),p&&!this.trackWrites&&(d=!0)}d||!(this.mouseDown&&this.domObserver.currentSelection.eq(this.root.getSelection())&&function(e){var t=e.docView.domFromPos(e.state.selection.anchor,0),n=e.root.getSelection();return vf(t.node,t.offset,n.anchorNode,n.anchorOffset)}(this))?vd(this,d):(wd(this,e.selection),this.domObserver.setCurSelection()),this.domObserver.start()}if(this.updatePluginViews(r),"reset"==c)this.dom.scrollTop=0;else if("to selection"==c){var h=this.root.getSelection().focusNode;this.someProp("handleScrollToSelection",(function(e){return e(n)}))||(e.selection instanceof fl?Ef(this,this.docView.domAfterPos(e.selection.from).getBoundingClientRect(),h):Ef(this,this.coordsAtPos(e.selection.head,1),h))}else f&&function(e){var t=e.refDOM,n=e.refTop,r=e.stack,a=t?t.getBoundingClientRect().top:0;Tf(r,0==a?0:a-n)}(f)},Gp.prototype.destroyPluginViews=function(){for(var e;e=this.pluginViews.pop();)e.destroy&&e.destroy()},Gp.prototype.updatePluginViews=function(e){if(e&&e.plugins==this.state.plugins&&this.directPlugins==this.prevDirectPlugins)for(var t=0;t<this.pluginViews.length;t++){var n=this.pluginViews[t];n.update&&n.update(this,e)}else{this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(var r=0;r<this.directPlugins.length;r++){var a=this.directPlugins[r];a.spec.view&&this.pluginViews.push(a.spec.view(this))}for(var o=0;o<this.state.plugins.length;o++){var i=this.state.plugins[o];i.spec.view&&this.pluginViews.push(i.spec.view(this))}}},Gp.prototype.someProp=function(e,t){var n,r=this._props&&this._props[e];if(null!=r&&(n=t?t(r):r))return n;for(var a=0;a<this.directPlugins.length;a++){var o=this.directPlugins[a].props[e];if(null!=o&&(n=t?t(o):o))return n}var i=this.state.plugins;if(i)for(var s=0;s<i.length;s++){var u=i[s].props[e];if(null!=u&&(n=t?t(u):u))return n}},Gp.prototype.hasFocus=function(){return this.root.activeElement==this.dom},Gp.prototype.focus=function(){this.domObserver.stop(),this.editable&&function(e){if(e.setActive)return e.setActive();if(If)return e.focus(If);var t=Cf(e);e.focus(null==If?{get preventScroll(){return If={preventScroll:!0},!0}}:void 0),If||(If=!1,Tf(t,0))}(this.dom),vd(this),this.domObserver.start()},Kp.root.get=function(){var e=this._root;if(null==e)for(var t=this.dom.parentNode;t;t=t.parentNode)if(9==t.nodeType||11==t.nodeType&&t.host)return t.getSelection||(Object.getPrototypeOf(t).getSelection=function(){return document.getSelection()}),this._root=t;return e||document},Gp.prototype.posAtCoords=function(e){return Mf(this,e)},Gp.prototype.coordsAtPos=function(e,t){return void 0===t&&(t=1),jf(this,e,t)},Gp.prototype.domAtPos=function(e,t){return void 0===t&&(t=0),this.docView.domFromPos(e,t)},Gp.prototype.nodeDOM=function(e){var t=this.docView.descAt(e);return t?t.nodeDOM:null},Gp.prototype.posAtDOM=function(e,t,n){void 0===n&&(n=-1);var r=this.docView.posFromDOM(e,t,n);if(null==r)throw new RangeError("DOM position not inside the editor");return r},Gp.prototype.endOfTextblock=function(e,t){return qf(this,t||this.state,e)},Gp.prototype.destroy=function(){this.docView&&(!function(e){for(var t in e.domObserver.stop(),e.eventHandlers)e.dom.removeEventListener(t,e.eventHandlers[t]);clearTimeout(e.composingTimeout),clearTimeout(e.lastIOSEnterFallbackTimeout)}(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],Hp(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null)},Kp.isDestroyed.get=function(){return null==this.docView},Gp.prototype.dispatchEvent=function(e){return function(e,t){up(e,t)||!ap[t.type]||!e.editable&&t.type in op||ap[t.type](e,t)}(this,e)},Gp.prototype.dispatch=function(e){var t=this._props.dispatchTransaction;t?t.call(this,e):this.updateState(this.state.apply(e))},Object.defineProperties(Gp.prototype,Kp);for(var eh={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",229:"q"},th={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"',229:"Q"},nh="undefined"!=typeof navigator&&/Chrome\/(\d+)/.exec(navigator.userAgent),rh="undefined"!=typeof navigator&&/Apple Computer/.test(navigator.vendor),ah="undefined"!=typeof navigator&&/Gecko\/\d+/.test(navigator.userAgent),oh="undefined"!=typeof navigator&&/Mac/.test(navigator.platform),ih="undefined"!=typeof navigator&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent),sh=nh&&(oh||+nh[1]<57)||ah&&oh,uh=0;uh<10;uh++)eh[48+uh]=eh[96+uh]=String(uh);for(uh=1;uh<=24;uh++)eh[uh+111]="F"+uh;for(uh=65;uh<=90;uh++)eh[uh]=String.fromCharCode(uh+32),th[uh]=String.fromCharCode(uh);for(var ch in eh)th.hasOwnProperty(ch)||(th[ch]=eh[ch]);var lh="undefined"!=typeof navigator&&/Mac|iP(hone|[oa]d)/.test(navigator.platform);function fh(e){var t,n,r,a,o=e.split(/-(?!$)/),i=o[o.length-1];"Space"==i&&(i=" ");for(var s=0;s<o.length-1;s++){var u=o[s];if(/^(cmd|meta|m)$/i.test(u))a=!0;else if(/^a(lt)?$/i.test(u))t=!0;else if(/^(c|ctrl|control)$/i.test(u))n=!0;else if(/^s(hift)?$/i.test(u))r=!0;else{if(!/^mod$/i.test(u))throw new Error("Unrecognized modifier name: "+u);lh?a=!0:n=!0}}return t&&(i="Alt-"+i),n&&(i="Ctrl-"+i),a&&(i="Meta-"+i),r&&(i="Shift-"+i),i}function dh(e,t,n){return t.altKey&&(e="Alt-"+e),t.ctrlKey&&(e="Ctrl-"+e),t.metaKey&&(e="Meta-"+e),!1!==n&&t.shiftKey&&(e="Shift-"+e),e}function ph(e){var t=function(e){var t=Object.create(null);for(var n in e)t[fh(n)]=e[n];return t}(e);return function(e,n){var r,a=function(e){var t=!(sh&&(e.ctrlKey||e.altKey||e.metaKey)||(rh||ih)&&e.shiftKey&&e.key&&1==e.key.length)&&e.key||(e.shiftKey?th:eh)[e.keyCode]||e.key||"Unidentified";return"Esc"==t&&(t="Escape"),"Del"==t&&(t="Delete"),"Left"==t&&(t="ArrowLeft"),"Up"==t&&(t="ArrowUp"),"Right"==t&&(t="ArrowRight"),"Down"==t&&(t="ArrowDown"),t}(n),o=1==a.length&&" "!=a,i=t[dh(a,n,!o)];if(i&&i(e.state,e.dispatch,e))return!0;if(o&&(n.shiftKey||n.altKey||n.metaKey||a.charCodeAt(0)>127)&&(r=eh[n.keyCode])&&r!=a){var s=t[dh(r,n,!0)];if(s&&s(e.state,e.dispatch,e))return!0}else if(o&&n.shiftKey){var u=t[dh(a,n,!0)];if(u&&u(e.state,e.dispatch,e))return!0}return!1}}function hh(e){return"Object"===function(e){return Object.prototype.toString.call(e).slice(8,-1)}(e)&&(e.constructor===Object&&Object.getPrototypeOf(e)===Object.prototype)}function mh(e,t){var n=u({},e);return hh(e)&&hh(t)&&Object.keys(t).forEach((function(r){hh(t[r])&&r in e?n[r]=mh(e[r],t[r]):Object.assign(n,i({},r,t[r]))})),n}function vh(e){return"function"===typeof e}function gh(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;if(vh(e)){for(var n=arguments.length,r=new Array(n>2?n-2:0),a=2;a<n;a++)r[a-2]=arguments[a];return t?e.bind(t).apply(void 0,r):e.apply(void 0,r)}return e}function yh(e,t,n){return void 0===e.config[t]&&e.parent?yh(e.parent,t,n):"function"===typeof e.config[t]?e.config[t].bind(u(u({},n),{},{parent:e.parent?yh(e.parent,t,n):null})):e.config[t]}var bh=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,f.Z)(this,e),this.type="extension",this.name="extension",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config=u(u({},this.config),t),this.name=this.config.name,t.defaultOptions&&console.warn('[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "'.concat(this.name,'".')),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=gh(yh(this,"addOptions",{name:this.name}))),this.storage=gh(yh(this,"addStorage",{name:this.name,options:this.options}))||{}}return(0,d.Z)(e,[{key:"configure",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this.extend();return t.options=mh(this.options,e),t.storage=gh(yh(t,"addStorage",{name:t.name,options:t.options})),t}},{key:"extend",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=new e(t);return n.parent=this,this.child=n,n.name=t.name?t.name:n.parent.name,t.defaultOptions&&console.warn('[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "'.concat(n.name,'".')),n.options=gh(yh(n,"addOptions",{name:n.name})),n.storage=gh(yh(n,"addStorage",{name:n.name,options:n.options})),n}}],[{key:"create",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new e(t)}}]),e}();function xh(e,t,n){var r=t.from,a=t.to,o=n||{},i=o.blockSeparator,s=void 0===i?"\n\n":i,u=o.textSerializers,c=void 0===u?{}:u,l="",f=!0;return e.nodesBetween(r,a,(function(e,t,n,o){var i,u=null===c||void 0===c?void 0:c[e.type.name];u?(e.isBlock&&!f&&(l+=s,f=!0),l+=u({node:e,pos:t,parent:n,index:o})):e.isText?(l+=null===(i=null===e||void 0===e?void 0:e.text)||void 0===i?void 0:i.slice(Math.max(r,t)-t,a-t),f=!1):e.isBlock&&!f&&(l+=s,f=!0)})),l}function wh(e){return Object.fromEntries(Object.entries(e.nodes).filter((function(e){return(0,a.Z)(e,2)[1].spec.toText})).map((function(e){var t=(0,a.Z)(e,2);return[t[0],t[1].spec.toText]})))}var kh=bh.create({name:"clipboardTextSerializer",addProseMirrorPlugins:function(){var e=this;return[new El({key:new Il("clipboardTextSerializer"),props:{clipboardTextSerializer:function(){var t=e.editor,n=t.state,a=t.schema,o=n.doc,i=n.selection.ranges,s=Math.min.apply(Math,(0,r.Z)(i.map((function(e){return e.$from.pos})))),u=Math.max.apply(Math,(0,r.Z)(i.map((function(e){return e.$to.pos}))));return xh(o,{from:s,to:u},{textSerializers:wh(a)})}}})]}}),Sh=Object.freeze({__proto__:null,blur:function(){return function(e){var t=e.editor,n=e.view;return requestAnimationFrame((function(){var e;t.isDestroyed||(n.dom.blur(),null===(e=null===window||void 0===window?void 0:window.getSelection())||void 0===e||e.removeAllRanges())})),!0}}}),_h=Object.freeze({__proto__:null,clearContent:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return function(t){return t.commands.setContent("",e)}}}),Nh=Object.freeze({__proto__:null,clearNodes:function(){return function(e){var t=e.state,n=e.tr,r=e.dispatch,a=n.selection.ranges;return!r||(a.forEach((function(e){var r=e.$from,a=e.$to;t.doc.nodesBetween(r.pos,a.pos,(function(e,t){if(!e.type.isText){var r=n.doc,a=n.mapping,o=r.resolve(a.map(t)),i=r.resolve(a.map(t+e.nodeSize)),s=o.blockRange(i);if(s){var u=Lc(s);if(e.type.isTextblock){var c=o.parent.contentMatchAt(o.index()).defaultType;n.setNodeMarkup(s.start,c)}(u||0===u)&&n.lift(s,u)}}}))})),!0)}}}),Eh=Object.freeze({__proto__:null,command:function(e){return function(t){return e(t)}}}),Ch=Object.freeze({__proto__:null,createParagraphNear:function(){return function(e){return Vl(e.state,e.dispatch)}}});function Th(e,t){if("string"===typeof e){if(!t.nodes[e])throw Error("There is no node type named '".concat(e,"'. Maybe you forgot to add the extension?"));return t.nodes[e]}return e}var Ih=Object.freeze({__proto__:null,deleteNode:function(e){return function(t){for(var n=t.tr,r=t.state,a=t.dispatch,o=Th(e,r.schema),i=n.selection.$anchor,s=i.depth;s>0;s-=1){if(i.node(s).type===o){if(a){var u=i.before(s),c=i.after(s);n.delete(u,c).scrollIntoView()}return!0}}return!1}}}),Oh=Object.freeze({__proto__:null,deleteRange:function(e){return function(t){var n=t.tr,r=t.dispatch,a=e.from,o=e.to;return r&&n.delete(a,o),!0}}}),Ah=Object.freeze({__proto__:null,deleteSelection:function(){return function(e){return Ol(e.state,e.dispatch)}}}),Dh=Object.freeze({__proto__:null,enter:function(){return function(e){return e.commands.keyboardShortcut("Enter")}}}),Mh=Object.freeze({__proto__:null,exitCode:function(){return function(e){return Zl(e.state,e.dispatch)}}});function Rh(e,t){if("string"===typeof e){if(!t.marks[e])throw Error("There is no mark type named '".concat(e,"'. Maybe you forgot to add the extension?"));return t.marks[e]}return e}function Ph(e){return"[object RegExp]"===Object.prototype.toString.call(e)}function jh(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{strict:!0},r=Object.keys(t);return!r.length||r.every((function(r){return n.strict?t[r]===e[r]:Ph(t[r])?t[r].test(e[r]):t[r]===e[r]}))}function Fh(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return e.find((function(e){return e.type===t&&jh(e.attrs,n)}))}function Lh(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return!!Fh(e,t,n)}function Bh(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(e&&t){var r=e.parent.childAfter(e.parentOffset);if(r.node){var a=Fh(r.node.marks,t,n);if(a){var o=e.index(),i=e.start()+r.offset,s=o+1,u=i+r.node.nodeSize;for(Fh(r.node.marks,t,n);o>0&&a.isInSet(e.parent.child(o-1).marks);)o-=1,i-=e.parent.child(o).nodeSize;for(;s<e.parent.childCount&&Lh(e.parent.child(s).marks,t,n);)u+=e.parent.child(s).nodeSize,s+=1;return{from:i,to:u}}}}}var zh=Object.freeze({__proto__:null,extendMarkRange:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(n){var r=n.tr,a=n.state,o=n.dispatch,i=Rh(e,a.schema),s=r.doc,u=r.selection,c=u.$from,l=u.from,f=u.to;if(o){var d=Bh(c,i,t);if(d&&d.from<=l&&d.to>=f){var p=cl.create(s,d.from,d.to);r.setSelection(p)}}return!0}}}),Zh=Object.freeze({__proto__:null,first:function(e){return function(t){for(var n="function"===typeof e?e(t):e,r=0;r<n.length;r+=1)if(n[r](t))return!0;return!1}}});function Vh(e){return e&&"object"===typeof e&&!Array.isArray(e)&&!function(e){var t;return"class"===(null===(t=e.constructor)||void 0===t?void 0:t.toString().substring(0,5))}(e)}function Uh(e){return Vh(e)&&e instanceof cl}function qh(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}function Wh(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return Math.min(Math.max(e,t),n)}function Hh(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!t)return null;var n=il.atStart(e),r=il.atEnd(e);if("start"===t||!0===t)return n;if("end"===t)return r;var a=n.from,o=r.to;return"all"===t?cl.create(e,Wh(0,a,o),Wh(e.content.size,a,o)):cl.create(e,Wh(t,a,o),Wh(t,a,o))}var Gh=Object.freeze({__proto__:null,focus:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;return function(n){var r=n.editor,a=n.view,o=n.tr,i=n.dispatch;t=u({scrollIntoView:!0},t);var s=function(){qh()&&a.dom.focus(),requestAnimationFrame((function(){r.isDestroyed||(a.focus(),(null===t||void 0===t?void 0:t.scrollIntoView)&&r.commands.scrollIntoView())}))};if(a.hasFocus()&&null===e||!1===e)return!0;if(i&&null===e&&!Uh(r.state.selection))return s(),!0;var c=Hh(r.state.doc,e)||r.state.selection,l=r.state.selection.eq(c);return i&&(l||o.setSelection(c),l&&o.storedMarks&&o.setStoredMarks(o.storedMarks),s()),!0}}}),Kh=Object.freeze({__proto__:null,forEach:function(e,t){return function(n){return e.every((function(e,r){return t(e,u(u({},n),{},{index:r}))}))}}}),Xh=Object.freeze({__proto__:null,insertContent:function(e,t){return function(n){var r=n.tr;return n.commands.insertContentAt({from:r.selection.from,to:r.selection.to},e,t)}}});function Yh(e){var t="<body>".concat(e,"</body>");return(new window.DOMParser).parseFromString(t,"text/html").body}function $h(e,t,n){if(n=u({slice:!0,parseOptions:{}},n),"object"===typeof e&&null!==e)try{return Array.isArray(e)?uu.fromArray(e.map((function(e){return t.nodeFromJSON(e)}))):t.nodeFromJSON(e)}catch(a){return console.warn("[tiptap warn]: Invalid content.","Passed value:",e,"Error:",a),$h("",t,n)}if("string"===typeof e){var r=sc.fromSchema(t);return n.slice?r.parseSlice(Yh(e),n.parseOptions).content:r.parse(Yh(e),n.parseOptions)}return $h("",t,n)}var Jh=Object.freeze({__proto__:null,insertContentAt:function(e,t,n){return function(r){var a=r.tr,o=r.dispatch,i=r.editor;if(o){n=u({parseOptions:{},updateSelection:!0},n);var s=$h(t,i.schema,{parseOptions:u({preserveWhitespace:"full"},n.parseOptions)});if("<>"===s.toString())return!0;var c="number"===typeof e?{from:e,to:e}:e,l=c.from,f=c.to,d=!0,p=!0;if((s.toString().startsWith("<")?s:[s]).forEach((function(e){e.check(),d=!!d&&(e.isText&&0===e.marks.length),p=!!p&&e.isBlock})),l===f&&p){var h=a.doc.resolve(l).parent;h.isTextblock&&!h.type.spec.code&&!h.childCount&&(l-=1,f+=1)}d?a.insertText(t,l,f):a.replaceWith(l,f,s),n.updateSelection&&function(e,t,n){var r=e.steps.length-1;if(!(r<t)){var a=e.steps[r];if(a instanceof Rc||a instanceof Pc){var o=e.mapping.maps[r],i=0;o.forEach((function(e,t,n,r){0===i&&(i=r)})),e.setSelection(il.near(e.doc.resolve(i),n))}}}(a,a.steps.length-1,-1)}return!0}}}),Qh=Object.freeze({__proto__:null,joinBackward:function(){return function(e){return Al(e.state,e.dispatch)}}}),em=Object.freeze({__proto__:null,joinForward:function(){return function(e){return Pl(e.state,e.dispatch)}}});function tm(){return"undefined"!==typeof navigator&&/Mac/.test(navigator.platform)}var nm=Object.freeze({__proto__:null,keyboardShortcut:function(e){return function(t){var n=t.editor,r=t.view,a=t.tr,o=t.dispatch,i=function(e){var t,n,r,a,o=e.split(/-(?!$)/),i=o[o.length-1];"Space"===i&&(i=" ");for(var s=0;s<o.length-1;s+=1){var u=o[s];if(/^(cmd|meta|m)$/i.test(u))a=!0;else if(/^a(lt)?$/i.test(u))t=!0;else if(/^(c|ctrl|control)$/i.test(u))n=!0;else if(/^s(hift)?$/i.test(u))r=!0;else{if(!/^mod$/i.test(u))throw new Error("Unrecognized modifier name: ".concat(u));qh()||tm()?a=!0:n=!0}}return t&&(i="Alt-".concat(i)),n&&(i="Ctrl-".concat(i)),a&&(i="Meta-".concat(i)),r&&(i="Shift-".concat(i)),i}(e).split(/-(?!$)/),s=i.find((function(e){return!["Alt","Ctrl","Meta","Shift"].includes(e)})),u=new KeyboardEvent("keydown",{key:"Space"===s?" ":s,altKey:i.includes("Alt"),ctrlKey:i.includes("Ctrl"),metaKey:i.includes("Meta"),shiftKey:i.includes("Shift"),bubbles:!0,cancelable:!0}),c=n.captureTransaction((function(){r.someProp("handleKeyDown",(function(e){return e(r,u)}))}));return null===c||void 0===c||c.steps.forEach((function(e){var t=e.map(a.mapping);t&&o&&a.maybeStep(t)})),!0}}});function rm(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=e.selection,a=r.from,o=r.to,i=r.empty,s=t?Th(t,e.schema):null,u=[];e.doc.nodesBetween(a,o,(function(e,t){if(!e.isText){var n=Math.max(a,t),r=Math.min(o,t+e.nodeSize);u.push({node:e,from:n,to:r})}}));var c=o-a,l=u.filter((function(e){return!s||s.name===e.node.type.name})).filter((function(e){return jh(e.node.attrs,n,{strict:!1})}));if(i)return!!l.length;var f=l.reduce((function(e,t){return e+t.to-t.from}),0);return f>=c}var am=Object.freeze({__proto__:null,lift:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(n){var r=n.state,a=n.dispatch;return!!rm(r,Th(e,r.schema),t)&&Ll(r,a)}}}),om=Object.freeze({__proto__:null,liftEmptyBlock:function(){return function(e){return Ul(e.state,e.dispatch)}}}),im=Object.freeze({__proto__:null,liftListItem:function(e){return function(t){var n=t.state,r=t.dispatch;return af(Th(e,n.schema))(n,r)}}}),sm=Object.freeze({__proto__:null,newlineInCode:function(){return function(e){return Bl(e.state,e.dispatch)}}});function um(e,t){return t.nodes[e]?"node":t.marks[e]?"mark":null}function cm(e,t){var n="string"===typeof t?[t]:t;return Object.keys(e).reduce((function(t,r){return n.includes(r)||(t[r]=e[r]),t}),{})}var lm=Object.freeze({__proto__:null,resetAttributes:function(e,t){return function(n){var r=n.tr,a=n.state,o=n.dispatch,i=null,s=null,u=um("string"===typeof e?e:e.name,a.schema);return!!u&&("node"===u&&(i=Th(e,a.schema)),"mark"===u&&(s=Rh(e,a.schema)),o&&r.selection.ranges.forEach((function(e){a.doc.nodesBetween(e.$from.pos,e.$to.pos,(function(e,n){i&&i===e.type&&r.setNodeMarkup(n,void 0,cm(e.attrs,t)),s&&e.marks.length&&e.marks.forEach((function(a){s===a.type&&r.addMark(n,n+e.nodeSize,s.create(cm(a.attrs,t)))}))}))})),!0)}}}),fm=Object.freeze({__proto__:null,scrollIntoView:function(){return function(e){var t=e.tr;return e.dispatch&&t.scrollIntoView(),!0}}}),dm=Object.freeze({__proto__:null,selectAll:function(){return function(e){var t=e.tr;return e.commands.setTextSelection({from:0,to:t.doc.content.size})}}}),pm=Object.freeze({__proto__:null,selectNodeBackward:function(){return function(e){return Ml(e.state,e.dispatch)}}}),hm=Object.freeze({__proto__:null,selectNodeForward:function(){return function(e){return jl(e.state,e.dispatch)}}}),mm=Object.freeze({__proto__:null,selectParentNode:function(){return function(e){return function(e,t){var n,r=e.selection,a=r.$from,o=r.to,i=a.sharedDepth(o);return 0!=i&&(n=a.before(i),t&&t(e.tr.setSelection(fl.create(e.doc,n))),!0)}(e.state,e.dispatch)}}}),vm=Object.freeze({__proto__:null,selectTextblockEnd:function(){return function(e){var t=e.state,n=e.dispatch;return Kl(t,n)}}}),gm=Object.freeze({__proto__:null,selectTextblockStart:function(){return function(e){var t=e.state,n=e.dispatch;return Gl(t,n)}}});function ym(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return $h(e,t,{slice:!1,parseOptions:n})}var bm=Object.freeze({__proto__:null,setContent:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return function(r){var a=r.tr,o=r.editor,i=r.dispatch,s=a.doc,u=ym(e,o.schema,n),c=cl.create(s,0,s.content.size);return i&&a.setSelection(c).replaceSelectionWith(u,!1).setMeta("preventUpdate",!t),!0}}});function xm(e,t){var n=Rh(t,e.schema),a=e.selection,o=a.from,i=a.to,s=a.empty,c=[];s?(e.storedMarks&&c.push.apply(c,(0,r.Z)(e.storedMarks)),c.push.apply(c,(0,r.Z)(e.selection.$head.marks()))):e.doc.nodesBetween(o,i,(function(e){c.push.apply(c,(0,r.Z)(e.marks))}));var l=c.find((function(e){return e.type.name===n.name}));return l?u({},l.attrs):{}}var wm=Object.freeze({__proto__:null,setMark:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(n){var r=n.tr,a=n.state,o=n.dispatch,i=r.selection,s=i.empty,c=i.ranges,l=Rh(e,a.schema);if(o)if(s){var f=xm(a,l);r.addStoredMark(l.create(u(u({},f),t)))}else c.forEach((function(e){var n=e.$from.pos,o=e.$to.pos;a.doc.nodesBetween(n,o,(function(e,a){var i=Math.max(a,n),s=Math.min(a+e.nodeSize,o);e.marks.find((function(e){return e.type===l}))?e.marks.forEach((function(e){l===e.type&&r.addMark(i,s,l.create(u(u({},e.attrs),t)))})):r.addMark(i,s,l.create(t))}))}));return!0}}}),km=Object.freeze({__proto__:null,setMeta:function(e,t){return function(n){return n.tr.setMeta(e,t),!0}}}),Sm=Object.freeze({__proto__:null,setNode:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(n){var r=n.state,a=n.dispatch,o=n.chain,i=Th(e,r.schema);return i.isTextblock?o().command((function(e){var n=e.commands;return!!Yl(i,t)(r)||n.clearNodes()})).command((function(e){var n=e.state;return Yl(i,t)(n,a)})).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)}}}),_m=Object.freeze({__proto__:null,setNodeSelection:function(e){return function(t){var n=t.tr;if(t.dispatch){var r=n.doc,a=il.atStart(r).from,o=il.atEnd(r).to,i=Wh(e,a,o),s=fl.create(r,i);n.setSelection(s)}return!0}}}),Nm=Object.freeze({__proto__:null,setTextSelection:function(e){return function(t){var n=t.tr;if(t.dispatch){var r=n.doc,a="number"===typeof e?{from:e,to:e}:e,o=a.from,i=a.to,s=cl.atStart(r).from,u=cl.atEnd(r).to,c=Wh(o,s,u),l=Wh(i,s,u),f=cl.create(r,c,l);n.setSelection(f)}return!0}}}),Em=Object.freeze({__proto__:null,sinkListItem:function(e){return function(t){var n,r=t.state,a=t.dispatch,o=Th(e,r.schema);return(n=o,function(e,t){var r=e.selection,a=r.$from,o=r.$to,i=a.blockRange(o,(function(e){return e.childCount&&e.firstChild.type==n}));if(!i)return!1;var s=i.startIndex;if(0==s)return!1;var u=i.parent,c=u.child(s-1);if(c.type!=n)return!1;if(t){var l=c.lastChild&&c.lastChild.type==u.type,f=uu.from(l?n.create():null),d=new mu(uu.from(n.create(null,uu.from(u.type.create(null,f)))),l?3:1,0),p=i.start,h=i.end;t(e.tr.step(new Pc(p-(l?3:1),h,p,h,d,1,!0)).scrollIntoView())}return!0})(r,a)}}});function Cm(e,t,n){return Object.fromEntries(Object.entries(n).filter((function(n){var r=(0,a.Z)(n,1)[0],o=e.find((function(e){return e.type===t&&e.name===r}));return!!o&&o.attribute.keepOnSplit})))}function Tm(e){for(var t=0;t<e.edgeCount;t+=1){var n=e.edge(t).type;if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}function Im(e,t){var n=e.storedMarks||e.selection.$to.parentOffset&&e.selection.$from.marks();if(n){var r=n.filter((function(e){return null===t||void 0===t?void 0:t.includes(e.type.name)}));e.tr.ensureMarks(r)}}var Om=Object.freeze({__proto__:null,splitBlock:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.keepMarks,n=void 0===t||t;return function(e){var t=e.tr,r=e.state,a=e.dispatch,o=e.editor,i=t.selection,s=t.doc,u=i.$from,c=i.$to,l=Cm(o.extensionManager.attributes,u.node().type.name,u.node().attrs);if(i instanceof fl&&i.node.isBlock)return!(!u.parentOffset||!Zc(s,u.pos))&&(a&&(n&&Im(r,o.extensionManager.splittableMarks),t.split(u.pos).scrollIntoView()),!0);if(!u.parent.isBlock)return!1;if(a){var f=c.parentOffset===c.parent.content.size;i instanceof cl&&t.deleteSelection();var d=0===u.depth?void 0:Tm(u.node(-1).contentMatchAt(u.indexAfter(-1))),p=f&&d?[{type:d,attrs:l}]:void 0,h=Zc(t.doc,t.mapping.map(u.pos),1,p);if(p||h||!Zc(t.doc,t.mapping.map(u.pos),1,d?[{type:d}]:void 0)||(h=!0,p=d?[{type:d,attrs:l}]:void 0),h&&(t.split(t.mapping.map(u.pos),1,p),d&&!f&&!u.parentOffset&&u.parent.type!==d)){var m=t.mapping.map(u.before()),v=t.doc.resolve(m);u.node(-1).canReplaceWith(v.index(),v.index()+1,d)&&t.setNodeMarkup(t.mapping.map(u.before()),d)}n&&Im(r,o.extensionManager.splittableMarks),t.scrollIntoView()}return!0}}}),Am=Object.freeze({__proto__:null,splitListItem:function(e){return function(t){var n,r=t.tr,a=t.state,o=t.dispatch,i=t.editor,s=Th(e,a.schema),u=a.selection,c=u.$from,l=u.$to,f=a.selection.node;if(f&&f.isBlock||c.depth<2||!c.sameParent(l))return!1;var d=c.node(-1);if(d.type!==s)return!1;var p=i.extensionManager.attributes;if(0===c.parent.content.size&&c.node(-1).childCount===c.indexAfter(-1)){if(2===c.depth||c.node(-3).type!==s||c.index(-2)!==c.node(-2).childCount-1)return!1;if(o){for(var h=uu.empty,m=c.index(-1)?1:c.index(-2)?2:3,v=c.depth-m;v>=c.depth-3;v-=1)h=uu.from(c.node(v).copy(h));var g=c.indexAfter(-1)<c.node(-2).childCount?1:c.indexAfter(-2)<c.node(-3).childCount?2:3,y=Cm(p,c.node().type.name,c.node().attrs),b=(null===(n=s.contentMatch.defaultType)||void 0===n?void 0:n.createAndFill(y))||void 0;h=h.append(uu.from(s.createAndFill(null,b)||void 0));var x=c.before(c.depth-(m-1));r.replace(x,c.after(-g),new mu(h,4-m,0));var w=-1;r.doc.nodesBetween(x,r.doc.content.size,(function(e,t){if(w>-1)return!1;e.isTextblock&&0===e.content.size&&(w=t+1)})),w>-1&&r.setSelection(cl.near(r.doc.resolve(w))),r.scrollIntoView()}return!0}var k=l.pos===c.end()?d.contentMatchAt(0).defaultType:null,S=Cm(p,d.type.name,d.attrs),_=Cm(p,c.node().type.name,c.node().attrs);r.delete(c.pos,l.pos);var N=k?[{type:s,attrs:S},{type:k,attrs:_}]:[{type:s,attrs:S}];return!!Zc(r.doc,c.pos,2)&&(o&&r.split(c.pos,2,N).scrollIntoView(),!0)}}});function Dm(e){return function(t){return function(e,t){for(var n=e.depth;n>0;n-=1){var r=e.node(n);if(t(r))return{pos:n>0?e.before(n):0,start:e.start(n),depth:n,node:r}}}(t.$from,e)}}function Mm(e){return{baseExtensions:e.filter((function(e){return"extension"===e.type})),nodeExtensions:e.filter((function(e){return"node"===e.type})),markExtensions:e.filter((function(e){return"mark"===e.type}))}}function Rm(e,t){var n=Mm(t).nodeExtensions.find((function(t){return t.name===e}));if(!n)return!1;var r=gh(yh(n,"group",{name:n.name,options:n.options,storage:n.storage}));return"string"===typeof r&&r.split(" ").includes("list")}var Pm=function(e,t){var n=Dm((function(e){return e.type===t}))(e.selection);if(!n)return!0;var r=e.doc.resolve(Math.max(0,n.pos-1)).before(n.depth);if(void 0===r)return!0;var a=e.doc.nodeAt(r);return n.node.type!==(null===a||void 0===a?void 0:a.type)||!Vc(e.doc,n.pos)||(e.join(n.pos),!0)},jm=function(e,t){var n=Dm((function(e){return e.type===t}))(e.selection);if(!n)return!0;var r=e.doc.resolve(n.start).after(n.depth);if(void 0===r)return!0;var a=e.doc.nodeAt(r);return n.node.type!==(null===a||void 0===a?void 0:a.type)||!Vc(e.doc,r)||(e.join(r),!0)},Fm=Object.freeze({__proto__:null,toggleList:function(e,t){return function(n){var r=n.editor,a=n.tr,o=n.state,i=n.dispatch,s=n.chain,u=n.commands,c=n.can,l=r.extensionManager.extensions,f=Th(e,o.schema),d=Th(t,o.schema),p=o.selection,h=p.$from,m=p.$to,v=h.blockRange(m);if(!v)return!1;var g=Dm((function(e){return Rm(e.type.name,l)}))(p);if(v.depth>=1&&g&&v.depth-g.depth<=1){if(g.node.type===f)return u.liftListItem(d);if(Rm(g.node.type.name,l)&&f.validContent(g.node.content)&&i)return s().command((function(){return a.setNodeMarkup(g.pos,f),!0})).command((function(){return Pm(a,f)})).command((function(){return jm(a,f)})).run()}return s().command((function(){return!!c().wrapInList(f)||u.clearNodes()})).wrapInList(f).command((function(){return Pm(a,f)})).command((function(){return jm(a,f)})).run()}}});function Lm(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=e.selection,o=a.empty,i=a.ranges,s=t?Rh(t,e.schema):null;if(o)return!!(e.storedMarks||e.selection.$from.marks()).filter((function(e){return!s||s.name===e.type.name})).find((function(e){return jh(e.attrs,n,{strict:!1})}));var u=0,c=[];if(i.forEach((function(t){var n=t.$from,a=t.$to,o=n.pos,i=a.pos;e.doc.nodesBetween(o,i,(function(e,t){if(e.isText||e.marks.length){var n=Math.max(o,t),a=Math.min(i,t+e.nodeSize);u+=a-n,c.push.apply(c,(0,r.Z)(e.marks.map((function(e){return{mark:e,from:n,to:a}}))))}}))})),0===u)return!1;var l=c.filter((function(e){return!s||s.name===e.mark.type.name})).filter((function(e){return jh(e.mark.attrs,n,{strict:!1})})).reduce((function(e,t){return e+t.to-t.from}),0),f=c.filter((function(e){return!s||e.mark.type!==s&&e.mark.type.excludes(s)})).reduce((function(e,t){return e+t.to-t.from}),0),d=l>0?l+f:l;return d>=u}var Bm=Object.freeze({__proto__:null,toggleMark:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return function(r){var a=r.state,o=r.commands,i=n.extendEmptyMarkRange,s=void 0!==i&&i,u=Rh(e,a.schema);return Lm(a,u,t)?o.unsetMark(u,{extendEmptyMarkRange:s}):o.setMark(u,t)}}}),zm=Object.freeze({__proto__:null,toggleNode:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return function(r){var a=r.state,o=r.commands,i=Th(e,a.schema),s=Th(t,a.schema);return rm(a,i,n)?o.setNode(s):o.setNode(i,n)}}}),Zm=Object.freeze({__proto__:null,toggleWrap:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(n){var r=n.state,a=n.commands,o=Th(e,r.schema);return rm(r,o,t)?a.lift(o):a.wrapIn(o,t)}}}),Vm=Object.freeze({__proto__:null,undoInputRule:function(){return function(e){for(var t=e.state,n=e.dispatch,r=t.plugins,a=0;a<r.length;a+=1){var o=r[a],i=void 0;if(o.spec.isInputRules&&(i=o.getState(t))){if(n){for(var s=t.tr,u=i.transform,c=u.steps.length-1;c>=0;c-=1)s.step(u.steps[c].invert(u.docs[c]));if(i.text){var l=s.doc.resolve(i.from).marks();s.replaceWith(i.from,i.to,t.schema.text(i.text,l))}else s.delete(i.from,i.to)}return!0}}return!1}}}),Um=Object.freeze({__proto__:null,unsetAllMarks:function(){return function(e){var t=e.tr,n=e.dispatch,r=t.selection,a=r.empty,o=r.ranges;return a||n&&o.forEach((function(e){t.removeMark(e.$from.pos,e.$to.pos)})),!0}}}),qm=Object.freeze({__proto__:null,unsetMark:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(n){var r,a=n.tr,o=n.state,i=n.dispatch,s=t.extendEmptyMarkRange,u=void 0!==s&&s,c=a.selection,l=Rh(e,o.schema),f=c.$from,d=c.empty,p=c.ranges;if(!i)return!0;if(d&&u){var h=c.from,m=c.to,v=null===(r=f.marks().find((function(e){return e.type===l})))||void 0===r?void 0:r.attrs,g=Bh(f,l,v);g&&(h=g.from,m=g.to),a.removeMark(h,m,l)}else p.forEach((function(e){a.removeMark(e.$from.pos,e.$to.pos,l)}));return a.removeStoredMark(l),!0}}}),Wm=Object.freeze({__proto__:null,updateAttributes:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(n){var r=n.tr,a=n.state,o=n.dispatch,i=null,s=null,c=um("string"===typeof e?e:e.name,a.schema);return!!c&&("node"===c&&(i=Th(e,a.schema)),"mark"===c&&(s=Rh(e,a.schema)),o&&r.selection.ranges.forEach((function(e){var n=e.$from.pos,o=e.$to.pos;a.doc.nodesBetween(n,o,(function(e,a){i&&i===e.type&&r.setNodeMarkup(a,void 0,u(u({},e.attrs),t)),s&&e.marks.length&&e.marks.forEach((function(i){if(s===i.type){var c=Math.max(a,n),l=Math.min(a+e.nodeSize,o);r.addMark(c,l,s.create(u(u({},i.attrs),t)))}}))}))})),!0)}}}),Hm=Object.freeze({__proto__:null,wrapIn:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(n){var r=n.state,a=n.dispatch;return Xl(Th(e,r.schema),t)(r,a)}}}),Gm=Object.freeze({__proto__:null,wrapInList:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(n){var r=n.state,a=n.dispatch;return rf(Th(e,r.schema),t)(r,a)}}}),Km=bh.create({name:"commands",addCommands:function(){return u(u(u(u(u(u(u(u(u(u(u(u(u(u(u(u(u(u(u(u(u(u(u(u(u(u(u(u(u(u(u(u(u(u(u(u(u(u(u(u(u(u(u(u(u(u(u(u(u(u({},Sh),_h),Nh),Eh),Ch),Ih),Oh),Ah),Dh),Mh),zh),Zh),Gh),Kh),Xh),Jh),Qh),em),nm),am),om),im),sm),lm),fm),dm),pm),hm),mm),vm),gm),bm),wm),km),Sm),_m),Nm),Em),Om),Am),Fm),Bm),zm),Zm),Vm),Um),qm),Wm),Hm),Gm)}}),Xm=bh.create({name:"editable",addProseMirrorPlugins:function(){var e=this;return[new El({key:new Il("editable"),props:{editable:function(){return e.editor.options.editable}}})]}}),Ym=bh.create({name:"focusEvents",addProseMirrorPlugins:function(){var e=this.editor;return[new El({key:new Il("focusEvents"),props:{handleDOMEvents:{focus:function(t,n){e.isFocused=!0;var r=e.state.tr.setMeta("focus",{event:n}).setMeta("addToHistory",!1);return t.dispatch(r),!1},blur:function(t,n){e.isFocused=!1;var r=e.state.tr.setMeta("blur",{event:n}).setMeta("addToHistory",!1);return t.dispatch(r),!1}}}})]}});function $m(e){var t=e.state,n=e.transaction,r=n.selection,a=n.doc,o=n.storedMarks;return u(u({},t),{},{schema:t.schema,plugins:t.plugins,apply:t.apply.bind(t),applyTransaction:t.applyTransaction.bind(t),reconfigure:t.reconfigure.bind(t),toJSON:t.toJSON.bind(t),get storedMarks(){return o},get selection(){return r},get doc(){return a},get tr(){return r=n.selection,a=n.doc,o=n.storedMarks,n}})}var Jm=function(){function e(t){(0,f.Z)(this,e),this.editor=t.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=t.state}return(0,d.Z)(e,[{key:"hasCustomState",get:function(){return!!this.customState}},{key:"state",get:function(){return this.customState||this.editor.state}},{key:"commands",get:function(){var e=this,t=this.rawCommands,n=this.editor,r=this.state,o=n.view,i=r.tr,s=this.buildProps(i);return Object.fromEntries(Object.entries(t).map((function(t){var n=(0,a.Z)(t,2),r=n[0],u=n[1];return[r,function(){var t=u.apply(void 0,arguments)(s);return i.getMeta("preventDispatch")||e.hasCustomState||o.dispatch(i),t}]})))}},{key:"chain",get:function(){var e=this;return function(){return e.createChain()}}},{key:"can",get:function(){var e=this;return function(){return e.createCan()}}},{key:"createChain",value:function(e){var t=this,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=this.rawCommands,o=this.editor,i=this.state,s=o.view,c=[],l=!!e,f=e||i.tr,d=function(){return l||!n||f.getMeta("preventDispatch")||t.hasCustomState||s.dispatch(f),c.every((function(e){return!0===e}))},p=u(u({},Object.fromEntries(Object.entries(r).map((function(e){var r=(0,a.Z)(e,2),o=r[0],i=r[1];return[o,function(){var e=t.buildProps(f,n),r=i.apply(void 0,arguments)(e);return c.push(r),p}]})))),{},{run:d});return p}},{key:"createCan",value:function(e){var t=this,n=this.rawCommands,r=this.state,o=void 0,i=e||r.tr,s=this.buildProps(i,o),c=Object.fromEntries(Object.entries(n).map((function(e){var t=(0,a.Z)(e,2),n=t[0],r=t[1];return[n,function(){return r.apply(void 0,arguments)(u(u({},s),{},{dispatch:o}))}]})));return u(u({},c),{},{chain:function(){return t.createChain(i,o)}})}},{key:"buildProps",value:function(e){var t=this,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=this.rawCommands,o=this.editor,i=this.state,s=o.view;i.storedMarks&&e.setStoredMarks(i.storedMarks);var u={tr:e,editor:o,view:s,state:$m({state:i,transaction:e}),dispatch:n?function(){}:void 0,chain:function(){return t.createChain(e)},can:function(){return t.createCan(e)},get commands(){return Object.fromEntries(Object.entries(r).map((function(e){var t=(0,a.Z)(e,2),n=t[0],r=t[1];return[n,function(){return r.apply(void 0,arguments)(u)}]})))}};return u}}]),e}(),Qm=bh.create({name:"keymap",addKeyboardShortcuts:function(){var e=this,t=function(){return e.editor.commands.first((function(e){var t=e.commands;return[function(){return t.undoInputRule()},function(){return t.command((function(e){var n=e.tr,r=n.selection,a=n.doc,o=r.empty,i=r.$anchor,s=i.pos,u=i.parent,c=il.atStart(a).from===s;return!(!(o&&c&&u.type.isTextblock)||u.textContent.length)&&t.clearNodes()}))},function(){return t.deleteSelection()},function(){return t.joinBackward()},function(){return t.selectNodeBackward()}]}))},n=function(){return e.editor.commands.first((function(e){var t=e.commands;return[function(){return t.deleteSelection()},function(){return t.joinForward()},function(){return t.selectNodeForward()}]}))},r={Enter:function(){return e.editor.commands.first((function(e){var t=e.commands;return[function(){return t.newlineInCode()},function(){return t.createParagraphNear()},function(){return t.liftEmptyBlock()},function(){return t.splitBlock()}]}))},"Mod-Enter":function(){return e.editor.commands.exitCode()},Backspace:t,"Mod-Backspace":t,"Shift-Backspace":t,Delete:n,"Mod-Delete":n,"Mod-a":function(){return e.editor.commands.selectAll()}},a=u(u({},r),{},{Home:function(){return e.editor.commands.selectTextblockStart()},End:function(){return e.editor.commands.selectTextblockEnd()}}),o=u(u({},r),{},{"Ctrl-h":t,"Alt-Backspace":t,"Ctrl-d":n,"Ctrl-Alt-Backspace":n,"Alt-Delete":n,"Alt-d":n,"Ctrl-a":function(){return e.editor.commands.selectTextblockStart()},"Ctrl-e":function(){return e.editor.commands.selectTextblockEnd()}});return qh()||tm()?o:a},addProseMirrorPlugins:function(){var e=this;return[new El({key:new Il("clearDocument"),appendTransaction:function(t,n,r){if(t.some((function(e){return e.docChanged}))&&!n.doc.eq(r.doc)){var a=n.selection,o=a.empty,i=a.from,s=a.to,u=il.atStart(n.doc).from,c=il.atEnd(n.doc).to,l=i===u&&s===c,f=0===r.doc.textBetween(0,r.doc.content.size," "," ").length;if(!o&&l&&f){var d=r.tr,p=$m({state:r,transaction:d});if(new Jm({editor:e.editor,state:p}).commands.clearNodes(),d.steps.length)return d}}}})]}}),ev=bh.create({name:"tabindex",addProseMirrorPlugins:function(){var e=this;return[new El({key:new Il("tabindex"),props:{attributes:function(){if(e.editor.isEditable)return{tabindex:"0"}}}})]}}),tv=Object.freeze({__proto__:null,ClipboardTextSerializer:kh,Commands:Km,Editable:Xm,FocusEvents:Ym,Keymap:Qm,Tabindex:ev});function nv(e,t){var n=um("string"===typeof t?t:t.name,e.schema);return"node"===n?function(e,t){var n=Th(t,e.schema),r=e.selection,a=r.from,o=r.to,i=[];e.doc.nodesBetween(a,o,(function(e){i.push(e)}));var s=i.reverse().find((function(e){return e.type.name===n.name}));return s?u({},s.attrs):{}}(e,t):"mark"===n?xm(e,t):{}}function rv(e,t){var n=yc.fromSchema(t).serializeFragment(e),r=document.implementation.createHTMLDocument().createElement("div");return r.appendChild(n),r.innerHTML}function av(e,t){return xh(e,{from:0,to:e.content.size},t)}var ov=(0,d.Z)((function e(t){(0,f.Z)(this,e),this.find=t.find,this.handler=t.handler}));function iv(e){var t,n=e.editor,r=e.from,a=e.to,o=e.text,i=e.rules,s=e.plugin,u=n.view;if(u.composing)return!1;var c=u.state.doc.resolve(r);if(c.parent.type.spec.code||(null===(t=c.nodeBefore||c.nodeAfter)||void 0===t?void 0:t.marks.find((function(e){return e.type.spec.code}))))return!1;var l=!1,f=c.parent.textBetween(Math.max(0,c.parentOffset-500),c.parentOffset,void 0," ")+o;return i.forEach((function(e){if(!l){var t=function(e,t){if(Ph(t))return t.exec(e);var n=t(e);if(!n)return null;var r=[];return r.push(n.text),r.index=n.index,r.input=e,r.data=n.data,n.replaceWith&&(n.text.includes(n.replaceWith)||console.warn('[tiptap warn]: "inputRuleMatch.replaceWith" must be part of "inputRuleMatch.text".'),r.push(n.replaceWith)),r}(f,e.find);if(t){var i=u.state.tr,c=$m({state:u.state,transaction:i}),d={from:r-(t[0].length-o.length),to:a},p=new Jm({editor:n,state:c}),h=p.commands,m=p.chain,v=p.can;null!==e.handler({state:c,range:d,match:t,commands:h,chain:m,can:v})&&i.steps.length&&(i.setMeta(s,{transform:i,from:r,to:a,text:o}),u.dispatch(i),l=!0)}}})),l}function sv(e){var t=e.editor,n=e.rules,r=new El({state:{init:function(){return null},apply:function(e,t){var n=e.getMeta(this);return n||(e.selectionSet||e.docChanged?null:t)}},props:{handleTextInput:function(e,a,o,i){return iv({editor:t,from:a,to:o,text:i,rules:n,plugin:r})},handleDOMEvents:{compositionend:function(e){return setTimeout((function(){var a=e.state.selection.$cursor;a&&iv({editor:t,from:a.pos,to:a.pos,text:"",rules:n,plugin:r})})),!1}},handleKeyDown:function(e,a){if("Enter"!==a.key)return!1;var o=e.state.selection.$cursor;return!!o&&iv({editor:t,from:o.pos,to:o.pos,text:"\n",rules:n,plugin:r})}},isInputRules:!0});return r}var uv=(0,d.Z)((function e(t){(0,f.Z)(this,e),this.find=t.find,this.handler=t.handler}));function cv(e){var t=e.editor,n=e.state,a=e.from,o=e.to,i=e.rule,s=new Jm({editor:t,state:n}),u=s.commands,c=s.chain,l=s.can,f=[];return n.doc.nodesBetween(a,o,(function(e,t){if(e.isTextblock&&!e.type.spec.code){var s=Math.max(a,t),d=Math.min(o,t+e.content.size),p=function(e,t){if(Ph(t))return(0,r.Z)(e.matchAll(t));var n=t(e);return n?n.map((function(t){var n=[];return n.push(t.text),n.index=t.index,n.input=e,n.data=t.data,t.replaceWith&&(t.text.includes(t.replaceWith)||console.warn('[tiptap warn]: "pasteRuleMatch.replaceWith" must be part of "pasteRuleMatch.text".'),n.push(t.replaceWith)),n})):[]}(e.textBetween(s-t,d-t,void 0,"\ufffc"),i.find);p.forEach((function(e){if(void 0!==e.index){var t=s+e.index+1,r=t+e[0].length,a={from:n.tr.mapping.map(t),to:n.tr.mapping.map(r)},o=i.handler({state:n,range:a,match:e,commands:u,chain:c,can:l});f.push(o)}}))}})),f.every((function(e){return null!==e}))}function lv(e){var t=[],n=Mm(e),o=n.nodeExtensions,i=n.markExtensions,s=[].concat((0,r.Z)(o),(0,r.Z)(i)),c={default:null,rendered:!0,renderHTML:null,parseHTML:null,keepOnSplit:!0};return e.forEach((function(e){var n=yh(e,"addGlobalAttributes",{name:e.name,options:e.options,storage:e.storage});n&&n().forEach((function(e){e.types.forEach((function(n){Object.entries(e.attributes).forEach((function(e){var r=(0,a.Z)(e,2),o=r[0],i=r[1];t.push({type:n,name:o,attribute:u(u({},c),i)})}))}))}))})),s.forEach((function(e){var n={name:e.name,options:e.options,storage:e.storage},r=yh(e,"addAttributes",n);if(r){var o=r();Object.entries(o).forEach((function(n){var r=(0,a.Z)(n,2),o=r[0],i=r[1];t.push({type:e.name,name:o,attribute:u(u({},c),i)})}))}})),t}function fv(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.filter((function(e){return!!e})).reduce((function(e,t){var n=u({},e);return Object.entries(t).forEach((function(e){var t=(0,a.Z)(e,2),r=t[0],o=t[1];n[r]?n[r]="class"===r?[n[r],o].join(" "):"style"===r?[n[r],o].join("; "):o:n[r]=o})),n}),{})}function dv(e,t){return t.filter((function(e){return e.attribute.rendered})).map((function(t){return t.attribute.renderHTML?t.attribute.renderHTML(e.attrs)||{}:i({},t.name,e.attrs[t.name])})).reduce((function(e,t){return fv(e,t)}),{})}function pv(e,t){return e.style?e:u(u({},e),{},{getAttrs:function(n){var r=e.getAttrs?e.getAttrs(n):e.attrs;if(!1===r)return!1;var a=t.reduce((function(e,t){var r=t.attribute.parseHTML?t.attribute.parseHTML(n):function(e){return"string"!==typeof e?e:e.match(/^[+-]?(?:\d*\.)?\d+$/)?Number(e):"true"===e||"false"!==e&&e}(n.getAttribute(t.name));return null===r||void 0===r?e:u(u({},e),{},i({},t.name,r))}),{});return u(u({},r),a)}})}function hv(e){return Object.fromEntries(Object.entries(e).filter((function(e){var t=(0,a.Z)(e,2),n=t[0],r=t[1];return("attrs"!==n||!function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return 0===Object.keys(e).length&&e.constructor===Object}(r))&&(null!==r&&void 0!==r)})))}function mv(e){var t,n=lv(e),r=Mm(e),a=r.nodeExtensions,o=r.markExtensions,i=null===(t=a.find((function(e){return yh(e,"topNode")})))||void 0===t?void 0:t.name,s=Object.fromEntries(a.map((function(t){var r=n.filter((function(e){return e.type===t.name})),a={name:t.name,options:t.options,storage:t.storage},o=e.reduce((function(e,n){var r=yh(n,"extendNodeSchema",a);return u(u({},e),r?r(t):{})}),{}),i=hv(u(u({},o),{},{content:gh(yh(t,"content",a)),marks:gh(yh(t,"marks",a)),group:gh(yh(t,"group",a)),inline:gh(yh(t,"inline",a)),atom:gh(yh(t,"atom",a)),selectable:gh(yh(t,"selectable",a)),draggable:gh(yh(t,"draggable",a)),code:gh(yh(t,"code",a)),defining:gh(yh(t,"defining",a)),isolating:gh(yh(t,"isolating",a)),attrs:Object.fromEntries(r.map((function(e){var t;return[e.name,{default:null===(t=null===e||void 0===e?void 0:e.attribute)||void 0===t?void 0:t.default}]})))})),s=gh(yh(t,"parseHTML",a));s&&(i.parseDOM=s.map((function(e){return pv(e,r)})));var c=yh(t,"renderHTML",a);c&&(i.toDOM=function(e){return c({node:e,HTMLAttributes:dv(e,r)})});var l=yh(t,"renderText",a);return l&&(i.toText=l),[t.name,i]}))),c=Object.fromEntries(o.map((function(t){var r=n.filter((function(e){return e.type===t.name})),a={name:t.name,options:t.options,storage:t.storage},o=e.reduce((function(e,n){var r=yh(n,"extendMarkSchema",a);return u(u({},e),r?r(t):{})}),{}),i=hv(u(u({},o),{},{inclusive:gh(yh(t,"inclusive",a)),excludes:gh(yh(t,"excludes",a)),group:gh(yh(t,"group",a)),spanning:gh(yh(t,"spanning",a)),code:gh(yh(t,"code",a)),attrs:Object.fromEntries(r.map((function(e){var t;return[e.name,{default:null===(t=null===e||void 0===e?void 0:e.attribute)||void 0===t?void 0:t.default}]})))})),s=gh(yh(t,"parseHTML",a));s&&(i.parseDOM=s.map((function(e){return pv(e,r)})));var c=yh(t,"renderHTML",a);return c&&(i.toDOM=function(e){return c({mark:e,HTMLAttributes:dv(e,r)})}),[t.name,i]})));return new oc({topNode:i,nodes:s,marks:c})}function vv(e,t){return t.nodes[e]||t.marks[e]||null}function gv(e,t){return Array.isArray(t)?t.some((function(t){return("string"===typeof t?t:t.name)===e.name})):t}var yv=function(){function e(t,n){var r=this;(0,f.Z)(this,e),this.splittableMarks=[],this.editor=n,this.extensions=e.resolve(t),this.schema=mv(this.extensions),this.extensions.forEach((function(e){var t;r.editor.extensionStorage[e.name]=e.storage;var n={name:e.name,options:e.options,storage:e.storage,editor:r.editor,type:vv(e.name,r.schema)};"mark"===e.type&&((null===(t=gh(yh(e,"keepOnSplit",n)))||void 0===t||t)&&r.splittableMarks.push(e.name));var a=yh(e,"onBeforeCreate",n);a&&r.editor.on("beforeCreate",a);var o=yh(e,"onCreate",n);o&&r.editor.on("create",o);var i=yh(e,"onUpdate",n);i&&r.editor.on("update",i);var s=yh(e,"onSelectionUpdate",n);s&&r.editor.on("selectionUpdate",s);var u=yh(e,"onTransaction",n);u&&r.editor.on("transaction",u);var c=yh(e,"onFocus",n);c&&r.editor.on("focus",c);var l=yh(e,"onBlur",n);l&&r.editor.on("blur",l);var f=yh(e,"onDestroy",n);f&&r.editor.on("destroy",f)}))}return(0,d.Z)(e,[{key:"commands",get:function(){var e=this;return this.extensions.reduce((function(t,n){var r=yh(n,"addCommands",{name:n.name,options:n.options,storage:n.storage,editor:e.editor,type:vv(n.name,e.schema)});return r?u(u({},t),r()):t}),{})}},{key:"plugins",get:function(){var t=this,n=this.editor,o=e.sort((0,r.Z)(this.extensions).reverse()),i=[],s=[],u=o.map((function(e){var o={name:e.name,options:e.options,storage:e.storage,editor:n,type:vv(e.name,t.schema)},u=[],c=yh(e,"addKeyboardShortcuts",o);if(c){var l=function(e){return new El({props:{handleKeyDown:ph(e)}})}(Object.fromEntries(Object.entries(c()).map((function(e){var t=(0,a.Z)(e,2),r=t[0],o=t[1];return[r,function(){return o({editor:n})}]}))));u.push(l)}var f=yh(e,"addInputRules",o);gv(e,n.options.enableInputRules)&&f&&i.push.apply(i,(0,r.Z)(f()));var d=yh(e,"addPasteRules",o);gv(e,n.options.enablePasteRules)&&d&&s.push.apply(s,(0,r.Z)(d()));var p=yh(e,"addProseMirrorPlugins",o);if(p){var h=p();u.push.apply(u,(0,r.Z)(h))}return u})).flat();return[sv({editor:n,rules:i})].concat((0,r.Z)(function(e){var t=e.editor,n=e.rules,r=null,a=!1,o=!1,i=n.map((function(e){return new El({view:function(e){var t=function(t){var n;r=(null===(n=e.dom.parentElement)||void 0===n?void 0:n.contains(t.target))?e.dom.parentElement:null};return window.addEventListener("dragstart",t),{destroy:function(){window.removeEventListener("dragstart",t)}}},props:{handleDOMEvents:{drop:function(e){return o=r===e.dom.parentElement,!1},paste:function(e,t){var n,r=null===(n=t.clipboardData)||void 0===n?void 0:n.getData("text/html");return a=!!(null===r||void 0===r?void 0:r.includes("data-pm-slice")),!1}}},appendTransaction:function(n,r,i){var s=n[0],u="paste"===s.getMeta("uiEvent")&&!a,c="drop"===s.getMeta("uiEvent")&&!o;if(u||c){var l=r.doc.content.findDiffStart(i.doc.content),f=r.doc.content.findDiffEnd(i.doc.content);if("number"===typeof l&&f&&l!==f.b){var d=i.tr,p=$m({state:i,transaction:d});if(cv({editor:t,state:p,from:Math.max(l-1,0),to:f.b,rule:e})&&d.steps.length)return d}}}})}));return i}({editor:n,rules:s})),(0,r.Z)(u))}},{key:"attributes",get:function(){return lv(this.extensions)}},{key:"nodeViews",get:function(){var e=this,t=this.editor,n=Mm(this.extensions).nodeExtensions;return Object.fromEntries(n.filter((function(e){return!!yh(e,"addNodeView")})).map((function(n){var r=e.attributes.filter((function(e){return e.type===n.name})),a={name:n.name,options:n.options,storage:n.storage,editor:t,type:Th(n.name,e.schema)},o=yh(n,"addNodeView",a);if(!o)return[];return[n.name,function(e,a,i,s){var u=dv(e,r);return o()({editor:t,node:e,getPos:i,decorations:s,HTMLAttributes:u,extension:n})}]})))}}],[{key:"resolve",value:function(t){var n=e.sort(e.flatten(t)),a=function(e){var t=e.filter((function(t,n){return e.indexOf(t)!==n}));return(0,r.Z)(new Set(t))}(n.map((function(e){return e.name})));return a.length&&console.warn("[tiptap warn]: Duplicate extension names found: [".concat(a.map((function(e){return"'".concat(e,"'")})).join(", "),"]. This can lead to issues.")),n}},{key:"flatten",value:function(e){var t=this;return e.map((function(e){var n=yh(e,"addExtensions",{name:e.name,options:e.options,storage:e.storage});return n?[e].concat((0,r.Z)(t.flatten(n()))):e})).flat(10)}},{key:"sort",value:function(e){return e.sort((function(e,t){var n=yh(e,"priority")||100,r=yh(t,"priority")||100;return n>r?-1:n<r?1:0}))}}]),e}(),bv=function(){function e(){(0,f.Z)(this,e),this.callbacks={}}return(0,d.Z)(e,[{key:"on",value:function(e,t){return this.callbacks[e]||(this.callbacks[e]=[]),this.callbacks[e].push(t),this}},{key:"emit",value:function(e){for(var t=this,n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];var o=this.callbacks[e];return o&&o.forEach((function(e){return e.apply(t,r)})),this}},{key:"off",value:function(e,t){var n=this.callbacks[e];return n&&(t?this.callbacks[e]=n.filter((function(e){return e!==t})):delete this.callbacks[e]),this}},{key:"removeAllListeners",value:function(){this.callbacks={}}}]),e}(),xv=function(e){(0,nu.Z)(n,e);var t=(0,ru.Z)(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,f.Z)(this,n),(e=t.call(this)).isFocused=!1,e.extensionStorage={},e.options={element:document.createElement("div"),content:"",injectCSS:!0,extensions:[],autofocus:!1,editable:!0,editorProps:{},parseOptions:{},enableInputRules:!0,enablePasteRules:!0,enableCoreExtensions:!0,onBeforeCreate:function(){return null},onCreate:function(){return null},onUpdate:function(){return null},onSelectionUpdate:function(){return null},onTransaction:function(){return null},onFocus:function(){return null},onBlur:function(){return null},onDestroy:function(){return null}},e.isCapturingTransaction=!1,e.capturedTransaction=null,e.setOptions(r),e.createExtensionManager(),e.createCommandManager(),e.createSchema(),e.on("beforeCreate",e.options.onBeforeCreate),e.emit("beforeCreate",{editor:(0,tu.Z)(e)}),e.createView(),e.injectCSS(),e.on("create",e.options.onCreate),e.on("update",e.options.onUpdate),e.on("selectionUpdate",e.options.onSelectionUpdate),e.on("transaction",e.options.onTransaction),e.on("focus",e.options.onFocus),e.on("blur",e.options.onBlur),e.on("destroy",e.options.onDestroy),window.setTimeout((function(){e.isDestroyed||(e.commands.focus(e.options.autofocus),e.emit("create",{editor:(0,tu.Z)(e)}))}),0),e}return(0,d.Z)(n,[{key:"storage",get:function(){return this.extensionStorage}},{key:"commands",get:function(){return this.commandManager.commands}},{key:"chain",value:function(){return this.commandManager.chain()}},{key:"can",value:function(){return this.commandManager.can()}},{key:"injectCSS",value:function(){this.options.injectCSS&&document&&(this.css=function(e){var t=document.querySelector("style[data-tiptap-style]");if(null!==t)return t;var n=document.createElement("style");return n.setAttribute("data-tiptap-style",""),n.innerHTML=e,document.getElementsByTagName("head")[0].appendChild(n),n}('.ProseMirror {\n  position: relative;\n}\n\n.ProseMirror {\n  word-wrap: break-word;\n  white-space: pre-wrap;\n  white-space: break-spaces;\n  -webkit-font-variant-ligatures: none;\n  font-variant-ligatures: none;\n  font-feature-settings: "liga" 0; /* the above doesn\'t seem to work in Edge */\n}\n\n.ProseMirror [contenteditable="false"] {\n  white-space: normal;\n}\n\n.ProseMirror [contenteditable="false"] [contenteditable="true"] {\n  white-space: pre-wrap;\n}\n\n.ProseMirror pre {\n  white-space: pre-wrap;\n}\n\nimg.ProseMirror-separator {\n  display: inline !important;\n  border: none !important;\n  margin: 0 !important;\n  width: 1px !important;\n  height: 1px !important;\n}\n\n.ProseMirror-gapcursor {\n  display: none;\n  pointer-events: none;\n  position: absolute;\n  margin: 0;\n}\n\n.ProseMirror-gapcursor:after {\n  content: "";\n  display: block;\n  position: absolute;\n  top: -2px;\n  width: 20px;\n  border-top: 1px solid black;\n  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;\n}\n\n@keyframes ProseMirror-cursor-blink {\n  to {\n    visibility: hidden;\n  }\n}\n\n.ProseMirror-hideselection *::selection {\n  background: transparent;\n}\n\n.ProseMirror-hideselection *::-moz-selection {\n  background: transparent;\n}\n\n.ProseMirror-hideselection * {\n  caret-color: transparent;\n}\n\n.ProseMirror-focused .ProseMirror-gapcursor {\n  display: block;\n}\n\n.tippy-box[data-animation=fade][data-state=hidden] {\n  opacity: 0\n}'))}},{key:"setOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.options=u(u({},this.options),e),this.view&&this.state&&!this.isDestroyed&&(this.options.editorProps&&this.view.setProps(this.options.editorProps),this.view.updateState(this.state))}},{key:"setEditable",value:function(e){this.setOptions({editable:e})}},{key:"isEditable",get:function(){return this.options.editable&&this.view&&this.view.editable}},{key:"state",get:function(){return this.view.state}},{key:"registerPlugin",value:function(e,t){var n=vh(t)?t(e,this.state.plugins):[].concat((0,r.Z)(this.state.plugins),[e]),a=this.state.reconfigure({plugins:n});this.view.updateState(a)}},{key:"unregisterPlugin",value:function(e){if(!this.isDestroyed){var t="string"===typeof e?"".concat(e,"$"):e.key,n=this.state.reconfigure({plugins:this.state.plugins.filter((function(e){return!e.key.startsWith(t)}))});this.view.updateState(n)}}},{key:"createExtensionManager",value:function(){var e=this.options.enableCoreExtensions?Object.values(tv):[],t=[].concat((0,r.Z)(e),(0,r.Z)(this.options.extensions)).filter((function(e){return["extension","node","mark"].includes(null===e||void 0===e?void 0:e.type)}));this.extensionManager=new yv(t,this)}},{key:"createCommandManager",value:function(){this.commandManager=new Jm({editor:this})}},{key:"createSchema",value:function(){this.schema=this.extensionManager.schema}},{key:"createView",value:function(){var e=ym(this.options.content,this.schema,this.options.parseOptions),t=Hh(e,this.options.autofocus);this.view=new Gp(this.options.element,u(u({},this.options.editorProps),{},{dispatchTransaction:this.dispatchTransaction.bind(this),state:kl.create({doc:e,selection:t})}));var n=this.state.reconfigure({plugins:this.extensionManager.plugins});this.view.updateState(n),this.createNodeViews(),this.view.dom.editor=this}},{key:"createNodeViews",value:function(){this.view.setProps({nodeViews:this.extensionManager.nodeViews})}},{key:"captureTransaction",value:function(e){this.isCapturingTransaction=!0,e(),this.isCapturingTransaction=!1;var t=this.capturedTransaction;return this.capturedTransaction=null,t}},{key:"dispatchTransaction",value:function(e){var t=this;if(this.isCapturingTransaction)return this.capturedTransaction?void e.steps.forEach((function(e){var n;return null===(n=t.capturedTransaction)||void 0===n?void 0:n.step(e)})):void(this.capturedTransaction=e);var n=this.state.apply(e),r=!this.state.selection.eq(n.selection);this.view.updateState(n),this.emit("transaction",{editor:this,transaction:e}),r&&this.emit("selectionUpdate",{editor:this,transaction:e});var a=e.getMeta("focus"),o=e.getMeta("blur");a&&this.emit("focus",{editor:this,event:a.event,transaction:e}),o&&this.emit("blur",{editor:this,event:o.event,transaction:e}),e.docChanged&&!e.getMeta("preventUpdate")&&this.emit("update",{editor:this,transaction:e})}},{key:"getAttributes",value:function(e){return nv(this.state,e)}},{key:"isActive",value:function(e,t){var n="string"===typeof e?e:null,r="string"===typeof e?t:e;return function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!t)return rm(e,null,n)||Lm(e,null,n);var r=um(t,e.schema);return"node"===r?rm(e,t,n):"mark"===r&&Lm(e,t,n)}(this.state,n,r)}},{key:"getJSON",value:function(){return this.state.doc.toJSON()}},{key:"getHTML",value:function(){return rv(this.state.doc.content,this.schema)}},{key:"getText",value:function(e){var t=e||{},n=t.blockSeparator,r=void 0===n?"\n\n":n,a=t.textSerializers,o=void 0===a?{}:a;return av(this.state.doc,{blockSeparator:r,textSerializers:u(u({},o),wh(this.schema))})}},{key:"isEmpty",get:function(){return function(e){var t,n=null===(t=e.type.createAndFill())||void 0===t?void 0:t.toJSON(),r=e.toJSON();return JSON.stringify(n)===JSON.stringify(r)}(this.state.doc)}},{key:"getCharacterCount",value:function(){return console.warn('[tiptap warn]: "editor.getCharacterCount()" is deprecated. Please use "editor.storage.characterCount.characters()" instead.'),this.state.doc.content.size-2}},{key:"destroy",value:function(){this.emit("destroy"),this.view&&this.view.destroy(),this.removeAllListeners()}},{key:"isDestroyed",get:function(){var e;return!(null===(e=this.view)||void 0===e?void 0:e.docView)}}]),n}(bv),wv=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,f.Z)(this,e),this.type="node",this.name="node",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config=u(u({},this.config),t),this.name=this.config.name,t.defaultOptions&&console.warn('[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "'.concat(this.name,'".')),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=gh(yh(this,"addOptions",{name:this.name}))),this.storage=gh(yh(this,"addStorage",{name:this.name,options:this.options}))||{}}return(0,d.Z)(e,[{key:"configure",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this.extend();return t.options=mh(this.options,e),t.storage=gh(yh(t,"addStorage",{name:t.name,options:t.options})),t}},{key:"extend",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=new e(t);return n.parent=this,this.child=n,n.name=t.name?t.name:n.parent.name,t.defaultOptions&&console.warn('[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "'.concat(n.name,'".')),n.options=gh(yh(n,"addOptions",{name:n.name})),n.storage=gh(yh(n,"addStorage",{name:n.name,options:n.options})),n}}],[{key:"create",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new e(t)}}]),e}(),kv=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,f.Z)(this,e),this.type="mark",this.name="mark",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config=u(u({},this.config),t),this.name=this.config.name,t.defaultOptions&&console.warn('[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "'.concat(this.name,'".')),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=gh(yh(this,"addOptions",{name:this.name}))),this.storage=gh(yh(this,"addStorage",{name:this.name,options:this.options}))||{}}return(0,d.Z)(e,[{key:"configure",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this.extend();return t.options=mh(this.options,e),t.storage=gh(yh(t,"addStorage",{name:t.name,options:t.options})),t}},{key:"extend",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=new e(t);return n.parent=this,this.child=n,n.name=t.name?t.name:n.parent.name,t.defaultOptions&&console.warn('[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "'.concat(n.name,'".')),n.options=gh(yh(n,"addOptions",{name:n.name})),n.storage=gh(yh(n,"addStorage",{name:n.name,options:n.options})),n}}],[{key:"create",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new e(t)}}]),e}();function Sv(e){return new ov({find:e.find,handler:function(t){var n=t.state,r=t.range,a=t.match,o=gh(e.getAttributes,void 0,a)||{},i=n.tr,s=r.from,u=r.to;if(a[1]){var c=s+a[0].lastIndexOf(a[1]);c>u?c=u:u=c+a[1].length;var l=a[0][a[0].length-1];i.insertText(l,s+a[0].length-1),i.replaceWith(c,u,e.type.create(o))}else a[0]&&i.replaceWith(s,u,e.type.create(o))}})}function _v(e,t,n){var a=[];return e===t?n.resolve(e).marks().forEach((function(t){var r=Bh(n.resolve(e-1),t.type);r&&a.push(u({mark:t},r))})):n.nodesBetween(e,t,(function(e,t){a.push.apply(a,(0,r.Z)(e.marks.map((function(n){return{from:t,to:t+e.nodeSize,mark:n}}))))})),a}function Nv(e){return new ov({find:e.find,handler:function(t){var n=t.state,r=t.range,a=t.match,o=gh(e.getAttributes,void 0,a);if(!1===o||null===o)return null;var i=n.tr,s=a[a.length-1],u=a[0],c=r.to;if(s){var l=u.search(/\S/),f=r.from+u.indexOf(s),d=f+s.length;if(_v(r.from,r.to,n.doc).filter((function(t){return t.mark.type.excluded.find((function(n){return n===e.type&&n!==t.mark.type}))})).filter((function(e){return e.to>f})).length)return null;d<r.to&&i.delete(d,r.to),f>r.from&&i.delete(r.from+l,f),c=r.from+l+s.length,i.addMark(r.from+l,c,e.type.create(o||{})),i.removeStoredMark(e.type)}}})}function Ev(e){return new ov({find:e.find,handler:function(t){var n=t.state,r=t.range,a=t.match,o=n.doc.resolve(r.from),i=gh(e.getAttributes,void 0,a)||{};if(!o.node(-1).canReplaceWith(o.index(-1),o.indexAfter(-1),e.type))return null;n.tr.delete(r.from,r.to).setBlockType(r.from,r.from,e.type,i)}})}function Cv(e){return new ov({find:e.find,handler:function(t){var n=t.state,r=t.range,a=t.match,o=gh(e.getAttributes,void 0,a)||{},i=n.tr.delete(r.from,r.to),s=i.doc.resolve(r.from).blockRange(),u=s&&Bc(s,e.type,o);if(!u)return null;i.wrap(s,u);var c=i.doc.resolve(r.from-1).nodeBefore;c&&c.type===e.type&&Vc(i.doc,r.from-1)&&(!e.joinPredicate||e.joinPredicate(a,c))&&i.join(r.from-1)}})}function Tv(e){return new uv({find:e.find,handler:function(t){var n=t.state,r=t.range,a=t.match,o=gh(e.getAttributes,void 0,a);if(!1===o||null===o)return null;var i=n.tr,s=a[a.length-1],u=a[0],c=r.to;if(s){var l=u.search(/\S/),f=r.from+u.indexOf(s),d=f+s.length;if(_v(r.from,r.to,n.doc).filter((function(t){return t.mark.type.excluded.find((function(n){return n===e.type&&n!==t.mark.type}))})).filter((function(e){return e.to>f})).length)return null;d<r.to&&i.delete(d,r.to),f>r.from&&i.delete(r.from+l,f),c=r.from+l+s.length,i.addMark(r.from+l,c,e.type.create(o||{})),i.removeStoredMark(e.type)}}})}function Iv(e){return mv(yv.resolve(e))}function Ov(e,t,n){var r=e.state.doc.content.size,a=Wh(t,0,r),o=Wh(n,0,r),i=e.coordsAtPos(a),s=e.coordsAtPos(o,-1),c=Math.min(i.top,s.top),l=Math.max(i.bottom,s.bottom),f=Math.min(i.left,s.left),d=Math.max(i.right,s.right),p={top:c,bottom:l,left:f,right:d,width:d-f,height:l-c,x:f,y:c};return u(u({},p),{},{toJSON:function(){return p}})}var Av=kv.create({name:"textStyle",addOptions:function(){return{HTMLAttributes:{}}},parseHTML:function(){return[{tag:"span",getAttrs:function(e){return!!e.hasAttribute("style")&&{}}}]},renderHTML:function(e){var t=e.HTMLAttributes;return["span",fv(this.options.HTMLAttributes,t),0]},addCommands:function(){var e=this;return{removeEmptyTextStyle:function(){return function(t){var n=t.state,r=t.commands,o=xm(n,e.type);return!!Object.entries(o).some((function(e){return!!(0,a.Z)(e,2)[1]}))||r.unsetMark(e.name)}}}}}),Dv=bh.create({name:"color",addOptions:function(){return{types:["textStyle"]}},addGlobalAttributes:function(){return[{types:this.options.types,attributes:{color:{default:null,parseHTML:function(e){return e.style.color.replace(/['"]+/g,"")},renderHTML:function(e){return e.color?{style:"color: ".concat(e.color)}:{}}}}}]},addCommands:function(){return{setColor:function(e){return function(t){return(0,t.chain)().setMark("textStyle",{color:e}).run()}},unsetColor:function(){return function(e){return(0,e.chain)().setMark("textStyle",{color:null}).removeEmptyTextStyle().run()}}}}}),Mv=bh.create({name:"fontSize",addOptions:function(){return{types:["textStyle"],containerId:"thumbPreview"}},addGlobalAttributes:function(){var e=this;return[{types:this.options.types,attributes:{fontSize:{default:null,parseHTML:function(e){return e.style.fontSize.replace(/['"]+/g,"").replace(/[a-zA-Z]+/g,"")},renderHTML:function(t){if(!t.fontSize)return{};var n=document.getElementById(e.options.containerId).offsetWidth/1920*t.fontSize;return{style:"font-size: ".concat(n,"px")}}}}}]},addCommands:function(){return{setFontSize:function(e){return function(t){return(0,t.chain)().setMark("textStyle",{fontSize:e}).run()}},unsetFontSize:function(){return function(e){return(0,e.chain)().setMark("textStyle",{fontSize:null}).removeEmptyTextStyle().run()}}}}}),Rv=Mv,Pv=/^\s*>\s$/,jv=wv.create({name:"blockquote",addOptions:function(){return{HTMLAttributes:{}}},content:"block+",group:"block",defining:!0,parseHTML:function(){return[{tag:"blockquote"}]},renderHTML:function(e){var t=e.HTMLAttributes;return["blockquote",fv(this.options.HTMLAttributes,t),0]},addCommands:function(){var e=this;return{setBlockquote:function(){return function(t){return t.commands.wrapIn(e.name)}},toggleBlockquote:function(){return function(t){return t.commands.toggleWrap(e.name)}},unsetBlockquote:function(){return function(t){return t.commands.lift(e.name)}}}},addKeyboardShortcuts:function(){var e=this;return{"Mod-Shift-b":function(){return e.editor.commands.toggleBlockquote()}}},addInputRules:function(){return[Cv({find:Pv,type:this.type})]}}),Fv=/(?:^|\s)((?:\*\*)((?:[^*]+))(?:\*\*))$/,Lv=/(?:^|\s)((?:\*\*)((?:[^*]+))(?:\*\*))/g,Bv=/(?:^|\s)((?:__)((?:[^__]+))(?:__))$/,zv=/(?:^|\s)((?:__)((?:[^__]+))(?:__))/g,Zv=kv.create({name:"bold",addOptions:function(){return{HTMLAttributes:{}}},parseHTML:function(){return[{tag:"strong"},{tag:"b",getAttrs:function(e){return"normal"!==e.style.fontWeight&&null}},{style:"font-weight",getAttrs:function(e){return/^(bold(er)?|[5-9]\d{2,})$/.test(e)&&null}}]},renderHTML:function(e){var t=e.HTMLAttributes;return["strong",fv(this.options.HTMLAttributes,t),0]},addCommands:function(){var e=this;return{setBold:function(){return function(t){return t.commands.setMark(e.name)}},toggleBold:function(){return function(t){return t.commands.toggleMark(e.name)}},unsetBold:function(){return function(t){return t.commands.unsetMark(e.name)}}}},addKeyboardShortcuts:function(){var e=this;return{"Mod-b":function(){return e.editor.commands.toggleBold()},"Mod-B":function(){return e.editor.commands.toggleBold()}}},addInputRules:function(){return[Nv({find:Fv,type:this.type}),Nv({find:Bv,type:this.type})]},addPasteRules:function(){return[Tv({find:Lv,type:this.type}),Tv({find:zv,type:this.type})]}}),Vv=/^\s*([-+*])\s$/,Uv=wv.create({name:"bulletList",addOptions:function(){return{itemTypeName:"listItem",HTMLAttributes:{}}},group:"block list",content:function(){return"".concat(this.options.itemTypeName,"+")},parseHTML:function(){return[{tag:"ul"}]},renderHTML:function(e){var t=e.HTMLAttributes;return["ul",fv(this.options.HTMLAttributes,t),0]},addCommands:function(){var e=this;return{toggleBulletList:function(){return function(t){return t.commands.toggleList(e.name,e.options.itemTypeName)}}}},addKeyboardShortcuts:function(){var e=this;return{"Mod-Shift-8":function(){return e.editor.commands.toggleBulletList()}}},addInputRules:function(){return[Cv({find:Vv,type:this.type})]}}),qv=/(?:^|\s)((?:`)((?:[^`]+))(?:`))$/,Wv=/(?:^|\s)((?:`)((?:[^`]+))(?:`))/g,Hv=kv.create({name:"code",addOptions:function(){return{HTMLAttributes:{}}},excludes:"_",code:!0,parseHTML:function(){return[{tag:"code"}]},renderHTML:function(e){var t=e.HTMLAttributes;return["code",fv(this.options.HTMLAttributes,t),0]},addCommands:function(){var e=this;return{setCode:function(){return function(t){return t.commands.setMark(e.name)}},toggleCode:function(){return function(t){return t.commands.toggleMark(e.name)}},unsetCode:function(){return function(t){return t.commands.unsetMark(e.name)}}}},addKeyboardShortcuts:function(){var e=this;return{"Mod-e":function(){return e.editor.commands.toggleCode()}}},addInputRules:function(){return[Nv({find:qv,type:this.type})]},addPasteRules:function(){return[Tv({find:Wv,type:this.type})]}}),Gv=/^```([a-z]+)?[\s\n]$/,Kv=/^~~~([a-z]+)?[\s\n]$/,Xv=wv.create({name:"codeBlock",addOptions:function(){return{languageClassPrefix:"language-",exitOnTripleEnter:!0,exitOnArrowDown:!0,HTMLAttributes:{}}},content:"text*",marks:"",group:"block",code:!0,defining:!0,addAttributes:function(){var e=this;return{language:{default:null,parseHTML:function(t){var n,a=e.options.languageClassPrefix,o=(0,r.Z)((null===(n=t.firstElementChild)||void 0===n?void 0:n.classList)||[]).filter((function(e){return e.startsWith(a)})).map((function(e){return e.replace(a,"")}))[0];return o||null},rendered:!1}}},parseHTML:function(){return[{tag:"pre",preserveWhitespace:"full"}]},renderHTML:function(e){var t=e.node,n=e.HTMLAttributes;return["pre",fv(this.options.HTMLAttributes,n),["code",{class:t.attrs.language?this.options.languageClassPrefix+t.attrs.language:null},0]]},addCommands:function(){var e=this;return{setCodeBlock:function(t){return function(n){return n.commands.setNode(e.name,t)}},toggleCodeBlock:function(t){return function(n){return n.commands.toggleNode(e.name,"paragraph",t)}}}},addKeyboardShortcuts:function(){var e=this;return{"Mod-Alt-c":function(){return e.editor.commands.toggleCodeBlock()},Backspace:function(){var t=e.editor.state.selection,n=t.empty,r=t.$anchor,a=1===r.pos;return!(!n||r.parent.type.name!==e.name)&&(!(!a&&r.parent.textContent.length)&&e.editor.commands.clearNodes())},Enter:function(t){var n=t.editor;if(!e.options.exitOnTripleEnter)return!1;var r=n.state.selection,a=r.$from;if(!r.empty||a.parent.type!==e.type)return!1;var o=a.parentOffset===a.parent.nodeSize-2,i=a.parent.textContent.endsWith("\n\n");return!(!o||!i)&&n.chain().command((function(e){return e.tr.delete(a.pos-2,a.pos),!0})).exitCode().run()},ArrowDown:function(t){var n=t.editor;if(!e.options.exitOnArrowDown)return!1;var r=n.state,a=r.selection,o=r.doc,i=a.$from;if(!a.empty||i.parent.type!==e.type)return!1;if(!(i.parentOffset===i.parent.nodeSize-2))return!1;var s=i.after();return void 0!==s&&(!o.nodeAt(s)&&n.commands.exitCode())}}},addInputRules:function(){return[Ev({find:Gv,type:this.type,getAttributes:function(e){return{language:e[1]}}}),Ev({find:Kv,type:this.type,getAttributes:function(e){return{language:e[1]}}})]},addProseMirrorPlugins:function(){var e=this;return[new El({key:new Il("codeBlockVSCodeHandler"),props:{handlePaste:function(t,n){if(!n.clipboardData)return!1;if(e.editor.isActive(e.type.name))return!1;var r=n.clipboardData.getData("text/plain"),a=n.clipboardData.getData("vscode-editor-data"),o=a?JSON.parse(a):void 0,i=null===o||void 0===o?void 0:o.mode;if(!r||!i)return!1;var s=t.state.tr;return s.replaceSelectionWith(e.type.create({language:i})),s.setSelection(cl.near(s.doc.resolve(Math.max(0,s.selection.from-2)))),s.insertText(r.replace(/\r\n?/g,"\n")),s.setMeta("paste",!0),t.dispatch(s),!0}}})]}}),Yv=wv.create({name:"doc",topNode:!0,content:"block+"});var $v=function(e,t){var n=this;this.editorView=e,this.width=t.width||1,this.color=t.color||"black",this.class=t.class,this.cursorPos=null,this.element=null,this.timeout=null,this.handlers=["dragover","dragend","drop","dragleave"].map((function(t){var r=function(e){return n[t](e)};return e.dom.addEventListener(t,r),{name:t,handler:r}}))};$v.prototype.destroy=function(){var e=this;this.handlers.forEach((function(t){var n=t.name,r=t.handler;return e.editorView.dom.removeEventListener(n,r)}))},$v.prototype.update=function(e,t){null!=this.cursorPos&&t.doc!=e.state.doc&&(this.cursorPos>e.state.doc.content.size?this.setCursor(null):this.updateOverlay())},$v.prototype.setCursor=function(e){e!=this.cursorPos&&(this.cursorPos=e,null==e?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())},$v.prototype.updateOverlay=function(){var e,t=this.editorView.state.doc.resolve(this.cursorPos);if(!t.parent.inlineContent){var n=t.nodeBefore,r=t.nodeAfter;if(n||r){var a=this.editorView.nodeDOM(this.cursorPos-(n?n.nodeSize:0)).getBoundingClientRect(),o=n?a.bottom:a.top;n&&r&&(o=(o+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2),e={left:a.left,right:a.right,top:o-this.width/2,bottom:o+this.width/2}}}if(!e){var i=this.editorView.coordsAtPos(this.cursorPos);e={left:i.left-this.width/2,right:i.left+this.width/2,top:i.top,bottom:i.bottom}}var s,u,c=this.editorView.dom.offsetParent;if(this.element||(this.element=c.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none; background-color: "+this.color),!c||c==document.body&&"static"==getComputedStyle(c).position)s=-pageXOffset,u=-pageYOffset;else{var l=c.getBoundingClientRect();s=l.left-c.scrollLeft,u=l.top-c.scrollTop}this.element.style.left=e.left-s+"px",this.element.style.top=e.top-u+"px",this.element.style.width=e.right-e.left+"px",this.element.style.height=e.bottom-e.top+"px"},$v.prototype.scheduleRemoval=function(e){var t=this;clearTimeout(this.timeout),this.timeout=setTimeout((function(){return t.setCursor(null)}),e)},$v.prototype.dragover=function(e){if(this.editorView.editable){var t=this.editorView.posAtCoords({left:e.clientX,top:e.clientY}),n=t&&t.inside>=0&&this.editorView.state.doc.nodeAt(t.inside),r=n&&n.type.spec.disableDropCursor,a="function"==typeof r?r(this.editorView,t):r;if(t&&!a){var o=t.pos;if(this.editorView.dragging&&this.editorView.dragging.slice&&null==(o=qc(this.editorView.state.doc,o,this.editorView.dragging.slice)))return this.setCursor(null);this.setCursor(o),this.scheduleRemoval(5e3)}}},$v.prototype.dragend=function(){this.scheduleRemoval(20)},$v.prototype.drop=function(){this.scheduleRemoval(20)},$v.prototype.dragleave=function(e){e.target!=this.editorView.dom&&this.editorView.dom.contains(e.relatedTarget)||this.setCursor(null)};var Jv=bh.create({name:"dropCursor",addOptions:function(){return{color:"currentColor",width:1,class:null}},addProseMirrorPlugins:function(){return[(e=this.options,void 0===e&&(e={}),new El({view:function(t){return new $v(t,e)}}))];var e}}),Qv=function(e){function t(t){e.call(this,t,t)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.map=function(n,r){var a=n.resolve(r.map(this.head));return t.valid(a)?new t(a):e.near(a)},t.prototype.content=function(){return mu.empty},t.prototype.eq=function(e){return e instanceof t&&e.head==this.head},t.prototype.toJSON=function(){return{type:"gapcursor",pos:this.head}},t.fromJSON=function(e,n){if("number"!=typeof n.pos)throw new RangeError("Invalid input for GapCursor.fromJSON");return new t(e.resolve(n.pos))},t.prototype.getBookmark=function(){return new eg(this.anchor)},t.valid=function(e){var t=e.parent;if(t.isTextblock||!function(e){for(var t=e.depth;t>=0;t--){var n=e.index(t),r=e.node(t);if(0!=n)for(var a=r.child(n-1);;a=a.lastChild){if(0==a.childCount&&!a.inlineContent||a.isAtom||a.type.spec.isolating)return!0;if(a.inlineContent)return!1}else if(r.type.spec.isolating)return!0}return!0}(e)||!function(e){for(var t=e.depth;t>=0;t--){var n=e.indexAfter(t),r=e.node(t);if(n!=r.childCount)for(var a=r.child(n);;a=a.firstChild){if(0==a.childCount&&!a.inlineContent||a.isAtom||a.type.spec.isolating)return!0;if(a.inlineContent)return!1}else if(r.type.spec.isolating)return!0}return!0}(e))return!1;var n=t.type.spec.allowGapCursor;if(null!=n)return n;var r=t.contentMatchAt(e.index()).defaultType;return r&&r.isTextblock},t.findFrom=function(e,n,r){e:for(;;){if(!r&&t.valid(e))return e;for(var a=e.pos,o=null,i=e.depth;;i--){var s=e.node(i);if(n>0?e.indexAfter(i)<s.childCount:e.index(i)>0){o=s.child(n>0?e.indexAfter(i):e.index(i)-1);break}if(0==i)return null;a+=n;var u=e.doc.resolve(a);if(t.valid(u))return u}for(;;){var c=n>0?o.firstChild:o.lastChild;if(!c){if(o.isAtom&&!o.isText&&!fl.isSelectable(o)){e=e.doc.resolve(a+o.nodeSize*n),r=!1;continue e}break}o=c,a+=n;var l=e.doc.resolve(a);if(t.valid(l))return l}return null}},t}(il);Qv.prototype.visible=!1,il.jsonID("gapcursor",Qv);var eg=function(e){this.pos=e};eg.prototype.map=function(e){return new eg(e.map(this.pos))},eg.prototype.resolve=function(e){var t=e.resolve(this.pos);return Qv.valid(t)?new Qv(t):il.near(t)};var tg=ph({ArrowLeft:ng("horiz",-1),ArrowRight:ng("horiz",1),ArrowUp:ng("vert",-1),ArrowDown:ng("vert",1)});function ng(e,t){var n="vert"==e?t>0?"down":"up":t>0?"right":"left";return function(e,r,a){var o=e.selection,i=t>0?o.$to:o.$from,s=o.empty;if(o instanceof cl){if(!a.endOfTextblock(n)||0==i.depth)return!1;s=!1,i=e.doc.resolve(t>0?i.after():i.before())}var u=Qv.findFrom(i,t,s);return!!u&&(r&&r(e.tr.setSelection(new Qv(u))),!0)}}function rg(e,t,n){if(!e.editable)return!1;var r=e.state.doc.resolve(t);if(!Qv.valid(r))return!1;var a=e.posAtCoords({left:n.clientX,top:n.clientY}).inside;return!(a>-1&&fl.isSelectable(e.state.doc.nodeAt(a)))&&(e.dispatch(e.state.tr.setSelection(new Qv(r))),!0)}function ag(e,t){if("insertCompositionText"!=t.inputType||!(e.state.selection instanceof Qv))return!1;var n=e.state.selection.$from,r=n.parent.contentMatchAt(n.index()).findWrapping(e.state.schema.nodes.text);if(!r)return!1;for(var a=uu.empty,o=r.length-1;o>=0;o--)a=uu.from(r[o].createAndFill(null,a));var i=e.state.tr.replace(n.pos,n.pos,new mu(a,0,0));return i.setSelection(cl.near(i.doc.resolve(n.pos+1))),e.dispatch(i),!1}function og(e){if(!(e.selection instanceof Qv))return null;var t=document.createElement("div");return t.className="ProseMirror-gapcursor",jp.create(e.doc,[Dp.widget(e.selection.head,t,{key:"gapcursor"})])}var ig=bh.create({name:"gapCursor",addProseMirrorPlugins:function(){return[new El({props:{decorations:og,createSelectionBetween:function(e,t,n){if(t.pos==n.pos&&Qv.valid(n))return new Qv(n)},handleClick:rg,handleKeyDown:tg,handleDOMEvents:{beforeinput:ag}}})]},extendNodeSchema:function(e){var t;return{allowGapCursor:null!==(t=gh(yh(e,"allowGapCursor",{name:e.name,options:e.options,storage:e.storage})))&&void 0!==t?t:null}}}),sg=wv.create({name:"hardBreak",addOptions:function(){return{keepMarks:!0,HTMLAttributes:{}}},inline:!0,group:"inline",selectable:!1,parseHTML:function(){return[{tag:"br"}]},renderHTML:function(e){var t=e.HTMLAttributes;return["br",fv(this.options.HTMLAttributes,t)]},renderText:function(){return"\n"},addCommands:function(){var e=this;return{setHardBreak:function(){return function(t){var n=t.commands,r=t.chain,a=t.state,o=t.editor;return n.first([function(){return n.exitCode()},function(){return n.command((function(){var t=a.selection,n=a.storedMarks;if(t.$from.parent.type.spec.isolating)return!1;var i=e.options.keepMarks,s=o.extensionManager.splittableMarks,u=n||t.$to.parentOffset&&t.$from.marks();return r().insertContent({type:e.name}).command((function(e){var t=e.tr;if(e.dispatch&&u&&i){var n=u.filter((function(e){return s.includes(e.type.name)}));t.ensureMarks(n)}return!0})).run()}))}])}}}},addKeyboardShortcuts:function(){var e=this;return{"Mod-Enter":function(){return e.editor.commands.setHardBreak()},"Shift-Enter":function(){return e.editor.commands.setHardBreak()}}}}),ug=wv.create({name:"heading",addOptions:function(){return{levels:[1,2,3,4,5,6],HTMLAttributes:{}}},content:"inline*",group:"block",defining:!0,addAttributes:function(){return{level:{default:1,rendered:!1}}},parseHTML:function(){return this.options.levels.map((function(e){return{tag:"h".concat(e),attrs:{level:e}}}))},renderHTML:function(e){var t=e.node,n=e.HTMLAttributes,r=this.options.levels.includes(t.attrs.level)?t.attrs.level:this.options.levels[0];return["h".concat(r),fv(this.options.HTMLAttributes,n),0]},addCommands:function(){var e=this;return{setHeading:function(t){return function(n){var r=n.commands;return!!e.options.levels.includes(t.level)&&r.setNode(e.name,t)}},toggleHeading:function(t){return function(n){var r=n.commands;return!!e.options.levels.includes(t.level)&&r.toggleNode(e.name,"paragraph",t)}}}},addKeyboardShortcuts:function(){var e=this;return this.options.levels.reduce((function(t,n){return u(u({},t),i({},"Mod-Alt-".concat(n),(function(){return e.editor.commands.toggleHeading({level:n})})))}),{})},addInputRules:function(){var e=this;return this.options.levels.map((function(t){return Ev({find:new RegExp("^(#{1,".concat(t,"})\\s$")),type:e.type,getAttributes:{level:t}})}))}}),cg=200,lg=function(){};lg.prototype.append=function(e){return e.length?(e=lg.from(e),!this.length&&e||e.length<cg&&this.leafAppend(e)||this.length<cg&&e.leafPrepend(this)||this.appendInner(e)):this},lg.prototype.prepend=function(e){return e.length?lg.from(e).append(this):this},lg.prototype.appendInner=function(e){return new dg(this,e)},lg.prototype.slice=function(e,t){return void 0===e&&(e=0),void 0===t&&(t=this.length),e>=t?lg.empty:this.sliceInner(Math.max(0,e),Math.min(this.length,t))},lg.prototype.get=function(e){if(!(e<0||e>=this.length))return this.getInner(e)},lg.prototype.forEach=function(e,t,n){void 0===t&&(t=0),void 0===n&&(n=this.length),t<=n?this.forEachInner(e,t,n,0):this.forEachInvertedInner(e,t,n,0)},lg.prototype.map=function(e,t,n){void 0===t&&(t=0),void 0===n&&(n=this.length);var r=[];return this.forEach((function(t,n){return r.push(e(t,n))}),t,n),r},lg.from=function(e){return e instanceof lg?e:e&&e.length?new fg(e):lg.empty};var fg=function(e){function t(t){e.call(this),this.values=t}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={length:{configurable:!0},depth:{configurable:!0}};return t.prototype.flatten=function(){return this.values},t.prototype.sliceInner=function(e,n){return 0==e&&n==this.length?this:new t(this.values.slice(e,n))},t.prototype.getInner=function(e){return this.values[e]},t.prototype.forEachInner=function(e,t,n,r){for(var a=t;a<n;a++)if(!1===e(this.values[a],r+a))return!1},t.prototype.forEachInvertedInner=function(e,t,n,r){for(var a=t-1;a>=n;a--)if(!1===e(this.values[a],r+a))return!1},t.prototype.leafAppend=function(e){if(this.length+e.length<=cg)return new t(this.values.concat(e.flatten()))},t.prototype.leafPrepend=function(e){if(this.length+e.length<=cg)return new t(e.flatten().concat(this.values))},n.length.get=function(){return this.values.length},n.depth.get=function(){return 0},Object.defineProperties(t.prototype,n),t}(lg);lg.empty=new fg([]);var dg=function(e){function t(t,n){e.call(this),this.left=t,this.right=n,this.length=t.length+n.length,this.depth=Math.max(t.depth,n.depth)+1}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},t.prototype.getInner=function(e){return e<this.left.length?this.left.get(e):this.right.get(e-this.left.length)},t.prototype.forEachInner=function(e,t,n,r){var a=this.left.length;return!(t<a&&!1===this.left.forEachInner(e,t,Math.min(n,a),r))&&(!(n>a&&!1===this.right.forEachInner(e,Math.max(t-a,0),Math.min(this.length,n)-a,r+a))&&void 0)},t.prototype.forEachInvertedInner=function(e,t,n,r){var a=this.left.length;return!(t>a&&!1===this.right.forEachInvertedInner(e,t-a,Math.max(n,a)-a,r+a))&&(!(n<a&&!1===this.left.forEachInvertedInner(e,Math.min(t,a),n,r))&&void 0)},t.prototype.sliceInner=function(e,t){if(0==e&&t==this.length)return this;var n=this.left.length;return t<=n?this.left.slice(e,t):e>=n?this.right.slice(e-n,t-n):this.left.slice(e,n).append(this.right.slice(0,t-n))},t.prototype.leafAppend=function(e){var n=this.right.leafAppend(e);if(n)return new t(this.left,n)},t.prototype.leafPrepend=function(e){var n=this.left.leafPrepend(e);if(n)return new t(n,this.right)},t.prototype.appendInner=function(e){return this.left.depth>=Math.max(this.right.depth,e.depth)+1?new t(this.left,new t(this.right,e)):new t(this,e)},t}(lg),pg=lg,hg=function(e,t){this.items=e,this.eventCount=t};hg.prototype.popEvent=function(e,t){var n=this;if(0==this.eventCount)return null;for(var r,a,o=this.items.length;;o--){if(this.items.get(o-1).selection){--o;break}}t&&(r=this.remapping(o,this.items.length),a=r.maps.length);var i,s,u=e.tr,c=[],l=[];return this.items.forEach((function(e,t){if(!e.step)return r||(r=n.remapping(o,t+1),a=r.maps.length),a--,void l.push(e);if(r){l.push(new mg(e.map));var f,d=e.step.map(r.slice(a));d&&u.maybeStep(d).doc&&(f=u.mapping.maps[u.mapping.maps.length-1],c.push(new mg(f,null,null,c.length+l.length))),a--,f&&r.appendMap(f,a)}else u.maybeStep(e.step);return e.selection?(i=r?e.selection.map(r.slice(a)):e.selection,s=new hg(n.items.slice(0,o).append(l.reverse().concat(c)),n.eventCount-1),!1):void 0}),this.items.length,0),{remaining:s,transform:u,selection:i}},hg.prototype.addTransform=function(e,t,n,r){for(var a=[],o=this.eventCount,i=this.items,s=!r&&i.length?i.get(i.length-1):null,u=0;u<e.steps.length;u++){var c,l=e.steps[u].invert(e.docs[u]),f=new mg(e.mapping.maps[u],l,t);(c=s&&s.merge(f))&&(f=c,u?a.pop():i=i.slice(0,i.length-1)),a.push(f),t&&(o++,t=null),r||(s=f)}var d=o-n.depth;return d>gg&&(i=function(e,t){var n;return e.forEach((function(e,r){if(e.selection&&0==t--)return n=r,!1})),e.slice(n)}(i,d),o-=d),new hg(i.append(a),o)},hg.prototype.remapping=function(e,t){var n=new Ec;return this.items.forEach((function(t,r){var a=null!=t.mirrorOffset&&r-t.mirrorOffset>=e?n.maps.length-t.mirrorOffset:null;n.appendMap(t.map,a)}),e,t),n},hg.prototype.addMaps=function(e){return 0==this.eventCount?this:new hg(this.items.append(e.map((function(e){return new mg(e)}))),this.eventCount)},hg.prototype.rebased=function(e,t){if(!this.eventCount)return this;var n=[],r=Math.max(0,this.items.length-t),a=e.mapping,o=e.steps.length,i=this.eventCount;this.items.forEach((function(e){e.selection&&i--}),r);var s=t;this.items.forEach((function(t){var r=a.getMirror(--s);if(null!=r){o=Math.min(o,r);var u=a.maps[r];if(t.step){var c=e.steps[r].invert(e.docs[r]),l=t.selection&&t.selection.map(a.slice(s+1,r));l&&i++,n.push(new mg(u,c,l))}else n.push(new mg(u))}}),r);for(var u=[],c=t;c<o;c++)u.push(new mg(a.maps[c]));var l=this.items.slice(0,r).append(u).append(n),f=new hg(l,i);return f.emptyItemCount()>500&&(f=f.compress(this.items.length-n.length)),f},hg.prototype.emptyItemCount=function(){var e=0;return this.items.forEach((function(t){t.step||e++})),e},hg.prototype.compress=function(e){void 0===e&&(e=this.items.length);var t=this.remapping(0,e),n=t.maps.length,r=[],a=0;return this.items.forEach((function(o,i){if(i>=e)r.push(o),o.selection&&a++;else if(o.step){var s=o.step.map(t.slice(n)),u=s&&s.getMap();if(n--,u&&t.appendMap(u,n),s){var c=o.selection&&o.selection.map(t.slice(n));c&&a++;var l,f=new mg(u.invert(),s,c),d=r.length-1;(l=r.length&&r[d].merge(f))?r[d]=l:r.push(f)}}else o.map&&n--}),this.items.length,0),new hg(pg.from(r.reverse()),a)},hg.empty=new hg(pg.empty,0);var mg=function(e,t,n,r){this.map=e,this.step=t,this.selection=n,this.mirrorOffset=r};mg.prototype.merge=function(e){if(this.step&&e.step&&!e.selection){var t=e.step.merge(this.step);if(t)return new mg(t.getMap().invert(),t,this.selection)}};var vg=function(e,t,n,r){this.done=e,this.undone=t,this.prevRanges=n,this.prevTime=r},gg=20;function yg(e){var t=[];return e.forEach((function(e,n,r,a){return t.push(r,a)})),t}function bg(e,t){if(!e)return null;for(var n=[],r=0;r<e.length;r+=2){var a=t.map(e[r],1),o=t.map(e[r+1],-1);a<=o&&n.push(a,o)}return n}function xg(e,t,n,r){var a=Sg(t),o=_g.get(t).spec.config,i=(r?e.undone:e.done).popEvent(t,a);if(i){var s=i.selection.resolve(i.transform.doc),u=(r?e.done:e.undone).addTransform(i.transform,t.selection.getBookmark(),o,a),c=new vg(r?u:i.remaining,r?i.remaining:u,null,0);n(i.transform.setSelection(s).setMeta(_g,{redo:r,historyState:c}).scrollIntoView())}}var wg=!1,kg=null;function Sg(e){var t=e.plugins;if(kg!=t){wg=!1,kg=t;for(var n=0;n<t.length;n++)if(t[n].spec.historyPreserveItems){wg=!0;break}}return wg}var _g=new Il("history"),Ng=new Il("closeHistory");function Eg(e){return e={depth:e&&e.depth||100,newGroupDelay:e&&e.newGroupDelay||500},new El({key:_g,state:{init:function(){return new vg(hg.empty,hg.empty,null,0)},apply:function(t,n,r){return function(e,t,n,r){var a,o=n.getMeta(_g);if(o)return o.historyState;n.getMeta(Ng)&&(e=new vg(e.done,e.undone,null,0));var i=n.getMeta("appendedTransaction");if(0==n.steps.length)return e;if(i&&i.getMeta(_g))return i.getMeta(_g).redo?new vg(e.done.addTransform(n,null,r,Sg(t)),e.undone,yg(n.mapping.maps[n.steps.length-1]),e.prevTime):new vg(e.done,e.undone.addTransform(n,null,r,Sg(t)),null,e.prevTime);if(!1===n.getMeta("addToHistory")||i&&!1===i.getMeta("addToHistory"))return(a=n.getMeta("rebased"))?new vg(e.done.rebased(n,a),e.undone.rebased(n,a),bg(e.prevRanges,n.mapping),e.prevTime):new vg(e.done.addMaps(n.mapping.maps),e.undone.addMaps(n.mapping.maps),bg(e.prevRanges,n.mapping),e.prevTime);var s=0==e.prevTime||!i&&(e.prevTime<(n.time||0)-r.newGroupDelay||!function(e,t){if(!t)return!1;if(!e.docChanged)return!0;var n=!1;return e.mapping.maps[0].forEach((function(e,r){for(var a=0;a<t.length;a+=2)e<=t[a+1]&&r>=t[a]&&(n=!0)})),n}(n,e.prevRanges)),u=i?bg(e.prevRanges,n.mapping):yg(n.mapping.maps[n.steps.length-1]);return new vg(e.done.addTransform(n,s?t.selection.getBookmark():null,r,Sg(t)),hg.empty,u,n.time)}(n,r,t,e)}},config:e,props:{handleDOMEvents:{beforeinput:function(e,t){var n="historyUndo"==t.inputType?Cg(e.state,e.dispatch):"historyRedo"==t.inputType&&Tg(e.state,e.dispatch);return n&&t.preventDefault(),n}}}})}function Cg(e,t){var n=_g.getState(e);return!(!n||0==n.done.eventCount)&&(t&&xg(n,e,t,!1),!0)}function Tg(e,t){var n=_g.getState(e);return!(!n||0==n.undone.eventCount)&&(t&&xg(n,e,t,!0),!0)}var Ig=bh.create({name:"history",addOptions:function(){return{depth:100,newGroupDelay:500}},addCommands:function(){return{undo:function(){return function(e){return Cg(e.state,e.dispatch)}},redo:function(){return function(e){return Tg(e.state,e.dispatch)}}}},addProseMirrorPlugins:function(){return[Eg(this.options)]},addKeyboardShortcuts:function(){var e=this;return{"Mod-z":function(){return e.editor.commands.undo()},"Mod-y":function(){return e.editor.commands.redo()},"Shift-Mod-z":function(){return e.editor.commands.redo()},"Mod-\u044f":function(){return e.editor.commands.undo()},"Shift-Mod-\u044f":function(){return e.editor.commands.redo()}}}}),Og=wv.create({name:"horizontalRule",addOptions:function(){return{HTMLAttributes:{}}},group:"block",parseHTML:function(){return[{tag:"hr"}]},renderHTML:function(e){var t=e.HTMLAttributes;return["hr",fv(this.options.HTMLAttributes,t)]},addCommands:function(){var e=this;return{setHorizontalRule:function(){return function(t){return(0,t.chain)().insertContent({type:e.name}).command((function(e){var t,n=e.tr;if(e.dispatch){var r=n.selection.$to,a=r.end();if(r.nodeAfter)n.setSelection(cl.create(n.doc,r.pos));else{var o=null===(t=r.parent.type.contentMatch.defaultType)||void 0===t?void 0:t.create();o&&(n.insert(a,o),n.setSelection(cl.create(n.doc,a)))}n.scrollIntoView()}return!0})).run()}}}},addInputRules:function(){return[Sv({find:/^(?:---|\u2014-|___\s|\*\*\*\s)$/,type:this.type})]}}),Ag=/(?:^|\s)((?:\*)((?:[^*]+))(?:\*))$/,Dg=/(?:^|\s)((?:\*)((?:[^*]+))(?:\*))/g,Mg=/(?:^|\s)((?:_)((?:[^_]+))(?:_))$/,Rg=/(?:^|\s)((?:_)((?:[^_]+))(?:_))/g,Pg=kv.create({name:"italic",addOptions:function(){return{HTMLAttributes:{}}},parseHTML:function(){return[{tag:"em"},{tag:"i",getAttrs:function(e){return"normal"!==e.style.fontStyle&&null}},{style:"font-style=italic"}]},renderHTML:function(e){var t=e.HTMLAttributes;return["em",fv(this.options.HTMLAttributes,t),0]},addCommands:function(){var e=this;return{setItalic:function(){return function(t){return t.commands.setMark(e.name)}},toggleItalic:function(){return function(t){return t.commands.toggleMark(e.name)}},unsetItalic:function(){return function(t){return t.commands.unsetMark(e.name)}}}},addKeyboardShortcuts:function(){var e=this;return{"Mod-i":function(){return e.editor.commands.toggleItalic()},"Mod-I":function(){return e.editor.commands.toggleItalic()}}},addInputRules:function(){return[Nv({find:Ag,type:this.type}),Nv({find:Mg,type:this.type})]},addPasteRules:function(){return[Tv({find:Dg,type:this.type}),Tv({find:Rg,type:this.type})]}}),jg=wv.create({name:"listItem",addOptions:function(){return{HTMLAttributes:{}}},content:"paragraph block*",defining:!0,parseHTML:function(){return[{tag:"li"}]},renderHTML:function(e){var t=e.HTMLAttributes;return["li",fv(this.options.HTMLAttributes,t),0]},addKeyboardShortcuts:function(){var e=this;return{Enter:function(){return e.editor.commands.splitListItem(e.name)},Tab:function(){return e.editor.commands.sinkListItem(e.name)},"Shift-Tab":function(){return e.editor.commands.liftListItem(e.name)}}}});function Fg(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}function Lg(e,t){if(null==e)return{};var n,r,a=Fg(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var Bg=["start"],zg=/^(\d+)\.\s$/,Zg=wv.create({name:"orderedList",addOptions:function(){return{itemTypeName:"listItem",HTMLAttributes:{}}},group:"block list",content:function(){return"".concat(this.options.itemTypeName,"+")},addAttributes:function(){return{start:{default:1,parseHTML:function(e){return e.hasAttribute("start")?parseInt(e.getAttribute("start")||"",10):1}}}},parseHTML:function(){return[{tag:"ol"}]},renderHTML:function(e){var t=e.HTMLAttributes,n=t.start,r=Lg(t,Bg);return 1===n?["ol",fv(this.options.HTMLAttributes,r),0]:["ol",fv(this.options.HTMLAttributes,t),0]},addCommands:function(){var e=this;return{toggleOrderedList:function(){return function(t){return t.commands.toggleList(e.name,e.options.itemTypeName)}}}},addKeyboardShortcuts:function(){var e=this;return{"Mod-Shift-7":function(){return e.editor.commands.toggleOrderedList()}}},addInputRules:function(){return[Cv({find:zg,type:this.type,getAttributes:function(e){return{start:+e[1]}},joinPredicate:function(e,t){return t.childCount+t.attrs.start===+e[1]}})]}}),Vg=wv.create({name:"paragraph",priority:1e3,addOptions:function(){return{HTMLAttributes:{}}},group:"block",content:"inline*",parseHTML:function(){return[{tag:"p"}]},renderHTML:function(e){var t=e.HTMLAttributes;return["p",fv(this.options.HTMLAttributes,t),0]},addCommands:function(){var e=this;return{setParagraph:function(){return function(t){return t.commands.setNode(e.name)}}}},addKeyboardShortcuts:function(){var e=this;return{"Mod-Alt-0":function(){return e.editor.commands.setParagraph()}}}}),Ug=/(?:^|\s)((?:~~)((?:[^~]+))(?:~~))$/,qg=/(?:^|\s)((?:~~)((?:[^~]+))(?:~~))/g,Wg=kv.create({name:"strike",addOptions:function(){return{HTMLAttributes:{}}},parseHTML:function(){return[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:function(e){return!!e.includes("line-through")&&{}}}]},renderHTML:function(e){var t=e.HTMLAttributes;return["s",fv(this.options.HTMLAttributes,t),0]},addCommands:function(){var e=this;return{setStrike:function(){return function(t){return t.commands.setMark(e.name)}},toggleStrike:function(){return function(t){return t.commands.toggleMark(e.name)}},unsetStrike:function(){return function(t){return t.commands.unsetMark(e.name)}}}},addKeyboardShortcuts:function(){var e=this;return{"Mod-Shift-x":function(){return e.editor.commands.toggleStrike()}}},addInputRules:function(){return[Nv({find:Ug,type:this.type})]},addPasteRules:function(){return[Tv({find:qg,type:this.type})]}}),Hg=wv.create({name:"text",group:"inline"}),Gg=bh.create({name:"starterKit",addExtensions:function(){var e,t,n,r,a,o,i,s,u,c,l,f,d,p,h,m,v,g,y=[];return!1!==this.options.blockquote&&y.push(jv.configure(null===(e=this.options)||void 0===e?void 0:e.blockquote)),!1!==this.options.bold&&y.push(Zv.configure(null===(t=this.options)||void 0===t?void 0:t.bold)),!1!==this.options.bulletList&&y.push(Uv.configure(null===(n=this.options)||void 0===n?void 0:n.bulletList)),!1!==this.options.code&&y.push(Hv.configure(null===(r=this.options)||void 0===r?void 0:r.code)),!1!==this.options.codeBlock&&y.push(Xv.configure(null===(a=this.options)||void 0===a?void 0:a.codeBlock)),!1!==this.options.document&&y.push(Yv.configure(null===(o=this.options)||void 0===o?void 0:o.document)),!1!==this.options.dropcursor&&y.push(Jv.configure(null===(i=this.options)||void 0===i?void 0:i.dropcursor)),!1!==this.options.gapcursor&&y.push(ig.configure(null===(s=this.options)||void 0===s?void 0:s.gapcursor)),!1!==this.options.hardBreak&&y.push(sg.configure(null===(u=this.options)||void 0===u?void 0:u.hardBreak)),!1!==this.options.heading&&y.push(ug.configure(null===(c=this.options)||void 0===c?void 0:c.heading)),!1!==this.options.history&&y.push(Ig.configure(null===(l=this.options)||void 0===l?void 0:l.history)),!1!==this.options.horizontalRule&&y.push(Og.configure(null===(f=this.options)||void 0===f?void 0:f.horizontalRule)),!1!==this.options.italic&&y.push(Pg.configure(null===(d=this.options)||void 0===d?void 0:d.italic)),!1!==this.options.listItem&&y.push(jg.configure(null===(p=this.options)||void 0===p?void 0:p.listItem)),!1!==this.options.orderedList&&y.push(Zg.configure(null===(h=this.options)||void 0===h?void 0:h.orderedList)),!1!==this.options.paragraph&&y.push(Vg.configure(null===(m=this.options)||void 0===m?void 0:m.paragraph)),!1!==this.options.strike&&y.push(Wg.configure(null===(v=this.options)||void 0===v?void 0:v.strike)),!1!==this.options.text&&y.push(Hg.configure(null===(g=this.options)||void 0===g?void 0:g.text)),y}}),Kg=1,Xg=2,Yg=3,$g=4,Jg={1:"Text",2:"Image",3:"Shape",4:"Video"},Qg=function(e){var t=e.zone;return(0,re.jsx)("img",{id:"image-".concat(t.id),onLoad:function(e){return console.log(t.id,JSON.stringify({height:e.target.naturalHeight,width:e.target.naturalWidth}))},src:t.content.src,alt:"".concat(t.id),crossOrigin:"anonymous",className:"select-none w-full h-full object-center object-cover bg-white "})},ey=function(t){var n=t.zone,r=t.index,a=void 0===r?1:r,o=t.containerId,i=(t.onChange,t.onClick),s=void 0===i?function(){}:i,u=t.onMouseDown,c=void 0===u?function(){}:u,l=t.isSelected,f=void 0!==l&&l,d=(t.isHovered,t.isDisabled),p=void 0===d||d,h=t.isPlaying,m=void 0===h||h,v=t.adjusmentWidth,g=void 0===v?0:v,y=t.isPreview,b=void 0!==y&&y,x=function(e){return g/1920*e},w=(0,e.useMemo)((function(){return n.type===Kg&&n.content.content?function(e,t){var n=Iv(t);return rv(ju.fromJSON(n,e).content,n)}(n.content,[Gg.configure({Blockquote:!1,BulletList:!1,CodeBlock:!1,HardBreak:!1,Heading:!1,HorizontalRule:!1,ListItem:!1,OrderedList:!1,Paragraph:!1,Text:!1}),Rv.configure({containerId:o}),Av,Dv]):""}),[n,g]);return(0,re.jsx)(re.Fragment,{children:b?(0,re.jsxs)("div",{id:"".concat(Jg[n.type],"-").concat(n.id),style:{position:"absolute",left:x(n.finalPosition.left),top:x(n.finalPosition.top),width:x(n.finalPosition.width),height:x(n.finalPosition.height),backgroundColor:n.type===Yg&&n.content.color?n.content.color:null},className:"".concat(f?"bg-blue-400":m&&n.type===Yg||m&&n.type===Kg?"":"bg-gray-400 group-hover:bg-blue-200"," select-none overflow-hidden  w-full h-full pointer-events-none flex flex-row ").concat(n.type===Kg?"":"items-center justify-center"),children:[n.type===Kg&&(0,re.jsx)("div",{className:"text-left ProseMirror absolute w-full mx-auto focus:outline-none",style:{fontSize:"".concat(x(28),"px")},dangerouslySetInnerHTML:{__html:w.replace("<p>","").replace("</p>","")}}),n.type===Xg&&(0,re.jsx)(Qg,{zone:n}),n.type===$g&&(0,re.jsx)(j,{className:"h-12 w-12 text-white"},"zones-".concat(n.id,"-icon"))]}):(0,re.jsx)("button",{disabled:p,onClick:function(e){0===e.button&&(e.preventDefault(),e.stopPropagation(),s(e))},onMouseDown:function(e){0===e.button&&(e.preventDefault(),e.stopPropagation(),c(n))},style:{position:"absolute",left:x(n.finalPosition.left),top:x(n.finalPosition.top),width:x(n.finalPosition.width),height:x(n.finalPosition.height),zIndex:a+50},className:"".concat(p?"pointer-events-none":"pointer-events-auto"," select-none ").concat(m?"":"rounded"," group flex flex-row items-center justify-center ").concat(m?"":f?"border border-blue-500":"border border-gray-200 hover:border-blue-400"),children:(0,re.jsxs)("div",{id:"".concat(Jg[n.type],"-").concat(n.id),className:"".concat(m&&n.type===Yg?"":m&&n.type===Kg?"bg-gray-200":n.type===Kg||n.type===Yg?"":"bg-gray-400 group-hover:bg-blue-200"," overflow-hidden ").concat(m?"":"rounded-sm","  w-full h-full pointer-events-none flex flex-row ").concat(n.type===Kg?"":"items-center justify-center"),style:{backgroundColor:n.type===Yg&&n.content.color?n.content.color:null},children:[n.type===Kg&&(0,re.jsx)("div",{className:"text-left ProseMirror absolute w-full mx-auto focus:outline-none",style:{},dangerouslySetInnerHTML:{__html:w.replace("<p>","").replace("</p>","")}}),n.type===Xg&&(0,re.jsx)(Qg,{zone:n}),n.type===$g&&(0,re.jsx)(j,{className:"h-12 w-12 text-white"},"zones-".concat(n.id,"-icon"))]})},"zones-".concat(n.id))})};function ty(e){if(null==e)return window;if("[object Window]"!==e.toString()){var t=e.ownerDocument;return t&&t.defaultView||window}return e}function ny(e){return e instanceof ty(e).Element||e instanceof Element}function ry(e){return e instanceof ty(e).HTMLElement||e instanceof HTMLElement}function ay(e){return"undefined"!==typeof ShadowRoot&&(e instanceof ty(e).ShadowRoot||e instanceof ShadowRoot)}var oy=Math.max,iy=Math.min,sy=Math.round;function uy(e,t){void 0===t&&(t=!1);var n=e.getBoundingClientRect(),r=1,a=1;if(ry(e)&&t){var o=e.offsetHeight,i=e.offsetWidth;i>0&&(r=sy(n.width)/i||1),o>0&&(a=sy(n.height)/o||1)}return{width:n.width/r,height:n.height/a,top:n.top/a,right:n.right/r,bottom:n.bottom/a,left:n.left/r,x:n.left/r,y:n.top/a}}function cy(e){var t=ty(e);return{scrollLeft:t.pageXOffset,scrollTop:t.pageYOffset}}function ly(e){return e?(e.nodeName||"").toLowerCase():null}function fy(e){return((ny(e)?e.ownerDocument:e.document)||window.document).documentElement}function dy(e){return uy(fy(e)).left+cy(e).scrollLeft}function py(e){return ty(e).getComputedStyle(e)}function hy(e){var t=py(e),n=t.overflow,r=t.overflowX,a=t.overflowY;return/auto|scroll|overlay|hidden/.test(n+a+r)}function my(e,t,n){void 0===n&&(n=!1);var r=ry(t),a=ry(t)&&function(e){var t=e.getBoundingClientRect(),n=sy(t.width)/e.offsetWidth||1,r=sy(t.height)/e.offsetHeight||1;return 1!==n||1!==r}(t),o=fy(t),i=uy(e,a),s={scrollLeft:0,scrollTop:0},u={x:0,y:0};return(r||!r&&!n)&&(("body"!==ly(t)||hy(o))&&(s=function(e){return e!==ty(e)&&ry(e)?{scrollLeft:(t=e).scrollLeft,scrollTop:t.scrollTop}:cy(e);var t}(t)),ry(t)?((u=uy(t,!0)).x+=t.clientLeft,u.y+=t.clientTop):o&&(u.x=dy(o))),{x:i.left+s.scrollLeft-u.x,y:i.top+s.scrollTop-u.y,width:i.width,height:i.height}}function vy(e){var t=uy(e),n=e.offsetWidth,r=e.offsetHeight;return Math.abs(t.width-n)<=1&&(n=t.width),Math.abs(t.height-r)<=1&&(r=t.height),{x:e.offsetLeft,y:e.offsetTop,width:n,height:r}}function gy(e){return"html"===ly(e)?e:e.assignedSlot||e.parentNode||(ay(e)?e.host:null)||fy(e)}function yy(e){return["html","body","#document"].indexOf(ly(e))>=0?e.ownerDocument.body:ry(e)&&hy(e)?e:yy(gy(e))}function by(e,t){var n;void 0===t&&(t=[]);var r=yy(e),a=r===(null==(n=e.ownerDocument)?void 0:n.body),o=ty(r),i=a?[o].concat(o.visualViewport||[],hy(r)?r:[]):r,s=t.concat(i);return a?s:s.concat(by(gy(i)))}function xy(e){return["table","td","th"].indexOf(ly(e))>=0}function wy(e){return ry(e)&&"fixed"!==py(e).position?e.offsetParent:null}function ky(e){for(var t=ty(e),n=wy(e);n&&xy(n)&&"static"===py(n).position;)n=wy(n);return n&&("html"===ly(n)||"body"===ly(n)&&"static"===py(n).position)?t:n||function(e){var t=-1!==navigator.userAgent.toLowerCase().indexOf("firefox");if(-1!==navigator.userAgent.indexOf("Trident")&&ry(e)&&"fixed"===py(e).position)return null;for(var n=gy(e);ry(n)&&["html","body"].indexOf(ly(n))<0;){var r=py(n);if("none"!==r.transform||"none"!==r.perspective||"paint"===r.contain||-1!==["transform","perspective"].indexOf(r.willChange)||t&&"filter"===r.willChange||t&&r.filter&&"none"!==r.filter)return n;n=n.parentNode}return null}(e)||t}var Sy="top",_y="bottom",Ny="right",Ey="left",Cy="auto",Ty=[Sy,_y,Ny,Ey],Iy="start",Oy="end",Ay="viewport",Dy="popper",My=Ty.reduce((function(e,t){return e.concat([t+"-"+Iy,t+"-"+Oy])}),[]),Ry=[].concat(Ty,[Cy]).reduce((function(e,t){return e.concat([t,t+"-"+Iy,t+"-"+Oy])}),[]),Py=["beforeRead","read","afterRead","beforeMain","main","afterMain","beforeWrite","write","afterWrite"];function jy(e){var t=new Map,n=new Set,r=[];function a(e){n.add(e.name),[].concat(e.requires||[],e.requiresIfExists||[]).forEach((function(e){if(!n.has(e)){var r=t.get(e);r&&a(r)}})),r.push(e)}return e.forEach((function(e){t.set(e.name,e)})),e.forEach((function(e){n.has(e.name)||a(e)})),r}function Fy(e){var t;return function(){return t||(t=new Promise((function(n){Promise.resolve().then((function(){t=void 0,n(e())}))}))),t}}var Ly={placement:"bottom",modifiers:[],strategy:"absolute"};function By(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return!t.some((function(e){return!(e&&"function"===typeof e.getBoundingClientRect)}))}function zy(e){void 0===e&&(e={});var t=e,n=t.defaultModifiers,r=void 0===n?[]:n,a=t.defaultOptions,o=void 0===a?Ly:a;return function(e,t,n){void 0===n&&(n=o);var a={placement:"bottom",orderedModifiers:[],options:Object.assign({},Ly,o),modifiersData:{},elements:{reference:e,popper:t},attributes:{},styles:{}},i=[],s=!1,u={state:a,setOptions:function(n){var s="function"===typeof n?n(a.options):n;c(),a.options=Object.assign({},o,a.options,s),a.scrollParents={reference:ny(e)?by(e):e.contextElement?by(e.contextElement):[],popper:by(t)};var l=function(e){var t=jy(e);return Py.reduce((function(e,n){return e.concat(t.filter((function(e){return e.phase===n})))}),[])}(function(e){var t=e.reduce((function(e,t){var n=e[t.name];return e[t.name]=n?Object.assign({},n,t,{options:Object.assign({},n.options,t.options),data:Object.assign({},n.data,t.data)}):t,e}),{});return Object.keys(t).map((function(e){return t[e]}))}([].concat(r,a.options.modifiers)));return a.orderedModifiers=l.filter((function(e){return e.enabled})),a.orderedModifiers.forEach((function(e){var t=e.name,n=e.options,r=void 0===n?{}:n,o=e.effect;if("function"===typeof o){var s=o({state:a,name:t,instance:u,options:r}),c=function(){};i.push(s||c)}})),u.update()},forceUpdate:function(){if(!s){var e=a.elements,t=e.reference,n=e.popper;if(By(t,n)){a.rects={reference:my(t,ky(n),"fixed"===a.options.strategy),popper:vy(n)},a.reset=!1,a.placement=a.options.placement,a.orderedModifiers.forEach((function(e){return a.modifiersData[e.name]=Object.assign({},e.data)}));for(var r=0;r<a.orderedModifiers.length;r++)if(!0!==a.reset){var o=a.orderedModifiers[r],i=o.fn,c=o.options,l=void 0===c?{}:c,f=o.name;"function"===typeof i&&(a=i({state:a,options:l,name:f,instance:u})||a)}else a.reset=!1,r=-1}}},update:Fy((function(){return new Promise((function(e){u.forceUpdate(),e(a)}))})),destroy:function(){c(),s=!0}};if(!By(e,t))return u;function c(){i.forEach((function(e){return e()})),i=[]}return u.setOptions(n).then((function(e){!s&&n.onFirstUpdate&&n.onFirstUpdate(e)})),u}}var Zy={passive:!0};var Vy={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:function(e){var t=e.state,n=e.instance,r=e.options,a=r.scroll,o=void 0===a||a,i=r.resize,s=void 0===i||i,u=ty(t.elements.popper),c=[].concat(t.scrollParents.reference,t.scrollParents.popper);return o&&c.forEach((function(e){e.addEventListener("scroll",n.update,Zy)})),s&&u.addEventListener("resize",n.update,Zy),function(){o&&c.forEach((function(e){e.removeEventListener("scroll",n.update,Zy)})),s&&u.removeEventListener("resize",n.update,Zy)}},data:{}};function Uy(e){return e.split("-")[0]}function qy(e){return e.split("-")[1]}function Wy(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function Hy(e){var t,n=e.reference,r=e.element,a=e.placement,o=a?Uy(a):null,i=a?qy(a):null,s=n.x+n.width/2-r.width/2,u=n.y+n.height/2-r.height/2;switch(o){case Sy:t={x:s,y:n.y-r.height};break;case _y:t={x:s,y:n.y+n.height};break;case Ny:t={x:n.x+n.width,y:u};break;case Ey:t={x:n.x-r.width,y:u};break;default:t={x:n.x,y:n.y}}var c=o?Wy(o):null;if(null!=c){var l="y"===c?"height":"width";switch(i){case Iy:t[c]=t[c]-(n[l]/2-r[l]/2);break;case Oy:t[c]=t[c]+(n[l]/2-r[l]/2)}}return t}var Gy={name:"popperOffsets",enabled:!0,phase:"read",fn:function(e){var t=e.state,n=e.name;t.modifiersData[n]=Hy({reference:t.rects.reference,element:t.rects.popper,strategy:"absolute",placement:t.placement})},data:{}},Ky={top:"auto",right:"auto",bottom:"auto",left:"auto"};function Xy(e){var t,n=e.popper,r=e.popperRect,a=e.placement,o=e.variation,i=e.offsets,s=e.position,u=e.gpuAcceleration,c=e.adaptive,l=e.roundOffsets,f=e.isFixed,d=i.x,p=void 0===d?0:d,h=i.y,m=void 0===h?0:h,v="function"===typeof l?l({x:p,y:m}):{x:p,y:m};p=v.x,m=v.y;var g=i.hasOwnProperty("x"),y=i.hasOwnProperty("y"),b=Ey,x=Sy,w=window;if(c){var k=ky(n),S="clientHeight",_="clientWidth";if(k===ty(n)&&"static"!==py(k=fy(n)).position&&"absolute"===s&&(S="scrollHeight",_="scrollWidth"),k=k,a===Sy||(a===Ey||a===Ny)&&o===Oy)x=_y,m-=(f&&w.visualViewport?w.visualViewport.height:k[S])-r.height,m*=u?1:-1;if(a===Ey||(a===Sy||a===_y)&&o===Oy)b=Ny,p-=(f&&w.visualViewport?w.visualViewport.width:k[_])-r.width,p*=u?1:-1}var N,E=Object.assign({position:s},c&&Ky),C=!0===l?function(e){var t=e.x,n=e.y,r=window.devicePixelRatio||1;return{x:sy(t*r)/r||0,y:sy(n*r)/r||0}}({x:p,y:m}):{x:p,y:m};return p=C.x,m=C.y,u?Object.assign({},E,((N={})[x]=y?"0":"",N[b]=g?"0":"",N.transform=(w.devicePixelRatio||1)<=1?"translate("+p+"px, "+m+"px)":"translate3d("+p+"px, "+m+"px, 0)",N)):Object.assign({},E,((t={})[x]=y?m+"px":"",t[b]=g?p+"px":"",t.transform="",t))}var Yy={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:function(e){var t=e.state,n=e.options,r=n.gpuAcceleration,a=void 0===r||r,o=n.adaptive,i=void 0===o||o,s=n.roundOffsets,u=void 0===s||s,c={placement:Uy(t.placement),variation:qy(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:a,isFixed:"fixed"===t.options.strategy};null!=t.modifiersData.popperOffsets&&(t.styles.popper=Object.assign({},t.styles.popper,Xy(Object.assign({},c,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:i,roundOffsets:u})))),null!=t.modifiersData.arrow&&(t.styles.arrow=Object.assign({},t.styles.arrow,Xy(Object.assign({},c,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:u})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})},data:{}};var $y={name:"applyStyles",enabled:!0,phase:"write",fn:function(e){var t=e.state;Object.keys(t.elements).forEach((function(e){var n=t.styles[e]||{},r=t.attributes[e]||{},a=t.elements[e];ry(a)&&ly(a)&&(Object.assign(a.style,n),Object.keys(r).forEach((function(e){var t=r[e];!1===t?a.removeAttribute(e):a.setAttribute(e,!0===t?"":t)})))}))},effect:function(e){var t=e.state,n={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,n.popper),t.styles=n,t.elements.arrow&&Object.assign(t.elements.arrow.style,n.arrow),function(){Object.keys(t.elements).forEach((function(e){var r=t.elements[e],a=t.attributes[e]||{},o=Object.keys(t.styles.hasOwnProperty(e)?t.styles[e]:n[e]).reduce((function(e,t){return e[t]="",e}),{});ry(r)&&ly(r)&&(Object.assign(r.style,o),Object.keys(a).forEach((function(e){r.removeAttribute(e)})))}))}},requires:["computeStyles"]};var Jy={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:function(e){var t=e.state,n=e.options,r=e.name,a=n.offset,o=void 0===a?[0,0]:a,i=Ry.reduce((function(e,n){return e[n]=function(e,t,n){var r=Uy(e),a=[Ey,Sy].indexOf(r)>=0?-1:1,o="function"===typeof n?n(Object.assign({},t,{placement:e})):n,i=o[0],s=o[1];return i=i||0,s=(s||0)*a,[Ey,Ny].indexOf(r)>=0?{x:s,y:i}:{x:i,y:s}}(n,t.rects,o),e}),{}),s=i[t.placement],u=s.x,c=s.y;null!=t.modifiersData.popperOffsets&&(t.modifiersData.popperOffsets.x+=u,t.modifiersData.popperOffsets.y+=c),t.modifiersData[r]=i}},Qy={left:"right",right:"left",bottom:"top",top:"bottom"};function eb(e){return e.replace(/left|right|bottom|top/g,(function(e){return Qy[e]}))}var tb={start:"end",end:"start"};function nb(e){return e.replace(/start|end/g,(function(e){return tb[e]}))}function rb(e,t){var n=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(n&&ay(n)){var r=t;do{if(r&&e.isSameNode(r))return!0;r=r.parentNode||r.host}while(r)}return!1}function ab(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function ob(e,t){return t===Ay?ab(function(e){var t=ty(e),n=fy(e),r=t.visualViewport,a=n.clientWidth,o=n.clientHeight,i=0,s=0;return r&&(a=r.width,o=r.height,/^((?!chrome|android).)*safari/i.test(navigator.userAgent)||(i=r.offsetLeft,s=r.offsetTop)),{width:a,height:o,x:i+dy(e),y:s}}(e)):ny(t)?function(e){var t=uy(e);return t.top=t.top+e.clientTop,t.left=t.left+e.clientLeft,t.bottom=t.top+e.clientHeight,t.right=t.left+e.clientWidth,t.width=e.clientWidth,t.height=e.clientHeight,t.x=t.left,t.y=t.top,t}(t):ab(function(e){var t,n=fy(e),r=cy(e),a=null==(t=e.ownerDocument)?void 0:t.body,o=oy(n.scrollWidth,n.clientWidth,a?a.scrollWidth:0,a?a.clientWidth:0),i=oy(n.scrollHeight,n.clientHeight,a?a.scrollHeight:0,a?a.clientHeight:0),s=-r.scrollLeft+dy(e),u=-r.scrollTop;return"rtl"===py(a||n).direction&&(s+=oy(n.clientWidth,a?a.clientWidth:0)-o),{width:o,height:i,x:s,y:u}}(fy(e)))}function ib(e,t,n){var r="clippingParents"===t?function(e){var t=by(gy(e)),n=["absolute","fixed"].indexOf(py(e).position)>=0&&ry(e)?ky(e):e;return ny(n)?t.filter((function(e){return ny(e)&&rb(e,n)&&"body"!==ly(e)})):[]}(e):[].concat(t),a=[].concat(r,[n]),o=a[0],i=a.reduce((function(t,n){var r=ob(e,n);return t.top=oy(r.top,t.top),t.right=iy(r.right,t.right),t.bottom=iy(r.bottom,t.bottom),t.left=oy(r.left,t.left),t}),ob(e,o));return i.width=i.right-i.left,i.height=i.bottom-i.top,i.x=i.left,i.y=i.top,i}function sb(e){return Object.assign({},{top:0,right:0,bottom:0,left:0},e)}function ub(e,t){return t.reduce((function(t,n){return t[n]=e,t}),{})}function cb(e,t){void 0===t&&(t={});var n=t,r=n.placement,a=void 0===r?e.placement:r,o=n.boundary,i=void 0===o?"clippingParents":o,s=n.rootBoundary,u=void 0===s?Ay:s,c=n.elementContext,l=void 0===c?Dy:c,f=n.altBoundary,d=void 0!==f&&f,p=n.padding,h=void 0===p?0:p,m=sb("number"!==typeof h?h:ub(h,Ty)),v=l===Dy?"reference":Dy,g=e.rects.popper,y=e.elements[d?v:l],b=ib(ny(y)?y:y.contextElement||fy(e.elements.popper),i,u),x=uy(e.elements.reference),w=Hy({reference:x,element:g,strategy:"absolute",placement:a}),k=ab(Object.assign({},g,w)),S=l===Dy?k:x,_={top:b.top-S.top+m.top,bottom:S.bottom-b.bottom+m.bottom,left:b.left-S.left+m.left,right:S.right-b.right+m.right},N=e.modifiersData.offset;if(l===Dy&&N){var E=N[a];Object.keys(_).forEach((function(e){var t=[Ny,_y].indexOf(e)>=0?1:-1,n=[Sy,_y].indexOf(e)>=0?"y":"x";_[e]+=E[n]*t}))}return _}var lb={name:"flip",enabled:!0,phase:"main",fn:function(e){var t=e.state,n=e.options,r=e.name;if(!t.modifiersData[r]._skip){for(var a=n.mainAxis,o=void 0===a||a,i=n.altAxis,s=void 0===i||i,u=n.fallbackPlacements,c=n.padding,l=n.boundary,f=n.rootBoundary,d=n.altBoundary,p=n.flipVariations,h=void 0===p||p,m=n.allowedAutoPlacements,v=t.options.placement,g=Uy(v),y=u||(g===v||!h?[eb(v)]:function(e){if(Uy(e)===Cy)return[];var t=eb(e);return[nb(e),t,nb(t)]}(v)),b=[v].concat(y).reduce((function(e,n){return e.concat(Uy(n)===Cy?function(e,t){void 0===t&&(t={});var n=t,r=n.placement,a=n.boundary,o=n.rootBoundary,i=n.padding,s=n.flipVariations,u=n.allowedAutoPlacements,c=void 0===u?Ry:u,l=qy(r),f=l?s?My:My.filter((function(e){return qy(e)===l})):Ty,d=f.filter((function(e){return c.indexOf(e)>=0}));0===d.length&&(d=f);var p=d.reduce((function(t,n){return t[n]=cb(e,{placement:n,boundary:a,rootBoundary:o,padding:i})[Uy(n)],t}),{});return Object.keys(p).sort((function(e,t){return p[e]-p[t]}))}(t,{placement:n,boundary:l,rootBoundary:f,padding:c,flipVariations:h,allowedAutoPlacements:m}):n)}),[]),x=t.rects.reference,w=t.rects.popper,k=new Map,S=!0,_=b[0],N=0;N<b.length;N++){var E=b[N],C=Uy(E),T=qy(E)===Iy,I=[Sy,_y].indexOf(C)>=0,O=I?"width":"height",A=cb(t,{placement:E,boundary:l,rootBoundary:f,altBoundary:d,padding:c}),D=I?T?Ny:Ey:T?_y:Sy;x[O]>w[O]&&(D=eb(D));var M=eb(D),R=[];if(o&&R.push(A[C]<=0),s&&R.push(A[D]<=0,A[M]<=0),R.every((function(e){return e}))){_=E,S=!1;break}k.set(E,R)}if(S)for(var P=function(e){var t=b.find((function(t){var n=k.get(t);if(n)return n.slice(0,e).every((function(e){return e}))}));if(t)return _=t,"break"},j=h?3:1;j>0;j--){if("break"===P(j))break}t.placement!==_&&(t.modifiersData[r]._skip=!0,t.placement=_,t.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}};function fb(e,t,n){return oy(e,iy(t,n))}var db={name:"preventOverflow",enabled:!0,phase:"main",fn:function(e){var t=e.state,n=e.options,r=e.name,a=n.mainAxis,o=void 0===a||a,i=n.altAxis,s=void 0!==i&&i,u=n.boundary,c=n.rootBoundary,l=n.altBoundary,f=n.padding,d=n.tether,p=void 0===d||d,h=n.tetherOffset,m=void 0===h?0:h,v=cb(t,{boundary:u,rootBoundary:c,padding:f,altBoundary:l}),g=Uy(t.placement),y=qy(t.placement),b=!y,x=Wy(g),w="x"===x?"y":"x",k=t.modifiersData.popperOffsets,S=t.rects.reference,_=t.rects.popper,N="function"===typeof m?m(Object.assign({},t.rects,{placement:t.placement})):m,E="number"===typeof N?{mainAxis:N,altAxis:N}:Object.assign({mainAxis:0,altAxis:0},N),C=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null,T={x:0,y:0};if(k){if(o){var I,O="y"===x?Sy:Ey,A="y"===x?_y:Ny,D="y"===x?"height":"width",M=k[x],R=M+v[O],P=M-v[A],j=p?-_[D]/2:0,F=y===Iy?S[D]:_[D],L=y===Iy?-_[D]:-S[D],B=t.elements.arrow,z=p&&B?vy(B):{width:0,height:0},Z=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:{top:0,right:0,bottom:0,left:0},V=Z[O],U=Z[A],q=fb(0,S[D],z[D]),W=b?S[D]/2-j-q-V-E.mainAxis:F-q-V-E.mainAxis,H=b?-S[D]/2+j+q+U+E.mainAxis:L+q+U+E.mainAxis,G=t.elements.arrow&&ky(t.elements.arrow),K=G?"y"===x?G.clientTop||0:G.clientLeft||0:0,X=null!=(I=null==C?void 0:C[x])?I:0,Y=M+H-X,$=fb(p?iy(R,M+W-X-K):R,M,p?oy(P,Y):P);k[x]=$,T[x]=$-M}if(s){var J,Q="x"===x?Sy:Ey,ee="x"===x?_y:Ny,te=k[w],ne="y"===w?"height":"width",re=te+v[Q],ae=te-v[ee],oe=-1!==[Sy,Ey].indexOf(g),ie=null!=(J=null==C?void 0:C[w])?J:0,se=oe?re:te-S[ne]-_[ne]-ie+E.altAxis,ue=oe?te+S[ne]+_[ne]-ie-E.altAxis:ae,ce=p&&oe?function(e,t,n){var r=fb(e,t,n);return r>n?n:r}(se,te,ue):fb(p?se:re,te,p?ue:ae);k[w]=ce,T[w]=ce-te}t.modifiersData[r]=T}},requiresIfExists:["offset"]};var pb={name:"arrow",enabled:!0,phase:"main",fn:function(e){var t,n=e.state,r=e.name,a=e.options,o=n.elements.arrow,i=n.modifiersData.popperOffsets,s=Uy(n.placement),u=Wy(s),c=[Ey,Ny].indexOf(s)>=0?"height":"width";if(o&&i){var l=function(e,t){return sb("number"!==typeof(e="function"===typeof e?e(Object.assign({},t.rects,{placement:t.placement})):e)?e:ub(e,Ty))}(a.padding,n),f=vy(o),d="y"===u?Sy:Ey,p="y"===u?_y:Ny,h=n.rects.reference[c]+n.rects.reference[u]-i[u]-n.rects.popper[c],m=i[u]-n.rects.reference[u],v=ky(o),g=v?"y"===u?v.clientHeight||0:v.clientWidth||0:0,y=h/2-m/2,b=l[d],x=g-f[c]-l[p],w=g/2-f[c]/2+y,k=fb(b,w,x),S=u;n.modifiersData[r]=((t={})[S]=k,t.centerOffset=k-w,t)}},effect:function(e){var t=e.state,n=e.options.element,r=void 0===n?"[data-popper-arrow]":n;null!=r&&("string"!==typeof r||(r=t.elements.popper.querySelector(r)))&&rb(t.elements.popper,r)&&(t.elements.arrow=r)},requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function hb(e,t,n){return void 0===n&&(n={x:0,y:0}),{top:e.top-t.height-n.y,right:e.right-t.width+n.x,bottom:e.bottom-t.height+n.y,left:e.left-t.width-n.x}}function mb(e){return[Sy,Ny,_y,Ey].some((function(t){return e[t]>=0}))}var vb={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:function(e){var t=e.state,n=e.name,r=t.rects.reference,a=t.rects.popper,o=t.modifiersData.preventOverflow,i=cb(t,{elementContext:"reference"}),s=cb(t,{altBoundary:!0}),u=hb(i,r),c=hb(s,a,o),l=mb(u),f=mb(c);t.modifiersData[n]={referenceClippingOffsets:u,popperEscapeOffsets:c,isReferenceHidden:l,hasPopperEscaped:f},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":l,"data-popper-escaped":f})}},gb=zy({defaultModifiers:[Vy,Gy,Yy,$y,Jy,lb,db,pb,vb]}),yb="tippy-content",bb="tippy-backdrop",xb="tippy-arrow",wb="tippy-svg-arrow",kb={passive:!0,capture:!0},Sb=function(){return document.body};function _b(e,t,n){if(Array.isArray(e)){var r=e[t];return null==r?Array.isArray(n)?n[t]:n:r}return e}function Nb(e,t){var n={}.toString.call(e);return 0===n.indexOf("[object")&&n.indexOf(t+"]")>-1}function Eb(e,t){return"function"===typeof e?e.apply(void 0,t):e}function Cb(e,t){return 0===t?e:function(r){clearTimeout(n),n=setTimeout((function(){e(r)}),t)};var n}function Tb(e){return[].concat(e)}function Ib(e,t){-1===e.indexOf(t)&&e.push(t)}function Ob(e){return e.split("-")[0]}function Ab(e){return[].slice.call(e)}function Db(e){return Object.keys(e).reduce((function(t,n){return void 0!==e[n]&&(t[n]=e[n]),t}),{})}function Mb(){return document.createElement("div")}function Rb(e){return["Element","Fragment"].some((function(t){return Nb(e,t)}))}function Pb(e){return Nb(e,"MouseEvent")}function jb(e){return!(!e||!e._tippy||e._tippy.reference!==e)}function Fb(e){return Rb(e)?[e]:function(e){return Nb(e,"NodeList")}(e)?Ab(e):Array.isArray(e)?e:Ab(document.querySelectorAll(e))}function Lb(e,t){e.forEach((function(e){e&&(e.style.transitionDuration=t+"ms")}))}function Bb(e,t){e.forEach((function(e){e&&e.setAttribute("data-state",t)}))}function zb(e){var t,n=Tb(e)[0];return null!=n&&null!=(t=n.ownerDocument)&&t.body?n.ownerDocument:document}function Zb(e,t,n){var r=t+"EventListener";["transitionend","webkitTransitionEnd"].forEach((function(t){e[r](t,n)}))}function Vb(e,t){for(var n=t;n;){var r;if(e.contains(n))return!0;n=null==n.getRootNode||null==(r=n.getRootNode())?void 0:r.host}return!1}var Ub={isTouch:!1},qb=0;function Wb(){Ub.isTouch||(Ub.isTouch=!0,window.performance&&document.addEventListener("mousemove",Hb))}function Hb(){var e=performance.now();e-qb<20&&(Ub.isTouch=!1,document.removeEventListener("mousemove",Hb)),qb=e}function Gb(){var e=document.activeElement;if(jb(e)){var t=e._tippy;e.blur&&!t.state.isVisible&&e.blur()}}var Kb=!!("undefined"!==typeof window&&"undefined"!==typeof document)&&!!window.msCrypto;var Xb={animateFill:!1,followCursor:!1,inlinePositioning:!1,sticky:!1},Yb=Object.assign({appendTo:Sb,aria:{content:"auto",expanded:"auto"},delay:0,duration:[300,250],getReferenceClientRect:null,hideOnClick:!0,ignoreAttributes:!1,interactive:!1,interactiveBorder:2,interactiveDebounce:0,moveTransition:"",offset:[0,10],onAfterUpdate:function(){},onBeforeUpdate:function(){},onCreate:function(){},onDestroy:function(){},onHidden:function(){},onHide:function(){},onMount:function(){},onShow:function(){},onShown:function(){},onTrigger:function(){},onUntrigger:function(){},onClickOutside:function(){},placement:"top",plugins:[],popperOptions:{},render:null,showOnCreate:!1,touch:!0,trigger:"mouseenter focus",triggerTarget:null},Xb,{allowHTML:!1,animation:"fade",arrow:!0,content:"",inertia:!1,maxWidth:350,role:"tooltip",theme:"",zIndex:9999}),$b=Object.keys(Yb);function Jb(e){var t=(e.plugins||[]).reduce((function(t,n){var r,a=n.name,o=n.defaultValue;a&&(t[a]=void 0!==e[a]?e[a]:null!=(r=Yb[a])?r:o);return t}),{});return Object.assign({},e,t)}function Qb(e,t){var n=Object.assign({},t,{content:Eb(t.content,[e])},t.ignoreAttributes?{}:function(e,t){var n=(t?Object.keys(Jb(Object.assign({},Yb,{plugins:t}))):$b).reduce((function(t,n){var r=(e.getAttribute("data-tippy-"+n)||"").trim();if(!r)return t;if("content"===n)t[n]=r;else try{t[n]=JSON.parse(r)}catch(a){t[n]=r}return t}),{});return n}(e,t.plugins));return n.aria=Object.assign({},Yb.aria,n.aria),n.aria={expanded:"auto"===n.aria.expanded?t.interactive:n.aria.expanded,content:"auto"===n.aria.content?t.interactive?null:"describedby":n.aria.content},n}function ex(e,t){e.innerHTML=t}function tx(e){var t=Mb();return!0===e?t.className=xb:(t.className=wb,Rb(e)?t.appendChild(e):ex(t,e)),t}function nx(e,t){Rb(t.content)?(ex(e,""),e.appendChild(t.content)):"function"!==typeof t.content&&(t.allowHTML?ex(e,t.content):e.textContent=t.content)}function rx(e){var t=e.firstElementChild,n=Ab(t.children);return{box:t,content:n.find((function(e){return e.classList.contains(yb)})),arrow:n.find((function(e){return e.classList.contains(xb)||e.classList.contains(wb)})),backdrop:n.find((function(e){return e.classList.contains(bb)}))}}function ax(e){var t=Mb(),n=Mb();n.className="tippy-box",n.setAttribute("data-state","hidden"),n.setAttribute("tabindex","-1");var r=Mb();function a(n,r){var a=rx(t),o=a.box,i=a.content,s=a.arrow;r.theme?o.setAttribute("data-theme",r.theme):o.removeAttribute("data-theme"),"string"===typeof r.animation?o.setAttribute("data-animation",r.animation):o.removeAttribute("data-animation"),r.inertia?o.setAttribute("data-inertia",""):o.removeAttribute("data-inertia"),o.style.maxWidth="number"===typeof r.maxWidth?r.maxWidth+"px":r.maxWidth,r.role?o.setAttribute("role",r.role):o.removeAttribute("role"),n.content===r.content&&n.allowHTML===r.allowHTML||nx(i,e.props),r.arrow?s?n.arrow!==r.arrow&&(o.removeChild(s),o.appendChild(tx(r.arrow))):o.appendChild(tx(r.arrow)):s&&o.removeChild(s)}return r.className=yb,r.setAttribute("data-state","hidden"),nx(r,e.props),t.appendChild(n),n.appendChild(r),a(e.props,e.props),{popper:t,onUpdate:a}}ax.$$tippy=!0;var ox=1,ix=[],sx=[];function ux(e,t){var n,r,a,o,i,s,u,c,l=Qb(e,Object.assign({},Yb,Jb(Db(t)))),f=!1,d=!1,p=!1,h=!1,m=[],v=Cb(G,l.interactiveDebounce),g=ox++,y=(c=l.plugins).filter((function(e,t){return c.indexOf(e)===t})),b={id:g,reference:e,popper:Mb(),popperInstance:null,props:l,state:{isEnabled:!0,isVisible:!1,isDestroyed:!1,isMounted:!1,isShown:!1},plugins:y,clearDelayTimeouts:function(){clearTimeout(n),clearTimeout(r),cancelAnimationFrame(a)},setProps:function(t){0;if(b.state.isDestroyed)return;M("onBeforeUpdate",[b,t]),W();var n=b.props,r=Qb(e,Object.assign({},n,Db(t),{ignoreAttributes:!0}));b.props=r,q(),n.interactiveDebounce!==r.interactiveDebounce&&(j(),v=Cb(G,r.interactiveDebounce));n.triggerTarget&&!r.triggerTarget?Tb(n.triggerTarget).forEach((function(e){e.removeAttribute("aria-expanded")})):r.triggerTarget&&e.removeAttribute("aria-expanded");P(),D(),k&&k(n,r);b.popperInstance&&($(),Q().forEach((function(e){requestAnimationFrame(e._tippy.popperInstance.forceUpdate)})));M("onAfterUpdate",[b,t])},setContent:function(e){b.setProps({content:e})},show:function(){0;var e=b.state.isVisible,t=b.state.isDestroyed,n=!b.state.isEnabled,r=Ub.isTouch&&!b.props.touch,a=_b(b.props.duration,0,Yb.duration);if(e||t||n||r)return;if(T().hasAttribute("disabled"))return;if(M("onShow",[b],!1),!1===b.props.onShow(b))return;b.state.isVisible=!0,C()&&(w.style.visibility="visible");D(),z(),b.state.isMounted||(w.style.transition="none");if(C()){var o=O(),i=o.box,u=o.content;Lb([i,u],0)}s=function(){var e;if(b.state.isVisible&&!h){if(h=!0,w.offsetHeight,w.style.transition=b.props.moveTransition,C()&&b.props.animation){var t=O(),n=t.box,r=t.content;Lb([n,r],a),Bb([n,r],"visible")}R(),P(),Ib(sx,b),null==(e=b.popperInstance)||e.forceUpdate(),M("onMount",[b]),b.props.animation&&C()&&function(e,t){V(e,t)}(a,(function(){b.state.isShown=!0,M("onShown",[b])}))}},function(){var e,t=b.props.appendTo,n=T();e=b.props.interactive&&t===Sb||"parent"===t?n.parentNode:Eb(t,[n]);e.contains(w)||e.appendChild(w);b.state.isMounted=!0,$(),!1}()},hide:function(){0;var e=!b.state.isVisible,t=b.state.isDestroyed,n=!b.state.isEnabled,r=_b(b.props.duration,1,Yb.duration);if(e||t||n)return;if(M("onHide",[b],!1),!1===b.props.onHide(b))return;b.state.isVisible=!1,b.state.isShown=!1,h=!1,f=!1,C()&&(w.style.visibility="hidden");if(j(),Z(),D(!0),C()){var a=O(),o=a.box,i=a.content;b.props.animation&&(Lb([o,i],r),Bb([o,i],"hidden"))}R(),P(),b.props.animation?C()&&function(e,t){V(e,(function(){!b.state.isVisible&&w.parentNode&&w.parentNode.contains(w)&&t()}))}(r,b.unmount):b.unmount()},hideWithInteractivity:function(e){0;I().addEventListener("mousemove",v),Ib(ix,v),v(e)},enable:function(){b.state.isEnabled=!0},disable:function(){b.hide(),b.state.isEnabled=!1},unmount:function(){0;b.state.isVisible&&b.hide();if(!b.state.isMounted)return;J(),Q().forEach((function(e){e._tippy.unmount()})),w.parentNode&&w.parentNode.removeChild(w);sx=sx.filter((function(e){return e!==b})),b.state.isMounted=!1,M("onHidden",[b])},destroy:function(){0;if(b.state.isDestroyed)return;b.clearDelayTimeouts(),b.unmount(),W(),delete e._tippy,b.state.isDestroyed=!0,M("onDestroy",[b])}};if(!l.render)return b;var x=l.render(b),w=x.popper,k=x.onUpdate;w.setAttribute("data-tippy-root",""),w.id="tippy-"+b.id,b.popper=w,e._tippy=b,w._tippy=b;var S=y.map((function(e){return e.fn(b)})),_=e.hasAttribute("aria-expanded");return q(),P(),D(),M("onCreate",[b]),l.showOnCreate&&ee(),w.addEventListener("mouseenter",(function(){b.props.interactive&&b.state.isVisible&&b.clearDelayTimeouts()})),w.addEventListener("mouseleave",(function(){b.props.interactive&&b.props.trigger.indexOf("mouseenter")>=0&&I().addEventListener("mousemove",v)})),b;function N(){var e=b.props.touch;return Array.isArray(e)?e:[e,0]}function E(){return"hold"===N()[0]}function C(){var e;return!(null==(e=b.props.render)||!e.$$tippy)}function T(){return u||e}function I(){var e=T().parentNode;return e?zb(e):document}function O(){return rx(w)}function A(e){return b.state.isMounted&&!b.state.isVisible||Ub.isTouch||o&&"focus"===o.type?0:_b(b.props.delay,e?0:1,Yb.delay)}function D(e){void 0===e&&(e=!1),w.style.pointerEvents=b.props.interactive&&!e?"":"none",w.style.zIndex=""+b.props.zIndex}function M(e,t,n){var r;(void 0===n&&(n=!0),S.forEach((function(n){n[e]&&n[e].apply(n,t)})),n)&&(r=b.props)[e].apply(r,t)}function R(){var t=b.props.aria;if(t.content){var n="aria-"+t.content,r=w.id;Tb(b.props.triggerTarget||e).forEach((function(e){var t=e.getAttribute(n);if(b.state.isVisible)e.setAttribute(n,t?t+" "+r:r);else{var a=t&&t.replace(r,"").trim();a?e.setAttribute(n,a):e.removeAttribute(n)}}))}}function P(){!_&&b.props.aria.expanded&&Tb(b.props.triggerTarget||e).forEach((function(e){b.props.interactive?e.setAttribute("aria-expanded",b.state.isVisible&&e===T()?"true":"false"):e.removeAttribute("aria-expanded")}))}function j(){I().removeEventListener("mousemove",v),ix=ix.filter((function(e){return e!==v}))}function F(t){if(!Ub.isTouch||!p&&"mousedown"!==t.type){var n=t.composedPath&&t.composedPath()[0]||t.target;if(!b.props.interactive||!Vb(w,n)){if(Tb(b.props.triggerTarget||e).some((function(e){return Vb(e,n)}))){if(Ub.isTouch)return;if(b.state.isVisible&&b.props.trigger.indexOf("click")>=0)return}else M("onClickOutside",[b,t]);!0===b.props.hideOnClick&&(b.clearDelayTimeouts(),b.hide(),d=!0,setTimeout((function(){d=!1})),b.state.isMounted||Z())}}}function L(){p=!0}function B(){p=!1}function z(){var e=I();e.addEventListener("mousedown",F,!0),e.addEventListener("touchend",F,kb),e.addEventListener("touchstart",B,kb),e.addEventListener("touchmove",L,kb)}function Z(){var e=I();e.removeEventListener("mousedown",F,!0),e.removeEventListener("touchend",F,kb),e.removeEventListener("touchstart",B,kb),e.removeEventListener("touchmove",L,kb)}function V(e,t){var n=O().box;function r(e){e.target===n&&(Zb(n,"remove",r),t())}if(0===e)return t();Zb(n,"remove",i),Zb(n,"add",r),i=r}function U(t,n,r){void 0===r&&(r=!1),Tb(b.props.triggerTarget||e).forEach((function(e){e.addEventListener(t,n,r),m.push({node:e,eventType:t,handler:n,options:r})}))}function q(){var e;E()&&(U("touchstart",H,{passive:!0}),U("touchend",K,{passive:!0})),(e=b.props.trigger,e.split(/\s+/).filter(Boolean)).forEach((function(e){if("manual"!==e)switch(U(e,H),e){case"mouseenter":U("mouseleave",K);break;case"focus":U(Kb?"focusout":"blur",X);break;case"focusin":U("focusout",X)}}))}function W(){m.forEach((function(e){var t=e.node,n=e.eventType,r=e.handler,a=e.options;t.removeEventListener(n,r,a)})),m=[]}function H(e){var t,n=!1;if(b.state.isEnabled&&!Y(e)&&!d){var r="focus"===(null==(t=o)?void 0:t.type);o=e,u=e.currentTarget,P(),!b.state.isVisible&&Pb(e)&&ix.forEach((function(t){return t(e)})),"click"===e.type&&(b.props.trigger.indexOf("mouseenter")<0||f)&&!1!==b.props.hideOnClick&&b.state.isVisible?n=!0:ee(e),"click"===e.type&&(f=!n),n&&!r&&te(e)}}function G(e){var t=e.target,n=T().contains(t)||w.contains(t);if("mousemove"!==e.type||!n){var r=Q().concat(w).map((function(e){var t,n=null==(t=e._tippy.popperInstance)?void 0:t.state;return n?{popperRect:e.getBoundingClientRect(),popperState:n,props:l}:null})).filter(Boolean);(function(e,t){var n=t.clientX,r=t.clientY;return e.every((function(e){var t=e.popperRect,a=e.popperState,o=e.props.interactiveBorder,i=Ob(a.placement),s=a.modifiersData.offset;if(!s)return!0;var u="bottom"===i?s.top.y:0,c="top"===i?s.bottom.y:0,l="right"===i?s.left.x:0,f="left"===i?s.right.x:0,d=t.top-r+u>o,p=r-t.bottom-c>o,h=t.left-n+l>o,m=n-t.right-f>o;return d||p||h||m}))})(r,e)&&(j(),te(e))}}function K(e){Y(e)||b.props.trigger.indexOf("click")>=0&&f||(b.props.interactive?b.hideWithInteractivity(e):te(e))}function X(e){b.props.trigger.indexOf("focusin")<0&&e.target!==T()||b.props.interactive&&e.relatedTarget&&w.contains(e.relatedTarget)||te(e)}function Y(e){return!!Ub.isTouch&&E()!==e.type.indexOf("touch")>=0}function $(){J();var t=b.props,n=t.popperOptions,r=t.placement,a=t.offset,o=t.getReferenceClientRect,i=t.moveTransition,u=C()?rx(w).arrow:null,c=o?{getBoundingClientRect:o,contextElement:o.contextElement||T()}:e,l={name:"$$tippy",enabled:!0,phase:"beforeWrite",requires:["computeStyles"],fn:function(e){var t=e.state;if(C()){var n=O().box;["placement","reference-hidden","escaped"].forEach((function(e){"placement"===e?n.setAttribute("data-placement",t.placement):t.attributes.popper["data-popper-"+e]?n.setAttribute("data-"+e,""):n.removeAttribute("data-"+e)})),t.attributes.popper={}}}},f=[{name:"offset",options:{offset:a}},{name:"preventOverflow",options:{padding:{top:2,bottom:2,left:5,right:5}}},{name:"flip",options:{padding:5}},{name:"computeStyles",options:{adaptive:!i}},l];C()&&u&&f.push({name:"arrow",options:{element:u,padding:3}}),f.push.apply(f,(null==n?void 0:n.modifiers)||[]),b.popperInstance=gb(c,w,Object.assign({},n,{placement:r,onFirstUpdate:s,modifiers:f}))}function J(){b.popperInstance&&(b.popperInstance.destroy(),b.popperInstance=null)}function Q(){return Ab(w.querySelectorAll("[data-tippy-root]"))}function ee(e){b.clearDelayTimeouts(),e&&M("onTrigger",[b,e]),z();var t=A(!0),r=N(),a=r[0],o=r[1];Ub.isTouch&&"hold"===a&&o&&(t=o),t?n=setTimeout((function(){b.show()}),t):b.show()}function te(e){if(b.clearDelayTimeouts(),M("onUntrigger",[b,e]),b.state.isVisible){if(!(b.props.trigger.indexOf("mouseenter")>=0&&b.props.trigger.indexOf("click")>=0&&["mouseleave","mousemove"].indexOf(e.type)>=0&&f)){var t=A(!1);t?r=setTimeout((function(){b.state.isVisible&&b.hide()}),t):a=requestAnimationFrame((function(){b.hide()}))}}else Z()}}function cx(e,t){void 0===t&&(t={});var n=Yb.plugins.concat(t.plugins||[]);document.addEventListener("touchstart",Wb,kb),window.addEventListener("blur",Gb);var r=Object.assign({},t,{plugins:n}),a=Fb(e).reduce((function(e,t){var n=t&&ux(t,r);return n&&e.push(n),e}),[]);return Rb(e)?a[0]:a}cx.defaultProps=Yb,cx.setDefaultProps=function(e){Object.keys(e).forEach((function(t){Yb[t]=e[t]}))},cx.currentInput=Ub;Object.assign({},$y,{effect:function(e){var t=e.state,n={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};Object.assign(t.elements.popper.style,n.popper),t.styles=n,t.elements.arrow&&Object.assign(t.elements.arrow.style,n.arrow)}});cx.setDefaultProps({render:ax});var lx=cx,fx=function(){function e(t){var n=this,r=t.editor,a=t.element,o=t.view,i=t.tippyOptions,s=void 0===i?{}:i,u=t.shouldShow;(0,f.Z)(this,e),this.preventHide=!1,this.shouldShow=function(e){var t=e.view,n=e.state,r=e.from,a=e.to,o=n.doc,i=n.selection.empty,s=!o.textBetween(r,a).length&&Uh(n.selection);return!(!t.hasFocus()||i||s)},this.mousedownHandler=function(){n.preventHide=!0},this.dragstartHandler=function(){n.hide()},this.focusHandler=function(){setTimeout((function(){return n.update(n.editor.view)}))},this.blurHandler=function(e){var t,r=e.event;n.preventHide?n.preventHide=!1:(null===r||void 0===r?void 0:r.relatedTarget)&&(null===(t=n.element.parentNode)||void 0===t?void 0:t.contains(r.relatedTarget))||n.hide()},this.editor=r,this.element=a,this.view=o,u&&(this.shouldShow=u),this.element.addEventListener("mousedown",this.mousedownHandler,{capture:!0}),this.view.dom.addEventListener("dragstart",this.dragstartHandler),this.editor.on("focus",this.focusHandler),this.editor.on("blur",this.blurHandler),this.tippyOptions=s,this.element.remove(),this.element.style.visibility="visible"}return(0,d.Z)(e,[{key:"createTooltip",value:function(){var e=this,t=this.editor.options.element,n=!!t.parentElement;!this.tippy&&n&&(this.tippy=lx(t,u({duration:0,getReferenceClientRect:null,content:this.element,interactive:!0,trigger:"manual",placement:"top",hideOnClick:"toggle"},this.tippyOptions)),this.tippy.popper.firstChild&&this.tippy.popper.firstChild.addEventListener("blur",(function(t){e.blurHandler({event:t})})))}},{key:"update",value:function(e,t){var n,a,o=e.state,i=e.composing,s=o.doc,u=o.selection,c=t&&t.doc.eq(s)&&t.selection.eq(u);if(!i&&!c){this.createTooltip();var l=u.ranges,f=Math.min.apply(Math,(0,r.Z)(l.map((function(e){return e.$from.pos})))),d=Math.max.apply(Math,(0,r.Z)(l.map((function(e){return e.$to.pos}))));(null===(n=this.shouldShow)||void 0===n?void 0:n.call(this,{editor:this.editor,view:e,state:o,oldState:t,from:f,to:d}))?(null===(a=this.tippy)||void 0===a||a.setProps({getReferenceClientRect:function(){if(Vh(n=o.selection)&&n instanceof fl){var t=e.nodeDOM(f);if(t)return t.getBoundingClientRect()}var n;return Ov(e,f,d)}}),this.show()):this.hide()}}},{key:"show",value:function(){var e;null===(e=this.tippy)||void 0===e||e.show()}},{key:"hide",value:function(){var e;null===(e=this.tippy)||void 0===e||e.hide()}},{key:"destroy",value:function(){var e;null===(e=this.tippy)||void 0===e||e.destroy(),this.element.removeEventListener("mousedown",this.mousedownHandler,{capture:!0}),this.view.dom.removeEventListener("dragstart",this.dragstartHandler),this.editor.off("focus",this.focusHandler),this.editor.off("blur",this.blurHandler)}}]),e}(),dx=(bh.create({name:"bubbleMenu",addOptions:function(){return{element:null,tippyOptions:{},pluginKey:"bubbleMenu",shouldShow:null}},addProseMirrorPlugins:function(){return this.options.element?[(e={pluginKey:this.options.pluginKey,editor:this.editor,element:this.options.element,tippyOptions:this.options.tippyOptions,shouldShow:this.options.shouldShow},new El({key:"string"===typeof e.pluginKey?new Il(e.pluginKey):e.pluginKey,view:function(t){return new fx(u({view:t},e))}}))]:[];var e}}),function(){function e(t){var n=this,r=t.editor,a=t.element,o=t.view,i=t.tippyOptions,s=void 0===i?{}:i,u=t.shouldShow;(0,f.Z)(this,e),this.preventHide=!1,this.shouldShow=function(e){var t=e.view,n=e.state.selection,r=n.$anchor,a=n.empty,o=1===r.depth,i=r.parent.isTextblock&&!r.parent.type.spec.code&&!r.parent.textContent;return!!(t.hasFocus()&&a&&o&&i)},this.mousedownHandler=function(){n.preventHide=!0},this.focusHandler=function(){setTimeout((function(){return n.update(n.editor.view)}))},this.blurHandler=function(e){var t,r=e.event;n.preventHide?n.preventHide=!1:(null===r||void 0===r?void 0:r.relatedTarget)&&(null===(t=n.element.parentNode)||void 0===t?void 0:t.contains(r.relatedTarget))||n.hide()},this.editor=r,this.element=a,this.view=o,u&&(this.shouldShow=u),this.element.addEventListener("mousedown",this.mousedownHandler,{capture:!0}),this.editor.on("focus",this.focusHandler),this.editor.on("blur",this.blurHandler),this.tippyOptions=s,this.element.remove(),this.element.style.visibility="visible"}return(0,d.Z)(e,[{key:"createTooltip",value:function(){var e=this,t=this.editor.options.element,n=!!t.parentElement;!this.tippy&&n&&(this.tippy=lx(t,u({duration:0,getReferenceClientRect:null,content:this.element,interactive:!0,trigger:"manual",placement:"right",hideOnClick:"toggle"},this.tippyOptions)),this.tippy.popper.firstChild&&this.tippy.popper.firstChild.addEventListener("blur",(function(t){e.blurHandler({event:t})})))}},{key:"update",value:function(e,t){var n,r,a=e.state,o=a.doc,i=a.selection,s=i.from,u=i.to;t&&t.doc.eq(o)&&t.selection.eq(i)||(this.createTooltip(),(null===(n=this.shouldShow)||void 0===n?void 0:n.call(this,{editor:this.editor,view:e,state:a,oldState:t}))?(null===(r=this.tippy)||void 0===r||r.setProps({getReferenceClientRect:function(){return Ov(e,s,u)}}),this.show()):this.hide())}},{key:"show",value:function(){var e;null===(e=this.tippy)||void 0===e||e.show()}},{key:"hide",value:function(){var e;null===(e=this.tippy)||void 0===e||e.hide()}},{key:"destroy",value:function(){var e;null===(e=this.tippy)||void 0===e||e.destroy(),this.element.removeEventListener("mousedown",this.mousedownHandler,{capture:!0}),this.editor.off("focus",this.focusHandler),this.editor.off("blur",this.blurHandler)}}]),e}()),px=(bh.create({name:"floatingMenu",addOptions:function(){return{element:null,tippyOptions:{},pluginKey:"floatingMenu",shouldShow:null}},addProseMirrorPlugins:function(){return this.options.element?[(e={pluginKey:this.options.pluginKey,editor:this.editor,element:this.options.element,tippyOptions:this.options.tippyOptions,shouldShow:this.options.shouldShow},new El({key:"string"===typeof e.pluginKey?new Il(e.pluginKey):e.pluginKey,view:function(t){return new dx(u({view:t},e))}}))]:[];var e}}),["editor"]),hx=function(e){(0,nu.Z)(n,e);var t=(0,ru.Z)(n);function n(){var e;return(0,f.Z)(this,n),(e=t.apply(this,arguments)).contentComponent=null,e}return(0,d.Z)(n)}(xv);function mx(){var t=(0,e.useState)(0),n=(0,a.Z)(t,2)[1];return function(){return n((function(e){return e+1}))}}var vx=(0,e.createContext)({onDragStart:void 0}),gx=function(){return(0,e.useContext)(vx)};var yx=function(n){var r=n.renderers;return e.createElement(e.Fragment,null,Array.from(r).map((function(e){var n=(0,a.Z)(e,2),r=n[0],o=n[1];return t.createPortal(o.reactElement,o.element,r)})))},bx=function(t){(0,nu.Z)(a,t);var n=(0,ru.Z)(a);function a(t){var r;return(0,f.Z)(this,a),(r=n.call(this,t)).editorContentRef=e.createRef(),r.state={renderers:new Map},r}return(0,d.Z)(a,[{key:"componentDidMount",value:function(){this.init()}},{key:"componentDidUpdate",value:function(){this.init()}},{key:"init",value:function(){var e=this.props.editor;if(e&&e.options.element){if(e.contentComponent)return;var t=this.editorContentRef.current;t.append.apply(t,(0,r.Z)(e.options.element.childNodes)),e.setOptions({element:t}),e.contentComponent=this,e.createNodeViews()}}},{key:"componentWillUnmount",value:function(){var e=this.props.editor;if(e&&(e.isDestroyed||e.view.setProps({nodeViews:{}}),e.contentComponent=null,e.options.element.firstChild)){var t=document.createElement("div");t.append.apply(t,(0,r.Z)(e.options.element.childNodes)),e.setOptions({element:t})}}},{key:"render",value:function(){var t=this.props,n=(t.editor,Lg(t,px));return e.createElement(e.Fragment,null,e.createElement("div",u({ref:this.editorContentRef},n)),e.createElement(yx,{renderers:this.state.renderers}))}}]),a}(e.Component),xx=e.memo(bx),wx=(e.forwardRef((function(t,n){var r=gx().onDragStart,a=t.as||"div";return e.createElement(a,u(u({},t),{},{ref:n,"data-node-view-wrapper":"",onDragStart:r,style:u(u({},t.style),{},{whiteSpace:"normal"})}))})),n(4093)),kx=function(e,t,n,r,a){var o=a.clientWidth,i=a.clientHeight,s="number"===typeof e.pageX?e.pageX:e.touches[0].pageX,u="number"===typeof e.pageY?e.pageY:e.touches[0].pageY,c=s-(a.getBoundingClientRect().left+window.pageXOffset),l=u-(a.getBoundingClientRect().top+window.pageYOffset);if("vertical"===n){var f=void 0;if(f=l<0?0:l>i?1:Math.round(100*l/i)/100,t.a!==f)return{h:t.h,s:t.s,l:t.l,a:f,source:"rgb"}}else{var d=void 0;if(r!==(d=c<0?0:c>o?1:Math.round(100*c/o)/100))return{h:t.h,s:t.s,l:t.l,a:d,source:"rgb"}}return null},Sx={},_x=function(e,t,n,r){var a=e+"-"+t+"-"+n+(r?"-server":"");if(Sx[a])return Sx[a];var o=function(e,t,n,r){if("undefined"===typeof document&&!r)return null;var a=r?new r:document.createElement("canvas");a.width=2*n,a.height=2*n;var o=a.getContext("2d");return o?(o.fillStyle=e,o.fillRect(0,0,a.width,a.height),o.fillStyle=t,o.fillRect(0,0,n,n),o.translate(n,n),o.fillRect(0,0,n,n),a.toDataURL()):null}(e,t,n,r);return Sx[a]=o,o},Nx=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ex=function(t){var n=t.white,r=t.grey,a=t.size,o=t.renderers,i=t.borderRadius,s=t.boxShadow,u=t.children,c=(0,wx.ZP)({default:{grid:{borderRadius:i,boxShadow:s,absolute:"0px 0px 0px 0px",background:"url("+_x(n,r,a,o.canvas)+") center left"}}});return(0,e.isValidElement)(u)?e.cloneElement(u,Nx({},u.props,{style:Nx({},u.props.style,c.grid)})):e.createElement("div",{style:c.grid})};Ex.defaultProps={size:8,white:"transparent",grey:"rgba(0,0,0,.08)",renderers:{}};var Cx=Ex,Tx=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ix=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function Ox(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ax(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}var Dx=function(t){function n(){var e,t,r;Ox(this,n);for(var a=arguments.length,o=Array(a),i=0;i<a;i++)o[i]=arguments[i];return t=r=Ax(this,(e=n.__proto__||Object.getPrototypeOf(n)).call.apply(e,[this].concat(o))),r.handleChange=function(e){var t=kx(e,r.props.hsl,r.props.direction,r.props.a,r.container);t&&"function"===typeof r.props.onChange&&r.props.onChange(t,e)},r.handleMouseDown=function(e){r.handleChange(e),window.addEventListener("mousemove",r.handleChange),window.addEventListener("mouseup",r.handleMouseUp)},r.handleMouseUp=function(){r.unbindEventListeners()},r.unbindEventListeners=function(){window.removeEventListener("mousemove",r.handleChange),window.removeEventListener("mouseup",r.handleMouseUp)},Ax(r,t)}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,t),Ix(n,[{key:"componentWillUnmount",value:function(){this.unbindEventListeners()}},{key:"render",value:function(){var t=this,n=this.props.rgb,r=(0,wx.ZP)({default:{alpha:{absolute:"0px 0px 0px 0px",borderRadius:this.props.radius},checkboard:{absolute:"0px 0px 0px 0px",overflow:"hidden",borderRadius:this.props.radius},gradient:{absolute:"0px 0px 0px 0px",background:"linear-gradient(to right, rgba("+n.r+","+n.g+","+n.b+", 0) 0%,\n           rgba("+n.r+","+n.g+","+n.b+", 1) 100%)",boxShadow:this.props.shadow,borderRadius:this.props.radius},container:{position:"relative",height:"100%",margin:"0 3px"},pointer:{position:"absolute",left:100*n.a+"%"},slider:{width:"4px",borderRadius:"1px",height:"8px",boxShadow:"0 0 2px rgba(0, 0, 0, .6)",background:"#fff",marginTop:"1px",transform:"translateX(-2px)"}},vertical:{gradient:{background:"linear-gradient(to bottom, rgba("+n.r+","+n.g+","+n.b+", 0) 0%,\n           rgba("+n.r+","+n.g+","+n.b+", 1) 100%)"},pointer:{left:0,top:100*n.a+"%"}},overwrite:Tx({},this.props.style)},{vertical:"vertical"===this.props.direction,overwrite:!0});return e.createElement("div",{style:r.alpha},e.createElement("div",{style:r.checkboard},e.createElement(Cx,{renderers:this.props.renderers})),e.createElement("div",{style:r.gradient}),e.createElement("div",{style:r.container,ref:function(e){return t.container=e},onMouseDown:this.handleMouseDown,onTouchMove:this.handleChange,onTouchStart:this.handleChange},e.createElement("div",{style:r.pointer},this.props.pointer?e.createElement(this.props.pointer,this.props):e.createElement("div",{style:r.slider}))))}}]),n}(e.PureComponent||e.Component),Mx=Dx,Rx=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var Px=[38,40],jx=1,Fx=function(t){function n(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this));return t.handleBlur=function(){t.state.blurValue&&t.setState({value:t.state.blurValue,blurValue:null})},t.handleChange=function(e){t.setUpdatedValue(e.target.value,e)},t.handleKeyDown=function(e){var n,r=function(e){return Number(String(e).replace(/%/g,""))}(e.target.value);if(!isNaN(r)&&(n=e.keyCode,Px.indexOf(n)>-1)){var a=t.getArrowOffset(),o=38===e.keyCode?r+a:r-a;t.setUpdatedValue(o,e)}},t.handleDrag=function(e){if(t.props.dragLabel){var n=Math.round(t.props.value+e.movementX);n>=0&&n<=t.props.dragMax&&t.props.onChange&&t.props.onChange(t.getValueObjectWithLabel(n),e)}},t.handleMouseDown=function(e){t.props.dragLabel&&(e.preventDefault(),t.handleDrag(e),window.addEventListener("mousemove",t.handleDrag),window.addEventListener("mouseup",t.handleMouseUp))},t.handleMouseUp=function(){t.unbindEventListeners()},t.unbindEventListeners=function(){window.removeEventListener("mousemove",t.handleDrag),window.removeEventListener("mouseup",t.handleMouseUp)},t.state={value:String(e.value).toUpperCase(),blurValue:String(e.value).toUpperCase()},t.inputId="rc-editable-input-"+jx++,t}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,t),Rx(n,[{key:"componentDidUpdate",value:function(e,t){this.props.value===this.state.value||e.value===this.props.value&&t.value===this.state.value||(this.input===document.activeElement?this.setState({blurValue:String(this.props.value).toUpperCase()}):this.setState({value:String(this.props.value).toUpperCase(),blurValue:!this.state.blurValue&&String(this.props.value).toUpperCase()}))}},{key:"componentWillUnmount",value:function(){this.unbindEventListeners()}},{key:"getValueObjectWithLabel",value:function(e){return function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}({},this.props.label,e)}},{key:"getArrowOffset",value:function(){return this.props.arrowOffset||1}},{key:"setUpdatedValue",value:function(e,t){var n=this.props.label?this.getValueObjectWithLabel(e):e;this.props.onChange&&this.props.onChange(n,t),this.setState({value:e})}},{key:"render",value:function(){var t=this,n=(0,wx.ZP)({default:{wrap:{position:"relative"}},"user-override":{wrap:this.props.style&&this.props.style.wrap?this.props.style.wrap:{},input:this.props.style&&this.props.style.input?this.props.style.input:{},label:this.props.style&&this.props.style.label?this.props.style.label:{}},"dragLabel-true":{label:{cursor:"ew-resize"}}},{"user-override":!0},this.props);return e.createElement("div",{style:n.wrap},e.createElement("input",{id:this.inputId,style:n.input,ref:function(e){return t.input=e},value:this.state.value,onKeyDown:this.handleKeyDown,onChange:this.handleChange,onBlur:this.handleBlur,placeholder:this.props.placeholder,spellCheck:"false"}),this.props.label&&!this.props.hideLabel?e.createElement("label",{htmlFor:this.inputId,style:n.label,onMouseDown:this.handleMouseDown},this.props.label):null)}}]),n}(e.PureComponent||e.Component),Lx=Fx,Bx=function(e,t,n,r){var a=r.clientWidth,o=r.clientHeight,i="number"===typeof e.pageX?e.pageX:e.touches[0].pageX,s="number"===typeof e.pageY?e.pageY:e.touches[0].pageY,u=i-(r.getBoundingClientRect().left+window.pageXOffset),c=s-(r.getBoundingClientRect().top+window.pageYOffset);if("vertical"===t){var l=void 0;if(c<0)l=359;else if(c>o)l=0;else{l=360*(-100*c/o+100)/100}if(n.h!==l)return{h:l,s:n.s,l:n.l,a:n.a,source:"hsl"}}else{var f=void 0;if(u<0)f=0;else if(u>a)f=359;else{f=360*(100*u/a)/100}if(n.h!==f)return{h:f,s:n.s,l:n.l,a:n.a,source:"hsl"}}return null},zx=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function Zx(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Vx(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}var Ux=function(t){function n(){var e,t,r;Zx(this,n);for(var a=arguments.length,o=Array(a),i=0;i<a;i++)o[i]=arguments[i];return t=r=Vx(this,(e=n.__proto__||Object.getPrototypeOf(n)).call.apply(e,[this].concat(o))),r.handleChange=function(e){var t=Bx(e,r.props.direction,r.props.hsl,r.container);t&&"function"===typeof r.props.onChange&&r.props.onChange(t,e)},r.handleMouseDown=function(e){r.handleChange(e),window.addEventListener("mousemove",r.handleChange),window.addEventListener("mouseup",r.handleMouseUp)},r.handleMouseUp=function(){r.unbindEventListeners()},Vx(r,t)}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,t),zx(n,[{key:"componentWillUnmount",value:function(){this.unbindEventListeners()}},{key:"unbindEventListeners",value:function(){window.removeEventListener("mousemove",this.handleChange),window.removeEventListener("mouseup",this.handleMouseUp)}},{key:"render",value:function(){var t=this,n=this.props.direction,r=void 0===n?"horizontal":n,a=(0,wx.ZP)({default:{hue:{absolute:"0px 0px 0px 0px",borderRadius:this.props.radius,boxShadow:this.props.shadow},container:{padding:"0 2px",position:"relative",height:"100%",borderRadius:this.props.radius},pointer:{position:"absolute",left:100*this.props.hsl.h/360+"%"},slider:{marginTop:"1px",width:"4px",borderRadius:"1px",height:"8px",boxShadow:"0 0 2px rgba(0, 0, 0, .6)",background:"#fff",transform:"translateX(-2px)"}},vertical:{pointer:{left:"0px",top:-100*this.props.hsl.h/360+100+"%"}}},{vertical:"vertical"===r});return e.createElement("div",{style:a.hue},e.createElement("div",{className:"hue-"+r,style:a.container,ref:function(e){return t.container=e},onMouseDown:this.handleMouseDown,onTouchMove:this.handleChange,onTouchStart:this.handleChange},e.createElement("style",null,"\n            .hue-horizontal {\n              background: linear-gradient(to right, #f00 0%, #ff0 17%, #0f0\n                33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);\n              background: -webkit-linear-gradient(to right, #f00 0%, #ff0\n                17%, #0f0 33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);\n            }\n\n            .hue-vertical {\n              background: linear-gradient(to top, #f00 0%, #ff0 17%, #0f0 33%,\n                #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);\n              background: -webkit-linear-gradient(to top, #f00 0%, #ff0 17%,\n                #0f0 33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);\n            }\n          "),e.createElement("div",{style:a.pointer},this.props.pointer?e.createElement(this.props.pointer,this.props):e.createElement("div",{style:a.slider}))))}}]),n}(e.PureComponent||e.Component),qx=Ux,Wx=n(2007),Hx=n.n(Wx);var Gx=function(){this.__data__=[],this.size=0};var Kx=function(e,t){return e===t||e!==e&&t!==t};var Xx=function(e,t){for(var n=e.length;n--;)if(Kx(e[n][0],t))return n;return-1},Yx=Array.prototype.splice;var $x=function(e){var t=this.__data__,n=Xx(t,e);return!(n<0)&&(n==t.length-1?t.pop():Yx.call(t,n,1),--this.size,!0)};var Jx=function(e){var t=this.__data__,n=Xx(t,e);return n<0?void 0:t[n][1]};var Qx=function(e){return Xx(this.__data__,e)>-1};var ew=function(e,t){var n=this.__data__,r=Xx(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this};function tw(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}tw.prototype.clear=Gx,tw.prototype.delete=$x,tw.prototype.get=Jx,tw.prototype.has=Qx,tw.prototype.set=ew;var nw=tw;var rw=function(){this.__data__=new nw,this.size=0};var aw=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n};var ow=function(e){return this.__data__.get(e)};var iw=function(e){return this.__data__.has(e)},sw="object"==typeof global&&global&&global.Object===Object&&global,uw="object"==typeof self&&self&&self.Object===Object&&self,cw=sw||uw||Function("return this")(),lw=cw.Symbol,fw=Object.prototype,dw=fw.hasOwnProperty,pw=fw.toString,hw=lw?lw.toStringTag:void 0;var mw=function(e){var t=dw.call(e,hw),n=e[hw];try{e[hw]=void 0;var r=!0}catch(o){}var a=pw.call(e);return r&&(t?e[hw]=n:delete e[hw]),a},vw=Object.prototype.toString;var gw=function(e){return vw.call(e)},yw=lw?lw.toStringTag:void 0;var bw=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":yw&&yw in Object(e)?mw(e):gw(e)};var xw=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)};var ww=function(e){if(!xw(e))return!1;var t=bw(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t},kw=cw["__core-js_shared__"],Sw=function(){var e=/[^.]+$/.exec(kw&&kw.keys&&kw.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();var _w=function(e){return!!Sw&&Sw in e},Nw=Function.prototype.toString;var Ew=function(e){if(null!=e){try{return Nw.call(e)}catch(t){}try{return e+""}catch(t){}}return""},Cw=/^\[object .+?Constructor\]$/,Tw=Function.prototype,Iw=Object.prototype,Ow=Tw.toString,Aw=Iw.hasOwnProperty,Dw=RegExp("^"+Ow.call(Aw).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");var Mw=function(e){return!(!xw(e)||_w(e))&&(ww(e)?Dw:Cw).test(Ew(e))};var Rw=function(e,t){return null==e?void 0:e[t]};var Pw=function(e,t){var n=Rw(e,t);return Mw(n)?n:void 0},jw=Pw(cw,"Map"),Fw=Pw(Object,"create");var Lw=function(){this.__data__=Fw?Fw(null):{},this.size=0};var Bw=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},zw=Object.prototype.hasOwnProperty;var Zw=function(e){var t=this.__data__;if(Fw){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return zw.call(t,e)?t[e]:void 0},Vw=Object.prototype.hasOwnProperty;var Uw=function(e){var t=this.__data__;return Fw?void 0!==t[e]:Vw.call(t,e)};var qw=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=Fw&&void 0===t?"__lodash_hash_undefined__":t,this};function Ww(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}Ww.prototype.clear=Lw,Ww.prototype.delete=Bw,Ww.prototype.get=Zw,Ww.prototype.has=Uw,Ww.prototype.set=qw;var Hw=Ww;var Gw=function(){this.size=0,this.__data__={hash:new Hw,map:new(jw||nw),string:new Hw}};var Kw=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e};var Xw=function(e,t){var n=e.__data__;return Kw(t)?n["string"==typeof t?"string":"hash"]:n.map};var Yw=function(e){var t=Xw(this,e).delete(e);return this.size-=t?1:0,t};var $w=function(e){return Xw(this,e).get(e)};var Jw=function(e){return Xw(this,e).has(e)};var Qw=function(e,t){var n=Xw(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this};function ek(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}ek.prototype.clear=Gw,ek.prototype.delete=Yw,ek.prototype.get=$w,ek.prototype.has=Jw,ek.prototype.set=Qw;var tk=ek;var nk=function(e,t){var n=this.__data__;if(n instanceof nw){var r=n.__data__;if(!jw||r.length<199)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new tk(r)}return n.set(e,t),this.size=n.size,this};function rk(e){var t=this.__data__=new nw(e);this.size=t.size}rk.prototype.clear=rw,rk.prototype.delete=aw,rk.prototype.get=ow,rk.prototype.has=iw,rk.prototype.set=nk;var ak=rk,ok=function(){try{var e=Pw(Object,"defineProperty");return e({},"",{}),e}catch(t){}}(),ik=ok;var sk=function(e,t,n){"__proto__"==t&&ik?ik(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n};var uk=function(e,t,n){(void 0!==n&&!Kx(e[t],n)||void 0===n&&!(t in e))&&sk(e,t,n)};var ck=function(e){return function(t,n,r){for(var a=-1,o=Object(t),i=r(t),s=i.length;s--;){var u=i[e?s:++a];if(!1===n(o[u],u,o))break}return t}},lk=ck(),fk="object"==typeof exports&&exports&&!exports.nodeType&&exports,dk=fk&&"object"==typeof module&&module&&!module.nodeType&&module,pk=dk&&dk.exports===fk?cw.Buffer:void 0,hk=pk?pk.allocUnsafe:void 0;var mk=function(e,t){if(t)return e.slice();var n=e.length,r=hk?hk(n):new e.constructor(n);return e.copy(r),r},vk=cw.Uint8Array;var gk=function(e){var t=new e.constructor(e.byteLength);return new vk(t).set(new vk(e)),t};var yk=function(e,t){var n=t?gk(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)};var bk=function(e,t){var n=-1,r=e.length;for(t||(t=Array(r));++n<r;)t[n]=e[n];return t},xk=Object.create,wk=function(){function e(){}return function(t){if(!xw(t))return{};if(xk)return xk(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}(),kk=wk;var Sk=function(e,t){return function(n){return e(t(n))}},_k=Sk(Object.getPrototypeOf,Object),Nk=Object.prototype;var Ek=function(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||Nk)};var Ck=function(e){return"function"!=typeof e.constructor||Ek(e)?{}:kk(_k(e))};var Tk=function(e){return null!=e&&"object"==typeof e};var Ik=function(e){return Tk(e)&&"[object Arguments]"==bw(e)},Ok=Object.prototype,Ak=Ok.hasOwnProperty,Dk=Ok.propertyIsEnumerable,Mk=Ik(function(){return arguments}())?Ik:function(e){return Tk(e)&&Ak.call(e,"callee")&&!Dk.call(e,"callee")},Rk=Mk,Pk=Array.isArray;var jk=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991};var Fk=function(e){return null!=e&&jk(e.length)&&!ww(e)};var Lk=function(e){return Tk(e)&&Fk(e)};var Bk=function(){return!1},zk="object"==typeof exports&&exports&&!exports.nodeType&&exports,Zk=zk&&"object"==typeof module&&module&&!module.nodeType&&module,Vk=Zk&&Zk.exports===zk?cw.Buffer:void 0,Uk=(Vk?Vk.isBuffer:void 0)||Bk,qk=Function.prototype,Wk=Object.prototype,Hk=qk.toString,Gk=Wk.hasOwnProperty,Kk=Hk.call(Object);var Xk=function(e){if(!Tk(e)||"[object Object]"!=bw(e))return!1;var t=_k(e);if(null===t)return!0;var n=Gk.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&Hk.call(n)==Kk},Yk={};Yk["[object Float32Array]"]=Yk["[object Float64Array]"]=Yk["[object Int8Array]"]=Yk["[object Int16Array]"]=Yk["[object Int32Array]"]=Yk["[object Uint8Array]"]=Yk["[object Uint8ClampedArray]"]=Yk["[object Uint16Array]"]=Yk["[object Uint32Array]"]=!0,Yk["[object Arguments]"]=Yk["[object Array]"]=Yk["[object ArrayBuffer]"]=Yk["[object Boolean]"]=Yk["[object DataView]"]=Yk["[object Date]"]=Yk["[object Error]"]=Yk["[object Function]"]=Yk["[object Map]"]=Yk["[object Number]"]=Yk["[object Object]"]=Yk["[object RegExp]"]=Yk["[object Set]"]=Yk["[object String]"]=Yk["[object WeakMap]"]=!1;var $k=function(e){return Tk(e)&&jk(e.length)&&!!Yk[bw(e)]};var Jk=function(e){return function(t){return e(t)}},Qk="object"==typeof exports&&exports&&!exports.nodeType&&exports,eS=Qk&&"object"==typeof module&&module&&!module.nodeType&&module,tS=eS&&eS.exports===Qk&&sw.process,nS=function(){try{var e=eS&&eS.require&&eS.require("util").types;return e||tS&&tS.binding&&tS.binding("util")}catch(t){}}(),rS=nS&&nS.isTypedArray,aS=rS?Jk(rS):$k;var oS=function(e,t){if(("constructor"!==t||"function"!==typeof e[t])&&"__proto__"!=t)return e[t]},iS=Object.prototype.hasOwnProperty;var sS=function(e,t,n){var r=e[t];iS.call(e,t)&&Kx(r,n)&&(void 0!==n||t in e)||sk(e,t,n)};var uS=function(e,t,n,r){var a=!n;n||(n={});for(var o=-1,i=t.length;++o<i;){var s=t[o],u=r?r(n[s],e[s],s,n,e):void 0;void 0===u&&(u=e[s]),a?sk(n,s,u):sS(n,s,u)}return n};var cS=function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r},lS=/^(?:0|[1-9]\d*)$/;var fS=function(e,t){var n=typeof e;return!!(t=null==t?9007199254740991:t)&&("number"==n||"symbol"!=n&&lS.test(e))&&e>-1&&e%1==0&&e<t},dS=Object.prototype.hasOwnProperty;var pS=function(e,t){var n=Pk(e),r=!n&&Rk(e),a=!n&&!r&&Uk(e),o=!n&&!r&&!a&&aS(e),i=n||r||a||o,s=i?cS(e.length,String):[],u=s.length;for(var c in e)!t&&!dS.call(e,c)||i&&("length"==c||a&&("offset"==c||"parent"==c)||o&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||fS(c,u))||s.push(c);return s};var hS=function(e){var t=[];if(null!=e)for(var n in Object(e))t.push(n);return t},mS=Object.prototype.hasOwnProperty;var vS=function(e){if(!xw(e))return hS(e);var t=Ek(e),n=[];for(var r in e)("constructor"!=r||!t&&mS.call(e,r))&&n.push(r);return n};var gS=function(e){return Fk(e)?pS(e,!0):vS(e)};var yS=function(e){return uS(e,gS(e))};var bS=function(e,t,n,r,a,o,i){var s=oS(e,n),u=oS(t,n),c=i.get(u);if(c)uk(e,n,c);else{var l=o?o(s,u,n+"",e,t,i):void 0,f=void 0===l;if(f){var d=Pk(u),p=!d&&Uk(u),h=!d&&!p&&aS(u);l=u,d||p||h?Pk(s)?l=s:Lk(s)?l=bk(s):p?(f=!1,l=mk(u,!0)):h?(f=!1,l=yk(u,!0)):l=[]:Xk(u)||Rk(u)?(l=s,Rk(s)?l=yS(s):xw(s)&&!ww(s)||(l=Ck(u))):f=!1}f&&(i.set(u,l),a(l,u,r,o,i),i.delete(u)),uk(e,n,l)}};var xS=function e(t,n,r,a,o){t!==n&&lk(n,(function(i,s){if(o||(o=new ak),xw(i))bS(t,n,s,r,e,a,o);else{var u=a?a(oS(t,s),i,s+"",t,n,o):void 0;void 0===u&&(u=i),uk(t,s,u)}}),gS)};var wS=function(e){return e};var kS=function(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)},SS=Math.max;var _S=function(e,t,n){return t=SS(void 0===t?e.length-1:t,0),function(){for(var r=arguments,a=-1,o=SS(r.length-t,0),i=Array(o);++a<o;)i[a]=r[t+a];a=-1;for(var s=Array(t+1);++a<t;)s[a]=r[a];return s[t]=n(i),kS(e,this,s)}};var NS=function(e){return function(){return e}},ES=ik?function(e,t){return ik(e,"toString",{configurable:!0,enumerable:!1,value:NS(t),writable:!0})}:wS,CS=ES,TS=Date.now;var IS=function(e){var t=0,n=0;return function(){var r=TS(),a=16-(r-n);if(n=r,a>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(void 0,arguments)}},OS=IS(CS);var AS=function(e,t){return OS(_S(e,t,wS),e+"")};var DS=function(e,t,n){if(!xw(n))return!1;var r=typeof t;return!!("number"==r?Fk(n)&&fS(t,n.length):"string"==r&&t in n)&&Kx(n[t],e)};var MS=function(e){return AS((function(t,n){var r=-1,a=n.length,o=a>1?n[a-1]:void 0,i=a>2?n[2]:void 0;for(o=e.length>3&&"function"==typeof o?(a--,o):void 0,i&&DS(n[0],n[1],i)&&(o=a<3?void 0:o,a=1),t=Object(t);++r<a;){var s=n[r];s&&e(t,s,r,o)}return t}))}((function(e,t,n){xS(e,t,n)})),RS=function(t){var n=t.zDepth,r=t.radius,a=t.background,o=t.children,i=t.styles,s=void 0===i?{}:i,u=(0,wx.ZP)(MS({default:{wrap:{position:"relative",display:"inline-block"},content:{position:"relative"},bg:{absolute:"0px 0px 0px 0px",boxShadow:"0 "+n+"px "+4*n+"px rgba(0,0,0,.24)",borderRadius:r,background:a}},"zDepth-0":{bg:{boxShadow:"none"}},"zDepth-1":{bg:{boxShadow:"0 2px 10px rgba(0,0,0,.12), 0 2px 5px rgba(0,0,0,.16)"}},"zDepth-2":{bg:{boxShadow:"0 6px 20px rgba(0,0,0,.19), 0 8px 17px rgba(0,0,0,.2)"}},"zDepth-3":{bg:{boxShadow:"0 17px 50px rgba(0,0,0,.19), 0 12px 15px rgba(0,0,0,.24)"}},"zDepth-4":{bg:{boxShadow:"0 25px 55px rgba(0,0,0,.21), 0 16px 28px rgba(0,0,0,.22)"}},"zDepth-5":{bg:{boxShadow:"0 40px 77px rgba(0,0,0,.22), 0 27px 24px rgba(0,0,0,.2)"}},square:{bg:{borderRadius:"0"}},circle:{bg:{borderRadius:"50%"}}},s),{"zDepth-1":1===n});return e.createElement("div",{style:u.wrap},e.createElement("div",{style:u.bg}),e.createElement("div",{style:u.content},o))};RS.propTypes={background:Hx().string,zDepth:Hx().oneOf([0,1,2,3,4,5]),radius:Hx().number,styles:Hx().object},RS.defaultProps={background:"#fff",zDepth:1,radius:2,styles:{}};var PS=RS,jS=function(){return cw.Date.now()},FS=/\s/;var LS=function(e){for(var t=e.length;t--&&FS.test(e.charAt(t)););return t},BS=/^\s+/;var zS=function(e){return e?e.slice(0,LS(e)+1).replace(BS,""):e};var ZS=function(e){return"symbol"==typeof e||Tk(e)&&"[object Symbol]"==bw(e)},VS=/^[-+]0x[0-9a-f]+$/i,US=/^0b[01]+$/i,qS=/^0o[0-7]+$/i,WS=parseInt;var HS=function(e){if("number"==typeof e)return e;if(ZS(e))return NaN;if(xw(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=xw(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=zS(e);var n=US.test(e);return n||qS.test(e)?WS(e.slice(2),n?2:8):VS.test(e)?NaN:+e},GS=Math.max,KS=Math.min;var XS=function(e,t,n){var r,a,o,i,s,u,c=0,l=!1,f=!1,d=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function p(t){var n=r,o=a;return r=a=void 0,c=t,i=e.apply(o,n)}function h(e){return c=e,s=setTimeout(v,t),l?p(e):i}function m(e){var n=e-u;return void 0===u||n>=t||n<0||f&&e-c>=o}function v(){var e=jS();if(m(e))return g(e);s=setTimeout(v,function(e){var n=t-(e-u);return f?KS(n,o-(e-c)):n}(e))}function g(e){return s=void 0,d&&r?p(e):(r=a=void 0,i)}function y(){var e=jS(),n=m(e);if(r=arguments,a=this,u=e,n){if(void 0===s)return h(u);if(f)return clearTimeout(s),s=setTimeout(v,t),p(u)}return void 0===s&&(s=setTimeout(v,t)),i}return t=HS(t)||0,xw(n)&&(l=!!n.leading,o=(f="maxWait"in n)?GS(HS(n.maxWait)||0,t):o,d="trailing"in n?!!n.trailing:d),y.cancel=function(){void 0!==s&&clearTimeout(s),c=0,r=u=a=s=void 0},y.flush=function(){return void 0===s?i:g(jS())},y};var YS=function(e,t,n){var r=!0,a=!0;if("function"!=typeof e)throw new TypeError("Expected a function");return xw(n)&&(r="leading"in n?!!n.leading:r,a="trailing"in n?!!n.trailing:a),XS(e,t,{leading:r,maxWait:t,trailing:a})},$S=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var JS=function(t){function n(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e));return t.handleChange=function(e){"function"===typeof t.props.onChange&&t.throttle(t.props.onChange,function(e,t,n){var r=n.getBoundingClientRect(),a=r.width,o=r.height,i="number"===typeof e.pageX?e.pageX:e.touches[0].pageX,s="number"===typeof e.pageY?e.pageY:e.touches[0].pageY,u=i-(n.getBoundingClientRect().left+window.pageXOffset),c=s-(n.getBoundingClientRect().top+window.pageYOffset);u<0?u=0:u>a&&(u=a),c<0?c=0:c>o&&(c=o);var l=u/a,f=1-c/o;return{h:t.h,s:l,v:f,a:t.a,source:"hsv"}}(e,t.props.hsl,t.container),e)},t.handleMouseDown=function(e){t.handleChange(e);var n=t.getContainerRenderWindow();n.addEventListener("mousemove",t.handleChange),n.addEventListener("mouseup",t.handleMouseUp)},t.handleMouseUp=function(){t.unbindEventListeners()},t.throttle=YS((function(e,t,n){e(t,n)}),50),t}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,t),$S(n,[{key:"componentWillUnmount",value:function(){this.throttle.cancel(),this.unbindEventListeners()}},{key:"getContainerRenderWindow",value:function(){for(var e=this.container,t=window;!t.document.contains(e)&&t.parent!==t;)t=t.parent;return t}},{key:"unbindEventListeners",value:function(){var e=this.getContainerRenderWindow();e.removeEventListener("mousemove",this.handleChange),e.removeEventListener("mouseup",this.handleMouseUp)}},{key:"render",value:function(){var t=this,n=this.props.style||{},r=n.color,a=n.white,o=n.black,i=n.pointer,s=n.circle,u=(0,wx.ZP)({default:{color:{absolute:"0px 0px 0px 0px",background:"hsl("+this.props.hsl.h+",100%, 50%)",borderRadius:this.props.radius},white:{absolute:"0px 0px 0px 0px",borderRadius:this.props.radius},black:{absolute:"0px 0px 0px 0px",boxShadow:this.props.shadow,borderRadius:this.props.radius},pointer:{position:"absolute",top:-100*this.props.hsv.v+100+"%",left:100*this.props.hsv.s+"%",cursor:"default"},circle:{width:"4px",height:"4px",boxShadow:"0 0 0 1.5px #fff, inset 0 0 1px 1px rgba(0,0,0,.3),\n            0 0 1px 2px rgba(0,0,0,.4)",borderRadius:"50%",cursor:"hand",transform:"translate(-2px, -2px)"}},custom:{color:r,white:a,black:o,pointer:i,circle:s}},{custom:!!this.props.style});return e.createElement("div",{style:u.color,ref:function(e){return t.container=e},onMouseDown:this.handleMouseDown,onTouchMove:this.handleChange,onTouchStart:this.handleChange},e.createElement("style",null,"\n          .saturation-white {\n            background: -webkit-linear-gradient(to right, #fff, rgba(255,255,255,0));\n            background: linear-gradient(to right, #fff, rgba(255,255,255,0));\n          }\n          .saturation-black {\n            background: -webkit-linear-gradient(to top, #000, rgba(0,0,0,0));\n            background: linear-gradient(to top, #000, rgba(0,0,0,0));\n          }\n        "),e.createElement("div",{style:u.white,className:"saturation-white"},e.createElement("div",{style:u.black,className:"saturation-black"}),e.createElement("div",{style:u.pointer},this.props.pointer?e.createElement(this.props.pointer,this.props):e.createElement("div",{style:u.circle}))))}}]),n}(e.PureComponent||e.Component),QS=JS;var e_=function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r&&!1!==t(e[n],n,e););return e},t_=Sk(Object.keys,Object),n_=Object.prototype.hasOwnProperty;var r_=function(e){if(!Ek(e))return t_(e);var t=[];for(var n in Object(e))n_.call(e,n)&&"constructor"!=n&&t.push(n);return t};var a_=function(e){return Fk(e)?pS(e):r_(e)};var o_=function(e,t){return function(n,r){if(null==n)return n;if(!Fk(n))return e(n,r);for(var a=n.length,o=t?a:-1,i=Object(n);(t?o--:++o<a)&&!1!==r(i[o],o,i););return n}}((function(e,t){return e&&lk(e,t,a_)}));var i_=function(e){return"function"==typeof e?e:wS};var s_=function(e,t){return(Pk(e)?e_:o_)(e,i_(t))},u_=n(7045),c_=n.n(u_),l_=function(e){var t=0,n=0;return s_(["r","g","b","a","h","s","l","v"],(function(r){if(e[r]&&(t+=1,isNaN(e[r])||(n+=1),"s"===r||"l"===r)){/^\d+%$/.test(e[r])&&(n+=1)}})),t===n&&e},f_=function(e,t){var n=e.hex?c_()(e.hex):c_()(e),r=n.toHsl(),a=n.toHsv(),o=n.toRgb(),i=n.toHex();return 0===r.s&&(r.h=t||0,a.h=t||0),{hsl:r,hex:"000000"===i&&0===o.a?"transparent":"#"+i,rgb:o,hsv:a,oldHue:e.h||t||r.h,source:e.source}},d_=function(e){if("transparent"===e)return!0;var t="#"===String(e).charAt(0)?1:0;return e.length!==4+t&&e.length<7+t&&c_()(e).isValid()},p_=function(e){if(!e)return"#fff";var t=f_(e);return"transparent"===t.hex?"rgba(0,0,0,0.4)":(299*t.rgb.r+587*t.rgb.g+114*t.rgb.b)/1e3>=128?"#000":"#fff"},h_=function(e,t){var n=e.replace("\xb0","");return c_()(t+" ("+n+")")._ok},m_=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},v_=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var g_=function(t){var n=function(n){function r(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(r.__proto__||Object.getPrototypeOf(r)).call(this));return t.handleChange=function(e,n){if(l_(e)){var r=f_(e,e.h||t.state.oldHue);t.setState(r),t.props.onChangeComplete&&t.debounce(t.props.onChangeComplete,r,n),t.props.onChange&&t.props.onChange(r,n)}},t.handleSwatchHover=function(e,n){if(l_(e)){var r=f_(e,e.h||t.state.oldHue);t.props.onSwatchHover&&t.props.onSwatchHover(r,n)}},t.state=m_({},f_(e.color,0)),t.debounce=XS((function(e,t,n){e(t,n)}),100),t}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(r,n),v_(r,[{key:"render",value:function(){var n={};return this.props.onSwatchHover&&(n.onSwatchHover=this.handleSwatchHover),e.createElement(t,m_({},this.props,this.state,{onChange:this.handleChange},n))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return m_({},f_(e.color,t.oldHue))}}]),r}(e.PureComponent||e.Component);return n.propTypes=m_({},t.propTypes),n.defaultProps=m_({},t.defaultProps,{color:{h:250,s:.5,l:.2,a:1}}),n},y_=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},b_=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function x_(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function w_(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function k_(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var S_=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},__=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"span";return function(r){function a(){var e,t,n;x_(this,a);for(var r=arguments.length,o=Array(r),i=0;i<r;i++)o[i]=arguments[i];return t=n=w_(this,(e=a.__proto__||Object.getPrototypeOf(a)).call.apply(e,[this].concat(o))),n.state={focus:!1},n.handleFocus=function(){return n.setState({focus:!0})},n.handleBlur=function(){return n.setState({focus:!1})},w_(n,t)}return k_(a,r),b_(a,[{key:"render",value:function(){return e.createElement(n,{onFocus:this.handleFocus,onBlur:this.handleBlur},e.createElement(t,y_({},this.props,this.state)))}}]),a}(e.Component)}((function(t){var n=t.color,r=t.style,a=t.onClick,o=void 0===a?function(){}:a,i=t.onHover,s=t.title,u=void 0===s?n:s,c=t.children,l=t.focus,f=t.focusStyle,d=void 0===f?{}:f,p="transparent"===n,h=(0,wx.ZP)({default:{swatch:S_({background:n,height:"100%",width:"100%",cursor:"pointer",position:"relative",outline:"none"},r,l?d:{})}}),m={};return i&&(m.onMouseOver=function(e){return i(n,e)}),e.createElement("div",S_({style:h.swatch,onClick:function(e){return o(n,e)},title:u,tabIndex:0,onKeyDown:function(e){return 13===e.keyCode&&o(n,e)}},m),c,p&&e.createElement(Cx,{borderRadius:h.swatch.borderRadius,boxShadow:"inset 0 0 0 1px rgba(0,0,0,0.1)"}))})),N_=function(t){var n=t.direction,r=(0,wx.ZP)({default:{picker:{width:"18px",height:"18px",borderRadius:"50%",transform:"translate(-9px, -1px)",backgroundColor:"rgb(248, 248, 248)",boxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.37)"}},vertical:{picker:{transform:"translate(-3px, -9px)"}}},{vertical:"vertical"===n});return e.createElement("div",{style:r.picker})},E_=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},C_=function(t){var n=t.rgb,r=t.hsl,a=t.width,o=t.height,i=t.onChange,s=t.direction,u=t.style,c=t.renderers,l=t.pointer,f=t.className,d=void 0===f?"":f,p=(0,wx.ZP)({default:{picker:{position:"relative",width:a,height:o},alpha:{radius:"2px",style:u}}});return e.createElement("div",{style:p.picker,className:"alpha-picker "+d},e.createElement(Mx,E_({},p.alpha,{rgb:n,hsl:r,pointer:l,renderers:c,onChange:i,direction:s})))};C_.defaultProps={width:"316px",height:"16px",direction:"horizontal",pointer:N_};g_(C_);var T_=function(e,t){for(var n=-1,r=null==e?0:e.length,a=Array(r);++n<r;)a[n]=t(e[n],n,e);return a};var I_=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this};var O_=function(e){return this.__data__.has(e)};function A_(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new tk;++t<n;)this.add(e[t])}A_.prototype.add=A_.prototype.push=I_,A_.prototype.has=O_;var D_=A_;var M_=function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1};var R_=function(e,t){return e.has(t)};var P_=function(e,t,n,r,a,o){var i=1&n,s=e.length,u=t.length;if(s!=u&&!(i&&u>s))return!1;var c=o.get(e),l=o.get(t);if(c&&l)return c==t&&l==e;var f=-1,d=!0,p=2&n?new D_:void 0;for(o.set(e,t),o.set(t,e);++f<s;){var h=e[f],m=t[f];if(r)var v=i?r(m,h,f,t,e,o):r(h,m,f,e,t,o);if(void 0!==v){if(v)continue;d=!1;break}if(p){if(!M_(t,(function(e,t){if(!R_(p,t)&&(h===e||a(h,e,n,r,o)))return p.push(t)}))){d=!1;break}}else if(h!==m&&!a(h,m,n,r,o)){d=!1;break}}return o.delete(e),o.delete(t),d};var j_=function(e){var t=-1,n=Array(e.size);return e.forEach((function(e,r){n[++t]=[r,e]})),n};var F_=function(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n},L_=lw?lw.prototype:void 0,B_=L_?L_.valueOf:void 0;var z_=function(e,t,n,r,a,o,i){switch(n){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!o(new vk(e),new vk(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return Kx(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var s=j_;case"[object Set]":var u=1&r;if(s||(s=F_),e.size!=t.size&&!u)return!1;var c=i.get(e);if(c)return c==t;r|=2,i.set(e,t);var l=P_(s(e),s(t),r,a,o,i);return i.delete(e),l;case"[object Symbol]":if(B_)return B_.call(e)==B_.call(t)}return!1};var Z_=function(e,t){for(var n=-1,r=t.length,a=e.length;++n<r;)e[a+n]=t[n];return e};var V_=function(e,t,n){var r=t(e);return Pk(e)?r:Z_(r,n(e))};var U_=function(e,t){for(var n=-1,r=null==e?0:e.length,a=0,o=[];++n<r;){var i=e[n];t(i,n,e)&&(o[a++]=i)}return o};var q_=function(){return[]},W_=Object.prototype.propertyIsEnumerable,H_=Object.getOwnPropertySymbols,G_=H_?function(e){return null==e?[]:(e=Object(e),U_(H_(e),(function(t){return W_.call(e,t)})))}:q_;var K_=function(e){return V_(e,a_,G_)},X_=Object.prototype.hasOwnProperty;var Y_=function(e,t,n,r,a,o){var i=1&n,s=K_(e),u=s.length;if(u!=K_(t).length&&!i)return!1;for(var c=u;c--;){var l=s[c];if(!(i?l in t:X_.call(t,l)))return!1}var f=o.get(e),d=o.get(t);if(f&&d)return f==t&&d==e;var p=!0;o.set(e,t),o.set(t,e);for(var h=i;++c<u;){var m=e[l=s[c]],v=t[l];if(r)var g=i?r(v,m,l,t,e,o):r(m,v,l,e,t,o);if(!(void 0===g?m===v||a(m,v,n,r,o):g)){p=!1;break}h||(h="constructor"==l)}if(p&&!h){var y=e.constructor,b=t.constructor;y==b||!("constructor"in e)||!("constructor"in t)||"function"==typeof y&&y instanceof y&&"function"==typeof b&&b instanceof b||(p=!1)}return o.delete(e),o.delete(t),p},$_=Pw(cw,"DataView"),J_=Pw(cw,"Promise"),Q_=Pw(cw,"Set"),eN=Pw(cw,"WeakMap"),tN="[object Map]",nN="[object Promise]",rN="[object Set]",aN="[object WeakMap]",oN="[object DataView]",iN=Ew($_),sN=Ew(jw),uN=Ew(J_),cN=Ew(Q_),lN=Ew(eN),fN=bw;($_&&fN(new $_(new ArrayBuffer(1)))!=oN||jw&&fN(new jw)!=tN||J_&&fN(J_.resolve())!=nN||Q_&&fN(new Q_)!=rN||eN&&fN(new eN)!=aN)&&(fN=function(e){var t=bw(e),n="[object Object]"==t?e.constructor:void 0,r=n?Ew(n):"";if(r)switch(r){case iN:return oN;case sN:return tN;case uN:return nN;case cN:return rN;case lN:return aN}return t});var dN=fN,pN="[object Arguments]",hN="[object Array]",mN="[object Object]",vN=Object.prototype.hasOwnProperty;var gN=function(e,t,n,r,a,o){var i=Pk(e),s=Pk(t),u=i?hN:dN(e),c=s?hN:dN(t),l=(u=u==pN?mN:u)==mN,f=(c=c==pN?mN:c)==mN,d=u==c;if(d&&Uk(e)){if(!Uk(t))return!1;i=!0,l=!1}if(d&&!l)return o||(o=new ak),i||aS(e)?P_(e,t,n,r,a,o):z_(e,t,u,n,r,a,o);if(!(1&n)){var p=l&&vN.call(e,"__wrapped__"),h=f&&vN.call(t,"__wrapped__");if(p||h){var m=p?e.value():e,v=h?t.value():t;return o||(o=new ak),a(m,v,n,r,o)}}return!!d&&(o||(o=new ak),Y_(e,t,n,r,a,o))};var yN=function e(t,n,r,a,o){return t===n||(null==t||null==n||!Tk(t)&&!Tk(n)?t!==t&&n!==n:gN(t,n,r,a,e,o))};var bN=function(e,t,n,r){var a=n.length,o=a,i=!r;if(null==e)return!o;for(e=Object(e);a--;){var s=n[a];if(i&&s[2]?s[1]!==e[s[0]]:!(s[0]in e))return!1}for(;++a<o;){var u=(s=n[a])[0],c=e[u],l=s[1];if(i&&s[2]){if(void 0===c&&!(u in e))return!1}else{var f=new ak;if(r)var d=r(c,l,u,e,t,f);if(!(void 0===d?yN(l,c,3,r,f):d))return!1}}return!0};var xN=function(e){return e===e&&!xw(e)};var wN=function(e){for(var t=a_(e),n=t.length;n--;){var r=t[n],a=e[r];t[n]=[r,a,xN(a)]}return t};var kN=function(e,t){return function(n){return null!=n&&(n[e]===t&&(void 0!==t||e in Object(n)))}};var SN=function(e){var t=wN(e);return 1==t.length&&t[0][2]?kN(t[0][0],t[0][1]):function(n){return n===e||bN(n,e,t)}},_N=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,NN=/^\w*$/;var EN=function(e,t){if(Pk(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!ZS(e))||(NN.test(e)||!_N.test(e)||null!=t&&e in Object(t))};function CN(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError("Expected a function");var n=function n(){var r=arguments,a=t?t.apply(this,r):r[0],o=n.cache;if(o.has(a))return o.get(a);var i=e.apply(this,r);return n.cache=o.set(a,i)||o,i};return n.cache=new(CN.Cache||tk),n}CN.Cache=tk;var TN=CN;var IN=function(e){var t=TN(e,(function(e){return 500===n.size&&n.clear(),e})),n=t.cache;return t},ON=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,AN=/\\(\\)?/g,DN=IN((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(ON,(function(e,n,r,a){t.push(r?a.replace(AN,"$1"):n||e)})),t})),MN=DN,RN=lw?lw.prototype:void 0,PN=RN?RN.toString:void 0;var jN=function e(t){if("string"==typeof t)return t;if(Pk(t))return T_(t,e)+"";if(ZS(t))return PN?PN.call(t):"";var n=t+"";return"0"==n&&1/t==-Infinity?"-0":n};var FN=function(e){return null==e?"":jN(e)};var LN=function(e,t){return Pk(e)?e:EN(e,t)?[e]:MN(FN(e))};var BN=function(e){if("string"==typeof e||ZS(e))return e;var t=e+"";return"0"==t&&1/e==-Infinity?"-0":t};var zN=function(e,t){for(var n=0,r=(t=LN(t,e)).length;null!=e&&n<r;)e=e[BN(t[n++])];return n&&n==r?e:void 0};var ZN=function(e,t,n){var r=null==e?void 0:zN(e,t);return void 0===r?n:r};var VN=function(e,t){return null!=e&&t in Object(e)};var UN=function(e,t,n){for(var r=-1,a=(t=LN(t,e)).length,o=!1;++r<a;){var i=BN(t[r]);if(!(o=null!=e&&n(e,i)))break;e=e[i]}return o||++r!=a?o:!!(a=null==e?0:e.length)&&jk(a)&&fS(i,a)&&(Pk(e)||Rk(e))};var qN=function(e,t){return null!=e&&UN(e,t,VN)};var WN=function(e,t){return EN(e)&&xN(t)?kN(BN(e),t):function(n){var r=ZN(n,e);return void 0===r&&r===t?qN(n,e):yN(t,r,3)}};var HN=function(e){return function(t){return null==t?void 0:t[e]}};var GN=function(e){return function(t){return zN(t,e)}};var KN=function(e){return EN(e)?HN(BN(e)):GN(e)};var XN=function(e){return"function"==typeof e?e:null==e?wS:"object"==typeof e?Pk(e)?WN(e[0],e[1]):SN(e):KN(e)};var YN=function(e,t){var n=-1,r=Fk(e)?Array(e.length):[];return o_(e,(function(e,a,o){r[++n]=t(e,a,o)})),r};var $N=function(e,t){return(Pk(e)?T_:YN)(e,XN(t,3))},JN=function(t){var n=t.colors,r=t.onClick,a=t.onSwatchHover,o=(0,wx.ZP)({default:{swatches:{marginRight:"-10px"},swatch:{width:"22px",height:"22px",float:"left",marginRight:"10px",marginBottom:"10px",borderRadius:"4px"},clear:{clear:"both"}}});return e.createElement("div",{style:o.swatches},$N(n,(function(t){return e.createElement(__,{key:t,color:t,style:o.swatch,onClick:r,onHover:a,focusStyle:{boxShadow:"0 0 4px "+t}})})),e.createElement("div",{style:o.clear}))},QN=function(t){var n=t.onChange,r=t.onSwatchHover,a=t.hex,o=t.colors,i=t.width,s=t.triangle,u=t.styles,c=void 0===u?{}:u,l=t.className,f=void 0===l?"":l,d="transparent"===a,p=function(e,t){d_(e)&&n({hex:e,source:"hex"},t)},h=(0,wx.ZP)(MS({default:{card:{width:i,background:"#fff",boxShadow:"0 1px rgba(0,0,0,.1)",borderRadius:"6px",position:"relative"},head:{height:"110px",background:a,borderRadius:"6px 6px 0 0",display:"flex",alignItems:"center",justifyContent:"center",position:"relative"},body:{padding:"10px"},label:{fontSize:"18px",color:p_(a),position:"relative"},triangle:{width:"0px",height:"0px",borderStyle:"solid",borderWidth:"0 10px 10px 10px",borderColor:"transparent transparent "+a+" transparent",position:"absolute",top:"-10px",left:"50%",marginLeft:"-10px"},input:{width:"100%",fontSize:"12px",color:"#666",border:"0px",outline:"none",height:"22px",boxShadow:"inset 0 0 0 1px #ddd",borderRadius:"4px",padding:"0 7px",boxSizing:"border-box"}},"hide-triangle":{triangle:{display:"none"}}},c),{"hide-triangle":"hide"===s});return e.createElement("div",{style:h.card,className:"block-picker "+f},e.createElement("div",{style:h.triangle}),e.createElement("div",{style:h.head},d&&e.createElement(Cx,{borderRadius:"6px 6px 0 0"}),e.createElement("div",{style:h.label},a)),e.createElement("div",{style:h.body},e.createElement(JN,{colors:o,onClick:p,onSwatchHover:r}),e.createElement(Lx,{style:{input:h.input},value:a,onChange:p})))};QN.propTypes={width:Hx().oneOfType([Hx().string,Hx().number]),colors:Hx().arrayOf(Hx().string),triangle:Hx().oneOf(["top","hide"]),styles:Hx().object},QN.defaultProps={width:170,colors:["#D9E3F0","#F47373","#697689","#37D67A","#2CCCE4","#555555","#dce775","#ff8a65","#ba68c8"],triangle:"top",styles:{}};g_(QN);var eE={50:"#ffebee",100:"#ffcdd2",200:"#ef9a9a",300:"#e57373",400:"#ef5350",500:"#f44336",600:"#e53935",700:"#d32f2f",800:"#c62828",900:"#b71c1c",a100:"#ff8a80",a200:"#ff5252",a400:"#ff1744",a700:"#d50000"},tE={50:"#fce4ec",100:"#f8bbd0",200:"#f48fb1",300:"#f06292",400:"#ec407a",500:"#e91e63",600:"#d81b60",700:"#c2185b",800:"#ad1457",900:"#880e4f",a100:"#ff80ab",a200:"#ff4081",a400:"#f50057",a700:"#c51162"},nE={50:"#f3e5f5",100:"#e1bee7",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",600:"#8e24aa",700:"#7b1fa2",800:"#6a1b9a",900:"#4a148c",a100:"#ea80fc",a200:"#e040fb",a400:"#d500f9",a700:"#aa00ff"},rE={50:"#ede7f6",100:"#d1c4e9",200:"#b39ddb",300:"#9575cd",400:"#7e57c2",500:"#673ab7",600:"#5e35b1",700:"#512da8",800:"#4527a0",900:"#311b92",a100:"#b388ff",a200:"#7c4dff",a400:"#651fff",a700:"#6200ea"},aE={50:"#e8eaf6",100:"#c5cae9",200:"#9fa8da",300:"#7986cb",400:"#5c6bc0",500:"#3f51b5",600:"#3949ab",700:"#303f9f",800:"#283593",900:"#1a237e",a100:"#8c9eff",a200:"#536dfe",a400:"#3d5afe",a700:"#304ffe"},oE={50:"#e3f2fd",100:"#bbdefb",200:"#90caf9",300:"#64b5f6",400:"#42a5f5",500:"#2196f3",600:"#1e88e5",700:"#1976d2",800:"#1565c0",900:"#0d47a1",a100:"#82b1ff",a200:"#448aff",a400:"#2979ff",a700:"#2962ff"},iE={50:"#e1f5fe",100:"#b3e5fc",200:"#81d4fa",300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",600:"#039be5",700:"#0288d1",800:"#0277bd",900:"#01579b",a100:"#80d8ff",a200:"#40c4ff",a400:"#00b0ff",a700:"#0091ea"},sE={50:"#e0f7fa",100:"#b2ebf2",200:"#80deea",300:"#4dd0e1",400:"#26c6da",500:"#00bcd4",600:"#00acc1",700:"#0097a7",800:"#00838f",900:"#006064",a100:"#84ffff",a200:"#18ffff",a400:"#00e5ff",a700:"#00b8d4"},uE={50:"#e0f2f1",100:"#b2dfdb",200:"#80cbc4",300:"#4db6ac",400:"#26a69a",500:"#009688",600:"#00897b",700:"#00796b",800:"#00695c",900:"#004d40",a100:"#a7ffeb",a200:"#64ffda",a400:"#1de9b6",a700:"#00bfa5"},cE={50:"#e8f5e9",100:"#c8e6c9",200:"#a5d6a7",300:"#81c784",400:"#66bb6a",500:"#4caf50",600:"#43a047",700:"#388e3c",800:"#2e7d32",900:"#1b5e20",a100:"#b9f6ca",a200:"#69f0ae",a400:"#00e676",a700:"#00c853"},lE={50:"#f1f8e9",100:"#dcedc8",200:"#c5e1a5",300:"#aed581",400:"#9ccc65",500:"#8bc34a",600:"#7cb342",700:"#689f38",800:"#558b2f",900:"#33691e",a100:"#ccff90",a200:"#b2ff59",a400:"#76ff03",a700:"#64dd17"},fE={50:"#f9fbe7",100:"#f0f4c3",200:"#e6ee9c",300:"#dce775",400:"#d4e157",500:"#cddc39",600:"#c0ca33",700:"#afb42b",800:"#9e9d24",900:"#827717",a100:"#f4ff81",a200:"#eeff41",a400:"#c6ff00",a700:"#aeea00"},dE={50:"#fffde7",100:"#fff9c4",200:"#fff59d",300:"#fff176",400:"#ffee58",500:"#ffeb3b",600:"#fdd835",700:"#fbc02d",800:"#f9a825",900:"#f57f17",a100:"#ffff8d",a200:"#ffff00",a400:"#ffea00",a700:"#ffd600"},pE={50:"#fff8e1",100:"#ffecb3",200:"#ffe082",300:"#ffd54f",400:"#ffca28",500:"#ffc107",600:"#ffb300",700:"#ffa000",800:"#ff8f00",900:"#ff6f00",a100:"#ffe57f",a200:"#ffd740",a400:"#ffc400",a700:"#ffab00"},hE={50:"#fff3e0",100:"#ffe0b2",200:"#ffcc80",300:"#ffb74d",400:"#ffa726",500:"#ff9800",600:"#fb8c00",700:"#f57c00",800:"#ef6c00",900:"#e65100",a100:"#ffd180",a200:"#ffab40",a400:"#ff9100",a700:"#ff6d00"},mE={50:"#fbe9e7",100:"#ffccbc",200:"#ffab91",300:"#ff8a65",400:"#ff7043",500:"#ff5722",600:"#f4511e",700:"#e64a19",800:"#d84315",900:"#bf360c",a100:"#ff9e80",a200:"#ff6e40",a400:"#ff3d00",a700:"#dd2c00"},vE={50:"#efebe9",100:"#d7ccc8",200:"#bcaaa4",300:"#a1887f",400:"#8d6e63",500:"#795548",600:"#6d4c41",700:"#5d4037",800:"#4e342e",900:"#3e2723"},gE={50:"#eceff1",100:"#cfd8dc",200:"#b0bec5",300:"#90a4ae",400:"#78909c",500:"#607d8b",600:"#546e7a",700:"#455a64",800:"#37474f",900:"#263238"},yE=function(t){var n=t.color,r=t.onClick,a=t.onSwatchHover,o=t.hover,i=t.active,s=t.circleSize,u=t.circleSpacing,c=(0,wx.ZP)({default:{swatch:{width:s,height:s,marginRight:u,marginBottom:u,transform:"scale(1)",transition:"100ms transform ease"},Swatch:{borderRadius:"50%",background:"transparent",boxShadow:"inset 0 0 0 "+(s/2+1)+"px "+n,transition:"100ms box-shadow ease"}},hover:{swatch:{transform:"scale(1.2)"}},active:{Swatch:{boxShadow:"inset 0 0 0 3px "+n}}},{hover:o,active:i});return e.createElement("div",{style:c.swatch},e.createElement(__,{style:c.Swatch,color:n,onClick:r,onHover:a,focusStyle:{boxShadow:c.Swatch.boxShadow+", 0 0 5px "+n}}))};yE.defaultProps={circleSize:28,circleSpacing:14};var bE=(0,wx.tz)(yE),xE=function(t){var n=t.width,r=t.onChange,a=t.onSwatchHover,o=t.colors,i=t.hex,s=t.circleSize,u=t.styles,c=void 0===u?{}:u,l=t.circleSpacing,f=t.className,d=void 0===f?"":f,p=(0,wx.ZP)(MS({default:{card:{width:n,display:"flex",flexWrap:"wrap",marginRight:-l,marginBottom:-l}}},c)),h=function(e,t){return r({hex:e,source:"hex"},t)};return e.createElement("div",{style:p.card,className:"circle-picker "+d},$N(o,(function(t){return e.createElement(bE,{key:t,color:t,onClick:h,onSwatchHover:a,active:i===t.toLowerCase(),circleSize:s,circleSpacing:l})})))};xE.propTypes={width:Hx().oneOfType([Hx().string,Hx().number]),circleSize:Hx().number,circleSpacing:Hx().number,styles:Hx().object},xE.defaultProps={width:252,circleSize:28,circleSpacing:14,colors:[eE[500],tE[500],nE[500],rE[500],aE[500],oE[500],iE[500],sE[500],uE[500],cE[500],lE[500],fE[500],dE[500],pE[500],hE[500],mE[500],vE[500],gE[500]],styles:{}};g_(xE);var wE=function(e){return void 0===e},kE=n(2403),SE=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var _E=function(t){function n(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this));return t.toggleViews=function(){"hex"===t.state.view?t.setState({view:"rgb"}):"rgb"===t.state.view?t.setState({view:"hsl"}):"hsl"===t.state.view&&(1===t.props.hsl.a?t.setState({view:"hex"}):t.setState({view:"rgb"}))},t.handleChange=function(e,n){e.hex?d_(e.hex)&&t.props.onChange({hex:e.hex,source:"hex"},n):e.r||e.g||e.b?t.props.onChange({r:e.r||t.props.rgb.r,g:e.g||t.props.rgb.g,b:e.b||t.props.rgb.b,source:"rgb"},n):e.a?(e.a<0?e.a=0:e.a>1&&(e.a=1),t.props.onChange({h:t.props.hsl.h,s:t.props.hsl.s,l:t.props.hsl.l,a:Math.round(100*e.a)/100,source:"rgb"},n)):(e.h||e.s||e.l)&&("string"===typeof e.s&&e.s.includes("%")&&(e.s=e.s.replace("%","")),"string"===typeof e.l&&e.l.includes("%")&&(e.l=e.l.replace("%","")),1==e.s?e.s=.01:1==e.l&&(e.l=.01),t.props.onChange({h:e.h||t.props.hsl.h,s:Number(wE(e.s)?t.props.hsl.s:e.s),l:Number(wE(e.l)?t.props.hsl.l:e.l),source:"hsl"},n))},t.showHighlight=function(e){e.currentTarget.style.background="#eee"},t.hideHighlight=function(e){e.currentTarget.style.background="transparent"},1!==e.hsl.a&&"hex"===e.view?t.state={view:"rgb"}:t.state={view:e.view},t}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,t),SE(n,[{key:"render",value:function(){var t=this,n=(0,wx.ZP)({default:{wrap:{paddingTop:"16px",display:"flex"},fields:{flex:"1",display:"flex",marginLeft:"-6px"},field:{paddingLeft:"6px",width:"100%"},alpha:{paddingLeft:"6px",width:"100%"},toggle:{width:"32px",textAlign:"right",position:"relative"},icon:{marginRight:"-4px",marginTop:"12px",cursor:"pointer",position:"relative"},iconHighlight:{position:"absolute",width:"24px",height:"28px",background:"#eee",borderRadius:"4px",top:"10px",left:"12px",display:"none"},input:{fontSize:"11px",color:"#333",width:"100%",borderRadius:"2px",border:"none",boxShadow:"inset 0 0 0 1px #dadada",height:"21px",textAlign:"center"},label:{textTransform:"uppercase",fontSize:"11px",lineHeight:"11px",color:"#969696",textAlign:"center",display:"block",marginTop:"12px"},svg:{fill:"#333",width:"24px",height:"24px",border:"1px transparent solid",borderRadius:"5px"}},disableAlpha:{alpha:{display:"none"}}},this.props,this.state),r=void 0;return"hex"===this.state.view?r=e.createElement("div",{style:n.fields,className:"flexbox-fix"},e.createElement("div",{style:n.field},e.createElement(Lx,{style:{input:n.input,label:n.label},label:"hex",value:this.props.hex,onChange:this.handleChange}))):"rgb"===this.state.view?r=e.createElement("div",{style:n.fields,className:"flexbox-fix"},e.createElement("div",{style:n.field},e.createElement(Lx,{style:{input:n.input,label:n.label},label:"r",value:this.props.rgb.r,onChange:this.handleChange})),e.createElement("div",{style:n.field},e.createElement(Lx,{style:{input:n.input,label:n.label},label:"g",value:this.props.rgb.g,onChange:this.handleChange})),e.createElement("div",{style:n.field},e.createElement(Lx,{style:{input:n.input,label:n.label},label:"b",value:this.props.rgb.b,onChange:this.handleChange})),e.createElement("div",{style:n.alpha},e.createElement(Lx,{style:{input:n.input,label:n.label},label:"a",value:this.props.rgb.a,arrowOffset:.01,onChange:this.handleChange}))):"hsl"===this.state.view&&(r=e.createElement("div",{style:n.fields,className:"flexbox-fix"},e.createElement("div",{style:n.field},e.createElement(Lx,{style:{input:n.input,label:n.label},label:"h",value:Math.round(this.props.hsl.h),onChange:this.handleChange})),e.createElement("div",{style:n.field},e.createElement(Lx,{style:{input:n.input,label:n.label},label:"s",value:Math.round(100*this.props.hsl.s)+"%",onChange:this.handleChange})),e.createElement("div",{style:n.field},e.createElement(Lx,{style:{input:n.input,label:n.label},label:"l",value:Math.round(100*this.props.hsl.l)+"%",onChange:this.handleChange})),e.createElement("div",{style:n.alpha},e.createElement(Lx,{style:{input:n.input,label:n.label},label:"a",value:this.props.hsl.a,arrowOffset:.01,onChange:this.handleChange})))),e.createElement("div",{style:n.wrap,className:"flexbox-fix"},r,e.createElement("div",{style:n.toggle},e.createElement("div",{style:n.icon,onClick:this.toggleViews,ref:function(e){return t.icon=e}},e.createElement(kE.Z,{style:n.svg,onMouseOver:this.showHighlight,onMouseEnter:this.showHighlight,onMouseOut:this.hideHighlight}))))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return 1!==e.hsl.a&&"hex"===t.view?{view:"rgb"}:null}}]),n}(e.Component);_E.defaultProps={view:"hex"};var NE=_E,EE=function(){var t=(0,wx.ZP)({default:{picker:{width:"12px",height:"12px",borderRadius:"6px",transform:"translate(-6px, -1px)",backgroundColor:"rgb(248, 248, 248)",boxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.37)"}}});return e.createElement("div",{style:t.picker})},CE=function(){var t=(0,wx.ZP)({default:{picker:{width:"12px",height:"12px",borderRadius:"6px",boxShadow:"inset 0 0 0 1px #fff",transform:"translate(-6px, -6px)"}}});return e.createElement("div",{style:t.picker})},TE=function(t){var n=t.width,r=t.onChange,a=t.disableAlpha,o=t.rgb,i=t.hsl,s=t.hsv,u=t.hex,c=t.renderers,l=t.styles,f=void 0===l?{}:l,d=t.className,p=void 0===d?"":d,h=t.defaultView,m=(0,wx.ZP)(MS({default:{picker:{width:n,background:"#fff",borderRadius:"2px",boxShadow:"0 0 2px rgba(0,0,0,.3), 0 4px 8px rgba(0,0,0,.3)",boxSizing:"initial",fontFamily:"Menlo"},saturation:{width:"100%",paddingBottom:"55%",position:"relative",borderRadius:"2px 2px 0 0",overflow:"hidden"},Saturation:{radius:"2px 2px 0 0"},body:{padding:"16px 16px 12px"},controls:{display:"flex"},color:{width:"32px"},swatch:{marginTop:"6px",width:"16px",height:"16px",borderRadius:"8px",position:"relative",overflow:"hidden"},active:{absolute:"0px 0px 0px 0px",borderRadius:"8px",boxShadow:"inset 0 0 0 1px rgba(0,0,0,.1)",background:"rgba("+o.r+", "+o.g+", "+o.b+", "+o.a+")",zIndex:"2"},toggles:{flex:"1"},hue:{height:"10px",position:"relative",marginBottom:"8px"},Hue:{radius:"2px"},alpha:{height:"10px",position:"relative"},Alpha:{radius:"2px"}},disableAlpha:{color:{width:"22px"},alpha:{display:"none"},hue:{marginBottom:"0px"},swatch:{width:"10px",height:"10px",marginTop:"0px"}}},f),{disableAlpha:a});return e.createElement("div",{style:m.picker,className:"chrome-picker "+p},e.createElement("div",{style:m.saturation},e.createElement(QS,{style:m.Saturation,hsl:i,hsv:s,pointer:CE,onChange:r})),e.createElement("div",{style:m.body},e.createElement("div",{style:m.controls,className:"flexbox-fix"},e.createElement("div",{style:m.color},e.createElement("div",{style:m.swatch},e.createElement("div",{style:m.active}),e.createElement(Cx,{renderers:c}))),e.createElement("div",{style:m.toggles},e.createElement("div",{style:m.hue},e.createElement(qx,{style:m.Hue,hsl:i,pointer:EE,onChange:r})),e.createElement("div",{style:m.alpha},e.createElement(Mx,{style:m.Alpha,rgb:o,hsl:i,pointer:EE,renderers:c,onChange:r})))),e.createElement(NE,{rgb:o,hsl:i,hex:u,view:h,onChange:r,disableAlpha:a})))};TE.propTypes={width:Hx().oneOfType([Hx().string,Hx().number]),disableAlpha:Hx().bool,styles:Hx().object,defaultView:Hx().oneOf(["hex","rgb","hsl"])},TE.defaultProps={width:225,disableAlpha:!1,styles:{}};g_(TE);var IE=function(t){var n=t.color,r=t.onClick,a=void 0===r?function(){}:r,o=t.onSwatchHover,i=t.active,s=(0,wx.ZP)({default:{color:{background:n,width:"15px",height:"15px",float:"left",marginRight:"5px",marginBottom:"5px",position:"relative",cursor:"pointer"},dot:{absolute:"5px 5px 5px 5px",background:p_(n),borderRadius:"50%",opacity:"0"}},active:{dot:{opacity:"1"}},"color-#FFFFFF":{color:{boxShadow:"inset 0 0 0 1px #ddd"},dot:{background:"#000"}},transparent:{dot:{background:"#000"}}},{active:i,"color-#FFFFFF":"#FFFFFF"===n,transparent:"transparent"===n});return e.createElement(__,{style:s.color,color:n,onClick:a,onHover:o,focusStyle:{boxShadow:"0 0 4px "+n}},e.createElement("div",{style:s.dot}))},OE=function(t){var n=t.hex,r=t.rgb,a=t.onChange,o=(0,wx.ZP)({default:{fields:{display:"flex",paddingBottom:"6px",paddingRight:"5px",position:"relative"},active:{position:"absolute",top:"6px",left:"5px",height:"9px",width:"9px",background:n},HEXwrap:{flex:"6",position:"relative"},HEXinput:{width:"80%",padding:"0px",paddingLeft:"20%",border:"none",outline:"none",background:"none",fontSize:"12px",color:"#333",height:"16px"},HEXlabel:{display:"none"},RGBwrap:{flex:"3",position:"relative"},RGBinput:{width:"70%",padding:"0px",paddingLeft:"30%",border:"none",outline:"none",background:"none",fontSize:"12px",color:"#333",height:"16px"},RGBlabel:{position:"absolute",top:"3px",left:"0px",lineHeight:"16px",textTransform:"uppercase",fontSize:"12px",color:"#999"}}}),i=function(e,t){e.r||e.g||e.b?a({r:e.r||r.r,g:e.g||r.g,b:e.b||r.b,source:"rgb"},t):a({hex:e.hex,source:"hex"},t)};return e.createElement("div",{style:o.fields,className:"flexbox-fix"},e.createElement("div",{style:o.active}),e.createElement(Lx,{style:{wrap:o.HEXwrap,input:o.HEXinput,label:o.HEXlabel},label:"hex",value:n,onChange:i}),e.createElement(Lx,{style:{wrap:o.RGBwrap,input:o.RGBinput,label:o.RGBlabel},label:"r",value:r.r,onChange:i}),e.createElement(Lx,{style:{wrap:o.RGBwrap,input:o.RGBinput,label:o.RGBlabel},label:"g",value:r.g,onChange:i}),e.createElement(Lx,{style:{wrap:o.RGBwrap,input:o.RGBinput,label:o.RGBlabel},label:"b",value:r.b,onChange:i}))},AE=function(t){var n=t.onChange,r=t.onSwatchHover,a=t.colors,o=t.hex,i=t.rgb,s=t.styles,u=void 0===s?{}:s,c=t.className,l=void 0===c?"":c,f=(0,wx.ZP)(MS({default:{Compact:{background:"#f6f6f6",radius:"4px"},compact:{paddingTop:"5px",paddingLeft:"5px",boxSizing:"initial",width:"240px"},clear:{clear:"both"}}},u)),d=function(e,t){e.hex?d_(e.hex)&&n({hex:e.hex,source:"hex"},t):n(e,t)};return e.createElement(PS,{style:f.Compact,styles:u},e.createElement("div",{style:f.compact,className:"compact-picker "+l},e.createElement("div",null,$N(a,(function(t){return e.createElement(IE,{key:t,color:t,active:t.toLowerCase()===o,onClick:d,onSwatchHover:r})})),e.createElement("div",{style:f.clear})),e.createElement(OE,{hex:o,rgb:i,onChange:d})))};AE.propTypes={colors:Hx().arrayOf(Hx().string),styles:Hx().object},AE.defaultProps={colors:["#4D4D4D","#999999","#FFFFFF","#F44E3B","#FE9200","#FCDC00","#DBDF00","#A4DD00","#68CCCA","#73D8FF","#AEA1FF","#FDA1FF","#333333","#808080","#cccccc","#D33115","#E27300","#FCC400","#B0BC00","#68BC00","#16A5A5","#009CE0","#7B64FF","#FA28FF","#000000","#666666","#B3B3B3","#9F0500","#C45100","#FB9E00","#808900","#194D33","#0C797D","#0062B1","#653294","#AB149E"],styles:{}};g_(AE);var DE=(0,wx.tz)((function(t){var n=t.hover,r=t.color,a=t.onClick,o=t.onSwatchHover,i={position:"relative",zIndex:"2",outline:"2px solid #fff",boxShadow:"0 0 5px 2px rgba(0,0,0,0.25)"},s=(0,wx.ZP)({default:{swatch:{width:"25px",height:"25px",fontSize:"0"}},hover:{swatch:i}},{hover:n});return e.createElement("div",{style:s.swatch},e.createElement(__,{color:r,onClick:a,onHover:o,focusStyle:i}))})),ME=function(t){var n=t.width,r=t.colors,a=t.onChange,o=t.onSwatchHover,i=t.triangle,s=t.styles,u=void 0===s?{}:s,c=t.className,l=void 0===c?"":c,f=(0,wx.ZP)(MS({default:{card:{width:n,background:"#fff",border:"1px solid rgba(0,0,0,0.2)",boxShadow:"0 3px 12px rgba(0,0,0,0.15)",borderRadius:"4px",position:"relative",padding:"5px",display:"flex",flexWrap:"wrap"},triangle:{position:"absolute",border:"7px solid transparent",borderBottomColor:"#fff"},triangleShadow:{position:"absolute",border:"8px solid transparent",borderBottomColor:"rgba(0,0,0,0.15)"}},"hide-triangle":{triangle:{display:"none"},triangleShadow:{display:"none"}},"top-left-triangle":{triangle:{top:"-14px",left:"10px"},triangleShadow:{top:"-16px",left:"9px"}},"top-right-triangle":{triangle:{top:"-14px",right:"10px"},triangleShadow:{top:"-16px",right:"9px"}},"bottom-left-triangle":{triangle:{top:"35px",left:"10px",transform:"rotate(180deg)"},triangleShadow:{top:"37px",left:"9px",transform:"rotate(180deg)"}},"bottom-right-triangle":{triangle:{top:"35px",right:"10px",transform:"rotate(180deg)"},triangleShadow:{top:"37px",right:"9px",transform:"rotate(180deg)"}}},u),{"hide-triangle":"hide"===i,"top-left-triangle":"top-left"===i,"top-right-triangle":"top-right"===i,"bottom-left-triangle":"bottom-left"===i,"bottom-right-triangle":"bottom-right"===i}),d=function(e,t){return a({hex:e,source:"hex"},t)};return e.createElement("div",{style:f.card,className:"github-picker "+l},e.createElement("div",{style:f.triangleShadow}),e.createElement("div",{style:f.triangle}),$N(r,(function(t){return e.createElement(DE,{color:t,key:t,onClick:d,onSwatchHover:o})})))};ME.propTypes={width:Hx().oneOfType([Hx().string,Hx().number]),colors:Hx().arrayOf(Hx().string),triangle:Hx().oneOf(["hide","top-left","top-right","bottom-left","bottom-right"]),styles:Hx().object},ME.defaultProps={width:200,colors:["#B80000","#DB3E00","#FCCB00","#008B02","#006B76","#1273DE","#004DCF","#5300EB","#EB9694","#FAD0C3","#FEF3BD","#C1E1C5","#BEDADC","#C4DEF6","#BED3F3","#D4C4FB"],triangle:"top-left",styles:{}};g_(ME);var RE=function(t){var n=t.direction,r=(0,wx.ZP)({default:{picker:{width:"18px",height:"18px",borderRadius:"50%",transform:"translate(-9px, -1px)",backgroundColor:"rgb(248, 248, 248)",boxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.37)"}},vertical:{picker:{transform:"translate(-3px, -9px)"}}},{vertical:"vertical"===n});return e.createElement("div",{style:r.picker})},PE=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},jE=function(t){var n=t.width,r=t.height,a=t.onChange,o=t.hsl,i=t.direction,s=t.pointer,u=t.styles,c=void 0===u?{}:u,l=t.className,f=void 0===l?"":l,d=(0,wx.ZP)(MS({default:{picker:{position:"relative",width:n,height:r},hue:{radius:"2px"}}},c));return e.createElement("div",{style:d.picker,className:"hue-picker "+f},e.createElement(qx,PE({},d.hue,{hsl:o,pointer:s,onChange:function(e){return a({a:1,h:e.h,l:.5,s:1})},direction:i})))};jE.propTypes={styles:Hx().object},jE.defaultProps={width:"316px",height:"16px",direction:"horizontal",pointer:RE,styles:{}};g_(jE),g_((function(t){var n=t.onChange,r=t.hex,a=t.rgb,o=t.styles,i=void 0===o?{}:o,s=t.className,u=void 0===s?"":s,c=(0,wx.ZP)(MS({default:{material:{width:"98px",height:"98px",padding:"16px",fontFamily:"Roboto"},HEXwrap:{position:"relative"},HEXinput:{width:"100%",marginTop:"12px",fontSize:"15px",color:"#333",padding:"0px",border:"0px",borderBottom:"2px solid "+r,outline:"none",height:"30px"},HEXlabel:{position:"absolute",top:"0px",left:"0px",fontSize:"11px",color:"#999999",textTransform:"capitalize"},Hex:{style:{}},RGBwrap:{position:"relative"},RGBinput:{width:"100%",marginTop:"12px",fontSize:"15px",color:"#333",padding:"0px",border:"0px",borderBottom:"1px solid #eee",outline:"none",height:"30px"},RGBlabel:{position:"absolute",top:"0px",left:"0px",fontSize:"11px",color:"#999999",textTransform:"capitalize"},split:{display:"flex",marginRight:"-10px",paddingTop:"11px"},third:{flex:"1",paddingRight:"10px"}}},i)),l=function(e,t){e.hex?d_(e.hex)&&n({hex:e.hex,source:"hex"},t):(e.r||e.g||e.b)&&n({r:e.r||a.r,g:e.g||a.g,b:e.b||a.b,source:"rgb"},t)};return e.createElement(PS,{styles:i},e.createElement("div",{style:c.material,className:"material-picker "+u},e.createElement(Lx,{style:{wrap:c.HEXwrap,input:c.HEXinput,label:c.HEXlabel},label:"hex",value:r,onChange:l}),e.createElement("div",{style:c.split,className:"flexbox-fix"},e.createElement("div",{style:c.third},e.createElement(Lx,{style:{wrap:c.RGBwrap,input:c.RGBinput,label:c.RGBlabel},label:"r",value:a.r,onChange:l})),e.createElement("div",{style:c.third},e.createElement(Lx,{style:{wrap:c.RGBwrap,input:c.RGBinput,label:c.RGBlabel},label:"g",value:a.g,onChange:l})),e.createElement("div",{style:c.third},e.createElement(Lx,{style:{wrap:c.RGBwrap,input:c.RGBinput,label:c.RGBlabel},label:"b",value:a.b,onChange:l})))))}));var FE=function(t){var n=t.onChange,r=t.rgb,a=t.hsv,o=t.hex,i=(0,wx.ZP)({default:{fields:{paddingTop:"5px",paddingBottom:"9px",width:"80px",position:"relative"},divider:{height:"5px"},RGBwrap:{position:"relative"},RGBinput:{marginLeft:"40%",width:"40%",height:"18px",border:"1px solid #888888",boxShadow:"inset 0 1px 1px rgba(0,0,0,.1), 0 1px 0 0 #ECECEC",marginBottom:"5px",fontSize:"13px",paddingLeft:"3px",marginRight:"10px"},RGBlabel:{left:"0px",top:"0px",width:"34px",textTransform:"uppercase",fontSize:"13px",height:"18px",lineHeight:"22px",position:"absolute"},HEXwrap:{position:"relative"},HEXinput:{marginLeft:"20%",width:"80%",height:"18px",border:"1px solid #888888",boxShadow:"inset 0 1px 1px rgba(0,0,0,.1), 0 1px 0 0 #ECECEC",marginBottom:"6px",fontSize:"13px",paddingLeft:"3px"},HEXlabel:{position:"absolute",top:"0px",left:"0px",width:"14px",textTransform:"uppercase",fontSize:"13px",height:"18px",lineHeight:"22px"},fieldSymbols:{position:"absolute",top:"5px",right:"-7px",fontSize:"13px"},symbol:{height:"20px",lineHeight:"22px",paddingBottom:"7px"}}}),s=function(e,t){e["#"]?d_(e["#"])&&n({hex:e["#"],source:"hex"},t):e.r||e.g||e.b?n({r:e.r||r.r,g:e.g||r.g,b:e.b||r.b,source:"rgb"},t):(e.h||e.s||e.v)&&n({h:e.h||a.h,s:e.s||a.s,v:e.v||a.v,source:"hsv"},t)};return e.createElement("div",{style:i.fields},e.createElement(Lx,{style:{wrap:i.RGBwrap,input:i.RGBinput,label:i.RGBlabel},label:"h",value:Math.round(a.h),onChange:s}),e.createElement(Lx,{style:{wrap:i.RGBwrap,input:i.RGBinput,label:i.RGBlabel},label:"s",value:Math.round(100*a.s),onChange:s}),e.createElement(Lx,{style:{wrap:i.RGBwrap,input:i.RGBinput,label:i.RGBlabel},label:"v",value:Math.round(100*a.v),onChange:s}),e.createElement("div",{style:i.divider}),e.createElement(Lx,{style:{wrap:i.RGBwrap,input:i.RGBinput,label:i.RGBlabel},label:"r",value:r.r,onChange:s}),e.createElement(Lx,{style:{wrap:i.RGBwrap,input:i.RGBinput,label:i.RGBlabel},label:"g",value:r.g,onChange:s}),e.createElement(Lx,{style:{wrap:i.RGBwrap,input:i.RGBinput,label:i.RGBlabel},label:"b",value:r.b,onChange:s}),e.createElement("div",{style:i.divider}),e.createElement(Lx,{style:{wrap:i.HEXwrap,input:i.HEXinput,label:i.HEXlabel},label:"#",value:o.replace("#",""),onChange:s}),e.createElement("div",{style:i.fieldSymbols},e.createElement("div",{style:i.symbol},"\xb0"),e.createElement("div",{style:i.symbol},"%"),e.createElement("div",{style:i.symbol},"%")))},LE=function(t){var n=t.hsl,r=(0,wx.ZP)({default:{picker:{width:"12px",height:"12px",borderRadius:"6px",boxShadow:"inset 0 0 0 1px #fff",transform:"translate(-6px, -6px)"}},"black-outline":{picker:{boxShadow:"inset 0 0 0 1px #000"}}},{"black-outline":n.l>.5});return e.createElement("div",{style:r.picker})},BE=function(){var t=(0,wx.ZP)({default:{triangle:{width:0,height:0,borderStyle:"solid",borderWidth:"4px 0 4px 6px",borderColor:"transparent transparent transparent #fff",position:"absolute",top:"1px",left:"1px"},triangleBorder:{width:0,height:0,borderStyle:"solid",borderWidth:"5px 0 5px 8px",borderColor:"transparent transparent transparent #555"},left:{Extend:"triangleBorder",transform:"translate(-13px, -4px)"},leftInside:{Extend:"triangle",transform:"translate(-8px, -5px)"},right:{Extend:"triangleBorder",transform:"translate(20px, -14px) rotate(180deg)"},rightInside:{Extend:"triangle",transform:"translate(-8px, -5px)"}}});return e.createElement("div",{style:t.pointer},e.createElement("div",{style:t.left},e.createElement("div",{style:t.leftInside})),e.createElement("div",{style:t.right},e.createElement("div",{style:t.rightInside})))},zE=function(t){var n=t.onClick,r=t.label,a=t.children,o=t.active,i=(0,wx.ZP)({default:{button:{backgroundImage:"linear-gradient(-180deg, #FFFFFF 0%, #E6E6E6 100%)",border:"1px solid #878787",borderRadius:"2px",height:"20px",boxShadow:"0 1px 0 0 #EAEAEA",fontSize:"14px",color:"#000",lineHeight:"20px",textAlign:"center",marginBottom:"10px",cursor:"pointer"}},active:{button:{boxShadow:"0 0 0 1px #878787"}}},{active:o});return e.createElement("div",{style:i.button,onClick:n},r||a)},ZE=function(t){var n=t.rgb,r=t.currentColor,a=(0,wx.ZP)({default:{swatches:{border:"1px solid #B3B3B3",borderBottom:"1px solid #F0F0F0",marginBottom:"2px",marginTop:"1px"},new:{height:"34px",background:"rgb("+n.r+","+n.g+", "+n.b+")",boxShadow:"inset 1px 0 0 #000, inset -1px 0 0 #000, inset 0 1px 0 #000"},current:{height:"34px",background:r,boxShadow:"inset 1px 0 0 #000, inset -1px 0 0 #000, inset 0 -1px 0 #000"},label:{fontSize:"14px",color:"#000",textAlign:"center"}}});return e.createElement("div",null,e.createElement("div",{style:a.label},"new"),e.createElement("div",{style:a.swatches},e.createElement("div",{style:a.new}),e.createElement("div",{style:a.current})),e.createElement("div",{style:a.label},"current"))},VE=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var UE=function(t){function n(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this));return t.state={currentColor:e.hex},t}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,t),VE(n,[{key:"render",value:function(){var t=this.props,n=t.styles,r=void 0===n?{}:n,a=t.className,o=void 0===a?"":a,i=(0,wx.ZP)(MS({default:{picker:{background:"#DCDCDC",borderRadius:"4px",boxShadow:"0 0 0 1px rgba(0,0,0,.25), 0 8px 16px rgba(0,0,0,.15)",boxSizing:"initial",width:"513px"},head:{backgroundImage:"linear-gradient(-180deg, #F0F0F0 0%, #D4D4D4 100%)",borderBottom:"1px solid #B1B1B1",boxShadow:"inset 0 1px 0 0 rgba(255,255,255,.2), inset 0 -1px 0 0 rgba(0,0,0,.02)",height:"23px",lineHeight:"24px",borderRadius:"4px 4px 0 0",fontSize:"13px",color:"#4D4D4D",textAlign:"center"},body:{padding:"15px 15px 0",display:"flex"},saturation:{width:"256px",height:"256px",position:"relative",border:"2px solid #B3B3B3",borderBottom:"2px solid #F0F0F0",overflow:"hidden"},hue:{position:"relative",height:"256px",width:"19px",marginLeft:"10px",border:"2px solid #B3B3B3",borderBottom:"2px solid #F0F0F0"},controls:{width:"180px",marginLeft:"10px"},top:{display:"flex"},previews:{width:"60px"},actions:{flex:"1",marginLeft:"20px"}}},r));return e.createElement("div",{style:i.picker,className:"photoshop-picker "+o},e.createElement("div",{style:i.head},this.props.header),e.createElement("div",{style:i.body,className:"flexbox-fix"},e.createElement("div",{style:i.saturation},e.createElement(QS,{hsl:this.props.hsl,hsv:this.props.hsv,pointer:LE,onChange:this.props.onChange})),e.createElement("div",{style:i.hue},e.createElement(qx,{direction:"vertical",hsl:this.props.hsl,pointer:BE,onChange:this.props.onChange})),e.createElement("div",{style:i.controls},e.createElement("div",{style:i.top,className:"flexbox-fix"},e.createElement("div",{style:i.previews},e.createElement(ZE,{rgb:this.props.rgb,currentColor:this.state.currentColor})),e.createElement("div",{style:i.actions},e.createElement(zE,{label:"OK",onClick:this.props.onAccept,active:!0}),e.createElement(zE,{label:"Cancel",onClick:this.props.onCancel}),e.createElement(FE,{onChange:this.props.onChange,rgb:this.props.rgb,hsv:this.props.hsv,hex:this.props.hex}))))))}}]),n}(e.Component);UE.propTypes={header:Hx().string,styles:Hx().object},UE.defaultProps={header:"Color Picker",styles:{}};g_(UE);var qE=function(t){var n=t.onChange,r=t.rgb,a=t.hsl,o=t.hex,i=t.disableAlpha,s=(0,wx.ZP)({default:{fields:{display:"flex",paddingTop:"4px"},single:{flex:"1",paddingLeft:"6px"},alpha:{flex:"1",paddingLeft:"6px"},double:{flex:"2"},input:{width:"80%",padding:"4px 10% 3px",border:"none",boxShadow:"inset 0 0 0 1px #ccc",fontSize:"11px"},label:{display:"block",textAlign:"center",fontSize:"11px",color:"#222",paddingTop:"3px",paddingBottom:"4px",textTransform:"capitalize"}},disableAlpha:{alpha:{display:"none"}}},{disableAlpha:i}),u=function(e,t){e.hex?d_(e.hex)&&n({hex:e.hex,source:"hex"},t):e.r||e.g||e.b?n({r:e.r||r.r,g:e.g||r.g,b:e.b||r.b,a:r.a,source:"rgb"},t):e.a&&(e.a<0?e.a=0:e.a>100&&(e.a=100),e.a/=100,n({h:a.h,s:a.s,l:a.l,a:e.a,source:"rgb"},t))};return e.createElement("div",{style:s.fields,className:"flexbox-fix"},e.createElement("div",{style:s.double},e.createElement(Lx,{style:{input:s.input,label:s.label},label:"hex",value:o.replace("#",""),onChange:u})),e.createElement("div",{style:s.single},e.createElement(Lx,{style:{input:s.input,label:s.label},label:"r",value:r.r,onChange:u,dragLabel:"true",dragMax:"255"})),e.createElement("div",{style:s.single},e.createElement(Lx,{style:{input:s.input,label:s.label},label:"g",value:r.g,onChange:u,dragLabel:"true",dragMax:"255"})),e.createElement("div",{style:s.single},e.createElement(Lx,{style:{input:s.input,label:s.label},label:"b",value:r.b,onChange:u,dragLabel:"true",dragMax:"255"})),e.createElement("div",{style:s.alpha},e.createElement(Lx,{style:{input:s.input,label:s.label},label:"a",value:Math.round(100*r.a),onChange:u,dragLabel:"true",dragMax:"100"})))},WE=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},HE=function(t){var n=t.colors,r=t.onClick,a=void 0===r?function(){}:r,o=t.onSwatchHover,i=(0,wx.ZP)({default:{colors:{margin:"0 -10px",padding:"10px 0 0 10px",borderTop:"1px solid #eee",display:"flex",flexWrap:"wrap",position:"relative"},swatchWrap:{width:"16px",height:"16px",margin:"0 10px 10px 0"},swatch:{borderRadius:"3px",boxShadow:"inset 0 0 0 1px rgba(0,0,0,.15)"}},"no-presets":{colors:{display:"none"}}},{"no-presets":!n||!n.length}),s=function(e,t){a({hex:e,source:"hex"},t)};return e.createElement("div",{style:i.colors,className:"flexbox-fix"},n.map((function(t){var n="string"===typeof t?{color:t}:t,r=""+n.color+(n.title||"");return e.createElement("div",{key:r,style:i.swatchWrap},e.createElement(__,WE({},n,{style:i.swatch,onClick:s,onHover:o,focusStyle:{boxShadow:"inset 0 0 0 1px rgba(0,0,0,.15), 0 0 4px "+n.color}})))})))};HE.propTypes={colors:Hx().arrayOf(Hx().oneOfType([Hx().string,Hx().shape({color:Hx().string,title:Hx().string})])).isRequired};var GE=HE,KE=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},XE=function(t){var n=t.width,r=t.rgb,a=t.hex,o=t.hsv,i=t.hsl,s=t.onChange,u=t.onSwatchHover,c=t.disableAlpha,l=t.presetColors,f=t.renderers,d=t.styles,p=void 0===d?{}:d,h=t.className,m=void 0===h?"":h,v=(0,wx.ZP)(MS({default:KE({picker:{width:n,padding:"10px 10px 0",boxSizing:"initial",background:"#fff",borderRadius:"4px",boxShadow:"0 0 0 1px rgba(0,0,0,.15), 0 8px 16px rgba(0,0,0,.15)"},saturation:{width:"100%",paddingBottom:"75%",position:"relative",overflow:"hidden"},Saturation:{radius:"3px",shadow:"inset 0 0 0 1px rgba(0,0,0,.15), inset 0 0 4px rgba(0,0,0,.25)"},controls:{display:"flex"},sliders:{padding:"4px 0",flex:"1"},color:{width:"24px",height:"24px",position:"relative",marginTop:"4px",marginLeft:"4px",borderRadius:"3px"},activeColor:{absolute:"0px 0px 0px 0px",borderRadius:"2px",background:"rgba("+r.r+","+r.g+","+r.b+","+r.a+")",boxShadow:"inset 0 0 0 1px rgba(0,0,0,.15), inset 0 0 4px rgba(0,0,0,.25)"},hue:{position:"relative",height:"10px",overflow:"hidden"},Hue:{radius:"2px",shadow:"inset 0 0 0 1px rgba(0,0,0,.15), inset 0 0 4px rgba(0,0,0,.25)"},alpha:{position:"relative",height:"10px",marginTop:"4px",overflow:"hidden"},Alpha:{radius:"2px",shadow:"inset 0 0 0 1px rgba(0,0,0,.15), inset 0 0 4px rgba(0,0,0,.25)"}},p),disableAlpha:{color:{height:"10px"},hue:{height:"10px"},alpha:{display:"none"}}},p),{disableAlpha:c});return e.createElement("div",{style:v.picker,className:"sketch-picker "+m},e.createElement("div",{style:v.saturation},e.createElement(QS,{style:v.Saturation,hsl:i,hsv:o,onChange:s})),e.createElement("div",{style:v.controls,className:"flexbox-fix"},e.createElement("div",{style:v.sliders},e.createElement("div",{style:v.hue},e.createElement(qx,{style:v.Hue,hsl:i,onChange:s})),e.createElement("div",{style:v.alpha},e.createElement(Mx,{style:v.Alpha,rgb:r,hsl:i,renderers:f,onChange:s}))),e.createElement("div",{style:v.color},e.createElement(Cx,null),e.createElement("div",{style:v.activeColor}))),e.createElement(qE,{rgb:r,hsl:i,hex:a,onChange:s,disableAlpha:c}),e.createElement(GE,{colors:l,onClick:s,onSwatchHover:u}))};XE.propTypes={disableAlpha:Hx().bool,width:Hx().oneOfType([Hx().string,Hx().number]),styles:Hx().object},XE.defaultProps={disableAlpha:!1,width:200,styles:{},presetColors:["#D0021B","#F5A623","#F8E71C","#8B572A","#7ED321","#417505","#BD10E0","#9013FE","#4A90E2","#50E3C2","#B8E986","#000000","#4A4A4A","#9B9B9B","#FFFFFF"]};var YE=g_(XE),$E=function(t){var n=t.hsl,r=t.offset,a=t.onClick,o=void 0===a?function(){}:a,i=t.active,s=t.first,u=t.last,c=(0,wx.ZP)({default:{swatch:{height:"12px",background:"hsl("+n.h+", 50%, "+100*r+"%)",cursor:"pointer"}},first:{swatch:{borderRadius:"2px 0 0 2px"}},last:{swatch:{borderRadius:"0 2px 2px 0"}},active:{swatch:{transform:"scaleY(1.8)",borderRadius:"3.6px/2px"}}},{active:i,first:s,last:u});return e.createElement("div",{style:c.swatch,onClick:function(e){return o({h:n.h,s:.5,l:r,source:"hsl"},e)}})},JE=function(t){var n=t.onClick,r=t.hsl,a=(0,wx.ZP)({default:{swatches:{marginTop:"20px"},swatch:{boxSizing:"border-box",width:"20%",paddingRight:"1px",float:"left"},clear:{clear:"both"}}}),o=.1;return e.createElement("div",{style:a.swatches},e.createElement("div",{style:a.swatch},e.createElement($E,{hsl:r,offset:".80",active:Math.abs(r.l-.8)<o&&Math.abs(r.s-.5)<o,onClick:n,first:!0})),e.createElement("div",{style:a.swatch},e.createElement($E,{hsl:r,offset:".65",active:Math.abs(r.l-.65)<o&&Math.abs(r.s-.5)<o,onClick:n})),e.createElement("div",{style:a.swatch},e.createElement($E,{hsl:r,offset:".50",active:Math.abs(r.l-.5)<o&&Math.abs(r.s-.5)<o,onClick:n})),e.createElement("div",{style:a.swatch},e.createElement($E,{hsl:r,offset:".35",active:Math.abs(r.l-.35)<o&&Math.abs(r.s-.5)<o,onClick:n})),e.createElement("div",{style:a.swatch},e.createElement($E,{hsl:r,offset:".20",active:Math.abs(r.l-.2)<o&&Math.abs(r.s-.5)<o,onClick:n,last:!0})),e.createElement("div",{style:a.clear}))},QE=function(){var t=(0,wx.ZP)({default:{picker:{width:"14px",height:"14px",borderRadius:"6px",transform:"translate(-7px, -1px)",backgroundColor:"rgb(248, 248, 248)",boxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.37)"}}});return e.createElement("div",{style:t.picker})},eC=function(t){var n=t.hsl,r=t.onChange,a=t.pointer,o=t.styles,i=void 0===o?{}:o,s=t.className,u=void 0===s?"":s,c=(0,wx.ZP)(MS({default:{hue:{height:"12px",position:"relative"},Hue:{radius:"2px"}}},i));return e.createElement("div",{style:c.wrap||{},className:"slider-picker "+u},e.createElement("div",{style:c.hue},e.createElement(qx,{style:c.Hue,hsl:n,pointer:a,onChange:r})),e.createElement("div",{style:c.swatches},e.createElement(JE,{hsl:n,onClick:r})))};eC.propTypes={styles:Hx().object},eC.defaultProps={pointer:QE,styles:{}};g_(eC);var tC=n(2504),nC=function(t){var n=t.color,r=t.onClick,a=void 0===r?function(){}:r,o=t.onSwatchHover,i=t.first,s=t.last,u=t.active,c=(0,wx.ZP)({default:{color:{width:"40px",height:"24px",cursor:"pointer",background:n,marginBottom:"1px"},check:{color:p_(n),marginLeft:"8px",display:"none"}},first:{color:{overflow:"hidden",borderRadius:"2px 2px 0 0"}},last:{color:{overflow:"hidden",borderRadius:"0 0 2px 2px"}},active:{check:{display:"block"}},"color-#FFFFFF":{color:{boxShadow:"inset 0 0 0 1px #ddd"},check:{color:"#333"}},transparent:{check:{color:"#333"}}},{first:i,last:s,active:u,"color-#FFFFFF":"#FFFFFF"===n,transparent:"transparent"===n});return e.createElement(__,{color:n,style:c.color,onClick:a,onHover:o,focusStyle:{boxShadow:"0 0 4px "+n}},e.createElement("div",{style:c.check},e.createElement(tC.Z,null)))},rC=function(t){var n=t.onClick,r=t.onSwatchHover,a=t.group,o=t.active,i=(0,wx.ZP)({default:{group:{paddingBottom:"10px",width:"40px",float:"left",marginRight:"10px"}}});return e.createElement("div",{style:i.group},$N(a,(function(t,i){return e.createElement(nC,{key:t,color:t,active:t.toLowerCase()===o,first:0===i,last:i===a.length-1,onClick:n,onSwatchHover:r})})))},aC=function(t){var n=t.width,r=t.height,a=t.onChange,o=t.onSwatchHover,i=t.colors,s=t.hex,u=t.styles,c=void 0===u?{}:u,l=t.className,f=void 0===l?"":l,d=(0,wx.ZP)(MS({default:{picker:{width:n,height:r},overflow:{height:r,overflowY:"scroll"},body:{padding:"16px 0 6px 16px"},clear:{clear:"both"}}},c)),p=function(e,t){return a({hex:e,source:"hex"},t)};return e.createElement("div",{style:d.picker,className:"swatches-picker "+f},e.createElement(PS,null,e.createElement("div",{style:d.overflow},e.createElement("div",{style:d.body},$N(i,(function(t){return e.createElement(rC,{key:t.toString(),group:t,active:s,onClick:p,onSwatchHover:o})})),e.createElement("div",{style:d.clear})))))};aC.propTypes={width:Hx().oneOfType([Hx().string,Hx().number]),height:Hx().oneOfType([Hx().string,Hx().number]),colors:Hx().arrayOf(Hx().arrayOf(Hx().string)),styles:Hx().object},aC.defaultProps={width:320,height:240,colors:[[eE[900],eE[700],eE[500],eE[300],eE[100]],[tE[900],tE[700],tE[500],tE[300],tE[100]],[nE[900],nE[700],nE[500],nE[300],nE[100]],[rE[900],rE[700],rE[500],rE[300],rE[100]],[aE[900],aE[700],aE[500],aE[300],aE[100]],[oE[900],oE[700],oE[500],oE[300],oE[100]],[iE[900],iE[700],iE[500],iE[300],iE[100]],[sE[900],sE[700],sE[500],sE[300],sE[100]],[uE[900],uE[700],uE[500],uE[300],uE[100]],["#194D33",cE[700],cE[500],cE[300],cE[100]],[lE[900],lE[700],lE[500],lE[300],lE[100]],[fE[900],fE[700],fE[500],fE[300],fE[100]],[dE[900],dE[700],dE[500],dE[300],dE[100]],[pE[900],pE[700],pE[500],pE[300],pE[100]],[hE[900],hE[700],hE[500],hE[300],hE[100]],[mE[900],mE[700],mE[500],mE[300],mE[100]],[vE[900],vE[700],vE[500],vE[300],vE[100]],[gE[900],gE[700],gE[500],gE[300],gE[100]],["#000000","#525252","#969696","#D9D9D9","#FFFFFF"]],styles:{}};g_(aC);var oC=function(t){var n=t.onChange,r=t.onSwatchHover,a=t.hex,o=t.colors,i=t.width,s=t.triangle,u=t.styles,c=void 0===u?{}:u,l=t.className,f=void 0===l?"":l,d=(0,wx.ZP)(MS({default:{card:{width:i,background:"#fff",border:"0 solid rgba(0,0,0,0.25)",boxShadow:"0 1px 4px rgba(0,0,0,0.25)",borderRadius:"4px",position:"relative"},body:{padding:"15px 9px 9px 15px"},label:{fontSize:"18px",color:"#fff"},triangle:{width:"0px",height:"0px",borderStyle:"solid",borderWidth:"0 9px 10px 9px",borderColor:"transparent transparent #fff transparent",position:"absolute"},triangleShadow:{width:"0px",height:"0px",borderStyle:"solid",borderWidth:"0 9px 10px 9px",borderColor:"transparent transparent rgba(0,0,0,.1) transparent",position:"absolute"},hash:{background:"#F0F0F0",height:"30px",width:"30px",borderRadius:"4px 0 0 4px",float:"left",color:"#98A1A4",display:"flex",alignItems:"center",justifyContent:"center"},input:{width:"100px",fontSize:"14px",color:"#666",border:"0px",outline:"none",height:"28px",boxShadow:"inset 0 0 0 1px #F0F0F0",boxSizing:"content-box",borderRadius:"0 4px 4px 0",float:"left",paddingLeft:"8px"},swatch:{width:"30px",height:"30px",float:"left",borderRadius:"4px",margin:"0 6px 6px 0"},clear:{clear:"both"}},"hide-triangle":{triangle:{display:"none"},triangleShadow:{display:"none"}},"top-left-triangle":{triangle:{top:"-10px",left:"12px"},triangleShadow:{top:"-11px",left:"12px"}},"top-right-triangle":{triangle:{top:"-10px",right:"12px"},triangleShadow:{top:"-11px",right:"12px"}}},c),{"hide-triangle":"hide"===s,"top-left-triangle":"top-left"===s,"top-right-triangle":"top-right"===s}),p=function(e,t){d_(e)&&n({hex:e,source:"hex"},t)};return e.createElement("div",{style:d.card,className:"twitter-picker "+f},e.createElement("div",{style:d.triangleShadow}),e.createElement("div",{style:d.triangle}),e.createElement("div",{style:d.body},$N(o,(function(t,n){return e.createElement(__,{key:n,color:t,hex:t,style:d.swatch,onClick:p,onHover:r,focusStyle:{boxShadow:"0 0 4px "+t}})})),e.createElement("div",{style:d.hash},"#"),e.createElement(Lx,{label:null,style:{input:d.input},value:a.replace("#",""),onChange:p}),e.createElement("div",{style:d.clear})))};oC.propTypes={width:Hx().oneOfType([Hx().string,Hx().number]),triangle:Hx().oneOf(["hide","top-left","top-right"]),colors:Hx().arrayOf(Hx().string),styles:Hx().object},oC.defaultProps={width:276,colors:["#FF6900","#FCB900","#7BDCB5","#00D084","#8ED1FC","#0693E3","#ABB8C3","#EB144C","#F78DA7","#9900EF"],triangle:"top-left",styles:{}};g_(oC);var iC=function(t){var n=(0,wx.ZP)({default:{picker:{width:"20px",height:"20px",borderRadius:"22px",border:"2px #fff solid",transform:"translate(-12px, -13px)",background:"hsl("+Math.round(t.hsl.h)+", "+Math.round(100*t.hsl.s)+"%, "+Math.round(100*t.hsl.l)+"%)"}}});return e.createElement("div",{style:n.picker})};iC.propTypes={hsl:Hx().shape({h:Hx().number,s:Hx().number,l:Hx().number,a:Hx().number})},iC.defaultProps={hsl:{a:1,h:249.94,l:.2,s:.5}};var sC=iC,uC=function(t){var n=(0,wx.ZP)({default:{picker:{width:"20px",height:"20px",borderRadius:"22px",transform:"translate(-10px, -7px)",background:"hsl("+Math.round(t.hsl.h)+", 100%, 50%)",border:"2px white solid"}}});return e.createElement("div",{style:n.picker})};uC.propTypes={hsl:Hx().shape({h:Hx().number,s:Hx().number,l:Hx().number,a:Hx().number})},uC.defaultProps={hsl:{a:1,h:249.94,l:.2,s:.5}};var cC=uC,lC=function(t){var n=t.onChange,r=t.rgb,a=t.hsl,o=t.hex,i=t.hsv,s=function(e,t){if(e.hex)d_(e.hex)&&n({hex:e.hex,source:"hex"},t);else if(e.rgb){var r=e.rgb.split(",");h_(e.rgb,"rgb")&&n({r:r[0],g:r[1],b:r[2],a:1,source:"rgb"},t)}else if(e.hsv){var a=e.hsv.split(",");h_(e.hsv,"hsv")&&(a[2]=a[2].replace("%",""),a[1]=a[1].replace("%",""),a[0]=a[0].replace("\xb0",""),1==a[1]?a[1]=.01:1==a[2]&&(a[2]=.01),n({h:Number(a[0]),s:Number(a[1]),v:Number(a[2]),source:"hsv"},t))}else if(e.hsl){var o=e.hsl.split(",");h_(e.hsl,"hsl")&&(o[2]=o[2].replace("%",""),o[1]=o[1].replace("%",""),o[0]=o[0].replace("\xb0",""),1==f[1]?f[1]=.01:1==f[2]&&(f[2]=.01),n({h:Number(o[0]),s:Number(o[1]),v:Number(o[2]),source:"hsl"},t))}},u=(0,wx.ZP)({default:{wrap:{display:"flex",height:"100px",marginTop:"4px"},fields:{width:"100%"},column:{paddingTop:"10px",display:"flex",justifyContent:"space-between"},double:{padding:"0px 4.4px",boxSizing:"border-box"},input:{width:"100%",height:"38px",boxSizing:"border-box",padding:"4px 10% 3px",textAlign:"center",border:"1px solid #dadce0",fontSize:"11px",textTransform:"lowercase",borderRadius:"5px",outline:"none",fontFamily:"Roboto,Arial,sans-serif"},input2:{height:"38px",width:"100%",border:"1px solid #dadce0",boxSizing:"border-box",fontSize:"11px",textTransform:"lowercase",borderRadius:"5px",outline:"none",paddingLeft:"10px",fontFamily:"Roboto,Arial,sans-serif"},label:{textAlign:"center",fontSize:"12px",background:"#fff",position:"absolute",textTransform:"uppercase",color:"#3c4043",width:"35px",top:"-6px",left:"0",right:"0",marginLeft:"auto",marginRight:"auto",fontFamily:"Roboto,Arial,sans-serif"},label2:{left:"10px",textAlign:"center",fontSize:"12px",background:"#fff",position:"absolute",textTransform:"uppercase",color:"#3c4043",width:"32px",top:"-6px",fontFamily:"Roboto,Arial,sans-serif"},single:{flexGrow:"1",margin:"0px 4.4px"}}}),c=r.r+", "+r.g+", "+r.b,l=Math.round(a.h)+"\xb0, "+Math.round(100*a.s)+"%, "+Math.round(100*a.l)+"%",f=Math.round(i.h)+"\xb0, "+Math.round(100*i.s)+"%, "+Math.round(100*i.v)+"%";return e.createElement("div",{style:u.wrap,className:"flexbox-fix"},e.createElement("div",{style:u.fields},e.createElement("div",{style:u.double},e.createElement(Lx,{style:{input:u.input,label:u.label},label:"hex",value:o,onChange:s})),e.createElement("div",{style:u.column},e.createElement("div",{style:u.single},e.createElement(Lx,{style:{input:u.input2,label:u.label2},label:"rgb",value:c,onChange:s})),e.createElement("div",{style:u.single},e.createElement(Lx,{style:{input:u.input2,label:u.label2},label:"hsv",value:f,onChange:s})),e.createElement("div",{style:u.single},e.createElement(Lx,{style:{input:u.input2,label:u.label2},label:"hsl",value:l,onChange:s})))))},fC=function(t){var n=t.width,r=t.onChange,a=t.rgb,o=t.hsl,i=t.hsv,s=t.hex,u=t.header,c=t.styles,l=void 0===c?{}:c,f=t.className,d=void 0===f?"":f,p=(0,wx.ZP)(MS({default:{picker:{width:n,background:"#fff",border:"1px solid #dfe1e5",boxSizing:"initial",display:"flex",flexWrap:"wrap",borderRadius:"8px 8px 0px 0px"},head:{height:"57px",width:"100%",paddingTop:"16px",paddingBottom:"16px",paddingLeft:"16px",fontSize:"20px",boxSizing:"border-box",fontFamily:"Roboto-Regular,HelveticaNeue,Arial,sans-serif"},saturation:{width:"70%",padding:"0px",position:"relative",overflow:"hidden"},swatch:{width:"30%",height:"228px",padding:"0px",background:"rgba("+a.r+", "+a.g+", "+a.b+", 1)",position:"relative",overflow:"hidden"},body:{margin:"auto",width:"95%"},controls:{display:"flex",boxSizing:"border-box",height:"52px",paddingTop:"22px"},color:{width:"32px"},hue:{height:"8px",position:"relative",margin:"0px 16px 0px 16px",width:"100%"},Hue:{radius:"2px"}}},l));return e.createElement("div",{style:p.picker,className:"google-picker "+d},e.createElement("div",{style:p.head},u),e.createElement("div",{style:p.swatch}),e.createElement("div",{style:p.saturation},e.createElement(QS,{hsl:o,hsv:i,pointer:sC,onChange:r})),e.createElement("div",{style:p.body},e.createElement("div",{style:p.controls,className:"flexbox-fix"},e.createElement("div",{style:p.hue},e.createElement(qx,{style:p.Hue,hsl:o,radius:"4px",pointer:cC,onChange:r}))),e.createElement(lC,{rgb:a,hsl:o,hex:s,hsv:i,onChange:r})))};fC.propTypes={width:Hx().oneOfType([Hx().string,Hx().number]),styles:Hx().object,header:Hx().string},fC.defaultProps={width:652,styles:{},header:"Color picker"};g_(fC);var dC=n(4506),pC=n(1120),hC=n(9611);var mC=n(8814);function vC(e,t,n){return vC=(0,mC.Z)()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var a=new(Function.bind.apply(e,r));return n&&(0,hC.Z)(a,n.prototype),a},vC.apply(null,arguments)}function gC(e){var t="function"===typeof Map?new Map:void 0;return gC=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return vC(e,arguments,(0,pC.Z)(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),(0,hC.Z)(r,e)},gC(e)}var yC=["override"],bC=["default"],xC=["cachePolicyForParams_UNSTABLE"],wC=l().mark(qT),kC=l().mark(oO);var SC=function(e){var t=new Error(e);if(void 0===t.stack)try{throw t}catch(n){}return t},_C=SC;var NC=function(e){return!!e&&"function"===typeof e.then};var EC=function(e,t){if(null!=e)return e;throw _C(null!==t&&void 0!==t?t:"Got unexpected null or undefined")};function CC(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var TC=function(){function e(){(0,f.Z)(this,e)}return(0,d.Z)(e,[{key:"getValue",value:function(){throw _C("BaseLoadable")}},{key:"toPromise",value:function(){throw _C("BaseLoadable")}},{key:"valueMaybe",value:function(){throw _C("BaseLoadable")}},{key:"valueOrThrow",value:function(){throw _C('Loadable expected value, but in "'.concat(this.state,'" state'))}},{key:"promiseMaybe",value:function(){throw _C("BaseLoadable")}},{key:"promiseOrThrow",value:function(){throw _C('Loadable expected promise, but in "'.concat(this.state,'" state'))}},{key:"errorMaybe",value:function(){throw _C("BaseLoadable")}},{key:"errorOrThrow",value:function(){throw _C('Loadable expected error, but in "'.concat(this.state,'" state'))}},{key:"is",value:function(e){return e.state===this.state&&e.contents===this.contents}},{key:"map",value:function(e){throw _C("BaseLoadable")}}]),e}(),IC=function(e){(0,nu.Z)(n,e);var t=(0,ru.Z)(n);function n(e){var r;return(0,f.Z)(this,n),r=t.call(this),CC((0,tu.Z)(r),"state","hasValue"),CC((0,tu.Z)(r),"contents",void 0),r.contents=e,r}return(0,d.Z)(n,[{key:"getValue",value:function(){return this.contents}},{key:"toPromise",value:function(){return Promise.resolve(this.contents)}},{key:"valueMaybe",value:function(){return this.contents}},{key:"valueOrThrow",value:function(){return this.contents}},{key:"promiseMaybe",value:function(){}},{key:"errorMaybe",value:function(){}},{key:"map",value:function(e){var t=this;try{var n=e(this.contents);return NC(n)?RC(n):jC(n)?n:DC(n)}catch(r){return NC(r)?RC(r.next((function(){return t.map(e)}))):MC(r)}}}]),n}(TC),OC=function(e){(0,nu.Z)(n,e);var t=(0,ru.Z)(n);function n(e){var r;return(0,f.Z)(this,n),r=t.call(this),CC((0,tu.Z)(r),"state","hasError"),CC((0,tu.Z)(r),"contents",void 0),r.contents=e,r}return(0,d.Z)(n,[{key:"getValue",value:function(){throw this.contents}},{key:"toPromise",value:function(){return Promise.reject(this.contents)}},{key:"valueMaybe",value:function(){}},{key:"promiseMaybe",value:function(){}},{key:"errorMaybe",value:function(){return this.contents}},{key:"errorOrThrow",value:function(){return this.contents}},{key:"map",value:function(e){return this}}]),n}(TC),AC=function(e){(0,nu.Z)(n,e);var t=(0,ru.Z)(n);function n(e){var r;return(0,f.Z)(this,n),r=t.call(this),CC((0,tu.Z)(r),"state","loading"),CC((0,tu.Z)(r),"contents",void 0),r.contents=e,r}return(0,d.Z)(n,[{key:"getValue",value:function(){throw this.contents}},{key:"toPromise",value:function(){return this.contents}},{key:"valueMaybe",value:function(){}},{key:"promiseMaybe",value:function(){return this.contents}},{key:"promiseOrThrow",value:function(){return this.contents}},{key:"errorMaybe",value:function(){}},{key:"map",value:function(e){var t=this;return RC(this.contents.then((function(t){var n=e(t);if(jC(n)){var r=n;switch(r.state){case"hasValue":case"loading":return r.contents;case"hasError":throw r.contents}}return n})).catch((function(n){if(NC(n))return n.then((function(){return t.map(e).contents}));throw n})))}}]),n}(TC);function DC(e){return Object.freeze(new IC(e))}function MC(e){return Object.freeze(new OC(e))}function RC(e){return Object.freeze(new AC(e))}function PC(e){var t=Array.isArray(e)?e:Object.getOwnPropertyNames(e).map((function(t){return e[t]})),n=function(e){return e.every((function(e){return"hasValue"===e.state}))?DC(e.map((function(e){return e.contents}))):e.some((function(e){return"hasError"===e.state}))?MC(EC(e.find((function(e){return"hasError"===e.state})),"Invalid loadable passed to loadableAll").contents):RC(Promise.all(e.map((function(e){return e.contents}))))}(t.map((function(e){return jC(e)?e:NC(e)?RC(e):DC(e)})));return Array.isArray(e)?n:n.map((function(t){return Object.getOwnPropertyNames(e).reduce((function(e,n,r){return u(u({},e),{},i({},n,t[r]))}),{})}))}function jC(e){return e instanceof TC}var FC={of:function(e){return NC(e)?RC(e):jC(e)?e:DC(e)},error:function(e){return MC(e)},all:PC,isLoadable:jC},LC={loadableWithValue:DC,loadableWithError:MC,loadableWithPromise:RC,loadableLoading:function(){return Object.freeze(new AC(new Promise((function(){}))))},loadableAll:PC,isLoadable:jC,RecoilLoadable:FC},BC=LC.loadableWithValue,zC=LC.loadableWithError,ZC=LC.loadableWithPromise,VC=LC.loadableLoading,UC=LC.loadableAll,qC=LC.isLoadable,WC=LC.RecoilLoadable,HC=Object.freeze({__proto__:null,loadableWithValue:BC,loadableWithError:zC,loadableWithPromise:ZC,loadableLoading:VC,loadableAll:UC,isLoadable:qC,RecoilLoadable:WC}),GC=(0,d.Z)((function e(t){(0,f.Z)(this,e),CC(this,"key",void 0),this.key=t})),KC=function(e){(0,nu.Z)(n,e);var t=(0,ru.Z)(n);function n(){return(0,f.Z)(this,n),t.apply(this,arguments)}return(0,d.Z)(n)}(GC),XC=function(e){(0,nu.Z)(n,e);var t=(0,ru.Z)(n);function n(){return(0,f.Z)(this,n),t.apply(this,arguments)}return(0,d.Z)(n)}(GC);var YC={AbstractRecoilValue:GC,RecoilState:KC,RecoilValueReadOnly:XC,isRecoilValue:function(e){return e instanceof KC||e instanceof XC}},$C=YC.AbstractRecoilValue,JC=YC.RecoilState,QC=YC.RecoilValueReadOnly,eT=YC.isRecoilValue,tT=Object.freeze({__proto__:null,AbstractRecoilValue:$C,RecoilState:JC,RecoilValueReadOnly:QC,isRecoilValue:eT});var nT=function(e){},rT=(new Map).set("recoil_hamt_2020",!0).set("recoil_sync_external_store",!0).set("recoil_suppress_rerender_in_callback",!0).set("recoil_memory_managament_2020",!0);function aT(e){var t;return null!==(t=rT.get(e))&&void 0!==t&&t}aT.setPass=function(e){rT.set(e,!0)},aT.setFail=function(e){rT.set(e,!1)},aT.clear=function(){rT.clear()};var oT=aT;var iT=function(e,t){return l().mark((function n(){var r,a,o,i;return l().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:r=0,a=(0,Et.Z)(e),n.prev=2,a.s();case 4:if((o=a.n()).done){n.next=10;break}return i=o.value,n.next=8,t(i,r++);case 8:n.next=4;break;case 10:n.next=15;break;case 12:n.prev=12,n.t0=n.catch(2),a.e(n.t0);case 15:return n.prev=15,a.f(),n.finish(15);case 18:case"end":return n.stop()}}),n,null,[[2,12,15,18]])}))()};var sT=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return n.error,null},uT=sT,cT=(0,d.Z)((function e(){(0,f.Z)(this,e)})),lT=new cT,fT=function(e){(0,nu.Z)(n,e);var t=(0,ru.Z)(n);function n(e){return(0,f.Z)(this,n),t.call(this,"Tried to set the value of Recoil selector ".concat(e," using an updater function, but it is an async selector in a pending or error state; this is not supported."))}return(0,d.Z)(n)}(gC(Error)),dT=new Map,pT=new Map;var hT=function(e){(0,nu.Z)(n,e);var t=(0,ru.Z)(n);function n(){return(0,f.Z)(this,n),t.apply(this,arguments)}return(0,d.Z)(n)}(gC(Error));var mT=new Map;function vT(e){return mT.get(e)}var gT={nodes:dT,recoilValues:pT,registerNode:function(e){if(dT.has(e.key)){var t='Duplicate atom key "'.concat(e.key,'". This is a FATAL ERROR in\n      production. But it is safe to ignore this warning if it occurred because of\n      hot module replacement.');console.warn(t)}dT.set(e.key,e);var n=null==e.set?new tT.RecoilValueReadOnly(e.key):new tT.RecoilState(e.key);return pT.set(e.key,n),n},getNode:function(e){var t=dT.get(e);if(null==t)throw new hT('Missing definition for RecoilValue: "'.concat(e,'""'));return t},getNodeMaybe:function(e){return dT.get(e)},deleteNodeConfigIfPossible:function(e){var t;if(oT("recoil_memory_managament_2020")){var n,r=dT.get(e);if(null!==r&&void 0!==r&&null!==(t=r.shouldDeleteConfigOnRelease)&&void 0!==t&&t.call(r))dT.delete(e),null===(n=vT(e))||void 0===n||n(),mT.delete(e)}},setConfigDeletionHandler:function(e,t){oT("recoil_memory_managament_2020")&&(void 0===t?mT.delete(e):mT.set(e,t))},getConfigDeletionHandler:vT,recoilValuesForKeys:function(e){return iT(e,(function(e){return EC(pT.get(e))}))},NodeMissingError:hT,DefaultValue:cT,DEFAULT_VALUE:lT,RecoilValueNotReady:fT};var yT={enqueueExecution:function(e,t){t()}};var bT=function(e,t){return e(t={exports:{}},t.exports),t.exports}((function(e){var t="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n={},r=Math.pow(2,5),a=r-1,o=r/2,i=r/4,s={},u=function(e){return function(){return e}},c=n.hash=function(e){var n="undefined"===typeof e?"undefined":t(e);if("number"===n)return e;"string"!==n&&(e+="");for(var r=0,a=0,o=e.length;a<o;++a){r=(r<<5)-r+e.charCodeAt(a)|0}return r},l=function(e,t){return t>>>e&a},f=function(e){return 1<<e},d=function(e,t){return n=e&t-1,n=(n=(858993459&(n-=n>>1&1431655765))+(n>>2&858993459))+(n>>4)&252645135,127&(n+=n>>8)+(n>>16);var n},p=function(e,t,n,r){var a=r;if(!e){var o=r.length;a=new Array(o);for(var i=0;i<o;++i)a[i]=r[i]}return a[t]=n,a},h=function(e,t,n){var r=n.length-1,a=0,o=0,i=n;if(e)a=o=t;else for(i=new Array(r);a<t;)i[o++]=n[a++];for(++a;a<=r;)i[o++]=n[a++];return e&&(i.length=r),i},m={__hamt_isEmpty:!0},v=function(e){return e===m||e&&e.__hamt_isEmpty},g=function(e,t,n,r){return{type:1,edit:e,hash:t,key:n,value:r,_modify:S}},y=function(e,t,n){return{type:2,edit:e,hash:t,children:n,_modify:_}},b=function(e,t,n){return{type:3,edit:e,mask:t,children:n,_modify:N}},x=function(e,t,n){return{type:4,edit:e,size:t,children:n,_modify:E}},w=function e(t,n,r,a,o,i){if(r===o)return y(t,r,[i,a]);var s=l(n,r),u=l(n,o);return b(t,f(s)|f(u),s===u?[e(t,n+5,r,a,o,i)]:s<u?[a,i]:[i,a])},k=function(e,t){return e===t.edit},S=function(e,t,n,r,a,o,i){if(t(o,this.key)){var u=r(this.value);return u===this.value?this:u===s?(--i.value,m):k(e,this)?(this.value=u,this):g(e,a,o,u)}var c=r();return c===s?this:(++i.value,w(e,n,this.hash,this,a,g(e,a,o,c)))},_=function(e,t,n,r,a,o,i){if(a===this.hash){var u=function(e,t,n,r,a,o,i,u){for(var c=a.length,l=0;l<c;++l){var f=a[l];if(n(i,f.key)){var d=f.value,m=o(d);return m===d?a:m===s?(--u.value,h(e,l,a)):p(e,l,g(t,r,i,m),a)}}var v=o();return v===s?a:(++u.value,p(e,c,g(t,r,i,v),a))}(k(e,this),e,t,this.hash,this.children,r,o,i);return u===this.children?this:u.length>1?y(e,this.hash,u):u[0]}var c=r();return c===s?this:(++i.value,w(e,n,this.hash,this,a,g(e,a,o,c)))},N=function(e,t,n,r,a,i,s){var u=this.mask,c=this.children,g=l(n,a),y=f(g),w=d(u,y),S=u&y,_=S?c[w]:m,N=_._modify(e,t,n+5,r,a,i,s);if(_===N)return this;var E,C=k(e,this),T=u,I=void 0;if(S&&v(N)){if(!(T&=~y))return m;if(c.length<=2&&((E=c[1^w])===m||1===E.type||2===E.type))return c[1^w];I=h(C,w,c)}else if(S||v(N))I=p(C,w,N,c);else{if(c.length>=o)return function(e,t,n,r,a){for(var o=[],i=r,s=0,u=0;i;++u)1&i&&(o[u]=a[s++]),i>>>=1;return o[t]=n,x(e,s+1,o)}(e,g,N,u,c);T|=y,I=function(e,t,n,r){var a=r.length;if(e){for(var o=a;o>=t;)r[o--]=r[o];return r[t]=n,r}for(var i=0,s=0,u=new Array(a+1);i<t;)u[s++]=r[i++];for(u[t]=n;i<a;)u[++s]=r[i++];return u}(C,w,N,c)}return C?(this.mask=T,this.children=I,this):b(e,T,I)},E=function(e,t,n,r,a,o,s){var u=this.size,c=this.children,f=l(n,a),d=c[f],h=(d||m)._modify(e,t,n+5,r,a,o,s);if(d===h)return this;var g=k(e,this),y=void 0;if(v(d)&&!v(h))++u,y=p(g,f,h,c);else if(!v(d)&&v(h)){if(--u<=i)return function(e,t,n,r){for(var a=new Array(t-1),o=0,i=0,s=0,u=r.length;s<u;++s)if(s!==n){var c=r[s];c&&!v(c)&&(a[o++]=c,i|=1<<s)}return b(e,i,a)}(e,u,f,c);y=p(g,f,m,c)}else y=p(g,f,h,c);return g?(this.size=u,this.children=y,this):x(e,u,y)};function C(e,t,n,r,a){this._editable=e,this._edit=t,this._config=n,this._root=r,this._size=a}m._modify=function(e,t,n,r,a,o,i){var u=r();return u===s?m:(++i.value,g(e,a,o,u))},C.prototype.setTree=function(e,t){return this._editable?(this._root=e,this._size=t,this):e===this._root?this:new C(this._editable,this._edit,this._config,e,t)};var T=n.tryGetHash=function(e,t,n,r){for(var a=r._root,o=0,i=r._config.keyEq;;)switch(a.type){case 1:return i(n,a.key)?a.value:e;case 2:if(t===a.hash)for(var s=a.children,u=0,c=s.length;u<c;++u){var p=s[u];if(i(n,p.key))return p.value}return e;case 3:var h=l(o,t),m=f(h);if(a.mask&m){a=a.children[d(a.mask,m)],o+=5;break}return e;case 4:if(a=a.children[l(o,t)]){o+=5;break}return e;default:return e}};C.prototype.tryGetHash=function(e,t,n){return T(e,t,n,this)};var I=n.tryGet=function(e,t,n){return T(e,n._config.hash(t),t,n)};C.prototype.tryGet=function(e,t){return I(e,t,this)};var O=n.getHash=function(e,t,n){return T(void 0,e,t,n)};C.prototype.getHash=function(e,t){return O(e,t,this)};n.get=function(e,t){return T(void 0,t._config.hash(e),e,t)};C.prototype.get=function(e,t){return I(t,e,this)};var A=n.has=function(e,t,n){return T(s,e,t,n)!==s};C.prototype.hasHash=function(e,t){return A(e,t,this)};var D=n.has=function(e,t){return A(t._config.hash(e),e,t)};C.prototype.has=function(e){return D(e,this)};var M=function(e,t){return e===t};n.make=function(e){return new C(0,0,{keyEq:e&&e.keyEq||M,hash:e&&e.hash||c},m,0)},n.empty=n.make();var R=n.isEmpty=function(e){return e&&!!v(e._root)};C.prototype.isEmpty=function(){return R(this)};var P=n.modifyHash=function(e,t,n,r){var a={value:r._size},o=r._root._modify(r._editable?r._edit:NaN,r._config.keyEq,0,e,t,n,a);return r.setTree(o,a.value)};C.prototype.modifyHash=function(e,t,n){return P(n,e,t,this)};var j=n.modify=function(e,t,n){return P(e,n._config.hash(t),t,n)};C.prototype.modify=function(e,t){return j(t,e,this)};var F=n.setHash=function(e,t,n,r){return P(u(n),e,t,r)};C.prototype.setHash=function(e,t,n){return F(e,t,n,this)};var L=n.set=function(e,t,n){return F(n._config.hash(e),e,t,n)};C.prototype.set=function(e,t){return L(e,t,this)};var B=u(s),z=n.removeHash=function(e,t,n){return P(B,e,t,n)};C.prototype.removeHash=C.prototype.deleteHash=function(e,t){return z(e,t,this)};var Z=n.remove=function(e,t){return z(t._config.hash(e),e,t)};C.prototype.remove=C.prototype.delete=function(e){return Z(e,this)};var V=n.beginMutation=function(e){return new C(e._editable+1,e._edit+1,e._config,e._root,e._size)};C.prototype.beginMutation=function(){return V(this)};var U=n.endMutation=function(e){return e._editable=e._editable&&e._editable-1,e};C.prototype.endMutation=function(){return U(this)};var q=n.mutate=function(e,t){var n=V(t);return e(n),U(n)};C.prototype.mutate=function(e){return q(e,this)};var W=function(e){return e&&H(e[0],e[1],e[2],e[3],e[4])},H=function(e,t,n,r,a){for(;n<e;){var o=t[n++];if(o&&!v(o))return G(o,r,[e,t,n,r,a])}return W(a)},G=function(e,t,n){switch(e.type){case 1:return{value:t(e),rest:n};case 2:case 4:case 3:var r=e.children;return H(r.length,r,0,t,n);default:return W(n)}},K={done:!0};function X(e){this.v=e}X.prototype.next=function(){if(!this.v)return K;var e=this.v;return this.v=W(e.rest),e},X.prototype[Symbol.iterator]=function(){return this};var Y=function(e,t){return new X(G(e._root,t))},$=function(e){return[e.key,e.value]},J=n.entries=function(e){return Y(e,$)};C.prototype.entries=C.prototype[Symbol.iterator]=function(){return J(this)};var Q=function(e){return e.key},ee=n.keys=function(e){return Y(e,Q)};C.prototype.keys=function(){return ee(this)};var te=function(e){return e.value},ne=n.values=C.prototype.values=function(e){return Y(e,te)};C.prototype.values=function(){return ne(this)};var re=n.fold=function(e,t,n){var r=n._root;if(1===r.type)return e(t,r.value,r.key);for(var a=[r.children],o=void 0;o=a.pop();)for(var i=0,s=o.length;i<s;){var u=o[i++];u&&u.type&&(1===u.type?t=e(t,u.value,u.key):a.push(u.children))}return t};C.prototype.fold=function(e,t){return re(e,t,this)};var ae=n.forEach=function(e,t){return re((function(n,r,a){return e(r,a,t)}),null,t)};C.prototype.forEach=function(e){return ae(e,this)};var oe=n.count=function(e){return e._size};C.prototype.count=function(){return oe(this)},Object.defineProperty(C.prototype,"size",{get:C.prototype.count}),e.exports?e.exports=n:(void 0).hamt=n})),xT=function(){function e(t){(0,f.Z)(this,e),CC(this,"_map",void 0),this._map=new Map(null===t||void 0===t?void 0:t.entries())}return(0,d.Z)(e,[{key:"keys",value:function(){return this._map.keys()}},{key:"entries",value:function(){return this._map.entries()}},{key:"get",value:function(e){return this._map.get(e)}},{key:"has",value:function(e){return this._map.has(e)}},{key:"set",value:function(e,t){return this._map.set(e,t),this}},{key:"delete",value:function(e){return this._map.delete(e),this}},{key:"clone",value:function(){return kT(this)}},{key:"toMap",value:function(){return new Map(this._map)}}]),e}(),wT=function(){function e(t){if((0,f.Z)(this,e),CC(this,"_hamt",bT.empty.beginMutation()),t instanceof e){var n=t._hamt.endMutation();t._hamt=n.beginMutation(),this._hamt=n.beginMutation()}else if(t){var r,o=(0,Et.Z)(t.entries());try{for(o.s();!(r=o.n()).done;){var i=(0,a.Z)(r.value,2),s=i[0],u=i[1];this._hamt.set(s,u)}}catch(c){o.e(c)}finally{o.f()}}}return(0,d.Z)(e,[{key:"keys",value:function(){return this._hamt.keys()}},{key:"entries",value:function(){return this._hamt.entries()}},{key:"get",value:function(e){return this._hamt.get(e)}},{key:"has",value:function(e){return this._hamt.has(e)}},{key:"set",value:function(e,t){return this._hamt.set(e,t),this}},{key:"delete",value:function(e){return this._hamt.delete(e),this}},{key:"clone",value:function(){return kT(this)}},{key:"toMap",value:function(){return new Map(this._hamt)}}]),e}();function kT(e){return oT("recoil_hamt_2020")?new wT(e):new xT(e)}var ST=kT;var _T=function(e){for(var t=new Set,n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];var o,i=(0,Et.Z)(e);try{e:for(i.s();!(o=i.n()).done;){var s,u=o.value,c=(0,Et.Z)(r);try{for(c.s();!(s=c.n()).done;){var l=s.value;if(l.has(u))continue e}}catch(f){c.e(f)}finally{c.f()}t.add(u)}}catch(f){i.e(f)}finally{i.f()}return t};var NT=function(e,t){var n=new Map;return e.forEach((function(e,r){n.set(r,t(e,r))})),n};function ET(e,t,n){var r=t.nodeDeps,a=t.nodeToNodeSubscriptions;e.forEach((function(e,t){var o=r.get(t);o&&n&&o!==n.nodeDeps.get(t)||(r.set(t,new Set(e)),(null==o?e:_T(e,o)).forEach((function(e){a.has(e)||a.set(e,new Set),EC(a.get(e)).add(t)})),o&&_T(o,e).forEach((function(e){if(a.has(e)){var n=EC(a.get(e));n.delete(t),0===n.size&&a.delete(e)}})))}))}var CT=function(e){return{nodeDeps:NT(e.nodeDeps,(function(e){return new Set(e)})),nodeToNodeSubscriptions:NT(e.nodeToNodeSubscriptions,(function(e){return new Set(e)}))}},TT=function(){return{nodeDeps:new Map,nodeToNodeSubscriptions:new Map}},IT=function(e,t,n){var r,a,o,i,s=t.getState();n!==s.currentTree.version&&n!==(null===(r=s.nextTree)||void 0===r?void 0:r.version)&&n!==(null===(a=s.previousTree)||void 0===a?void 0:a.version)&&uT("Tried to save dependencies to a discarded tree");var u=t.getGraph(n);if(ET(e,u),n===(null===(o=s.previousTree)||void 0===o?void 0:o.version)&&ET(e,t.getGraph(s.currentTree.version),u),n===(null===(i=s.previousTree)||void 0===i?void 0:i.version)||n===s.currentTree.version){var c,l=null===(c=s.nextTree)||void 0===c?void 0:c.version;if(void 0!==l)ET(e,t.getGraph(l),u)}},OT=0,AT=0,DT=0,MT=function(){return OT++},RT=function(){return AT++},PT=function(){return DT++},jT=Object.freeze({__proto__:null,persistentMap:ST}).persistentMap,FT=TT,LT=MT;function BT(){var e=LT();return{version:e,stateID:e,transactionMetadata:{},dirtyAtoms:new Set,atomValues:jT(),nonvalidatedAtoms:jT()}}var zT={makeEmptyTreeState:BT,makeEmptyStoreState:function(){var e=BT();return{currentTree:e,nextTree:null,previousTree:null,commitDepth:0,knownAtoms:new Set,knownSelectors:new Set,transactionSubscriptions:new Map,nodeTransactionSubscriptions:new Map,nodeToComponentSubscriptions:new Map,queuedComponentCallbacks_DEPRECATED:[],suspendedComponentResolvers:new Set,graphsByVersion:(new Map).set(e.version,FT()),retention:{referenceCounts:new Map,nodesRetainedByZone:new Map,retainablesToCheckForRelease:new Set},nodeCleanupFunctions:new Map}},getNextTreeStateVersion:LT},ZT=(0,d.Z)((function e(){(0,f.Z)(this,e)}));var VT={RetentionZone:ZT,retentionZone:function(){return new ZT}};var UT=function(e,t){var n=new Set(e);return n.add(t),n};function qT(e,t){var n,r,a,o;return l().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:n=0,r=(0,Et.Z)(e),i.prev=2,r.s();case 4:if((a=r.n()).done){i.next=11;break}if(o=a.value,!t(o,n++)){i.next=9;break}return i.next=9,o;case 9:i.next=4;break;case 11:i.next=16;break;case 13:i.prev=13,i.t0=i.catch(2),r.e(i.t0);case 16:return i.prev=16,r.f(),i.finish(16);case 19:case"end":return i.stop()}}),wC,null,[[2,13,16,19]])}var WT=qT;var HT=function(e,t){var n=new Proxy(e,{get:function(e,n){return!(n in e)&&n in t&&(e[n]=t[n]()),e[n]},ownKeys:function(e){return Object.keys(e)}});return n},GT=gT.getNode,KT=gT.getNodeMaybe,XT=gT.recoilValuesForKeys,YT=VT.RetentionZone,$T=UT,JT=Object.freeze(new Set),QT=function(e){(0,nu.Z)(n,e);var t=(0,ru.Z)(n);function n(){return(0,f.Z)(this,n),t.apply(this,arguments)}return(0,d.Z)(n)}(gC(Error));function eI(e,t,n,r){var a=e.getState();if(!a.nodeCleanupFunctions.has(n)){var o=GT(n),i=function(e,t,n){if(!oT("recoil_memory_managament_2020"))return function(){};var r=e.getState().retention.nodesRetainedByZone;function a(e){var n=r.get(e);n||r.set(e,n=new Set),n.add(t)}if(n instanceof YT)a(n);else if(Array.isArray(n)){var o,i=(0,Et.Z)(n);try{for(i.s();!(o=i.n()).done;)a(o.value)}catch(s){i.e(s)}finally{i.f()}}return function(){if(oT("recoil_memory_managament_2020")){var r=e.getState().retention;if(n instanceof YT)i(n);else if(Array.isArray(n)){var a,o=(0,Et.Z)(n);try{for(o.s();!(a=o.n()).done;)i(a.value)}catch(s){o.e(s)}finally{o.f()}}}function i(e){var n=r.nodesRetainedByZone.get(e);null===n||void 0===n||n.delete(t),n&&0===n.size&&r.nodesRetainedByZone.delete(e)}}}(e,n,o.retainedBy),s=o.init(e,t,r);a.nodeCleanupFunctions.set(n,(function(){s(),i()}))}}function tI(e,t,n){return GT(n).peek(e,t)}function nI(e,t,n){for(var r=new Set,a=Array.from(n),o=e.getGraph(t.version),i=a.pop();i;i=a.pop()){var s;r.add(i);var u,c=null!==(s=o.nodeToNodeSubscriptions.get(i))&&void 0!==s?s:JT,l=(0,Et.Z)(c);try{for(l.s();!(u=l.n()).done;){var f=u.value;r.has(f)||a.push(f)}}catch(d){l.e(d)}finally{l.f()}}return r}var rI,aI,oI,iI=function(e,t,n){return eI(e,t,n,"get"),GT(n).get(e,t)},sI=tI,uI=function(e,t,n,r){var a=GT(n);if(null==a.set)throw new QT("Attempt to set read-only RecoilValue: ".concat(n));var o=a.set;return eI(e,t,n,"set"),o(e,t,r)},cI=function(e,t,n){eI(e,e.getState().currentTree,t,n)},lI=function(e,t){var n,r=e.getState();null===(n=r.nodeCleanupFunctions.get(t))||void 0===n||n(),r.nodeCleanupFunctions.delete(t)},fI=function(e,t,n){var r,a=KT(t);return null===a||void 0===a||null===(r=a.invalidate)||void 0===r||r.call(a,e),u(u({},e),{},{atomValues:e.atomValues.clone().delete(t),nonvalidatedAtoms:e.nonvalidatedAtoms.clone().set(t,n),dirtyAtoms:$T(e.dirtyAtoms,t)})},dI=function(e,t,n){var r=e.getState(),o=e.getGraph(t.version),i=GT(n).nodeType;return HT({type:i},{loadable:function(){return tI(e,t,n)},isActive:function(){return r.knownAtoms.has(n)||r.knownSelectors.has(n)},isSet:function(){return"selector"!==i&&t.atomValues.has(n)},isModified:function(){return t.dirtyAtoms.has(n)},deps:function(){var e;return XT(null!==(e=o.nodeDeps.get(n))&&void 0!==e?e:[])},subscribers:function(){var o,i;return{nodes:XT(WT(nI(e,t,new Set([n])),(function(e){return e!==n}))),components:iT(null!==(o=null===(i=r.nodeToComponentSubscriptions.get(n))||void 0===i?void 0:i.values())&&void 0!==o?o:[],(function(e){return{name:(0,a.Z)(e,1)[0]}}))}}})},pI=nI,hI=null!==(rI=e.createMutableSource)&&void 0!==rI?rI:e.unstable_createMutableSource,mI=null!==(aI=e.useMutableSource)&&void 0!==aI?aI:e.unstable_useMutableSource,vI=null!==(oI=e.useSyncExternalStore)&&void 0!==oI?oI:e.unstable_useSyncExternalStore;var gI={createMutableSource:hI,useMutableSource:mI,useSyncExternalStore:vI,reactMode:function(){return oT("recoil_transition_support")?{mode:"TRANSITION_SUPPORT",early:!0,concurrent:!0}:oT("recoil_sync_external_store")&&null!=vI?{mode:"SYNC_EXTERNAL_STORE",early:!0,concurrent:!1}:oT("recoil_mutable_source")&&null!=mI&&"undefined"!==typeof window&&!window.$disableRecoilValueMutableSource_TEMP_HACK_DO_NOT_USE?oT("recoil_suppress_rerender_in_callback")?{mode:"MUTABLE_SOURCE",early:!0,concurrent:!0}:{mode:"MUTABLE_SOURCE",early:!1,concurrent:!1}:oT("recoil_suppress_rerender_in_callback")?{mode:"LEGACY",early:!0,concurrent:!1}:{mode:"LEGACY",early:!1,concurrent:!1}}},yI=pI,bI=iI,xI=uI,wI=PT,kI=gT.getNode,SI=gT.getNodeMaybe,_I=gT.DefaultValue,NI=gT.RecoilValueNotReady,EI=gI.reactMode,CI=tT.AbstractRecoilValue,TI=tT.RecoilState,II=tT.RecoilValueReadOnly,OI=tT.isRecoilValue;function AI(e,t,n){if("set"===n.type){var r,o=n.recoilValue,i=function(e,t,n,r){var a=n.key;if("function"===typeof r){var o=bI(e,t,a);if("loading"===o.state)throw new NI(a);if("hasError"===o.state)throw o.contents;return r(o.contents)}return r}(e,t,o,n.valueOrUpdater),s=xI(e,t,o.key,i),u=(0,Et.Z)(s.entries());try{for(u.s();!(r=u.n()).done;){var c=(0,a.Z)(r.value,2);DI(t,c[0],c[1])}}catch(m){u.e(m)}finally{u.f()}}else if("setLoadable"===n.type){DI(t,n.recoilValue.key,n.loadable)}else if("markModified"===n.type){var l=n.recoilValue.key;t.dirtyAtoms.add(l)}else if("setUnvalidated"===n.type){var f,d=n.recoilValue.key,p=n.unvalidatedValue,h=SI(d);null===h||void 0===h||null===(f=h.invalidate)||void 0===f||f.call(h,t),t.atomValues.delete(d),t.nonvalidatedAtoms.set(d,p),t.dirtyAtoms.add(d)}else uT("Unknown action ".concat(n.type))}function DI(e,t,n){"hasValue"===n.state&&n.contents instanceof _I?e.atomValues.delete(t):e.atomValues.set(t,n),e.dirtyAtoms.add(t),e.nonvalidatedAtoms.delete(t)}function MI(e,t){e.replaceState((function(n){var r,a=jI(n),o=(0,Et.Z)(t);try{for(o.s();!(r=o.n()).done;){var i=r.value;AI(e,a,i)}}catch(s){o.e(s)}finally{o.f()}return FI(e,a),a}))}function RI(e,t){if(PI.length){var n=PI[PI.length-1],r=n.get(e);r||n.set(e,r=[]),r.push(t)}else MI(e,[t])}var PI=[];function jI(e){return u(u({},e),{},{atomValues:e.atomValues.clone(),nonvalidatedAtoms:e.nonvalidatedAtoms.clone(),dirtyAtoms:new Set(e.dirtyAtoms)})}function FI(e,t){var n,r=yI(e,t,t.dirtyAtoms),a=(0,Et.Z)(r);try{for(a.s();!(n=a.n()).done;){var o,i,s=n.value;null===(o=SI(s))||void 0===o||null===(i=o.invalidate)||void 0===i||i.call(o,t)}}catch(u){a.e(u)}finally{a.f()}}function LI(e,t,n){RI(e,{type:"set",recoilValue:t,valueOrUpdater:n})}var BI={RecoilValueReadOnly:II,AbstractRecoilValue:CI,RecoilState:TI,getRecoilValueAsLoadable:function(e,t){var n,r,a=t.key,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.getState().currentTree,i=e.getState();o.version!==i.currentTree.version&&o.version!==(null===(n=i.nextTree)||void 0===n?void 0:n.version)&&o.version!==(null===(r=i.previousTree)||void 0===r?void 0:r.version)&&uT("Tried to read from a discarded tree");var s=bI(e,o,a);return"loading"===s.state&&s.contents.catch((function(){})),s},setRecoilValue:LI,setRecoilValueLoadable:function(e,t,n){if(n instanceof _I)return LI(e,t,n);RI(e,{type:"setLoadable",recoilValue:t,loadable:n})},markRecoilValueModified:function(e,t){RI(e,{type:"markModified",recoilValue:t})},setUnvalidatedRecoilValue:function(e,t,n){RI(e,{type:"setUnvalidated",recoilValue:t,unvalidatedValue:n})},subscribeToRecoilValue:function(e,t,n){var r=t.key,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,o=wI(),i=e.getState();i.nodeToComponentSubscriptions.has(r)||i.nodeToComponentSubscriptions.set(r,new Map),EC(i.nodeToComponentSubscriptions.get(r)).set(o,[null!==a&&void 0!==a?a:"<not captured>",n]);var s=EI();if(s.early&&("LEGACY"===s.mode||"MUTABLE_SOURCE"===s.mode)){var u=e.getState().nextTree;u&&u.dirtyAtoms.has(r)&&n(u)}return{release:function(){var t=e.getState(),n=t.nodeToComponentSubscriptions.get(r);void 0!==n&&n.has(o)?(n.delete(o),0===n.size&&t.nodeToComponentSubscriptions.delete(r)):uT("Subscription missing at release time for atom ".concat(r,". This is a bug in Recoil."))}}},isRecoilValue:OI,applyAtomValueWrites:function(e,t){var n=e.clone();return t.forEach((function(e,t){"hasValue"===e.state&&e.contents instanceof _I?n.delete(t):n.set(t,e)})),n},batchStart:function(){var e=new Map;return PI.push(e),function(){var t,n=(0,Et.Z)(e);try{for(n.s();!(t=n.n()).done;){var r=(0,a.Z)(t.value,2);MI(r[0],r[1])}}catch(o){n.e(o)}finally{n.f()}PI.pop()!==e&&uT("Incorrect order of batch popping")}},writeLoadableToTreeState:DI,invalidateDownstreams:FI,copyTreeState:jI,refreshRecoilValue:function(e,t){var n,r=e.getState().currentTree,a=kI(t.key);null===(n=a.clearCache)||void 0===n||n.call(a,e,r)},invalidateDownstreams_FOR_TESTING:FI};var zI=function(e,t,n){for(var r=e.entries(),a=r.next();!a.done;){var o=a.value;if(t.call(n,o[1],o[0],e))return!0;a=r.next()}return!1},ZI=lI,VI=gT.deleteNodeConfigIfPossible,UI=gT.getNode,qI=VT.RetentionZone,WI=new Set;function HI(e,t){var n=e.getState(),r=n.currentTree;if(n.nextTree)uT("releaseNodesNowOnCurrentTree should only be called at the end of a batch");else{var a,o=new Set,i=(0,Et.Z)(t);try{for(i.s();!(a=i.n()).done;){var s=a.value;if(s instanceof qI){var u,c=(0,Et.Z)(KI(n,s));try{for(c.s();!(u=c.n()).done;){var l=u.value;o.add(l)}}catch(h){c.e(h)}finally{c.f()}}else o.add(s)}}catch(h){i.e(h)}finally{i.f()}var f,d=function(e,t){var n=e.getState(),r=n.currentTree,a=e.getGraph(r.version),o=new Set,i=new Set;return s(t),o;function s(t){var u,c=new Set,l=function(e,t,n,r,a){var o=e.getGraph(t.version),i=[],s=new Set;for(;n.size>0;)u(EC(n.values().next().value));return i;function u(e){if(r.has(e)||a.has(e))n.delete(e);else if(!s.has(e)){var t=o.nodeToNodeSubscriptions.get(e);if(t){var c,l=(0,Et.Z)(t);try{for(l.s();!(c=l.n()).done;){u(c.value)}}catch(h){l.e(h)}finally{l.f()}}s.add(e),n.delete(e),i.push(e)}}}(e,r,t,o,i),f=(0,Et.Z)(l);try{for(f.s();!(u=f.n()).done;){var d,p=u.value;if("recoilRoot"!==UI(p).retainedBy)if((null!==(d=n.retention.referenceCounts.get(p))&&void 0!==d?d:0)>0)i.add(p);else if(XI(p).some((function(e){return n.retention.referenceCounts.get(e)})))i.add(p);else{var m=a.nodeToNodeSubscriptions.get(p);m&&zI(m,(function(e){return i.has(e)}))?i.add(p):(o.add(p),c.add(p))}else i.add(p)}}catch(h){f.e(h)}finally{f.f()}var v,g=new Set,y=(0,Et.Z)(c);try{for(y.s();!(v=y.n()).done;){var b,x=v.value,w=(0,Et.Z)(null!==(k=a.nodeDeps.get(x))&&void 0!==k?k:WI);try{for(w.s();!(b=w.n()).done;){var k,S=b.value;o.has(S)||g.add(S)}}catch(h){w.e(h)}finally{w.f()}}}catch(h){y.e(h)}finally{y.f()}g.size&&s(g)}}(e,o),p=(0,Et.Z)(d);try{for(p.s();!(f=p.n()).done;){GI(e,r,f.value)}}catch(h){p.e(h)}finally{p.f()}}}function GI(e,t,n){if(oT("recoil_memory_managament_2020")){ZI(e,n);var r=e.getState();r.knownAtoms.delete(n),r.knownSelectors.delete(n),r.nodeTransactionSubscriptions.delete(n),r.retention.referenceCounts.delete(n);var a,o=XI(n),i=(0,Et.Z)(o);try{for(i.s();!(a=i.n()).done;){var s,u=a.value;null===(s=r.retention.nodesRetainedByZone.get(u))||void 0===s||s.delete(n)}}catch(m){i.e(m)}finally{i.f()}t.atomValues.delete(n),t.dirtyAtoms.delete(n),t.nonvalidatedAtoms.delete(n);var c=r.graphsByVersion.get(t.version);if(c){var l=c.nodeDeps.get(n);if(void 0!==l){c.nodeDeps.delete(n);var f,d=(0,Et.Z)(l);try{for(d.s();!(f=d.n()).done;){var p,h=f.value;null===(p=c.nodeToNodeSubscriptions.get(h))||void 0===p||p.delete(n)}}catch(m){d.e(m)}finally{d.f()}}c.nodeToNodeSubscriptions.delete(n)}VI(n)}}function KI(e,t){var n;return null!==(n=e.retention.nodesRetainedByZone.get(t))&&void 0!==n?n:WI}function XI(e){var t=UI(e).retainedBy;return void 0===t||"components"===t||"recoilRoot"===t?[]:t instanceof qI?[t]:t}function YI(e,t){oT("recoil_memory_managament_2020")&&(e.getState().retention.referenceCounts.delete(t),function(e,t){var n=e.getState();n.nextTree?n.retention.retainablesToCheckForRelease.add(t):HI(e,new Set([t]))}(e,t))}var $I=12e4,JI=function(e,t,n){var r;if(oT("recoil_memory_managament_2020")){var a=e.getState().retention.referenceCounts,o=(null!==(r=a.get(t))&&void 0!==r?r:0)+n;0===o?YI(e,t):a.set(t,o)}},QI=function(e){if(oT("recoil_memory_managament_2020")){var t=e.getState();HI(e,t.retention.retainablesToCheckForRelease),t.retention.retainablesToCheckForRelease.clear()}},eO=function(e){return void 0===e?"recoilRoot":e},tO=t.unstable_batchedUpdates,nO=BI.batchStart,rO={unstable_batchedUpdates:{unstable_batchedUpdates:tO}.unstable_batchedUpdates}.unstable_batchedUpdates,aO=function(e){rO((function(){var t=function(){};try{t=nO(),e()}finally{t()}}))};function oO(e){var t,n,r,a,o,i;return l().wrap((function(s){for(;;)switch(s.prev=s.next){case 0:t=(0,Et.Z)(e),s.prev=1,t.s();case 3:if((n=t.n()).done){s.next=24;break}r=n.value,a=(0,Et.Z)(r),s.prev=6,a.s();case 8:if((o=a.n()).done){s.next=14;break}return i=o.value,s.next=12,i;case 12:s.next=8;break;case 14:s.next=19;break;case 16:s.prev=16,s.t0=s.catch(6),a.e(s.t0);case 19:return s.prev=19,a.f(),s.finish(19);case 22:s.next=3;break;case 24:s.next=29;break;case 26:s.prev=26,s.t1=s.catch(1),t.e(s.t1);case 29:return s.prev=29,t.f(),s.finish(29);case 32:case"end":return s.stop()}}),kC,null,[[1,26,29,32],[6,16,19,22]])}var iO=oO,sO={isSSR:"undefined"===typeof window,isReactNative:"undefined"!==typeof navigator&&"ReactNative"===navigator.product};var uO=function(e,t){var n,r,a=this;return[function(){for(var o=arguments.length,i=new Array(o),s=0;s<o;s++)i[s]=arguments[s];var u=t.apply(void 0,i);return n===u?r:(n=u,r=e.apply(a,i))},function(){n=null}]},cO=aO,lO=cI,fO=dI,dO=TT,pO=RT,hO=gT.DEFAULT_VALUE,mO=gT.recoilValues,vO=gT.recoilValuesForKeys,gO=BI.AbstractRecoilValue,yO=BI.getRecoilValueAsLoadable,bO=BI.setRecoilValue,xO=BI.setUnvalidatedRecoilValue,wO=JI,kO=zT.getNextTreeStateVersion,SO=zT.makeEmptyStoreState,_O=sO.isSSR,NO=uO,EO=function(){function e(t){var n=this;(0,f.Z)(this,e),CC(this,"_store",void 0),CC(this,"_refCount",1),CC(this,"getLoadable",(function(e){return n.checkRefCount_INTERNAL(),yO(n._store,e)})),CC(this,"getPromise",(function(e){return n.checkRefCount_INTERNAL(),n.getLoadable(e).toPromise()})),CC(this,"getNodes_UNSTABLE",(function(e){if(n.checkRefCount_INTERNAL(),!0===(null===e||void 0===e?void 0:e.isModified)){if(!1===(null===e||void 0===e?void 0:e.isInitialized))return[];var t=n._store.getState().currentTree;return vO(t.dirtyAtoms)}var r=n._store.getState().knownAtoms,a=n._store.getState().knownSelectors;return null==(null===e||void 0===e?void 0:e.isInitialized)?mO.values():!0===e.isInitialized?vO(iO([n._store.getState().knownAtoms,n._store.getState().knownSelectors])):WT(mO.values(),(function(e){var t=e.key;return!r.has(t)&&!a.has(t)}))})),CC(this,"getInfo_UNSTABLE",(function(e){var t=e.key;return n.checkRefCount_INTERNAL(),fO(n._store,n._store.getState().currentTree,t)})),CC(this,"map",(function(e){n.checkRefCount_INTERNAL();var t=new DO(n,cO);return e(t),t})),CC(this,"asyncMap",function(){var e=(0,o.Z)(l().mark((function e(t){var r;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.checkRefCount_INTERNAL(),(r=new DO(n,cO)).retain(),e.next=5,t(r);case 5:return r.autoRelease_INTERNAL(),e.abrupt("return",r);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),this._store={storeID:pO(),getState:function(){return t},replaceState:function(e){t.currentTree=e(t.currentTree)},getGraph:function(e){var n=t.graphsByVersion;if(n.has(e))return EC(n.get(e));var r=dO();return n.set(e,r),r},subscribeToTransactions:function(){return{release:function(){}}},addTransactionMetadata:function(){throw _C("Cannot subscribe to Snapshots")}};var r,a=(0,Et.Z)(this._store.getState().knownAtoms);try{for(a.s();!(r=a.n()).done;){var i=r.value;lO(this._store,i,"get"),wO(this._store,i,1)}}catch(s){a.e(s)}finally{a.f()}this.autoRelease_INTERNAL()}return(0,d.Z)(e,[{key:"retain",value:function(){var e=this;this._refCount<=0&&uT("Attempt to retain() Snapshot that was already released."),this._refCount++;var t=!1;return function(){t||(t=!0,e._release())}}},{key:"autoRelease_INTERNAL",value:function(){var e=this;_O||window.setTimeout((function(){return e._release()}),0)}},{key:"_release",value:function(){if(this._refCount--,0===this._refCount){if(this._store.getState().nodeCleanupFunctions.forEach((function(e){return e()})),this._store.getState().nodeCleanupFunctions.clear(),!oT("recoil_memory_managament_2020"))return}else this._refCount}},{key:"isRetained",value:function(){return this._refCount>0}},{key:"checkRefCount_INTERNAL",value:function(){oT("recoil_memory_managament_2020")&&this._refCount}},{key:"getStore_INTERNAL",value:function(){return this.checkRefCount_INTERNAL(),this._store}},{key:"getID",value:function(){return this.checkRefCount_INTERNAL(),this._store.getState().currentTree.stateID}}]),e}();function CO(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=e.getState(),o=n?kO():t.version;return{currentTree:n?{version:o,stateID:o,transactionMetadata:u({},t.transactionMetadata),dirtyAtoms:new Set(t.dirtyAtoms),atomValues:t.atomValues.clone(),nonvalidatedAtoms:t.nonvalidatedAtoms.clone()}:t,commitDepth:0,nextTree:null,previousTree:null,knownAtoms:new Set(r.knownAtoms),knownSelectors:new Set(r.knownSelectors),transactionSubscriptions:new Map,nodeTransactionSubscriptions:new Map,nodeToComponentSubscriptions:new Map,queuedComponentCallbacks_DEPRECATED:[],suspendedComponentResolvers:new Set,graphsByVersion:(new Map).set(o,e.getGraph(t.version)),retention:{referenceCounts:new Map,nodesRetainedByZone:new Map,retainablesToCheckForRelease:new Set},nodeCleanupFunctions:new Map(iT(r.nodeCleanupFunctions.entries(),(function(e){return[(0,a.Z)(e,1)[0],function(){}]})))}}var TO=NO((function(e,t){var n=e.getState(),r="current"===t?n.currentTree:EC(n.previousTree);return new EO(CO(e,r))}),(function(e,t){var n;return String(t)+String(e.storeID)+String(e.getState().currentTree.version)+String(null===(n=e.getState().previousTree)||void 0===n?void 0:n.version)})),IO=(0,a.Z)(TO,2),OO=IO[0],AO=IO[1];var DO=function(e){(0,nu.Z)(n,e);var t=(0,ru.Z)(n);function n(e,r){var o;return(0,f.Z)(this,n),o=t.call(this,CO(e.getStore_INTERNAL(),e.getStore_INTERNAL().getState().currentTree,!0)),CC((0,tu.Z)(o),"_batch",void 0),CC((0,tu.Z)(o),"set",(function(e,t){o.checkRefCount_INTERNAL();var n=o.getStore_INTERNAL();o._batch((function(){wO(n,e.key,1),bO(o.getStore_INTERNAL(),e,t)}))})),CC((0,tu.Z)(o),"reset",(function(e){o.checkRefCount_INTERNAL();var t=o.getStore_INTERNAL();o._batch((function(){wO(t,e.key,1),bO(o.getStore_INTERNAL(),e,hO)}))})),CC((0,tu.Z)(o),"setUnvalidatedAtomValues_DEPRECATED",(function(e){o.checkRefCount_INTERNAL();var t=o.getStore_INTERNAL();cO((function(){var n,r=(0,Et.Z)(e.entries());try{for(r.s();!(n=r.n()).done;){var o=(0,a.Z)(n.value,2),i=o[0],s=o[1];wO(t,i,1),xO(t,new gO(i),s)}}catch(u){r.e(u)}finally{r.f()}}))})),o._batch=r,o}return(0,d.Z)(n)}(EO),MO={Snapshot:EO,MutableSnapshot:DO,freshSnapshot:function(e){var t=new EO(SO());return null!=e?t.map(e):t},cloneSnapshot:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"current",n=OO(e,t);return n.isRetained()?n:(AO(),OO(e,t))}},RO=MO.Snapshot,PO=MO.MutableSnapshot,jO=MO.freshSnapshot,FO=MO.cloneSnapshot,LO=Object.freeze({__proto__:null,Snapshot:RO,MutableSnapshot:PO,freshSnapshot:jO,cloneSnapshot:FO});var BO=function(){for(var e=new Set,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var a=0,o=n;a<o.length;a++){var i,s=o[a],u=(0,Et.Z)(s);try{for(u.s();!(i=u.n()).done;){var c=i.value;e.add(c)}}catch(l){u.e(l)}finally{u.f()}}return e},zO=e.useRef;var ZO=function(e){var t=zO(e);return t.current===e&&"function"===typeof e&&(t.current=e()),t},VO=zT.getNextTreeStateVersion,UO=zT.makeEmptyStoreState,qO=lI,WO=pI,HO=cI,GO=uI,KO=fI,XO=TT,YO=CT,$O=RT,JO=gI.createMutableSource,QO=gI.reactMode,eA=BI.applyAtomValueWrites,tA=QI,nA=LO.freshSnapshot,rA=e.useCallback,aA=e.useContext,oA=e.useEffect,iA=e.useMemo,sA=e.useRef,uA=e.useState;function cA(){throw _C("This component must be used inside a <RecoilRoot> component.")}var lA=Object.freeze({storeID:$O(),getState:cA,replaceState:cA,getGraph:cA,subscribeToTransactions:cA,addTransactionMetadata:cA}),fA=!1;function dA(e){if(fA)throw _C("An atom update was triggered within the execution of a state updater function. State updater functions provided to Recoil must be pure functions.");var t=e.getState();if(null===t.nextTree){oT("recoil_memory_managament_2020")&&oT("recoil_release_on_cascading_update_killswitch_2021")&&t.commitDepth>0&&tA(e);var n=t.currentTree.version,r=VO();t.nextTree=u(u({},t.currentTree),{},{version:r,stateID:r,dirtyAtoms:new Set,transactionMetadata:{}}),t.graphsByVersion.set(r,YO(EC(t.graphsByVersion.get(n))))}}var pA=e.createContext({current:lA}),hA=function(){return aA(pA)},mA=e.createContext(null);function vA(e,t,n){var r,o=WO(e,n,n.dirtyAtoms),i=(0,Et.Z)(o);try{for(i.s();!(r=i.n()).done;){var s=r.value,u=t.nodeToComponentSubscriptions.get(s);if(u){var c,l=(0,Et.Z)(u);try{for(l.s();!(c=l.n()).done;){var f=(0,a.Z)(c.value,2),d=(f[0],(0,a.Z)(f[1],2));d[0];(0,d[1])(n)}}catch(p){l.e(p)}finally{l.f()}}}}catch(p){i.e(p)}finally{i.f()}}function gA(e){var t=e.getState(),n=t.currentTree,r=n.dirtyAtoms;if(r.size){var o,i=(0,Et.Z)(t.nodeTransactionSubscriptions);try{for(i.s();!(o=i.n()).done;){var s=(0,a.Z)(o.value,2),u=s[0],c=s[1];if(r.has(u)){var l,f=(0,Et.Z)(c);try{for(f.s();!(l=f.n()).done;){var d=(0,a.Z)(l.value,2);d[0];(0,d[1])(e)}}catch(v){f.e(v)}finally{f.f()}}}}catch(v){i.e(v)}finally{i.f()}var p,h=(0,Et.Z)(t.transactionSubscriptions);try{for(h.s();!(p=h.n()).done;){var m=(0,a.Z)(p.value,2);m[0];(0,m[1])(e)}}catch(v){h.e(v)}finally{h.f()}(!QO().early||t.suspendedComponentResolvers.size>0)&&(vA(e,t,n),t.suspendedComponentResolvers.forEach((function(e){return e()})),t.suspendedComponentResolvers.clear())}t.queuedComponentCallbacks_DEPRECATED.forEach((function(e){return e(n)})),t.queuedComponentCallbacks_DEPRECATED.splice(0,t.queuedComponentCallbacks_DEPRECATED.length)}function yA(e){var t=e.setNotifyBatcherOfChange,n=hA(),r=uA([]),o=(0,a.Z)(r,2)[1];return t((function(){return o({})})),oA((function(){return t((function(){return o({})})),function(){t((function(){}))}}),[t]),oA((function(){yT.enqueueExecution("Batcher",(function(){!function(e){var t=e.getState();t.commitDepth++;try{var n=t.nextTree;if(null===n)return;t.previousTree=t.currentTree,t.currentTree=n,t.nextTree=null,gA(e),null!=t.previousTree?t.graphsByVersion.delete(t.previousTree.version):uT("Ended batch with no previous state, which is unexpected","recoil"),t.previousTree=null,oT("recoil_memory_managament_2020")&&tA(e)}finally{t.commitDepth--}}(n.current)}))})),null}var bA=0;function xA(t){var n,r=t.initializeState_DEPRECATED,a=t.initializeState,o=t.store_INTERNAL,i=t.children,s=function(e){var t=n.current.graphsByVersion;if(t.has(e))return EC(t.get(e));var r=XO();return t.set(e,r),r},c=function(e,t){if(null==t){var n=h.current.getState().transactionSubscriptions,r=bA++;return n.set(r,e),{release:function(){n.delete(r)}}}var a=h.current.getState().nodeTransactionSubscriptions;a.has(t)||a.set(t,new Map);var o=bA++;return EC(a.get(t)).set(o,e),{release:function(){var e=a.get(t);e&&(e.delete(o),0===e.size&&a.delete(t))}}},l=function(e){dA(h.current);for(var t=0,n=Object.keys(e);t<n.length;t++){var r=n[t];EC(h.current.getState().nextTree).transactionMetadata[r]=e[r]}},f=function(e){dA(h.current);var t,r=EC(n.current.nextTree);try{fA=!0,t=e(r)}finally{fA=!1}t!==r&&(n.current.nextTree=t,QO().early&&vA(h.current,n.current,t),EC(d.current)())},d=sA(null),p=rA((function(e){d.current=e}),[d]),h=ZO((function(){return null!==o&&void 0!==o?o:{storeID:$O(),getState:function(){return n.current},replaceState:f,getGraph:s,subscribeToTransactions:c,addTransactionMetadata:l}}));null!=o&&(h.current=o),n=ZO((function(){return null!=r?function(e,t){var n=UO();return t({set:function(t,r){var a,o=n.currentTree,i=GO(e,o,t.key,r),s=new Set(i.keys()),c=o.nonvalidatedAtoms.clone(),l=(0,Et.Z)(s);try{for(l.s();!(a=l.n()).done;){var f=a.value;c.delete(f)}}catch(d){l.e(d)}finally{l.f()}n.currentTree=u(u({},o),{},{dirtyAtoms:BO(o.dirtyAtoms,s),atomValues:eA(o.atomValues,i),nonvalidatedAtoms:c})},setUnvalidatedAtomValues:function(e){e.forEach((function(e,t){n.currentTree=KO(n.currentTree,t,e)}))}}),n}(h.current,r):null!=a?function(e){var t=nA().map(e),n=t.getStore_INTERNAL().getState();return t.retain(),n.nodeCleanupFunctions.forEach((function(e){return e()})),n.nodeCleanupFunctions.clear(),n}(a):UO()}));var m=iA((function(){return null===JO||void 0===JO?void 0:JO(n,(function(){return n.current.currentTree.version}))}),[n]);return oA((function(){var e,t=h.current,n=(0,Et.Z)(new Set(t.getState().knownAtoms));try{for(n.s();!(e=n.n()).done;){var r=e.value;HO(t,r,"get")}}catch(a){n.e(a)}finally{n.f()}return function(){var e,n=(0,Et.Z)(t.getState().knownAtoms);try{for(n.s();!(e=n.n()).done;){var r=e.value;qO(t,r)}}catch(a){n.e(a)}finally{n.f()}}}),[h]),e.createElement(pA.Provider,{value:h},e.createElement(mA.Provider,{value:m},e.createElement(yA,{setNotifyBatcherOfChange:p}),i))}var wA=function(t){var n=t.override,r=Lg(t,yC),a=hA();return!1===n&&a.current!==lA?t.children:e.createElement(xA,r)},kA=hA,SA=function(){var e=aA(mA);return null==e&&nT("Attempted to use a Recoil hook outside of a <RecoilRoot>. <RecoilRoot> must be an ancestor of any component that uses Recoil hooks."),e},_A=function(){return hA().current.storeID};var NA=function(e,t){if(e===t)return!0;if(e.length!==t.length)return!1;for(var n=0,r=e.length;n<r;n++)if(e[n]!==t[n])return!1;return!0},EA=e.useEffect,CA=e.useRef;var TA=function(e){var t=CA();return EA((function(){t.current=e})),t.current},IA=kA,OA=$I,AA=JI,DA=VT.RetentionZone,MA=e.useEffect,RA=e.useRef,PA=sO.isSSR;var jA=function(e){if(oT("recoil_memory_managament_2020"))return function(e){var t=(Array.isArray(e)?e:[e]).map((function(e){return e instanceof DA?e:e.key})),n=IA();MA((function(){if(oT("recoil_memory_managament_2020")){var e=n.current;if(a.current&&!PA)window.clearTimeout(a.current),a.current=null;else{var r,o=(0,Et.Z)(t);try{for(o.s();!(r=o.n()).done;){var i=r.value;AA(e,i,1)}}catch(s){o.e(s)}finally{o.f()}}return function(){var n,r=(0,Et.Z)(t);try{for(r.s();!(n=r.n()).done;){var a=n.value;AA(e,a,-1)}}catch(s){r.e(s)}finally{r.f()}}}}),[n].concat((0,r.Z)(t)));var a=RA(),o=TA(t);if(!PA&&(void 0===o||!NA(o,t))){var i,s=n.current,u=(0,Et.Z)(t);try{for(u.s();!(i=u.n()).done;){var c=i.value;AA(s,c,1)}}catch(p){u.e(p)}finally{u.f()}if(o){var l,f=(0,Et.Z)(o);try{for(f.s();!(l=f.n()).done;){var d=l.value;AA(s,d,-1)}}catch(p){f.e(p)}finally{f.f()}}a.current&&window.clearTimeout(a.current),a.current=window.setTimeout((function(){a.current=null;var e,n=(0,Et.Z)(t);try{for(n.s();!(e=n.n()).done;){var r=e.value;AA(s,r,-1)}}catch(p){n.e(p)}finally{n.f()}}),OA)}}(e)};var FA=e.useRef;var LA=function(){return FA(),"<component name not available>"},BA=gT.DEFAULT_VALUE,zA=gI.reactMode,ZA=gI.useMutableSource,VA=gI.useSyncExternalStore,UA=SA,qA=kA,WA=(tT.isRecoilValue,BI.getRecoilValueAsLoadable),HA=BI.setRecoilValue,GA=BI.subscribeToRecoilValue,KA=e.useCallback,XA=e.useEffect,YA=e.useMemo,$A=e.useRef,JA=e.useState;function QA(e,t,n){if("hasValue"===e.state)return e.contents;if("loading"===e.state)throw new Promise((function(e){n.current.getState().suspendedComponentResolvers.add(e)}));throw"hasError"===e.state?e.contents:_C('Invalid value of loadable atom "'.concat(t.key,'"'))}function eD(e){var t=qA(),n=LA(),r=KA((function(){var n;var r=t.current,a=r.getState(),o=zA().early&&null!==(n=a.nextTree)&&void 0!==n?n:a.currentTree;return{loadable:WA(r,e,o),key:e.key}}),[t,e]),a=KA((function(e){var t;return function(){var n,r,a=e();return null!==(n=t)&&void 0!==n&&n.loadable.is(a.loadable)&&(null===(r=t)||void 0===r?void 0:r.key)===a.key?t:(t=a,a)}}),[]),o=YA((function(){return a(r)}),[r,a]),i=KA((function(r){var a=t.current;return GA(a,e,r,n).release}),[t,e,n]);return VA(i,o,o).loadable}function tD(e){var t=qA(),n=KA((function(){var n,r=t.current,a=r.getState(),o=zA().early&&null!==(n=a.nextTree)&&void 0!==n?n:a.currentTree;return WA(r,e,o)}),[t,e]),r=KA((function(){return n()}),[n]),a=LA(),o=KA((function(r,o){var i=t.current;return GA(i,e,(function(){if(!oT("recoil_suppress_rerender_in_callback"))return o();var e=n();u.current.is(e)||o(),u.current=e}),a).release}),[t,e,a,n]),i=UA();if(null==i)throw _C("Recoil hooks must be used in components contained within a <RecoilRoot> component.");var s=ZA(i,r,o),u=$A(s);return XA((function(){u.current=s})),s}function nD(e){var t=qA(),n=LA(),r=KA((function(){var n;var r=t.current,a=r.getState(),o=zA().early&&null!==(n=a.nextTree)&&void 0!==n?n:a.currentTree;return WA(r,e,o)}),[t,e]),o=KA((function(){return{loadable:r(),key:e.key}}),[r,e.key]),i=KA((function(e){var t=o();return e.loadable.is(t.loadable)&&e.key===t.key?e:t}),[o]);XA((function(){var r=GA(t.current,e,(function(e){l(i)}),n);return l(i),r.release}),[n,e,t,i]);var s=JA(o),u=(0,a.Z)(s,2),c=u[0],l=u[1];return c.key!==e.key?o().loadable:c.loadable}function rD(e){var t=qA(),n=JA([]),r=(0,a.Z)(n,2)[1],o=LA(),i=KA((function(){var n;var r=t.current,a=r.getState(),o=zA().early&&null!==(n=a.nextTree)&&void 0!==n?n:a.currentTree;return WA(r,e,o)}),[t,e]),s=i(),u=$A(s);return XA((function(){u.current=s})),XA((function(){var n=t.current,a=n.getState(),s=GA(n,e,(function(e){var t;if(!oT("recoil_suppress_rerender_in_callback"))return r([]);var n=i();null!==(t=u.current)&&void 0!==t&&t.is(n)||r(n),u.current=n}),o);if(a.nextTree)n.getState().queuedComponentCallbacks_DEPRECATED.push((function(){u.current=null,r([])}));else{var c;if(!oT("recoil_suppress_rerender_in_callback"))return r([]);var l=i();null!==(c=u.current)&&void 0!==c&&c.is(l)||r(l),u.current=l}return s.release}),[o,i,e,t]),s}function aD(e){return oT("recoil_memory_managament_2020")&&jA(e),{TRANSITION_SUPPORT:nD,SYNC_EXTERNAL_STORE:eD,MUTABLE_SOURCE:tD,LEGACY:rD}[zA().mode](e)}function oD(e){var t=qA();return QA(aD(e),e,t)}function iD(e){var t=qA();return KA((function(n){HA(t.current,e,n)}),[t,e])}function sD(e){return oT("recoil_memory_managament_2020")&&jA(e),nD(e)}function uD(e){var t=qA();return QA(sD(e),e,t)}var cD=function(e){return[oD(e),iD(e)]},lD=function(e){return[aD(e),iD(e)]},fD=oD,dD=aD,pD=function(e){var t=qA();return KA((function(){HA(t.current,e,BA)}),[t,e])},hD=iD,mD=sD,vD=uD,gD=function(e){return[uD(e),iD(e)]};var yD=aO,bD=gT.DEFAULT_VALUE,xD=gT.getNode,wD=kA,kD=BI.AbstractRecoilValue,SD=BI.setRecoilValueLoadable,_D=$I,ND=LO.cloneSnapshot,ED=e.useCallback,CD=e.useEffect,TD=e.useRef,ID=e.useState,OD=sO.isSSR;function AD(e){var t=wD();CD((function(){return t.current.subscribeToTransactions(e).release}),[e,t])}function DD(e,t){var n,r=e.getState(),a=null!==(n=r.nextTree)&&void 0!==n?n:r.currentTree,o=t.getStore_INTERNAL().getState().currentTree;yD((function(){for(var n=new Set,r=0,i=[a.atomValues.keys(),o.atomValues.keys()];r<i.length;r++){var s,c=i[r],l=(0,Et.Z)(c);try{for(l.s();!(s=l.n()).done;){var f,d,p=s.value;(null===(f=a.atomValues.get(p))||void 0===f?void 0:f.contents)!==(null===(d=o.atomValues.get(p))||void 0===d?void 0:d.contents)&&xD(p).shouldRestoreFromSnapshots&&n.add(p)}}catch(h){l.e(h)}finally{l.f()}}n.forEach((function(t){SD(e,new kD(t),o.atomValues.has(t)?EC(o.atomValues.get(t)):bD)})),e.replaceState((function(e){return u(u({},e),{},{stateID:t.getID()})}))}))}var MD=function(){var e=wD(),t=ID((function(){return ND(e.current)})),n=(0,a.Z)(t,2),r=n[0],o=n[1],i=TA(r),s=TD(),u=TD();if(AD(ED((function(e){return o(ND(e))}),[])),CD((function(){var e,t=r.retain();s.current&&!OD&&(window.clearTimeout(s.current),s.current=null,null===(e=u.current)||void 0===e||e.call(u),u.current=null);return t}),[r]),i!==r&&!OD){var c;if(s.current)window.clearTimeout(s.current),s.current=null,null===(c=u.current)||void 0===c||c.call(u),u.current=null;u.current=r.retain(),s.current=window.setTimeout((function(){var e;s.current=null,null===(e=u.current)||void 0===e||e.call(u),u.current=null}),_D)}return r},RD=DD,PD=function(){var e=wD();return ED((function(t){return DD(e.current,t)}),[e])},jD=function(e){AD(ED((function(t){var n=ND(t,"current"),r=ND(t,"previous");e({snapshot:n,previousSnapshot:r})}),[e]))},FD=dI,LD=kA;var BD=function(){var e=LD();return function(t){var n=t.key;return FD(e.current,e.current.getState().currentTree,n)}},zD=gI.reactMode,ZD=wA,VD=kA,UD=e.useMemo;var qD=function(){"MUTABLE_SOURCE"===zD().mode&&console.warn("Warning: There are known issues using useRecoilBridgeAcrossReactRoots() in recoil_mutable_source rendering mode.  Please consider upgrading to recoil_sync_external_store mode.");var t=VD().current;return UD((function(){return function(n){var r=n.children;return e.createElement(ZD,{store_INTERNAL:t},r)}}),[t])},WD=HC.loadableWithValue,HD=cI,GD=gT.DEFAULT_VALUE,KD=gT.getNode,XD=BI.copyTreeState,YD=BI.getRecoilValueAsLoadable,$D=BI.invalidateDownstreams,JD=BI.writeLoadableToTreeState;function QD(e){return"atom"===KD(e.key).nodeType}var eM=function(){function e(t,n){var r=this;(0,f.Z)(this,e),CC(this,"_store",void 0),CC(this,"_treeState",void 0),CC(this,"_changes",void 0),CC(this,"get",(function(e){if(r._changes.has(e.key))return r._changes.get(e.key);if(!QD(e))throw _C("Reading selectors within atomicUpdate is not supported");var t=YD(r._store,e,r._treeState);if("hasValue"===t.state)return t.contents;throw"hasError"===t.state?t.contents:_C("Expected Recoil atom ".concat(e.key," to have a value, but it is in a loading state."))})),CC(this,"set",(function(e,t){if(!QD(e))throw _C("Setting selectors within atomicUpdate is not supported");if("function"===typeof t){var n=r.get(e);r._changes.set(e.key,t(n))}else HD(r._store,e.key,"set"),r._changes.set(e.key,t)})),CC(this,"reset",(function(e){r.set(e,GD)})),this._store=t,this._treeState=n,this._changes=new Map}return(0,d.Z)(e,[{key:"newTreeState_INTERNAL",value:function(){if(0===this._changes.size)return this._treeState;var e,t=XD(this._treeState),n=(0,Et.Z)(this._changes);try{for(n.s();!(e=n.n()).done;){var r=(0,a.Z)(e.value,2),o=r[0],i=r[1];JD(t,o,WD(i))}}catch(s){n.e(s)}finally{n.f()}return $D(this._store,t),t}}]),e}();var tM=function(e){return function(t){e.replaceState((function(n){var r=new eM(e,n);return t(r),r.newTreeState_INTERNAL()}))}},nM=Object.freeze({__proto__:null,atomicUpdater:tM});var rM=function(e,t){if(!e)throw new Error(t)},aM=nM.atomicUpdater,oM=aO,iM=gT.DEFAULT_VALUE,sM=kA,uM=BI.refreshRecoilValue,cM=BI.setRecoilValue,lM=(LO.Snapshot,LO.cloneSnapshot),fM=RD,dM=e.useCallback,pM=(0,d.Z)((function e(){(0,f.Z)(this,e)})),hM=new pM;function mM(e,t,n,a){var o=hM;return oM((function(){var i="useRecoilCallback() expects a function that returns a function: it accepts a function of the type (RecoilInterface) => (Args) => ReturnType and returns a callback function (Args) => ReturnType, where RecoilInterface is an object {snapshot, set, ...} and Args and ReturnType are the argument and return types of the callback you want to create.  Please see the docs at recoiljs.org for details.";if("function"!==typeof t)throw _C(i);var s=HT(u(u({},null!==a&&void 0!==a?a:{}),{},{set:function(t,n){return cM(e,t,n)},reset:function(t){return cM(e,t,iM)},refresh:function(t){return uM(e,t)},gotoSnapshot:function(t){return fM(e,t)},transact_UNSTABLE:function(t){return aM(e)(t)}}),{snapshot:function(){return lM(e)}}),c=t(s);if("function"!==typeof c)throw _C(i);o=c.apply(void 0,(0,r.Z)(n))})),o instanceof pM&&rM(!1),o}var vM=mM,gM=function(e,t){var n=sM();return dM((function(){for(var t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];return mM(n.current,e,r)}),null!=t?[].concat((0,r.Z)(t),[n]):void 0)},yM=kA,bM=BI.refreshRecoilValue,xM=e.useCallback;var wM=function(e){var t=yM();return xM((function(){var n=t.current;bM(n,e)}),[e,t])},kM=nM.atomicUpdater,SM=kA,_M=e.useMemo;var NM=function(e,t){var n=SM();return _M((function(){return function(){for(var t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];var o=kM(n.current);o((function(t){e(t).apply(void 0,r)}))}}),null!=t?[].concat((0,r.Z)(t),[n]):void 0)},EM=function(){function e(t){var n,r,a;(0,f.Z)(this,e),CC(this,"_numLeafs",void 0),CC(this,"_root",void 0),CC(this,"_onHit",void 0),CC(this,"_onSet",void 0),CC(this,"_mapNodeValue",void 0),this._numLeafs=0,this._root=null,this._onHit=null!==(n=null===t||void 0===t?void 0:t.onHit)&&void 0!==n?n:function(){},this._onSet=null!==(r=null===t||void 0===t?void 0:t.onSet)&&void 0!==r?r:function(){},this._mapNodeValue=null!==(a=null===t||void 0===t?void 0:t.mapNodeValue)&&void 0!==a?a:function(e){return e}}return(0,d.Z)(e,[{key:"size",value:function(){return this._numLeafs}},{key:"root",value:function(){return this._root}},{key:"get",value:function(e,t){var n;return null===(n=this.getLeafNode(e,t))||void 0===n?void 0:n.value}},{key:"getLeafNode",value:function(e,t){var n=this;return CM(this.root(),(function(t){return n._mapNodeValue(e(t))}),{onNodeVisit:function(e){null===t||void 0===t||t.onNodeVisit(e),"leaf"===e.type&&n._onHit(e)}})}},{key:"set",value:function(e,t,n){var r,o=this,i=null;!function s(){i=TM(o.root(),e.map((function(e){var t=(0,a.Z)(e,2),n=t[0],r=t[1];return[n,o._mapNodeValue(r)]})),null,t,null,{onNodeVisit:function(e){null===n||void 0===n||n.onNodeVisit(e),"leaf"===e.type&&(r=e)}},(function(){o.clear(),s()}))}(),this.root()||(this._root=i),this._numLeafs++,this._onSet(EC(r))}},{key:"delete",value:function(e){if(!this.root())return!1;var t=EC(this.root());return!!IM(t,e,e.parent)&&(e===t||"branch"===t.type&&!t.branches.size?(this._root=null,this._numLeafs=0,!0):(this._numLeafs-=AM(e),!0))}},{key:"clear",value:function(){this._numLeafs=0,this._root=null}}]),e}(),CM=function e(t,n,r){var a;if(null!=t){if(null===r||void 0===r||null===(a=r.onNodeVisit)||void 0===a||a.call(r,t),"leaf"===t.type)return t;var o=n(t.nodeKey);return e(t.branches.get(o),n,r)}},TM=function e(t,n,r,o,i,s,u){var c,l;if(null==t)if(0===n.length)l={type:"leaf",value:o,parent:r,branchKey:i};else{var f=(0,dC.Z)(n),d=f[0],p=f.slice(1),h=(0,a.Z)(d,2),m=h[0],v=h[1];(l={type:"branch",nodeKey:m,parent:r,branches:new Map,branchKey:i}).branches.set(v,e(null,p,l,o,v,s,u))}else if(l=t,n.length){var g=(0,dC.Z)(n),y=g[0],b=g.slice(1),x=(0,a.Z)(y,2),w=x[0],k=x[1];if("branch"!==t.type||t.nodeKey!==w)return uT("Existing cache must have a branch midway through the route with matching node key. Resetting cache."),u(),l;t.branches.set(k,e(t.branches.get(k),b,t,o,k,s,u))}return null===s||void 0===s||null===(c=s.onNodeVisit)||void 0===c||c.call(s,l),l},IM=function(e,t,n){return n?(n.branches.delete(t.branchKey),OM(e,n,n.parent)):e===t},OM=function e(t,n,r){return r?(0===n.branches.size&&r.branches.delete(n.branchKey),e(t,r,r.parent)):t===n},AM=function e(t){return"leaf"===t.type?1:Array.from(t.branches.values()).reduce((function(t,n){return t+e(n)}),0)},DM={TreeCache:EM}.TreeCache,MM=Object.freeze({__proto__:null,TreeCache:DM}),RM=function(){function e(t){var n;(0,f.Z)(this,e),CC(this,"_maxSize",void 0),CC(this,"_size",void 0),CC(this,"_head",void 0),CC(this,"_tail",void 0),CC(this,"_map",void 0),CC(this,"_keyMapper",void 0),this._maxSize=t.maxSize,this._size=0,this._head=null,this._tail=null,this._map=new Map,this._keyMapper=null!==(n=t.mapKey)&&void 0!==n?n:function(e){return e}}return(0,d.Z)(e,[{key:"head",value:function(){return this._head}},{key:"tail",value:function(){return this._tail}},{key:"size",value:function(){return this._size}},{key:"maxSize",value:function(){return this._maxSize}},{key:"has",value:function(e){return this._map.has(this._keyMapper(e))}},{key:"get",value:function(e){var t=this._keyMapper(e),n=this._map.get(t);if(n)return this.set(e,n.value),n.value}},{key:"set",value:function(e,t){var n=this._keyMapper(e);this._map.get(n)&&this.delete(e);var r=this.head(),a={key:e,right:r,left:null,value:t};r?r.left=a:this._tail=a,this._map.set(n,a),this._head=a,this._size++,this._maybeDeleteLRU()}},{key:"_maybeDeleteLRU",value:function(){this.size()>this.maxSize()&&this.deleteLru()}},{key:"deleteLru",value:function(){var e=this.tail();e&&this.delete(e.key)}},{key:"delete",value:function(e){var t=this._keyMapper(e);if(this._size&&this._map.has(t)){var n=EC(this._map.get(t)),r=n.right,a=n.left;r&&(r.left=n.left),a&&(a.right=n.right),n===this.head()&&(this._head=r),n===this.tail()&&(this._tail=a),this._map.delete(t),this._size--}}},{key:"clear",value:function(){this._size=0,this._head=null,this._tail=null,this._map=new Map}}]),e}(),PM={LRUCache:RM}.LRUCache,jM=Object.freeze({__proto__:null,LRUCache:PM}),FM=jM.LRUCache,LM=MM.TreeCache;var BM=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(e){return e},n=new FM({maxSize:e}),r=new LM({mapNodeValue:t,onHit:function(e){n.set(e,!0)},onSet:function(t){var a=n.tail();n.set(t,!0),a&&r.size()>e&&r.delete(a.key)}});return r};function zM(e,t,n){if("string"===typeof e&&!e.includes('"')&&!e.includes("\\"))return'"'.concat(e,'"');switch(typeof e){case"undefined":return"";case"boolean":return e?"true":"false";case"number":case"symbol":return String(e);case"string":return JSON.stringify(e);case"function":if(!0!==(null===t||void 0===t?void 0:t.allowFunctions))throw _C("Attempt to serialize function in a Recoil cache key");return"__FUNCTION(".concat(e.name,")__")}if(null===e)return"null";var r;if("object"!==typeof e)return null!==(r=JSON.stringify(e))&&void 0!==r?r:"";if(NC(e))return"__PROMISE__";if(Array.isArray(e))return"[".concat(e.map((function(e,n){return zM(e,t,n.toString())})),"]");if("function"===typeof e.toJSON)return zM(e.toJSON(n),t,n);if(e instanceof Map){var o,i={},s=(0,Et.Z)(e);try{for(s.s();!(o=s.n()).done;){var u=(0,a.Z)(o.value,2),c=u[0],l=u[1];i["string"===typeof c?c:zM(c,t)]=l}}catch(f){s.e(f)}finally{s.f()}return zM(i,t,n)}return e instanceof Set?zM(Array.from(e).sort((function(e,n){return zM(e,t).localeCompare(zM(n,t))})),t,n):void 0!==Symbol&&null!=e[Symbol.iterator]&&"function"===typeof e[Symbol.iterator]?zM(Array.from(e),t,n):"{".concat(Object.keys(e).filter((function(t){return void 0!==e[t]})).sort().map((function(n){return"".concat(zM(n,t),":").concat(zM(e[n],t,n))})).join(","),"}")}var ZM=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{allowFunctions:!1};return zM(e,t)},VM=MM.TreeCache,UM={equality:"reference",eviction:"keep-all",maxSize:1/0};function qM(e){switch(e){case"reference":return function(e){return e};case"value":return function(e){return ZM(e)}}throw _C("Unrecognized equality policy ".concat(e))}function WM(e,t,n){switch(e){case"keep-all":return new VM({mapNodeValue:n});case"lru":return BM(EC(t),n);case"most-recent":return BM(1,n)}throw _C("Unrecognized eviction policy ".concat(e))}var HM=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:UM,t=e.equality,n=void 0===t?UM.equality:t,r=e.eviction,a=void 0===r?UM.eviction:r,o=e.maxSize,i=void 0===o?UM.maxSize:o,s=qM(n),u=WM(a,i,s);return u};var GM=function(e){return function(){return null}},KM=HC.loadableWithError,XM=HC.loadableWithPromise,YM=HC.loadableWithValue,$M=iI,JM=sI,QM=uI,eR=IT,tR=gT.DEFAULT_VALUE,nR=gT.RecoilValueNotReady,rR=gT.getConfigDeletionHandler,aR=gT.getNode,oR=gT.registerNode,iR=tT.isRecoilValue,sR=BI.markRecoilValueModified,uR=eO,cR=vM,lR=GM,fR=(0,d.Z)((function e(){(0,f.Z)(this,e)})),dR=new fR,pR=[],hR=new Map,mR=function(){var e=0;return function(){return e++}}();var vR=function(e){var t=null,n=e.key,r=e.get,o=e.cachePolicy_UNSTABLE,i=null!=e.set?e.set:void 0,s=new Set,u=HM(null!==o&&void 0!==o?o:{equality:"reference",eviction:"keep-all"}),c=uR(e.retainedBy_UNSTABLE),l=new Map,f=0;function d(){return!oT("recoil_memory_managament_2020")||f>0}function p(e){return e.getState().knownSelectors.add(n),f++,function(){f--}}function h(){return void 0!==rR(n)&&!d()}function m(e,t,n,r,a){O(t,r,a),x(e,t,new Set(a.keys()),n),v(e,n)}function v(e,n){I(e,n)&&T(e);var r=hR.get(n);if(void 0!==r){var a,o=(0,Et.Z)(r);try{for(o.s();!(a=o.n()).done;){var i=a.value;sR(i,EC(t))}}catch(s){o.e(s)}finally{o.f()}hR.delete(n)}}function g(e,t){var n=hR.get(t);null==n&&hR.set(t,n=new Set),n.add(e)}function y(e,t,n){var r=e.getState().knownSelectors.has(n);if(r&&t.atomValues.has(n))return EC(t.atomValues.get(n));var a=$M(e,t,n);return"loading"!==a.state&&r&&t.atomValues.set(n,a),a}function b(e,t,n,r,o,i){return t.then((function(r){if(!d())throw T(e),dR;null!=i.loadingDepKey&&i.loadingDepPromise===t?n.atomValues.set(i.loadingDepKey,YM(r)):e.getState().knownSelectors.forEach((function(e){n.atomValues.delete(e)}));var s=k(e,n);if(s&&"loading"!==s.state){if((I(e,o)||null==E(e))&&v(e,o),"hasValue"===s.state)return s.contents;throw s.contents}if(!I(e,o)){var u=_(n);if("loading"===(null===u||void 0===u?void 0:u.latestLoadable.state))return u.latestLoadable.contents}var c=w(e,n,o),l=(0,a.Z)(c,2),f=l[0],p=l[1];if(C(e,o,p),"loading"!==f.state&&m(e,n,o,f,p),"hasError"===f.state)throw f.contents;return f.contents})).catch((function(t){if(t instanceof fR)throw dR;if(!d())throw T(e),dR;var a=KM(t);throw m(e,n,o,a,r),t}))}function x(e,t,r,a){var o,i,u,c,l,f,d;(I(e,a)||t.version===(null===(o=e.getState())||void 0===o||null===(i=o.currentTree)||void 0===i?void 0:i.version)||t.version===(null===(u=e.getState())||void 0===u||null===(c=u.nextTree)||void 0===c?void 0:c.version))&&(eR(new Map([[n,r]]),e,null!==(l=null===(f=e.getState())||void 0===f||null===(d=f.nextTree)||void 0===d?void 0:d.version)&&void 0!==l?l:e.getState().currentTree.version),r.forEach((function(e){return s.add(e)})))}function w(e,a,o){var i,s=lR(n),u=!0,c=function(){s(),u=!1},l=!1,f={loadingDepKey:null,loadingDepPromise:null},p=new Map,h=new Set;function v(t){var n=t.key;!function(e,t,n,r,a){n.add(r),x(e,t,n,a)}(e,a,h,n,o);var r=y(e,a,n);switch(p.set(n,r),r.state){case"hasValue":return r.contents;case"hasError":throw r.contents;case"loading":throw f.loadingDepKey=n,f.loadingDepPromise=r.contents,r.contents}throw _C("Invalid Loadable state")}x(e,a,h,o);try{i=r({get:v,getCallback:function(n){return function(){if(u)throw _C("Callbacks from getCallback() should only be called asynchronously after the selector is evalutated.  It can be used for selectors to return objects with callbacks that can work with Recoil state without a subscription.");null==t&&rM(!1);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return cR(e,n,a,{node:t})}}}),i=iR(i)?v(i):i,NC(i)?i=function(e,t,n,r,a,o){return t.then((function(t){if(!d())throw T(e),dR;var o=YM(t);return m(e,n,a,o,r),t})).catch((function(t){if(!d())throw T(e),dR;if(C(e,a,r),NC(t))return b(e,t,n,r,a,o);var i=KM(t);throw m(e,n,a,i,r),t}))}(e,i,a,p,o,f).finally(c):c()}catch(g){NC(i=g)?i=b(e,i,a,p,o,f).finally(c):(l=!0,c())}return[l?KM(i):NC(i)?XM(i):YM(i),p]}function k(e,t){var r,a=new Set,o=E(e);try{r=u.get((function(n){return"string"!==typeof n&&rM(!1),y(e,t,n).contents}),{onNodeVisit:function(e){"branch"===e.type&&e.nodeKey!==n&&a.add(e.nodeKey)}})}catch(i){throw _C('Problem with cache lookup for selector "'.concat(n,'": ').concat(i.message))}return r&&x(e,t,a,null===o||void 0===o?void 0:o.latestExecutionId),r}function S(e,t){var n=mR(),r=w(e,t,n),o=(0,a.Z)(r,2),i=o[0],s=o[1];return"loading"===i.state?(!function(e,t,n,r,a){l.set(e,{depValuesDiscoveredSoFarDuringAsyncWork:r,latestExecutionId:t,latestLoadable:n,stateVersion:a.version})}(e,n,i,s,t),g(e,n)):(T(e),O(t,i,s)),i}function _(e){var t,n=null!==(t=Array.from(l.entries()).find((function(t){var n=(0,a.Z)(t,2),r=n[0],o=n[1];return null!=o.latestLoadable&&null!=o.latestExecutionId&&!function(e,t){var n,r,o=E(e),i=null!==(n=null===o||void 0===o?void 0:o.depValuesDiscoveredSoFarDuringAsyncWork)&&void 0!==n?n:new Map,s=Array((null!==(r=N.get(t.version))&&void 0!==r?r:new Map).entries()),u=N.has(t.version)&&s.length===i.size&&s.every((function(e){var t=(0,a.Z)(e,2),n=t[0],r=t[1];return i.get(n)===r}));if(null==i||t.version===(null===o||void 0===o?void 0:o.stateVersion)||u)return!1;return N.set(t.version,new Map(i)),Array.from(i).some((function(n){var r=(0,a.Z)(n,2),o=r[0],i=r[1];return y(e,t,o).contents!==i.contents}))}(r,e)})))&&void 0!==t?t:[];return(0,a.Z)(n,2)[1]}var N=new Map;function E(e){return l.get(e)}function C(e,t,n){if(I(e,t)){var r=E(e);null!=r&&(r.depValuesDiscoveredSoFarDuringAsyncWork=n)}}function T(e){l.delete(e)}function I(e,t){var n;return t===(null===(n=E(e))||void 0===n?void 0:n.latestExecutionId)}function O(e,t,r){e.atomValues.set(n,t);try{u.set(function(e){return Array.from(e.entries()).map((function(e){var t=(0,a.Z)(e,2);return[t[0],t[1].contents]}))}(r),t)}catch(o){throw _C('Problem with setting cache for selector "'.concat(n,'": ').concat(o.message))}}function A(e,t){return u.get((function(n){var r;return"string"!==typeof n&&rM(!1),null===(r=JM(e,t,n))||void 0===r?void 0:r.contents}))}function D(e,t){return function(e){if(pR.includes(n)){var t="Recoil selector has circular dependencies: ".concat(pR.slice(pR.indexOf(n)).join(" \u2192 "));return KM(_C(t))}pR.push(n);try{return e()}finally{pR.pop()}}((function(){return function(e,t){var n=k(e,t);if(null!=n)return T(e),n;var r,a=_(t);return null!=a?("loading"===(null===(r=a.latestLoadable)||void 0===r?void 0:r.state)&&g(e,EC(a.latestExecutionId)),EC(a.latestLoadable)):S(e,t)}(e,t)}))}function M(e){e.atomValues.delete(n)}function R(e,n){null==t&&rM(!1);var r,a=(0,Et.Z)(s);try{for(a.s();!(r=a.n()).done;){var o,i=r.value,c=aR(i);null===(o=c.clearCache)||void 0===o||o.call(c,e,n)}}catch(l){a.e(l)}finally{a.f()}s.clear(),M(n),u.clear(),sR(e,t)}if(null!=i){return t=oR({key:n,nodeType:"selector",peek:A,get:D,set:function(e,t,n){var r=!1,a=new Map;function o(n){var a=n.key;if(r)throw _C("Recoil: Async selector sets are not currently supported.");var o=y(e,t,a);if("hasValue"===o.state)return o.contents;throw"loading"===o.state?new nR(a):o.contents}function s(n,i){if(r)throw _C("Recoil: Async selector sets are not currently supported.");var s="function"===typeof i?i(o(n)):i;QM(e,t,n.key,s).forEach((function(e,t){return a.set(t,e)}))}var u=i({set:s,get:o,reset:function(e){s(e,tR)}},n);if(void 0!==u)throw NC(u)?_C("Recoil: Async selector sets are not currently supported."):_C("Recoil: selector set should be a void function.");return r=!0,a},init:p,invalidate:M,clearCache:R,shouldDeleteConfigOnRelease:h,dangerouslyAllowMutability:e.dangerouslyAllowMutability,shouldRestoreFromSnapshots:!1,retainedBy:c})}return t=oR({key:n,nodeType:"selector",peek:A,get:D,init:p,invalidate:M,clearCache:R,shouldDeleteConfigOnRelease:h,dangerouslyAllowMutability:e.dangerouslyAllowMutability,shouldRestoreFromSnapshots:!1,retainedBy:c})},gR=HC.loadableWithError,yR=HC.loadableWithPromise,bR=HC.loadableWithValue,xR=dI,wR=gT.DEFAULT_VALUE,kR=gT.DefaultValue,SR=gT.getConfigDeletionHandler,_R=gT.registerNode,NR=gT.setConfigDeletionHandler,ER=tT.isRecoilValue,CR=BI.getRecoilValueAsLoadable,TR=BI.markRecoilValueModified,IR=BI.setRecoilValue,OR=BI.setRecoilValueLoadable,AR=eO;function DR(e){var t=e.key,n=e.persistence_UNSTABLE,a=AR(e.retainedBy_UNSTABLE),o=0,i=NC(e.default)?yR(e.default.then((function(e){return i=bR(e),e})).catch((function(e){throw i=gR(e),e}))):bR(e.default);l(e.default);var s=void 0,c=new Map;function l(e){return e}function f(e,n){var r,a;return null!==(r=null!==(a=n.atomValues.get(t))&&void 0!==a?a:s)&&void 0!==r?r:i}var d=_R({key:t,nodeType:"atom",peek:f,get:function(e,r){if(r.atomValues.has(t))return EC(r.atomValues.get(t));if(r.nonvalidatedAtoms.has(t)){if(null!=s)return s;if(null==n)return nT("Tried to restore a persisted value for atom ".concat(t," but it has no persistence settings.")),i;var a=r.nonvalidatedAtoms.get(t),o=n.validator(a,wR),u=o instanceof kR?i:bR(o);return s=u}return i},set:function(e,n,r){if(n.atomValues.has(t)){var a=EC(n.atomValues.get(t));if("hasValue"===a.state&&r===a.contents)return new Map}else if(!n.nonvalidatedAtoms.has(t)&&r instanceof kR)return new Map;return s=void 0,(new Map).set(t,bR(r))},init:function(n,a,s){var l;if(o++,n.getState().knownAtoms.add(t),"loading"===i.state){i.contents.finally((function(){var e;(null!==(e=n.getState().nextTree)&&void 0!==e?e:n.getState().currentTree).atomValues.has(t)||TR(n,d)}))}var p=null!==(l=e.effects)&&void 0!==l?l:e.effects_UNSTABLE;if(null!=p){var h,m=function(e){if(y&&e.key===t){var r=b;return r instanceof kR?f(n,a):NC(r)?yR(r.then((function(e){return e instanceof kR?i.toPromise():e}))):bR(r)}return CR(n,e)},v=function(e){return m(e).toPromise()},g=function(e){var r,a=xR(n,null!==(r=n.getState().nextTree)&&void 0!==r?r:n.getState().currentTree,e.key);return!y||e.key!==t||b instanceof kR?a:u(u({},a),{},{isSet:!0,loadable:m(e)})},y=!0,b=wR,x=!1,w=null,k=function(e){return function(t){if(y){var r=m(d),a="hasValue"===r.state?r.contents:wR;b="function"===typeof t?t(a):t,NC(b)&&(b=b.then((function(t){return w={effect:e,value:t},t})))}else{if(NC(t))throw _C("Setting atoms to async values is not implemented.");"function"!==typeof t&&(w={effect:e,value:t}),IR(n,d,"function"===typeof t?function(n){var r=t(n);return w={effect:e,value:r},r}:t)}}},S=function(e){return function(){return k(e)(wR)}},_=function(e){return function(a){var o,s=n.subscribeToTransactions((function(n){var r,o=n.getState(),s=o.currentTree,u=o.previousTree;u||(uT("Transaction subscribers notified without a next tree being present -- this is a bug in Recoil"),u=s);var c=null!==(r=s.atomValues.get(t))&&void 0!==r?r:i;if("hasValue"===c.state){var l,f,d,p,h=c.contents,m=null!==(l=u.atomValues.get(t))&&void 0!==l?l:i,v="hasValue"===m.state?m.contents:wR;(null===(f=w)||void 0===f?void 0:f.effect)!==e||(null===(d=w)||void 0===d?void 0:d.value)!==h?a(h,v,!s.atomValues.has(t)):(null===(p=w)||void 0===p?void 0:p.effect)===e&&(w=null)}}),t).release;c.set(n,[].concat((0,r.Z)(null!==(o=c.get(n))&&void 0!==o?o:[]),[s]))}},N=(0,Et.Z)(p);try{for(N.s();!(h=N.n()).done;){var E=h.value;try{var C,T=E({node:d,storeID:n.storeID,trigger:s,setSelf:k(E),resetSelf:S(E),onSet:_(E),getPromise:v,getLoadable:m,getInfo_UNSTABLE:g});if(null!=T)c.set(n,[].concat((0,r.Z)(null!==(C=c.get(n))&&void 0!==C?C:[]),[T]))}catch(D){b=D,x=!0}}}catch(M){N.e(M)}finally{N.f()}if(y=!1,!(b instanceof kR)){var I,O=b,A=x?gR(b):NC(O)?yR(function(e,n){var r=n.then((function(n){var a,o;return(null===(o=(null!==(a=e.getState().nextTree)&&void 0!==a?a:e.getState().currentTree).atomValues.get(t))||void 0===o?void 0:o.contents)===r&&IR(e,d,n),n})).catch((function(n){var a,o;throw(null===(o=(null!==(a=e.getState().nextTree)&&void 0!==a?a:e.getState().currentTree).atomValues.get(t))||void 0===o?void 0:o.contents)===r&&OR(e,d,gR(n)),n}));return r}(n,O)):bR(O);a.atomValues.set(t,A),null===(I=n.getState().nextTree)||void 0===I||I.atomValues.set(t,A)}}return function(){var e;o--,null===(e=c.get(n))||void 0===e||e.forEach((function(e){return e()})),c.delete(n)}},invalidate:function(){s=void 0},shouldDeleteConfigOnRelease:function(){return void 0!==SR(t)&&o<=0},dangerouslyAllowMutability:e.dangerouslyAllowMutability,persistence_UNSTABLE:e.persistence_UNSTABLE?{type:e.persistence_UNSTABLE.type,backButton:e.persistence_UNSTABLE.backButton}:void 0,shouldRestoreFromSnapshots:!0,retainedBy:a});return d}function MR(e){var t=e.default,n=Lg(e,bC);return ER(t)?function(e){var t=MR(u(u({},e),{},{default:wR,persistence_UNSTABLE:void 0===e.persistence_UNSTABLE?void 0:u(u({},e.persistence_UNSTABLE),{},{validator:function(t){return t instanceof kR?t:EC(e.persistence_UNSTABLE).validator(t,wR)}}),effects:e.effects,effects_UNSTABLE:e.effects_UNSTABLE})),n=vR({key:"".concat(e.key,"__withFallback"),get:function(n){var r=(0,n.get)(t);return r instanceof kR?e.default:r},set:function(e,n){return(0,e.set)(t,n)},dangerouslyAllowMutability:e.dangerouslyAllowMutability});return NR(n.key,SR(e.key)),n}(u(u({},n),{},{default:t})):DR(u(u({},n),{},{default:t}))}var RR=MR,PR=function(){function e(t){var n;(0,f.Z)(this,e),CC(this,"_map",void 0),CC(this,"_keyMapper",void 0),this._map=new Map,this._keyMapper=null!==(n=null===t||void 0===t?void 0:t.mapKey)&&void 0!==n?n:function(e){return e}}return(0,d.Z)(e,[{key:"size",value:function(){return this._map.size}},{key:"has",value:function(e){return this._map.has(this._keyMapper(e))}},{key:"get",value:function(e){return this._map.get(this._keyMapper(e))}},{key:"set",value:function(e,t){this._map.set(this._keyMapper(e),t)}},{key:"delete",value:function(e){this._map.delete(this._keyMapper(e))}},{key:"clear",value:function(){this._map.clear()}}]),e}(),jR={MapCache:PR}.MapCache,FR=Object.freeze({__proto__:null,MapCache:jR}),LR=jM.LRUCache,BR=FR.MapCache,zR={equality:"reference",eviction:"none",maxSize:1/0};function ZR(e){switch(e){case"reference":return function(e){return e};case"value":return function(e){return ZM(e)}}throw _C("Unrecognized equality policy ".concat(e))}function VR(e,t,n){switch(e){case"keep-all":return new BR({mapKey:n});case"lru":return new LR({mapKey:n,maxSize:EC(t)});case"most-recent":return new LR({mapKey:n,maxSize:1})}throw _C("Unrecognized eviction policy ".concat(e))}var UR=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:zR,t=e.equality,n=void 0===t?zR.equality:t,r=e.eviction,a=void 0===r?zR.eviction:r,o=e.maxSize,i=void 0===o?zR.maxSize:o,s=ZR(n),u=VR(a,i,s);return u},qR=gT.setConfigDeletionHandler;var WR=function(e){var t,n,r=UR({equality:null!==(t=null===(n=e.cachePolicyForParams_UNSTABLE)||void 0===n?void 0:n.equality)&&void 0!==t?t:"value",eviction:"keep-all"});return function(t){var n,a,o=r.get(t);if(null!=o)return o;e.cachePolicyForParams_UNSTABLE;var i=Lg(e,xC),s=RR(u(u({},i),{},{key:"".concat(e.key,"__").concat(null!==(n=ZM(t))&&void 0!==n?n:"void"),default:"function"===typeof e.default?e.default(t):e.default,retainedBy_UNSTABLE:"function"===typeof e.retainedBy_UNSTABLE?e.retainedBy_UNSTABLE(t):e.retainedBy_UNSTABLE,effects:"function"===typeof e.effects?e.effects(t):"function"===typeof e.effects_UNSTABLE?e.effects_UNSTABLE(t):null!==(a=e.effects)&&void 0!==a?a:e.effects_UNSTABLE}));return r.set(t,s),qR(s.key,(function(){r.delete(t)})),s}},HR=gT.setConfigDeletionHandler,GR=0;var KR=function(e){var t,n,r=UR({equality:null!==(t=null===(n=e.cachePolicyForParams_UNSTABLE)||void 0===n?void 0:n.equality)&&void 0!==t?t:"value",eviction:"keep-all"});return function(t){var n,a=r.get(t);if(null!=a)return a;var o,i="".concat(e.key,"__selectorFamily/").concat(null!==(n=ZM(t,{allowFunctions:!0}))&&void 0!==n?n:"void","/").concat(GR++),s=function(n){return e.get(t)(n)},u=e.cachePolicy_UNSTABLE,c="function"===typeof e.retainedBy_UNSTABLE?e.retainedBy_UNSTABLE(t):e.retainedBy_UNSTABLE;if(null!=e.set){var l=e.set;o=vR({key:i,get:s,set:function(e,n){return l(t)(e,n)},cachePolicy_UNSTABLE:u,dangerouslyAllowMutability:e.dangerouslyAllowMutability,retainedBy_UNSTABLE:c})}else o=vR({key:i,get:s,cachePolicy_UNSTABLE:u,dangerouslyAllowMutability:e.dangerouslyAllowMutability,retainedBy_UNSTABLE:c});return r.set(t,o),HR(o.key,(function(){r.delete(t)})),o}},XR=KR({key:"__constant",get:function(e){return function(){return e}},cachePolicyForParams_UNSTABLE:{equality:"reference"}});var YR=function(e){return XR(e)},$R=KR({key:"__error",get:function(e){return function(){throw _C(e)}},cachePolicyForParams_UNSTABLE:{equality:"reference"}});var JR=function(e){return $R(e)};var QR=function(e){return e},eP=HC.loadableWithError,tP=HC.loadableWithPromise,nP=HC.loadableWithValue;function rP(e,t){var n,r=Array(t.length).fill(void 0),o=Array(t.length).fill(void 0),i=(0,Et.Z)(t.entries());try{for(i.s();!(n=i.n()).done;){var s=(0,a.Z)(n.value,2),u=s[0],c=s[1];try{r[u]=e(c)}catch(l){o[u]=l}}}catch(f){i.e(f)}finally{i.f()}return[r,o]}function aP(e){return null!=e&&!NC(e)}function oP(e){return Array.isArray(e)?e:Object.getOwnPropertyNames(e).map((function(t){return e[t]}))}function iP(e,t){return Array.isArray(e)?t:Object.getOwnPropertyNames(e).reduce((function(e,n,r){return u(u({},e),{},i({},n,t[r]))}),{})}function sP(e,t,n){return iP(e,n.map((function(e,n){return null==e?nP(t[n]):NC(e)?tP(e):eP(e)})))}var uP=KR({key:"__waitForNone",get:function(e){return function(t){var n=rP(t.get,oP(e)),r=(0,a.Z)(n,2),o=r[0],i=r[1];return sP(e,o,i)}},dangerouslyAllowMutability:!0}),cP=KR({key:"__waitForAny",get:function(e){return function(t){var n=rP(t.get,oP(e)),r=(0,a.Z)(n,2),o=r[0],i=r[1];return i.some((function(e){return!NC(e)}))?sP(e,o,i):new Promise((function(t){var n,r=(0,Et.Z)(i.entries());try{var s=function(){var r=(0,a.Z)(n.value,2),s=r[0],u=r[1];NC(u)&&u.then((function(n){o[s]=n,i[s]=void 0,t(sP(e,o,i))})).catch((function(n){i[s]=n,t(sP(e,o,i))}))};for(r.s();!(n=r.n()).done;)s()}catch(u){r.e(u)}finally{r.f()}}))}},dangerouslyAllowMutability:!0}),lP=KR({key:"__waitForAll",get:function(e){return function(t){var n=rP(t.get,oP(e)),r=(0,a.Z)(n,2),o=r[0],i=r[1];if(i.every((function(e){return null==e})))return iP(e,o);var s=i.find(aP);if(null!=s)throw s;return Promise.all(i).then((function(t){return iP(e,(n=o,t.map((function(e,t){return void 0===e?n[t]:e}))));var n}))}},dangerouslyAllowMutability:!0}),fP=KR({key:"__waitForAllSettled",get:function(e){return function(t){var n=rP(t.get,oP(e)),r=(0,a.Z)(n,2),o=r[0],i=r[1];return i.every((function(e){return!NC(e)}))?sP(e,o,i):Promise.all(i.map((function(e,t){return NC(e)?e.then((function(e){o[t]=e,i[t]=void 0})).catch((function(e){o[t]=void 0,i[t]=e})):null}))).then((function(){return sP(e,o,i)}))}},dangerouslyAllowMutability:!0}),dP=KR({key:"__noWait",get:function(e){return function(t){var n=t.get;try{return nP(n(e))}catch(r){return NC(r)?tP(r):eP(r)}}},dangerouslyAllowMutability:!0}),pP={waitForNone:uP,waitForAny:cP,waitForAll:lP,waitForAllSettled:fP,noWait:dP},hP=HC.RecoilLoadable,mP=gT.DefaultValue,vP=wA,gP=_A,yP=tT.isRecoilValue,bP=VT.retentionZone,xP=LO.freshSnapshot,wP={DefaultValue:mP,isRecoilValue:yP,RecoilLoadable:hP,RecoilRoot:vP,useRecoilStoreID:gP,useRecoilBridgeAcrossReactRoots_UNSTABLE:qD,atom:RR,selector:vR,atomFamily:WR,selectorFamily:KR,constSelector:YR,errorSelector:JR,readOnlySelector:QR,noWait:pP.noWait,waitForNone:pP.waitForNone,waitForAny:pP.waitForAny,waitForAll:pP.waitForAll,waitForAllSettled:pP.waitForAllSettled,useRecoilValue:fD,useRecoilValueLoadable:dD,useRecoilState:cD,useRecoilStateLoadable:lD,useSetRecoilState:hD,useResetRecoilState:pD,useGetRecoilValueInfo_UNSTABLE:BD,useRecoilRefresher_UNSTABLE:wM,useRecoilValueLoadable_TRANSITION_SUPPORT_UNSTABLE:mD,useRecoilValue_TRANSITION_SUPPORT_UNSTABLE:vD,useRecoilState_TRANSITION_SUPPORT_UNSTABLE:gD,useRecoilCallback:gM,useRecoilTransaction_UNSTABLE:NM,useGotoRecoilSnapshot:PD,useRecoilSnapshot:MD,useRecoilTransactionObserver_UNSTABLE:jD,snapshot_UNSTABLE:xP,useRetain:jA,retentionZone:bP},kP=wP.RecoilRoot,SP=wP.atom,_P=wP.useRecoilState,NP=SP({key:"slidesState",default:[]}),EP=SP({key:"currentSlideState",default:{}}),CP=SP({key:"selectedZoneIdState",default:null}),TP=(SP({key:"hoveredZoneIdState",default:null}),SP({key:"thumbPreviewMouseState",default:{}}),SP({key:"thumbPreviewWidthState",default:0}));Gp.prototype.updateState=function(e){this.docView&&this.updateStateInner(e,this.state.plugins!==e.plugins)};var IP=1,OP=3,AP=[{type:4,icon:_,oppositeType:1},{type:2,icon:N,oppositeType:3},{type:3,icon:k,oppositeType:2},{type:1,icon:S,oppositeType:4}],DP={tl:"cursor-nwse-resize",tr:"cursor-nesw-resize",bl:"cursor-nesw-resize",br:"cursor-nwse-resize",t:"cursor-ns-resize",b:"cursor-ns-resize",l:"cursor-ew-resize",r:"cursor-ew-resize",m:"cursor-move"},MP=function(e){var t=e.value,n=e.min,r=void 0===n?3:n,a=e.max,o=e.onChange,i=e.isDisabled,s=void 0!==i&&i;return(0,re.jsxs)(re.Fragment,{children:[(0,re.jsx)("div",{className:"select-none text-gray-600 bg-gray-300 h-5 w-5 flex rounded items-center text-xs justify-center leading-none",children:t}),(0,re.jsxs)("div",{className:"flex flex-col justify-center h-5 w-5",children:[(0,re.jsx)(RP,{isDisabled:s||t===a,className:"w-3",background:!1,onClick:function(e){e.stopPropagation(),o(t+1)},children:(0,re.jsx)(A,{className:"h-3"})}),(0,re.jsx)(RP,{isDisabled:s||t===r,className:"w-3",background:!1,onClick:function(e){e.stopPropagation(),o(t-1)},children:(0,re.jsx)(O,{className:"h-3"})})]})]})},RP=function(e){var t=e.onClick,n=e.isActive,r=void 0!==n&&n,a=e.isDisabled,o=void 0!==a&&a,i=e.theme,s=void 0===i?"blue":i,u=e.children,c=e.className,l=void 0===c?"":c,f=e.background,d=void 0===f||f,p={blue:{hoverBg:"hover:bg-blue-100",hoverText:"hover:text-blue-400",bg:"bg-white",text:"text-gray-500",disabledBg:"bg-gray-100",disabledText:"text-gray-400",activeBg:"bg-blue-200",activeText:"text-blue-600"},green:{hoverBg:"hover:bg-green-100",hoverText:"hover:text-green-600",bg:"bg-white",text:"text-green-500",disabledBg:"bg-gray-100",disabledText:"text-gray-400",activeBg:"bg-green-200",activeText:"text-green-600"},red:{hoverBg:"hover:bg-red-100",hoverText:"hover:text-red-600",bg:"bg-white",text:"text-gray-500",disabledBg:"bg-gray-100",disabledText:"text-gray-400",activeBg:"bg-red-200",activeText:"text-red-600"}};return(0,re.jsx)("button",{disabled:o,onClick:function(e){t(e)},className:"".concat(l," ").concat(r?"".concat(p[s].activeText," ").concat(d?p[s].activeBg:""):o?"".concat(p[s].disabledText," ").concat(d?p[s].disabledBg:""):"".concat(p[s].text," ").concat(d?p[s].bg:""," ").concat(p[s].hoverText," ").concat(d?p[s].hoverBg:"")," select-none shrink-0 flex rounded items-center text-sm justify-center cursor-pointer leading-none ").concat(o?"pointer-events-none":"pointer-events-auto"),children:u})},PP=function(t){var n=t.top,r=t.left,a=t.width,o=t.isHidden,i=t.children,s=(0,e.useRef)();return(0,e.useEffect)((function(){var e=s.current;if(e){e.style.opacity=o?.25:1;var t=document.getElementById("thumbPreviewContainer").getBoundingClientRect(),i=r+window.pageXOffset-e.offsetWidth/2+a/2,u=n+window.pageYOffset-e.offsetHeight;e.style.top="".concat(u<t.top?t.top:u+e.offsetHeight>t.top+t.height?t.top+t.height-e.offsetHeight:u,"px"),e.style.left="".concat(i<t.left?t.left:i+e.offsetWidth>t.left+t.width?t.left+t.width-e.offsetWidth:i,"px")}})),(0,re.jsx)("div",{ref:s,style:{position:"fixed",zIndex:500,opacity:0},className:"p-2 flex flex-row items-center justify-center pointer-events-auto",onClick:function(e){return e.preventDefault()},children:(0,re.jsx)("div",{id:"propertyBubble",className:"bg-gray-100 pointer-events-none flex flex-row items-center justify-center rounded-lg space-x-1 p-1.5 shadow-lg border border-gray-300",children:i})})},jP=function(t){var n=t.zone,o=t.index,i=t.onClick,s=(t.onMouseEnter,t.onMouseLeave,t.isDisabled),c=t.isSelected,l=(t.isHovered,t.isPlaying),f=t.onChange,d=t.adjusmentWidth,p=void 0===d?0:d,h=(t.mouseX,t.mouseY,t.mouseDown,t.mouseHover,t.mouseRef),m=void 0===h?null:h,v=t.gridSize,g=(0,e.useState)({}),y=(0,a.Z)(g,2),b=y[0],x=y[1],w=(0,e.useState)(null),k=(0,a.Z)(w,2),S=k[0],_=k[1],N=(0,e.useState)(null),E=(0,a.Z)(N,2),C=E[0],T=E[1],O=(0,e.useState)(null),A=(0,a.Z)(O,2),D=A[0],M=A[1],R=(0,e.useState)(0),P=(0,a.Z)(R,2),j=(P[0],P[1]),F=(0,e.useState)(!1),L=(0,a.Z)(F,2),B=L[0],z=L[1],V=(0,e.useState)(null),U=(0,a.Z)(V,2),q=U[0],W=U[1],H=(0,e.useState)(!1),G=(0,a.Z)(H,2),K=G[0],X=G[1],Y=(0,e.useState)([]),$=(0,a.Z)(Y,2),Q=$[0],ee=($[1],(0,e.useState)([])),te=(0,a.Z)(ee,2),ne=te[0],ae=(te[1],(0,e.useState)(!1)),oe=(0,a.Z)(ae,2),ie=oe[0],se=oe[1],ue=((0,e.useRef)(null),eu(m,{fps:120})),ce=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=(0,e.useState)(null),o=(0,a.Z)(r,2),i=o[0],s=o[1],u=mx();return(0,e.useEffect)((function(){var e=new hx(t);return s(e),e.on("transaction",(function(){requestAnimationFrame((function(){requestAnimationFrame((function(){u()}))}))})),function(){e.destroy()}}),n),i}({extensions:[Gg.configure({Blockquote:!1,BulletList:!1,CodeBlock:!1,HardBreak:!1,Heading:!1,HorizontalRule:!1,ListItem:!1,OrderedList:!1,Paragraph:!1,Text:!1}),Rv,Av,Dv],editorProps:{attributes:{class:"absolute w-full mx-auto focus:outline-none"}},injectCSS:!1,editable:!1}),le=function(e){return p/1920*e},fe=function(e){return 1920/p*e},de=function(e,t,a,o){var i={},s=[(0,r.Z)(n.position[0]),(0,r.Z)(n.position[1])],c=0,l=0;switch(q){case"tl":s[0]=[e,t,e+v,t+v];break;case"tr":s[0][1]=t,s[0][3]=t+v,s[1][0]=e,s[1][2]=e+v;break;case"bl":s[1][1]=t,s[1][3]=t+v,s[0][0]=e,s[0][2]=e+v;break;case"br":s[1]=[e,t,e+v,t+v];break;case"t":s[0][1]=t,s[0][3]=t+v;break;case"b":s[1][1]=t,s[1][3]=t+v;break;case"l":s[0][0]=e,s[0][2]=e+v;break;case"r":s[1][0]=e,s[1][2]=e+v;break;case"m":null!==a&&(c=a.x-e,l=a.y-t,s[0]=[s[0][0]-c,s[0][1]-l,s[0][2]-c,s[0][3]-l],s[1]=[s[1][0]-c,s[1][1]-l,s[1][2]-c,s[1][3]-l])}var f=(i={left:s[0][0]<s[1][0]?s[0][0]:s[1][0],top:s[0][1]<s[1][1]?s[0][1]:s[1][1],width:s[1][2]>s[0][0]?s[1][2]-s[0][0]:s[0][2]-s[1][0],height:s[1][3]>s[0][1]?s[1][3]-s[0][1]:s[0][3]-s[1][1]}).width/2+i.left,d=i.height/2+i.top,p=b.width/2+b.left,h=b.height/2+b.top;"m"===q&&(f<960&&(960===p&&f+2*v===960||960!==p&&f+v===960)?i.left+=v:f>960&&(960===p&&f-2*v===960||960!==p&&f-v===960)?i.left-=v:960!==p||f>=960+2*v||f<=960-2*v||(i.left=b.left),d<540&&(540===h&&d+2*v===540||540!==h&&d+v===540)?i.top+=v:d>540&&(540===h&&d-2*v===540||540!==h&&d-v===540)?i.top-=v:540!==h||d>=540+2*v||d<=540-2*v||(i.top=b.top)),i.position=[[i.left,i.top,i.left+v,i.top+v],[i.left+i.width-v,i.top+i.height-v,i.left+i.width,i.top+i.height]],x(u({},i))};(0,e.useEffect)((function(){if(null!==n&&"e"!==q&&!ie)if(null!==q)if(ue.isDown){z(!0),console.log("mouse down and moving");var e=fe(ue.x),t=fe(ue.y),r=e%v,a=t%v,o=e-r,s=t-a;B?de(o,s,C):(T({x:o,y:s}),de(o,s,{x:o,y:s}))}else B&&!ue.isDown&&ue.isOver?(z(!1),X(!1),M(n.id),W(null),T(null),void 0!==b.left&&f(n,"finalPosition",u({},b)),x({})):ue.isDown||B||void 0===b.left||(W(null),i(n));else if(B||K)z(!1),X(!1),M(n.id);else if(B||K||!ue.isDown||n.id===D)ue.isDown||n.id===D||(z(!1),X(!1),M(n.id),x({}),W(null),T(null));else{M(n.id),x({}),W("m"),z(!0);var c=fe(ue.x),l=fe(ue.y),d=c%v,p=l%v,h=c-d,m=l-p;B?de(h,m,C):(T({x:h,y:m}),de(h,m,{x:h,y:m}))}}),[ue.isDown,ue.x,ue.y]),(0,e.useEffect)((function(){x({}),z(!1),null===n?(M(null),se(!1),W(null)):n.id!==D&&(se(!1),W(null)),ce&&null!==n&&(n.type===IP?ce.commands.setContent(n.content.content?n.content:""):ce.isEmpty||ce.commands.clearContent()),T(null)}),[n]),(0,e.useEffect)((function(){j(p),ce&&ce.isEmpty}),[p]);var pe=function(e){if(null!==n&&n.type===IP){if(e.stopPropagation(),"e"===q){W(null),se(!1);var t=ce.getJSON();f(n,"content",t),ce.commands.blur(),ce.setEditable(!1)}else W("e"),ce.setEditable(!0),""===ce.getText()&&ce.chain().focus().setFontSize(28).run(),ce.commands.focus("end");z(!1),X(!1),x({}),T(null)}},he=function(e){e.stopPropagation(),n.type===IP?se(!ie):n.type===OP&&(ie?(se(!1),null!==S&&(f(n,"content",{color:S}),_(null))):se(!0))};return(0,re.jsxs)(re.Fragment,{children:[null!==n&&!l&&n.type!==IP&&(0,re.jsx)(ey,{index:o,containerId:"thumbPreview",zone:null!==S&&ie&&n.type===OP?u(u({},n),{},{content:{color:S}}):void 0!==b.left&&B?u(u({},n),{},{finalPosition:b}):n,isSelected:c,isDisabled:s,onClick:function(e){null===q&&i(e)},onChange:f,isPlaying:l,adjusmentWidth:p}),null!==n&&c&&!l&&(0,re.jsxs)(re.Fragment,{children:[B&&(0,re.jsx)("div",{className:"absolute w-full h-full pointer-events-none",style:{zIndex:1200},children:void 0!==b.width&&"m"===q&&(0,re.jsxs)("svg",{width:"100%",height:"100%",viewBox:"0 0 100 100",preserveAspectRatio:"none",children:[p/2===le(b.width/2+b.left)&&(0,re.jsx)("line",{x1:"50",y1:"0",x2:"50",y2:"100",vectorEffect:"non-scaling-stroke",stroke:"#3b82f6",strokeWidth:"1px",strokeOpacity:75}),p/16*9/2===le(b.height/2+b.top)&&(0,re.jsx)("line",{x1:"0",y1:"50",x2:"100",y2:"50",vectorEffect:"non-scaling-stroke",stroke:"#3b82f6",strokeWidth:"1px",strokeOpacity:75})]})}),B&&(0,re.jsxs)(re.Fragment,{children:[ne.map((function(e){return(0,re.jsx)("span",{className:"fixed pointer-events-none h-1",style:{zIndex:1200,top:m.current.getBoundingClientRect().top+le(e.top),left:(e.full?0:m.current.getBoundingClientRect().left)+le(e.left),width:le(e.width)}})})),Q.map((function(e){return(0,re.jsx)("span",{className:"fixed pointer-events-none w-1",style:{zIndex:1200,top:(e.full?0:m.current.getBoundingClientRect().top)+le(e.top),left:m.current.getBoundingClientRect().top+le(e.left),height:le(e.height)}})}))]}),B&&n.type!==IP&&"e"!==q&&(0,re.jsx)("div",{className:"fixed top-0 left-0 h-full w-full pointer-events-auto ".concat(DP[q]),style:{zIndex:400}}),n.type===IP&&"e"===q&&(0,re.jsx)("div",{onClick:pe,className:"fixed top-0 left-0 h-full w-full pointer-events-auto",style:{zIndex:400}}),ie&&(0,re.jsx)("div",{onClick:he,className:"fixed top-0 left-0 h-full w-full pointer-events-auto",style:{zIndex:410}}),(0,re.jsxs)("div",{style:{position:"fixed",left:le(void 0!==b.left?b.left:n.finalPosition.left)+m.current.getBoundingClientRect().left,top:le(void 0!==b.top?b.top:n.finalPosition.top)+m.current.getBoundingClientRect().top,width:le(void 0!==b.width?b.width:n.finalPosition.width),height:le(void 0!==b.height?b.height:n.finalPosition.height),zIndex:600},className:"pointer-events-auto border rounded-sm border-blue-500 ".concat(DP[q]),children:[n.type===IP&&(0,re.jsxs)(re.Fragment,{children:[(0,re.jsx)("div",{onClick:function(e){e.stopPropagation(),ce.commands.focus("end")},className:"absolute top-0 left-0 h-full w-full flex flex-row items-center justify-center cursor-text ".concat("e"!==q?"pointer-events-none":"")}),(0,re.jsx)(xx,{editor:ce})]}),ie&&(0,re.jsx)("div",{onClick:he,className:"absolute top-0 left-0 h-full w-full pointer-events-auto"}),(0,re.jsx)("div",{className:"absolute top-0 left-0 h-full w-full flex flex-row items-center justify-center pointer-events-none",children:(0,re.jsx)("button",{id:"m",onMouseDown:function(e){0===e.button&&e.stopPropagation(),W("m")},onDoubleClick:pe,className:"w-full h-full focus:outline-none cursor-move ".concat("m"===q||null===q&&!ie?"pointer-events-auto":"pointer-events-none")})}),m.current&&(0,re.jsxs)(PP,{isHidden:B&&!ie,left:le(void 0!==b.left?b.left:n.finalPosition.left)+m.current.getBoundingClientRect().left,top:le(void 0!==b.top?b.top:n.finalPosition.top)+m.current.getBoundingClientRect().top,width:le(void 0!==b.width?b.width:n.finalPosition.width),children:["e"!==q&&(0,re.jsxs)(re.Fragment,{children:[n.type===IP&&(0,re.jsx)(RP,{isDisabled:B,className:"h-5 w-5",onClick:function(e){e.stopPropagation(),pe(e)},children:(0,re.jsx)(Z,{className:"h-4 w-4"})}),(0,re.jsx)(RP,{isDisabled:B,className:"h-5 w-5",onClick:function(e){e.stopPropagation(),f(n,"sequence")},children:n.sequence}),AP.map((function(e,t){return(0,re.jsx)(RP,{isDisabled:B,onClick:function(t){t.stopPropagation(),f(n,"animations",e.type)},isActive:n.animations.includes(e.type),children:(0,re.jsx)(e.icon,{className:"h-5 w-5"})},"animationSamll-".concat(n.id,"-").concat(t))}))]}),n.type===IP&&"e"===q&&(0,re.jsxs)(re.Fragment,{children:[(0,re.jsx)(RP,{isDisabled:B,className:"h-5 w-5 font-bold",background:!1,isActive:ce.isActive("bold"),onClick:function(e){e.stopPropagation(),ce.chain().focus().toggleBold().run()},children:"B"}),(0,re.jsx)(RP,{isDisabled:B,className:"h-5 w-5 font-bold",background:!1,isActive:ce.isActive("italic"),onClick:function(e){e.stopPropagation(),ce.chain().focus().toggleItalic().run()},children:(0,re.jsx)("em",{children:"I"})}),(0,re.jsx)(RP,{isDisabled:B,className:"h-5 w-5 font-bold",background:!1,isActive:ce.isActive("strike"),onClick:function(e){e.stopPropagation(),ce.chain().focus().toggleStrike().run()},children:(0,re.jsx)("s",{children:"S"})}),(0,re.jsx)(MP,{value:function(){var e=ce.getAttributes("textStyle").fontSize;return e||28}(),onChange:function(e){return ce.chain().focus().setFontSize(e).run()}}),(0,re.jsx)("div",{onClick:he,className:"border border-gray-200 text-gray-600 h-5 w-5 flex rounded items-center text-xs justify-center pointer-events-auto  cursor-pointer leading-none relative",style:{backgroundColor:null!==ce.getAttributes("textStyle").color?ce.getAttributes("textStyle").color:"#000"}}),ie&&(0,re.jsx)("div",{style:{position:"absolute",top:"65%",marginTop:15},children:(0,re.jsx)(YE,{className:"pointer-events-auto",color:null!==ce.getAttributes("textStyle").color?ce.getAttributes("textStyle").color:"#000",onChangeComplete:function(e){var t=e.hex;return ce.chain().focus().setColor(t).run()}})}),(0,re.jsx)(RP,{isDisabled:B,className:"h-5 w-5",theme:"green",background:!1,onClick:pe,children:(0,re.jsx)(I,{className:"h-5 w-5"})})]}),n.type===OP&&(0,re.jsxs)(re.Fragment,{children:[(0,re.jsx)("div",{onClick:he,className:"border border-gray-200 text-gray-600 h-5 w-5 flex rounded items-center text-xs justify-center pointer-events-auto  cursor-pointer leading-none relative",style:{backgroundColor:null!==S?S:n.content.color}}),ie&&(0,re.jsx)("div",{style:{position:"absolute",top:"65%",marginTop:15},children:(0,re.jsx)(YE,{className:"pointer-events-auto",color:null!==S?S:n.content.color,onChangeComplete:function(e){var t=e.hex;return _(t)}})})]}),"e"!==q&&(0,re.jsx)(re.Fragment,{children:(0,re.jsx)(RP,{isDisabled:B,className:"h-5 w-5",theme:"red",onClick:function(e){e.stopPropagation(),f(n,"delete")},children:(0,re.jsx)(J,{className:"h-4 w-4"})})})]}),(0,re.jsx)("button",{id:"t",onMouseDown:function(e){e.stopPropagation(),0===e.button&&W("t")},className:"absolute focus:outline-none -top-1 left-0 w-full h-2 cursor-ns-resize ".concat("t"===q||null===q&&!ie?"pointer-events-auto":"pointer-events-none")}),(0,re.jsx)("button",{id:"b",onMouseDown:function(e){e.stopPropagation(),0===e.button&&W("b")},className:"absolute focus:outline-none -bottom-1 left-0 w-full h-2 cursor-ns-resize ".concat("b"===q||null===q&&!ie?"pointer-events-auto":"pointer-events-none")}),(0,re.jsx)("button",{id:"l",onMouseDown:function(e){e.stopPropagation(),0===e.button&&W("l")},className:"absolute focus:outline-none top-0 -left-1 h-full w-2 cursor-ew-resize ".concat("l"===q||null===q&&!ie?"pointer-events-auto":"pointer-events-none")}),(0,re.jsx)("button",{id:"r",onMouseDown:function(e){e.stopPropagation(),0===e.button&&W("r")},className:"absolute focus:outline-none top-0 -right-1 h-full w-2 cursor-ew-resize ".concat("r"===q||null===q&&!ie?"pointer-events-auto":"pointer-events-none")}),(0,re.jsx)("button",{id:"tl",onMouseDown:function(e){e.stopPropagation(),0===e.button&&W("tl")},className:"absolute focus:outline-none cursor-nwse-resize -top-1 -left-1 w-4 h-4 border-t-2 border-l-2 rounded-tl border-blue-500 ".concat("tl"===q||null===q&&!ie?"pointer-events-auto":"pointer-events-none")}),(0,re.jsx)("button",{id:"tr",onMouseDown:function(e){e.stopPropagation(),0===e.button&&W("tr")},className:"absolute focus:outline-none cursor-nesw-resize -top-1 -right-1 w-4 h-4 border-t-2 border-r-2 rounded-tr border-blue-500 ".concat("tr"===q||null===q&&!ie?"pointer-events-auto":"pointer-events-none")}),(0,re.jsx)("button",{id:"bl",onMouseDown:function(e){e.stopPropagation(),0===e.button&&W("bl")},className:"absolute focus:outline-none cursor-nesw-resize -bottom-1 -left-1 w-4 h-4 border-b-2 border-l-2 rounded-bl border-blue-500 ".concat("bl"===q||null===q&&!ie?"pointer-events-auto":"pointer-events-none")}),(0,re.jsx)("button",{id:"br",onMouseDown:function(e){e.stopPropagation(),0===e.button&&W("br")},className:"absolute focus:outline-none cursor-nwse-resize -bottom-1 -right-1 w-4 h-4 border-b-2 border-r-2 rounded-br border-blue-500 ".concat("br"===q||null===q&&!ie?"pointer-events-auto":"pointer-events-none")}),void 0!==b.width&&b.width===b.height&&"m"!==q&&(0,re.jsx)("svg",{width:"100%",height:"100%",viewBox:"0 0 100 100",preserveAspectRatio:"none",children:["bl","tr"].includes(q)?(0,re.jsx)("line",{x1:"100",y1:"0",x2:"0",y2:"100",vectorEffect:"non-scaling-stroke",stroke:"#3b82f6",strokeWidth:1.5,strokeOpacity:75}):["br","tl"].includes(q)?(0,re.jsx)("line",{x1:"0",y1:"0",x2:"100",y2:"100",vectorEffect:"non-scaling-stroke",stroke:"#3b82f6",strokeWidth:1.5,strokeOpacity:75}):(0,re.jsxs)(re.Fragment,{children:[(0,re.jsx)("line",{x1:"0",y1:"0",x2:"100",y2:"100",vectorEffect:"non-scaling-stroke",stroke:"#3b82f6",strokeWidth:1.5,strokeOpacity:75}),(0,re.jsx)("line",{x1:"100",y1:"0",x2:"0",y2:"100",vectorEffect:"non-scaling-stroke",stroke:"#3b82f6",strokeWidth:1.5,strokeOpacity:75})]})})]})]})]})},FP=(n(3517),["https://images.unsplash.com/photo-1598635416326-ff055cbb02cb?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1935&q=80","https://images.unsplash.com/photo-1644780295337-452d26bc1f89?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=2071&q=80","https://images.unsplash.com/photo-1644678961183-b57d0b9423d6?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1974&q=80","https://images.unsplash.com/photo-1644869432047-fa8bdbe849cd?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1935&q=80","https://images.unsplash.com/photo-1567637903900-7a2f05e37e1a?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1974&q=80","https://images.unsplash.com/photo-1644574739831-d19ded59cae8?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1974&q=80","https://images.unsplash.com/photo-1644748865694-2db1be00e13a?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1935&q=80","https://images.unsplash.com/photo-1637336659506-93ee3acccd85?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1974&q=80","https://images.unsplash.com/photo-1644840379571-2a973eee0726?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=2070&q=80","https://images.unsplash.com/photo-1644805424176-e426671f33ec?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1935&q=80","https://images.unsplash.com/photo-1644773741827-d635af7357b4?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1935&q=80","https://images.unsplash.com/photo-1644707386365-117da5d3fdc4?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1932&q=80","https://images.unsplash.com/photo-1644667621462-4938986c3a41?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=2077&q=80","https://images.unsplash.com/photo-1644604992281-5c07ca56fa5b?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1932&q=80","https://images.unsplash.com/photo-1644657167747-49910669ac24?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1974&q=80","https://images.unsplash.com/photo-1644530633761-094c893a6558?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1974&q=80","https://images.unsplash.com/photo-1644601397307-ae67d3024d46?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1935&q=80"]),LP={Cursor:0,Text:1,Image:2,Shape:3,Video:4},BP={1:"Text",2:"Image",3:"Shape",4:"Video"},zP=4,ZP=1,VP=2,UP=3,qP=5,WP=6,HP=[{type:4,icon:_,oppositeType:1},{type:2,icon:N,oppositeType:3},{type:3,icon:k,oppositeType:2},{type:1,icon:S,oppositeType:4}],GP={1:4,2:3,3:2,4:1},KP=["Cr\xe9ation libre","Simple Layout","Multi Pictures","News"],XP={"Cr\xe9ation libre":[],"Simple Layout":[{id:"Shape-1",type:3,position:[[0,0,24,24],[696,1056,720,1080]],sequence:1,animations:[],src:"https://images.unsplash.com/photo-1598635416326-ff055cbb02cb?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1935&q=80",finalPosition:{left:0,top:0,width:720,height:1080}},{id:"Shape-2",type:3,position:[[1896,0,1920,24],[720,1056,744,1080]],sequence:1,animations:[],src:"https://images.unsplash.com/photo-1598635416326-ff055cbb02cb?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1935&q=80",finalPosition:{left:720,top:0,width:1200,height:1080}},{id:"Image-7",type:2,position:[[744,24,768,48],[1296,504,1320,528]],sequence:1,animations:[],src:"https://images.unsplash.com/photo-1598635416326-ff055cbb02cb?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1935&q=80",finalPosition:{left:744,top:24,width:576,height:504}},{id:"Image-8",type:2,position:[[1872,24,1896,48],[1344,504,1368,528]],sequence:1,animations:[],src:"https://images.unsplash.com/photo-1644780295337-452d26bc1f89?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=2071&q=80",finalPosition:{left:1344,top:24,width:552,height:504}},{id:"Image-9",type:2,position:[[744,552,768,576],[1296,1032,1320,1056]],sequence:1,animations:[],src:"https://images.unsplash.com/photo-1644678961183-b57d0b9423d6?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1974&q=80",finalPosition:{left:744,top:552,width:576,height:504}},{id:"Image-10",type:2,position:[[1344,552,1368,576],[1872,1032,1896,1056]],sequence:1,animations:[],src:"https://images.unsplash.com/photo-1644869432047-fa8bdbe849cd?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1935&q=80",finalPosition:{left:1344,top:552,width:552,height:504}},{id:"Text-11",type:1,position:[[24,48,48,72],[672,168,696,192]],sequence:1,animations:[],src:"https://images.unsplash.com/photo-1567637903900-7a2f05e37e1a?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1974&q=80",finalPosition:{left:24,top:48,width:672,height:144}},{id:"Text-12",type:1,position:[[24,216,48,240],[672,1032,696,1056]],sequence:1,animations:[],src:"https://images.unsplash.com/photo-1567637903900-7a2f05e37e1a?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1974&q=80",finalPosition:{left:24,top:216,width:672,height:840}}],"Multi Pictures":[{id:"Shape-1",type:3,position:[[0,0,24,24],[1896,1056,1920,1080]],sequence:1,animations:[],finalPosition:{left:0,top:0,width:1920,height:1080}},{id:"Image-2",type:2,position:[[24,24,48,48],[672,240,696,264]],sequence:1,animations:[],finalPosition:{left:24,top:24,width:672,height:240}},{id:"Image-3",type:2,position:[[720,24,744,48],[1056,504,1080,528]],sequence:1,animations:[],finalPosition:{left:720,top:24,width:360,height:504}},{id:"Image-4",type:2,position:[[24,288,48,312],[336,720,360,744]],sequence:1,animations:[],finalPosition:{left:24,top:288,width:336,height:456}},{id:"Image-5",type:2,position:[[384,288,408,312],[672,504,696,528]],sequence:1,animations:[],finalPosition:{left:384,top:288,width:312,height:240}},{id:"Image-6",type:2,position:[[384,552,408,576],[840,1032,864,1056]],sequence:1,animations:[],finalPosition:{left:384,top:552,width:480,height:504}},{id:"Image-7",type:2,position:[[24,768,48,792],[336,1032,360,1056]],sequence:1,animations:[],finalPosition:{left:24,top:768,width:336,height:288}},{id:"Image-8",type:2,position:[[1536,264,1560,288],[1104,504,1128,528]],sequence:1,animations:[],finalPosition:{left:1104,top:264,width:456,height:264}},{id:"Image-9",type:2,position:[[1872,24,1896,48],[1104,216,1128,240]],sequence:1,animations:[],finalPosition:{left:1104,top:24,width:792,height:216}},{id:"Image-10",type:2,position:[[1584,264,1608,288],[1872,744,1896,768]],sequence:1,animations:[],finalPosition:{left:1584,top:264,width:312,height:504}},{id:"Image-11",type:2,position:[[888,552,912,576],[1296,744,1320,768]],sequence:1,animations:[],finalPosition:{left:888,top:552,width:432,height:216}},{id:"Image-12",type:2,position:[[1536,552,1560,576],[1344,744,1368,768]],sequence:1,animations:[],finalPosition:{left:1344,top:552,width:216,height:216}},{id:"Image-13",type:2,position:[[888,792,912,816],[1128,1032,1152,1056]],sequence:1,animations:[],finalPosition:{left:888,top:792,width:264,height:264}},{id:"Image-14",type:2,position:[[1872,792,1896,816],[1176,1032,1200,1056]],sequence:1,animations:[],finalPosition:{left:1176,top:792,width:720,height:264}}],News:[{id:"Fond",type:4,position:[[0,0,24,24],[1896,1056,1920,1080]],sequence:1,animations:[],src:"",finalPosition:{left:0,top:0,width:1920,height:1080}},{id:"bandeau",type:3,position:[[0,888,24,912],[1896,1008,1920,1032]],sequence:1,animations:[],src:"",finalPosition:{left:0,top:888,width:1920,height:144}},{id:"CoinBandeau",type:3,position:[[1896,840,1920,864],[1560,1008,1584,1032]],sequence:1,animations:[],src:"",finalPosition:{left:1560,top:840,width:360,height:192}},{id:"Heure",type:1,position:[[1584,864,1608,888],[1872,984,1896,1008]],sequence:1,animations:[],src:"",finalPosition:{left:1584,top:864,width:312,height:144}},{id:"Logo",type:2,position:[[144,888,168,912],[24,1008,48,1032]],sequence:1,animations:[],src:"https://images.unsplash.com/photo-1644780295337-452d26bc1f89?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=2071&q=80",finalPosition:{left:24,top:888,width:144,height:144}},{id:"ImagePrincipale",type:2,position:[[72,240,96,264],[816,648,840,672]],sequence:1,animations:[],src:"https://images.unsplash.com/photo-1644678961183-b57d0b9423d6?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1974&q=80",finalPosition:{left:72,top:240,width:768,height:432}},{id:"Titre",type:1,position:[[1824,72,1848,96],[72,192,96,216]],sequence:1,animations:[],src:"",finalPosition:{left:72,top:72,width:1776,height:144}},{id:"Corp",type:1,position:[[864,240,888,264],[1824,792,1848,816]],sequence:1,animations:[],src:"",finalPosition:{left:864,top:240,width:984,height:576}}]},YP=function(t){var n=24,r=(0,e.useState)(!1),o=(0,a.Z)(r,2),i=o[0],s=o[1],u=function(e){return t.adjusmentWidth/1920*e},c=function(e){return 1920/t.adjusmentWidth*e};return(0,e.useEffect)((function(){if(t.hidden)s(!1);else if(t.isDown){s(!0);var e=c(t.x),r=c(t.y),a=e-e%n,o=r-r%n,u=[a,o,a+n,o+n];t.onHover(u)}else i&&!t.isDown&&(s(!1),t.onClick(t.x,t.y,!1))}),[t.isDown,t.hidden,t.x,t.y]),(0,re.jsx)("button",{className:"w-full h-full pointer-events-auto z-10 ".concat(t.hidden?"hidden":""),onMouseDown:function(e){0===e.button&&t.onClick(t.x,t.y,!0)},children:(0,re.jsx)("div",{className:"bg-blue-600 rounded-sm cursor-pointer pointer-events-none",style:{position:"absolute",left:t.x-t.x%u(n),top:t.y-t.y%u(n),width:u(n),height:u(n)}})})};var $P=function(t){var n=t.isHidden,o=(0,e.useState)(0),i=(0,a.Z)(o,2),s=i[0],c=i[1],l=(0,e.useRef)(null),f=(0,e.useRef)(null),d=eu(f,{fps:60}),p=eu(l,{fps:60}),h=(0,e.useState)([]),m=(0,a.Z)(h,2),v=m[0],g=m[1],y=(0,mt.useMediaQuery)({query:"(max-width: 1024px)"}),b=function(){var t=(0,e.useState)({width:void 0,height:void 0}),n=(0,a.Z)(t,2),r=n[0],o=n[1];return(0,e.useEffect)((function(){function e(){o({width:window.innerWidth,height:window.innerHeight})}return window.addEventListener("resize",e),e(),function(){return window.removeEventListener("resize",e)}}),[]),r}(),x=(0,e.useState)([]),w=(0,a.Z)(x,2),k=w[0],S=w[1],_=(0,e.useState)(0),N=(0,a.Z)(_,2),E=N[0],C=N[1],T=(0,e.useState)(null),I=(0,a.Z)(T,2),O=I[0],A=I[1],D=(0,e.useState)(null),R=(0,a.Z)(D,2),F=R[0],L=R[1],z=(0,e.useState)([]),Z=(0,a.Z)(z,2),q=Z[0],W=Z[1],H=(0,e.useState)("Text"),G=(0,a.Z)(H,2),Y=G[0],$=G[1],Q=(0,e.useState)(1),ee=(0,a.Z)(Q,2),te=ee[0],ne=ee[1],ae=(0,e.useState)(null),oe=(0,a.Z)(ae,2),ie=oe[0],se=oe[1],ue=(0,e.useState)(!1),ce=(0,a.Z)(ue,2),le=ce[0],fe=ce[1],de=(0,e.useState)(2),pe=(0,a.Z)(de,2),he=pe[0],me=pe[1],ve=(0,e.useState)(.8),ge=(0,a.Z)(ve,2),ye=ge[0],be=ge[1],xe=(0,e.useState)(KP[0]),we=(0,a.Z)(xe,2),ke=we[0],Se=we[1],_e=(0,e.useState)(0),Ne=(0,a.Z)(_e,2),Ee=Ne[0],Ce=Ne[1],Te=(0,e.useState)(""),Ie=(0,a.Z)(Te,2);Ie[0],Ie[1];(0,e.useEffect)((function(){if(!n&&0===v.length){g([])}}),[n]),(0,e.useEffect)((function(){l.current&&c(l.current.offsetWidth)}),[b]);var Oe=function(e){var t=s;return(0===s||l.current&&l.current.offsetWidth!==s)&&(t=l.current.offsetWidth,c(t)),t/1920*e},Ae=function(e){var t=s;return(0===s||l.current&&l.current.offsetWidth!==s)&&(t=l.current.offsetWidth,c(t)),1920/t*e},De=function(e){(O!==F||null===O&&null===F)&&A(e)};(0,e.useEffect)((function(){d.isOver&&A(F)}),[d.isOver]);var Me=function(e){$("Cursor"),L(F===e?null:e)},Re=function(e){$(e),L(null)},Pe=function(e,t){var n=(0,r.Z)(k);n[e].animations.includes(t)?n[e].animations=n[e].animations.filter((function(e){return e!==t})):n[e].animations.includes(GP[t])?(n[e].animations=n[e].animations.filter((function(e){return e!==GP[t]})),n[e].animations.push(t)):n[e].animations.push(t),S(n),je(),Le([n[e]],!1)},je=function(){null!==ie&&(ie.progress(1),ie.clear(),se(null))},Fe=function(e,t){var n={};switch(t){case ZP:n={start:{x:Oe(1920-e.left),rotation:.01},end:{x:0,rotation:0,ease:"power3.inOut",duration:1.5}};break;case VP:n={start:{y:Oe(1080-e.top),rotation:.01},end:{y:0,rotation:0,ease:"power3.inOut",duration:1.5}};break;case UP:n={start:{y:Oe(-1*(e.top+e.height)),rotation:.01},end:{y:0,rotation:0,ease:"power3.inOut",duration:1.5}};break;case zP:n={start:{x:Oe(-1*(e.left+e.width)),rotation:.01},end:{x:0,rotation:0,ease:"power3.inOut",duration:1.5}};break;case qP:n={start:{opacity:0},end:{opacity:.75,ease:"power3.inOut",duration:1.5}};break;case WP:n={start:{scale:0,rotation:.01},end:{scale:1,rotation:0,ease:"power3.inOut",duration:1.5}}}return n},Le=function(e,t){var n=Ho.timeline({paused:t,clearProps:!0});e.length>1&&(e=e.sort((function(e,t){return e.sequence-t.sequence})));var r="";e.forEach((function(t,a){if(t.animations.length>0){var o={},i={};t.animations.forEach((function(e){var n=Fe(t.finalPosition,e);o=u(u({},o),n.start),i=u(u({},i),n.end)}));var s="sequence".concat(t.sequence).concat(t.sequence>1&&t.animations.length>0?"-=".concat(a>0&&t.level&&e[a-1].level===t.level?r===t.type?"1.1":"0.8":"0.5"):"");Object.keys(i).length>0?n.fromTo("#".concat(t.id),o,i,s):n.from("#".concat(t.id),o,s),r=t.type}})),n.then((function(){return ze()})),se(n)},Be=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];je(),L(null),e?We(Ue(Ve(Tt.utils.deepCopy(k))),!1):Le((0,r.Z)(k),!1),fe(!0)},ze=function(){je(),fe(!1)},Ze=function(e){var t=(0,r.Z)(k);if(t[e].sequence+=1,t[e].sequence>=he){var n=Math.max.apply(Math,k.map((function(t,n){return e===n?0:t.sequence})));n+1<t[e].sequence?t[e].sequence=1:me(n+1)}S(t)},Ve=function(e){return e.forEach((function(e,t){e.index=t,e.level=0,e.parent=null,e.childs=[],e.overlappings=[],e.corners=Ge(e.finalPosition),e.surrounding={left:[],right:[],top:[],bottom:[]}})),e.forEach((function(t,n){e.forEach((function(e,r){if(n!==r){var a=!1,o=!1,i=!1;Ke(t.finalPosition,e.finalPosition)&&n>r?(t.parent=e,a=!0):Ke(e.finalPosition,t.finalPosition)&&n<r?(t.childs.push(e),o=!0):Ye(t.finalPosition,e.finalPosition)&&n>r&&(t.overlappings.push(e),i=!0),(a||i)&&(t.level=e.level+1),o||(t.corners.tl.x>=e.corners.tl.x&&(a&&0!==e.corners.tl.x||!a)&&(t.corners.tr.y<=e.corners.tr.y&&t.corners.br.y<=e.corners.br.y||t.corners.tr.y>=e.corners.tr.y&&t.corners.br.y>=e.corners.br.y||t.corners.tr.y>=e.corners.tr.y&&t.corners.br.y<=e.corners.br.y||t.corners.tr.y<=e.corners.tr.y&&t.corners.br.y>=e.corners.br.y)&&t.surrounding.left.push(e),t.corners.tr.x<=e.corners.tr.x&&(a&&1920!==e.corners.tr.x||!a)&&(t.corners.tr.y<=e.corners.tr.y&&t.corners.br.y<=e.corners.br.y||t.corners.tr.y>=e.corners.tr.y&&t.corners.br.y>=e.corners.br.y||t.corners.tr.y>=e.corners.tr.y&&t.corners.br.y<=e.corners.br.y||t.corners.tr.y<=e.corners.tr.y&&t.corners.br.y>=e.corners.br.y)&&t.surrounding.right.push(e),t.corners.tl.y>=e.corners.tl.y&&(a&&0!==e.corners.tl.y||!a)&&(t.corners.tr.x<=e.corners.tr.x&&t.corners.tl.x<=e.corners.tl.x||t.corners.tr.x>=e.corners.tr.x&&t.corners.tl.x>=e.corners.tl.x||t.corners.tr.x>=e.corners.tr.x&&t.corners.tl.x<=e.corners.tl.x||t.corners.tr.x<=e.corners.tr.x&&t.corners.tl.x>=e.corners.tl.x)&&t.surrounding.top.push(e),t.corners.bl.y<=e.corners.bl.y&&(a&&1080!==e.corners.bl.y||!a)&&(t.corners.tr.x<=e.corners.tr.x&&t.corners.tl.x<=e.corners.tl.x||t.corners.tr.x>=e.corners.tr.x&&t.corners.tl.x>=e.corners.tl.x||t.corners.tr.x>=e.corners.tr.x&&t.corners.tl.x<=e.corners.tl.x||t.corners.tr.x<=e.corners.tr.x&&t.corners.tl.x>=e.corners.tl.x)&&t.surrounding.bottom.push(e))}}))})),e},Ue=function(e){var t=function(e,t,n){switch(console.log("sortZones",t,n),t){case"fromCenter":return e.sort((function(e,t){var r=e.finalPosition.left+e.finalPosition.width/2-960,a=e.finalPosition.top+e.finalPosition.height/2-540,o=t.finalPosition.left+t.finalPosition.width/2-960,i=t.finalPosition.top+t.finalPosition.height/2-540;r<0&&(r*=-1),a<0&&(a*=-1),o<0&&(o*=-1),i<0&&(i*=-1);var s=Math.sqrt(r+a),u=Math.sqrt(o+i);return n?e.level-t.level||s-u:e.level-t.level||u-s}));case"readingOrder":return e.sort((function(e,t){var n=Math.sqrt(e.finalPosition.left+e.finalPosition.top),r=Math.sqrt(t.finalPosition.left+t.finalPosition.top);return e.level-t.level||n-r}));default:return e}}(e,["readingOrder","fromCenter"][Math.floor(2*Math.random())],0!==Math.floor(2*Math.random())),n=1,r=null,a=null;return t.forEach((function(e,o){var i=qe(t.slice(0,o),e);if(0===e.level?(e.sequence=1,e.sequenceOffset=""):e.parent&&e.parent.level>0?(e.sequence=e.parent.sequence+1,e.sequenceOffset="1.2"):e.overlappings[0]&&e.overlappings[0].sequence>1&&1===e.overlappings.length?(e.sequence=e.overlappings[0].sequence,e.sequenceOffset="0.2"):(n+=1,e.sequence=n,o>0&&t[o-1].type===e.type?e.sequenceOffset="1.1":o>0&&t[o-1].level===e.level?e.sequenceOffset="0.8":e.sequenceOffset="0.5"),0===i.length?i=[5,6]:e.level>0&&(i.push(5),i.push(6)),0===(i=i.filter((function(t){return He(t,e.finalPosition)/(0===e.level?2:1)<=ye}))).length&&(i=[5]),0!==e.level&&r===e.type&&i.includes(a))e.animations=[a];else{var s=Math.floor(Math.random()*i.length);e.animations=[i[s]],a=i[s]}r=e.type})),console.log("smartAnimationV2",t),t},qe=function(e,t){var n=[1,2,3,4];0===t.level&&(1920===t.corners.tr.x&&t.position.width<960&&(n=n.filter((function(e){return 4!==e}))),0===t.corners.tl.x&&t.position.width<960&&(n=n.filter((function(e){return 1!==e}))),1080===t.corners.bl.y&&t.position.height<540&&(n=n.filter((function(e){return 3!==e}))),0===t.corners.tl.y&&t.position.height<540&&(n=n.filter((function(e){return 2!==e}))));var r,a=(0,Et.Z)(e);try{var o=function(){var e=r.value;if(!(n.length>0))return"break";n.includes(4)&&(t.surrounding.left.some((function(t){return t.id===e.id}))||t.parent&&t.parent.level>0&&0!==t.parent.corners.tl.x)&&(n=n.filter((function(e){return 4!==e}))),n.includes(1)&&(t.surrounding.right.some((function(t){return t.id===e.id}))||t.parent&&t.parent.level>0&&1920!==t.parent.corners.tr.x)&&(n=n.filter((function(e){return 1!==e}))),n.includes(3)&&(t.surrounding.top.some((function(t){return t.id===e.id}))||t.parent&&t.parent.level>0&&0!==t.parent.corners.tl.y)&&(n=n.filter((function(e){return 3!==e}))),n.includes(2)&&(t.surrounding.bottom.some((function(t){return t.id===e.id}))||t.parent&&t.parent.level>0&&1080!==t.parent.corners.bl.y)&&(n=n.filter((function(e){return 2!==e})))};for(a.s();!(r=a.n()).done;){if("break"===o())break}}catch(i){a.e(i)}finally{a.f()}return n},We=function(e,t){var n=Ho.timeline({paused:t,clearProps:!0});e.length>1&&(e=e.sort((function(e,t){return e.sequence-t.sequence}))),e.forEach((function(e,t){if(e.animations.length>0){var r={},a={};e.animations.forEach((function(t){var n=Fe(e.finalPosition,t);r=u(u({},r),n.start),a=u(u({},a),n.end)}));var o="sequence".concat(e.sequence).concat(""!==e.sequenceOffset?"-=".concat(e.sequenceOffset):"");Object.keys(a).length>0?n.fromTo("#".concat(e.id),r,a,o):n.from("#".concat(e.id),r,o)}})),n.then((function(){return ze()})),se(n)},He=function(e,t){var n=Ge(t),r=0;switch(e){case ZP:r=(1920-n.tl.x)/1920;break;case VP:r=(1080-n.tl.y)/1080;break;case UP:r=n.bl.y/1080;break;case zP:r=n.tr.x/1920;break;case qP:r=0;break;case WP:r=t.width*t.height/2073600}return r},Ge=function(e){return{tl:{x:e.left,y:e.top},tr:{x:e.left+e.width,y:e.top},bl:{x:e.left,y:e.top+e.height},br:{x:e.left+e.width,y:e.top+e.height}}},Ke=function(e,t){var n=!1,r=Ge(t),a=Ge(e);return Xe(r,a.tl)&&Xe(r,a.tr)&&Xe(r,a.bl)&&Xe(r,a.br)&&(n=!0),n},Xe=function(e,t){var n=!1;return e.tl.x<=t.x&&e.tr.x>=t.x&&e.tl.y<=t.y&&e.bl.y>=t.y&&(n=!0),n},Ye=function(e,t){var n=!1,r=Ge(t),a=Ge(e);return(a.tl.x>r.tl.x&&a.tl.x<r.tr.x||a.tr.x>r.tl.x&&a.tr.x<r.tr.x||a.tl.x<r.tl.x&&a.tr.x>r.tl.x)&&(a.tl.y>r.tl.y&&a.tl.y<r.bl.y||a.bl.y>r.tl.y&&a.bl.y<r.bl.y||a.tl.y<r.tl.y&&a.bl.y>r.tl.y)&&(n=!0),n},$e=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;switch(t){case"animations":Pe(e,n);break;case"sequence":Ze(e);break;case"finalPosition":var a=(0,r.Z)(k);n.position[0][0]<=n.position[1][2]&&n.position[0][1]<=n.position[1][3]?a[e].position=[n.position[0],n.position[1]]:a[e].position=[n.position[1],n.position[0]],delete n.position,a[e].finalPosition=n,S(a)}};return(0,re.jsx)(re.Fragment,{children:(0,re.jsxs)("div",{className:"min-h-screen flex-col items-start justify-start bg-gray-900 py-20 lg:py-12 px-4 sm:px-6 lg:px-52 space-y-4 lg:space-y-8 ".concat(n?"hidden":"flex"),children:[(0,re.jsxs)("div",{className:"w-full flex flex-col-reverse space-x-0 lg:flex-row lg:space-x-6 lg:space-y-0 md:flex-row md:space-x-6 md:space-y-0 items-center justify-end",children:[(0,re.jsxs)("div",{className:"flex flex-row space-x-4 h-full w-full items-center justify-end mt-4 md:mt-0 lg:mt-0",children:[le?(0,re.jsx)(X,{onClick:function(){return ze()},className:"text-white hover:text-blue-400 cursor-pointer h-7 w-7"}):(0,re.jsx)(U,{onClick:function(){return Be()},className:"text-white hover:text-blue-400 cursor-pointer h-7 w-7"}),(0,re.jsx)(K,{onClick:function(){return Be(!0)},className:"text-white hover:text-blue-400 cursor-pointer h-7 w-7"})]}),(0,re.jsxs)("div",{className:"flex flex-row items-center mt-3 lg:mt-0",children:[(0,re.jsx)("div",{className:"select-none rounded-md m-1 py-0.5 text-center text-xs flex items-center font-medium justify-center align-middle text-white bg-transparent border-transparent",children:"Animation"}),(0,re.jsx)("div",{className:"select-none rounded-md m-1 px-2 py-0.5 text-center text-xs flex items-center font-medium justify-center align-middle text-gray-600 bg-transparent border-transparent",children:(0,re.jsx)("input",{type:"range",id:"durationAdjustment",step:.05,className:"rangeNoFill",name:"durationAdjustment",min:"0",max:"1",onChange:function(e){return be(Number(e.target.value))},defaultValue:ye})})]}),(0,re.jsx)(Fs,{disabled:le,preSelect:ke,list:KP,onChange:function(e){e!==ke&&("Cr\xe9ation libre"===ke&&(XP["Cr\xe9ation libre"]=Tt.utils.deepCopy(k)),L(null),Se(e),XP[e]&&S(XP[e]))}})]}),!n&&(0,re.jsxs)("div",{className:"flex flex-col lg:flex-row w-full",children:[(0,re.jsx)("div",{className:"flex flex-col",children:(0,re.jsxs)("div",{className:"mt-2 lg:mx-2 lg:mt-0 flex flex-col space-y-4 px-2 py-3 bg-white rounded-sm",children:[(0,re.jsx)(M,{onClick:function(){return Re("Cursor")},className:"h-6 w-6 text-".concat("Cursor"===Y?"blue-600":"gray-400"," hover:text-blue-500 cursor-pointer")}),(0,re.jsx)(B,{onClick:function(){return Re("Text")},className:"h-6 w-6 text-".concat("Text"===Y?"blue-600":"gray-400"," hover:text-blue-500 cursor-pointer")}),(0,re.jsx)(V,{onClick:function(){return Re("Image")},className:"h-6 w-6 text-".concat("Image"===Y?"blue-600":"gray-400"," hover:text-blue-500 cursor-pointer")}),(0,re.jsx)(P,{onClick:function(){return Re("Shape")},className:"h-6 w-6 text-".concat("Shape"===Y?"blue-600":"gray-400"," hover:text-blue-500 cursor-pointer")}),(0,re.jsx)(j,{onClick:function(){return Re("Video")},className:"h-6 w-6 text-".concat("Video"===Y?"blue-600":"gray-400"," hover:text-blue-500 cursor-pointer")})]})}),(0,re.jsx)("div",{className:"w-full overflow-hidden shadow",children:(0,re.jsx)("div",{id:"thumbPreview",className:"w-full aspect-w-16 aspect-h-9 bg-white overflow-hidden rounded",ref:l,children:l.current&&s>0&&(0,re.jsxs)(re.Fragment,{children:[(0,re.jsx)("div",{className:"absolute z-10 top-0 left-0 h-full w-full ".concat("Cursor"!==Y?"pointer-events-none":""),children:k.map((function(e,t){return e.finalPosition?(0,re.jsx)(jP,{zone:e,index:t,onClick:Me,onMouseEnter:De,onMouseLeave:A,isDisabled:le||"Cursor"!==Y||null!==F&&F!==t&&O===F,isPlaying:le,isSelected:F===t,isHovered:O===t,onChange:$e,adjusmentWidth:s,mouseX:p.x,mouseY:p.y,mouseDown:p.isDown,mouseHover:p.isOver},e.id):(0,re.jsx)(re.Fragment,{})}))}),(0,re.jsx)("div",{className:"absolute z-20 top-0 left-0 h-full w-full pointer-events-none ".concat("Cursor"===Y&&O!==F&&null!==F?"":"hidden"),children:(0,re.jsx)("button",{ref:f,onMouseEnter:function(){return A(F)},className:"pointer-events-auto",style:{position:"absolute",left:Oe(null!==F?k[F].finalPosition.left:0),top:Oe(null!==F?k[F].finalPosition.top:0),width:Oe(null!==F?k[F].finalPosition.width:0),height:Oe(null!==F?k[F].finalPosition.height:0)}})}),(0,re.jsxs)("div",{className:"absolute z-20 top-0 left-0 h-full w-full ".concat("Cursor"!==Y?"":"hidden"),children:[q.length>0&&(0,re.jsx)("div",{style:{position:"absolute",left:Oe(q[0][0]<q[1][0]?q[0][0]:q[1][0]),top:Oe(q[0][1]<q[1][1]?q[0][1]:q[1][1]),width:Oe(q[1][2]>q[0][0]?q[1][2]-q[0][0]:q[0][2]-q[1][0]),height:Oe(q[1][3]>q[0][1]?q[1][3]-q[0][1]:q[0][3]-q[1][1])},className:"bg-blue-600 opacity-40 z-0 pointer-event-none rounded-sm"},"tempZone-key"),"Cursor"!==Y&&"Cr\xe9ation libre"===ke&&(0,re.jsx)(YP,{hidden:!!le||!p.isOver,x:p.x,y:p.y,adjusmentWidth:s,onClick:function(e,t,n){var a=24,o=Ae(e),i=Ae(t),s=o-o%a,u=i-i%a,c=[s,u,s+a,u+a],l=(0,r.Z)(k),f=k[E];if(L(null),0===l.length&&n){if(S([{id:"".concat(Y,"-").concat(te),type:LP[Y],position:[c,null],sequence:1,animations:[],src:FP[Ee]}]),W([c,c]),LP[Y]===LP.Image){var d=Ee+1;Ce(d<FP.length?d:0)}}else if(f&&null===f.position[1]&&!n){f.position[0][0]<=c[2]&&f.position[0][1]<=c[3]?l[E].position=[f.position[0],c]:l[E].position=[c,f.position[0]];var p=l[E].position,h={left:p[0][0]<p[1][0]?p[0][0]:p[1][0],top:p[0][1]<p[1][1]?p[0][1]:p[1][1],width:p[1][2]>p[0][0]?p[1][2]-p[0][0]:p[0][2]-p[1][0],height:p[1][3]>p[0][1]?p[1][3]-p[0][1]:p[0][3]-p[1][1]};l[E].finalPosition=h,l[E].position=[[h.left,h.top,h.left+a,h.top+a],[h.left+h.width-a,h.top+h.height-a,h.left+h.width,h.top+h.height]],S(l),W([]),ne(te+1)}else if(n&&(l.push({id:"".concat(Y,"-").concat(te),type:LP[Y],position:[c,null],sequence:1,animations:[],src:FP[Ee]}),C(E+1),S(l),W([c,c]),LP[Y]===LP.Image)){var m=Ee+1;Ce(m<FP.length?m:0)}},isDown:p.isDown,onHover:function(e){var t=k[E];t&&t.position.length>0&&null===t.position[1]&&(t.position[0][0]<=e[2]&&t.position[0][1]<=e[3]?W([t.position[0],e]):W([e,t.position[0]]))}})]})]})})}),(0,re.jsx)("div",{className:"mt-2 lg:ml-4 lg:mt-0 container flex flex-col space-y-3",style:{width:"".concat(y?100:18.25,"%")},children:k.map((function(e,t){e.position;var n=e.type,a=e.animations,o=e.finalPosition,i=e.sequence,s=e.id;return o?(0,re.jsxs)("div",{className:"bg-white pointer-events-auto rounded-sm py-2 px-2 w-full text-sm flex flex-col space-y-2 items-center ".concat(F===t?"ring-2 ring-blue-600 ring-offset-2 ring-offset-gray-900":O===t?"ring-2 ring-blue-300 ring-offset-2 ring-offset-gray-900":"hover:ring-2 hover:ring-blue-300 hover:ring-offset-2 hover:ring-offset-gray-900"),children:[(0,re.jsxs)("button",{onClick:function(){return Me(t)},onMouseEnter:function(){return A(t)},onMouseLeave:function(){return A(null)},className:"w-full text-sm flex flex-row items-center",children:[(0,re.jsxs)("div",{className:"mr-3",children:[n===LP.Text&&(0,re.jsx)(B,{className:"h-5 w-5 text-gray-400 pointer-events-none"},"zonesList-".concat(t,"-icon")),n===LP.Image&&(0,re.jsx)(V,{className:"h-5 w-5 text-gray-400 pointer-events-none"},"zonesList-".concat(t,"-icon")),n===LP.Shape&&(0,re.jsx)(P,{className:"h-5 w-5 text-gray-400 pointer-events-none"},"zonesList-".concat(t,"-icon")),n===LP.Video&&(0,re.jsx)(j,{className:"h-5 w-5 text-gray-400 pointer-events-none"},"zonesList-".concat(t,"-icon"))]}),(0,re.jsx)("div",{className:"w-full text-left pointer-events-none",children:BP[n]}),(0,re.jsx)("div",{className:"h-5 w-5 shrink-0 flex ml-3 rounded text-xs bg-gray-200 items-center justify-center cursor-pointer pointer-events-auto",onClick:function(e){e.stopPropagation(),Ze(t)},children:i}),(0,re.jsx)("div",{className:"ml-3",children:(0,re.jsx)(J,{onClick:function(e){e.stopPropagation(),function(e){var t=(0,r.Z)(k),n=E;t.splice(e,1),n>0&&(n-=1),F===e&&L(null),O===e&&A(null),2===Math.min.apply(Math,t.map((function(e){return e.sequence})))&&(t.forEach((function(e){e.sequence-=1})),me(he-1)),S(t),C(n)}(t)},className:"h-4 w-4 text-gray-400 hover:text-red-600 cursor-pointer"},"zonesList-".concat(s,"-trash"))})]}),F===t&&(0,re.jsxs)("div",{className:"bg-gray-100 rounded-sm w-full text-xs flex flex-col pb-1",children:[(0,re.jsxs)("div",{className:"w-full text-xs flex flex-row items-center mx-2 mt-2 mb-1",children:[(0,re.jsx)("div",{className:"mr-2",children:(0,re.jsx)(K,{className:"h-4 w-4 text-gray-400 pointer-events-none"})}),(0,re.jsx)("div",{className:"w-full text-left pointer-events-none",children:"Animations"})]}),(0,re.jsx)("div",{className:"w-full text-xs flex flex-row items-center mx-1 mt-1",children:HP.map((function(e,n){return(0,re.jsx)("div",{onClick:function(){return Pe(t,e.type)},className:"pointer-events-auto cursor-pointer p-1 m-1 rounded ".concat(a.includes(e.type)?"bg-blue-200 text-blue-600":"bg-white text-gray-500 hover:bg-blue-100 hover:text-blue-400"),children:(0,re.jsx)(e.icon,{className:"h-5 w-5"})},"zonesList-animation-".concat(t,"-").concat(n))}))})]})]},"zonesList-".concat(s)):(0,re.jsx)(re.Fragment,{})}))})]}),(0,re.jsx)("section",{className:"container grid md:grid-cols-4 grid-cols-3 gap-1 lg:grid-cols-12 lg:gap-2 w-full"})]})})};function JP(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,(0,hC.Z)(e,t)}function QP(){return QP=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},QP.apply(this,arguments)}function ej(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}var tj="function"===typeof Symbol&&Symbol.observable||"@@observable",nj=function(){return Math.random().toString(36).substring(7).split("").join(".")},rj={INIT:"@@redux/INIT"+nj(),REPLACE:"@@redux/REPLACE"+nj(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+nj()}};function aj(e){if("object"!==typeof e||null===e)return!1;for(var t=e;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function oj(e,t,n){var r;if("function"===typeof t&&"function"===typeof n||"function"===typeof n&&"function"===typeof arguments[3])throw new Error(ej(0));if("function"===typeof t&&"undefined"===typeof n&&(n=t,t=void 0),"undefined"!==typeof n){if("function"!==typeof n)throw new Error(ej(1));return n(oj)(e,t)}if("function"!==typeof e)throw new Error(ej(2));var a=e,o=t,i=[],s=i,u=!1;function c(){s===i&&(s=i.slice())}function l(){if(u)throw new Error(ej(3));return o}function f(e){if("function"!==typeof e)throw new Error(ej(4));if(u)throw new Error(ej(5));var t=!0;return c(),s.push(e),function(){if(t){if(u)throw new Error(ej(6));t=!1,c();var n=s.indexOf(e);s.splice(n,1),i=null}}}function d(e){if(!aj(e))throw new Error(ej(7));if("undefined"===typeof e.type)throw new Error(ej(8));if(u)throw new Error(ej(9));try{u=!0,o=a(o,e)}finally{u=!1}for(var t=i=s,n=0;n<t.length;n++){(0,t[n])()}return e}function p(e){if("function"!==typeof e)throw new Error(ej(10));a=e,d({type:rj.REPLACE})}function h(){var e,t=f;return(e={subscribe:function(e){if("object"!==typeof e||null===e)throw new Error(ej(11));function n(){e.next&&e.next(l())}return n(),{unsubscribe:t(n)}}})[tj]=function(){return this},e}return d({type:rj.INIT}),(r={dispatch:d,subscribe:f,getState:l,replaceReducer:p})[tj]=h,r}function ij(e,t){return function(){return t(e.apply(this,arguments))}}function sj(e,t){if("function"===typeof e)return ij(e,t);if("object"!==typeof e||null===e)throw new Error(ej(16));var n={};for(var r in e){var a=e[r];"function"===typeof a&&(n[r]=ij(a,t))}return n}function uj(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return 0===t.length?function(e){return e}:1===t.length?t[0]:t.reduce((function(e,t){return function(){return e(t.apply(void 0,arguments))}}))}var cj=e.createContext(null);var lj=function(e){e()},fj=function(){return lj};var dj={notify:function(){},get:function(){return[]}};function pj(e,t){var n,r=dj;function a(){i.onStateChange&&i.onStateChange()}function o(){n||(n=t?t.addNestedSub(a):e.subscribe(a),r=function(){var e=fj(),t=null,n=null;return{clear:function(){t=null,n=null},notify:function(){e((function(){for(var e=t;e;)e.callback(),e=e.next}))},get:function(){for(var e=[],n=t;n;)e.push(n),n=n.next;return e},subscribe:function(e){var r=!0,a=n={callback:e,next:null,prev:n};return a.prev?a.prev.next=a:t=a,function(){r&&null!==t&&(r=!1,a.next?a.next.prev=a.prev:n=a.prev,a.prev?a.prev.next=a.next:t=a.next)}}}}())}var i={addNestedSub:function(e){return o(),r.subscribe(e)},notifyNestedSubs:function(){r.notify()},handleChangeWrapper:a,isSubscribed:function(){return Boolean(n)},trySubscribe:o,tryUnsubscribe:function(){n&&(n(),n=void 0,r.clear(),r=dj)},getListeners:function(){return r}};return i}var hj="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement?e.useLayoutEffect:e.useEffect;var mj=function(t){var n=t.store,r=t.context,a=t.children,o=(0,e.useMemo)((function(){var e=pj(n);return e.onStateChange=e.notifyNestedSubs,{store:n,subscription:e}}),[n]),i=(0,e.useMemo)((function(){return n.getState()}),[n]);hj((function(){var e=o.subscription;return e.trySubscribe(),i!==n.getState()&&e.notifyNestedSubs(),function(){e.tryUnsubscribe(),e.onStateChange=null}}),[o,i]);var s=r||cj;return e.createElement(s.Provider,{value:o},a)},vj=n(2110),gj=n.n(vj),yj=n(6900),bj=["getDisplayName","methodName","renderCountProp","shouldHandleStateChanges","storeKey","withRef","forwardRef","context"],xj=["reactReduxForwardedRef"],wj=[],kj=[null,null];function Sj(e,t){var n=e[1];return[t.payload,n+1]}function _j(e,t,n){hj((function(){return e.apply(void 0,t)}),n)}function Nj(e,t,n,r,a,o,i){e.current=r,t.current=a,n.current=!1,o.current&&(o.current=null,i())}function Ej(e,t,n,r,a,o,i,s,u,c){if(e){var l=!1,f=null,d=function(){if(!l){var e,n,d=t.getState();try{e=r(d,a.current)}catch(p){n=p,f=p}n||(f=null),e===o.current?i.current||u():(o.current=e,s.current=e,i.current=!0,c({type:"STORE_UPDATED",payload:{error:n}}))}};n.onStateChange=d,n.trySubscribe(),d();return function(){if(l=!0,n.tryUnsubscribe(),n.onStateChange=null,f)throw f}}}var Cj=function(){return[null,0]};function Tj(t,n){void 0===n&&(n={});var r=n,a=r.getDisplayName,o=void 0===a?function(e){return"ConnectAdvanced("+e+")"}:a,i=r.methodName,s=void 0===i?"connectAdvanced":i,u=r.renderCountProp,c=void 0===u?void 0:u,l=r.shouldHandleStateChanges,f=void 0===l||l,d=r.storeKey,p=void 0===d?"store":d,h=(r.withRef,r.forwardRef),m=void 0!==h&&h,v=r.context,g=void 0===v?cj:v,y=Fg(r,bj),b=g;return function(n){var r=n.displayName||n.name||"Component",a=o(r),i=QP({},y,{getDisplayName:o,methodName:s,renderCountProp:c,shouldHandleStateChanges:f,storeKey:p,displayName:a,wrappedComponentName:r,WrappedComponent:n}),u=y.pure;var l=u?e.useMemo:function(e){return e()};function d(r){var a=(0,e.useMemo)((function(){var e=r.reactReduxForwardedRef,t=Fg(r,xj);return[r.context,e,t]}),[r]),o=a[0],s=a[1],u=a[2],c=(0,e.useMemo)((function(){return o&&o.Consumer&&(0,yj.isContextConsumer)(e.createElement(o.Consumer,null))?o:b}),[o,b]),d=(0,e.useContext)(c),p=Boolean(r.store)&&Boolean(r.store.getState)&&Boolean(r.store.dispatch);Boolean(d)&&Boolean(d.store);var h=p?r.store:d.store,m=(0,e.useMemo)((function(){return function(e){return t(e.dispatch,i)}(h)}),[h]),v=(0,e.useMemo)((function(){if(!f)return kj;var e=pj(h,p?null:d.subscription),t=e.notifyNestedSubs.bind(e);return[e,t]}),[h,p,d]),g=v[0],y=v[1],x=(0,e.useMemo)((function(){return p?d:QP({},d,{subscription:g})}),[p,d,g]),w=(0,e.useReducer)(Sj,wj,Cj),k=w[0][0],S=w[1];if(k&&k.error)throw k.error;var _=(0,e.useRef)(),N=(0,e.useRef)(u),E=(0,e.useRef)(),C=(0,e.useRef)(!1),T=l((function(){return E.current&&u===N.current?E.current:m(h.getState(),u)}),[h,k,u]);_j(Nj,[N,_,C,u,T,E,y]),_j(Ej,[f,h,g,m,N,_,C,E,y,S],[h,g,m]);var I=(0,e.useMemo)((function(){return e.createElement(n,QP({},T,{ref:s}))}),[s,n,T]);return(0,e.useMemo)((function(){return f?e.createElement(c.Provider,{value:x},I):I}),[c,I,x])}var h=u?e.memo(d):d;if(h.WrappedComponent=n,h.displayName=d.displayName=a,m){var v=e.forwardRef((function(t,n){return e.createElement(h,QP({},t,{reactReduxForwardedRef:n}))}));return v.displayName=a,v.WrappedComponent=n,gj()(v,n)}return gj()(h,n)}}function Ij(e,t){return e===t?0!==e||0!==t||1/e===1/t:e!==e&&t!==t}function Oj(e,t){if(Ij(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(var a=0;a<n.length;a++)if(!Object.prototype.hasOwnProperty.call(t,n[a])||!Ij(e[n[a]],t[n[a]]))return!1;return!0}function Aj(e){return function(t,n){var r=e(t,n);function a(){return r}return a.dependsOnOwnProps=!1,a}}function Dj(e){return null!==e.dependsOnOwnProps&&void 0!==e.dependsOnOwnProps?Boolean(e.dependsOnOwnProps):1!==e.length}function Mj(e,t){return function(t,n){n.displayName;var r=function(e,t){return r.dependsOnOwnProps?r.mapToProps(e,t):r.mapToProps(e)};return r.dependsOnOwnProps=!0,r.mapToProps=function(t,n){r.mapToProps=e,r.dependsOnOwnProps=Dj(e);var a=r(t,n);return"function"===typeof a&&(r.mapToProps=a,r.dependsOnOwnProps=Dj(a),a=r(t,n)),a},r}}var Rj=[function(e){return"function"===typeof e?Mj(e):void 0},function(e){return e?void 0:Aj((function(e){return{dispatch:e}}))},function(e){return e&&"object"===typeof e?Aj((function(t){return function(e,t){var n={},r=function(r){var a=e[r];"function"===typeof a&&(n[r]=function(){return t(a.apply(void 0,arguments))})};for(var a in e)r(a);return n}(e,t)})):void 0}];var Pj=[function(e){return"function"===typeof e?Mj(e):void 0},function(e){return e?void 0:Aj((function(){return{}}))}];function jj(e,t,n){return QP({},n,e,t)}var Fj=[function(e){return"function"===typeof e?function(e){return function(t,n){n.displayName;var r,a=n.pure,o=n.areMergedPropsEqual,i=!1;return function(t,n,s){var u=e(t,n,s);return i?a&&o(u,r)||(r=u):(i=!0,r=u),r}}}(e):void 0},function(e){return e?void 0:function(){return jj}}],Lj=["initMapStateToProps","initMapDispatchToProps","initMergeProps"];function Bj(e,t,n,r){return function(a,o){return n(e(a,o),t(r,o),o)}}function zj(e,t,n,r,a){var o,i,s,u,c,l=a.areStatesEqual,f=a.areOwnPropsEqual,d=a.areStatePropsEqual,p=!1;function h(a,p){var h=!f(p,i),m=!l(a,o);return o=a,i=p,h&&m?(s=e(o,i),t.dependsOnOwnProps&&(u=t(r,i)),c=n(s,u,i)):h?(e.dependsOnOwnProps&&(s=e(o,i)),t.dependsOnOwnProps&&(u=t(r,i)),c=n(s,u,i)):m?function(){var t=e(o,i),r=!d(t,s);return s=t,r&&(c=n(s,u,i)),c}():c}return function(a,l){return p?h(a,l):(s=e(o=a,i=l),u=t(r,i),c=n(s,u,i),p=!0,c)}}function Zj(e,t){var n=t.initMapStateToProps,r=t.initMapDispatchToProps,a=t.initMergeProps,o=Fg(t,Lj),i=n(e,o),s=r(e,o),u=a(e,o);return(o.pure?zj:Bj)(i,s,u,e,o)}var Vj=["pure","areStatesEqual","areOwnPropsEqual","areStatePropsEqual","areMergedPropsEqual"];function Uj(e,t,n){for(var r=t.length-1;r>=0;r--){var a=t[r](e);if(a)return a}return function(t,r){throw new Error("Invalid value of type "+typeof e+" for "+n+" argument when connecting component "+r.wrappedComponentName+".")}}function qj(e,t){return e===t}function Wj(e){var t=void 0===e?{}:e,n=t.connectHOC,r=void 0===n?Tj:n,a=t.mapStateToPropsFactories,o=void 0===a?Pj:a,i=t.mapDispatchToPropsFactories,s=void 0===i?Rj:i,u=t.mergePropsFactories,c=void 0===u?Fj:u,l=t.selectorFactory,f=void 0===l?Zj:l;return function(e,t,n,a){void 0===a&&(a={});var i=a,u=i.pure,l=void 0===u||u,d=i.areStatesEqual,p=void 0===d?qj:d,h=i.areOwnPropsEqual,m=void 0===h?Oj:h,v=i.areStatePropsEqual,g=void 0===v?Oj:v,y=i.areMergedPropsEqual,b=void 0===y?Oj:y,x=Fg(i,Vj),w=Uj(e,o,"mapStateToProps"),k=Uj(t,s,"mapDispatchToProps"),S=Uj(n,c,"mergeProps");return r(f,QP({methodName:"connect",getDisplayName:function(e){return"Connect("+e+")"},shouldHandleStateChanges:Boolean(e),initMapStateToProps:w,initMapDispatchToProps:k,initMergeProps:S,pure:l,areStatesEqual:p,areOwnPropsEqual:m,areStatePropsEqual:g,areMergedPropsEqual:b},x))}}var Hj=Wj();var Gj;function Kj(t,n){var r=(0,e.useState)((function(){return{inputs:n,result:t()}}))[0],a=(0,e.useRef)(!0),o=(0,e.useRef)(r),i=a.current||Boolean(n&&o.current.inputs&&function(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}(n,o.current.inputs)),s=i?o.current:{inputs:n,result:t()};return(0,e.useEffect)((function(){a.current=!1,o.current=s}),[s]),s.result}Gj=t.unstable_batchedUpdates,lj=Gj;var Xj=Kj,Yj=function(e,t){return Kj((function(){return e}),t)},$j="Invariant failed";var Jj=function(e){var t=e.top,n=e.right,r=e.bottom,a=e.left;return{top:t,right:n,bottom:r,left:a,width:n-a,height:r-t,x:a,y:t,center:{x:(n+a)/2,y:(r+t)/2}}},Qj=function(e,t){return{top:e.top-t.top,left:e.left-t.left,bottom:e.bottom+t.bottom,right:e.right+t.right}},eF=function(e,t){return{top:e.top+t.top,left:e.left+t.left,bottom:e.bottom-t.bottom,right:e.right-t.right}},tF={top:0,right:0,bottom:0,left:0},nF=function(e){var t=e.borderBox,n=e.margin,r=void 0===n?tF:n,a=e.border,o=void 0===a?tF:a,i=e.padding,s=void 0===i?tF:i,u=Jj(Qj(t,r)),c=Jj(eF(t,o)),l=Jj(eF(c,s));return{marginBox:u,borderBox:Jj(t),paddingBox:c,contentBox:l,margin:r,border:o,padding:s}},rF=function(e){var t=e.slice(0,-2);if("px"!==e.slice(-2))return 0;var n=Number(t);return isNaN(n)&&function(e,t){if(!e)throw new Error($j)}(!1),n},aF=function(e,t){var n,r,a=e.borderBox,o=e.border,i=e.margin,s=e.padding,u=(r=t,{top:(n=a).top+r.y,left:n.left+r.x,bottom:n.bottom+r.y,right:n.right+r.x});return nF({borderBox:u,border:o,margin:i,padding:s})},oF=function(e,t){return void 0===t&&(t={x:window.pageXOffset,y:window.pageYOffset}),aF(e,t)},iF=function(e,t){var n={top:rF(t.marginTop),right:rF(t.marginRight),bottom:rF(t.marginBottom),left:rF(t.marginLeft)},r={top:rF(t.paddingTop),right:rF(t.paddingRight),bottom:rF(t.paddingBottom),left:rF(t.paddingLeft)},a={top:rF(t.borderTopWidth),right:rF(t.borderRightWidth),bottom:rF(t.borderBottomWidth),left:rF(t.borderLeftWidth)};return nF({borderBox:e,margin:n,padding:r,border:a})},sF=function(e){var t=e.getBoundingClientRect(),n=window.getComputedStyle(e);return iF(t,n)},uF=Number.isNaN||function(e){return"number"===typeof e&&e!==e};function cF(e,t){return e===t||!(!uF(e)||!uF(t))}function lF(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(!cF(e[n],t[n]))return!1;return!0}var fF=function(e,t){var n;void 0===t&&(t=lF);var r,a=[],o=!1;return function(){for(var i=[],s=0;s<arguments.length;s++)i[s]=arguments[s];return o&&n===this&&t(i,a)||(r=e.apply(this,i),o=!0,n=this,a=i),r}},dF=function(e){var t=[],n=null,r=function(){for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];t=a,n||(n=requestAnimationFrame((function(){n=null,e.apply(void 0,t)})))};return r.cancel=function(){n&&(cancelAnimationFrame(n),n=null)},r};function pF(e,t){}pF.bind(null,"warn"),pF.bind(null,"error");function hF(){}function mF(e,t,n){var r=t.map((function(t){var r=function(e,t){return QP({},e,{},t)}(n,t.options);return e.addEventListener(t.eventName,t.fn,r),function(){e.removeEventListener(t.eventName,t.fn,r)}}));return function(){r.forEach((function(e){e()}))}}var vF="Invariant failed";function gF(e){this.message=e}function yF(e,t){if(!e)throw new gF(vF)}gF.prototype.toString=function(){return this.message};var bF=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(t=e.call.apply(e,[this].concat(r))||this).callbacks=null,t.unbind=hF,t.onWindowError=function(e){var n=t.getCallbacks();n.isDragging()&&n.tryAbort(),e.error instanceof gF&&e.preventDefault()},t.getCallbacks=function(){if(!t.callbacks)throw new Error("Unable to find AppCallbacks in <ErrorBoundary/>");return t.callbacks},t.setCallbacks=function(e){t.callbacks=e},t}JP(t,e);var n=t.prototype;return n.componentDidMount=function(){this.unbind=mF(window,[{eventName:"error",fn:this.onWindowError}])},n.componentDidCatch=function(e){if(!(e instanceof gF))throw e;this.setState({})},n.componentWillUnmount=function(){this.unbind()},n.render=function(){return this.props.children(this.setCallbacks)},t}(e.Component),xF=function(e){return e+1},wF=function(e,t){var n=e.droppableId===t.droppableId,r=xF(e.index),a=xF(t.index);return n?"\n      You have moved the item from position "+r+"\n      to position "+a+"\n    ":"\n    You have moved the item from position "+r+"\n    in list "+e.droppableId+"\n    to list "+t.droppableId+"\n    in position "+a+"\n  "},kF=function(e,t,n){return t.droppableId===n.droppableId?"\n      The item "+e+"\n      has been combined with "+n.draggableId:"\n      The item "+e+"\n      in list "+t.droppableId+"\n      has been combined with "+n.draggableId+"\n      in list "+n.droppableId+"\n    "},SF=function(e){return"\n  The item has returned to its starting position\n  of "+xF(e.index)+"\n"},_F="\n  Press space bar to start a drag.\n  When dragging you can use the arrow keys to move the item around and escape to cancel.\n  Some screen readers may require you to be in focus mode or to use your pass through key\n",NF=function(e){return"\n  You have lifted an item in position "+xF(e.source.index)+"\n"},EF=function(e){var t=e.destination;if(t)return wF(e.source,t);var n=e.combine;return n?kF(e.draggableId,e.source,n):"You are over an area that cannot be dropped on"},CF=function(e){if("CANCEL"===e.reason)return"\n      Movement cancelled.\n      "+SF(e.source)+"\n    ";var t=e.destination,n=e.combine;return t?"\n      You have dropped the item.\n      "+wF(e.source,t)+"\n    ":n?"\n      You have dropped the item.\n      "+kF(e.draggableId,e.source,n)+"\n    ":"\n    The item has been dropped while not over a drop area.\n    "+SF(e.source)+"\n  "},TF={x:0,y:0},IF=function(e,t){return{x:e.x+t.x,y:e.y+t.y}},OF=function(e,t){return{x:e.x-t.x,y:e.y-t.y}},AF=function(e,t){return e.x===t.x&&e.y===t.y},DF=function(e){return{x:0!==e.x?-e.x:0,y:0!==e.y?-e.y:0}},MF=function(e,t,n){var r;return void 0===n&&(n=0),(r={})[e]=t,r["x"===e?"y":"x"]=n,r},RF=function(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))},PF=function(e,t){return Math.min.apply(Math,t.map((function(t){return RF(e,t)})))},jF=function(e){return function(t){return{x:e(t.x),y:e(t.y)}}},FF=function(e,t){return{top:e.top+t.y,left:e.left+t.x,bottom:e.bottom+t.y,right:e.right+t.x}},LF=function(e){return[{x:e.left,y:e.top},{x:e.right,y:e.top},{x:e.left,y:e.bottom},{x:e.right,y:e.bottom}]},BF=function(e,t){return t&&t.shouldClipSubject?function(e,t){var n=Jj({top:Math.max(t.top,e.top),right:Math.min(t.right,e.right),bottom:Math.min(t.bottom,e.bottom),left:Math.max(t.left,e.left)});return n.width<=0||n.height<=0?null:n}(t.pageMarginBox,e):Jj(e)},zF=function(e){var t=e.page,n=e.withPlaceholder,r=e.axis,a=e.frame,o=function(e,t){return t?FF(e,t.scroll.diff.displacement):e}(t.marginBox,a),i=function(e,t,n){var r;return n&&n.increasedBy?QP({},e,((r={})[t.end]=e[t.end]+n.increasedBy[t.line],r)):e}(o,r,n);return{page:t,withPlaceholder:n,active:BF(i,a)}},ZF=function(e,t){e.frame||yF(!1);var n=e.frame,r=OF(t,n.scroll.initial),a=DF(r),o=QP({},n,{scroll:{initial:n.scroll.initial,current:t,diff:{value:r,displacement:a},max:n.scroll.max}});return QP({},e,{frame:o,subject:zF({page:e.subject.page,withPlaceholder:e.subject.withPlaceholder,axis:e.axis,frame:o})})};function VF(e){return Object.values?Object.values(e):Object.keys(e).map((function(t){return e[t]}))}function UF(e,t){if(e.findIndex)return e.findIndex(t);for(var n=0;n<e.length;n++)if(t(e[n]))return n;return-1}function qF(e,t){if(e.find)return e.find(t);var n=UF(e,t);return-1!==n?e[n]:void 0}function WF(e){return Array.prototype.slice.call(e)}var HF=fF((function(e){return e.reduce((function(e,t){return e[t.descriptor.id]=t,e}),{})})),GF=fF((function(e){return e.reduce((function(e,t){return e[t.descriptor.id]=t,e}),{})})),KF=fF((function(e){return VF(e)})),XF=fF((function(e){return VF(e)})),YF=fF((function(e,t){var n=XF(t).filter((function(t){return e===t.descriptor.droppableId})).sort((function(e,t){return e.descriptor.index-t.descriptor.index}));return n}));function $F(e){return e.at&&"REORDER"===e.at.type?e.at.destination:null}function JF(e){return e.at&&"COMBINE"===e.at.type?e.at.combine:null}var QF=fF((function(e,t){return t.filter((function(t){return t.descriptor.id!==e.descriptor.id}))})),eL=function(e,t){return e.descriptor.droppableId===t.descriptor.id},tL={point:TF,value:0},nL={invisible:{},visible:{},all:[]},rL={displaced:nL,displacedBy:tL,at:null},aL=function(e,t){return function(n){return e<=n&&n<=t}},oL=function(e){var t=aL(e.top,e.bottom),n=aL(e.left,e.right);return function(r){if(t(r.top)&&t(r.bottom)&&n(r.left)&&n(r.right))return!0;var a=t(r.top)||t(r.bottom),o=n(r.left)||n(r.right);if(a&&o)return!0;var i=r.top<e.top&&r.bottom>e.bottom,s=r.left<e.left&&r.right>e.right;return!(!i||!s)||(i&&o||s&&a)}},iL=function(e){var t=aL(e.top,e.bottom),n=aL(e.left,e.right);return function(e){return t(e.top)&&t(e.bottom)&&n(e.left)&&n(e.right)}},sL={direction:"vertical",line:"y",crossAxisLine:"x",start:"top",end:"bottom",size:"height",crossAxisStart:"left",crossAxisEnd:"right",crossAxisSize:"width"},uL={direction:"horizontal",line:"x",crossAxisLine:"y",start:"left",end:"right",size:"width",crossAxisStart:"top",crossAxisEnd:"bottom",crossAxisSize:"height"},cL=function(e){var t=e.target,n=e.destination,r=e.viewport,a=e.withDroppableDisplacement,o=e.isVisibleThroughFrameFn,i=a?function(e,t){var n=t.frame?t.frame.scroll.diff.displacement:TF;return FF(e,n)}(t,n):t;return function(e,t,n){return!!t.subject.active&&n(t.subject.active)(e)}(i,n,o)&&function(e,t,n){return n(t)(e)}(i,r,o)},lL=function(e){return cL(QP({},e,{isVisibleThroughFrameFn:oL}))},fL=function(e){return cL(QP({},e,{isVisibleThroughFrameFn:iL}))};function dL(e){var t=e.afterDragging,n=e.destination,r=e.displacedBy,a=e.viewport,o=e.forceShouldAnimate,i=e.last;return t.reduce((function(e,t){var s=function(e,t){var n=e.page.marginBox,r={top:t.point.y,right:0,bottom:0,left:t.point.x};return Jj(Qj(n,r))}(t,r),u=t.descriptor.id;if(e.all.push(u),!lL({target:s,destination:n,viewport:a,withDroppableDisplacement:!0}))return e.invisible[t.descriptor.id]=!0,e;var c=function(e,t,n){if("boolean"===typeof n)return n;if(!t)return!0;var r=t.invisible,a=t.visible;if(r[e])return!1;var o=a[e];return!o||o.shouldAnimate}(u,i,o),l={draggableId:u,shouldAnimate:c};return e.visible[u]=l,e}),{all:[],visible:{},invisible:{}})}function pL(e){var t=e.insideDestination,n=e.inHomeList,r=e.displacedBy,a=e.destination,o=function(e,t){if(!e.length)return 0;var n=e[e.length-1].descriptor.index;return t.inHomeList?n:n+1}(t,{inHomeList:n});return{displaced:nL,displacedBy:r,at:{type:"REORDER",destination:{droppableId:a.descriptor.id,index:o}}}}function hL(e){var t=e.draggable,n=e.insideDestination,r=e.destination,a=e.viewport,o=e.displacedBy,i=e.last,s=e.index,u=e.forceShouldAnimate,c=eL(t,r);if(null==s)return pL({insideDestination:n,inHomeList:c,displacedBy:o,destination:r});var l=qF(n,(function(e){return e.descriptor.index===s}));if(!l)return pL({insideDestination:n,inHomeList:c,displacedBy:o,destination:r});var f=QF(t,n),d=n.indexOf(l);return{displaced:dL({afterDragging:f.slice(d),destination:r,displacedBy:o,last:i,viewport:a.frame,forceShouldAnimate:u}),displacedBy:o,at:{type:"REORDER",destination:{droppableId:r.descriptor.id,index:s}}}}function mL(e,t){return Boolean(t.effected[e])}var vL=function(e){var t=e.isMovingForward,n=e.isInHomeList,r=e.draggable,a=e.draggables,o=e.destination,i=e.insideDestination,s=e.previousImpact,u=e.viewport,c=e.afterCritical,l=s.at;if(l||yF(!1),"REORDER"===l.type){var f=function(e){var t=e.isMovingForward,n=e.isInHomeList,r=e.insideDestination,a=e.location;if(!r.length)return null;var o=a.index,i=t?o+1:o-1,s=r[0].descriptor.index,u=r[r.length-1].descriptor.index;return i<s||i>(n?u:u+1)?null:i}({isMovingForward:t,isInHomeList:n,location:l.destination,insideDestination:i});return null==f?null:hL({draggable:r,insideDestination:i,destination:o,viewport:u,last:s.displaced,displacedBy:s.displacedBy,index:f})}var d=function(e){var t=e.isMovingForward,n=e.destination,r=e.draggables,a=e.combine,o=e.afterCritical;if(!n.isCombineEnabled)return null;var i=a.draggableId,s=r[i].descriptor.index;return mL(i,o)?t?s:s-1:t?s+1:s}({isMovingForward:t,destination:o,displaced:s.displaced,draggables:a,combine:l.combine,afterCritical:c});return null==d?null:hL({draggable:r,insideDestination:i,destination:o,viewport:u,last:s.displaced,displacedBy:s.displacedBy,index:d})},gL=function(e){var t=e.afterCritical,n=e.impact,r=e.draggables,a=JF(n);a||yF(!1);var o=a.draggableId,i=r[o].page.borderBox.center,s=function(e){var t=e.displaced,n=e.afterCritical,r=e.combineWith,a=e.displacedBy,o=Boolean(t.visible[r]||t.invisible[r]);return mL(r,n)?o?TF:DF(a.point):o?a.point:TF}({displaced:n.displaced,afterCritical:t,combineWith:o,displacedBy:n.displacedBy});return IF(i,s)},yL=function(e,t){return t.margin[e.start]+t.borderBox[e.size]/2},bL=function(e,t,n){return t[e.crossAxisStart]+n.margin[e.crossAxisStart]+n.borderBox[e.crossAxisSize]/2},xL=function(e){var t=e.axis,n=e.moveRelativeTo,r=e.isMoving;return MF(t.line,n.marginBox[t.end]+yL(t,r),bL(t,n.marginBox,r))},wL=function(e){var t=e.axis,n=e.moveRelativeTo,r=e.isMoving;return MF(t.line,n.marginBox[t.start]-function(e,t){return t.margin[e.end]+t.borderBox[e.size]/2}(t,r),bL(t,n.marginBox,r))},kL=function(e){var t=e.impact,n=e.draggable,r=e.draggables,a=e.droppable,o=e.afterCritical,i=YF(a.descriptor.id,r),s=n.page,u=a.axis;if(!i.length)return function(e){var t=e.axis,n=e.moveInto,r=e.isMoving;return MF(t.line,n.contentBox[t.start]+yL(t,r),bL(t,n.contentBox,r))}({axis:u,moveInto:a.page,isMoving:s});var c=t.displaced,l=t.displacedBy,f=c.all[0];if(f){var d=r[f];if(mL(f,o))return wL({axis:u,moveRelativeTo:d.page,isMoving:s});var p=aF(d.page,l.point);return wL({axis:u,moveRelativeTo:p,isMoving:s})}var h=i[i.length-1];if(h.descriptor.id===n.descriptor.id)return s.borderBox.center;if(mL(h.descriptor.id,o)){var m=aF(h.page,DF(o.displacedBy.point));return xL({axis:u,moveRelativeTo:m,isMoving:s})}return xL({axis:u,moveRelativeTo:h.page,isMoving:s})},SL=function(e,t){var n=e.frame;return n?IF(t,n.scroll.diff.displacement):t},_L=function(e){var t=function(e){var t=e.impact,n=e.draggable,r=e.droppable,a=e.draggables,o=e.afterCritical,i=n.page.borderBox.center,s=t.at;return r&&s?"REORDER"===s.type?kL({impact:t,draggable:n,draggables:a,droppable:r,afterCritical:o}):gL({impact:t,draggables:a,afterCritical:o}):i}(e),n=e.droppable;return n?SL(n,t):t},NL=function(e,t){var n=OF(t,e.scroll.initial),r=DF(n);return{frame:Jj({top:t.y,bottom:t.y+e.frame.height,left:t.x,right:t.x+e.frame.width}),scroll:{initial:e.scroll.initial,max:e.scroll.max,current:t,diff:{value:n,displacement:r}}}};function EL(e,t){return e.map((function(e){return t[e]}))}var CL=function(e){var t=e.pageBorderBoxCenter,n=e.draggable,r=function(e,t){return IF(e.scroll.diff.displacement,t)}(e.viewport,t),a=OF(r,n.page.borderBox.center);return IF(n.client.borderBox.center,a)},TL=function(e){var t=e.draggable,n=e.destination,r=e.newPageBorderBoxCenter,a=e.viewport,o=e.withDroppableDisplacement,i=e.onlyOnMainAxis,s=void 0!==i&&i,u=OF(r,t.page.borderBox.center),c={target:FF(t.page.borderBox,u),destination:n,withDroppableDisplacement:o,viewport:a};return s?function(e){return cL(QP({},e,{isVisibleThroughFrameFn:(t=e.destination.axis,function(e){var n=aL(e.top,e.bottom),r=aL(e.left,e.right);return function(e){return t===sL?n(e.top)&&n(e.bottom):r(e.left)&&r(e.right)}})}));var t}(c):fL(c)},IL=function(e){var t=e.isMovingForward,n=e.draggable,r=e.destination,a=e.draggables,o=e.previousImpact,i=e.viewport,s=e.previousPageBorderBoxCenter,u=e.previousClientSelection,c=e.afterCritical;if(!r.isEnabled)return null;var l=YF(r.descriptor.id,a),f=eL(n,r),d=function(e){var t=e.isMovingForward,n=e.draggable,r=e.destination,a=e.insideDestination,o=e.previousImpact;if(!r.isCombineEnabled)return null;if(!$F(o))return null;function i(e){var t={type:"COMBINE",combine:{draggableId:e,droppableId:r.descriptor.id}};return QP({},o,{at:t})}var s=o.displaced.all,u=s.length?s[0]:null;if(t)return u?i(u):null;var c=QF(n,a);if(!u)return c.length?i(c[c.length-1].descriptor.id):null;var l=UF(c,(function(e){return e.descriptor.id===u}));-1===l&&yF(!1);var f=l-1;return f<0?null:i(c[f].descriptor.id)}({isMovingForward:t,draggable:n,destination:r,insideDestination:l,previousImpact:o})||vL({isMovingForward:t,isInHomeList:f,draggable:n,draggables:a,destination:r,insideDestination:l,previousImpact:o,viewport:i,afterCritical:c});if(!d)return null;var p=_L({impact:d,draggable:n,droppable:r,draggables:a,afterCritical:c});if(TL({draggable:n,destination:r,newPageBorderBoxCenter:p,viewport:i.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0}))return{clientSelection:CL({pageBorderBoxCenter:p,draggable:n,viewport:i}),impact:d,scrollJumpRequest:null};var h=OF(p,s),m=function(e){var t=e.impact,n=e.viewport,r=e.destination,a=e.draggables,o=e.maxScrollChange,i=NL(n,IF(n.scroll.current,o)),s=r.frame?ZF(r,IF(r.frame.scroll.current,o)):r,u=t.displaced,c=dL({afterDragging:EL(u.all,a),destination:r,displacedBy:t.displacedBy,viewport:i.frame,last:u,forceShouldAnimate:!1}),l=dL({afterDragging:EL(u.all,a),destination:s,displacedBy:t.displacedBy,viewport:n.frame,last:u,forceShouldAnimate:!1}),f={},d={},p=[u,c,l];return u.all.forEach((function(e){var t=function(e,t){for(var n=0;n<t.length;n++){var r=t[n].visible[e];if(r)return r}return null}(e,p);t?d[e]=t:f[e]=!0})),QP({},t,{displaced:{all:u.all,invisible:f,visible:d}})}({impact:d,viewport:i,destination:r,draggables:a,maxScrollChange:h});return{clientSelection:u,impact:m,scrollJumpRequest:h}},OL=function(e){var t=e.subject.active;return t||yF(!1),t},AL=function(e,t){var n=e.page.borderBox.center;return mL(e.descriptor.id,t)?OF(n,t.displacedBy.point):n},DL=function(e,t){var n=e.page.borderBox;return mL(e.descriptor.id,t)?FF(n,DF(t.displacedBy.point)):n},ML=fF((function(e,t){var n=t[e.line];return{value:n,point:MF(e.line,n)}})),RL=function(e,t){return QP({},e,{scroll:QP({},e.scroll,{max:t})})},PL=function(e,t,n){var r=e.frame;eL(t,e)&&yF(!1),e.subject.withPlaceholder&&yF(!1);var a=ML(e.axis,t.displaceBy).point,o=function(e,t,n){var r=e.axis;if("virtual"===e.descriptor.mode)return MF(r.line,t[r.line]);var a=e.subject.page.contentBox[r.size],o=YF(e.descriptor.id,n).reduce((function(e,t){return e+t.client.marginBox[r.size]}),0),i=o+t[r.line]-a;return i<=0?null:MF(r.line,i)}(e,a,n),i={placeholderSize:a,increasedBy:o,oldFrameMaxScroll:e.frame?e.frame.scroll.max:null};if(!r)return QP({},e,{subject:zF({page:e.subject.page,withPlaceholder:i,axis:e.axis,frame:e.frame})});var s=o?IF(r.scroll.max,o):r.scroll.max,u=RL(r,s);return QP({},e,{subject:zF({page:e.subject.page,withPlaceholder:i,axis:e.axis,frame:u}),frame:u})},jL=function(e){var t=e.isMovingForward,n=e.previousPageBorderBoxCenter,r=e.draggable,a=e.isOver,o=e.draggables,i=e.droppables,s=e.viewport,u=e.afterCritical,c=function(e){var t=e.isMovingForward,n=e.pageBorderBoxCenter,r=e.source,a=e.droppables,o=e.viewport,i=r.subject.active;if(!i)return null;var s=r.axis,u=aL(i[s.start],i[s.end]),c=KF(a).filter((function(e){return e!==r})).filter((function(e){return e.isEnabled})).filter((function(e){return Boolean(e.subject.active)})).filter((function(e){return oL(o.frame)(OL(e))})).filter((function(e){var n=OL(e);return t?i[s.crossAxisEnd]<n[s.crossAxisEnd]:n[s.crossAxisStart]<i[s.crossAxisStart]})).filter((function(e){var t=OL(e),n=aL(t[s.start],t[s.end]);return u(t[s.start])||u(t[s.end])||n(i[s.start])||n(i[s.end])})).sort((function(e,n){var r=OL(e)[s.crossAxisStart],a=OL(n)[s.crossAxisStart];return t?r-a:a-r})).filter((function(e,t,n){return OL(e)[s.crossAxisStart]===OL(n[0])[s.crossAxisStart]}));if(!c.length)return null;if(1===c.length)return c[0];var l=c.filter((function(e){return aL(OL(e)[s.start],OL(e)[s.end])(n[s.line])}));return 1===l.length?l[0]:l.length>1?l.sort((function(e,t){return OL(e)[s.start]-OL(t)[s.start]}))[0]:c.sort((function(e,t){var r=PF(n,LF(OL(e))),a=PF(n,LF(OL(t)));return r!==a?r-a:OL(e)[s.start]-OL(t)[s.start]}))[0]}({isMovingForward:t,pageBorderBoxCenter:n,source:a,droppables:i,viewport:s});if(!c)return null;var l=YF(c.descriptor.id,o),f=function(e){var t=e.pageBorderBoxCenter,n=e.viewport,r=e.destination,a=e.insideDestination,o=e.afterCritical,i=a.filter((function(e){return fL({target:DL(e,o),destination:r,viewport:n.frame,withDroppableDisplacement:!0})})).sort((function(e,n){var a=RF(t,SL(r,AL(e,o))),i=RF(t,SL(r,AL(n,o)));return a<i?-1:i<a?1:e.descriptor.index-n.descriptor.index}));return i[0]||null}({pageBorderBoxCenter:n,viewport:s,destination:c,insideDestination:l,afterCritical:u}),d=function(e){var t=e.previousPageBorderBoxCenter,n=e.moveRelativeTo,r=e.insideDestination,a=e.draggable,o=e.draggables,i=e.destination,s=e.viewport,u=e.afterCritical;if(!n){if(r.length)return null;var c={displaced:nL,displacedBy:tL,at:{type:"REORDER",destination:{droppableId:i.descriptor.id,index:0}}},l=_L({impact:c,draggable:a,droppable:i,draggables:o,afterCritical:u}),f=eL(a,i)?i:PL(i,a,o);return TL({draggable:a,destination:f,newPageBorderBoxCenter:l,viewport:s.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0})?c:null}var d=Boolean(t[i.axis.line]<=n.page.borderBox.center[i.axis.line]),p=function(){var e=n.descriptor.index;return n.descriptor.id===a.descriptor.id||d?e:e+1}(),h=ML(i.axis,a.displaceBy);return hL({draggable:a,insideDestination:r,destination:i,viewport:s,displacedBy:h,last:nL,index:p})}({previousPageBorderBoxCenter:n,destination:c,draggable:r,draggables:o,moveRelativeTo:f,insideDestination:l,viewport:s,afterCritical:u});if(!d)return null;var p=_L({impact:d,draggable:r,droppable:c,draggables:o,afterCritical:u});return{clientSelection:CL({pageBorderBoxCenter:p,draggable:r,viewport:s}),impact:d,scrollJumpRequest:null}},FL=function(e){var t=e.at;return t?"REORDER"===t.type?t.destination.droppableId:t.combine.droppableId:null},LL=function(e){var t=e.state,n=e.type,r=function(e,t){var n=FL(e);return n?t[n]:null}(t.impact,t.dimensions.droppables),a=Boolean(r),o=t.dimensions.droppables[t.critical.droppable.id],i=r||o,s=i.axis.direction,u="vertical"===s&&("MOVE_UP"===n||"MOVE_DOWN"===n)||"horizontal"===s&&("MOVE_LEFT"===n||"MOVE_RIGHT"===n);if(u&&!a)return null;var c="MOVE_DOWN"===n||"MOVE_RIGHT"===n,l=t.dimensions.draggables[t.critical.draggable.id],f=t.current.page.borderBoxCenter,d=t.dimensions,p=d.draggables,h=d.droppables;return u?IL({isMovingForward:c,previousPageBorderBoxCenter:f,draggable:l,destination:i,draggables:p,viewport:t.viewport,previousClientSelection:t.current.client.selection,previousImpact:t.impact,afterCritical:t.afterCritical}):jL({isMovingForward:c,previousPageBorderBoxCenter:f,draggable:l,isOver:i,draggables:p,droppables:h,viewport:t.viewport,afterCritical:t.afterCritical})};function BL(e){return"DRAGGING"===e.phase||"COLLECTING"===e.phase}function zL(e){var t=aL(e.top,e.bottom),n=aL(e.left,e.right);return function(e){return t(e.y)&&n(e.x)}}function ZL(e){var t=e.pageBorderBox,n=e.draggable,r=e.droppables,a=KF(r).filter((function(e){if(!e.isEnabled)return!1;var n=e.subject.active;if(!n)return!1;if(!function(e,t){return e.left<t.right&&e.right>t.left&&e.top<t.bottom&&e.bottom>t.top}(t,n))return!1;if(zL(n)(t.center))return!0;var r=e.axis,a=n.center[r.crossAxisLine],o=t[r.crossAxisStart],i=t[r.crossAxisEnd],s=aL(n[r.crossAxisStart],n[r.crossAxisEnd]),u=s(o),c=s(i);return!u&&!c||(u?o<a:i>a)}));return a.length?1===a.length?a[0].descriptor.id:function(e){var t=e.pageBorderBox,n=e.draggable,r=e.candidates,a=n.page.borderBox.center,o=r.map((function(e){var n=e.axis,r=MF(e.axis.line,t.center[n.line],e.page.borderBox.center[n.crossAxisLine]);return{id:e.descriptor.id,distance:RF(a,r)}})).sort((function(e,t){return t.distance-e.distance}));return o[0]?o[0].id:null}({pageBorderBox:t,draggable:n,candidates:a}):null}var VL=function(e,t){return Jj(FF(e,t))};function UL(e){var t=e.displaced,n=e.id;return Boolean(t.visible[n]||t.invisible[n])}var qL=function(e){var t=e.pageOffset,n=e.draggable,r=e.draggables,a=e.droppables,o=e.previousImpact,i=e.viewport,s=e.afterCritical,u=VL(n.page.borderBox,t),c=ZL({pageBorderBox:u,draggable:n,droppables:a});if(!c)return rL;var l=a[c],f=YF(l.descriptor.id,r),d=function(e,t){var n=e.frame;return n?VL(t,n.scroll.diff.value):t}(l,u);return function(e){var t=e.draggable,n=e.pageBorderBoxWithDroppableScroll,r=e.previousImpact,a=e.destination,o=e.insideDestination,i=e.afterCritical;if(!a.isCombineEnabled)return null;var s=a.axis,u=ML(a.axis,t.displaceBy),c=u.value,l=n[s.start],f=n[s.end],d=qF(QF(t,o),(function(e){var t=e.descriptor.id,n=e.page.borderBox,a=n[s.size]/4,o=mL(t,i),u=UL({displaced:r.displaced,id:t});return o?u?f>n[s.start]+a&&f<n[s.end]-a:l>n[s.start]-c+a&&l<n[s.end]-c-a:u?f>n[s.start]+c+a&&f<n[s.end]+c-a:l>n[s.start]+a&&l<n[s.end]-a}));return d?{displacedBy:u,displaced:r.displaced,at:{type:"COMBINE",combine:{draggableId:d.descriptor.id,droppableId:a.descriptor.id}}}:null}({pageBorderBoxWithDroppableScroll:d,draggable:n,previousImpact:o,destination:l,insideDestination:f,afterCritical:s})||function(e){var t=e.pageBorderBoxWithDroppableScroll,n=e.draggable,r=e.destination,a=e.insideDestination,o=e.last,i=e.viewport,s=e.afterCritical,u=r.axis,c=ML(r.axis,n.displaceBy),l=c.value,f=t[u.start],d=t[u.end],p=qF(QF(n,a),(function(e){var t=e.descriptor.id,n=e.page.borderBox.center[u.line],r=mL(t,s),a=UL({displaced:o,id:t});return r?a?d<=n:f<n-l:a?d<=n+l:f<n})),h=function(e){var t=e.draggable,n=e.closest,r=e.inHomeList;return n?r&&n.descriptor.index>t.descriptor.index?n.descriptor.index-1:n.descriptor.index:null}({draggable:n,closest:p,inHomeList:eL(n,r)});return hL({draggable:n,insideDestination:a,destination:r,viewport:i,last:o,displacedBy:c,index:h})}({pageBorderBoxWithDroppableScroll:d,draggable:n,destination:l,insideDestination:f,last:o.displaced,viewport:i,afterCritical:s})},WL=function(e,t){var n;return QP({},e,((n={})[t.descriptor.id]=t,n))},HL=function(e){var t=e.previousImpact,n=e.impact,r=e.droppables,a=FL(t),o=FL(n);if(!a)return r;if(a===o)return r;var i=r[a];if(!i.subject.withPlaceholder)return r;var s=function(e){var t=e.subject.withPlaceholder;t||yF(!1);var n=e.frame;if(!n)return QP({},e,{subject:zF({page:e.subject.page,axis:e.axis,frame:null,withPlaceholder:null})});var r=t.oldFrameMaxScroll;r||yF(!1);var a=RL(n,r);return QP({},e,{subject:zF({page:e.subject.page,axis:e.axis,frame:a,withPlaceholder:null}),frame:a})}(i);return WL(r,s)},GL=function(e){var t=e.state,n=e.clientSelection,r=e.dimensions,a=e.viewport,o=e.impact,i=e.scrollJumpRequest,s=a||t.viewport,u=r||t.dimensions,c=n||t.current.client.selection,l=OF(c,t.initial.client.selection),f={offset:l,selection:c,borderBoxCenter:IF(t.initial.client.borderBoxCenter,l)},d={selection:IF(f.selection,s.scroll.current),borderBoxCenter:IF(f.borderBoxCenter,s.scroll.current),offset:IF(f.offset,s.scroll.diff.value)},p={client:f,page:d};if("COLLECTING"===t.phase)return QP({phase:"COLLECTING"},t,{dimensions:u,viewport:s,current:p});var h=u.draggables[t.critical.draggable.id],m=o||qL({pageOffset:d.offset,draggable:h,draggables:u.draggables,droppables:u.droppables,previousImpact:t.impact,viewport:s,afterCritical:t.afterCritical}),v=function(e){var t=e.draggable,n=e.draggables,r=e.droppables,a=e.previousImpact,o=e.impact,i=HL({previousImpact:a,impact:o,droppables:r}),s=FL(o);if(!s)return i;var u=r[s];if(eL(t,u))return i;if(u.subject.withPlaceholder)return i;var c=PL(u,t,n);return WL(i,c)}({draggable:h,impact:m,previousImpact:t.impact,draggables:u.draggables,droppables:u.droppables});return QP({},t,{current:p,dimensions:{draggables:u.draggables,droppables:v},impact:m,viewport:s,scrollJumpRequest:i||null,forceShouldAnimate:!i&&null})};var KL=function(e){var t=e.impact,n=e.viewport,r=e.draggables,a=e.destination,o=e.forceShouldAnimate,i=t.displaced,s=function(e,t){return e.map((function(e){return t[e]}))}(i.all,r);return QP({},t,{displaced:dL({afterDragging:s,destination:a,displacedBy:t.displacedBy,viewport:n.frame,forceShouldAnimate:o,last:i})})},XL=function(e){var t=e.impact,n=e.draggable,r=e.droppable,a=e.draggables,o=e.viewport,i=e.afterCritical,s=_L({impact:t,draggable:n,draggables:a,droppable:r,afterCritical:i});return CL({pageBorderBoxCenter:s,draggable:n,viewport:o})},YL=function(e){var t=e.state,n=e.dimensions,r=e.viewport;"SNAP"!==t.movementMode&&yF(!1);var a=t.impact,o=r||t.viewport,i=n||t.dimensions,s=i.draggables,u=i.droppables,c=s[t.critical.draggable.id],l=FL(a);l||yF(!1);var f=u[l],d=KL({impact:a,viewport:o,destination:f,draggables:s}),p=XL({impact:d,draggable:c,droppable:f,draggables:s,viewport:o,afterCritical:t.afterCritical});return GL({impact:d,clientSelection:p,state:t,dimensions:i,viewport:o})},$L=function(e){var t=e.draggable,n=e.home,r=e.draggables,a=e.viewport,o=ML(n.axis,t.displaceBy),i=YF(n.descriptor.id,r),s=i.indexOf(t);-1===s&&yF(!1);var u,c=i.slice(s+1),l=c.reduce((function(e,t){return e[t.descriptor.id]=!0,e}),{}),f={inVirtualList:"virtual"===n.descriptor.mode,displacedBy:o,effected:l};return{impact:{displaced:dL({afterDragging:c,destination:n,displacedBy:o,last:null,viewport:a.frame,forceShouldAnimate:!1}),displacedBy:o,at:{type:"REORDER",destination:(u=t.descriptor,{index:u.index,droppableId:u.droppableId})}},afterCritical:f}},JL=function(e){0},QL=function(e){0},eB=function(e){var t=e.additions,n=e.updatedDroppables,r=e.viewport,a=r.scroll.diff.value;return t.map((function(e){var t=e.descriptor.droppableId,o=function(e){var t=e.frame;return t||yF(!1),t}(n[t]),i=o.scroll.diff.value,s=function(e){var t=e.draggable,n=e.offset,r=e.initialWindowScroll,a=aF(t.client,n),o=oF(a,r);return QP({},t,{placeholder:QP({},t.placeholder,{client:a}),client:a,page:o})}({draggable:e,offset:IF(a,i),initialWindowScroll:r.scroll.initial});return s}))},tB=function(e){return"SNAP"===e.movementMode},nB=function(e,t,n){var r=function(e,t){return{draggables:e.draggables,droppables:WL(e.droppables,t)}}(e.dimensions,t);return!tB(e)||n?GL({state:e,dimensions:r}):YL({state:e,dimensions:r})};function rB(e){return e.isDragging&&"SNAP"===e.movementMode?QP({phase:"DRAGGING"},e,{scrollJumpRequest:null}):e}var aB={phase:"IDLE",completed:null,shouldFlush:!1},oB=function(e,t){if(void 0===e&&(e=aB),"FLUSH"===t.type)return QP({},aB,{shouldFlush:!0});if("INITIAL_PUBLISH"===t.type){"IDLE"!==e.phase&&yF(!1);var n=t.payload,r=n.critical,a=n.clientSelection,o=n.viewport,i=n.dimensions,s=n.movementMode,u=i.draggables[r.draggable.id],c=i.droppables[r.droppable.id],l={selection:a,borderBoxCenter:u.client.borderBox.center,offset:TF},f={client:l,page:{selection:IF(l.selection,o.scroll.initial),borderBoxCenter:IF(l.selection,o.scroll.initial),offset:IF(l.selection,o.scroll.diff.value)}},d=KF(i.droppables).every((function(e){return!e.isFixedOnPage})),p=$L({draggable:u,home:c,draggables:i.draggables,viewport:o}),h=p.impact;return{phase:"DRAGGING",isDragging:!0,critical:r,movementMode:s,dimensions:i,initial:f,current:f,isWindowScrollAllowed:d,impact:h,afterCritical:p.afterCritical,onLiftImpact:h,viewport:o,scrollJumpRequest:null,forceShouldAnimate:null}}if("COLLECTION_STARTING"===t.type)return"COLLECTING"===e.phase||"DROP_PENDING"===e.phase?e:("DRAGGING"!==e.phase&&yF(!1),QP({phase:"COLLECTING"},e,{phase:"COLLECTING"}));if("PUBLISH_WHILE_DRAGGING"===t.type)return"COLLECTING"!==e.phase&&"DROP_PENDING"!==e.phase&&yF(!1),function(e){var t=e.state,n=e.published;JL();var r=n.modified.map((function(e){var n=t.dimensions.droppables[e.droppableId];return ZF(n,e.scroll)})),a=QP({},t.dimensions.droppables,{},HF(r)),o=GF(eB({additions:n.additions,updatedDroppables:a,viewport:t.viewport})),i=QP({},t.dimensions.draggables,{},o);n.removals.forEach((function(e){delete i[e]}));var s={droppables:a,draggables:i},u=FL(t.impact),c=u?s.droppables[u]:null,l=s.draggables[t.critical.draggable.id],f=s.droppables[t.critical.droppable.id],d=$L({draggable:l,home:f,draggables:i,viewport:t.viewport}),p=d.impact,h=d.afterCritical,m=c&&c.isCombineEnabled?t.impact:p,v=qL({pageOffset:t.current.page.offset,draggable:s.draggables[t.critical.draggable.id],draggables:s.draggables,droppables:s.droppables,previousImpact:m,viewport:t.viewport,afterCritical:h});QL();var g=QP({phase:"DRAGGING"},t,{phase:"DRAGGING",impact:v,onLiftImpact:p,dimensions:s,afterCritical:h,forceShouldAnimate:!1});return"COLLECTING"===t.phase?g:QP({phase:"DROP_PENDING"},g,{phase:"DROP_PENDING",reason:t.reason,isWaiting:!1})}({state:e,published:t.payload});if("MOVE"===t.type){if("DROP_PENDING"===e.phase)return e;BL(e)||yF(!1);var m=t.payload.client;return AF(m,e.current.client.selection)?e:GL({state:e,clientSelection:m,impact:tB(e)?e.impact:null})}if("UPDATE_DROPPABLE_SCROLL"===t.type){if("DROP_PENDING"===e.phase)return rB(e);if("COLLECTING"===e.phase)return rB(e);BL(e)||yF(!1);var v=t.payload,g=v.id,y=v.newScroll,b=e.dimensions.droppables[g];if(!b)return e;var x=ZF(b,y);return nB(e,x,!1)}if("UPDATE_DROPPABLE_IS_ENABLED"===t.type){if("DROP_PENDING"===e.phase)return e;BL(e)||yF(!1);var w=t.payload,k=w.id,S=w.isEnabled,_=e.dimensions.droppables[k];_||yF(!1),_.isEnabled===S&&yF(!1);var N=QP({},_,{isEnabled:S});return nB(e,N,!0)}if("UPDATE_DROPPABLE_IS_COMBINE_ENABLED"===t.type){if("DROP_PENDING"===e.phase)return e;BL(e)||yF(!1);var E=t.payload,C=E.id,T=E.isCombineEnabled,I=e.dimensions.droppables[C];I||yF(!1),I.isCombineEnabled===T&&yF(!1);var O=QP({},I,{isCombineEnabled:T});return nB(e,O,!0)}if("MOVE_BY_WINDOW_SCROLL"===t.type){if("DROP_PENDING"===e.phase||"DROP_ANIMATING"===e.phase)return e;BL(e)||yF(!1),e.isWindowScrollAllowed||yF(!1);var A=t.payload.newScroll;if(AF(e.viewport.scroll.current,A))return rB(e);var D=NL(e.viewport,A);return tB(e)?YL({state:e,viewport:D}):GL({state:e,viewport:D})}if("UPDATE_VIEWPORT_MAX_SCROLL"===t.type){if(!BL(e))return e;var M=t.payload.maxScroll;if(AF(M,e.viewport.scroll.max))return e;var R=QP({},e.viewport,{scroll:QP({},e.viewport.scroll,{max:M})});return QP({phase:"DRAGGING"},e,{viewport:R})}if("MOVE_UP"===t.type||"MOVE_DOWN"===t.type||"MOVE_LEFT"===t.type||"MOVE_RIGHT"===t.type){if("COLLECTING"===e.phase||"DROP_PENDING"===e.phase)return e;"DRAGGING"!==e.phase&&yF(!1);var P=LL({state:e,type:t.type});return P?GL({state:e,impact:P.impact,clientSelection:P.clientSelection,scrollJumpRequest:P.scrollJumpRequest}):e}if("DROP_PENDING"===t.type){var j=t.payload.reason;return"COLLECTING"!==e.phase&&yF(!1),QP({phase:"DROP_PENDING"},e,{phase:"DROP_PENDING",isWaiting:!0,reason:j})}if("DROP_ANIMATE"===t.type){var F=t.payload,L=F.completed,B=F.dropDuration,z=F.newHomeClientOffset;return"DRAGGING"!==e.phase&&"DROP_PENDING"!==e.phase&&yF(!1),{phase:"DROP_ANIMATING",completed:L,dropDuration:B,newHomeClientOffset:z,dimensions:e.dimensions}}return"DROP_COMPLETE"===t.type?{phase:"IDLE",completed:t.payload.completed,shouldFlush:!1}:e},iB=function(e){return{type:"PUBLISH_WHILE_DRAGGING",payload:e}},sB=function(){return{type:"COLLECTION_STARTING",payload:null}},uB=function(e){return{type:"UPDATE_DROPPABLE_SCROLL",payload:e}},cB=function(e){return{type:"UPDATE_DROPPABLE_IS_ENABLED",payload:e}},lB=function(e){return{type:"UPDATE_DROPPABLE_IS_COMBINE_ENABLED",payload:e}},fB=function(e){return{type:"MOVE",payload:e}},dB=function(){return{type:"MOVE_UP",payload:null}},pB=function(){return{type:"MOVE_DOWN",payload:null}},hB=function(){return{type:"MOVE_RIGHT",payload:null}},mB=function(){return{type:"MOVE_LEFT",payload:null}},vB=function(e){return{type:"DROP_COMPLETE",payload:e}},gB=function(e){return{type:"DROP",payload:e}},yB=function(){return{type:"DROP_ANIMATION_FINISHED",payload:null}};var bB="cubic-bezier(.2,1,.1,1)",xB={drop:0,combining:.7},wB={drop:.75},kB=.2+"s "+"cubic-bezier(0.2, 0, 0, 1)",SB={fluid:"opacity "+kB,snap:"transform "+kB+", opacity "+kB,drop:function(e){var t=e+"s "+bB;return"transform "+t+", opacity "+t},outOfTheWay:"transform "+kB,placeholder:"height "+kB+", width "+kB+", margin "+kB},_B=function(e){return AF(e,TF)?null:"translate("+e.x+"px, "+e.y+"px)"},NB=_B,EB=function(e,t){var n=_B(e);return n?t?n+" scale("+wB.drop+")":n:null},CB=.33,TB=.55,IB=TB-CB,OB=function(e){var t=e.getState,n=e.dispatch;return function(e){return function(r){if("DROP"===r.type){var a=t(),o=r.payload.reason;if("COLLECTING"!==a.phase){if("IDLE"!==a.phase){"DROP_PENDING"===a.phase&&a.isWaiting&&yF(!1),"DRAGGING"!==a.phase&&"DROP_PENDING"!==a.phase&&yF(!1);var i=a.critical,s=a.dimensions,u=s.draggables[a.critical.draggable.id],c=function(e){var t=e.draggables,n=e.reason,r=e.lastImpact,a=e.home,o=e.viewport,i=e.onLiftImpact;return r.at&&"DROP"===n?"REORDER"===r.at.type?{impact:r,didDropInsideDroppable:!0}:{impact:QP({},r,{displaced:nL}),didDropInsideDroppable:!0}:{impact:KL({draggables:t,impact:i,destination:a,viewport:o,forceShouldAnimate:!0}),didDropInsideDroppable:!1}}({reason:o,lastImpact:a.impact,afterCritical:a.afterCritical,onLiftImpact:a.onLiftImpact,home:a.dimensions.droppables[a.critical.droppable.id],viewport:a.viewport,draggables:a.dimensions.draggables}),l=c.impact,f=c.didDropInsideDroppable,d=f?$F(l):null,p=f?JF(l):null,h={index:i.draggable.index,droppableId:i.droppable.id},m={draggableId:u.descriptor.id,type:u.descriptor.type,source:h,reason:o,mode:a.movementMode,destination:d,combine:p},v=function(e){var t=e.impact,n=e.draggable,r=e.dimensions,a=e.viewport,o=e.afterCritical,i=r.draggables,s=r.droppables,u=FL(t),c=u?s[u]:null,l=s[n.descriptor.droppableId],f=XL({impact:t,draggable:n,draggables:i,afterCritical:o,droppable:c||l,viewport:a});return OF(f,n.client.borderBox.center)}({impact:l,draggable:u,dimensions:s,viewport:a.viewport,afterCritical:a.afterCritical}),g={critical:a.critical,afterCritical:a.afterCritical,result:m,impact:l};if(!AF(a.current.client.offset,v)||Boolean(m.combine)){var y=function(e){var t=e.current,n=e.destination,r=e.reason,a=RF(t,n);if(a<=0)return CB;if(a>=1500)return TB;var o=CB+IB*(a/1500);return Number(("CANCEL"===r?.6*o:o).toFixed(2))}({current:a.current.client.offset,destination:v,reason:o});n(function(e){return{type:"DROP_ANIMATE",payload:e}}({newHomeClientOffset:v,dropDuration:y,completed:g}))}else n(vB({completed:g}))}}else n(function(e){return{type:"DROP_PENDING",payload:e}}({reason:o}))}else e(r)}}},AB=function(){return{x:window.pageXOffset,y:window.pageYOffset}};function DB(e){var t=e.onWindowScroll;var n=dF((function(){t(AB())})),r=function(e){return{eventName:"scroll",options:{passive:!0,capture:!1},fn:function(t){t.target!==window&&t.target!==window.document||e()}}}(n),a=hF;function o(){return a!==hF}return{start:function(){o()&&yF(!1),a=mF(window,[r])},stop:function(){o()||yF(!1),n.cancel(),a(),a=hF},isActive:o}}var MB=function(e){var t=DB({onWindowScroll:function(t){e.dispatch({type:"MOVE_BY_WINDOW_SCROLL",payload:{newScroll:t}})}});return function(e){return function(n){t.isActive()||"INITIAL_PUBLISH"!==n.type||t.start(),t.isActive()&&function(e){return"DROP_COMPLETE"===e.type||"DROP_ANIMATE"===e.type||"FLUSH"===e.type}(n)&&t.stop(),e(n)}}},RB=function(){var e=[];return{add:function(t){var n=setTimeout((function(){return function(t){var n=UF(e,(function(e){return e.timerId===t}));-1===n&&yF(!1),e.splice(n,1)[0].callback()}(n)})),r={timerId:n,callback:t};e.push(r)},flush:function(){if(e.length){var t=[].concat(e);e.length=0,t.forEach((function(e){clearTimeout(e.timerId),e.callback()}))}}}},PB=function(e,t){JL(),t(),QL()},jB=function(e,t){return{draggableId:e.draggable.id,type:e.droppable.type,source:{droppableId:e.droppable.id,index:e.draggable.index},mode:t}},FB=function(e,t,n,r){if(e){var a=function(e){var t=!1,n=!1,r=setTimeout((function(){n=!0})),a=function(a){t||n||(t=!0,e(a),clearTimeout(r))};return a.wasCalled=function(){return t},a}(n);e(t,{announce:a}),a.wasCalled()||n(r(t))}else n(r(t))},LB=function(e,t){var n=function(e,t){var n=RB(),r=null,a=function(n){r||yF(!1),r=null,PB(0,(function(){return FB(e().onDragEnd,n,t,CF)}))};return{beforeCapture:function(t,n){r&&yF(!1),PB(0,(function(){var r=e().onBeforeCapture;r&&r({draggableId:t,mode:n})}))},beforeStart:function(t,n){r&&yF(!1),PB(0,(function(){var r=e().onBeforeDragStart;r&&r(jB(t,n))}))},start:function(a,o){r&&yF(!1);var i=jB(a,o);r={mode:o,lastCritical:a,lastLocation:i.source,lastCombine:null},n.add((function(){PB(0,(function(){return FB(e().onDragStart,i,t,NF)}))}))},update:function(a,o){var i=$F(o),s=JF(o);r||yF(!1);var u=!function(e,t){if(e===t)return!0;var n=e.draggable.id===t.draggable.id&&e.draggable.droppableId===t.draggable.droppableId&&e.draggable.type===t.draggable.type&&e.draggable.index===t.draggable.index,r=e.droppable.id===t.droppable.id&&e.droppable.type===t.droppable.type;return n&&r}(a,r.lastCritical);u&&(r.lastCritical=a);var c=!function(e,t){return null==e&&null==t||null!=e&&null!=t&&e.droppableId===t.droppableId&&e.index===t.index}(r.lastLocation,i);c&&(r.lastLocation=i);var l=!function(e,t){return null==e&&null==t||null!=e&&null!=t&&e.draggableId===t.draggableId&&e.droppableId===t.droppableId}(r.lastCombine,s);if(l&&(r.lastCombine=s),u||c||l){var f=QP({},jB(a,r.mode),{combine:s,destination:i});n.add((function(){PB(0,(function(){return FB(e().onDragUpdate,f,t,EF)}))}))}},flush:function(){r||yF(!1),n.flush()},drop:a,abort:function(){if(r){var e=QP({},jB(r.lastCritical,r.mode),{combine:null,destination:null,reason:"CANCEL"});a(e)}}}}(e,t);return function(e){return function(t){return function(r){if("BEFORE_INITIAL_CAPTURE"!==r.type){if("INITIAL_PUBLISH"===r.type){var a=r.payload.critical;return n.beforeStart(a,r.payload.movementMode),t(r),void n.start(a,r.payload.movementMode)}if("DROP_COMPLETE"===r.type){var o=r.payload.completed.result;return n.flush(),t(r),void n.drop(o)}if(t(r),"FLUSH"!==r.type){var i=e.getState();"DRAGGING"===i.phase&&n.update(i.critical,i.impact)}else n.abort()}else n.beforeCapture(r.payload.draggableId,r.payload.movementMode)}}}},BB=function(e){return function(t){return function(n){if("DROP_ANIMATION_FINISHED"===n.type){var r=e.getState();"DROP_ANIMATING"!==r.phase&&yF(!1),e.dispatch(vB({completed:r.completed}))}else t(n)}}},zB=function(e){var t=null,n=null;return function(r){return function(a){if("FLUSH"!==a.type&&"DROP_COMPLETE"!==a.type&&"DROP_ANIMATION_FINISHED"!==a.type||(n&&(cancelAnimationFrame(n),n=null),t&&(t(),t=null)),r(a),"DROP_ANIMATE"===a.type){var o={eventName:"scroll",options:{capture:!0,passive:!1,once:!0},fn:function(){"DROP_ANIMATING"===e.getState().phase&&e.dispatch({type:"DROP_ANIMATION_FINISHED",payload:null})}};n=requestAnimationFrame((function(){n=null,t=mF(window,[o])}))}}}},ZB=function(e){return function(t){return function(n){if(t(n),"PUBLISH_WHILE_DRAGGING"===n.type){var r=e.getState();"DROP_PENDING"===r.phase&&(r.isWaiting||e.dispatch(gB({reason:r.reason})))}}}},VB=uj,UB=function(e){var t,n=e.dimensionMarshal,r=e.focusMarshal,a=e.styleMarshal,o=e.getResponders,i=e.announce,s=e.autoScroller;return oj(oB,VB(function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){return function(){var n=e.apply(void 0,arguments),r=function(){throw new Error(ej(15))},a={getState:n.getState,dispatch:function(){return r.apply(void 0,arguments)}},o=t.map((function(e){return e(a)}));return r=uj.apply(void 0,o)(n.dispatch),u(u({},n),{},{dispatch:r})}}}((t=a,function(){return function(e){return function(n){"INITIAL_PUBLISH"===n.type&&t.dragging(),"DROP_ANIMATE"===n.type&&t.dropping(n.payload.completed.result.reason),"FLUSH"!==n.type&&"DROP_COMPLETE"!==n.type||t.resting(),e(n)}}}),function(e){return function(){return function(t){return function(n){"DROP_COMPLETE"!==n.type&&"FLUSH"!==n.type&&"DROP_ANIMATE"!==n.type||e.stopPublishing(),t(n)}}}}(n),function(e){return function(t){var n=t.getState,r=t.dispatch;return function(t){return function(a){if("LIFT"===a.type){var o=a.payload,i=o.id,s=o.clientSelection,u=o.movementMode,c=n();"DROP_ANIMATING"===c.phase&&r(vB({completed:c.completed})),"IDLE"!==n().phase&&yF(!1),r({type:"FLUSH",payload:null}),r({type:"BEFORE_INITIAL_CAPTURE",payload:{draggableId:i,movementMode:u}});var l={draggableId:i,scrollOptions:{shouldPublishImmediately:"SNAP"===u}},f=e.startPublishing(l),d=f.critical,p=f.dimensions,h=f.viewport;r({type:"INITIAL_PUBLISH",payload:{critical:d,dimensions:p,clientSelection:s,movementMode:u,viewport:h}})}else t(a)}}}}(n),OB,BB,zB,ZB,function(e){return function(t){return function(n){return function(r){if(function(e){return"DROP_COMPLETE"===e.type||"DROP_ANIMATE"===e.type||"FLUSH"===e.type}(r))return e.stop(),void n(r);if("INITIAL_PUBLISH"===r.type){n(r);var a=t.getState();return"DRAGGING"!==a.phase&&yF(!1),void e.start(a)}n(r),e.scroll(t.getState())}}}}(s),MB,function(e){var t=!1;return function(){return function(n){return function(r){if("INITIAL_PUBLISH"===r.type)return t=!0,e.tryRecordFocus(r.payload.critical.draggable.id),n(r),void e.tryRestoreFocusRecorded();if(n(r),t){if("FLUSH"===r.type)return t=!1,void e.tryRestoreFocusRecorded();if("DROP_COMPLETE"===r.type){t=!1;var a=r.payload.completed.result;a.combine&&e.tryShiftRecord(a.draggableId,a.combine.draggableId),e.tryRestoreFocusRecorded()}}}}}}(r),LB(o,i))))};var qB=function(e){var t=e.scrollHeight,n=e.scrollWidth,r=e.height,a=e.width,o=OF({x:n,y:t},{x:a,y:r});return{x:Math.max(0,o.x),y:Math.max(0,o.y)}},WB=function(){var e=document.documentElement;return e||yF(!1),e},HB=function(){var e=WB();return qB({scrollHeight:e.scrollHeight,scrollWidth:e.scrollWidth,width:e.clientWidth,height:e.clientHeight})},GB=function(e){var t=e.critical,n=e.scrollOptions,r=e.registry;JL();var a=function(){var e=AB(),t=HB(),n=e.y,r=e.x,a=WB(),o=a.clientWidth,i=a.clientHeight;return{frame:Jj({top:n,left:r,right:r+o,bottom:n+i}),scroll:{initial:e,current:e,max:t,diff:{value:TF,displacement:TF}}}}(),o=a.scroll.current,i=t.droppable,s=r.droppable.getAllByType(i.type).map((function(e){return e.callbacks.getDimensionAndWatchScroll(o,n)})),u=r.draggable.getAllByType(t.draggable.type).map((function(e){return e.getDimension(o)})),c={draggables:GF(u),droppables:HF(s)};return QL(),{dimensions:c,critical:t,viewport:a}};function KB(e,t,n){return n.descriptor.id!==t.id&&(n.descriptor.type===t.type&&"virtual"===e.droppable.getById(n.descriptor.droppableId).descriptor.mode)}var XB=function(e,t){var n=null,r=function(e){var t=e.registry,n=e.callbacks,r={additions:{},removals:{},modified:{}},a=null,o=function(){a||(n.collectionStarting(),a=requestAnimationFrame((function(){a=null,JL();var e=r,o=e.additions,i=e.removals,s=e.modified,u=Object.keys(o).map((function(e){return t.draggable.getById(e).getDimension(TF)})).sort((function(e,t){return e.descriptor.index-t.descriptor.index})),c=Object.keys(s).map((function(e){return{droppableId:e,scroll:t.droppable.getById(e).callbacks.getScrollWhileDragging()}})),l={additions:u,removals:Object.keys(i),modified:c};r={additions:{},removals:{},modified:{}},QL(),n.publish(l)})))};return{add:function(e){var t=e.descriptor.id;r.additions[t]=e,r.modified[e.descriptor.droppableId]=!0,r.removals[t]&&delete r.removals[t],o()},remove:function(e){var t=e.descriptor;r.removals[t.id]=!0,r.modified[t.droppableId]=!0,r.additions[t.id]&&delete r.additions[t.id],o()},stop:function(){a&&(cancelAnimationFrame(a),a=null,r={additions:{},removals:{},modified:{}})}}}({callbacks:{publish:t.publishWhileDragging,collectionStarting:t.collectionStarting},registry:e}),a=function(t){n||yF(!1);var a=n.critical.draggable;"ADDITION"===t.type&&KB(e,a,t.value)&&r.add(t.value),"REMOVAL"===t.type&&KB(e,a,t.value)&&r.remove(t.value)},o={updateDroppableIsEnabled:function(r,a){e.droppable.exists(r)||yF(!1),n&&t.updateDroppableIsEnabled({id:r,isEnabled:a})},updateDroppableIsCombineEnabled:function(r,a){n&&(e.droppable.exists(r)||yF(!1),t.updateDroppableIsCombineEnabled({id:r,isCombineEnabled:a}))},scrollDroppable:function(t,r){n&&e.droppable.getById(t).callbacks.scroll(r)},updateDroppableScroll:function(r,a){n&&(e.droppable.exists(r)||yF(!1),t.updateDroppableScroll({id:r,newScroll:a}))},startPublishing:function(t){n&&yF(!1);var r=e.draggable.getById(t.draggableId),o=e.droppable.getById(r.descriptor.droppableId),i={draggable:r.descriptor,droppable:o.descriptor},s=e.subscribe(a);return n={critical:i,unsubscribe:s},GB({critical:i,registry:e,scrollOptions:t.scrollOptions})},stopPublishing:function(){if(n){r.stop();var t=n.critical.droppable;e.droppable.getAllByType(t.type).forEach((function(e){return e.callbacks.dragStopped()})),n.unsubscribe(),n=null}}};return o},YB=function(e,t){return"IDLE"===e.phase||"DROP_ANIMATING"===e.phase&&(e.completed.result.draggableId!==t&&"DROP"===e.completed.result.reason)},$B=function(e){window.scrollBy(e.x,e.y)},JB=fF((function(e){return KF(e).filter((function(e){return!!e.isEnabled&&!!e.frame}))})),QB=function(e){var t=e.center,n=e.destination,r=e.droppables;if(n){var a=r[n];return a.frame?a:null}var o=function(e,t){var n=qF(JB(t),(function(t){return t.frame||yF(!1),zL(t.frame.pageMarginBox)(e)}));return n}(t,r);return o},ez=.25,tz=.05,nz=28,rz=function(e){return Math.pow(e,2)},az={stopDampeningAt:1200,accelerateAt:360},oz=function(e){var t=e.startOfRange,n=e.endOfRange,r=e.current,a=n-t;return 0===a?0:(r-t)/a},iz=az.accelerateAt,sz=az.stopDampeningAt,uz=function(e){var t=e.distanceToEdge,n=e.thresholds,r=e.dragStartTime,a=e.shouldUseTimeDampening,o=function(e,t){if(e>t.startScrollingFrom)return 0;if(e<=t.maxScrollValueAt)return nz;if(e===t.startScrollingFrom)return 1;var n=oz({startOfRange:t.maxScrollValueAt,endOfRange:t.startScrollingFrom,current:e}),r=nz*rz(1-n);return Math.ceil(r)}(t,n);return 0===o?0:a?Math.max(function(e,t){var n=t,r=sz,a=Date.now()-n;if(a>=sz)return e;if(a<iz)return 1;var o=oz({startOfRange:iz,endOfRange:r,current:a}),i=e*rz(o);return Math.ceil(i)}(o,r),1):o},cz=function(e){var t=e.container,n=e.distanceToEdges,r=e.dragStartTime,a=e.axis,o=e.shouldUseTimeDampening,i=function(e,t){return{startScrollingFrom:e[t.size]*ez,maxScrollValueAt:e[t.size]*tz}}(t,a);return n[a.end]<n[a.start]?uz({distanceToEdge:n[a.end],thresholds:i,dragStartTime:r,shouldUseTimeDampening:o}):-1*uz({distanceToEdge:n[a.start],thresholds:i,dragStartTime:r,shouldUseTimeDampening:o})},lz=jF((function(e){return 0===e?0:e})),fz=function(e){var t=e.dragStartTime,n=e.container,r=e.subject,a=e.center,o=e.shouldUseTimeDampening,i={top:a.y-n.top,right:n.right-a.x,bottom:n.bottom-a.y,left:a.x-n.left},s=cz({container:n,distanceToEdges:i,dragStartTime:t,axis:sL,shouldUseTimeDampening:o}),u=cz({container:n,distanceToEdges:i,dragStartTime:t,axis:uL,shouldUseTimeDampening:o}),c=lz({x:u,y:s});if(AF(c,TF))return null;var l=function(e){var t=e.container,n=e.subject,r=e.proposedScroll,a=n.height>t.height,o=n.width>t.width;return o||a?o&&a?null:{x:o?0:r.x,y:a?0:r.y}:r}({container:n,subject:r,proposedScroll:c});return l?AF(l,TF)?null:l:null},dz=jF((function(e){return 0===e?0:e>0?1:-1})),pz=function(){var e=function(e,t){return e<0?e:e>t?e-t:0};return function(t){var n=t.current,r=t.max,a=t.change,o=IF(n,a),i={x:e(o.x,r.x),y:e(o.y,r.y)};return AF(i,TF)?null:i}}(),hz=function(e){var t=e.max,n=e.current,r=e.change,a={x:Math.max(n.x,t.x),y:Math.max(n.y,t.y)},o=dz(r),i=pz({max:a,current:n,change:o});return!i||(0!==o.x&&0===i.x||0!==o.y&&0===i.y)},mz=function(e,t){return hz({current:e.scroll.current,max:e.scroll.max,change:t})},vz=function(e,t){var n=e.frame;return!!n&&hz({current:n.scroll.current,max:n.scroll.max,change:t})},gz=function(e){var t=e.state,n=e.dragStartTime,r=e.shouldUseTimeDampening,a=e.scrollWindow,o=e.scrollDroppable,i=t.current.page.borderBoxCenter,s=t.dimensions.draggables[t.critical.draggable.id].page.marginBox;if(t.isWindowScrollAllowed){var u=function(e){var t=e.viewport,n=e.subject,r=e.center,a=e.dragStartTime,o=e.shouldUseTimeDampening,i=fz({dragStartTime:a,container:t.frame,subject:n,center:r,shouldUseTimeDampening:o});return i&&mz(t,i)?i:null}({dragStartTime:n,viewport:t.viewport,subject:s,center:i,shouldUseTimeDampening:r});if(u)return void a(u)}var c=QB({center:i,destination:FL(t.impact),droppables:t.dimensions.droppables});if(c){var l=function(e){var t=e.droppable,n=e.subject,r=e.center,a=e.dragStartTime,o=e.shouldUseTimeDampening,i=t.frame;if(!i)return null;var s=fz({dragStartTime:a,container:i.pageMarginBox,subject:n,center:r,shouldUseTimeDampening:o});return s&&vz(t,s)?s:null}({dragStartTime:n,droppable:c,subject:s,center:i,shouldUseTimeDampening:r});l&&o(c.descriptor.id,l)}},yz=function(e){var t=e.move,n=e.scrollDroppable,r=e.scrollWindow,a=function(e,t){if(!vz(e,t))return t;var r=function(e,t){var n=e.frame;return n&&vz(e,t)?pz({current:n.scroll.current,max:n.scroll.max,change:t}):null}(e,t);if(!r)return n(e.descriptor.id,t),null;var a=OF(t,r);return n(e.descriptor.id,a),OF(t,a)},o=function(e,t,n){if(!e)return n;if(!mz(t,n))return n;var a=function(e,t){if(!mz(e,t))return null;var n=e.scroll.max,r=e.scroll.current;return pz({current:r,max:n,change:t})}(t,n);if(!a)return r(n),null;var o=OF(n,a);return r(o),OF(n,o)};return function(e){var n=e.scrollJumpRequest;if(n){var r=FL(e.impact);r||yF(!1);var i=a(e.dimensions.droppables[r],n);if(i){var s=e.viewport,u=o(e.isWindowScrollAllowed,s,i);u&&function(e,n){var r=IF(e.current.client.selection,n);t({client:r})}(e,u)}}}},bz=function(e){var t=e.scrollDroppable,n=e.scrollWindow,r=e.move,a=function(e){var t=e.scrollWindow,n=e.scrollDroppable,r=dF(t),a=dF(n),o=null,i=function(e){o||yF(!1);var t=o,n=t.shouldUseTimeDampening,i=t.dragStartTime;gz({state:e,scrollWindow:r,scrollDroppable:a,dragStartTime:i,shouldUseTimeDampening:n})};return{start:function(e){JL(),o&&yF(!1);var t=Date.now(),n=!1,r=function(){n=!0};gz({state:e,dragStartTime:0,shouldUseTimeDampening:!1,scrollWindow:r,scrollDroppable:r}),o={dragStartTime:t,shouldUseTimeDampening:n},QL(),n&&i(e)},stop:function(){o&&(r.cancel(),a.cancel(),o=null)},scroll:i}}({scrollWindow:n,scrollDroppable:t}),o=yz({move:r,scrollWindow:n,scrollDroppable:t}),i={scroll:function(e){"DRAGGING"===e.phase&&("FLUID"!==e.movementMode?e.scrollJumpRequest&&o(e):a.scroll(e))},start:a.start,stop:a.stop};return i},xz=function(){var e="data-rbd-drag-handle";return{base:e,draggableId:e+"-draggable-id",contextId:e+"-context-id"}}(),wz=function(){var e="data-rbd-draggable";return{base:e,contextId:e+"-context-id",id:e+"-id"}}(),kz=function(){var e="data-rbd-droppable";return{base:e,contextId:e+"-context-id",id:e+"-id"}}(),Sz={contextId:"data-rbd-scroll-container-context-id"},_z=function(e,t){return e.map((function(e){var n=e.styles[t];return n?e.selector+" { "+n+" }":""})).join(" ")},Nz="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement?e.useLayoutEffect:e.useEffect,Ez=function(){var e=document.querySelector("head");return e||yF(!1),e},Cz=function(e){var t=document.createElement("style");return e&&t.setAttribute("nonce",e),t.type="text/css",t};function Tz(t,n){var r=Xj((function(){return function(e){var t,n=(t=e,function(e){return"["+e+'="'+t+'"]'}),r=function(){var e="\n      cursor: -webkit-grab;\n      cursor: grab;\n    ";return{selector:n(xz.contextId),styles:{always:"\n          -webkit-touch-callout: none;\n          -webkit-tap-highlight-color: rgba(0,0,0,0);\n          touch-action: manipulation;\n        ",resting:e,dragging:"pointer-events: none;",dropAnimating:e}}}(),a=function(){var e="\n      transition: "+SB.outOfTheWay+";\n    ";return{selector:n(wz.contextId),styles:{dragging:e,dropAnimating:e,userCancel:e}}}(),o=[a,r,{selector:n(kz.contextId),styles:{always:"overflow-anchor: none;"}},{selector:"body",styles:{dragging:"\n        cursor: grabbing;\n        cursor: -webkit-grabbing;\n        user-select: none;\n        -webkit-user-select: none;\n        -moz-user-select: none;\n        -ms-user-select: none;\n        overflow-anchor: none;\n      "}}];return{always:_z(o,"always"),resting:_z(o,"resting"),dragging:_z(o,"dragging"),dropAnimating:_z(o,"dropAnimating"),userCancel:_z(o,"userCancel")}}(t)}),[t]),a=(0,e.useRef)(null),o=(0,e.useRef)(null),i=Yj(fF((function(e){var t=o.current;t||yF(!1),t.textContent=e})),[]),s=Yj((function(e){var t=a.current;t||yF(!1),t.textContent=e}),[]);Nz((function(){(a.current||o.current)&&yF(!1);var e=Cz(n),u=Cz(n);return a.current=e,o.current=u,e.setAttribute("data-rbd-always",t),u.setAttribute("data-rbd-dynamic",t),Ez().appendChild(e),Ez().appendChild(u),s(r.always),i(r.resting),function(){var e=function(e){var t=e.current;t||yF(!1),Ez().removeChild(t),e.current=null};e(a),e(o)}}),[n,s,i,r.always,r.resting,t]);var u=Yj((function(){return i(r.dragging)}),[i,r.dragging]),c=Yj((function(e){i("DROP"!==e?r.userCancel:r.dropAnimating)}),[i,r.dropAnimating,r.userCancel]),l=Yj((function(){o.current&&i(r.resting)}),[i,r.resting]);return Xj((function(){return{dragging:u,dropping:c,resting:l}}),[u,c,l])}var Iz=function(e){return e&&e.ownerDocument?e.ownerDocument.defaultView:window};function Oz(e){return e instanceof Iz(e).HTMLElement}function Az(e,t){var n="["+xz.contextId+'="'+e+'"]',r=WF(document.querySelectorAll(n));if(!r.length)return null;var a=qF(r,(function(e){return e.getAttribute(xz.draggableId)===t}));return a&&Oz(a)?a:null}function Dz(){var e={draggables:{},droppables:{}},t=[];function n(e){t.length&&t.forEach((function(t){return t(e)}))}function r(t){return e.draggables[t]||null}var a={register:function(t){e.draggables[t.descriptor.id]=t,n({type:"ADDITION",value:t})},update:function(t,n){var r=e.draggables[n.descriptor.id];r&&r.uniqueId===t.uniqueId&&(delete e.draggables[n.descriptor.id],e.draggables[t.descriptor.id]=t)},unregister:function(t){var a=t.descriptor.id,o=r(a);o&&t.uniqueId===o.uniqueId&&(delete e.draggables[a],n({type:"REMOVAL",value:t}))},getById:function(e){var t=r(e);return t||yF(!1),t},findById:r,exists:function(e){return Boolean(r(e))},getAllByType:function(t){return VF(e.draggables).filter((function(e){return e.descriptor.type===t}))}};function o(t){return e.droppables[t]||null}var i={register:function(t){e.droppables[t.descriptor.id]=t},unregister:function(t){var n=o(t.descriptor.id);n&&t.uniqueId===n.uniqueId&&delete e.droppables[t.descriptor.id]},getById:function(e){var t=o(e);return t||yF(!1),t},findById:o,exists:function(e){return Boolean(o(e))},getAllByType:function(t){return VF(e.droppables).filter((function(e){return e.descriptor.type===t}))}};return{draggable:a,droppable:i,subscribe:function(e){return t.push(e),function(){var n=t.indexOf(e);-1!==n&&t.splice(n,1)}},clean:function(){e.draggables={},e.droppables={},t.length=0}}}var Mz=e.createContext(null),Rz=function(){var e=document.body;return e||yF(!1),e},Pz={position:"absolute",width:"1px",height:"1px",margin:"-1px",border:"0",padding:"0",overflow:"hidden",clip:"rect(0 0 0 0)","clip-path":"inset(100%)"};var jz=0,Fz={separator:"::"};function Lz(e,t){return void 0===t&&(t=Fz),Xj((function(){return""+e+t.separator+jz++}),[t.separator,e])}var Bz=e.createContext(null);function zz(e){0}function Zz(e,t){zz()}function Vz(){Zz()}function Uz(t){var n=(0,e.useRef)(t);return(0,e.useEffect)((function(){n.current=t})),n}var qz,Wz=((qz={})[13]=!0,qz[9]=!0,qz),Hz=function(e){Wz[e.keyCode]&&e.preventDefault()},Gz=function(){var e="visibilitychange";return"undefined"===typeof document?e:qF([e,"ms"+e,"webkit"+e,"moz"+e,"o"+e],(function(e){return"on"+e in document}))||e}();var Kz,Xz={type:"IDLE"};function Yz(e){var t=e.cancel,n=e.completed,r=e.getPhase,a=e.setPhase;return[{eventName:"mousemove",fn:function(e){var t=e.button,n=e.clientX,o=e.clientY;if(0===t){var i={x:n,y:o},s=r();if("DRAGGING"===s.type)return e.preventDefault(),void s.actions.move(i);"PENDING"!==s.type&&yF(!1);var u=s.point;if(c=u,l=i,Math.abs(l.x-c.x)>=5||Math.abs(l.y-c.y)>=5){var c,l;e.preventDefault();var f=s.actions.fluidLift(i);a({type:"DRAGGING",actions:f})}}}},{eventName:"mouseup",fn:function(e){var a=r();"DRAGGING"===a.type?(e.preventDefault(),a.actions.drop({shouldBlockNextClick:!0}),n()):t()}},{eventName:"mousedown",fn:function(e){"DRAGGING"===r().type&&e.preventDefault(),t()}},{eventName:"keydown",fn:function(e){if("PENDING"!==r().type)return 27===e.keyCode?(e.preventDefault(),void t()):void Hz(e);t()}},{eventName:"resize",fn:t},{eventName:"scroll",options:{passive:!0,capture:!1},fn:function(){"PENDING"===r().type&&t()}},{eventName:"webkitmouseforcedown",fn:function(e){var n=r();"IDLE"===n.type&&yF(!1),n.actions.shouldRespectForcePress()?t():e.preventDefault()}},{eventName:Gz,fn:t}]}function $z(){}var Jz=((Kz={})[34]=!0,Kz[33]=!0,Kz[36]=!0,Kz[35]=!0,Kz);function Qz(e,t){function n(){t(),e.cancel()}return[{eventName:"keydown",fn:function(r){return 27===r.keyCode?(r.preventDefault(),void n()):32===r.keyCode?(r.preventDefault(),t(),void e.drop()):40===r.keyCode?(r.preventDefault(),void e.moveDown()):38===r.keyCode?(r.preventDefault(),void e.moveUp()):39===r.keyCode?(r.preventDefault(),void e.moveRight()):37===r.keyCode?(r.preventDefault(),void e.moveLeft()):void(Jz[r.keyCode]?r.preventDefault():Hz(r))}},{eventName:"mousedown",fn:n},{eventName:"mouseup",fn:n},{eventName:"click",fn:n},{eventName:"touchstart",fn:n},{eventName:"resize",fn:n},{eventName:"wheel",fn:n,options:{passive:!0}},{eventName:Gz,fn:n}]}var eZ={type:"IDLE"};var tZ={input:!0,button:!0,textarea:!0,select:!0,option:!0,optgroup:!0,video:!0,audio:!0};function nZ(e,t){if(null==t)return!1;if(Boolean(tZ[t.tagName.toLowerCase()]))return!0;var n=t.getAttribute("contenteditable");return"true"===n||""===n||t!==e&&nZ(e,t.parentElement)}function rZ(e,t){var n=t.target;return!!Oz(n)&&nZ(e,n)}var aZ=function(e){return Jj(e.getBoundingClientRect()).center};var oZ=function(){var e="matches";return"undefined"===typeof document?e:qF([e,"msMatchesSelector","webkitMatchesSelector"],(function(e){return e in Element.prototype}))||e}();function iZ(e,t){return null==e?null:e[oZ](t)?e:iZ(e.parentElement,t)}function sZ(e,t){return e.closest?e.closest(t):iZ(e,t)}function uZ(e,t){var n,r=t.target;if(!((n=r)instanceof Iz(n).Element))return null;var a=function(e){return"["+xz.contextId+'="'+e+'"]'}(e),o=sZ(r,a);return o&&Oz(o)?o:null}function cZ(e){e.preventDefault()}function lZ(e){var t=e.expected,n=e.phase,r=e.isLockActive;e.shouldWarn;return!!r()&&t===n}function fZ(e){var t=e.lockAPI,n=e.store,r=e.registry,a=e.draggableId;if(t.isClaimed())return!1;var o=r.draggable.findById(a);return!!o&&(!!o.options.isEnabled&&!!YB(n.getState(),a))}function dZ(e){var t=e.lockAPI,n=e.contextId,r=e.store,a=e.registry,o=e.draggableId,i=e.forceSensorStop,s=e.sourceEvent;if(!fZ({lockAPI:t,store:r,registry:a,draggableId:o}))return null;var u=a.draggable.getById(o),c=function(e,t){var n="["+wz.contextId+'="'+e+'"]',r=qF(WF(document.querySelectorAll(n)),(function(e){return e.getAttribute(wz.id)===t}));return r&&Oz(r)?r:null}(n,u.descriptor.id);if(!c)return null;if(s&&!u.options.canDragInteractiveElements&&rZ(c,s))return null;var l=t.claim(i||hF),f="PRE_DRAG";function d(){return u.options.shouldRespectForcePress}function p(){return t.isActive(l)}var h=function(e,t){lZ({expected:e,phase:f,isLockActive:p,shouldWarn:!0})&&r.dispatch(t())}.bind(null,"DRAGGING");function m(e){function n(){t.release(),f="COMPLETED"}function a(t,a){if(void 0===a&&(a={shouldBlockNextClick:!1}),e.cleanup(),a.shouldBlockNextClick){var o=mF(window,[{eventName:"click",fn:cZ,options:{once:!0,passive:!1,capture:!0}}]);setTimeout(o)}n(),r.dispatch(gB({reason:t}))}return"PRE_DRAG"!==f&&(n(),"PRE_DRAG"!==f&&yF(!1)),r.dispatch(function(e){return{type:"LIFT",payload:e}}(e.liftActionArgs)),f="DRAGGING",QP({isActive:function(){return lZ({expected:"DRAGGING",phase:f,isLockActive:p,shouldWarn:!1})},shouldRespectForcePress:d,drop:function(e){return a("DROP",e)},cancel:function(e){return a("CANCEL",e)}},e.actions)}return{isActive:function(){return lZ({expected:"PRE_DRAG",phase:f,isLockActive:p,shouldWarn:!1})},shouldRespectForcePress:d,fluidLift:function(e){var t=dF((function(e){h((function(){return fB({client:e})}))}));return QP({},m({liftActionArgs:{id:o,clientSelection:e,movementMode:"FLUID"},cleanup:function(){return t.cancel()},actions:{move:t}}),{move:t})},snapLift:function(){var e={moveUp:function(){return h(dB)},moveRight:function(){return h(hB)},moveDown:function(){return h(pB)},moveLeft:function(){return h(mB)}};return m({liftActionArgs:{id:o,clientSelection:aZ(c),movementMode:"SNAP"},cleanup:hF,actions:e})},abort:function(){lZ({expected:"PRE_DRAG",phase:f,isLockActive:p,shouldWarn:!0})&&t.release()}}}var pZ=[function(t){var n=(0,e.useRef)(Xz),r=(0,e.useRef)(hF),a=Xj((function(){return{eventName:"mousedown",fn:function(e){if(!e.defaultPrevented&&0===e.button&&!(e.ctrlKey||e.metaKey||e.shiftKey||e.altKey)){var n=t.findClosestDraggableId(e);if(n){var a=t.tryGetLock(n,s,{sourceEvent:e});if(a){e.preventDefault();var o={x:e.clientX,y:e.clientY};r.current(),l(a,o)}}}}}}),[t]),o=Xj((function(){return{eventName:"webkitmouseforcewillbegin",fn:function(e){if(!e.defaultPrevented){var n=t.findClosestDraggableId(e);if(n){var r=t.findOptionsForDraggable(n);r&&(r.shouldRespectForcePress||t.canGetLock(n)&&e.preventDefault())}}}}}),[t]),i=Yj((function(){r.current=mF(window,[o,a],{passive:!1,capture:!0})}),[o,a]),s=Yj((function(){"IDLE"!==n.current.type&&(n.current=Xz,r.current(),i())}),[i]),u=Yj((function(){var e=n.current;s(),"DRAGGING"===e.type&&e.actions.cancel({shouldBlockNextClick:!0}),"PENDING"===e.type&&e.actions.abort()}),[s]),c=Yj((function(){var e=Yz({cancel:u,completed:s,getPhase:function(){return n.current},setPhase:function(e){n.current=e}});r.current=mF(window,e,{capture:!0,passive:!1})}),[u,s]),l=Yj((function(e,t){"IDLE"!==n.current.type&&yF(!1),n.current={type:"PENDING",point:t,actions:e},c()}),[c]);Nz((function(){return i(),function(){r.current()}}),[i])},function(t){var n=(0,e.useRef)($z),r=Xj((function(){return{eventName:"keydown",fn:function(e){if(!e.defaultPrevented&&32===e.keyCode){var r=t.findClosestDraggableId(e);if(r){var o=t.tryGetLock(r,u,{sourceEvent:e});if(o){e.preventDefault();var i=!0,s=o.snapLift();n.current(),n.current=mF(window,Qz(s,u),{capture:!0,passive:!1})}}}function u(){i||yF(!1),i=!1,n.current(),a()}}}}),[t]),a=Yj((function(){n.current=mF(window,[r],{passive:!1,capture:!0})}),[r]);Nz((function(){return a(),function(){n.current()}}),[a])},function(t){var n=(0,e.useRef)(eZ),r=(0,e.useRef)(hF),a=Yj((function(){return n.current}),[]),o=Yj((function(e){n.current=e}),[]),i=Xj((function(){return{eventName:"touchstart",fn:function(e){if(!e.defaultPrevented){var n=t.findClosestDraggableId(e);if(n){var a=t.tryGetLock(n,u,{sourceEvent:e});if(a){var o=e.touches[0],i={x:o.clientX,y:o.clientY};r.current(),d(a,i)}}}}}}),[t]),s=Yj((function(){r.current=mF(window,[i],{capture:!0,passive:!1})}),[i]),u=Yj((function(){var e=n.current;"IDLE"!==e.type&&("PENDING"===e.type&&clearTimeout(e.longPressTimerId),o(eZ),r.current(),s())}),[s,o]),c=Yj((function(){var e=n.current;u(),"DRAGGING"===e.type&&e.actions.cancel({shouldBlockNextClick:!0}),"PENDING"===e.type&&e.actions.abort()}),[u]),l=Yj((function(){var e={capture:!0,passive:!1},t={cancel:c,completed:u,getPhase:a},n=mF(window,function(e){var t=e.cancel,n=e.completed,r=e.getPhase;return[{eventName:"touchmove",options:{capture:!1},fn:function(e){var n=r();if("DRAGGING"===n.type){n.hasMoved=!0;var a=e.touches[0],o={x:a.clientX,y:a.clientY};e.preventDefault(),n.actions.move(o)}else t()}},{eventName:"touchend",fn:function(e){var a=r();"DRAGGING"===a.type?(e.preventDefault(),a.actions.drop({shouldBlockNextClick:!0}),n()):t()}},{eventName:"touchcancel",fn:function(e){"DRAGGING"===r().type?(e.preventDefault(),t()):t()}},{eventName:"touchforcechange",fn:function(e){var n=r();"IDLE"===n.type&&yF(!1);var a=e.touches[0];if(a&&a.force>=.15){var o=n.actions.shouldRespectForcePress();if("PENDING"!==n.type)return o?n.hasMoved?void e.preventDefault():void t():void e.preventDefault();o&&t()}}},{eventName:Gz,fn:t}]}(t),e),o=mF(window,function(e){var t=e.cancel,n=e.getPhase;return[{eventName:"orientationchange",fn:t},{eventName:"resize",fn:t},{eventName:"contextmenu",fn:function(e){e.preventDefault()}},{eventName:"keydown",fn:function(e){"DRAGGING"===n().type?(27===e.keyCode&&e.preventDefault(),t()):t()}},{eventName:Gz,fn:t}]}(t),e);r.current=function(){n(),o()}}),[c,a,u]),f=Yj((function(){var e=a();"PENDING"!==e.type&&yF(!1);var t=e.actions.fluidLift(e.point);o({type:"DRAGGING",actions:t,hasMoved:!1})}),[a,o]),d=Yj((function(e,t){"IDLE"!==a().type&&yF(!1);var n=setTimeout(f,120);o({type:"PENDING",point:t,actions:e,longPressTimerId:n}),l()}),[l,a,o,f]);Nz((function(){return s(),function(){r.current();var e=a();"PENDING"===e.type&&(clearTimeout(e.longPressTimerId),o(eZ))}}),[a,s,o]),Nz((function(){return mF(window,[{eventName:"touchmove",fn:function(){},options:{capture:!1,passive:!1}}])}),[])}];function hZ(t){var n=t.contextId,r=t.store,a=t.registry,o=t.customSensors,i=t.enableDefaultSensors,s=[].concat(i?pZ:[],o||[]),u=(0,e.useState)((function(){return function(){var e=null;function t(){e||yF(!1),e=null}return{isClaimed:function(){return Boolean(e)},isActive:function(t){return t===e},claim:function(t){e&&yF(!1);var n={abandon:t};return e=n,n},release:t,tryAbandon:function(){e&&(e.abandon(),t())}}}()}))[0],c=Yj((function(e,t){e.isDragging&&!t.isDragging&&u.tryAbandon()}),[u]);Nz((function(){var e=r.getState();return r.subscribe((function(){var t=r.getState();c(e,t),e=t}))}),[u,r,c]),Nz((function(){return u.tryAbandon}),[u.tryAbandon]);var l=Yj((function(e){return fZ({lockAPI:u,registry:a,store:r,draggableId:e})}),[u,a,r]),f=Yj((function(e,t,o){return dZ({lockAPI:u,registry:a,contextId:n,store:r,draggableId:e,forceSensorStop:t,sourceEvent:o&&o.sourceEvent?o.sourceEvent:null})}),[n,u,a,r]),d=Yj((function(e){return function(e,t){var n=uZ(e,t);return n?n.getAttribute(xz.draggableId):null}(n,e)}),[n]),p=Yj((function(e){var t=a.draggable.findById(e);return t?t.options:null}),[a.draggable]),h=Yj((function(){u.isClaimed()&&(u.tryAbandon(),"IDLE"!==r.getState().phase&&r.dispatch({type:"FLUSH",payload:null}))}),[u,r]),m=Yj(u.isClaimed,[u]),v=Xj((function(){return{canGetLock:l,tryGetLock:f,findClosestDraggableId:d,findOptionsForDraggable:p,tryReleaseLock:h,isLockClaimed:m}}),[l,f,d,p,h,m]);zz();for(var g=0;g<s.length;g++)s[g](v)}function mZ(e){return e.current||yF(!1),e.current}function vZ(t){var n=t.contextId,r=t.setCallbacks,a=t.sensors,o=t.nonce,i=t.dragHandleUsageInstructions,s=(0,e.useRef)(null);Vz();var u=Uz(t),c=Yj((function(){return function(e){return{onBeforeCapture:e.onBeforeCapture,onBeforeDragStart:e.onBeforeDragStart,onDragStart:e.onDragStart,onDragEnd:e.onDragEnd,onDragUpdate:e.onDragUpdate}}(u.current)}),[u]),l=function(t){var n=Xj((function(){return function(e){return"rbd-announcement-"+e}(t)}),[t]),r=(0,e.useRef)(null);return(0,e.useEffect)((function(){var e=document.createElement("div");return r.current=e,e.id=n,e.setAttribute("aria-live","assertive"),e.setAttribute("aria-atomic","true"),QP(e.style,Pz),Rz().appendChild(e),function(){setTimeout((function(){var t=Rz();t.contains(e)&&t.removeChild(e),e===r.current&&(r.current=null)}))}}),[n]),Yj((function(e){var t=r.current;t&&(t.textContent=e)}),[])}(n),f=function(t){var n=t.contextId,r=t.text,a=Lz("hidden-text",{separator:"-"}),o=Xj((function(){return function(e){return"rbd-hidden-text-"+e.contextId+"-"+e.uniqueId}({contextId:n,uniqueId:a})}),[a,n]);return(0,e.useEffect)((function(){var e=document.createElement("div");return e.id=o,e.textContent=r,e.style.display="none",Rz().appendChild(e),function(){var t=Rz();t.contains(e)&&t.removeChild(e)}}),[o,r]),o}({contextId:n,text:i}),d=Tz(n,o),p=Yj((function(e){mZ(s).dispatch(e)}),[]),h=Xj((function(){return sj({publishWhileDragging:iB,updateDroppableScroll:uB,updateDroppableIsEnabled:cB,updateDroppableIsCombineEnabled:lB,collectionStarting:sB},p)}),[p]),m=function(){var t=Xj(Dz,[]);return(0,e.useEffect)((function(){return function(){requestAnimationFrame(t.clean)}}),[t]),t}(),v=Xj((function(){return XB(m,h)}),[m,h]),g=Xj((function(){return bz(QP({scrollWindow:$B,scrollDroppable:v.scrollDroppable},sj({move:fB},p)))}),[v.scrollDroppable,p]),y=function(t){var n=(0,e.useRef)({}),r=(0,e.useRef)(null),a=(0,e.useRef)(null),o=(0,e.useRef)(!1),i=Yj((function(e,t){var r={id:e,focus:t};return n.current[e]=r,function(){var t=n.current;t[e]!==r&&delete t[e]}}),[]),s=Yj((function(e){var n=Az(t,e);n&&n!==document.activeElement&&n.focus()}),[t]),u=Yj((function(e,t){r.current===e&&(r.current=t)}),[]),c=Yj((function(){a.current||o.current&&(a.current=requestAnimationFrame((function(){a.current=null;var e=r.current;e&&s(e)})))}),[s]),l=Yj((function(e){r.current=null;var t=document.activeElement;t&&t.getAttribute(xz.draggableId)===e&&(r.current=e)}),[]);return Nz((function(){return o.current=!0,function(){o.current=!1;var e=a.current;e&&cancelAnimationFrame(e)}}),[]),Xj((function(){return{register:i,tryRecordFocus:l,tryRestoreFocusRecorded:c,tryShiftRecord:u}}),[i,l,c,u])}(n),b=Xj((function(){return UB({announce:l,autoScroller:g,dimensionMarshal:v,focusMarshal:y,getResponders:c,styleMarshal:d})}),[l,g,v,y,c,d]);s.current=b;var x=Yj((function(){var e=mZ(s);"IDLE"!==e.getState().phase&&e.dispatch({type:"FLUSH",payload:null})}),[]),w=Yj((function(){var e=mZ(s).getState();return e.isDragging||"DROP_ANIMATING"===e.phase}),[]);r(Xj((function(){return{isDragging:w,tryAbort:x}}),[w,x]));var k=Yj((function(e){return YB(mZ(s).getState(),e)}),[]),S=Yj((function(){return BL(mZ(s).getState())}),[]),_=Xj((function(){return{marshal:v,focus:y,contextId:n,canLift:k,isMovementAllowed:S,dragHandleUsageInstructionsId:f,registry:m}}),[n,v,f,y,k,S,m]);return hZ({contextId:n,store:b,registry:m,customSensors:a,enableDefaultSensors:!1!==t.enableDefaultSensors}),(0,e.useEffect)((function(){return x}),[x]),e.createElement(Bz.Provider,{value:_},e.createElement(mj,{context:Mz,store:b},t.children))}var gZ=0;function yZ(t){var n=Xj((function(){return""+gZ++}),[]),r=t.dragHandleUsageInstructions||_F;return e.createElement(bF,null,(function(a){return e.createElement(vZ,{nonce:t.nonce,contextId:n,setCallbacks:a,dragHandleUsageInstructions:r,enableDefaultSensors:t.enableDefaultSensors,sensors:t.sensors,onBeforeCapture:t.onBeforeCapture,onBeforeDragStart:t.onBeforeDragStart,onDragStart:t.onDragStart,onDragUpdate:t.onDragUpdate,onDragEnd:t.onDragEnd},t.children)}))}var bZ=function(e){return function(t){return e===t}},xZ=bZ("scroll"),wZ=bZ("auto"),kZ=(bZ("visible"),function(e,t){return t(e.overflowX)||t(e.overflowY)}),SZ=function(e){var t=window.getComputedStyle(e),n={overflowX:t.overflowX,overflowY:t.overflowY};return kZ(n,xZ)||kZ(n,wZ)},_Z=function e(t){return null==t||t===document.body||t===document.documentElement?null:SZ(t)?t:e(t.parentElement)},NZ=function(e){return{x:e.scrollLeft,y:e.scrollTop}},EZ=function e(t){return!!t&&("fixed"===window.getComputedStyle(t).position||e(t.parentElement))},CZ=function(e){return{closestScrollable:_Z(e),isFixedOnPage:EZ(e)}},TZ=function(e){var t=e.ref,n=e.descriptor,r=e.env,a=e.windowScroll,o=e.direction,i=e.isDropDisabled,s=e.isCombineEnabled,u=e.shouldClipSubject,c=r.closestScrollable,l=function(e,t){var n=sF(e);if(!t)return n;if(e!==t)return n;var r=n.paddingBox.top-t.scrollTop,a=n.paddingBox.left-t.scrollLeft,o=r+t.scrollHeight,i=a+t.scrollWidth,s=Qj({top:r,right:i,bottom:o,left:a},n.border);return nF({borderBox:s,margin:n.margin,border:n.border,padding:n.padding})}(t,c),f=oF(l,a),d=function(){if(!c)return null;var e=sF(c),t={scrollHeight:c.scrollHeight,scrollWidth:c.scrollWidth};return{client:e,page:oF(e,a),scroll:NZ(c),scrollSize:t,shouldClipSubject:u}}(),p=function(e){var t=e.descriptor,n=e.isEnabled,r=e.isCombineEnabled,a=e.isFixedOnPage,o=e.direction,i=e.client,s=e.page,u=e.closest,c=function(){if(!u)return null;var e=u.scrollSize,t=u.client,n=qB({scrollHeight:e.scrollHeight,scrollWidth:e.scrollWidth,height:t.paddingBox.height,width:t.paddingBox.width});return{pageMarginBox:u.page.marginBox,frameClient:t,scrollSize:e,shouldClipSubject:u.shouldClipSubject,scroll:{initial:u.scroll,current:u.scroll,max:n,diff:{value:TF,displacement:TF}}}}(),l="vertical"===o?sL:uL;return{descriptor:t,isCombineEnabled:r,isFixedOnPage:a,axis:l,isEnabled:n,client:i,page:s,frame:c,subject:zF({page:s,withPlaceholder:null,axis:l,frame:c})}}({descriptor:n,isEnabled:!i,isCombineEnabled:s,isFixedOnPage:r.isFixedOnPage,direction:o,client:l,page:f,closest:d});return p},IZ={passive:!1},OZ={passive:!0},AZ=function(e){return e.shouldPublishImmediately?IZ:OZ};function DZ(t){var n=(0,e.useContext)(t);return n||yF(!1),n}var MZ=function(e){return e&&e.env.closestScrollable||null};function RZ(){}var PZ={width:0,height:0,margin:{top:0,right:0,bottom:0,left:0}},jZ=function(e){var t=e.isAnimatingOpenOnMount,n=e.placeholder,r=e.animate,a=function(e){var t=e.isAnimatingOpenOnMount,n=e.placeholder,r=e.animate;return t||"close"===r?PZ:{height:n.client.borderBox.height,width:n.client.borderBox.width,margin:n.client.margin}}({isAnimatingOpenOnMount:t,placeholder:n,animate:r});return{display:n.display,boxSizing:"border-box",width:a.width,height:a.height,marginTop:a.margin.top,marginRight:a.margin.right,marginBottom:a.margin.bottom,marginLeft:a.margin.left,flexShrink:"0",flexGrow:"0",pointerEvents:"none",transition:"none"!==r?SB.placeholder:null}};var FZ=e.memo((function(t){var n=(0,e.useRef)(null),r=Yj((function(){n.current&&(clearTimeout(n.current),n.current=null)}),[]),a=t.animate,o=t.onTransitionEnd,i=t.onClose,s=t.contextId,u=(0,e.useState)("open"===t.animate),c=u[0],l=u[1];(0,e.useEffect)((function(){return c?"open"!==a?(r(),l(!1),RZ):n.current?RZ:(n.current=setTimeout((function(){n.current=null,l(!1)})),r):RZ}),[a,c,r]);var f=Yj((function(e){"height"===e.propertyName&&(o(),"close"===a&&i())}),[a,i,o]),d=jZ({isAnimatingOpenOnMount:c,animate:t.animate,placeholder:t.placeholder});return e.createElement(t.placeholder.tagName,{style:d,"data-rbd-placeholder-context-id":s,onTransitionEnd:f,ref:t.innerRef})})),LZ=e.createContext(null);var BZ=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(t=e.call.apply(e,[this].concat(r))||this).state={isVisible:Boolean(t.props.on),data:t.props.on,animate:t.props.shouldAnimate&&t.props.on?"open":"none"},t.onClose=function(){"close"===t.state.animate&&t.setState({isVisible:!1})},t}return JP(t,e),t.getDerivedStateFromProps=function(e,t){return e.shouldAnimate?e.on?{isVisible:!0,data:e.on,animate:"open"}:t.isVisible?{isVisible:!0,data:t.data,animate:"close"}:{isVisible:!1,animate:"close",data:null}:{isVisible:Boolean(e.on),data:e.on,animate:"none"}},t.prototype.render=function(){if(!this.state.isVisible)return null;var e={onClose:this.onClose,data:this.state.data,animate:this.state.animate};return this.props.children(e)},t}(e.PureComponent),zZ=5e3,ZZ=4500,VZ=function(e,t){return t?SB.drop(t.duration):e?SB.snap:SB.fluid},UZ=function(e,t){return e?t?xB.drop:xB.combining:null};function qZ(e){return"DRAGGING"===e.type?function(e){var t=e.dimension.client,n=e.offset,r=e.combineWith,a=e.dropping,o=Boolean(r),i=function(e){return null!=e.forceShouldAnimate?e.forceShouldAnimate:"SNAP"===e.mode}(e),s=Boolean(a),u=s?EB(n,o):NB(n);return{position:"fixed",top:t.marginBox.top,left:t.marginBox.left,boxSizing:"border-box",width:t.borderBox.width,height:t.borderBox.height,transition:VZ(i,a),transform:u,opacity:UZ(o,s),zIndex:s?ZZ:zZ,pointerEvents:"none"}}(e):{transform:NB((t=e).offset),transition:t.shouldAnimateDisplacement?null:"none"};var t}function WZ(t){var n=Lz("draggable"),r=t.descriptor,a=t.registry,o=t.getDraggableRef,i=t.canDragInteractiveElements,s=t.shouldRespectForcePress,u=t.isEnabled,c=Xj((function(){return{canDragInteractiveElements:i,shouldRespectForcePress:s,isEnabled:u}}),[i,u,s]),l=Yj((function(e){var t=o();return t||yF(!1),function(e,t,n){void 0===n&&(n=TF);var r=window.getComputedStyle(t),a=t.getBoundingClientRect(),o=iF(a,r),i=oF(o,n);return{descriptor:e,placeholder:{client:o,tagName:t.tagName.toLowerCase(),display:r.display},displaceBy:{x:o.marginBox.width,y:o.marginBox.height},client:o,page:i}}(r,t,e)}),[r,o]),f=Xj((function(){return{uniqueId:n,descriptor:r,options:c,getDimension:l}}),[r,l,c,n]),d=(0,e.useRef)(f),p=(0,e.useRef)(!0);Nz((function(){return a.draggable.register(d.current),function(){return a.draggable.unregister(d.current)}}),[a.draggable]),Nz((function(){if(p.current)p.current=!1;else{var e=d.current;d.current=f,a.draggable.update(f,e)}}),[f,a.draggable])}function HZ(e,t,n){Zz()}function GZ(e){e.preventDefault()}var KZ=function(e,t){return e===t},XZ=function(e){var t=e.combine,n=e.destination;return n?n.droppableId:t?t.droppableId:null};function YZ(e){return{isDragging:!1,isDropAnimating:!1,isClone:!1,dropAnimation:null,mode:null,draggingOver:null,combineTargetFor:e,combineWith:null}}var $Z={mapped:{type:"SECONDARY",offset:TF,combineTargetFor:null,shouldAnimateDisplacement:!0,snapshot:YZ(null)}};var JZ=Hj((function(){var e=function(){var e=fF((function(e,t){return{x:e,y:t}})),t=fF((function(e,t,n,r,a){return{isDragging:!0,isClone:t,isDropAnimating:Boolean(a),dropAnimation:a,mode:e,draggingOver:n,combineWith:r,combineTargetFor:null}})),n=fF((function(e,n,r,a,o,i,s){return{mapped:{type:"DRAGGING",dropping:null,draggingOver:o,combineWith:i,mode:n,offset:e,dimension:r,forceShouldAnimate:s,snapshot:t(n,a,o,i,null)}}}));return function(r,a){if(r.isDragging){if(r.critical.draggable.id!==a.draggableId)return null;var o=r.current.client.offset,i=r.dimensions.draggables[a.draggableId],s=FL(r.impact),u=(l=r.impact).at&&"COMBINE"===l.at.type?l.at.combine.draggableId:null,c=r.forceShouldAnimate;return n(e(o.x,o.y),r.movementMode,i,a.isClone,s,u,c)}var l;if("DROP_ANIMATING"===r.phase){var f=r.completed;if(f.result.draggableId!==a.draggableId)return null;var d=a.isClone,p=r.dimensions.draggables[a.draggableId],h=f.result,m=h.mode,v=XZ(h),g=function(e){return e.combine?e.combine.draggableId:null}(h),y={duration:r.dropDuration,curve:bB,moveTo:r.newHomeClientOffset,opacity:g?xB.drop:null,scale:g?wB.drop:null};return{mapped:{type:"DRAGGING",offset:r.newHomeClientOffset,dimension:p,dropping:y,draggingOver:v,combineWith:g,mode:m,forceShouldAnimate:null,snapshot:t(m,d,v,g,y)}}}return null}}(),t=function(){var e=fF((function(e,t){return{x:e,y:t}})),t=fF(YZ),n=fF((function(e,n,r){return void 0===n&&(n=null),{mapped:{type:"SECONDARY",offset:e,combineTargetFor:n,shouldAnimateDisplacement:r,snapshot:t(n)}}})),r=function(e){return e?n(TF,e,!0):null},a=function(t,a,o,i){var s=o.displaced.visible[t],u=Boolean(i.inVirtualList&&i.effected[t]),c=JF(o),l=c&&c.draggableId===t?a:null;if(!s){if(!u)return r(l);if(o.displaced.invisible[t])return null;var f=DF(i.displacedBy.point),d=e(f.x,f.y);return n(d,l,!0)}if(u)return r(l);var p=o.displacedBy.point,h=e(p.x,p.y);return n(h,l,s.shouldAnimate)};return function(e,t){if(e.isDragging)return e.critical.draggable.id===t.draggableId?null:a(t.draggableId,e.critical.draggable.id,e.impact,e.afterCritical);if("DROP_ANIMATING"===e.phase){var n=e.completed;return n.result.draggableId===t.draggableId?null:a(t.draggableId,n.result.draggableId,n.impact,n.afterCritical)}return null}}();return function(n,r){return e(n,r)||t(n,r)||$Z}}),{dropAnimationFinished:yB},null,{context:Mz,pure:!0,areStatePropsEqual:KZ})((function(t){var n=(0,e.useRef)(null),r=Yj((function(e){n.current=e}),[]),a=Yj((function(){return n.current}),[]),o=DZ(Bz),i=o.contextId,s=o.dragHandleUsageInstructionsId,u=o.registry,c=DZ(LZ),l=c.type,f=c.droppableId,d=Xj((function(){return{id:t.draggableId,index:t.index,type:l,droppableId:f}}),[t.draggableId,t.index,l,f]),p=t.children,h=t.draggableId,m=t.isEnabled,v=t.shouldRespectForcePress,g=t.canDragInteractiveElements,y=t.isClone,b=t.mapped,x=t.dropAnimationFinished;HZ(),zz(),y||WZ(Xj((function(){return{descriptor:d,registry:u,getDraggableRef:a,canDragInteractiveElements:g,shouldRespectForcePress:v,isEnabled:m}}),[d,u,a,g,v,m]));var w=Xj((function(){return m?{tabIndex:0,role:"button","aria-describedby":s,"data-rbd-drag-handle-draggable-id":h,"data-rbd-drag-handle-context-id":i,draggable:!1,onDragStart:GZ}:null}),[i,s,h,m]),k=Yj((function(e){"DRAGGING"===b.type&&b.dropping&&"transform"===e.propertyName&&x()}),[x,b]),S=Xj((function(){var e=qZ(b),t="DRAGGING"===b.type&&b.dropping?k:null;return{innerRef:r,draggableProps:{"data-rbd-draggable-context-id":i,"data-rbd-draggable-id":h,style:e,onTransitionEnd:t},dragHandleProps:w}}),[i,w,h,b,k,r]),_=Xj((function(){return{draggableId:d.id,type:d.type,source:{index:d.index,droppableId:d.droppableId}}}),[d.droppableId,d.id,d.index,d.type]);return p(S,b.snapshot,_)}));function QZ(t){return DZ(LZ).isUsingCloneFor!==t.draggableId||t.isClone?e.createElement(JZ,t):null}function eV(t){var n="boolean"!==typeof t.isDragDisabled||!t.isDragDisabled,r=Boolean(t.disableInteractiveElementBlocking),a=Boolean(t.shouldRespectForcePress);return e.createElement(QZ,QP({},t,{isClone:!1,isEnabled:n,canDragInteractiveElements:r,shouldRespectForcePress:a}))}var tV=function(e,t){return e===t.droppable.type},nV=function(e,t){return t.draggables[e.draggable.id]};var rV={mode:"standard",type:"DEFAULT",direction:"vertical",isDropDisabled:!1,isCombineEnabled:!1,ignoreContainerClipping:!1,renderClone:null,getContainerForClone:function(){return document.body||yF(!1),document.body}},aV=Hj((function(){var e={placeholder:null,shouldAnimatePlaceholder:!0,snapshot:{isDraggingOver:!1,draggingOverWith:null,draggingFromThisWith:null,isUsingPlaceholder:!1},useClone:null},t=QP({},e,{shouldAnimatePlaceholder:!1}),n=fF((function(e){return{draggableId:e.id,type:e.type,source:{index:e.index,droppableId:e.droppableId}}})),r=fF((function(r,a,o,i,s,u){var c=s.descriptor.id;if(s.descriptor.droppableId===r){var l=u?{render:u,dragging:n(s.descriptor)}:null,f={isDraggingOver:o,draggingOverWith:o?c:null,draggingFromThisWith:c,isUsingPlaceholder:!0};return{placeholder:s.placeholder,shouldAnimatePlaceholder:!1,snapshot:f,useClone:l}}if(!a)return t;if(!i)return e;var d={isDraggingOver:o,draggingOverWith:c,draggingFromThisWith:null,isUsingPlaceholder:!0};return{placeholder:s.placeholder,shouldAnimatePlaceholder:!0,snapshot:d,useClone:null}}));return function(n,a){var o=a.droppableId,i=a.type,s=!a.isDropDisabled,u=a.renderClone;if(n.isDragging){var c=n.critical;if(!tV(i,c))return t;var l=nV(c,n.dimensions),f=FL(n.impact)===o;return r(o,s,f,f,l,u)}if("DROP_ANIMATING"===n.phase){var d=n.completed;if(!tV(i,d.critical))return t;var p=nV(d.critical,n.dimensions);return r(o,s,XZ(d.result)===o,FL(d.impact)===o,p,u)}if("IDLE"===n.phase&&n.completed&&!n.shouldFlush){var h=n.completed;if(!tV(i,h.critical))return t;var m=FL(h.impact)===o,v=Boolean(h.impact.at&&"COMBINE"===h.impact.at.type),g=h.critical.droppable.id===o;return m?v?e:t:g?e:t}return t}}),{updateViewportMaxScroll:function(e){return{type:"UPDATE_VIEWPORT_MAX_SCROLL",payload:e}}},null,{context:Mz,pure:!0,areStatePropsEqual:KZ})((function(n){var r=(0,e.useContext)(Bz);r||yF(!1);var a=r.contextId,o=r.isMovementAllowed,i=(0,e.useRef)(null),s=(0,e.useRef)(null),u=n.children,c=n.droppableId,l=n.type,f=n.mode,d=n.direction,p=n.ignoreContainerClipping,h=n.isDropDisabled,m=n.isCombineEnabled,v=n.snapshot,g=n.useClone,y=n.updateViewportMaxScroll,b=n.getContainerForClone,x=Yj((function(){return i.current}),[]),w=Yj((function(e){i.current=e}),[]),k=(Yj((function(){return s.current}),[]),Yj((function(e){s.current=e}),[]));Zz();var S=Yj((function(){o()&&y({maxScroll:HB()})}),[o,y]);!function(t){var n=(0,e.useRef)(null),r=DZ(Bz),a=Lz("droppable"),o=r.registry,i=r.marshal,s=Uz(t),u=Xj((function(){return{id:t.droppableId,type:t.type,mode:t.mode}}),[t.droppableId,t.mode,t.type]),c=(0,e.useRef)(u),l=Xj((function(){return fF((function(e,t){n.current||yF(!1);var r={x:e,y:t};i.updateDroppableScroll(u.id,r)}))}),[u.id,i]),f=Yj((function(){var e=n.current;return e&&e.env.closestScrollable?NZ(e.env.closestScrollable):TF}),[]),d=Yj((function(){var e=f();l(e.x,e.y)}),[f,l]),p=Xj((function(){return dF(d)}),[d]),h=Yj((function(){var e=n.current,t=MZ(e);e&&t||yF(!1),e.scrollOptions.shouldPublishImmediately?d():p()}),[p,d]),m=Yj((function(e,t){n.current&&yF(!1);var a=s.current,o=a.getDroppableRef();o||yF(!1);var i=CZ(o),c={ref:o,descriptor:u,env:i,scrollOptions:t};n.current=c;var l=TZ({ref:o,descriptor:u,env:i,windowScroll:e,direction:a.direction,isDropDisabled:a.isDropDisabled,isCombineEnabled:a.isCombineEnabled,shouldClipSubject:!a.ignoreContainerClipping}),f=i.closestScrollable;return f&&(f.setAttribute(Sz.contextId,r.contextId),f.addEventListener("scroll",h,AZ(c.scrollOptions))),l}),[r.contextId,u,h,s]),v=Yj((function(){var e=n.current,t=MZ(e);return e&&t||yF(!1),NZ(t)}),[]),g=Yj((function(){var e=n.current;e||yF(!1);var t=MZ(e);n.current=null,t&&(p.cancel(),t.removeAttribute(Sz.contextId),t.removeEventListener("scroll",h,AZ(e.scrollOptions)))}),[h,p]),y=Yj((function(e){var t=n.current;t||yF(!1);var r=MZ(t);r||yF(!1),r.scrollTop+=e.y,r.scrollLeft+=e.x}),[]),b=Xj((function(){return{getDimensionAndWatchScroll:m,getScrollWhileDragging:v,dragStopped:g,scroll:y}}),[g,m,v,y]),x=Xj((function(){return{uniqueId:a,descriptor:u,callbacks:b}}),[b,u,a]);Nz((function(){return c.current=x.descriptor,o.droppable.register(x),function(){n.current&&g(),o.droppable.unregister(x)}}),[b,u,g,x,i,o.droppable]),Nz((function(){n.current&&i.updateDroppableIsEnabled(c.current.id,!t.isDropDisabled)}),[t.isDropDisabled,i]),Nz((function(){n.current&&i.updateDroppableIsCombineEnabled(c.current.id,t.isCombineEnabled)}),[t.isCombineEnabled,i])}({droppableId:c,type:l,mode:f,direction:d,isDropDisabled:h,isCombineEnabled:m,ignoreContainerClipping:p,getDroppableRef:x});var _=e.createElement(BZ,{on:n.placeholder,shouldAnimate:n.shouldAnimatePlaceholder},(function(t){var n=t.onClose,r=t.data,o=t.animate;return e.createElement(FZ,{placeholder:r,onClose:n,innerRef:k,animate:o,contextId:a,onTransitionEnd:S})})),N=Xj((function(){return{innerRef:w,placeholder:_,droppableProps:{"data-rbd-droppable-id":c,"data-rbd-droppable-context-id":a}}}),[a,c,_,w]),E=g?g.dragging.draggableId:null,C=Xj((function(){return{droppableId:c,type:l,isUsingCloneFor:E}}),[c,E,l]);return e.createElement(LZ.Provider,{value:C},u(N,v),function(){if(!g)return null;var n=g.dragging,r=g.render,a=e.createElement(QZ,{draggableId:n.draggableId,index:n.source.index,isClone:!0,isEnabled:!0,shouldRespectForcePress:!1,canDragInteractiveElements:!0},(function(e,t){return r(e,t,n)}));return t.createPortal(a,b())}())}));function oV(){return oV=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},oV.apply(this,arguments)}function iV(){}aV.defaultProps=rV;var sV=function(e,t){return function(n){return Math.max(e,Math.min(n,t))}};function uV(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function cV(e,t){for(var n=oV({},t);e;)n.x-=e.offsetLeft,n.y-=e.offsetTop,e=e.offsetParent;return n}var lV=["https://images.unsplash.com/photo-1598635416326-ff055cbb02cb?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1935&q=80","https://images.unsplash.com/photo-1644780295337-452d26bc1f89?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=2071&q=80","https://images.unsplash.com/photo-1644678961183-b57d0b9423d6?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1974&q=80","https://images.unsplash.com/photo-1644869432047-fa8bdbe849cd?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1935&q=80","https://images.unsplash.com/photo-1567637903900-7a2f05e37e1a?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1974&q=80","https://images.unsplash.com/photo-1644574739831-d19ded59cae8?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1974&q=80","https://images.unsplash.com/photo-1644748865694-2db1be00e13a?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1935&q=80","https://images.unsplash.com/photo-1637336659506-93ee3acccd85?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1974&q=80","https://images.unsplash.com/photo-1644840379571-2a973eee0726?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=2070&q=80","https://images.unsplash.com/photo-1644805424176-e426671f33ec?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1935&q=80","https://images.unsplash.com/photo-1644773741827-d635af7357b4?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1935&q=80","https://images.unsplash.com/photo-1644707386365-117da5d3fdc4?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1932&q=80","https://images.unsplash.com/photo-1644667621462-4938986c3a41?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=2077&q=80","https://images.unsplash.com/photo-1644604992281-5c07ca56fa5b?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1932&q=80","https://images.unsplash.com/photo-1644657167747-49910669ac24?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1974&q=80","https://images.unsplash.com/photo-1644530633761-094c893a6558?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1974&q=80","https://images.unsplash.com/photo-1644601397307-ae67d3024d46?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1935&q=80"],fV={Cursor:0,PanZoom:5,Text:1,Image:2,Shape:3,Video:4},dV={1:"Text",2:"Image",3:"Shape",4:"Video"},pV=4,hV=1,mV=2,vV=3,gV=5,yV=6,bV={1:4,2:3,3:2,4:1},xV=[{id:1,duration:5,zones:[{id:1,type:3,position:[[0,0,24,24],[696,1056,720,1080]],sequence:1,animations:[],content:{color:"#f3f4f6"},finalPosition:{left:0,top:0,width:720,height:1080}},{id:2,type:3,position:[[720,0,744,24],[1896,1056,1920,1080]],sequence:1,animations:[],content:{color:"#f3f4f6"},finalPosition:{left:720,top:0,width:1200,height:1080}},{id:3,type:2,position:[[744,24,768,48],[1296,504,1320,528]],sequence:1,animations:[],content:{src:"https://images.unsplash.com/photo-1598635416326-ff055cbb02cb?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1935&q=80"},finalPosition:{left:744,top:24,width:576,height:504}},{id:4,type:2,position:[[1344,24,1368,48],[1872,504,1896,528]],sequence:1,animations:[],content:{src:"https://images.unsplash.com/photo-1644780295337-452d26bc1f89?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=2071&q=80"},finalPosition:{left:1344,top:24,width:552,height:504}},{id:5,type:2,position:[[744,552,768,576],[1296,1032,1320,1056]],sequence:1,animations:[],content:{src:"https://images.unsplash.com/photo-1644678961183-b57d0b9423d6?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1974&q=80"},finalPosition:{left:744,top:552,width:576,height:504}},{id:6,type:2,position:[[1344,552,1368,576],[1872,1032,1896,1056]],sequence:1,animations:[],content:{src:"https://images.unsplash.com/photo-1644869432047-fa8bdbe849cd?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1935&q=80"},finalPosition:{left:1344,top:552,width:552,height:504}},{id:7,type:1,position:[[24,24,48,48],[672,168,696,192]],sequence:1,animations:[],content:{type:"doc",content:[{type:"paragraph",content:[{type:"text",marks:[{type:"bold"},{type:"textStyle",attrs:{fontSize:109}}],text:"Lorem ipsum"}]}]},finalPosition:{left:24,top:24,width:672,height:168}},{id:8,type:1,position:[[24,216,48,240],[672,1032,696,1056]],sequence:1,animations:[],content:{type:"doc",content:[{type:"paragraph",content:[{type:"text",marks:[{type:"textStyle",attrs:{fontSize:43}}],text:"Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Turpis egestas maecenas pharetra convallis. Cras sed felis eget velit aliquet sagittis id consectetur. Augue eget arcu dictum varius duis at consectetur lorem donec. Odio pellentesque diam volutpat commodo."}]}]},finalPosition:{left:24,top:216,width:672,height:840}}]},{id:2,duration:5,zones:[{id:9,type:3,position:[[0,0,24,24],[1896,1056,1920,1080]],sequence:1,animations:[],content:{color:"#f3f4f6"},finalPosition:{left:0,top:0,width:1920,height:1080}},{id:10,type:2,position:[[24,24,48,48],[672,240,696,264]],sequence:1,animations:[],content:{src:"https://images.unsplash.com/photo-1598635416326-ff055cbb02cb?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1935&q=80"},finalPosition:{left:24,top:24,width:672,height:240}},{id:11,type:2,position:[[720,24,744,48],[1056,504,1080,528]],sequence:1,animations:[],content:{src:"https://images.unsplash.com/photo-1644780295337-452d26bc1f89?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=2071&q=80"},finalPosition:{left:720,top:24,width:360,height:504}},{id:12,type:2,position:[[24,288,48,312],[336,720,360,744]],sequence:1,animations:[],content:{src:"https://images.unsplash.com/photo-1644678961183-b57d0b9423d6?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1974&q=80"},finalPosition:{left:24,top:288,width:336,height:456}},{id:13,type:2,position:[[384,288,408,312],[672,504,696,528]],sequence:1,animations:[],content:{src:"https://images.unsplash.com/photo-1644869432047-fa8bdbe849cd?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1935&q=80"},finalPosition:{left:384,top:288,width:312,height:240}},{id:14,type:2,position:[[384,552,408,576],[840,1032,864,1056]],sequence:1,animations:[],content:{src:"https://images.unsplash.com/photo-1567637903900-7a2f05e37e1a?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1974&q=80"},finalPosition:{left:384,top:552,width:480,height:504}},{id:15,type:2,position:[[24,768,48,792],[336,1032,360,1056]],sequence:1,animations:[],content:{src:"https://images.unsplash.com/photo-1644574739831-d19ded59cae8?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1974&q=80"},finalPosition:{left:24,top:768,width:336,height:288}},{id:16,type:2,position:[[1104,264,1128,288],[1536,504,1560,528]],sequence:1,animations:[],content:{src:"https://images.unsplash.com/photo-1644748865694-2db1be00e13a?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1935&q=80"},finalPosition:{left:1104,top:264,width:456,height:264}},{id:17,type:2,position:[[1104,24,1128,48],[1872,216,1896,240]],sequence:1,animations:[],content:{src:"https://images.unsplash.com/photo-1637336659506-93ee3acccd85?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1974&q=80"},finalPosition:{left:1104,top:24,width:792,height:216}},{id:18,type:2,position:[[1584,264,1608,288],[1872,744,1896,768]],sequence:1,animations:[],content:{src:"https://images.unsplash.com/photo-1644840379571-2a973eee0726?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=2070&q=80"},finalPosition:{left:1584,top:264,width:312,height:504}},{id:19,type:2,position:[[888,552,912,576],[1296,744,1320,768]],sequence:1,animations:[],content:{src:"https://images.unsplash.com/photo-1644805424176-e426671f33ec?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1935&q=80"},finalPosition:{left:888,top:552,width:432,height:216}},{id:20,type:2,position:[[1344,552,1368,576],[1536,744,1560,768]],sequence:1,animations:[],content:{src:"https://images.unsplash.com/photo-1644773741827-d635af7357b4?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1935&q=80"},finalPosition:{left:1344,top:552,width:216,height:216}},{id:21,type:2,position:[[888,792,912,816],[1128,1032,1152,1056]],sequence:1,animations:[],content:{src:"https://images.unsplash.com/photo-1644707386365-117da5d3fdc4?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1932&q=80"},finalPosition:{left:888,top:792,width:264,height:264}},{id:22,type:2,position:[[1176,792,1200,816],[1872,1032,1896,1056]],sequence:1,animations:[],content:{src:"https://images.unsplash.com/photo-1644667621462-4938986c3a41?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=2077&q=80"},finalPosition:{left:1176,top:792,width:720,height:264}}]}],wV={id:0,duration:5,zones:[]},kV={id:0,type:0,content:{},index:0,level:0,sequence:1,animations:[],sequenceOffset:"",parent:null,childrens:[],overlappings:[],surrounding:{},corners:{},finalPosition:{},position:[]},SV=function(t){var n=(0,e.useState)(!1),r=(0,a.Z)(n,2),o=r[0],i=r[1],s=(0,e.useState)(!1),c=(0,a.Z)(s,2),l=c[0],f=c[1],d=(0,e.useState)(null),p=(0,a.Z)(d,2),h=p[0],m=p[1],v=(0,e.useState)(null),g=(0,a.Z)(v,2),y=g[0],b=g[1],x=(0,e.useState)(t.gridSize),w=(0,a.Z)(x,2),k=w[0],S=w[1],_=(0,e.useState)(null),N=(0,a.Z)(_,2),E=N[0],C=N[1];(0,e.useEffect)((function(){S(T(t.gridSize))}),[t.adjusmentWidth]);var T=function(e){return t.adjusmentWidth/1920*e},I=eu(t.mouseRef,{fps:120}),O=function(e){return 1920/t.adjusmentWidth*e},A=function(e){var n={left:(e=e[0][0]<=e[1][2]&&e[0][1]<=e[1][3]?[e[0],e[1]]:[e[1],e[0]])[0][0]<e[1][0]?e[0][0]:e[1][0],top:e[0][1]<e[1][1]?e[0][1]:e[1][1],width:e[1][2]>e[0][0]?e[1][2]-e[0][0]:e[0][2]-e[1][0],height:e[1][3]>e[0][1]?e[1][3]-e[0][1]:e[0][3]-e[1][1]};return{finalPosition:n,position:e=[[n.left,n.top,n.left+t.gridSize,n.top+t.gridSize],[n.left+n.width-t.gridSize,n.top+n.height-t.gridSize,n.left+n.width,n.top+n.height]]}},D=function(e,t){var n=M(e,t),r=null;null===y?(r=A([n,n]),b(r)):(r=A([E,n]),b(u({},r)))},M=function(e,n){var r=O(e),a=O(n),o=r-r%t.gridSize,i=a-a%t.gridSize;return[o,i,o+t.gridSize,i+t.gridSize]};return(0,e.useEffect)((function(){!t.hidden&&I.isOver&&l?I.isDown?(i(!0),D(I.x,I.y),m({x:I.x,y:I.y})):o&&!I.isDown?(i(!1),t.onClick(y),C(null),b(null),f(!1),m(null)):I.isDown||(i(!1),t.onClick(y),C(null),b(null),m(null),f(!1)):o&&i(!1)}),[I.isDown,I.isOver,t.hidden,I.x,I.y]),(0,re.jsxs)(re.Fragment,{children:[(0,re.jsx)("button",{className:"w-full h-full pointer-events-auto z-10 ".concat(t.hidden||!I.isOver?"hidden":""),onMouseDown:function(e){return function(e){0===e.button&&(C(M(I.x,I.y)),D(I.x,I.y),f(!0))}(e)},children:(0,re.jsx)("div",{className:"bg-blue-500 rounded-sm cursor-pointer pointer-events-none",style:{position:"absolute",left:I.x-I.x%k,top:I.y-I.y%k,width:k,height:k}})}),null!==y&&(0,re.jsx)("div",{style:{position:"absolute",left:T(y.finalPosition.left),top:T(y.finalPosition.top),width:T(y.finalPosition.width),height:T(y.finalPosition.height)},className:"bg-blue-500 opacity-40 z-0 pointer-event-none rounded-sm",children:y.finalPosition.width===y.finalPosition.height&&null!==h&&(0,re.jsx)("svg",{width:"100%",height:"100%",viewBox:"0 0 100 100",preserveAspectRatio:"none",children:T(y.finalPosition.left)!==h.x-h.x%k&&h.y-h.y%k!==T(y.finalPosition.top)||T(y.finalPosition.left)===h.x-h.x%k&&h.y-h.y%k===T(y.finalPosition.top)?(0,re.jsx)("line",{x1:"0",y1:"0",x2:"100",y2:"100",vectorEffect:"non-scaling-stroke",stroke:"white",strokeWidth:1.5}):T(y.finalPosition.left)===h.x-h.x%k&&h.y-h.y%k!==T(y.finalPosition.top)||T(y.finalPosition.left)!==h.x-h.x%k&&h.y-h.y%k===T(y.finalPosition.top)?(0,re.jsx)("line",{x1:"100",y1:"0",x2:"0",y2:"100",vectorEffect:"non-scaling-stroke",stroke:"white",strokeWidth:1.5}):(0,re.jsx)(re.Fragment,{})})},"tempZone-key")]})},_V=function(t){var n=t.isHidden,o=(0,e.useState)(31),i=(0,a.Z)(o,2),s=i[0],c=i[1],l=(0,e.useState)(4),f=(0,a.Z)(l,2),d=f[0],p=f[1],h=(0,e.useState)(0),m=(0,a.Z)(h,2),v=m[0],g=m[1],y=_P(TP),b=(0,a.Z)(y,2),k=b[0],S=b[1],_=(0,e.useState)({x:0,y:0}),N=(0,a.Z)(_,2),E=N[0],C=N[1],T=(0,e.useState)(0),I=(0,a.Z)(T,2),O=I[0],A=I[1],D=(0,e.useState)(0),R=(0,a.Z)(D,2),F=R[0],z=R[1],Z=(0,e.useState)([]),q=(0,a.Z)(Z,2),H=q[0],Y=q[1],$=(0,e.useState)(null),Q=(0,a.Z)($,2),ee=Q[0],te=Q[1],ne=_P(CP),ae=(0,a.Z)(ne,2),oe=ae[0],ie=ae[1],se=(0,e.useState)([]),ue=(0,a.Z)(se,2),ce=(ue[0],ue[1],(0,e.useState)([xV[0]])),le=(0,a.Z)(ce,2),fe=le[0],de=le[1],pe=(0,e.useState)(0),he=(0,a.Z)(pe,2),me=he[0],ve=he[1],ge=_P(NP),ye=(0,a.Z)(ge,2),be=ye[0],xe=ye[1],we=_P(EP),ke=(0,a.Z)(we,2),Se=ke[0],_e=ke[1],Ne=(0,e.useState)(2),Ee=(0,a.Z)(Ne,2),Ce=Ee[0],Te=Ee[1],Ie=(0,e.useState)(null),Oe=(0,a.Z)(Ie,2),Ae=Oe[0],De=Oe[1],Me=(0,e.useState)(.8),Re=(0,a.Z)(Me,2),Pe=Re[0],je=Re[1],Fe=(0,e.useState)(""),Le=(0,a.Z)(Fe,2),Be=(Le[0],Le[1],(0,e.useState)("Cursor")),ze=(0,a.Z)(Be,2),Ze=ze[0],Ve=ze[1],Ue=(0,e.useState)("Cursor"),qe=(0,a.Z)(Ue,2),We=qe[0],He=qe[1],Ge=(0,e.useState)(!1),Ke=(0,a.Z)(Ge,2),Xe=Ke[0],Ye=Ke[1],$e=(0,e.useState)(!0),Je=(0,a.Z)($e,2),Qe=Je[0],et=Je[1],tt=(0,e.useState)(!1),nt=(0,a.Z)(tt,2),rt=nt[0],at=nt[1],ot=(0,e.useState)(12),it=(0,a.Z)(ot,2),st=it[0],ut=(it[1],(0,e.useState)(!1)),ct=(0,a.Z)(ut,2),lt=ct[0],ft=ct[1],dt=(0,e.useState)(!1),pt=(0,a.Z)(dt,2),ht=pt[0],vt=pt[1],gt=(0,e.useRef)(null),yt=(0,e.useRef)(null),bt=(0,e.useRef)(null),xt=((0,mt.useMediaQuery)({query:"(max-width: 1024px)"}),Ls()),wt=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.enablePan,r=void 0===n||n,o=t.enableZoom,i=void 0===o||o,s=t.requireCtrlToZoom,u=void 0!==s&&s,c=t.disableWheel,l=void 0!==c&&c,f=t.panOnDrag,d=void 0===f||f,p=t.preventClickOnPan,h=void 0===p||p,m=t.zoomSensitivity,v=void 0===m?.01:m,g=t.minZoom,y=void 0===g?0:g,b=t.maxZoom,x=void 0===b?1/0:b,w=t.minX,k=void 0===w?-1/0:w,S=t.maxX,_=void 0===S?1/0:S,N=t.minY,E=void 0===N?-1/0:N,C=t.maxY,T=void 0===C?1/0:C,I=t.initialZoom,O=void 0===I?1:I,A=t.initialPan,D=void 0===A?{x:0,y:0}:A,M=t.onPanStart,R=void 0===M?iV:M,P=t.onPan,j=void 0===P?iV:P,F=t.onPanEnd,L=void 0===F?iV:F,B=t.onZoom,z=void 0===B?iV:B,Z=(0,e.useRef)(null),V=function(){var t=(0,e.useState)(!1),n=(0,a.Z)(t,2)[1];return(0,e.useCallback)((function(){n((function(e){return!e}))}),[])}(),U=function(t){var n=(0,e.useRef)(t);return[(0,e.useCallback)((function(){return n.current}),[]),(0,e.useCallback)((function(e){return n.current="function"==typeof e?e(n.current):e,n.current}),[])]}({wasPanning:!1,isPanning:!1,prevPointers:[],prevZoom:1,center:{x:0,y:0},transform:oV({},D,{zoom:O})}),q=(0,a.Z)(U,2),W=q[0],H=q[1],G=(0,e.useMemo)((function(){return sV(k,_)}),[k,_]),K=(0,e.useMemo)((function(){return sV(E,T)}),[E,T]),X=(0,e.useMemo)((function(){return sV(y,x)}),[y,x]),Y=(0,e.useCallback)((function(e){var t=Z.current,n=W();return t&&(n.transform="function"==typeof e?e(n.transform):e,n.center.x=(t.offsetWidth/2-n.transform.x)/n.transform.zoom,n.center.y=(t.offsetHeight/2-n.transform.y)/n.transform.zoom,H(n),V()),n.transform}),[W,H,V]),$=(0,e.useCallback)((function(e){return Y((function(t){var n=t.x,r=t.y,a=t.zoom,o="function"==typeof e?e({x:n,y:r}):e;return{x:G(o.x),y:K(o.y),zoom:a}}))}),[G,K,Y]),J=(0,e.useCallback)((function(e,t){var n=Z.current;n&&Y((function(r){var a=r.x,o=r.y,i=r.zoom,s=X("function"==typeof e?e(i):e),u=t?{x:t.x-n.offsetWidth/2,y:t.y-n.offsetHeight/2}:{x:0,y:0};return{x:G(a+(u.x-a)*(i-s)/i),y:K(o+(u.y-o)*(i-s)/i),zoom:s}}))}),[G,K,X,Y]),Q=(0,e.useCallback)((function(e){if(r){var t=W();t.prevPointers=e,t.isPanning=!0,H(t),R(e,t.transform)}}),[r,R,H,W]),ee=(0,e.useCallback)((function(e){var t=W();if(t.isPanning){t.wasPanning=!0;var n=t.prevPointers;t.prevPointers=e,H(t);for(var r=0,a=0,o=Math.min(e.length,n.length,2),i=0;i<o;i++)r+=e[i].x-n[i].x,a+=e[i].y-n[i].y;r/=o,a/=o;var s=2===o?uV(e[0],e[1])/uV(n[0],n[1]):1;$((function(e){var t=e.x,n=e.y;return{x:t+r,y:n+a}})),J((function(e){return e*s})),V(),j(e,W().transform)}}),[j,$,J,W,H,V]),te=(0,e.useCallback)((function(){W().isPanning&&(H((function(e){return oV({},e,{isPanning:!1})})),L())}),[L,W,H]),ne=(0,e.useCallback)((function(e){var t=W();h&&t.wasPanning&&(H((function(e){return oV({},e,{wasPanning:!1})})),e.stopPropagation())}),[h,W,H]),re=(0,e.useCallback)((function(e){if(i&&Z.current)if(e.preventDefault(),!u||e.ctrlKey){var t=cV(Z.current,{x:e.pageX,y:e.pageY}),n=e.deltaY;1===e.deltaMode&&(n*=15),J((function(e){return e*Math.pow(1-v,n)}),t),z(W().transform)}else $((function(t){var n=t.x,r=t.y;return{x:n-e.deltaX,y:r-e.deltaY}}))}),[i,u,v,z,$,J,W]),ae=(0,e.useCallback)((function(e){e.preventDefault(),H((function(e){return oV({},e,{prevZoom:e.transform.zoom})}))}),[H]),oe=(0,e.useCallback)((function(e){e.preventDefault();var t=cV(Z.current,{x:e.pageX,y:e.pageY});J(W().prevZoom*e.scale,t),z(W().transform)}),[J,z,W]),ie=(0,e.useCallback)((function(e){if(e)l||e.addEventListener("wheel",re),e.addEventListener("gesturestart",ae),e.addEventListener("gesturechange",oe),e.addEventListener("gestureend",oe);else if(Z.current)return function(){var e=Z.current;e&&(l||e.removeEventListener("wheel",re),e.removeEventListener("gesturestart",ae),e.removeEventListener("gesturechange",oe),e.removeEventListener("gestureend",oe))};Z.current=e}),[re,ae,oe,l]),se=(0,e.useCallback)((function(e){return Q(Array.from(e.touches).map((function(e){return{x:e.pageX,y:e.pageY}})))}),[Q]),ue=(0,e.useCallback)((function(e){return ee(Array.from(e.touches).map((function(e){return{x:e.pageX,y:e.pageY}})))}),[ee]),ce=(0,e.useCallback)((function(e){0===e.touches.length?te():Q(Array.from(e.touches).map((function(e){return{x:e.pageX,y:e.pageY}})))}),[te,Q]),le=(0,e.useCallback)((function(e){return Q([{x:e.pageX,y:e.pageY}])}),[Q]),fe=(0,e.useCallback)((function(e){return ee([{x:e.pageX,y:e.pageY}])}),[ee]),de=W();return{container:Z.current,setContainer:ie,transform:"translate3D(".concat(de.transform.x,"px, ").concat(de.transform.y,"px, 0) scale(").concat(de.transform.zoom,")"),center:de.center,pan:{x:de.transform.x,y:de.transform.y},zoom:de.transform.zoom,setPan:$,setZoom:J,panZoomHandlers:d?{onTouchStart:se,onTouchMove:ue,onTouchEnd:ce,onTouchCancel:ce,onMouseDown:le,onMouseMove:fe,onMouseUp:te,onMouseLeave:te,onClickCapture:ne}:{}}}({minZoom:1,maxZoom:6,enablePan:"PanZoom"===Ze&&lt,enableZoom:"PanZoom"===Ze,zoomSensitivity:.001}),kt=wt.setContainer,St=wt.panZoomHandlers,_t=wt.setPan,Nt=wt.setZoom,Ct=wt.pan,It=wt.zoom,Ot=(wt.transform,qs(["Control","Shift","Z"],(function(){Xt(1)}),{overrideSystem:!0,ignoreInputFields:!0,repeatOnHold:!1})),At=qs(["Control","Z"],(function(){Xt(-1)}),{overrideSystem:!0,ignoreInputFields:!0,repeatOnHold:!1}),Dt=qs(["Control","s"],(function(){Ft(Se.id,Se)}),{overrideSystem:!0,ignoreInputFields:!0,repeatOnHold:!1}),Mt=function(e){" "===e.key&&"true"!==e.target.contentEditable&&vt(!0)},Rt=function(e){" "===e.key&&"true"!==e.target.contentEditable&&vt(!1)};(0,e.useEffect)((function(){return n||(xe(xV),_e(xV[0]),te(null),ie(null),window.addEventListener("keydown",Mt),window.addEventListener("keyup",Rt)),function(){window.removeEventListener("keydown",Mt),window.removeEventListener("keyup",Rt),At.flushHeldKeys(),Ot.flushHeldKeys(),Dt.flushHeldKeys()}}),[n]),(0,e.useEffect)((function(){if(gt.current){var e=gt.current.offsetWidth,t=gt.current.offsetHeight,n=.75*e,r=n/16*9;r>=.92*t&&(n=(r=.92*t)/9*16),S(n),A(e),Nt(1),C({x:(e-n)/2,y:(t-r)/2})}bt.current&&z(bt.current.offsetWidth)}),[xt]),(0,e.useEffect)((function(){null!==H&&(H.forEach((function(e){Ho.set("#".concat(dV[e.type],"-").concat(e.id),{opacity:1})})),on((0,r.Z)(H),!1))}),[H]),(0,e.useEffect)((function(){1===It&&lt?(_t({x:0,y:0}),ft(!1)):!lt&&It>1&&ft(!0)}),[It]),(0,e.useEffect)((function(){ht?(He(Ze),Ve("PanZoom")):Ve(We)}),[ht]);var Pt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1,t=u(u({},wV),{},{id:d});if(e<0)xe((function(e){return[].concat((0,r.Z)(e),[t])}));else{var n=(0,r.Z)(be);n.splice(e,0,t),xe(n)}jt(t),p((function(e){return e+1}))},jt=function(e){_e(u({},e)),de([e]),ve(0),et(!0),ie(null),te(null)},Ft=function(e,t){var n=be.map((function(n){return n.id===e?t:n}));xe(n),et(!0)},Lt=function(e){_e(u(u({},Se),e)),Kt(u(u({},Se),e)),et(sn(be.find((function(e){return e.id===Se.id})),u(u({},Se),e)))},Bt=function(e){Vt(u(u(u({},kV),e),{},{id:s,type:fV[Ze]})),Lt({zones:[].concat((0,r.Z)(Se.zones),[u(u(u({},kV),e),{},{id:s,type:fV[Ze]})])}),c((function(e){return e+1}))},zt=function(e){var t=Se.zones.filter((function(t){return t.id!==e}));oe===e&&(ie(null),te(null)),Lt({zones:t})},Zt=function(e,t){var n=Se.zones.map((function(n){return n.id===e?t:n}));e===oe&&te(u({},t)),Lt({zones:n})},Vt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};"Cursor"!==Ze&&Ve("Cursor"),e.id&&oe===e.id?(console.log("Unselect"),ie(null),te(null)):e.id&&(console.log("Select"),ie(e.id),te(u({},e)))},Ut=function(e){if(fV[Ze]===fV.Image){var t=v+1;g(t<lV.length?t:0),Bt(u(u({},kV),{},{content:{src:lV[v]}},e))}else Bt(fV[Ze]===fV.Shape?u(u({},kV),{},{content:{color:"#f3f4f6"}},e):u(u({},kV),e))},qt=function(e,t){var n=[];e.animations.includes(t)?n=e.animations.filter((function(e){return e!==t})):e.animations.includes(bV[t])?(n=e.animations.filter((function(e){return e!==bV[t]}))).push(t):n.push(t),Zt(e.id,u(u({},e),{},{animations:n})),Qt(),on([u(u({},e),{},{animations:n})],!1,0)},Wt=function(e){var t=e.sequence+1;if(t>=Ce){var n=Math.max.apply(Math,Se.zones.map((function(t){var n=t.id,r=t.sequence;return n===e.id?0:r})));n+1<t?t=1:Te(n+1)}Zt(e.id,u(u({},e),{},{sequence:t}))},Ht=function(e,t){if(e.destination){var n=gn("slides"===t?be:Se.zones,e.source.index,e.destination.index);if("slides"===t)xe((0,r.Z)(n));else{var a=(0,r.Z)(n).map((function(e){return u({},e)}));a.forEach((function(e,t){e.index=t})),Lt({zones:a})}at(!1)}},Gt=function(){at(!0)},Kt=function(e){if(!sn(fe[fe.length-1],e)){var t=(0,r.Z)(fe);me<fe.length-1&&(t=t.filter((function(e,t){return t<=me}))),de([].concat((0,r.Z)(t),[e])),ve(t.length)}},Xt=function(e){var t,n=me,r=fe[n];n>0&&e<0?(r=fe[n-1],n--):n+1<fe.length&&e>0&&(r=fe[n+1],n++),ve(n),_e(r),et(sn(be.find((function(e){return e.id===Se.id})),r)),null!==oe&&(t=r.zones.find((function(e){return e.id===oe})),te(u({},t)))},Yt=function(e){He(Ze),Ve(e),ie(null)},$t=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(Qt(),e){var t=nn(en(Tt.utils.deepCopy(Se.zones)));Y((0,r.Z)(t))}else{var n=[];be.forEach((function(e,t){var a=nn(en(Tt.utils.deepCopy(e.zones))).map((function(e){return e.sequence+=100*t,e}));n=[].concat((0,r.Z)(n),(0,r.Z)(a))})),Y((0,r.Z)(n))}Ye(!0)},Jt=function(){Qt(),Ye(!1),null!==H&&(H.forEach((function(e){Ho.set("#".concat(dV[e.type],"-").concat(e.id),{opacity:1})})),Y(null))},Qt=function(){null!==Ae&&(Ae.progress(1),Ae.clear(),De(null))},en=function(e){return e.forEach((function(e,t){e.index=t,e.level=0,e.parent=null,e.childrens=[],e.overlappings=[],e.corners=fn(e.finalPosition),e.surrounding={left:[],right:[],top:[],bottom:[]}})),e.forEach((function(t,n){e.forEach((function(e,r){if(n!==r){var a=!1,o=!1,i=!1;pn(t.finalPosition,e.finalPosition)&&n>r?(t.parent=e,a=!0):pn(e.finalPosition,t.finalPosition)&&n<r?(t.childrens.push(e),o=!0):mn(t.finalPosition,e.finalPosition)&&n>r&&(t.overlappings.push(e),i=!0),(a||i)&&(t.level=e.level+1),o||(t.corners.tl.x>=e.corners.tl.x&&(a&&0!==e.corners.tl.x||!a)&&vn(t.corners,e.corners,"y")&&t.surrounding.left.push(e),t.corners.tr.x<=e.corners.tr.x&&(a&&1920!==e.corners.tr.x||!a)&&vn(t.corners,e.corners,"y")&&t.surrounding.right.push(e),t.corners.tl.y>=e.corners.tl.y&&(a&&0!==e.corners.tl.y||!a)&&vn(t.corners,e.corners,"x")&&t.surrounding.top.push(e),t.corners.bl.y<=e.corners.bl.y&&(a&&1080!==e.corners.bl.y||!a)&&vn(t.corners,e.corners,"x")&&t.surrounding.bottom.push(e))}}))})),e},tn=function(e,t,n){switch(console.log("sortZones",t,n),t){case"fromCenter":return e.sort((function(e,t){var r=e.finalPosition.left+e.finalPosition.width/2-960,a=e.finalPosition.top+e.finalPosition.height/2-540,o=t.finalPosition.left+t.finalPosition.width/2-960,i=t.finalPosition.top+t.finalPosition.height/2-540;r<0&&(r*=-1),a<0&&(a*=-1),o<0&&(o*=-1),i<0&&(i*=-1);var s=Math.sqrt(r+a),u=Math.sqrt(o+i);return n?e.level-t.level||s-u:e.level-t.level||u-s}));case"readingOrder":return e.sort((function(e,t){var n=Math.sqrt(e.finalPosition.left+e.finalPosition.top),r=Math.sqrt(t.finalPosition.left+t.finalPosition.top);return e.level-t.level||n-r}));default:return e}},nn=function(e){var t=e.filter((function(e){return 0!==e.level})).sort((function(e,t){return Math.sqrt(e.finalPosition.left+e.finalPosition.top)-Math.sqrt(t.finalPosition.left+t.finalPosition.top)}))[0].type===fV.Text;console.log("isReadingOrder",t);var n=[];if(t)n=tn(e,"readingOrder",!1);else{var r=["readingOrder","fromCenter"][Math.floor(2*Math.random())],a=0!==Math.floor(2*Math.random());n=tn(e,r,a)}var o=1,i=null,s=null;return n.forEach((function(e,t){var r=rn(n.slice(0,t),e);if(0===e.level?(e.sequence=1,e.sequenceOffset=""):e.parent&&e.parent.level>0?(e.sequence=e.parent.sequence+1,e.sequenceOffset="1.2"):e.overlappings[0]&&e.overlappings[0].sequence>1&&1===e.overlappings.length?(e.sequence=e.overlappings[0].sequence,e.sequenceOffset="0.2"):(o+=1,e.sequence=o,t>0&&n[t-1].type===e.type?e.sequenceOffset="1.1":t>0&&n[t-1].level===e.level?e.sequenceOffset="0.8":e.sequenceOffset="0.5"),0===r.length?r=[5,6]:e.level>0&&(r.push(5),r.push(6)),0===(r=r.filter((function(t){return an(t,e.finalPosition)/(0===e.level?2:1)<=Pe}))).length&&(r=[5]),0!==e.level&&i===e.type&&r.includes(s))e.animations=[s];else{var a=Math.floor(Math.random()*r.length);e.animations=[r[a]],s=r[a]}i=e.type})),console.log("smartAnimationV2",n),n},rn=function(e,t){var n=[1,2,3,4];0===t.level&&(1920===t.corners.tr.x&&t.position.width<960&&(n=n.filter((function(e){return 4!==e}))),0===t.corners.tl.x&&t.position.width<960&&(n=n.filter((function(e){return 1!==e}))),1080===t.corners.bl.y&&t.position.height<540&&(n=n.filter((function(e){return 3!==e}))),0===t.corners.tl.y&&t.position.height<540&&(n=n.filter((function(e){return 2!==e}))));var r,a=(0,Et.Z)(e);try{var o=function(){var e=r.value;if(!(n.length>0))return"break";n.includes(4)&&(t.surrounding.left.some((function(t){return t.id===e.id}))||t.parent&&t.parent.level>0&&0!==t.parent.corners.tl.x)&&(n=n.filter((function(e){return 4!==e}))),n.includes(1)&&(t.surrounding.right.some((function(t){return t.id===e.id}))||t.parent&&t.parent.level>0&&1920!==t.parent.corners.tr.x)&&(n=n.filter((function(e){return 1!==e}))),n.includes(3)&&(t.surrounding.top.some((function(t){return t.id===e.id}))||t.parent&&t.parent.level>0&&0!==t.parent.corners.tl.y)&&(n=n.filter((function(e){return 3!==e}))),n.includes(2)&&(t.surrounding.bottom.some((function(t){return t.id===e.id}))||t.parent&&t.parent.level>0&&1080!==t.parent.corners.bl.y)&&(n=n.filter((function(e){return 2!==e})))};for(a.s();!(r=a.n()).done;){if("break"===o())break}}catch(i){a.e(i)}finally{a.f()}return n},an=function(e,t){var n=fn(t),r=0;switch(e){case hV:r=(1920-n.tl.x)/1920;break;case mV:r=(1080-n.tl.y)/1080;break;case vV:r=n.bl.y/1080;break;case pV:r=n.tr.x/1920;break;case gV:r=0;break;case yV:r=t.width*t.height/2073600}return r},on=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=Ho.timeline({paused:t,delay:n});e.length>1&&(e=e.sort((function(e,t){return e.sequence-t.sequence}))),e.forEach((function(e,t){if(e.animations.length>0){var n={},a={};e.animations.forEach((function(t){var r=ln(e.finalPosition,t);n=u(u({},n),r.start),a=u(u({},a),r.end)}));var o="sequence".concat(e.sequence).concat(""!==e.sequenceOffset?"-=".concat(e.sequenceOffset):"");Object.keys(a).length>0?r.fromTo("#".concat(dV[e.type],"-").concat(e.id),n,a,o):r.from("#".concat(dV[e.type],"-").concat(e.id),n,o)}})),r.then((function(){return Jt()})),De(r)},sn=function(e,t){var n=!0;return JSON.stringify(e)!==JSON.stringify(t)&&(n=!1),n},un=function(e){return cn()/1920*e},cn=function(){var e=k;if(0===O||gt.current&&gt.current.offsetWidth!==O){var t=gt.current.offsetWidth,n=gt.current.offsetHeight,r=.75*t,a=r/16*9;a>=.92*n&&(r=(a=.92*n)/9*16),e=r,A(t),S(e)}return e},ln=function(e,t){var n={};switch(t){case hV:n={start:{x:un(1920-e.left),rotation:.01},end:{x:0,rotation:0,ease:"power3.inOut",duration:1.5}};break;case mV:n={start:{y:un(1080-e.top),rotation:.01},end:{y:0,rotation:0,ease:"power3.inOut",duration:1.5}};break;case vV:n={start:{y:un(-1*(e.top+e.height)),rotation:.01},end:{y:0,rotation:0,ease:"power3.inOut",duration:1.5}};break;case pV:n={start:{x:un(-1*(e.left+e.width)),rotation:.01},end:{x:0,rotation:0,ease:"power3.inOut",duration:1.5}};break;case gV:n={start:{opacity:0},end:{opacity:1,ease:"power3.inOut",duration:1.5}};break;case yV:n={start:{scale:0,rotation:.01},end:{scale:1,rotation:0,ease:"power3.inOut",duration:1.5}}}return n},fn=function(e){return{tl:{x:e.left,y:e.top},tr:{x:e.left+e.width,y:e.top},bl:{x:e.left,y:e.top+e.height},br:{x:e.left+e.width,y:e.top+e.height}}},dn=function(e){var t={left:(e=e[0][0]<=e[1][2]&&e[0][1]<=e[1][3]?[e[0],e[1]]:[e[1],e[0]])[0][0]<e[1][0]?e[0][0]:e[1][0],top:e[0][1]<e[1][1]?e[0][1]:e[1][1],width:e[1][2]>e[0][0]?e[1][2]-e[0][0]:e[0][2]-e[1][0],height:e[1][3]>e[0][1]?e[1][3]-e[0][1]:e[0][3]-e[1][1]};return{finalPosition:t,position:e=[[t.left,t.top,t.left+st,t.top+st],[t.left+t.width-st,t.top+t.height-st,t.left+t.width,t.top+t.height]]}},pn=function(e,t){var n=!1,r=fn(t),a=fn(e);return hn(r,a.tl)&&hn(r,a.tr)&&hn(r,a.bl)&&hn(r,a.br)&&(n=!0),n},hn=function(e,t){var n=!1;return e.tl.x<=t.x&&e.tr.x>=t.x&&e.tl.y<=t.y&&e.bl.y>=t.y&&(n=!0),n},mn=function(e,t){var n=!1,r=fn(t),a=fn(e);return(a.tl.x>r.tl.x&&a.tl.x<r.tr.x||a.tr.x>r.tl.x&&a.tr.x<r.tr.x||a.tl.x<r.tl.x&&a.tr.x>r.tl.x)&&(a.tl.y>r.tl.y&&a.tl.y<r.bl.y||a.bl.y>r.tl.y&&a.bl.y<r.bl.y||a.tl.y<r.tl.y&&a.bl.y>r.tl.y)&&(n=!0),n},vn=function(e,t,n){var r=!1,a="x"===n?"tr":"bl";return(e.tl[n]>=t.tl[n]&&e.tl[n]<t[a][n]||e[a][n]>t.tl[n]&&e[a][n]<=t[a][n]||e.tl[n]<=t.tl[n]&&e[a][n]>=t.tl[n])&&(r=!0),r},gn=function(e,t,n){var r=Array.from(e),o=r.splice(t,1),i=(0,a.Z)(o,1)[0];return r.splice(n,0,i),r};return(0,re.jsxs)(re.Fragment,{children:[(0,re.jsx)("main",{role:"main",className:"w-10/12 4k:w-11/12 flex grow-0 shrink-0 select-none",children:(0,re.jsxs)("div",{className:"w-full h-full shrink grow-0 flex flex-col bg-gray-900",children:[(0,re.jsxs)("div",{className:"w-full flex shrink-0 grow-0 min-h-fit bg-gray-600 pl-6",style:{zIndex:1e3},children:[(0,re.jsxs)("div",{className:"w-full items-center justify-start flex flex-row bg-gray-600",children:[(0,re.jsx)("h2",{className:"mr-10 text-left text-3xl md:text-xl font-extrabold text-white select-none",children:"Cr\xe9ation"}),(0,re.jsx)("div",{onClick:function(){return Yt("Cursor")},className:"h-full py-2 px-3 text-white ".concat("Cursor"!==Ze||Xe?"hover:bg-gray-500 cursor-pointer":"bg-blue-500"," flex items-center transition duration-150 ease-in-out delay-0 group"),children:(0,re.jsx)(M,{className:"h-6 w-6 pointer-events-none transition duration-150 ease-in-out delay-0 group-hover:scale-110"})}),(0,re.jsx)("div",{onClick:function(){return Yt("PanZoom")},className:"h-full py-2 px-3 text-white ".concat("PanZoom"!==Ze||Xe?"hover:bg-gray-500 cursor-pointer":"bg-blue-500"," flex items-center transition duration-150 ease-in-out delay-0 group"),children:(0,re.jsx)(L,{className:"h-6 w-6 pointer-events-none transition duration-150 ease-in-out delay-0 group-hover:scale-110"})}),(0,re.jsx)("div",{onClick:function(){return Yt("Text")},className:"h-full py-2 px-3 text-white ".concat("Text"!==Ze||Xe?"hover:bg-gray-500 cursor-pointer":"bg-blue-500"," flex items-center transition duration-150 ease-in-out delay-0 group"),children:(0,re.jsx)(B,{className:"h-6 w-6 pointer-events-none transition duration-150 ease-in-out delay-0 group-hover:scale-110"})}),(0,re.jsx)("div",{onClick:function(){return Yt("Image")},className:"h-full py-2 px-3 text-white ".concat("Image"!==Ze||Xe?"hover:bg-gray-500 cursor-pointer":"bg-blue-500"," flex items-center transition duration-150 ease-in-out delay-0 group"),children:(0,re.jsx)(V,{className:"h-6 w-6 pointer-events-none transition duration-150 ease-in-out delay-0 group-hover:scale-110"})}),(0,re.jsx)("div",{onClick:function(){return Yt("Shape")},className:"h-full py-2 px-3 text-white ".concat("Shape"!==Ze||Xe?"hover:bg-gray-500 cursor-pointer":"bg-blue-500"," flex items-center transition duration-150 ease-in-out delay-0 group"),children:(0,re.jsx)(P,{className:"h-6 w-6 pointer-events-none transition duration-150 ease-in-out delay-0 group-hover:scale-110"})}),(0,re.jsx)("div",{onClick:function(){return Yt("Video")},className:"h-full py-2 px-3 text-white ".concat("Video"!==Ze||Xe?"hover:bg-gray-500 cursor-pointer":"bg-blue-500"," flex items-center transition duration-150 ease-in-out delay-0 group"),children:(0,re.jsx)(j,{className:"h-6 w-6 pointer-events-none transition duration-150 ease-in-out delay-0 group-hover:scale-110"})})]}),(0,re.jsxs)("div",{className:"w-full items-center justify-end flex flex-row px-3 bg-gray-600",children:[Xe?(0,re.jsx)("div",{onClick:function(){return Jt()},className:"h-full py-2 px-3 text-white ".concat(Xe?"bg-blue-500":"hover:bg-gray-500 cursor-pointer"," flex items-center transition duration-150 ease-in-out delay-0 group"),children:(0,re.jsx)(X,{className:"h-6 w-6 pointer-events-none transition duration-150 ease-in-out delay-0 group-hover:scale-110"})}):(0,re.jsx)("div",{onClick:function(){return $t()},className:"h-full py-2 px-3 text-white ".concat(Xe?"bg-blue-500":"hover:bg-gray-500 cursor-pointer"," flex items-center transition duration-150 ease-in-out delay-0 group"),children:(0,re.jsx)(U,{className:"h-6 w-6 pointer-events-none transition duration-150 ease-in-out delay-0 group-hover:scale-110"})}),(0,re.jsx)("div",{onClick:function(){return $t(!0)},className:"h-full py-2 px-3 text-white hover:bg-gray-500 cursor-pointer flex items-center transition duration-150 ease-in-out delay-0 group",children:(0,re.jsx)(K,{className:"h-6 w-6 pointer-events-none transition duration-150 ease-in-out delay-0 group-hover:scale-110"})}),(0,re.jsxs)("div",{className:"flex flex-row items-center mt-3 lg:mt-0 ml-4",children:[(0,re.jsx)("div",{className:"select-none rounded-md m-1 py-0.5 text-center text-xs flex items-center font-medium justify-center align-middle text-white bg-transparent border-transparent",children:"Animation"}),(0,re.jsx)("div",{className:"select-none rounded-md m-1 px-2 py-0.5 text-center text-xs flex items-center font-medium justify-center align-middle text-gray-600 bg-transparent border-transparent",children:(0,re.jsx)("input",{type:"range",id:"durationAdjustment",step:.05,className:"rangeNoFill",name:"durationAdjustment",min:"0",max:"1",onChange:function(e){return je(Number(e.target.value))},defaultValue:Pe})})]})]}),(0,re.jsx)("div",{onClick:function(){return Xt(-1)},className:"h-full py-2 px-3 text-white ".concat(me>0&&fe.length>0?"text-white cursor-pointer hover:bg-gray-500":"text-gray-400 pointer-events-none"," flex items-center transition duration-150 ease-in-out delay-0 group"),children:(0,re.jsx)(x,{className:"h-6 w-6 pointer-events-none transition duration-150 ease-in-out delay-0 group-hover:scale-110"})}),(0,re.jsx)("div",{onClick:function(){return Xt(1)},className:"h-full py-2 px-3 text-white ".concat(me<fe.length-1&&fe.length>0?"text-white cursor-pointer hover:bg-gray-500":"text-gray-400 pointer-events-none"," flex items-center transition duration-150 ease-in-out delay-0 group"),children:(0,re.jsx)(w,{className:"h-6 w-6 pointer-events-none transition duration-150 ease-in-out delay-0 group-hover:scale-110"})}),(0,re.jsx)("div",{onClick:function(){return Ft(Se.id,Se)},className:"h-full py-2 px-3 ".concat(Qe?"text-gray-400 pointer-events-none":"bg-red-600 cursor-pointer text-white"," flex items-center transition duration-150 ease-in-out delay-0 group"),children:(0,re.jsx)(G,{className:"h-6 w-6 pointer-events-none transition duration-150 ease-in-out delay-0 group-hover:scale-110"})})]}),(0,re.jsxs)("div",{id:"thumbPreviewContainer",className:"w-full h-full flex flex-row items-center justify-center bg-gray-900 overflow-hidden relative ".concat("PanZoom"===Ze?"cursor-grab":""),ref:gt,children:[(0,re.jsx)("div",{id:"progress",className:"bg-blue-500 absolute -top-2 left-0",style:{width:"50%"}}),(0,re.jsx)("div",u({className:"w-full h-full absolute top-0 left-0 ".concat("PanZoom"===Ze?"pointer-events-auto":"pointer-events-none hidden"),ref:function(e){return kt(e)}},St)),(0,re.jsx)("div",{onClick:function(){ie(null),te(null)},className:"absolute top-0 left-0 w-full h-full ".concat("PanZoom"===Ze?"pointer-events-none":"pointer-events-auto")}),gt.current&&O>0&&k>0&&(0,re.jsx)("div",{id:"thumbPreviewPanZoom",className:"".concat("PanZoom"===Ze?"pointer-events-none":"pointer-events-auto"," ").concat(k>0?"":"w-3/4"),style:It>1?{position:"absolute",top:E.y+Ct.y-(k/16*9*It-k/16*9)/2,left:E.x+Ct.x-(k*It-k)/2,width:k*It,height:k/16*9*It}:{width:k,height:k/16*9},children:(0,re.jsxs)("div",{id:"thumbPreview",className:"w-full h-full relative bg-white overflow-hidden rounded ".concat("PanZoom"===Ze?"pointer-events-none":"pointer-events-auto"),ref:yt,children:[(0,re.jsxs)("div",{className:"absolute z-10 top-0 left-0 h-full w-full ".concat("Cursor"!==Ze?"pointer-events-none":""),children:[(0,re.jsx)(jP,{mouseRef:yt,zone:null!==oe?ee:null,index:Se.zones.findIndex((function(e){return e.id===oe})),gridSize:st,onClick:Vt,isDisabled:Xe||"Cursor"!==Ze||rt,isPlaying:Xe,isSelected:!0,onChange:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;switch(t){case"animations":qt(e,n);break;case"sequence":Wt(e);break;case"finalPosition":Zt(e.id,u(u({},e),dn([n.position[0],n.position[1]])));break;case"content":Zt(e.id,u(u({},e),{},{content:n}));break;case"delete":zt(e.id)}},adjusmentWidth:k*It}),null===H?Se.zones.map((function(e,t){return e.finalPosition&&e.id!==oe?(0,re.jsx)(ey,{containerId:"thumbPreview",zone:e,index:t,onMouseDown:Vt,isPlaying:Xe,isDisabled:Xe||"Cursor"!==Ze||rt,adjusmentWidth:k*It},"".concat(e.id)):(0,re.jsx)(re.Fragment,{})})):H.map((function(e,t){return e.finalPosition?(0,re.jsx)(ey,{containerId:"thumbPreview",zone:e,isPreview:!0,adjusmentWidth:k},"preview-".concat(e.id)):(0,re.jsx)(re.Fragment,{})}))]}),(0,re.jsx)("div",{className:"absolute z-20 top-0 left-0 h-full w-full ".concat("Cursor"!==Ze&&"PanZoom"!==Ze?"":"hidden"),children:"Cursor"!==Ze&&"PanZoom"!==Ze&&!rt&&(0,re.jsx)(SV,{gridSize:st,mouseRef:yt,hidden:Xe,adjusmentWidth:k*It,zoom:It,onClick:Ut,onHover:Ut})})]})})]}),(0,re.jsx)("div",{className:"w-full flex flex-row shrink-0 min-h-fit bg-gray-600 overflow-x-scroll flex-nowrap",style:{zIndex:1e3},children:(0,re.jsx)(yZ,{onDragEnd:function(e){return Ht(e,"slides")},onDragStart:Gt,children:(0,re.jsx)(aV,{droppableId:"slides",direction:"horizontal",children:function(e){return(0,re.jsxs)("div",u(u({className:"grid grid-flow-col auto-cols-max px-4 pt-4 pb-2",ref:e.innerRef},e.droppableProps),{},{children:[" ",be.map((function(e,t){return(0,re.jsx)(eV,{draggableId:"slide-".concat(e.id),index:t,children:function(n){return(0,re.jsxs)("div",u(u(u({className:"relative flex flex-row",ref:n.innerRef},n.draggableProps),n.dragHandleProps),{},{style:u(u({},n.draggableProps.style),{},{height:F/16*9}),children:[(0,re.jsx)("div",{className:"w-6 hover:w-16 h-full flex flex-col group items-center justify-center transition delay-150 duration-300 ease-in-out transition-all opacity-0 hover:opacity-100",children:(0,re.jsx)("div",{onClick:function(){return Pt(t)},className:"pointer-events-none group-hover:pointer-events-auto flex w-0 group-hover:w-12 h-full rounded cursor-pointer flex-col group items-center justify-center border-2 border-lime-500 transition delay-150 duration-300 ease-in-out transition-all",children:(0,re.jsx)(W,{className:"h-6 w-0 group-hover:w-6 pointer-events-none text-lime-500 transition delay-150 duration-300 ease-in-out transition-all"})})}),(0,re.jsxs)("div",{onClick:function(){return jt(e)},className:"transition duration-300 ease-in-out delay-0 hover:scale-105 relative bg-white w-48 rounded cursor-pointer ".concat(""," ").concat(Se.id===e.id?"ring-2 ring-blue-500 ring-offset-2 ring-offset-gray-600":""),children:[(0,re.jsx)("div",{className:"z-50 group absolute bottom-0 right-0 p-1 m-1 bg-gray-100 hover:bg-red-100 opacity-50 hover:opacity-100 ".concat(Se.id===e.id?"":"hidden"),children:(0,re.jsx)(J,{onClick:function(t){t.stopPropagation(),function(e){var t=be.filter((function(t,n){return t.id===e&&(be[n+1]?jt(be[n+1]):be[n-1]&&jt(be[n-1])),t.id!==e}));xe(t),0===t.length&&Pt()}(e.id)},className:"h-5 w-5 text-gray-600 group-hover:text-red-600 cursor-pointer"},"slide-".concat(e.id,"-trash"))}),bt.current&&F>0&&(0,re.jsx)("div",{className:"absolute z-10 top-0 left-0 overflow-hidden h-full bg-white rounded w-full pointer-events-none",children:e.zones.map((function(t,n){return t.finalPosition?(0,re.jsx)(ey,{containerId:"smallThumbPreview",zone:t,isPreview:!0,adjusmentWidth:F},"slide-".concat(e.id,"-smallpreview-").concat(t.id)):(0,re.jsx)(re.Fragment,{})}))})]})]}))}},"slide-".concat(e.id))})),e.placeholder,(0,re.jsx)("div",{id:"smallThumbPreview",className:"w-48 h-full flex flex-col group items-start justify-center transition delay-150 duration-300 ease-in-out transition-all opacity-0 hover:opacity-100",ref:bt,children:(0,re.jsx)("div",{onClick:function(){return Pt()},className:"pointer-events-none group-hover:pointer-events-auto flex w-full mx-2 h-full rounded cursor-pointer flex-col items-center justify-center border-2 border-lime-500",children:(0,re.jsx)(W,{className:"h-6 w-6 pointer-events-none text-lime-500"})})})]}))}})})})]})}),(0,re.jsx)("div",{className:"z-50 w-full 4k:w-1/12 flex grow-0 bg-gray-700 shadow-md shadow-gray-900/50 overflow-y-scroll select-none",children:(0,re.jsx)("div",{className:"w-full shrink-0 h-full pl-4 pr-3 pt-2 pb-4",children:(0,re.jsx)("div",{className:"flex sm:flex-col",children:Se.zones&&(0,re.jsx)(yZ,{onDragEnd:function(e){return Ht(e,"zones")},onDragStart:Gt,children:(0,re.jsx)(aV,{droppableId:"zones",children:function(e){return(0,re.jsxs)("div",u(u({className:"flex flex-col space-y-3",ref:e.innerRef},e.droppableProps),{},{children:[Se.zones.length>1?(0,re.jsxs)("h2",{className:"text-left text-3xl md:text-xl font-extrabold text-white select-none",children:["\xc9l\xe9ments\xa0",(0,re.jsx)("span",{className:"font-normal",children:" (".concat(Se.zones.length,")")})]}):(0,re.jsx)("h2",{className:"text-left text-3xl md:text-xl font-extrabold text-white select-none",children:"\xc9l\xe9ment"}),Se.zones.map((function(e,t){e.position;var n=e.type,r=(e.animations,e.finalPosition),a=(e.sequence,e.id);return r?(0,re.jsx)(eV,{draggableId:"zone-".concat(a),index:t,children:function(r){return(0,re.jsx)("div",u(u(u({ref:r.innerRef},r.draggableProps),r.dragHandleProps),{},{style:u({},r.draggableProps.style),className:"pointer-events-auto w-full text-sm flex flex-col items-center ",children:(0,re.jsx)("div",{disabled:rt,className:"py-2 px-2 w-full text-sm flex flex-col space-y-2 items-center transition duration-200 ease-in-out delay-0 hover:scale-105 bg-white rounded-sm ".concat(oe===a?"ring-2 ring-blue-500 ring-offset-2 ring-offset-gray-700":"hover:ring-2 hover:ring-blue-300 hover:ring-offset-2 hover:ring-offset-gray-700"),onClick:function(){return Vt(e)},children:(0,re.jsxs)("div",{className:"w-full text-sm flex flex-row items-center",children:[(0,re.jsxs)("div",{className:"mr-3 select-none",children:[n===fV.Text&&(0,re.jsx)(B,{className:"h-5 w-5 text-gray-400 pointer-events-none"},"zonesList-".concat(t,"-icon")),n===fV.Image&&(0,re.jsx)(V,{className:"h-5 w-5 text-gray-400 pointer-events-none"},"zonesList-".concat(t,"-icon")),n===fV.Shape&&(0,re.jsx)(P,{className:"h-5 w-5 text-gray-400 pointer-events-none"},"zonesList-".concat(t,"-icon")),n===fV.Video&&(0,re.jsx)(j,{className:"h-5 w-5 text-gray-400 pointer-events-none"},"zonesList-".concat(t,"-icon"))]}),(0,re.jsx)("div",{className:"w-full text-left pointer-events-none select-none",children:dV[n]}),(0,re.jsx)("div",{className:"ml-3 select-none",children:(0,re.jsx)(J,{onClick:function(e){e.stopPropagation(),zt(a)},className:"h-4 w-4 text-gray-400 hover:text-red-600 cursor-pointer"},"slide-".concat(Se.id,"-zonesList-").concat(a,"-trash"))})]})})}))}},"slide-".concat(Se.id,"-zonesList-").concat(a)):(0,re.jsx)(re.Fragment,{})})),e.placeholder,(0,re.jsx)("div",{className:"w-full h-3"})]}))}})})})})})]})},NV=n(8377),EV=n(3772),CV=n(2145),TV=n(9118),IV=n(651),OV=n(4031),AV={kernelName:CV.SY,inputsToSave:["x"],gradFunc:function(e,t){var n=(0,a.Z)(t,1)[0];return{x:function(){return(0,IV.d)(e,(0,OV.N)((0,TV.p)(n,"float32"),-1))}}}},DV=n(5750),MV=n(4362),RV=n(7067),PV=n(6902),jV=n(7391),FV=n(4774),LV={kernelName:CV.VG,inputsToSave:["x"],gradFunc:function(e,t){var n=(0,a.Z)(t,1)[0];return{x:function(){var t=(0,jV.h)((0,TV.p)(n,"float32")),r=(0,PV._)((0,FV.l)((0,RV.i)(1),t));return(0,MV.W)((0,DV.h)(e,r))}}}},BV={kernelName:CV.Sp,inputsToSave:["x"],gradFunc:function(e,t){var n=(0,a.Z)(t,1)[0];return{x:function(){var t=(0,PV._)((0,FV.l)((0,jV.h)((0,TV.p)(n,"float32")),1));return(0,DV.h)(e,t)}}}},zV=n(9877),ZV=n(5561),VV=n(227),UV={kernelName:CV.mm,inputsToSave:["a","b"],gradFunc:function(e,t){var n=(0,a.Z)(t,2),r=n[0],o=n[1],i=zV.assertAndGetBroadcastShape(r.shape,o.shape);return{a:function(){var t=e,n=zV.getReductionAxes(r.shape,i);return n.length>0&&(t=(0,VV.S)(t,n)),(0,ZV.X)(t,r.shape)},b:function(){var t=e,n=zV.getReductionAxes(o.shape,i);return n.length>0&&(t=(0,VV.S)(t,n)),(0,ZV.X)(t,o.shape)}}}},qV={kernelName:CV.Xz,saveAllInputs:!0,gradFunc:function(e,t){var n={};return t.forEach((function(t,r){n[r]=function(){return e.clone()}})),n}},WV=n(7293),HV={kernelName:CV.sJ,inputsToSave:["x"],gradFunc:function(e,t){var n=(0,a.Z)(t,1)[0];return{x:function(){return(0,WV.P)(n)}}}},GV={kernelName:CV.aJ,inputsToSave:["x"],gradFunc:function(e,t){var n=(0,a.Z)(t,1)[0];return{x:function(){return(0,WV.P)(n)}}}},KV={kernelName:CV.M2,inputsToSave:["x"],gradFunc:function(e,t){var n=(0,a.Z)(t,1)[0];return{x:function(){return(0,DV.h)(e,(0,PV._)((0,FV.l)((0,RV.i)(1),(0,jV.h)((0,TV.p)(n,"float32")))))}}}},XV=n(3312),YV={kernelName:CV.qw,inputsToSave:["x"],gradFunc:function(e,t){var n=(0,a.Z)(t,1)[0];return{x:function(){var t=(0,PV._)((0,XV.I)((0,RV.i)(1),(0,jV.h)((0,TV.p)(n,"float32"))));return(0,DV.h)(e,t)}}}},$V={kernelName:CV.QC,inputsToSave:["a","b"],gradFunc:function(e,t){var n=(0,a.Z)(t,2),r=n[0],o=n[1],i=(0,zV.assertAndGetBroadcastShape)(r.shape,o.shape);return{a:function(){var t=(0,XV.I)((0,jV.h)(r),(0,jV.h)(o)),n=(0,IV.d)(e,(0,DV.h)(o,t)),a=(0,zV.getReductionAxes)(r.shape,i);return a.length>0&&(n=(0,VV.S)(n,a)),(0,ZV.X)(n,r.shape)},b:function(){var t=(0,XV.I)((0,jV.h)(r),(0,jV.h)(o)),n=(0,MV.W)((0,IV.d)(e,(0,DV.h)(r,t))),a=(0,zV.getReductionAxes)(o.shape,i);return a.length>0&&(n=(0,VV.S)(n,a)),(0,ZV.X)(n,o.shape)}}}},JV={kernelName:CV.jM,inputsToSave:["x"],gradFunc:function(e,t){var n=(0,a.Z)(t,1)[0];return{x:function(){return(0,DV.h)(e,(0,XV.I)((0,jV.h)((0,TV.p)(n,"float32")),1))}}}},QV={kernelName:CV.Oy,inputsToSave:["x"],gradFunc:function(e,t){var n=(0,a.Z)(t,1)[0];return{x:function(){return(0,DV.h)(e,(0,FV.l)((0,RV.i)(1),(0,jV.h)((0,TV.p)(n,"float32"))))}}}},eU=n(318),tU=n(8354),nU=n(6147),rU=n(6190),aU=n(8640);var oU=(0,aU.op)({avgPool3dGrad_:function(e,t,n,r,a,o){var i=(0,tU._1)(e,"dy","avgPool3dGrad"),s=(0,tU._1)(t,"input","avgPool3dGrad"),u=i,c=s,l=!1;4===s.rank&&(l=!0,u=(0,ZV.X)(i,[1,i.shape[0],i.shape[1],i.shape[2],i.shape[3]]),c=(0,ZV.X)(s,[1,s.shape[0],s.shape[1],s.shape[2],s.shape[3]])),nU.hu(5===u.rank,(function(){return"Error in avgPool3dGrad: dy must be rank 5 but got rank "+"".concat(u.rank,".")})),nU.hu(5===c.rank,(function(){return"Error in avgPool3dGrad: input must be rank 5 but got rank "+"".concat(c.rank,".")})),(0,rU.m)("avgPool3dGrad",a,o);var f={dy:u,input:c},d={filterSize:n,strides:r,pad:a,dimRoundingMode:o},p=eU.BV.runKernel(CV.IM,f,d);return l?(0,ZV.X)(p,[p.shape[1],p.shape[2],p.shape[3],p.shape[4]]):p}}),iU={kernelName:CV._k,inputsToSave:["x"],gradFunc:function(e,t,n){var r=(0,a.Z)(t,1)[0],o=n.filterSize,i=n.strides,s=n.pad,u=n.dimRoundingMode;return{x:function(){return oU(e,r,o,i,s,u)}}}};var sU=(0,aU.op)({avgPoolGrad_:function(e,t,n,r,a){var o=(0,tU._1)(e,"dy","avgPoolGrad"),i=(0,tU._1)(t,"input","avgPoolGrad");nU.hu(i.rank===o.rank,(function(){return"Rank of input (".concat(i.rank,") does not match rank of dy (").concat(o.rank,")")}));var s=i,u=o,c=!1;3===i.rank&&(c=!0,s=(0,ZV.X)(i,[1,i.shape[0],i.shape[1],i.shape[2]]),u=(0,ZV.X)(o,[1,o.shape[0],o.shape[1],o.shape[2]])),nU.hu(4===u.rank,(function(){return"Error in avgPoolGrad: dy must be rank 4 but got rank "+"".concat(u.rank,".")})),nU.hu(4===s.rank,(function(){return"Error in avgPoolGrad: input must be rank 4 but got rank "+"".concat(s.rank,".")}));var l={dy:u,input:s},f={filterSize:n,strides:r,pad:a},d=eU.BV.runKernel(CV.RO,l,f);return c?(0,ZV.X)(d,[d.shape[1],d.shape[2],d.shape[3]]):d}}),uU={kernelName:CV.Jh,inputsToSave:["x"],gradFunc:function(e,t,n){var r=(0,a.Z)(t,1)[0],o=n.filterSize,i=n.strides,s=n.pad;return{x:function(){return sU(e,r,o,i,s)}}}},cU=n(7221),lU={kernelName:CV.XL,inputsToSave:["a","b"],gradFunc:function(e,t,n){var r=(0,a.Z)(t,2),o=r[0],i=r[1],s=n.transposeA,u=n.transposeB;return s||u?!s&&u?{a:function(){return(0,cU.O)(e,i,!1,!1)},b:function(){return(0,cU.O)(e,o,!0,!1)}}:s&&!u?{a:function(){return(0,cU.O)(i,e,!1,!0)},b:function(){return(0,cU.O)(o,e,!1,!1)}}:{a:function(){return(0,cU.O)(i,e,!0,!0)},b:function(){return(0,cU.O)(e,o,!0,!0)}}:{a:function(){return(0,cU.O)(e,i,!1,!0)},b:function(){return(0,cU.O)(o,e,!0,!1)}}}},fU=n(5696),dU={kernelName:CV.zw,gradFunc:function(e,t,n){var r=n.blockShape,a=n.crops;return{x:function(){return(0,fU.f)(e,r,a)}}}},pU={kernelName:CV.Ly,gradFunc:function(e,t,n){for(var r=n,a=r.inputShape,o=r.shape,i=Array.from(o),s=a.length-1;s>=0;s--)if(a[s]===o[s])i[s]=1;else if(1!==a[s])throw new Error("broadcastTo(): [".concat(a,"] cannot be broadcast to [").concat(o,"]."));for(var u=[],c=0;c<i.length;c++)i[c]>1&&u.push(c);return{x:function(){return(0,VV.S)(e,u,!0)}}}},hU={kernelName:CV.RF,gradFunc:function(e){return{x:function(){return e.clone()}}}},mU={kernelName:CV.gJ,gradFunc:function(e){return{x:function(){return(0,WV.P)(e)}}}},vU=n(8327),gU=n(2642),yU=n(2177),bU=n(329),xU={kernelName:CV.xn,inputsToSave:["x"],gradFunc:function(e,t,n){var r=(0,a.Z)(t,1)[0],o=n.clipValueMin,i=n.clipValueMax;return{x:function(){return(0,bU.a)((0,yU.H)((0,vU.b)(r,o),(0,gU.z)(r,i)),e,(0,WV.P)(e))}}}},wU={kernelName:CV.yj,inputsToSave:["x"],gradFunc:AV.gradFunc},kU=n(2588),SU={kernelName:CV.Eh,saveAllInputs:!0,gradFunc:function(e,t,n){var r=t.map((function(e){return e.shape})),a=n.axis,o=(0,nU.EC)(a,t[0].shape)[0],i=r.map((function(e){return e[o]}));return(0,kU.V)(e,i,o).map((function(e){return function(){return e}}))}},_U=n(8744),NU=n(1045),EU={kernelName:CV.mh,inputsToSave:["x","filter"],gradFunc:function(e,t,n){var r=(0,a.Z)(t,2),o=r[0],i=r[1],s=n.dilations,u=n.strides,c=n.pad,l=n.dataFormat;return nU.hu(rU.I0(s),(function(){return"Error in gradient of conv2D: dilation rates greater than 1 "+"are not yet supported in gradients. Got dilations '".concat(s,"'")})),{x:function(){return(0,NU._)(o.shape,e,i,u,c,l)},filter:function(){return(0,_U.p)(o,e,i.shape,u,c,l)}}}},CU=n(3457),TU={kernelName:CV.wm,inputsToSave:["dy","filter"],gradFunc:function(e,t,n){var r=(0,a.Z)(t,2),o=r[0],i=r[1],s=n.strides,u=n.pad,c=n.dataFormat,l=n.dimRoundingMode;return{dy:function(){return(0,CU.T)(e,i,s,u,c,1,l)},filter:function(){return(0,_U.p)(e,o,i.shape,s,u,c,l)}}}};var IU=(0,aU.op)({conv3DBackpropFilter_:function(e,t,n,r,a){var o=e;4===e.rank&&(o=(0,ZV.X)(e,[1,e.shape[0],e.shape[1],e.shape[2],e.shape[3]]));var i=t;4===i.rank&&(i=(0,ZV.X)(t,[1,t.shape[0],t.shape[1],t.shape[2],t.shape[3]])),nU.hu(5===o.rank,(function(){return"Error in conv3dDerFilter: input must be rank 5, but got shape "+"".concat(o.shape,".")})),nU.hu(5===i.rank,(function(){return"Error in conv3dDerFilter: dy must be rank 5, but got shape "+"".concat(i.shape,".")})),nU.hu(5===n.length,(function(){return"Error in conv3dDerFilter: filterShape must be length 5, but got "+"".concat(n,".")})),nU.hu(o.shape[4]===n[3],(function(){return"Error in conv3dDerFilter: depth of input ".concat(o.shape[4],") must ")+"match input depth in filter (".concat(n[3],".")})),nU.hu(i.shape[4]===n[4],(function(){return"Error in conv3dDerFilter: depth of dy (".concat(i.shape[4],") must ")+"match output depth for filter (".concat(n[4],").")}));var s={x:o,dy:i},u={strides:r,pad:a,filterShape:n};return eU.BV.runKernel(CV.o2,s,u)}}),OU=n(1873),AU={kernelName:CV.x1,inputsToSave:["x","filter"],gradFunc:function(e,t,n){var r=n.dilations,o=n.strides,i=n.pad;nU.hu((0,rU.I0)(r),(function(){return"Error in gradient of conv3D: dilation rates greater than 1 are "+"not yet supported in gradients. Got dilations '".concat(r,"'")}));var s=(0,a.Z)(t,2),u=s[0],c=s[1];return{x:function(){return(0,OU._)(u.shape,e,c,o,i)},filter:function(){return IU(u,e,c.shape,o,i)}}}},DU=n(7254),MU={kernelName:CV.mc,inputsToSave:["x"],gradFunc:function(e,t){var n=(0,a.Z)(t,1)[0];return{x:function(){return(0,IV.d)((0,MV.W)((0,DU.O)((0,TV.p)(n,"float32"))),e)}}}},RU=n(7657),PU={kernelName:CV.TR,inputsToSave:["x"],gradFunc:function(e,t){var n=(0,a.Z)(t,1)[0];return{x:function(){return(0,IV.d)((0,RU.R)((0,TV.p)(n,"float32")),e)}}}},jU=n(8473),FU=n(8862),LU=n(1240),BU={kernelName:CV.iH,inputsToSave:["x"],gradFunc:function(e,t,n){var r=(0,a.Z)(t,1)[0],o=n.axis,i=n.exclusive,s=n.reverse;return{x:function(){var t=(0,jU.Q3)([o],r.rank),n=(0,FU.z)(e,o,i,!s);return null!=t&&(n=(0,LU.p)(n,t)),n}}}},zU=n(288),ZU=n(6939),VU={kernelName:CV.ci,inputsToSave:["x","filter"],gradFunc:function(e,t,n){var r=n.dilations,o=n.strides,i=n.pad,s=n.dimRoundingMode,u=null==r?[1,1]:r;nU.hu(rU.I0(u),(function(){return"Error in gradient of depthwiseConv2dNative: dilation rates greater than 1 are not yet supported. Got dilations "+"'".concat(u,"'")}));var c=(0,a.Z)(t,2),l=c[0],f=c[1];return nU.hu(4===l.rank,(function(){return"Error in gradient of depthwiseConv2dNative: input must be "+"rank 4, but got rank ".concat(l.rank,".")})),nU.hu(4===f.rank,(function(){return"Error in gradient of depthwiseConv2dNative: filter must be "+"rank 4, but got rank ".concat(f.rank,".")})),nU.hu(l.shape[3]===f.shape[2],(function(){return"Error in gradient of depthwiseConv2d: number of input "+"channels (".concat(l.shape[3],") must match the inChannels dimension ")+"in filter ".concat(f.shape[2],".")})),nU.hu(rU.jT(o,u),(function(){return"Error in gradient of depthwiseConv2d: Either strides or "+"dilations must be  1. Got strides ".concat(o," and dilations ")+"'".concat(u,"'.")})),rU.m("depthwiseConv2d",i,s),{x:function(){return(0,ZU.v)(l.shape,e,f,o,i,u,s)},filter:function(){return(0,zU.z)(l,e,f.shape,o,i,u,s)}}}},UU={kernelName:CV.p4,inputsToSave:["x","filter"],gradFunc:function(e,t,n){var r=(0,a.Z)(t,2),o=r[0],i=r[1],s={x:o,filter:i,dy:e},u={x:o,filter:i,dy:e};return{x:function(){return eU.BV.runKernel(CV.ek,s,n)},filter:function(){return eU.BV.runKernel(CV.Vn,u,n)}}}},qU={kernelName:CV.SX,outputsToSave:[!0],gradFunc:function(e,t){var n={dy:e,y:(0,a.Z)(t,1)[0]};return{x:function(){return eU.BV.runKernel(CV.HE,n)}}}},WU=n(411),HU={kernelName:CV.Om,inputsToSave:["x"],gradFunc:function(e,t){var n=(0,a.Z)(t,1)[0],r=(0,IV.d)((0,WU.Q)((0,MV.W)((0,jV.h)(n))),2/Math.sqrt(Math.PI));return{x:function(){return(0,IV.d)(e,r)}}}},GU={kernelName:CV.NE,outputsToSave:[!0],gradFunc:function(e,t){var n=(0,a.Z)(t,1)[0];return{x:function(){return(0,IV.d)(e,n)}}}},KU={kernelName:CV.YF,inputsToSave:["input"],gradFunc:function(e,t){var n=(0,a.Z)(t,1)[0];return{input:function(){return(0,ZV.X)(e,n.shape)}}}},XU={kernelName:CV.Y0,inputsToSave:["x"],gradFunc:function(e,t){var n=(0,a.Z)(t,1)[0];return{x:function(){return(0,IV.d)(e,(0,WU.Q)(n))}}}},YU={kernelName:CV.OR,gradFunc:function(e){return{x:function(){return(0,WV.P)(e)}}}},$U={kernelName:CV.je,inputsToSave:["a","b"],gradFunc:function(e,t){var n=(0,a.Z)(t,2),r=n[0],o=n[1],i=(0,zV.assertAndGetBroadcastShape)(r.shape,o.shape);return{a:function(){var t=(0,DV.h)(e,(0,TV.p)(o,"float32")),n=(0,zV.getReductionAxes)(r.shape,i);return n.length>0?(0,ZV.X)((0,VV.S)(t,n),r.shape):t},b:function(){var t=(0,IV.d)(e,(0,TV.p)(r,"float32")),n=(0,zV.getReductionAxes)(o.shape,i);n.length>0&&(t=(0,ZV.X)((0,VV.S)(t,n),o.shape));var a=(0,jV.h)(o);return(0,MV.W)((0,DV.h)(t,(0,TV.p)(a,"float32")))}}}},JU=n(5115),QU=n(2343),eq={kernelName:CV.sH,inputsToSave:["x","mean","variance","scale"],gradFunc:function(e,t,n){var r=n.varianceEpsilon,o=(0,a.Z)(t,4),i=o[0],s=o[1],u=o[2],c=o[3],l=null==c?(0,RV.i)(1):c,f=(0,zV.getReductionAxes)(s.shape,i.shape),d=[];if(1===s.rank){for(var p=0;p<i.shape.length-1;++p)d.push(i.shape[p]);d.push(1)}var h=(0,FV.l)(i,s),m=(0,IV.d)(e,l),v=(0,JU.b)((0,XV.I)(u,(0,RV.i)(r))),g=(0,IV.d)((0,IV.d)((0,IV.d)(v,v),v),(0,RV.i)(-.5));return{x:function(){return 1===s.rank?(0,ZV.X)((0,IV.d)((0,IV.d)(e,(0,QU.G)((0,ZV.X)(v,[1,1,1,s.shape[0]]),d)),l),i.shape):(0,ZV.X)((0,IV.d)((0,IV.d)(e,v),l),i.shape)},mean:function(){var e=(0,IV.d)((0,IV.d)(v,(0,RV.i)(-1)),m);return 1===s.rank&&(e=(0,VV.S)(e,f)),(0,ZV.X)(e,s.shape)},variance:function(){var e=(0,IV.d)((0,IV.d)(g,h),m);return 1===s.rank&&(e=(0,VV.S)(e,f)),(0,ZV.X)(e,s.shape)},scale:function(){var t=(0,IV.d)(h,v),n=(0,IV.d)(e,t);return 1===s.rank&&(n=(0,VV.S)(n,f)),(0,ZV.X)(n,s.shape)},offset:function(){var t=e;return 1===s.rank&&(t=(0,VV.S)(t,f)),(0,ZV.X)(t,s.shape)}}}},tq=n(6918),nq={kernelName:CV.qi,inputsToSave:["x","indices"],gradFunc:function(e,t,n){var r=(0,a.Z)(t,2),o=r[0],i=r[1],s=n.axis,u=(0,nU.EC)(s,o.shape)[0];return{x:function(){var t=o.shape,n=i.size,r=t.slice(0,u),a=r.length,c=t.slice(s,t.length).slice(1),l=c.length,f=rq(0,a),d=rq(a+1,a+1+l),p=aq([r,[n],c]),h=(0,ZV.X)(e,p),m=(0,ZV.X)(i,[n]),v=aq([[a],f,d]),g=(0,LU.p)(h,v),y=(0,tq.p)(g,m,o.shape[u]),b=(0,jU.LJ)(v);return y=(0,LU.p)(y,b)},indices:function(){return i}}}};function rq(e,t){for(var n=[],r=e;r<t;++r)n.push(r);return n}function aq(e){for(var t=[],n=0;n<e.length;++n)for(var r=0;r<e[n].length;++r)t.push(e[n][r]);return t}var oq={kernelName:CV.Ac,inputsToSave:["a","b"],gradFunc:function(e,t){var n=(0,a.Z)(t,2),r=n[0],o=n[1];return{a:function(){return(0,WV.P)(r)},b:function(){return(0,WV.P)(o)}}}},iq={kernelName:CV.iJ,gradFunc:function(e){return{x:function(){return(0,TV.p)(e,"float32")}}}},sq={kernelName:CV.av,gradFunc:function(e){return{x:function(){return(0,WV.P)(e)}}}},uq={kernelName:CV.iW,gradFunc:function(e){return{x:function(){return(0,WV.P)(e)}}}},cq={kernelName:CV.r7,gradFunc:function(e){return{x:function(){return(0,WV.P)(e)}}}},lq=n(5014),fq={kernelName:CV.J$,inputsToSave:["x"],gradFunc:function(e,t,n){var r=(0,a.Z)(t,1)[0],o=n.alpha,i=(0,lq.p)(r,0);return{x:function(){return(0,bU.a)(i,e,(0,IV.d)(e,o))}}}},dq={kernelName:CV.kU,inputsToSave:["x"],gradFunc:function(e,t){var n=(0,a.Z)(t,1)[0];return{x:function(){return(0,DV.h)(e,(0,XV.I)(n,1))}}}},pq={kernelName:CV.Zb,inputsToSave:["x"],gradFunc:function(e,t){var n=(0,a.Z)(t,1)[0];return{x:function(){return(0,DV.h)(e,(0,TV.p)(n,"float32"))}}}},hq={kernelName:CV.qC,inputsToSave:[],outputsToSave:[!0],gradFunc:function(e,t,n){var r=(0,a.Z)(t,1)[0],o=n.axis;return{logits:function(){var t=(0,WU.Q)(r);return(0,FV.l)(e,(0,IV.d)((0,VV.S)(e,o,!0),t))}}}};var mq=(0,aU.op)({localResponseNormalizationBackprop_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:5,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1,i=arguments.length>6&&void 0!==arguments[6]?arguments[6]:.5,s={x:e,y:t,dy:n},u={depthRadius:r,bias:a,alpha:o,beta:i};return eU.BV.runKernel(CV.Hh,s,u)}}),vq={kernelName:CV.eZ,inputsToSave:["x"],outputsToSave:[!0],gradFunc:function(e,t,n){var r=(0,a.Z)(t,2),o=r[0],i=r[1],s=n.depthRadius,u=n.bias,c=n.alpha,l=n.beta;return{x:function(){return mq(o,i,e,s,u,c,l)}}}},gq=n(3254);function yq(e,t,n,r){return t.rank<n.rank&&(t=(0,ZV.X)(t,jU.rv(t.shape,r))),e.rank<n.rank&&(e=(0,ZV.X)(e,jU.rv(e.shape,r))),{x:function(){return(0,IV.d)(e,(0,TV.p)((0,gq.D)(n,t),e.dtype))}}}var bq={kernelName:CV.Yo,inputsToSave:["x"],outputsToSave:[!0],gradFunc:function(e,t,n){var r=n.reductionIndices,a=t[0],o=yq(e,t[1],a,nU.EC(r,a.shape));return{x:function(){return o.x()}}}},xq=n(4920),wq={kernelName:CV.BM,inputsToSave:["a","b"],gradFunc:function(e,t){var n=(0,a.Z)(t,2),r=n[0],o=n[1];return{a:function(){return(0,IV.d)(e,(0,TV.p)((0,vU.b)(r,o),"float32"))},b:function(){return(0,IV.d)(e,(0,TV.p)((0,xq.d)(r,o),"float32"))}}}};var kq=(0,aU.op)({maxPool3dGrad_:function(e,t,n,r,a,o,i){var s=(0,tU._1)(e,"dy","maxPool3dGrad"),u=(0,tU._1)(t,"input","maxPool3dGrad"),c=(0,tU._1)(n,"output","maxPool3dGrad"),l=s,f=u,d=c,p=!1;4===u.rank&&(p=!0,l=(0,ZV.X)(s,[1,s.shape[0],s.shape[1],s.shape[2],s.shape[3]]),f=(0,ZV.X)(u,[1,u.shape[0],u.shape[1],u.shape[2],u.shape[3]]),d=(0,ZV.X)(c,[1,c.shape[0],c.shape[1],c.shape[2],c.shape[3]])),nU.hu(5===l.rank,(function(){return"Error in maxPool3dGrad: dy must be rank 5 but got rank "+"".concat(l.rank,".")})),nU.hu(5===f.rank,(function(){return"Error in maxPool3dGrad: input must be rank 5 but got rank "+"".concat(f.rank,".")})),nU.hu(5===d.rank,(function(){return"Error in maxPool3dGrad: output must be rank 5 but got rank "+"".concat(d.rank,".")})),(0,rU.m)("maxPool3dGrad",o,i);var h={dy:l,input:f,output:d},m={filterSize:r,strides:a,pad:o,dimRoundingMode:i},v=eU.BV.runKernel(CV.OU,h,m);return p?(0,ZV.X)(v,[v.shape[1],v.shape[2],v.shape[3],v.shape[4]]):v}}),Sq={kernelName:CV.OA,inputsToSave:["x"],outputsToSave:[!0],gradFunc:function(e,t,n){var r=(0,a.Z)(t,2),o=r[0],i=r[1],s=n.filterSize,u=n.strides,c=n.pad,l=n.dimRoundingMode;return{x:function(){return kq(e,o,i,s,u,c,l)}}}};var _q=(0,aU.op)({maxPoolGrad_:function(e,t,n,r,a,o,i){var s=(0,tU._1)(e,"dy","maxPoolGrad"),u=(0,tU._1)(t,"input","maxPoolGrad"),c=(0,tU._1)(n,"output","maxPoolGrad");nU.hu(u.rank===s.rank,(function(){return"Rank of input (".concat(u.rank,") does not match rank of dy ")+"(".concat(s.rank,")")})),nU.hu(4===s.rank,(function(){return"Error in maxPoolGrad: dy must be rank 4 but got rank "+"".concat(s.rank,".")})),nU.hu(4===u.rank,(function(){return"Error in maxPoolGrad: input must be rank 4 but got rank "+"".concat(u.rank,".")})),rU.m("maxPoolGrad",o,i);var l={dy:s,input:u,output:c},f={filterSize:r,strides:a,pad:o,dimRoundingMode:i};return eU.BV.runKernel(CV.OV,l,f)}}),Nq={kernelName:CV.mT,inputsToSave:["x"],outputsToSave:[!0],gradFunc:function(e,t,n){var r=(0,a.Z)(t,2),o=r[0],i=r[1],s=n.filterSize,u=n.strides,c=n.pad;return{x:function(){return _q(e,o,i,s,u,c)}}}},Eq=n(6100),Cq={kernelName:CV.q2,inputsToSave:["x"],gradFunc:function(e,t,n){var r=(0,a.Z)(t,1)[0],o=n.axis,i=nU.EC(o,r.shape),s=(0,jU.kz)(r.shape,i)[1],u=nU.NA(s);return{x:function(){var t=r.shape.slice();i.forEach((function(e){t[e]=1}));var n=(0,ZV.X)(e,t);return(0,DV.h)((0,IV.d)(n,(0,Eq.i)(r.shape,"float32")),u)}}}},Tq={kernelName:CV.c1,inputsToSave:["x"],outputsToSave:[!0],gradFunc:function(e,t,n){var r=n.axis,o=(0,a.Z)(t,2),i=o[0],s=yq(e,o[1],i,nU.EC(r,i.shape));return{x:function(){return s.x()}}}},Iq={kernelName:CV.q8,inputsToSave:["a","b"],gradFunc:function(e,t){var n=(0,a.Z)(t,2),r=n[0],o=n[1];return{a:function(){return(0,IV.d)(e,(0,TV.p)((0,gU.z)(r,o),"float32"))},b:function(){return(0,IV.d)(e,(0,TV.p)((0,lq.p)(r,o),"float32"))}}}},Oq=n(9238),Aq={kernelName:CV.jQ,inputsToSave:["x"],gradFunc:function(e,t,n){var r=t[0],a=n.paddings.map((function(e){return e[0]}));return{x:function(){return(0,Oq.t)(e,a,r.shape)}}}},Dq=n(2628),Mq={kernelName:CV.Vb,inputsToSave:["a","b"],gradFunc:function(e,t){var n=(0,a.Z)(t,2),r=n[0],o=n[1],i=(0,zV.assertAndGetBroadcastShape)(r.shape,o.shape);return{a:function(){var t=(0,zV.getReductionAxes)(r.shape,i);return t.length>0?(0,ZV.X)((0,VV.S)(e,t),r.shape):e},b:function(){var t=(0,IV.d)(e,(0,MV.W)((0,Dq.G)((0,DV.h)(r,o)))),n=(0,zV.getReductionAxes)(o.shape,i);return n.length>0?(0,ZV.X)((0,VV.S)(t,n),o.shape):t}}}},Rq={kernelName:CV.wY,inputsToSave:["a","b"],gradFunc:function(e,t){var n=(0,a.Z)(t,2),r=n[0],o=n[1],i=(0,zV.assertAndGetBroadcastShape)(r.shape,o.shape);return{a:function(){var t=(0,IV.d)(e,(0,TV.p)(o,"float32")),n=(0,zV.getReductionAxes)(r.shape,i);return n.length>0?(0,ZV.X)((0,VV.S)(t,n),r.shape):t},b:function(){var t=(0,IV.d)(e,(0,TV.p)(r,"float32")),n=(0,zV.getReductionAxes)(o.shape,i);return n.length>0?(0,ZV.X)((0,VV.S)(t,n),o.shape):t}}}},Pq={kernelName:CV.ku,gradFunc:function(e){return{x:function(){return(0,MV.W)(e)}}}},jq=n(7742),Fq={kernelName:CV.we,inputsToSave:["indices"],gradFunc:function(e,t){var n=t[0];return{indices:function(){return(0,jq.l)(n.shape,"float32")}}}},Lq={kernelName:CV.qW,gradFunc:function(e){return{x:function(){return(0,WV.P)(e)}}}},Bq=n(4566),zq={kernelName:CV.Qi,saveAllInputs:!0,gradFunc:function(e,t,n){var r=n.axis;return(0,Bq.H)(e,r).map((function(e){return function(){return e}}))}},Zq={kernelName:CV.ly,inputsToSave:["x"],gradFunc:function(e,t,n){var r=t[0],a=n.paddings.map((function(e){return e[0]}));return{x:function(){return(0,Oq.t)(e,a,r.shape)}}}},Vq=n(378),Uq=n(4334),qq={kernelName:CV.pe,inputsToSave:["a","b"],outputsToSave:[!0],gradFunc:function(e,t){var n=(0,a.Z)(t,3),r=n[0],o=n[1],i=n[2],s=r,u=o,c=zV.assertAndGetBroadcastShape(s.shape,u.shape);return{a:function(){var t=(0,TV.p)(u,"float32"),n=(0,IV.d)(e,(0,IV.d)(t,(0,Uq.s)(s,(0,FV.l)(t,(0,RV.i)(1))))),r=zV.getReductionAxes(s.shape,c);return r.length>0&&(n=(0,VV.S)(n,r)),(0,ZV.X)(n,s.shape)},b:function(){var t=(0,lq.p)(s,0),n=(0,bU.a)(t,(0,Vq.c)(s),(0,WV.P)(s)),r=(0,IV.d)(e,(0,IV.d)(i,n)),a=zV.getReductionAxes(u.shape,c);return a.length>0&&(r=(0,VV.S)(r,a)),(0,ZV.X)(r,u.shape)}}}},Wq={kernelName:CV.o0,inputsToSave:["x","alpha"],gradFunc:function(e,t){var n=(0,a.Z)(t,2),r=n[0],o=n[1],i=(0,lq.p)(r,0);return{x:function(){return(0,bU.a)(i,e,(0,IV.d)(e,o))},alpha:function(){var t=(0,bU.a)(i,(0,WV.P)(e),(0,IV.d)(e,r)),n=(0,zV.getReductionAxes)(o.shape,e.shape);return n.length>0&&(t=(0,VV.S)(t,n)),(0,ZV.X)(t,o.shape)}}}},Hq={kernelName:CV.oH,inputsToSave:["a","b"],gradFunc:function(e,t){var n=(0,a.Z)(t,2),r=n[0],o=n[1],i=zV.assertAndGetBroadcastShape(r.shape,o.shape);return{a:function(){var t=(0,DV.h)(e,(0,TV.p)(o,"float32")),n=zV.getReductionAxes(r.shape,i);return n.length>0?(0,ZV.X)((0,VV.S)(t,n),r.shape):t},b:function(){var t=(0,IV.d)(e,(0,TV.p)(r,"float32")),n=zV.getReductionAxes(o.shape,i);n.length>0&&(t=(0,ZV.X)((0,VV.S)(t,n),o.shape));var a=(0,jV.h)(o);return(0,MV.W)((0,DV.h)(t,(0,TV.p)(a,"float32")))}}}},Gq={kernelName:CV.$H,inputsToSave:["x"],gradFunc:function(e,t){var n=(0,a.Z)(t,1)[0];return{x:function(){return(0,DV.h)(e,(0,MV.W)((0,jV.h)(n)))}}}},Kq={kernelName:CV.Sb,inputsToSave:["x"],gradFunc:function(e,t){var n=(0,a.Z)(t,1)[0],r=(0,IV.d)((0,gU.z)(n,6),(0,OV.N)(n));return{x:function(){return(0,IV.d)(e,(0,TV.p)(r,"float32"))}}}},Xq={kernelName:CV.qk,inputsToSave:["x"],gradFunc:function(e,t){var n=(0,a.Z)(t,1)[0];return{x:function(){return(0,IV.d)(e,(0,TV.p)((0,OV.N)(n),"float32"))}}}},Yq={kernelName:CV.HZ,inputsToSave:["x"],gradFunc:function(e,t){var n=(0,a.Z)(t,1)[0];return{x:function(){return(0,ZV.X)(e,n.shape)}}}},$q={kernelName:CV._Y,inputsToSave:["images"],gradFunc:function(e,t,n){var r={dy:e,images:(0,a.Z)(t,1)[0]};return{images:function(){return eU.BV.runKernel(CV.zb,r,n)}}}},Jq={kernelName:CV.dp,inputsToSave:["images"],gradFunc:function(e,t,n){var r={dy:e,images:(0,a.Z)(t,1)[0]};return{images:function(){return eU.BV.runKernel(CV.Hm,r,n)}}}},Qq=n(4933),eW={kernelName:CV.mK,gradFunc:function(e,t,n){var r=n.dims,a=(0,nU.EC)(r,e.shape);return{x:function(){return(0,Qq.G)(e,a)}}}},tW={kernelName:CV.e0,gradFunc:function(e){return{x:function(){return(0,WV.P)(e)}}}},nW={kernelName:CV.bV,inputsToSave:["x"],gradFunc:function(e,t){var n=(0,a.Z)(t,1)[0];return{x:function(){return(0,MV.W)((0,DV.h)(e,(0,IV.d)((0,Uq.s)(n,1.5),2)))}}}},rW=n(875),aW={kernelName:CV.Ph,inputsToSave:["condition"],gradFunc:function(e,t){var n=(0,a.Z)(t,1)[0];return{condition:function(){return(0,TV.p)((0,WV.P)(n),"float32")},t:function(){return(0,IV.d)(e,(0,TV.p)(n,e.dtype))},e:function(){return(0,IV.d)(e,(0,TV.p)((0,rW.h)(n),e.dtype))}}}},oW=n(349),iW={kernelName:CV.oF,inputsToSave:["x"],gradFunc:function(e,t){var n=(0,a.Z)(t,1)[0];return{x:function(){var t=(0,lq.p)(n,(0,RV.i)(0)),r=(0,RV.i)(oW.y),a=(0,RV.i)(oW.$),o=(0,IV.d)(e,a),i=(0,IV.d)((0,IV.d)(e,r),(0,WU.Q)((0,TV.p)(n,"float32")));return(0,bU.a)(t,o,i)}}}},sW={kernelName:CV.a5,outputsToSave:[!0],gradFunc:function(e,t){var n=(0,a.Z)(t,1)[0];return{x:function(){return(0,IV.d)(e,(0,IV.d)(n,(0,FV.l)((0,RV.i)(1),n)))}}}},uW={kernelName:CV.i5,gradFunc:function(e){return{x:function(){return(0,WV.P)(e)}}}},cW=n(1227),lW={kernelName:CV.RQ,inputsToSave:["x"],gradFunc:function(e,t){var n=(0,a.Z)(t,1)[0];return{x:function(){return(0,IV.d)((0,cW.m)((0,TV.p)(n,"float32")),e)}}}},fW=n(6679),dW={kernelName:CV.w3,inputsToSave:["x"],gradFunc:function(e,t){var n=(0,a.Z)(t,1)[0];return{x:function(){return(0,IV.d)((0,fW.f)((0,TV.p)(n,"float32")),e)}}}},pW=n(1970),hW=n(2875),mW={kernelName:CV.p2,inputsToSave:["x"],gradFunc:function(e,t,n){for(var r=(0,a.Z)(t,1)[0],o=n.begin,i=n.size,s=r.shape,u=(0,hW.parseSliceParams)(r,o,i),c=(0,a.Z)(u,2),l=c[0],f=c[1],d=[],p=0;p<e.rank;p++)d.push([l[p],s[p]-l[p]-f[p]]);return{x:function(){return(0,pW.v)(e,d)}}}},vW={kernelName:CV.Gc,outputsToSave:[!0],gradFunc:function(e,t,n){var r=(0,a.Z)(t,1)[0],o=n.dim,i=(0,IV.d)(e,r);return{logits:function(){return(0,FV.l)(i,(0,IV.d)((0,VV.S)(i,[o],true),r))}}}},gW=n(7643),yW={kernelName:CV.MR,inputsToSave:["x"],gradFunc:function(e,t){var n=(0,a.Z)(t,1)[0];return{x:function(){return(0,IV.d)(e,(0,gW.X)(n))}}}},bW=n(6994),xW={kernelName:CV.TQ,gradFunc:function(e,t,n){var r=n.blockShape,a=n.paddings;return{x:function(){return(0,bW.E)(e,r,a)}}}},wW=n(4836),kW={kernelName:CV.L8,gradFunc:function(e,t,n){var r=n.axis;return{x:function(){return(0,wW.z)(e,r)}}}},SW={kernelName:CV.FK,inputsToSave:["x"],gradFunc:function(e,t){var n=(0,a.Z)(t,1)[0];return{x:function(){return(0,DV.h)(e,(0,IV.d)((0,PV._)((0,TV.p)(n,"float32")),2))}}}},_W={kernelName:CV.bK,inputsToSave:["x"],gradFunc:function(e,t){var n=(0,a.Z)(t,1)[0];return{x:function(){return(0,IV.d)(e,(0,IV.d)((0,TV.p)(n,"float32"),2))}}}},NW={kernelName:CV._t,inputsToSave:["a","b"],gradFunc:function(e,t){var n=(0,a.Z)(t,2),r=n[0],o=n[1],i=(0,RV.i)(2);return{a:function(){return(0,IV.d)(e,(0,IV.d)(i,(0,FV.l)(r,o)))},b:function(){return(0,IV.d)(e,(0,IV.d)(i,(0,FV.l)(o,r)))}}}},EW={kernelName:CV.h8,gradFunc:function(e){return{x:function(){return(0,WV.P)(e)}}}},CW={kernelName:CV.Tr,inputsToSave:["a","b"],gradFunc:function(e,t){var n=(0,a.Z)(t,2),r=n[0],o=n[1],i=zV.assertAndGetBroadcastShape(r.shape,o.shape);return{a:function(){var t=e,n=zV.getReductionAxes(r.shape,i);return n.length>0&&(t=(0,VV.S)(t,n)),(0,ZV.X)(t,r.shape)},b:function(){var t=e,n=zV.getReductionAxes(o.shape,i);return n.length>0&&(t=(0,VV.S)(t,n)),(0,ZV.X)((0,MV.W)(t),o.shape)}}}},TW={kernelName:CV.GB,inputsToSave:["x"],gradFunc:function(e,t,n){var r=(0,a.Z)(t,1)[0],o=r.shape.slice(),i=n.axis;(0,nU.EC)(i,r.shape).forEach((function(e){o[e]=1}));var s=(0,ZV.X)(e,o),u=(0,IV.d)(s,(0,Eq.i)(r.shape,"float32"));return{x:function(){return u}}}},IW={kernelName:CV.sE,inputsToSave:["x"],gradFunc:function(e,t){var n=(0,a.Z)(t,1)[0];return{x:function(){return(0,DV.h)(e,(0,jV.h)((0,cW.m)(n)))}}}},OW={kernelName:CV.MI,outputsToSave:[!0],gradFunc:function(e,t){var n=(0,a.Z)(t,1)[0];return{x:function(){return(0,IV.d)((0,FV.l)((0,RV.i)(1),(0,jV.h)(n)),e)}}}},AW={kernelName:CV.n9,inputsToSave:["x"],gradFunc:function(e,t,n){var r=(0,a.Z)(t,1)[0],o=n.reps;return{x:function(){var t=(0,WV.P)(r);if(1===r.rank)for(var n=0;n<o[0];++n)t=(0,XV.I)(t,(0,Oq.t)(e,[n*r.shape[0]],[r.shape[0]]));else if(2===r.rank)for(var a=0;a<o[0];++a)for(var i=0;i<o[1];++i)t=(0,XV.I)(t,(0,Oq.t)(e,[a*r.shape[0],i*r.shape[1]],[r.shape[0],r.shape[1]]));else if(3===r.rank)for(var s=0;s<o[0];++s)for(var u=0;u<o[1];++u)for(var c=0;c<o[2];++c)t=(0,XV.I)(t,(0,Oq.t)(e,[s*r.shape[0],u*r.shape[1],c*r.shape[2]],[r.shape[0],r.shape[1],r.shape[2]]));else{if(4!==r.rank)throw new Error("Gradient for tile operation is not implemented for rank-"+"".concat(r.rank," tensors yet."));for(var l=0;l<o[0];++l)for(var f=0;f<o[1];++f)for(var d=0;d<o[2];++d)for(var p=0;p<o[3];++p)t=(0,XV.I)(t,(0,Oq.t)(e,[l*r.shape[0],f*r.shape[1],d*r.shape[2],p*r.shape[3]],[r.shape[0],r.shape[1],r.shape[2],r.shape[3]]))}return t}}}},DW={kernelName:CV.G3,gradFunc:function(e,t,n){var r=n.perm,a=jU.LJ(r);return{x:function(){return(0,LU.p)(e,a)}}}},MW=n(8306),RW={kernelName:CV.To,gradFunc:function(e,t,n){var r=n.axis;return{value:function(){return(0,MW.k)(e,r)}}}},PW=n(2975),jW=n(9498),FW=n(705),LW={kernelName:CV.Qv,inputsToSave:["segmentIds"],gradFunc:function(e,t){var n=(0,a.Z)(t,1)[0];return{x:function(){return function(e,t){for(var n=(0,FW.g)(t,(0,WV.P)(t)),r=(0,jW.I)(e,n),a=(0,vU.b)(t,(0,RV.i)(0,"int32")),o=r.rank-a.rank,i=0;i<o;++i)a=(0,PW.d)(a,i+1);a=(0,yU.H)(a,(0,Eq.i)(r.shape,"bool"));var s=(0,WV.P)(r);return(0,bU.a)(a,r,s)}(e,n)}}}};for(var BW={kernelName:CV.Ru,gradFunc:function(e){return{x:function(){return(0,WV.P)(e)}}}},zW=n(8864),ZW=0,VW=[AV,LV,BV,UV,qV,HV,GV,KV,YV,$V,JV,QV,iU,uU,lU,dU,pU,hU,mU,xU,wU,SU,TU,EU,AU,MU,PU,BU,VU,UU,Hq,qU,HU,GU,KU,XU,$U,YU,eq,nq,oq,iq,sq,uq,cq,fq,dq,pq,hq,vq,bq,bq,wq,Sq,Nq,Cq,Tq,Iq,Aq,Mq,Rq,Pq,Fq,Lq,zq,Zq,Zq,qq,Wq,Gq,Kq,Xq,Yq,$q,Jq,eW,tW,nW,aW,iW,sW,uW,lW,dW,mW,vW,yW,xW,xW,kW,kW,SW,NW,_W,EW,CW,TW,IW,OW,AW,DW,RW,LW,BW];ZW<VW.length;ZW++){var UW=VW[ZW];(0,zW.Li)(UW)}var qW=n(7613),WW=n(4376);(0,WW.t3)().prototype.abs=function(){return this.throwIfDisposed(),(0,qW.W)(this)};var HW=n(1719);(0,WW.t3)().prototype.acos=function(){return this.throwIfDisposed(),(0,HW.K)(this)};var GW=n(4502);(0,WW.t3)().prototype.acosh=function(){return this.throwIfDisposed(),(0,GW._)(this)},(0,WW.t3)().prototype.add=function(e){return this.throwIfDisposed(),(0,XV.I)(this,e)};var KW=n(4108);(0,WW.t3)().prototype.all=function(e,t){return this.throwIfDisposed(),(0,KW.$)(this,e,t)};var XW=n(8543);(0,WW.t3)().prototype.any=function(e,t){return this.throwIfDisposed(),(0,XW.Y)(this,e,t)};var YW=n(9995);(0,WW.t3)().prototype.argMax=function(e){return this.throwIfDisposed(),(0,YW.N)(this,e)};var $W=n(5157);(0,WW.t3)().prototype.argMin=function(e){return this.throwIfDisposed(),(0,$W.v)(this,e)},(0,WW.t3)().prototype.asScalar=function(){return this.throwIfDisposed(),(0,nU.hu)(1===this.size,(function(){return"The array must have only 1 element."})),(0,ZV.X)(this,[])},(0,WW.t3)().prototype.asType=function(e){return this.throwIfDisposed(),(0,TV.p)(this,e)},(0,WW.t3)().prototype.as1D=function(){return this.throwIfDisposed(),(0,ZV.X)(this,[this.size])},(0,WW.t3)().prototype.as2D=function(e,t){return this.throwIfDisposed(),(0,ZV.X)(this,[e,t])},(0,WW.t3)().prototype.as3D=function(e,t,n){return this.throwIfDisposed(),(0,ZV.X)(this,[e,t,n])},(0,WW.t3)().prototype.as4D=function(e,t,n,r){return this.throwIfDisposed(),(0,ZV.X)(this,[e,t,n,r])},(0,WW.t3)().prototype.as5D=function(e,t,n,r,a){return this.throwIfDisposed(),(0,ZV.X)(this,[e,t,n,r,a])};var JW=n(3053);(0,WW.t3)().prototype.asin=function(){return this.throwIfDisposed(),(0,JW.Z)(this)};var QW=n(54);(0,WW.t3)().prototype.asinh=function(){return this.throwIfDisposed(),(0,QW.V)(this)};var eH=n(4778);(0,WW.t3)().prototype.atan=function(){return this.throwIfDisposed(),(0,eH.z)(this)};var tH=n(2227);(0,WW.t3)().prototype.atan2=function(e){return this.throwIfDisposed(),(0,tH.f)(this,e)};var nH=n(6115);(0,WW.t3)().prototype.atanh=function(){return this.throwIfDisposed(),(0,nH.C)(this)};var rH=n(6573);(0,WW.t3)().prototype.avgPool=function(e,t,n,r){return this.throwIfDisposed(),(0,rH.w)(this,e,t,n,r)},(0,WW.t3)().prototype.batchToSpaceND=function(e,t){return this.throwIfDisposed(),(0,bW.E)(this,e,t)};var aH=n(3700);(0,WW.t3)().prototype.batchNorm=function(e,t,n,r,a){return this.throwIfDisposed(),(0,aH.t)(this,e,t,n,r,a)};var oH=n(9742);(0,WW.t3)().prototype.broadcastTo=function(e){return this.throwIfDisposed(),(0,oH.U)(this,e)},(0,WW.t3)().prototype.cast=function(e){return this.throwIfDisposed(),(0,TV.p)(this,e)};var iH=n(1396);(0,WW.t3)().prototype.ceil=function(){return this.throwIfDisposed(),(0,iH.m)(this)};var sH=n(9836);(0,WW.t3)().prototype.clipByValue=function(e,t){return this.throwIfDisposed(),(0,sH.i)(this,e,t)},(0,WW.t3)().prototype.concat=function(e,t){return this.throwIfDisposed(),e instanceof WW.es&&(e=[e]),(0,wW.z)([this].concat((0,r.Z)(e)),t)};var uH=n(4918);(0,WW.t3)().prototype.conv1d=function(e,t,n,r,a,o){return this.throwIfDisposed(),(0,uH.P)(this,e,t,n,r,a,o)};var cH=n(1732);(0,WW.t3)().prototype.conv2dTranspose=function(e,t,n,r,a){return this.throwIfDisposed(),(0,cH.b)(this,e,t,n,r,a)},(0,WW.t3)().prototype.conv2d=function(e,t,n,r,a,o){return this.throwIfDisposed(),(0,CU.T)(this,e,t,n,r,a,o)},(0,WW.t3)().prototype.cos=function(){return this.throwIfDisposed(),(0,cW.m)(this)},(0,WW.t3)().prototype.cosh=function(){return this.throwIfDisposed(),(0,fW.f)(this)},(0,WW.t3)().prototype.cumsum=function(e,t,n){return this.throwIfDisposed(),(0,FU.z)(this,e,t,n)};var lH=n(1878);(0,WW.t3)().prototype.depthToSpace=function(e,t){return this.throwIfDisposed(),(0,lH.n)(this,e,t)};var fH=n(1147);(0,WW.t3)().prototype.depthwiseConv2d=function(e,t,n,r,a,o){return this.throwIfDisposed(),(0,fH.B)(this,e,t,n,r,a,o)};var dH=n(7580);(0,WW.t3)().prototype.dilation2d=function(e,t,n,r,a){return this.throwIfDisposed(),(0,dH.W)(this,e,t,n,r,a)};var pH=n(5923);(0,WW.t3)().prototype.divNoNan=function(e){return this.throwIfDisposed(),(0,pH.N)(this,e)},(0,WW.t3)().prototype.div=function(e){return this.throwIfDisposed(),(0,DV.h)(this,e)};var hH=n(5043);(0,WW.t3)().prototype.dot=function(e){return this.throwIfDisposed(),(0,hH.A)(this,e)};var mH=n(2353);(0,WW.t3)().prototype.elu=function(){return this.throwIfDisposed(),(0,mH.p)(this)},(0,WW.t3)().prototype.equal=function(e){return this.throwIfDisposed(),(0,gq.D)(this,e)};var vH=n(3891);(0,WW.t3)().prototype.erf=function(){return this.throwIfDisposed(),(0,vH.q)(this)},(0,WW.t3)().prototype.exp=function(){return this.throwIfDisposed(),(0,WU.Q)(this)},(0,WW.t3)().prototype.expandDims=function(e){return this.throwIfDisposed(),(0,PW.d)(this,e)};var gH=n(5682);(0,WW.t3)().prototype.expm1=function(){return this.throwIfDisposed(),(0,gH.t)(this)};var yH=n(7635);(0,WW.t3)().prototype.fft=function(){return this.throwIfDisposed(),(0,yH.k)(this)},(0,WW.t3)().prototype.flatten=function(){return this.throwIfDisposed(),(0,ZV.X)(this,[this.size])},(0,WW.t3)().prototype.floor=function(){return this.throwIfDisposed(),(0,Dq.G)(this)};var bH=n(7145);(0,WW.t3)().prototype.floorDiv=function(e){return this.throwIfDisposed(),(0,bH.q)(this,e)},(0,WW.t3)().prototype.gather=function(e,t){return this.throwIfDisposed(),(0,jW.I)(this,e,t)},(0,WW.t3)().prototype.greaterEqual=function(e){return this.throwIfDisposed(),(0,vU.b)(this,e)},(0,WW.t3)().prototype.greater=function(e){return this.throwIfDisposed(),(0,lq.p)(this,e)};var xH=n(530);(0,WW.t3)().prototype.ifft=function(){return this.throwIfDisposed(),(0,xH.S)(this)};var wH=n(774);(0,WW.t3)().prototype.irfft=function(){return this.throwIfDisposed(),(0,wH.w)(this)};var kH=n(300);(0,WW.t3)().prototype.isFinite=function(){return this.throwIfDisposed(),(0,kH.x)(this)};var SH=n(4652);(0,WW.t3)().prototype.isInf=function(){return this.throwIfDisposed(),(0,SH.U)(this)};var _H=n(7005);(0,WW.t3)().prototype.isNaN=function(){return this.throwIfDisposed(),(0,_H.i)(this)};var NH=n(4419);(0,WW.t3)().prototype.leakyRelu=function(e){return this.throwIfDisposed(),(0,NH.h)(this,e)},(0,WW.t3)().prototype.lessEqual=function(e){return this.throwIfDisposed(),(0,gU.z)(this,e)},(0,WW.t3)().prototype.less=function(e){return this.throwIfDisposed(),(0,xq.d)(this,e)};var EH=n(936);(0,WW.t3)().prototype.localResponseNormalization=function(e,t,n,r){return this.throwIfDisposed(),(0,EH.G)(this,e,t,n,r)};var CH=n(5113);(0,WW.t3)().prototype.logSigmoid=function(){return this.throwIfDisposed(),(0,CH.e)(this)};var TH=n(4561);(0,WW.t3)().prototype.logSoftmax=function(e){return this.throwIfDisposed(),(0,TH.C)(this,e)};var IH=n(5530);(0,WW.t3)().prototype.logSumExp=function(e,t){return this.throwIfDisposed(),(0,IH.l)(this,e,t)},(0,WW.t3)().prototype.log=function(){return this.throwIfDisposed(),(0,Vq.c)(this)};var OH=n(7270);(0,WW.t3)().prototype.log1p=function(){return this.throwIfDisposed(),(0,OH.K)(this)},(0,WW.t3)().prototype.logicalAnd=function(e){return this.throwIfDisposed(),(0,yU.H)(this,e)},(0,WW.t3)().prototype.logicalNot=function(){return this.throwIfDisposed(),(0,rW.h)(this)};var AH=n(5117);(0,WW.t3)().prototype.logicalOr=function(e){return this.throwIfDisposed(),(0,AH.K)(this,e)};var DH=n(1712);(0,WW.t3)().prototype.logicalXor=function(e){return this.throwIfDisposed(),(0,DH.e)(this,e)},(0,WW.t3)().prototype.matMul=function(e,t,n){return this.throwIfDisposed(),(0,cU.O)(this,e,t,n)};var MH=n(5777);(0,WW.t3)().prototype.maxPool=function(e,t,n,r){return this.throwIfDisposed(),(0,MH._)(this,e,t,n,r)};var RH=n(6176);(0,WW.t3)().prototype.max=function(e,t){return this.throwIfDisposed(),(0,RH.F)(this,e,t)},(0,WW.t3)().prototype.maximum=function(e){return this.throwIfDisposed(),(0,FW.g)(this,e)};var PH=n(6568);(0,WW.t3)().prototype.mean=function(e,t){return this.throwIfDisposed(),(0,PH.J)(this,e,t)};var jH=n(7891);(0,WW.t3)().prototype.min=function(e,t){return this.throwIfDisposed(),(0,jH.V)(this,e,t)};var FH=n(2273);(0,WW.t3)().prototype.minimum=function(e){return this.throwIfDisposed(),(0,FH.L)(this,e)};var LH=n(9719);(0,WW.t3)().prototype.mirrorPad=function(e,t){return this.throwIfDisposed(),(0,LH.V)(this,e,t)};var BH=n(4645);(0,WW.t3)().prototype.mod=function(e){return this.throwIfDisposed(),(0,BH.w)(this,e)},(0,WW.t3)().prototype.mul=function(e){return this.throwIfDisposed(),(0,IV.d)(this,e)},(0,WW.t3)().prototype.neg=function(){return this.throwIfDisposed(),(0,MV.W)(this)};var zH=n(6662);(0,WW.t3)().prototype.norm=function(e,t,n){return this.throwIfDisposed(),(0,zH.K)(this,e,t,n)};var ZH=n(5549);(0,WW.t3)().prototype.notEqual=function(e){return this.throwIfDisposed(),(0,ZH.Q)(this,e)};var VH=n(4326);(0,WW.t3)().prototype.oneHot=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return this.throwIfDisposed(),(0,VH.l)(this,e,t,n)};var UH=n(773);(0,WW.t3)().prototype.onesLike=function(){return this.throwIfDisposed(),(0,UH.J)(this)},(0,WW.t3)().prototype.pad=function(e,t){return this.throwIfDisposed(),(0,pW.v)(this,e,t)};var qH=n(7226);(0,WW.t3)().prototype.pool=function(e,t,n,r,a,o){return this.throwIfDisposed(),(0,qH.d)(this,e,t,n,r,a,o)},(0,WW.t3)().prototype.pow=function(e){return this.throwIfDisposed(),(0,Uq.s)(this,e)};var WH=n(6859);(0,WW.t3)().prototype.prelu=function(e){return this.throwIfDisposed(),(0,WH.A)(this,e)};var HH=n(7722);(0,WW.t3)().prototype.prod=function(e,t){return this.throwIfDisposed(),(0,HH.W)(this,e,t)};var GH=n(2209);(0,WW.t3)().prototype.reciprocal=function(){return this.throwIfDisposed(),(0,GH.M)(this)};var KH=n(7539);(0,WW.t3)().prototype.relu=function(){return this.throwIfDisposed(),(0,KH.U)(this)};var XH=n(5900);(0,WW.t3)().prototype.relu6=function(){return this.throwIfDisposed(),(0,XH.b)(this)},(0,WW.t3)().prototype.reshapeAs=function(e){return this.throwIfDisposed(),(0,ZV.X)(this,e.shape)},(0,WW.t3)().prototype.reshape=function(e){return this.throwIfDisposed(),(0,ZV.X)(this,e)};var YH=n(464);(0,WW.t3)().prototype.resizeBilinear=function(e,t,n){return this.throwIfDisposed(),(0,YH.I)(this,e,t,n)};var $H=n(8600);(0,WW.t3)().prototype.resizeNearestNeighbor=function(e,t,n){return this.throwIfDisposed(),(0,$H.j)(this,e,t,n)},(0,WW.t3)().prototype.reverse=function(e){return this.throwIfDisposed(),(0,Qq.G)(this,e)};var JH=n(4617);(0,WW.t3)().prototype.rfft=function(){return this.throwIfDisposed(),(0,JH.Q)(this)};var QH=n(766);(0,WW.t3)().prototype.round=function(){return this.throwIfDisposed(),(0,QH.N)(this)},(0,WW.t3)().prototype.rsqrt=function(){return this.throwIfDisposed(),(0,JU.b)(this)};var eG=n(413);(0,WW.t3)().prototype.selu=function(){return this.throwIfDisposed(),(0,eG.U)(this)};var tG=n(119);(0,WW.t3)().prototype.separableConv2d=function(e,t,n,r,a,o){return this.throwIfDisposed(),(0,tG.U)(this,e,t,n,r,a,o)},(0,WW.t3)().prototype.sigmoid=function(){return this.throwIfDisposed(),(0,gW.X)(this)};var nG=n(2070);(0,WW.t3)().prototype.sign=function(){return this.throwIfDisposed(),(0,nG.X)(this)},(0,WW.t3)().prototype.sin=function(){return this.throwIfDisposed(),(0,DU.O)(this)},(0,WW.t3)().prototype.sinh=function(){return this.throwIfDisposed(),(0,RU.R)(this)},(0,WW.t3)().prototype.slice=function(e,t){return this.throwIfDisposed(),(0,Oq.t)(this,e,t)};var rG=n(4910);(0,WW.t3)().prototype.softmax=function(e){return this.throwIfDisposed(),(0,rG.X)(this,e)};var aG=n(4626);(0,WW.t3)().prototype.softplus=function(){return this.throwIfDisposed(),(0,aG.W)(this)},(0,WW.t3)().prototype.spaceToBatchND=function(e,t){return this.throwIfDisposed(),(0,fU.f)(this,e,t)},(0,WW.t3)().prototype.split=function(e,t){return this.throwIfDisposed(),(0,kU.V)(this,e,t)},(0,WW.t3)().prototype.sqrt=function(){return this.throwIfDisposed(),(0,PV._)(this)},(0,WW.t3)().prototype.square=function(){return this.throwIfDisposed(),(0,jV.h)(this)};var oG=n(7993);(0,WW.t3)().prototype.squaredDifference=function(e){return this.throwIfDisposed(),(0,oG.$)(this,e)};var iG=n(3931);(0,WW.t3)().prototype.squeeze=function(e){return this.throwIfDisposed(),(0,iG.L)(this,e)},(0,WW.t3)().prototype.stack=function(e,t){this.throwIfDisposed();var n=e instanceof WW.es?[this,e]:[this].concat((0,r.Z)(e));return(0,MW.k)(n,t)},(0,WW.t3)().prototype.step=function(e){return this.throwIfDisposed(),(0,OV.N)(this,e)};var sG=n(9017);(0,WW.t3)().prototype.stridedSlice=function(e,t,n,r,a,o,i,s){return this.throwIfDisposed(),(0,sG.N)(this,e,t,n,r,a,o,i,s)},(0,WW.t3)().prototype.sub=function(e){return this.throwIfDisposed(),(0,FV.l)(this,e)},(0,WW.t3)().prototype.sum=function(e,t){return this.throwIfDisposed(),(0,VV.S)(this,e,t)};var uG=n(6999);(0,WW.t3)().prototype.tan=function(){return this.throwIfDisposed(),(0,uG.O)(this)};var cG=n(1744);(0,WW.t3)().prototype.tanh=function(){return this.throwIfDisposed(),(0,cG.A)(this)},(0,WW.t3)().prototype.tile=function(e){return this.throwIfDisposed(),(0,QU.G)(this,e)},(0,WW.t3)().prototype.toBool=function(){return this.throwIfDisposed(),(0,TV.p)(this,"bool")},(0,WW.t3)().prototype.toFloat=function(){return this.throwIfDisposed(),(0,TV.p)(this,"float32")},(0,WW.t3)().prototype.toInt=function(){return this.throwIfDisposed(),(0,TV.p)(this,"int32")};var lG=n(9085);(0,WW.t3)().prototype.topk=function(e,t){return this.throwIfDisposed(),(0,lG.h)(this,e,t)},(0,WW.t3)().prototype.transpose=function(e){return this.throwIfDisposed(),(0,LU.p)(this,e)};var fG,dG=n(4860);function pG(){return null==fG&&(fG=(0,EV.backend)().epsilon()),fG}(0,WW.t3)().prototype.unique=function(e){return this.throwIfDisposed(),(0,dG.T)(this,e)},(0,WW.t3)().prototype.unsortedSegmentSum=function(e,t){return this.throwIfDisposed(),(0,tq.p)(this,e,t)},(0,WW.t3)().prototype.unstack=function(e){return this.throwIfDisposed(),(0,Bq.H)(this,e)},(0,WW.t3)().prototype.where=function(e,t){return this.throwIfDisposed(),(0,bU.a)(e,this,t)},(0,WW.t3)().prototype.zerosLike=function(){return this.throwIfDisposed(),(0,WV.P)(this)};var hG=function(e){(0,nu.Z)(n,e);var t=(0,ru.Z)(n);function n(e){var r;return(0,f.Z)(this,n),r=t.call(this,e),Object.setPrototypeOf((0,tu.Z)(r),n.prototype),r}return(0,d.Z)(n)}(gC(Error)),mG=function(e){(0,nu.Z)(n,e);var t=(0,ru.Z)(n);function n(e){var r;return(0,f.Z)(this,n),r=t.call(this,e),Object.setPrototypeOf((0,tu.Z)(r),n.prototype),r}return(0,d.Z)(n)}(gC(Error)),vG=function(e){(0,nu.Z)(n,e);var t=(0,ru.Z)(n);function n(e){var r;return(0,f.Z)(this,n),r=t.call(this,e),Object.setPrototypeOf((0,tu.Z)(r),n.prototype),r}return(0,d.Z)(n)}(gC(Error)),gG=function(e){(0,nu.Z)(n,e);var t=(0,ru.Z)(n);function n(e){var r;return(0,f.Z)(this,n),r=t.call(this,e),Object.setPrototypeOf((0,tu.Z)(r),n.prototype),r}return(0,d.Z)(n)}(gC(Error)),yG=function(e){(0,nu.Z)(n,e);var t=(0,ru.Z)(n);function n(e){var r;return(0,f.Z)(this,n),r=t.call(this,e),Object.setPrototypeOf((0,tu.Z)(r),n.prototype),r}return(0,d.Z)(n)}(gC(Error));Error;function bG(e,t){if(Array.isArray(e)){for(var n=[],r=0;r<t;r++)n=n.concat(e);return n}var a=new Array(t);return a.fill(e),a}function xG(e,t){if(!e)throw new yG(t)}function wG(e,t){var n,r=0,a=(0,Et.Z)(e);try{for(a.s();!(n=a.n()).done;){n.value===t&&r++}}catch(o){a.e(o)}finally{a.f()}return r}function kG(e){return 1===e.length?e[0]:e}function SG(e){return Array.isArray(e)?e:[e]}function _G(e){var t=e.replace(/(.)([A-Z][a-z0-9]+)/g,"$1_$2").replace(/([a-z])([A-Z])/g,"$1_$2").toLowerCase();return"_"!==t[0]?t:"private"+t}function NG(e){return e.length<=1||-1===e.indexOf("_")?e:e.replace(/[_]+(\w|$)/g,(function(e,t){return t.toUpperCase()}))}var EG={};function CG(e){if(null===e||void 0===e)return null;var t={};return t.className=e.getClassName(),t.config=e.getConfig(),t}function TG(e){if(null!=e&&"object"===typeof e)if(Array.isArray(e))e.forEach((function(e){return TG(e)}));else for(var t=0,n=Object.keys(e);t<n.length;t++){var r=n[t],a=e[r];null!=a&&"object"===typeof a&&(Array.isArray(a)||"ndarray"!==a.type||"number"!==typeof a.value?TG(a):e[r]=a.value)}}function IG(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"object",o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if("string"===typeof e){var i,s=e;if(s in n)i=n[s];else if(s in EG)i=EG[s];else if(null==(i=t[s]))throw new vG("Unknown ".concat(r,": ").concat(e,". ")+"This may be due to one of the following reasons:\n"+"1. The ".concat(r," is defined in Python, in which ")+"case it needs to be ported to TensorFlow.js or your JavaScript code.\n"+"2. The custom ".concat(r," is defined in JavaScript, ")+"but is not registered properly with tf.serialization.registerClass().");return i}var u=e;if(null==u.className||null==u.config)throw new vG("".concat(r,": Improper config format: ")+"".concat(JSON.stringify(u),".\n")+"'className' and 'config' must set.");var c,l,f=u.className;if(f in n){var d=(0,a.Z)(n[f],2);c=d[0],l=d[1]}else if(f in EG){var p=(0,a.Z)(EG.className,2);c=p[0],l=p[1]}else if(f in t){var h=(0,a.Z)(t[f],2);c=h[0],l=h[1]}if(null==c)throw new vG("Unknown ".concat(r,": ").concat(f,". ")+"This may be due to one of the following reasons:\n"+"1. The ".concat(r," is defined in Python, in which ")+"case it needs to be ported to TensorFlow.js or your JavaScript code.\n"+"2. The custom ".concat(r," is defined in JavaScript, ")+"but is not registered properly with tf.serialization.registerClass().");if(null!=l){for(var m={},v=0,g=Object.keys(EG);v<g.length;v++){var y=g[v];m[y]=EG[y]}for(var b=0,x=Object.keys(n);b<x.length;b++){var w=x[b];m[w]=n[w]}var k=u.config;k.customObjects=m;for(var S=Object.assign({},EG),_=0,N=Object.keys(n);_<N.length;_++){var E=N[_];EG[E]=n[E]}TG(u.config);var C=l(c,u.config,n,o);return EG=Object.assign({},S),C}for(var T=Object.assign({},EG),I=0,O=Object.keys(n);I<O.length;I++){var A=O[I];EG[A]=n[A]}var D=new c(u.config);return EG=Object.assign({},T),D}function OG(e,t){return-1*function(e,t){return e<t?-1:e>t?1:0}(e,t)}function AG(e){if(null==e)return e;var t,n=[],r=(0,Et.Z)(e);try{for(r.s();!(t=r.n()).done;){var a=t.value;-1===n.indexOf(a)&&n.push(a)}}catch(o){r.e(o)}finally{r.f()}return n}function DG(e){if(null==e)throw new vG("Invalid value in obj: ".concat(JSON.stringify(e)));for(var t in e)if(e.hasOwnProperty(t))return!1;return!0}function MG(e,t,n){if(null!=n&&e.indexOf(n)<0)throw new vG("".concat(n," is not a valid ").concat(t,".  Valid values are ").concat(e," or null/undefined."))}function RG(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1/0;return xG(n>=0),xG(r>=n),Array.isArray(e)&&e.length>=n&&e.length<=r&&e.every((function(e){return typeof e===t}))}function PG(e,t){Array.isArray(e)?(EV.util.assert(e.length>0,(function(){return"".concat(t," is unexpectedly an empty array.")})),e.forEach((function(e,n){return PG(e,"element ".concat(n+1," of ").concat(t))}))):EV.util.assert(Number.isInteger(e)&&e>0,(function(){return"Expected ".concat(t," to be a positive integer, but got ")+"".concat(jG(e),".")}))}function jG(e){return null===e?"null":Array.isArray(e)?"["+e.map((function(e){return jG(e)})).join(",")+"]":"string"===typeof e?'"'.concat(e,'"'):"".concat(e)}function FG(e){return"relu"===e?"relu":"linear"===e?"linear":"elu"===e?"elu":null}function LG(e,t){return(0,EV.tidy)((function(){return EV.sqrt(EV.sum(EV.mul(e,e),t,!0))}))}var BG=function(e){(0,nu.Z)(n,e);var t=(0,ru.Z)(n);function n(){return(0,f.Z)(this,n),t.apply(this,arguments)}return(0,d.Z)(n,[{key:"getConfig",value:function(){return{}}}]),n}(EV.serialization.Serializable),zG=function(e){(0,nu.Z)(n,e);var t=(0,ru.Z)(n);function n(e){var r;return(0,f.Z)(this,n),(r=t.call(this)).defaultMaxValue=2,r.defaultAxis=0,r.maxValue=null!=e.maxValue?e.maxValue:r.defaultMaxValue,r.axis=null!=e.axis?e.axis:r.defaultAxis,r}return(0,d.Z)(n,[{key:"apply",value:function(e){var t=this;return(0,EV.tidy)((function(){var n=LG(e,t.axis),r=EV.clipByValue(n,0,t.maxValue);return EV.mul(e,EV.div(r,EV.add(pG(),n)))}))}},{key:"getConfig",value:function(){return{maxValue:this.maxValue,axis:this.axis}}}]),n}(BG);zG.className="MaxNorm",EV.serialization.registerClass(zG);var ZG=function(e){(0,nu.Z)(n,e);var t=(0,ru.Z)(n);function n(e){var r;return(0,f.Z)(this,n),(r=t.call(this)).defaultAxis=0,r.axis=null!=e.axis?e.axis:r.defaultAxis,r}return(0,d.Z)(n,[{key:"apply",value:function(e){var t=this;return(0,EV.tidy)((function(){return EV.div(e,EV.add(pG(),LG(e,t.axis)))}))}},{key:"getConfig",value:function(){return{axis:this.axis}}}]),n}(BG);ZG.className="UnitNorm",EV.serialization.registerClass(ZG);var VG=function(e){(0,nu.Z)(n,e);var t=(0,ru.Z)(n);function n(){return(0,f.Z)(this,n),t.apply(this,arguments)}return(0,d.Z)(n,[{key:"apply",value:function(e){return EV.relu(e)}}]),n}(BG);VG.className="NonNeg",EV.serialization.registerClass(VG);var UG=function(e){(0,nu.Z)(n,e);var t=(0,ru.Z)(n);function n(e){var r;return(0,f.Z)(this,n),(r=t.call(this)).defaultMinValue=0,r.defaultMaxValue=1,r.defaultRate=1,r.defaultAxis=0,r.minValue=null!=e.minValue?e.minValue:r.defaultMinValue,r.maxValue=null!=e.maxValue?e.maxValue:r.defaultMaxValue,r.rate=null!=e.rate?e.rate:r.defaultRate,r.axis=null!=e.axis?e.axis:r.defaultAxis,r}return(0,d.Z)(n,[{key:"apply",value:function(e){var t=this;return(0,EV.tidy)((function(){var n=LG(e,t.axis),r=EV.add(EV.mul(t.rate,EV.clipByValue(n,t.minValue,t.maxValue)),EV.mul(1-t.rate,n));return EV.mul(e,EV.div(r,EV.add(pG(),n)))}))}},{key:"getConfig",value:function(){return{minValue:this.minValue,maxValue:this.maxValue,rate:this.rate,axis:this.axis}}}]),n}(BG);UG.className="MinMaxNorm",EV.serialization.registerClass(UG);var qG={maxNorm:"MaxNorm",minMaxNorm:"MinMaxNorm",nonNeg:"NonNeg",unitNorm:"UnitNorm"};function WG(e){return CG(e)}function HG(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return IG(e,EV.serialization.SerializationMap.getMap().classNameMap,t,"constraint")}function GG(e){return null==e?null:"string"===typeof e?HG({className:e in qG?qG[e]:e,config:{}}):e instanceof BG?e:HG(e)}var KG=["channelsFirst","channelsLast"],XG=["nearest","bilinear"],YG=["valid","same","causal"],$G=["max","avg"],JG=["sum","mul","concat","ave"],QG=new Map;function eK(e){MG(KG,"DataFormat",e)}function tK(e){MG(YG,"PaddingMode",e)}function nK(e){MG($G,"PoolMode",e)}var rK=[];function aK(e,t){rK.push(e);try{var n=t();return rK.pop(),n}catch(r){throw rK.pop(),r}}function oK(e){if(!uK(e))throw new Error("Not a valid tensor name: '"+e+"'");return(0===rK.length?"":rK.join("/")+"/")+e}function iK(e){if(!uK(e))throw new Error("Not a valid tensor name: '"+e+"'");QG.has(e)||QG.set(e,0);var t=QG.get(e);if(QG.set(e,QG.get(e)+1),t>0){var n="".concat(e,"_").concat(t);return QG.set(n,1),n}return e}var sK=new RegExp(/^[A-Za-z0-9][-A-Za-z0-9\._\/]*$/);function uK(e){return!!e.match(sK)}function cK(e,t,n){null==t&&(t=0),null==n&&(n=e.length);for(var r=1,a=t;a<n;++a)r*=e[a];return r}function lK(e){if(0===e.length)return Number.NaN;for(var t=Number.POSITIVE_INFINITY,n=0;n<e.length;n++){var r=e[n];r<t&&(t=r)}return t}function fK(e){if(0===e.length)return Number.NaN;for(var t=Number.NEGATIVE_INFINITY,n=0;n<e.length;n++){var r=e[n];r>t&&(t=r)}return t}function dK(e,t){if(t<e)throw new vG("end (".concat(t,") < begin (").concat(e,") is forbidden."));for(var n=[],r=e;r<t;++r)n.push(r);return n}function pK(e,t){return EV.cast(e,t)}function hK(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,n=e.shape.slice();return t<0&&(t=n.length+t+1),n.splice(t,0,1),EV.reshape(e,n)}function mK(e){var t=[cK(e.shape)];return EV.reshape(e,t)}function vK(e,t,n){return(0,EV.tidy)((function(){switch(e.rank){case 1:return EV.slice1d(e,t,n);case 2:return EV.slice2d(e,[t,0],[n,e.shape[1]]);case 3:return EV.slice3d(e,[t,0,0],[n,e.shape[1],e.shape[2]]);case 4:return EV.slice4d(e,[t,0,0,0],[n,e.shape[1],e.shape[2],e.shape[3]]);case 5:return EV.slice(e,[t,0,0,0,0],[n,e.shape[1],e.shape[2],e.shape[3],e.shape[4]]);case 6:return EV.slice(e,[t,0,0,0,0,0],[n,e.shape[1],e.shape[2],e.shape[3],e.shape[4],e.shape[5]]);default:throw new vG("sliceAlongFirstAxis() received an unsupported tensor rank: "+"".concat(e.rank))}}))}function gK(e,t,n){return(0,EV.tidy)((function(){switch(e.rank){case 1:return EV.slice1d(e,t,n);case 2:return EV.slice2d(e,[0,t],[e.shape[0],n]);case 3:return EV.slice3d(e,[0,0,t],[e.shape[0],e.shape[1],n]);case 4:return EV.slice4d(e,[0,0,0,t],[e.shape[0],e.shape[1],e.shape[2],n]);default:throw new vG("sliceAlongLastAxis() received an unsupported tensor rank: "+"".concat(e.rank))}}))}function yK(e,t,n,r){return(0,EV.tidy)((function(){switch(e.rank){case 1:return EV.slice1d(e,t,n);case 2:switch(r){case 1:return vK(e,t,n);case 2:return gK(e,t,n);default:throw new vG("The axis is not within the rank of the tensor "+"".concat(r))}case 3:switch(r){case 1:return vK(e,t,n);case 2:return EV.slice3d(e,[0,t,0],[e.shape[0],n,e.shape[2]]);case 3:return gK(e,t,n);default:throw new vG("The axis is not within the rank of the tensor "+"".concat(r))}case 4:switch(r){case 1:return vK(e,t,n);case 2:return EV.slice4d(e,[0,t,0,0],[e.shape[0],n,e.shape[2],e.shape[3]]);case 3:return EV.slice4d(e,[0,0,t,0],[e.shape[0],e.shape[1],n,e.shape[3]]);case 4:return gK(e,t,n);default:throw new vG("The axis is not within the rank of the tensor "+"".concat(r))}default:throw new vG("sliceAlongLastAxis() received an unsupported tensor rank: "+"".concat(e.rank))}}))}function bK(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;return n<0&&(n=0!==(t=e[0].rank)?t:0),n===e[0].rank&&(n=-1),EV.concat(e,n)}function xK(e,t){switch(e.rank){case 1:return EV.concat1d([e,t]);case 2:return EV.concat2d([e,t],0);case 3:return EV.concat3d([e,t],0);case 4:return EV.concat4d([e,t],0);default:throw new vG("concatAlongFirstAxis() received an unsupported "+"tensor rank: ".concat(e.rank))}}function wK(e,t){if(Array.isArray(t)||(t=[t]),e.rank!==t.length)throw new vG("The length of input n (".concat(t.length,") does not match ")+"the number of dimensions in input x (".concat(e.rank,")"));return EV.tile(e,t)}function kK(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3?arguments[3]:void 0,a=arguments.length>4?arguments[4]:void 0;return EV.randomNormal(e,t,n,r,a)}function SK(e,t,n,a){if(e.rank<2||t.rank<2)throw new gG("dot requires both inputs to be rank >= 2"+" but got x shape = ".concat(e.shape," and y shape = ").concat(t.shape));if(t.rank>=3&&e.shape.slice(-1)[0]!==t.shape.slice(-2)[0])throw new gG("If rank y >= 3, then the second last dim"+" of y must equal the last dim of x but got x shape = ".concat(e.shape," and ")+" y shape = ".concat(t.shape));if(2===e.rank&&2===t.rank){return EV.fused.matMul({a:e,b:t,transposeA:!1,transposeB:!1,bias:a?EK(e.rank,a,"channelsLast"):null,activation:n})}var o=e.shape.slice(),i=o.pop();e=EV.reshape(e,[-1,i]);var s=t.shape.slice(),u=s.pop(),c=s.pop(),l=[].concat((0,r.Z)(s),[u]),f=Array.from({length:t.rank},(function(e,n){return 0===n?t.rank-2:n<=t.rank-2?n-1:n}));t=EV.reshape(EV.transpose(t,f),[c,-1]);var d=[].concat((0,r.Z)(o),(0,r.Z)(l));return EV.reshape(EV.fused.matMul({a:e,b:t,transposeA:!1,transposeB:!1,bias:a?EK(e.rank,a,"channelsLast"):null,activation:n}),d)}function _K(e,t,n){return(0,EV.tidy)((function(){return t=Array.isArray(t)?(0,EV.tensor1d)(t,"int32"):EV.cast(t,"int32"),EV.gather(e,t,n)}))}function NK(e){return EV.mul(e,e)}function EK(e,t,n){var r=t.shape;if(1!==t.rank&&t.rank!==e)throw new vG("Unexpected bias dimensions: ".concat(t.rank)+"; expected it to be 1 or ".concat(e));if(5===e){if("channelsFirst"===n)return 1===r.length?EV.reshape(t,[1,r[0],1,1,1]):EV.reshape(t,[1,r[3],r[0],r[1],r[2]]);if("channelsLast"===n)return 1===r.length?EV.reshape(t,[1,1,1,1,r[0]]):EV.reshape(t,[1].concat(r))}else if(4===e){if("channelsFirst"===n)return 1===r.length?EV.reshape(t,[1,r[0],1,1]):EV.reshape(t,[1,r[2],r[0],r[1]]);if("channelsLast"===n)return 1===r.length?EV.reshape(t,[1,1,1,r[0]]):EV.reshape(t,[1].concat(r))}else if(3===e){if("channelsFirst"===n)return 1===r.length?EV.reshape(t,[1,r[0],1]):EV.reshape(t,[1,r[1],r[0]]);if("channelsLast"===n)return 1===r.length?EV.reshape(t,[1,1,r[0]]):EV.reshape(t,[1].concat(r))}else if(e<3)return t;throw new vG("Unsupported input rank by biasAdd: ".concat(t.rank))}function CK(e,t,n){return(0,EV.tidy)((function(){return null==n&&(n="channelsLast"),eK(n),EV.add(e,EK(e.rank,t,n))}))}function TK(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(1!==t)throw new gG("Support for alpha values other than 1 (".concat(t,") is not implemented ")+"yet.");return EV.elu(e)}function IK(e,t,n,r){return(0,EV.tidy)((function(){return EV.dropout(e,t,n,r)}))}function OK(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return n?e():t()}var AK=["fanIn","fanOut","fanAvg"],DK=["normal","uniform","truncatedNormal"];var MK=function(e){(0,nu.Z)(n,e);var t=(0,ru.Z)(n);function n(){return(0,f.Z)(this,n),t.apply(this,arguments)}return(0,d.Z)(n,[{key:"fromConfigUsesCustomObjects",value:function(){return!1}},{key:"getConfig",value:function(){return{}}}]),n}(EV.serialization.Serializable),RK=function(e){(0,nu.Z)(n,e);var t=(0,ru.Z)(n);function n(){return(0,f.Z)(this,n),t.apply(this,arguments)}return(0,d.Z)(n,[{key:"apply",value:function(e,t){return(0,EV.zeros)(e,t)}}]),n}(MK);RK.className="Zeros",EV.serialization.registerClass(RK);var PK=function(e){(0,nu.Z)(n,e);var t=(0,ru.Z)(n);function n(){return(0,f.Z)(this,n),t.apply(this,arguments)}return(0,d.Z)(n,[{key:"apply",value:function(e,t){return(0,EV.ones)(e,t)}}]),n}(MK);PK.className="Ones",EV.serialization.registerClass(PK);var jK=function(e){(0,nu.Z)(n,e);var t=(0,ru.Z)(n);function n(e){var r;if((0,f.Z)(this,n),r=t.call(this),"object"!==typeof e)throw new vG("Expected argument of type ConstantConfig but got ".concat(e));if(void 0===e.value)throw new vG("config must have value set but got ".concat(e));return r.value=e.value,r}return(0,d.Z)(n,[{key:"apply",value:function(e,t){var n=this;return(0,EV.tidy)((function(){return(0,EV.mul)((0,EV.scalar)(n.value),(0,EV.ones)(e,t))}))}},{key:"getConfig",value:function(){return{value:this.value}}}]),n}(MK);jK.className="Constant",EV.serialization.registerClass(jK);var FK=function(e){(0,nu.Z)(n,e);var t=(0,ru.Z)(n);function n(e){var r;return(0,f.Z)(this,n),(r=t.call(this)).DEFAULT_MINVAL=-.05,r.DEFAULT_MAXVAL=.05,r.minval=e.minval||r.DEFAULT_MINVAL,r.maxval=e.maxval||r.DEFAULT_MAXVAL,r.seed=e.seed,r}return(0,d.Z)(n,[{key:"apply",value:function(e,t){return(0,EV.randomUniform)(e,this.minval,this.maxval,t)}},{key:"getConfig",value:function(){return{minval:this.minval,maxval:this.maxval,seed:this.seed}}}]),n}(MK);FK.className="RandomUniform",EV.serialization.registerClass(FK);var LK=function(e){(0,nu.Z)(n,e);var t=(0,ru.Z)(n);function n(e){var r;return(0,f.Z)(this,n),(r=t.call(this)).DEFAULT_MEAN=0,r.DEFAULT_STDDEV=.05,r.mean=e.mean||r.DEFAULT_MEAN,r.stddev=e.stddev||r.DEFAULT_STDDEV,r.seed=e.seed,r}return(0,d.Z)(n,[{key:"apply",value:function(e,t){if("float32"!==(t=t||"float32")&&"int32"!==t)throw new gG("randomNormal does not support dType ".concat(t,"."));return kK(e,this.mean,this.stddev,t,this.seed)}},{key:"getConfig",value:function(){return{mean:this.mean,stddev:this.stddev,seed:this.seed}}}]),n}(MK);LK.className="RandomNormal",EV.serialization.registerClass(LK);var BK=function(e){(0,nu.Z)(n,e);var t=(0,ru.Z)(n);function n(e){var r;return(0,f.Z)(this,n),(r=t.call(this)).DEFAULT_MEAN=0,r.DEFAULT_STDDEV=.05,r.mean=e.mean||r.DEFAULT_MEAN,r.stddev=e.stddev||r.DEFAULT_STDDEV,r.seed=e.seed,r}return(0,d.Z)(n,[{key:"apply",value:function(e,t){if("float32"!==(t=t||"float32")&&"int32"!==t)throw new gG("truncatedNormal does not support dType ".concat(t,"."));return(0,EV.truncatedNormal)(e,this.mean,this.stddev,t,this.seed)}},{key:"getConfig",value:function(){return{mean:this.mean,stddev:this.stddev,seed:this.seed}}}]),n}(MK);BK.className="TruncatedNormal",EV.serialization.registerClass(BK);var zK=function(e){(0,nu.Z)(n,e);var t=(0,ru.Z)(n);function n(e){var r;return(0,f.Z)(this,n),(r=t.call(this)).gain=null!=e.gain?e.gain:1,r}return(0,d.Z)(n,[{key:"apply",value:function(e,t){var n=this;return(0,EV.tidy)((function(){if(2!==e.length||e[0]!==e[1])throw new vG("Identity matrix initializer can only be used for 2D square matrices.");return(0,EV.mul)(n.gain,(0,EV.eye)(e[0]))}))}},{key:"getConfig",value:function(){return{gain:this.gain}}}]),n}(MK);zK.className="Identity",EV.serialization.registerClass(zK);var ZK=function(e){(0,nu.Z)(n,e);var t=(0,ru.Z)(n);function n(e){var r,a;if((0,f.Z)(this,n),r=t.call(this),e.scale<0)throw new vG("scale must be a positive float. Got: ".concat(e.scale));return r.scale=null==e.scale?1:e.scale,r.mode=null==e.mode?"fanIn":e.mode,a=r.mode,MG(AK,"FanMode",a),r.distribution=null==e.distribution?"normal":e.distribution,function(e){MG(DK,"Distribution",e)}(r.distribution),r.seed=e.seed,r}return(0,d.Z)(n,[{key:"apply",value:function(e,t){var n=function(e){var t,n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"channelsLast";if(eK(r),2===e.length)t=e[0],n=e[1];else if(-1!==[3,4,5].indexOf(e.length)){if("channelsFirst"===r){var a=cK(e,2);t=e[1]*a,n=e[0]*a}else if("channelsLast"===r){var o=cK(e,0,e.length-2);t=e[e.length-2]*o,n=e[e.length-1]*o}}else{var i=cK(e);t=Math.sqrt(i),n=Math.sqrt(i)}return[t,n]}(e),r=n[0],a=n[1],o=this.scale;if("fanIn"===this.mode?o/=Math.max(1,r):"fanOut"===this.mode?o/=Math.max(1,a):o/=Math.max(1,(r+a)/2),"normal"===this.distribution){var i=Math.sqrt(o);if("float32"!==(t=t||"float32")&&"int32"!==t)throw new gG("".concat(this.getClassName()," does not support dType ").concat(t,"."));return(0,EV.truncatedNormal)(e,0,i,t,this.seed)}var s=Math.sqrt(3*o);return(0,EV.randomUniform)(e,-s,s,t)}},{key:"getConfig",value:function(){return{scale:this.scale,mode:this.mode,distribution:this.distribution,seed:this.seed}}}]),n}(MK);ZK.className="VarianceScaling",EV.serialization.registerClass(ZK);var VK=function(e){(0,nu.Z)(n,e);var t=(0,ru.Z)(n);function n(e){return(0,f.Z)(this,n),t.call(this,{scale:1,mode:"fanAvg",distribution:"uniform",seed:null==e?null:e.seed})}return(0,d.Z)(n,[{key:"getClassName",value:function(){return ZK.className}}]),n}(ZK);VK.className="GlorotUniform",EV.serialization.registerClass(VK);var UK=function(e){(0,nu.Z)(n,e);var t=(0,ru.Z)(n);function n(e){return(0,f.Z)(this,n),t.call(this,{scale:1,mode:"fanAvg",distribution:"normal",seed:null==e?null:e.seed})}return(0,d.Z)(n,[{key:"getClassName",value:function(){return ZK.className}}]),n}(ZK);UK.className="GlorotNormal",EV.serialization.registerClass(UK);var qK=function(e){(0,nu.Z)(n,e);var t=(0,ru.Z)(n);function n(e){return(0,f.Z)(this,n),t.call(this,{scale:2,mode:"fanIn",distribution:"normal",seed:null==e?null:e.seed})}return(0,d.Z)(n,[{key:"getClassName",value:function(){return ZK.className}}]),n}(ZK);qK.className="HeNormal",EV.serialization.registerClass(qK);var WK=function(e){(0,nu.Z)(n,e);var t=(0,ru.Z)(n);function n(e){return(0,f.Z)(this,n),t.call(this,{scale:2,mode:"fanIn",distribution:"uniform",seed:null==e?null:e.seed})}return(0,d.Z)(n,[{key:"getClassName",value:function(){return ZK.className}}]),n}(ZK);WK.className="HeUniform",EV.serialization.registerClass(WK);var HK=function(e){(0,nu.Z)(n,e);var t=(0,ru.Z)(n);function n(e){return(0,f.Z)(this,n),t.call(this,{scale:1,mode:"fanIn",distribution:"normal",seed:null==e?null:e.seed})}return(0,d.Z)(n,[{key:"getClassName",value:function(){return ZK.className}}]),n}(ZK);HK.className="LeCunNormal",EV.serialization.registerClass(HK);var GK=function(e){(0,nu.Z)(n,e);var t=(0,ru.Z)(n);function n(e){return(0,f.Z)(this,n),t.call(this,{scale:1,mode:"fanIn",distribution:"uniform",seed:null==e?null:e.seed})}return(0,d.Z)(n,[{key:"getClassName",value:function(){return ZK.className}}]),n}(ZK);GK.className="LeCunNormal",EV.serialization.registerClass(GK);var KK=function(e){(0,nu.Z)(n,e);var t=(0,ru.Z)(n);function n(e){var r;if((0,f.Z)(this,n),(r=t.call(this)).DEFAULT_GAIN=1,r.gain=null==e.gain?r.DEFAULT_GAIN:e.gain,r.seed=e.seed,null!=r.seed)throw new gG("Random seed is not implemented for Orthogonal Initializer yet.");return r}return(0,d.Z)(n,[{key:"apply",value:function(e,t){var n=this;return(0,EV.tidy)((function(){if(e.length<2)throw new gG("Shape must be at least 2D.");e[0]*e[1]>2e3&&console.warn("Orthogonal initializer is being called on a matrix with more "+"than 2000 (".concat(e[0]*e[1],") elements: ")+"Slowness may result.");var t=kK(e[0]>e[1]?[e[1],e[0]]:e,0,1,"float32"),r=EV.linalg.gramSchmidt(t);return e[0]>e[1]&&(r=(0,EV.transpose)(r)),(0,EV.mul)(n.gain,r)}))}},{key:"getConfig",value:function(){return{gain:this.gain,seed:this.seed}}}]),n}(MK);KK.className="Orthogonal",EV.serialization.registerClass(KK);var XK={constant:"Constant",glorotNormal:"GlorotNormal",glorotUniform:"GlorotUniform",heNormal:"HeNormal",heUniform:"HeUniform",identity:"Identity",leCunNormal:"LeCunNormal",leCunUniform:"LeCunUniform",ones:"Ones",orthogonal:"Orthogonal",randomNormal:"RandomNormal",randomUniform:"RandomUniform",truncatedNormal:"TruncatedNormal",varianceScaling:"VarianceScaling",zeros:"Zeros"};function YK(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return IG(e,EV.serialization.SerializationMap.getMap().classNameMap,t,"initializer")}function $K(e){return CG(e)}function JK(e){if("string"===typeof e){var t=e in XK?XK[e]:e;if("GlorotNormal"===t)return new UK;if("GlorotUniform"===t)return new VK;if("HeNormal"===t)return new qK;if("HeUniform"===t)return new WK;if("LeCunNormal"===t)return new HK;if("LeCunUniform"===t)return new GK;var n={};return n.className=t,n.config={},YK(n)}return e instanceof MK?e:YK(e)}var QK=0;function eX(){return QK++}var tX={};function nX(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e in tX||(tX[e]=0),tX[e]+=1,e+tX[e].toString()}function rX(e){return Array.isArray(e)&&Array.isArray(e[0])}function aX(e){return 0===e.length?[]:Array.isArray(e[0])?e:[e]}function oX(e){var t;if(Array.isArray(e)){if(1!==e.length)throw new vG("Expected Tensor length to be 1; got ".concat(e.length));t=e[0]}else t=e;return t}function iX(e){if(Array.isArray(e)&&Array.isArray(e[0])){if(1===e.length)return(e=e)[0];throw new vG("Expected exactly 1 Shape; got ".concat(e.length))}return e}function sX(e){var t,n=0,r=(0,Et.Z)(e);try{for(r.s();!(t=r.n()).done;){var a=t.value;0===a.shape.length?n+=1:n+=a.shape.reduce((function(e,t){return e*t}))}}catch(o){r.e(o)}finally{r.f()}return n}var uX="Variable",cX=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"float32",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:uX,a=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;(0,f.Z)(this,e),this.dtype=null==n?"float32":n,this.shape=t.shape,this.id=eX(),r=null==r?uX:r,this.originalName=oK(r),this.name=iK(this.originalName),this.trainable_=a,this.constraint=o,this.val=EV.variable(t,this.trainable_,this.name,this.dtype)}return(0,d.Z)(e,[{key:"read",value:function(){return this.assertNotDisposed(),this.val}},{key:"write",value:function(e){return this.assertNotDisposed(),function(e,t){if(e.shape.toString()!==t.shape.toString())throw new Error("Shape mismatch: "+JSON.stringify(e.shape)+" vs. "+JSON.stringify(t.shape))}(this.val,e),this.val.id!==e.id&&(this.val.assign(e),null!=this.constraint&&this.val.assign(this.constraint.apply(this.val))),this}},{key:"dispose",value:function(){this.assertNotDisposed(),this.val.dispose()}},{key:"assertNotDisposed",value:function(){if(this.val.isDisposed)throw new Error("LayersVariable ".concat(this.name," is already disposed."))}},{key:"trainable",get:function(){return this.trainable_},set:function(e){this.trainable_=e,this.val.trainable=e}}]),e}();function lX(e){return e.map((function(e){return e.read()}))}function fX(e){e.forEach((function(e){e[0].write(e[1])}))}var dX=(0,d.Z)((function e(t){(0,f.Z)(this,e),this.dtype=t.dtype,this.shape=t.shape,null!=t.shape?this.ndim=t.shape.length:this.ndim=t.ndim,this.maxNDim=t.maxNDim,this.minNDim=t.minNDim,this.axes=t.axes||{}})),pX=(0,d.Z)((function e(t,n,r,a,o,i,s){(0,f.Z)(this,e),this.dtype=t,this.shape=n,this.sourceLayer=r,this.inputs=a,this.callArgs=o,this.outputTensorIndex=s,this.id=eX(),null!=i&&(this.originalName=oK(i),this.name=iK(this.originalName)),this.rank=n.length})),hX=0,mX=function(){function e(t,n){(0,f.Z)(this,e),this.callArgs=n,this.id=hX++,this.outboundLayer=t.outboundLayer,this.inboundLayers=t.inboundLayers,this.nodeIndices=t.nodeIndices,this.tensorIndices=t.tensorIndices,this.inputTensors=t.inputTensors,this.outputTensors=t.outputTensors,this.inputMasks=t.inputMasks,this.outputMasks=t.outputMasks,this.inputShapes=t.inputShapes,this.outputShapes=t.outputShapes;var r,a=(0,Et.Z)(t.inboundLayers);try{for(a.s();!(r=a.n()).done;){var o=r.value;null!=o&&o.outboundNodes.push(this)}}catch(i){a.e(i)}finally{a.f()}t.outboundLayer.inboundNodes.push(this)}return(0,d.Z)(e,[{key:"getConfig",value:function(){var e,t=[],n=(0,Et.Z)(this.inboundLayers);try{for(n.s();!(e=n.n()).done;){var r=e.value;null!=r?t.push(r.name):t.push(null)}}catch(a){n.e(a)}finally{n.f()}return{outboundLayer:this.outboundLayer?this.outboundLayer.name:null,inboundLayers:t,nodeIndices:this.nodeIndices,tensorIndices:this.tensorIndices}}}]),e}(),vX=0,gX=function(e){(0,nu.Z)(n,e);var t=(0,ru.Z)(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,f.Z)(this,n),(e=t.call(this))._callHook=null,e._addedWeightNames=[],e._stateful=!1,e.id=vX++,e.activityRegularizer=null,e.inputSpec=null,e.supportsMasking=!1,e._trainableWeights=[],e._nonTrainableWeights=[],e._losses=[],e._updates=[],e._built=!1,e.inboundNodes=[],e.outboundNodes=[];var a=r.name;if(!a){var o=e.getClassName();a=_G(o)+"_"+nX(o)}if(e.name=a,e.trainable_=null==r.trainable||r.trainable,null!=r.inputShape||null!=r.batchInputShape){var i;if(null!=r.batchInputShape)i=r.batchInputShape;else if(null!=r.inputShape){var s=null;null!=r.batchSize&&(s=r.batchSize),i=[s].concat(r.inputShape)}e.batchInputShape=i;var u=r.dtype;null==u&&(u=r.inputDType),null==u&&(u="float32"),e.dtype=u}return null!=r.weights?e.initialWeights=r.weights:e.initialWeights=null,e._refCount=null,e.fastWeightInitDuringBuild=!1,e}return(0,d.Z)(n,[{key:"getNodeAtIndex",value:function(e,t){if(0===this.inboundNodes.length)throw new mG("The layer has never been called "+"and thus has no defined ".concat(t,"."));if(this.inboundNodes.length<=e)throw new vG("Asked to get ".concat(t," at node ").concat(e,", ")+"but the layer has only ".concat(this.inboundNodes.length," inbound nodes."));return this.inboundNodes[e]}},{key:"getInputAt",value:function(e){return kG(this.getNodeAtIndex(e,"input").inputTensors)}},{key:"getOutputAt",value:function(e){return kG(this.getNodeAtIndex(e,"output").outputTensors)}},{key:"input",get:function(){if(this.inboundNodes.length>1)throw new hG("Layer ".concat(this.name)+' has multiple inbound nodes, hence the notion of "layer input" is ill-defined. Use `getInputAt(nodeIndex)` instead.');if(0===this.inboundNodes.length)throw new hG("Layer ".concat(this.name)+" is not connected, no input to return.");return kG(this.getNodeAtIndex(0,"input").inputTensors)}},{key:"output",get:function(){if(0===this.inboundNodes.length)throw new hG("Layer ".concat(this.name)+" has no inbound nodes.");if(this.inboundNodes.length>1)throw new hG("Layer ".concat(this.name)+' has multiple inbound nodes, hence the notion of "layer output" is ill-defined. Use `getOutputAt(nodeIndex)` instead.');return kG(this.getNodeAtIndex(0,"output").outputTensors)}},{key:"losses",get:function(){return this._losses}},{key:"calculateLosses",value:function(){return this.losses.map((function(e){return e()}))}},{key:"updates",get:function(){return this._updates}},{key:"built",get:function(){return this._built},set:function(e){this._built=e}},{key:"trainable",get:function(){return this.trainable_},set:function(e){this._trainableWeights.forEach((function(t){return t.trainable=e})),this.trainable_=e}},{key:"trainableWeights",get:function(){return this.trainable_?this._trainableWeights.filter((function(e){return e.trainable})):[]},set:function(e){this._trainableWeights=e}},{key:"nonTrainableWeights",get:function(){return this.trainable?this._trainableWeights.filter((function(e){return!e.trainable})).concat(this._nonTrainableWeights):this._trainableWeights.concat(this._nonTrainableWeights)},set:function(e){this._nonTrainableWeights=e}},{key:"weights",get:function(){return this.trainableWeights.concat(this.nonTrainableWeights)}},{key:"stateful",get:function(){return this._stateful}},{key:"resetStates",value:function(){if(!this.stateful)throw new Error("Cannot call the resetStates() method of a non-stateful Layer object.")}},{key:"assertInputCompatibility",value:function(e){if(e=SG(e),null!=this.inputSpec&&0!==this.inputSpec.length){var t=SG(this.inputSpec);if(e.length!==t.length)throw new vG("Layer ".concat(this.name," expects ").concat(t.length," inputs, ")+"but it received ".concat(e.length," input tensors. ")+"Input received: ".concat(e));for(var n=0;n<e.length;n++){var r=e[n],a=t[n];if(null!=a){var o=r.rank;if(null!=a.ndim&&o!==a.ndim)throw new vG("Input ".concat(n," is incompatible with layer ").concat(this.name,": ")+"expected ndim=".concat(a.ndim,", found ndim=").concat(o));if(null!=a.maxNDim&&o>a.maxNDim)throw new vG("Input ".concat(n," is incompatible with layer ").concat(this.name)+": expected max_ndim=".concat(a.maxNDim,", found ndim=").concat(o));if(null!=a.minNDim&&o<a.minNDim)throw new vG("Input ".concat(n," is incompatible with layer ").concat(this.name)+": expected min_ndim=".concat(a.minNDim,", found ndim=").concat(o,"."));if(null!=a.dtype&&r.dtype!==a.dtype)throw new vG("Input ".concat(n," is incompatible with layer ").concat(this.name," ")+": expected dtype=".concat(a.dtype,", found dtype=").concat(r.dtype,"."));if(a.axes){var i=r.shape;for(var s in a.axes){var u=Number(s),c=a.axes[s],l=u>=0?i[u]:i[i.length+u];if(null!=c&&-1===[c,null].indexOf(l))throw new vG("Input ".concat(n," is incompatible with layer ")+"".concat(this.name,": expected axis ").concat(u," of input shape to ")+"have value ".concat(c," but got shape ").concat(i,"."))}}if(null!=a.shape)for(var f=0;f<a.shape.length;++f){var d=a.shape[f],p=r.shape[f];if(null!=d&&null!=p&&d!==p)throw new vG("Input ".concat(n," is incompatible with layer ")+"".concat(this.name,": expected shape=").concat(a.shape,", ")+"found shape=".concat(r.shape,"."))}}}}}},{key:"call",value:function(e,t){return e}},{key:"invokeCallHook",value:function(e,t){null!=this._callHook&&this._callHook(e,t)}},{key:"setCallHook",value:function(e){this._callHook=e}},{key:"clearCallHook",value:function(){this._callHook=null}},{key:"apply",value:function(e,t){var n=this;t=t||{},this.assertNotDisposed();var r,a=SG(e),o=!0,i=(0,Et.Z)(a);try{for(i.s();!(r=i.n()).done;){if(!(r.value instanceof pX)){o=!1;break}}}catch(l){i.e(l)}finally{i.f()}var s,u=!0,c=(0,Et.Z)(a);try{for(c.s();!(s=c.n()).done;){if(s.value instanceof pX){u=!1;break}}}catch(l){c.e(l)}finally{c.f()}if(o===u)throw new vG("Arguments to apply() must be all SymbolicTensors or all Tensors");return aK(this.name,(function(){if(!n.built){n.assertInputCompatibility(e);var r,o=[],i=(0,Et.Z)(SG(e));try{for(i.s();!(r=i.n()).done;){var s=r.value;o.push(s.shape)}}catch(l){i.e(l)}finally{i.f()}n.build(kG(o)),n.built=!0,n.initialWeights&&n.setWeights(n.initialWeights),null===n._refCount&&u&&(n._refCount=1)}if(n.assertInputCompatibility(e),u){var c,f=n.call(e,t),d=SG(f),p=[],h=(0,Et.Z)(d);try{for(h.s();!(c=h.n()).done;){var m=c.value;-1!==a.indexOf(m)&&(m=m.clone()),p.push(m)}}catch(l){h.e(l)}finally{h.f()}if(f=kG(p),null!=n.activityRegularizer)throw new gG("Layer invocation in the presence of activity regularizer(s) is not supported yet.");return f}var v,g=function(e){e=SG(e);var t,n=[],r=(0,Et.Z)(e);try{for(r.s();!(t=r.n()).done;){var a=t.value;n.push(a.shape)}}catch(l){r.e(l)}finally{r.f()}return kG(n)}(e),y=n.computeOutputShape(g),b="float32";if(n.warnOnIncompatibleInputShape(Array.isArray(e)?g[0]:g),v=null!=y&&y.length>0&&Array.isArray(y[0])?y.map((function(r,a){return new pX(b,r,n,SG(e),t,n.name,a)})):new pX(b,y,n,SG(e),t,n.name),n.addInboundNode(e,v,null,null,g,y,t),n._refCount++,null!=n.activityRegularizer)throw new gG("Layer invocation in the presence of activity regularizer(s) is not supported yet.");return v}))}},{key:"warnOnIncompatibleInputShape",value:function(e){if(null!=this.batchInputShape)if(e.length!==this.batchInputShape.length)console.warn("The rank of the input tensor provided (shape: "+"".concat(JSON.stringify(e),") does not match that of the ")+"batchInputShape (".concat(JSON.stringify(this.batchInputShape),") ")+"of the layer ".concat(this.name));else{var t=!1;this.batchInputShape.forEach((function(n,r){null!=n&&null!=e[r]&&e[r]!==n&&(t=!0)})),t&&console.warn("The shape of the input tensor "+"(".concat(JSON.stringify(e),") does not ")+"match the expectation of layer ".concat(this.name,": ")+"".concat(JSON.stringify(this.batchInputShape)))}}},{key:"outputShape",get:function(){if(null==this.inboundNodes||0===this.inboundNodes.length)throw new hG("The layer ".concat(this.name," has never been called and thus has no ")+"defined output shape.");var e,t=[],n=(0,Et.Z)(this.inboundNodes);try{for(n.s();!(e=n.n()).done;){var r=e.value,a=JSON.stringify(r.outputShapes);-1===t.indexOf(a)&&t.push(a)}}catch(i){n.e(i)}finally{n.f()}if(1===t.length){var o=this.inboundNodes[0].outputShapes;return Array.isArray(o)&&Array.isArray(o[0])&&1===o.length?o[0]:o}throw new hG("The layer ".concat(this.name," has multiple inbound nodes with different ")+'output shapes. Hence the notion of "output shape" is ill-defined for the layer.')}},{key:"countParams",value:function(){if(!this.built)throw new mG("You tried to call countParams() on ".concat(this.name,", ")+"but the layer is not built yet. Build it first by calling build(batchInputShape).");return sX(this.weights)}},{key:"build",value:function(e){this.built=!0}},{key:"getWeights",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return lX(e?this.trainableWeights:this.weights)}},{key:"setWeights",value:function(e){var t=this;(0,EV.tidy)((function(){var n=t.weights;if(n.length!==e.length)throw new vG('You called setWeights(weights) on layer "'.concat(t.name,'" ')+"with a weight list of length ".concat(e.length,", ")+"but the layer was expecting ".concat(n.length," weights. ")+"Provided weights: ".concat(e,"..."));if(0!==n.length){for(var r=[],a=lX(n),o=0;o<a.length;++o){var i=a[o],s=n[o],u=e[o];if(!EV.util.arraysEqual(i.shape,u.shape))throw new vG("Layer weight shape ".concat(i.shape," ")+"not compatible with provided weight shape ".concat(u.shape));r.push([s,u])}fX(r)}}))}},{key:"addWeight",value:function(e,t,n,r,a,o,i,s){if(-1!==this._addedWeightNames.indexOf(e))throw new vG("Duplicate weight name ".concat(e," for layer ").concat(this.name));this._addedWeightNames.push(e),null==n&&(n="float32"),this.fastWeightInitDuringBuild&&(r=null!=s?s():JK("zeros"));var u=r.apply(t,n),c=new cX(u,n,e,o,i);return u.dispose(),null!=a&&this.addLoss((function(){return a.apply(c.read())})),null==o&&(o=!0),o?this._trainableWeights.push(c):this._nonTrainableWeights.push(c),c}},{key:"setFastWeightInitDuringBuild",value:function(e){this.fastWeightInitDuringBuild=e}},{key:"addLoss",value:function(e){var t;null==e||Array.isArray(e)&&0===e.length||(e=SG(e),void 0!==this._losses&&null!==this._losses&&(t=this.losses).push.apply(t,(0,r.Z)(e)))}},{key:"computeOutputShape",value:function(e){return e}},{key:"computeMask",value:function(e,t){var n=this;if(!this.supportsMasking){if(null!=t){if(!Array.isArray(t))throw new TypeError("Layer ".concat(this.name," does not support masking, ")+"but was passed an inputMask.");t.forEach((function(e){if(null!=e)throw new TypeError("Layer ".concat(n.name," does not support masking, ")+"but was passed an inputMask.")}))}return null}return t}},{key:"addInboundNode",value:function(e,t,n,r,a,o){var i=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,s=SG(e);t=SG(t),n=SG(n),r=SG(r),a=aX(a),o=aX(o);var u,c=[],l=[],f=[],d=(0,Et.Z)(s);try{for(d.s();!(u=d.n()).done;){var p=u.value;c.push(p.sourceLayer),l.push(p.nodeIndex),f.push(p.tensorIndex)}}catch(m){d.e(m)}finally{d.f()}new mX({outboundLayer:this,inboundLayers:c,nodeIndices:l,tensorIndices:f,inputTensors:s,outputTensors:t,inputMasks:n,outputMasks:r,inputShapes:a,outputShapes:o},i);for(var h=0;h<t.length;h++)t[h].sourceLayer=this,t[h].nodeIndex=this.inboundNodes.length-1,t[h].tensorIndex=h}},{key:"getConfig",value:function(){var e={name:this.name,trainable:this.trainable};return null!=this.batchInputShape&&(e.batchInputShape=this.batchInputShape),null!=this.dtype&&(e.dtype=this.dtype),e}},{key:"disposeWeights",value:function(){return this.weights.forEach((function(e){return e.dispose()})),this.weights.length}},{key:"assertNotDisposed",value:function(){if(0===this._refCount)throw new Error("Layer '".concat(this.name,"' is already disposed."))}},{key:"dispose",value:function(){if(!this.built)throw new Error("Cannot dispose Layer ".concat(this.name," because it has not been ")+"built yet.");if(null===this._refCount)throw new Error("Cannot dispose Layer ".concat(this.name," because it has not been used ")+"yet.");this.assertNotDisposed();var e=0;return 0===--this._refCount&&(e=this.disposeWeights()),{refCountAfterDispose:this._refCount,numDisposedVariables:e}}}],[{key:"nodeKey",value:function(e,t){return e.name+"_ib-"+t.toString()}}]),n}(EV.serialization.Serializable);function yX(e,t,n){if((null==t||null!=n&&n>0)&&(t=e.sourceLayer,n=e.nodeIndex),0===t.inboundNodes.length)return[e];var r=t.inboundNodes[n];if(0===r.inboundLayers.length)return r.inputTensors;for(var a=[],o=0;o<r.inboundLayers.length;o++){var i,s=yX(r.inputTensors[o],r.inboundLayers[o],r.nodeIndices[o]),u=(0,Et.Z)(s);try{for(u.s();!(i=u.n()).done;){var c=i.value;-1===a.indexOf(c)&&a.push(c)}}catch(l){u.e(l)}finally{u.f()}}return a}var bX,xX=function(e){(0,nu.Z)(n,e);var t=(0,ru.Z)(n);function n(e){var r;if((0,f.Z)(this,n),r=t.call(this,{dtype:e.dtype,name:null!=e.name?e.name:nX("input").toString()}),null==e.batchSize&&(e.batchSize=null),null==e.sparse&&(e.sparse=!1),r.trainable=!1,r.built=!0,r.sparse=e.sparse,null!=e.inputShape&&null!=e.batchInputShape)throw new vG("Only provide the inputShape OR batchInputShape argument to inputLayer, not both at the same time.");var a=e.batchInputShape;if(null==a){if(null==e.inputShape)throw new vG("An InputLayer should be passed either a `batchInputShape` or an `inputShape`.");a=[e.batchSize].concat(e.inputShape)}else if(null!=e.batchSize)throw new vG("Cannot specify batchSize if batchInputShape is specified when creating an InputLayer.");var o=e.dtype||"float32";r.batchInputShape=a,r.dtype=o,r.inputSpec=[{shape:a}];var i=new pX(r.dtype,r.batchInputShape,(0,tu.Z)(r),[],{},r.name);return i.nodeIndex=0,i.tensorIndex=0,new mX({outboundLayer:(0,tu.Z)(r),inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:[i],outputTensors:[i],inputMasks:[null],outputMasks:[null],inputShapes:[a],outputShapes:[a]}),r}return(0,d.Z)(n,[{key:"apply",value:function(e,t){throw new vG("Cannot pass any input to an "+"InputLayer's apply() method. InputLayer name: ".concat(this.name))}},{key:"dispose",value:function(){return{refCountAfterDispose:this._refCount,numDisposedVariables:0}}},{key:"getConfig",value:function(){return{batchInputShape:this.batchInputShape,dtype:this.dtype,sparse:this.sparse,name:this.name}}}]),n}(gX);function wX(e){return kX.apply(this,arguments)}function kX(){return kX=(0,o.Z)(l().mark((function e(t){var n,r,a,o,i,s,u,c;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=t){e.next=2;break}return e.abrupt("return");case 2:for(o in n=[],r=[],a=[],t)"number"!==typeof(i=t[o])&&(s=i,n.push(s.data()),r.push(o),a.push(s));if(!(n.length>0)){e.next=12;break}return e.next=9,Promise.all(n);case 9:for(u=e.sent,c=0;c<u.length;++c)t[r[c]]=u[c][0];(0,EV.dispose)(a);case 12:case"end":return e.stop()}}),e)}))),kX.apply(this,arguments)}function SX(e){if(null!=e)for(var t in e){var n=e[t];"number"!==typeof n&&n.dispose()}}xX.className="InputLayer",EV.serialization.registerClass(xX),function(e){e[e.SILENT=0]="SILENT",e[e.VERBOSE=1]="VERBOSE"}(bX||(bX={}));var _X=function(){function e(){(0,f.Z)(this,e),this.validationData=null}return(0,d.Z)(e,[{key:"setParams",value:function(e){this.params=e}},{key:"onEpochBegin",value:function(){var e=(0,o.Z)(l().mark((function e(t,n){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"onEpochEnd",value:function(){var e=(0,o.Z)(l().mark((function e(t,n){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"onBatchBegin",value:function(){var e=(0,o.Z)(l().mark((function e(t,n){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"onBatchEnd",value:function(){var e=(0,o.Z)(l().mark((function e(t,n){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"onTrainBegin",value:function(){var e=(0,o.Z)(l().mark((function e(t){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"onTrainEnd",value:function(){var e=(0,o.Z)(l().mark((function e(t){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"setModel",value:function(e){}}]),e}(),NX=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;(0,f.Z)(this,e),null==t&&(t=[]),this.callbacks=t,this.queueLength=n}return(0,d.Z)(e,[{key:"append",value:function(e){this.callbacks.push(e)}},{key:"setParams",value:function(e){var t,n=(0,Et.Z)(this.callbacks);try{for(n.s();!(t=n.n()).done;){t.value.setParams(e)}}catch(r){n.e(r)}finally{n.f()}}},{key:"setModel",value:function(e){var t,n=(0,Et.Z)(this.callbacks);try{for(n.s();!(t=n.n()).done;){t.value.setModel(e)}}catch(r){n.e(r)}finally{n.f()}}},{key:"onEpochBegin",value:function(){var e=(0,o.Z)(l().mark((function e(t,n){var r,a,o;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null==n&&(n={}),r=(0,Et.Z)(this.callbacks),e.prev=2,r.s();case 4:if((a=r.n()).done){e.next=10;break}return o=a.value,e.next=8,o.onEpochBegin(t,n);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),r.e(e.t0);case 15:return e.prev=15,r.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,this,[[2,12,15,18]])})));return function(t,n){return e.apply(this,arguments)}}()},{key:"onEpochEnd",value:function(){var e=(0,o.Z)(l().mark((function e(t,n){var r,a,o;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null==n&&(n={}),r=(0,Et.Z)(this.callbacks),e.prev=2,r.s();case 4:if((a=r.n()).done){e.next=10;break}return o=a.value,e.next=8,o.onEpochEnd(t,n);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),r.e(e.t0);case 15:return e.prev=15,r.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,this,[[2,12,15,18]])})));return function(t,n){return e.apply(this,arguments)}}()},{key:"onBatchBegin",value:function(){var e=(0,o.Z)(l().mark((function e(t,n){var r,a,o;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null==n&&(n={}),r=(0,Et.Z)(this.callbacks),e.prev=2,r.s();case 4:if((a=r.n()).done){e.next=10;break}return o=a.value,e.next=8,o.onBatchBegin(t,n);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),r.e(e.t0);case 15:return e.prev=15,r.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,this,[[2,12,15,18]])})));return function(t,n){return e.apply(this,arguments)}}()},{key:"onBatchEnd",value:function(){var e=(0,o.Z)(l().mark((function e(t,n){var r,a,o;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null==n&&(n={}),r=(0,Et.Z)(this.callbacks),e.prev=2,r.s();case 4:if((a=r.n()).done){e.next=10;break}return o=a.value,e.next=8,o.onBatchEnd(t,n);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),r.e(e.t0);case 15:return e.prev=15,r.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,this,[[2,12,15,18]])})));return function(t,n){return e.apply(this,arguments)}}()},{key:"onTrainBegin",value:function(){var e=(0,o.Z)(l().mark((function e(t){var n,r,a;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null==t&&(t={}),n=(0,Et.Z)(this.callbacks),e.prev=2,n.s();case 4:if((r=n.n()).done){e.next=10;break}return a=r.value,e.next=8,a.onTrainBegin(t);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),n.e(e.t0);case 15:return e.prev=15,n.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,this,[[2,12,15,18]])})));return function(t){return e.apply(this,arguments)}}()},{key:"onTrainEnd",value:function(){var e=(0,o.Z)(l().mark((function e(t){var n,r,a;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null==t&&(t={}),n=(0,Et.Z)(this.callbacks),e.prev=2,n.s();case 4:if((r=n.n()).done){e.next=10;break}return a=r.value,e.next=8,a.onTrainEnd(t);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),n.e(e.t0);case 15:return e.prev=15,n.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,this,[[2,12,15,18]])})));return function(t){return e.apply(this,arguments)}}()}]),e}(),EX=function(e){(0,nu.Z)(n,e);var t=(0,ru.Z)(n);function n(){return(0,f.Z)(this,n),t.call(this)}return(0,d.Z)(n,[{key:"onEpochBegin",value:function(){var e=(0,o.Z)(l().mark((function e(t){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.seen=0,this.totals={};case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onBatchEnd",value:function(){var e=(0,o.Z)(l().mark((function e(t,n){var r,a,o,i=this;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(o in null==n&&(n={}),r=null==n.size?0:n.size,this.seen+=r,a=function(e){var t=n[e];if("number"===typeof t)i.totals.hasOwnProperty(e)||(i.totals[e]=0),i.totals[e]=i.totals[e]+t*r;else{var a;e in i.totals?a=i.totals[e]:i.totals[e]=0;var o=(0,EV.tidy)((function(){return(0,EV.add)(i.totals[e],(0,EV.mul)(t,r))}));i.totals[e]=o,null!=a&&a.dispose()}},n)a(o);case 5:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"onEpochEnd",value:function(){var e=(0,o.Z)(l().mark((function e(t,n){var r,a,o,i=this;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==n){e.next=19;break}r=(0,Et.Z)(this.params.metrics),e.prev=2,o=function(){var e=a.value;if(null==i.totals[e])return"continue";"number"===typeof i.totals[e]?n[e]=i.totals[e]/i.seen:(0,EV.tidy)((function(){var t=(0,EV.mul)((0,EV.div)(1,i.seen),i.totals[e]);n[e]=t,i.totals[e].dispose(),(0,EV.keep)(n[e])}))},r.s();case 5:if((a=r.n()).done){e.next=11;break}if("continue"!==o()){e.next=9;break}return e.abrupt("continue",9);case 9:e.next=5;break;case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(2),r.e(e.t0);case 16:return e.prev=16,r.f(),e.finish(16);case 19:case"end":return e.stop()}}),e,this,[[2,13,16,19]])})));return function(t,n){return e.apply(this,arguments)}}()}]),n}(_X),CX=function(e){(0,nu.Z)(n,e);var t=(0,ru.Z)(n);function n(){return(0,f.Z)(this,n),t.apply(this,arguments)}return(0,d.Z)(n,[{key:"onTrainBegin",value:function(){var e=(0,o.Z)(l().mark((function e(t){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.epoch=[],this.history={};case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onEpochEnd",value:function(){var e=(0,o.Z)(l().mark((function e(t,n){var r;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(r in null==n&&(n={}),this.epoch.push(t),n)null==this.history[r]&&(this.history[r]=[]),this.history[r].push(n[r]);case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"syncData",value:function(){var e=(0,o.Z)(l().mark((function e(){var t,n,r,a,o,i,s,u,c;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(a in t=[],n=[],r=[],this.history)for(o=this.history[a],i=0;i<o.length;++i)"number"!==typeof o[i]&&(s=o[i],t.push(s.data()),n.push(a),r.push(i));return e.next=6,Promise.all(t);case 6:for(u=e.sent,c=0;c<u.length;++c)this.history[n[c]][r[c]].dispose(),this.history[n[c]][r[c]]=u[c][0];case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(_X),TX=function(e){(0,nu.Z)(n,e);var t=(0,ru.Z)(n);function n(e,r){var a;if((0,f.Z)(this,n),(a=t.call(this)).currentEpoch=0,a.nowFunc=e.nowFunc,a.nextFrameFunc=e.nextFrameFunc||EV.nextFrame,a.yieldEvery=r||"auto","auto"===a.yieldEvery&&(a.yieldEvery=125),"never"===a.yieldEvery&&null!=e.onYield)throw new Error("yieldEvery is `never` but you provided an `onYield` callback. Either change `yieldEvery` or remove the callback");return EV.util.isNumber(a.yieldEvery)&&(a.maybeWait=function(e,t,n){var r,a=null!=n?n():EV.util.now();return function(){var o=null!=n?n():EV.util.now();return o-a<t?r:(a=o,r=e.apply(void 0,arguments))}}(a.maybeWait.bind((0,tu.Z)(a)),a.yieldEvery,a.nowFunc)),a.trainBegin=e.onTrainBegin,a.trainEnd=e.onTrainEnd,a.epochBegin=e.onEpochBegin,a.epochEnd=e.onEpochEnd,a.batchBegin=e.onBatchBegin,a.batchEnd=e.onBatchEnd,a.yield=e.onYield,a}return(0,d.Z)(n,[{key:"maybeWait",value:function(){var e=(0,o.Z)(l().mark((function e(t,n,r){var a;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=[],null==this.yield){e.next=5;break}return e.next=4,wX(r);case 4:a.push(this.yield(t,n,r));case 5:return a.push(this.nextFrameFunc()),e.next=8,Promise.all(a);case 8:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"onEpochBegin",value:function(){var e=(0,o.Z)(l().mark((function e(t,n){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.currentEpoch=t,null==this.epochBegin){e.next=6;break}return e.next=4,wX(n);case 4:return e.next=6,this.epochBegin(t,n);case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"onEpochEnd",value:function(){var e=(0,o.Z)(l().mark((function e(t,n){var r;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=[],null==this.epochEnd){e.next=5;break}return e.next=4,wX(n);case 4:r.push(this.epochEnd(t,n));case 5:return"epoch"===this.yieldEvery&&r.push(this.nextFrameFunc()),e.next=8,Promise.all(r);case 8:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"onBatchBegin",value:function(){var e=(0,o.Z)(l().mark((function e(t,n){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==this.batchBegin){e.next=5;break}return e.next=3,wX(n);case 3:return e.next=5,this.batchBegin(t,n);case 5:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"onBatchEnd",value:function(){var e=(0,o.Z)(l().mark((function e(t,n){var r;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=[],null==this.batchEnd){e.next=5;break}return e.next=4,wX(n);case 4:r.push(this.batchEnd(t,n));case 5:return"batch"===this.yieldEvery?r.push(this.nextFrameFunc()):EV.util.isNumber(this.yieldEvery)&&r.push(this.maybeWait(this.currentEpoch,t,n)),e.next=8,Promise.all(r);case 8:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"onTrainBegin",value:function(){var e=(0,o.Z)(l().mark((function e(t){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==this.trainBegin){e.next=5;break}return e.next=3,wX(t);case 3:return e.next=5,this.trainBegin(t);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onTrainEnd",value:function(){var e=(0,o.Z)(l().mark((function e(t){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==this.trainEnd){e.next=5;break}return e.next=3,wX(t);case 3:return e.next=5,this.trainEnd(t);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(_X);function IX(e,t){return null==e&&(e={}),e instanceof _X?[e]:Array.isArray(e)&&e[0]instanceof _X?e:SG(e).map((function(e){return new TX(e,t)}))}var OX=function(){function e(){(0,f.Z)(this,e)}return(0,d.Z)(e,null,[{key:"registerCallbackConstructor",value:function(t,n){EV.util.assert(t>=0&&Number.isInteger(t),(function(){return"Verbosity level is expected to be an integer >= 0, "+"but got ".concat(t)})),e.checkForDuplicate(n),null==e.constructors[t]&&(e.constructors[t]=[]),e.constructors[t].push(n)}},{key:"checkForDuplicate",value:function(t){for(var n in e.constructors){e.constructors[+n].forEach((function(e){if(e===t)throw new vG("Duplicate callback constructor.")}))}}},{key:"clear",value:function(){e.constructors={}}},{key:"createCallbacks",value:function(t){var n=[];for(var a in e.constructors){var o=+a;t>=o&&n.push.apply(n,(0,r.Z)(e.constructors[o]))}return n.map((function(e){return new e}))}}]),e}();function AX(e,t,n,a,o,i,s,u,c){var l=new CX,f=[new EX].concat((0,r.Z)(OX.createCallbacks(t)));null!=e&&f.push.apply(f,(0,r.Z)(e)),f.push(l);var d=new NX(f);return d.setParams({epochs:n,initialEpoch:a,samples:o,steps:i,batchSize:s,verbose:t,doValidation:u,metrics:c}),{callbackList:d,history:l}}function DX(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=(0,pC.Z)(e)););return e}function MX(){return MX="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=DX(e,t);if(r){var a=Object.getOwnPropertyDescriptor(r,t);return a.get?a.get.call(arguments.length<3?e:n):a.value}},MX.apply(this,arguments)}function RX(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return IG(e,EV.serialization.SerializationMap.getMap().classNameMap,t,"layer",n)}function PX(e,t){return(0,EV.tidy)((function(){"float32"!==e.dtype&&(e=EV.cast(e,"float32"));var n=EV.sum(NK(e),t,!0),r=EV.fill(n.shape,pG()),a=EV.sqrt(EV.maximum(n,r));return EV.div(e,a)}))}function jX(e,t){return(0,EV.tidy)((function(){return EV.mean(NK(EV.sub(t,e)),-1)}))}function FX(e,t){return(0,EV.tidy)((function(){return EV.mean(EV.abs(EV.sub(t,e)),-1)}))}function LX(e,t){return(0,EV.tidy)((function(){var n=EV.sub(e,t),r=EV.clipByValue(EV.abs(e),pG(),Number.MAX_VALUE),a=EV.abs(EV.div(n,r));return EV.mul(100,EV.mean(a,-1))}))}function BX(e,t){return(0,EV.tidy)((function(){var n=EV.clipByValue(t,pG(),Number.MAX_VALUE),r=EV.log(EV.add(1,n)),a=EV.clipByValue(e,pG(),Number.MAX_VALUE),o=EV.log(EV.add(1,a));return EV.mean(NK(EV.sub(r,o)),-1)}))}function zX(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return(0,EV.tidy)((function(){if(n)t=EV.softmax(t);else{var r=EV.sum(t,t.shape.length-1,!0);t=EV.div(t,r)}return t=EV.clipByValue(t,pG(),1-pG()),EV.neg(EV.sum(EV.mul(EV.cast(e,"float32"),EV.log(t)),t.shape.length-1))}))}function ZX(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return(0,EV.tidy)((function(){var r=EV.cast(EV.floor(mK(e)),"int32"),a=(t=EV.clipByValue(t,pG(),1-pG())).shape;return zX(EV.reshape(EV.oneHot(r,a[a.length-1]),a),t,n)}))}function VX(e,t){return(0,EV.tidy)((function(){var n;return n=EV.clipByValue(t,pG(),1-pG()),n=EV.log(EV.div(n,EV.sub(1,n))),EV.mean(function(e,t){if(!EV.util.arraysEqual(e.shape,t.shape))throw new vG("logits and labels must have the same shape, but got shapes "+"".concat(JSON.stringify(e.shape)," and ").concat(JSON.stringify(t.shape)));return(0,EV.tidy)((function(){var n=EV.relu(t),r=EV.neg(EV.abs(t));return EV.add(EV.sub(n,EV.mul(t,e)),EV.log1p(EV.exp(r)))}))}(e,n),-1)}))}function UX(e,t){return(0,EV.tidy)((function(){var n=EV.clipByValue(e,pG(),1),r=EV.clipByValue(t,pG(),1);return EV.sum(EV.mul(e,EV.log(EV.div(n,r))),-1)}))}function qX(e,t){return(0,EV.tidy)((function(){var n=PX(e,-1),r=PX(t,-1),a=EV.mul(n,r);return EV.neg(EV.sum(a,-1))}))}OX.constructors={};var WX={meanSquaredError:jX,meanAbsoluteError:FX,meanAbsolutePercentageError:LX,meanSquaredLogarithmicError:BX,squaredHinge:function(e,t){return(0,EV.tidy)((function(){var n=EV.maximum(0,EV.sub(1,EV.mul(e,t)));return EV.mean(NK(n),-1)}))},hinge:function(e,t){return(0,EV.tidy)((function(){var n=EV.maximum(0,EV.sub(1,EV.mul(e,t)));return EV.mean(n,-1)}))},categoricalHinge:function(e,t){return(0,EV.tidy)((function(){var n=EV.sum(EV.mul(e,t),-1),r=EV.max(EV.mul(EV.sub(1,e),t),-1);return EV.maximum(0,EV.add(1,EV.sub(r,n)))}))},logcosh:function(e,t){return(0,EV.tidy)((function(){var n=Math.log(2),r=EV.sub(t,e),a=EV.sub(EV.add(r,EV.softplus(EV.mul(-2,r))),n);return EV.mean(a,-1)}))},categoricalCrossentropy:zX,sparseCategoricalCrossentropy:ZX,binaryCrossentropy:VX,kullbackLeiblerDivergence:UX,poisson:function(e,t){return(0,EV.tidy)((function(){var n=EV.log(EV.add(pG(),t));return EV.mean(EV.sub(t,EV.mul(e,n)),-1)}))},cosineProximity:qX};function HX(e){if("string"===typeof e){if(e in WX)return WX[e];var t="Unknown loss ".concat(e);throw e.toLowerCase().includes("softmaxcrossentropy")&&(t="Unknown loss ".concat(e,". ")+'Use "categoricalCrossentropy" as the string name for tf.losses.softmaxCrossEntropy'),new vG(t)}return e}function GX(e,t){return(0,EV.tidy)((function(){var n=EV.mul(.5,EV.onesLike(t)),r=pK(EV.greater(t,n),e.dtype);return EV.mean(EV.equal(e,r),-1)}))}function KX(e,t){return(0,EV.tidy)((function(){return pK(EV.equal(EV.argMax(e,-1),EV.argMax(t,-1)),"float32")}))}function XX(e,t){return(0,EV.tidy)((function(){return EV.cast(EV.sum(EV.logicalAnd(EV.equal(e,1),EV.equal(t,1))),"float32")}))}function YX(e,t){return VX(e,t)}function $X(e,t){return e.rank===t.rank&&(e=EV.squeeze(e,[e.rank-1])),(t=EV.argMax(t,-1)).dtype!==e.dtype&&(t=EV.cast(t,e.dtype)),EV.cast(EV.equal(e,t),"float32")}var JX=zX,QX=ZX,eY={binaryAccuracy:GX,categoricalAccuracy:KX,precision:function(e,t){return(0,EV.tidy)((function(){var n=XX(e,t),r=function(e,t){return(0,EV.tidy)((function(){return EV.cast(EV.sum(EV.logicalAnd(EV.equal(e,0),EV.equal(t,1))),"float32")}))}(e,t),a=EV.add(n,r);return EV.cast(EV.where(EV.greater(a,0),EV.div(n,a),0),"float32")}))},categoricalCrossentropy:JX,sparseCategoricalCrossentropy:QX,mse:jX,MSE:jX,mae:FX,MAE:FX,mape:LX,MAPE:LX,cosine:qX};function tY(e){if("string"===typeof e&&e in eY)return eY[e];if("string"!==typeof e&&null!=e)return e;throw new vG("Unknown metric ".concat(e))}function nY(e){if(xG(null!==e,"Unknown LossOrMetricFn ".concat(e)),"string"===typeof e)return e;for(var t,n=0,r=Object.keys(WX);n<r.length;n++){var a=r[n];if(WX[a]===e){t=a;break}}if(void 0!==t)return t;for(var o=0,i=Object.keys(eY);o<i.length;o++){var s=i[o];if(eY[s]===e){t=s;break}}return void 0!==t?t:e.name}var rY=1048576;function aY(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(null==e||"object"!==typeof e||Object.getPrototypeOf(e)!==Object.prototype||!oY(e))throw new Error("User-defined metadata is expected to be a JSON object, but is not.");if(n){var r=JSON.stringify(e);r.length>rY&&console.warn('User-defined metadata of model "'.concat(t,'" is too large in ')+"size (length=".concat(r.length," when serialized). It is not ")+"recommended to store such large objects in user-defined metadata. Please make sure its serialized length is <= "+"".concat(rY,"."))}}function oY(e){if(null===e)return!0;if("object"===typeof e){if(Object.getPrototypeOf(e)===Object.prototype){for(var t=0,n=Object.keys(e);t<n.length;t++){var r=n[t];if("string"!==typeof r)return!1;if(!oY(e[r]))return!1}return!0}if(Array.isArray(e)){var a,o=(0,Et.Z)(e);try{for(o.s();!(a=o.n()).done;){if(!oY(a.value))return!1}}catch(s){o.e(s)}finally{o.f()}return!0}return!1}var i=typeof e;return"string"===i||"number"===i||"boolean"===i}function iY(e,t,n){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:console.log,i=uY(e),s=["Layer (type)","Output shape","Param #"];if(i?(t=t||65,n=n||[.45,.85,1]):(t=t||98,n=n||[.33,.55,.67,1]),n[n.length-1]<=1&&(n=n.map((function(e){return Math.floor(t*e)}))),!i)for(var u in s.push("Receives inputs"),a=[],e.nodesByDepth){var c;(c=a).push.apply(c,(0,r.Z)(e.nodesByDepth[u]))}o("_".repeat(t)),cY(s,n,o),o("=".repeat(t));for(var l=e.layers,f=0;f<l.length;++f)i?lY(l[f],n,o):fY(l[f],n,a,o),o((f===l.length-1?"=":"_").repeat(t));e.checkTrainableWeightsConsistency();var d=sY(e),p=sX(e.nonTrainableWeights);o("Total params: ".concat(d+p)),o("Trainable params: ".concat(d)),o("Non-trainable params: ".concat(p)),o("_".repeat(t))}function sY(e){return null!=e.collectedTrainableWeights?sX(e.collectedTrainableWeights):sX(e.trainableWeights)}function uY(e){var t=!0,n=[],a=[];for(var o in e.nodesByDepth)n.push(e.nodesByDepth[o]);for(var i=0,s=n;i<s.length;i++){var u=s[i];if(u.length>1||1===u.length&&u[0].inboundLayers.length>1){t=!1;break}a.push.apply(a,(0,r.Z)(u))}if(t){var c,l=(0,Et.Z)(e.layers);try{for(l.s();!(c=l.n()).done;){var f,d=c.value,p=!1,h=(0,Et.Z)(d.inboundNodes);try{for(h.s();!(f=h.n()).done;){var m=f.value;if(-1!==a.indexOf(m)){if(p){t=!1;break}p=!0}}}catch(v){h.e(v)}finally{h.f()}if(!t)break}}catch(v){l.e(v)}finally{l.f()}}return t}function cY(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:console.log,r="",a=0;a<e.length;++a)a>0&&(r=r.slice(0,r.length-1)+" "),r=(r+=e[a]).slice(0,t[a]),r+=" ".repeat(t[a]-r.length);n(r)}function lY(e,t,n){var r;try{r=JSON.stringify(e.outputShape)}catch(i){r="multiple"}var a=e.name,o=e.getClassName();cY(["".concat(a," (").concat(o,")"),r,e.countParams().toString()],t,n)}function fY(e,t,n,r){var a;try{a=JSON.stringify(e.outputShape)}catch(g){a="multiple"}var o,i=[],s=(0,Et.Z)(e.inboundNodes);try{for(s.s();!(o=s.n()).done;){var u=o.value;if(!(null!=n&&n.length>0&&-1===n.indexOf(u)))for(var c=0;c<u.inboundLayers.length;++c){var l=u.inboundLayers[c].name,f=u.nodeIndices[c],d=u.tensorIndices[c];i.push("".concat(l,"[").concat(f,"][").concat(d,"]"))}}}catch(g){s.e(g)}finally{s.f()}var p=e.name,h=e.getClassName(),m=0===i.length?"":i[0];cY(["".concat(p," (").concat(h,")"),a,e.countParams().toString(),m],t,r);for(var v=1;v<i.length;++v)cY(["","","",i[v]],t,r)}function dY(e,t,n){return("inboundNodes"===e||"outputLayers"===e||"inputLayers"===e)&&0===t&&"string"===typeof n}function pY(e,t){if(null===e)return null;if("string"===typeof e)return NG(e);if("number"===typeof e||"boolean"===typeof e)return e;if(e instanceof Array){for(var n=[],r=e.length,a=0;a<r;++a){var o=e[a];dY(t,a,o)?n.push(o):n.push(pY(o,t))}return n}for(var i={},s=0,u=Object.keys(e);s<u.length;s++){var c=u[s],l=e[c];if("name"===c&&"string"===typeof l)i[c]=l;else{var f=NG(c);i[f]=pY(l,f)}}return i}function hY(e,t){if(null===e||void 0===e)return null;if("string"===typeof e)return _G(e);if("number"===typeof e||"boolean"===typeof e)return e;if(e instanceof Array){for(var n=[],r=e.length,a=0;a<r;++a){var o=e[a];dY(t,a,o)?n.push(o):n.push(hY(o,t))}return n}for(var i={},s=0,u=Object.keys(e);s<u.length;s++){var c=u[s],l=e[c],f=_G(c);i[f]="name"!==c&&"className"!==c||"string"!==typeof l?hY(l,c):l}return i}var mY="3.13.0";var vY=function(){function e(t){if((0,f.Z)(this,e),this.id2Value={},this.id2Mask={},this.name2Id={},t instanceof e)for(var n in t.id2Value)this.id2Value[n]=t.id2Value[n],n in t.id2Mask&&(this.id2Mask[n]=t.id2Mask[n]);else{if(null==t)return;var r,a=(0,Et.Z)(t);try{for(a.s();!(r=a.n()).done;){var o=r.value;this.add(o.key,o.value)}}catch(i){a.e(i)}finally{a.f()}}}return(0,d.Z)(e,[{key:"add",value:function(e,t,n){if(null!=this.id2Value[e.id])throw new vG("Duplicate key: name=".concat(e.name,", id=").concat(e.id));return this.id2Value[e.id]=function(e,t){if(null==e.dtype||e.dtype===t.dtype)return t;try{return(0,EV.cast)(t,e.dtype)}catch(n){throw new vG("The dtype of the feed (".concat(t.dtype,") can not be cast to the dtype ")+"of the key '".concat(e.name,"' (").concat(e.dtype,")."))}}(e,t),this.name2Id[e.name]=e.id,null!=n&&(this.id2Mask[e.id]=n),this}},{key:"addFeed",value:function(e){this.add(e.key,e.value)}},{key:"hasKey",value:function(e){return null!=this.id2Value[e.id]}},{key:"names",value:function(){return Object.keys(this.name2Id)}},{key:"getValue",value:function(e){if(e instanceof pX){if(null==this.id2Value[e.id])throw new vG("Nonexistent key: ".concat(e.name));return this.id2Value[e.id]}var t=this.name2Id[e];if(null==t)throw new vG("Feed dict has no SymbolicTensor name: ".concat(e));return this.id2Value[t]}},{key:"getMask",value:function(e){if(e instanceof pX){if(null==this.id2Value[e.id])throw new vG("Nonexistent key: ".concat(e.name));return this.id2Mask[e.id]}var t=this.name2Id[e];if(null==t)throw new vG("Feed dict has no SymbolicTensor name: ".concat(e));return this.id2Mask[t]}},{key:"disposeMasks",value:function(){null!=this.id2Mask&&(0,EV.dispose)(this.id2Mask)}}]),e}(),gY={},yY={};function bY(e,t,n,r){var a,o=null!=n&&n.training,i=Array.isArray(e),s=i?e:[e],u=s.map((function(e){return e.name})),c=[],l=t.names(),f=(0,Et.Z)(u);try{for(f.s();!(a=f.n()).done;){var d=a.value;-1!==l.indexOf(d)?c.push(t.getValue(d)):c.push(null)}}catch(F){f.e(F)}finally{f.f()}null!=r&&(r.maxNumTensors=-1/0,r.minNumTensors=1/0);var p,h,m=u.join(",")+"|"+t.names().join(",");if(null==gY[m]){var v=function(e,t){EV.util.assert(null!=e&&e.length>0,(function(){return"Expected at least one fetch, got none"}));var n=[],r={};if(1===e.length){var a=wY(e[0],t);n=a.sorted,r=a.recipientMap}else{var o,i=new Set,s=(0,Et.Z)(e);try{for(s.s();!(o=s.n()).done;){var u,c=wY(o.value,t),l=c.sorted,f=c.recipientMap,d=(0,Et.Z)(l);try{for(d.s();!(u=d.n()).done;){var p=u.value;i.has(p.name)||(n.push(p),i.add(p.name))}}catch(F){d.e(F)}finally{d.f()}var h=function(e){null==r[e]&&(r[e]=new Set),f[e].forEach((function(t){return r[e].add(t)}))};for(var m in f)h(m)}}catch(F){s.e(F)}finally{s.f()}}return{sorted:n,recipientCounts:xY(r)}}(s,t);p=v.sorted,h=v.recipientCounts,gY[m]=p,yY[m]=h}p=gY[m],h={},o||Object.assign(h,yY[m]);for(var g=new vY(t),y=0;y<p.length;++y){if(null!=r){var b=(0,EV.memory)().numTensors;b>r.maxNumTensors&&(r.maxNumTensors=b),b<r.minNumTensors&&(r.minNumTensors=b)}var x=p[y],w=x.sourceLayer;if(!(w instanceof xX)){var k,S=[],_=[],N=[],E=!1,C=(0,Et.Z)(x.inputs);try{for(C.s();!(k=C.n()).done;){var T=k.value,I=g.getValue(T),O=g.getMask(T);S.push(I),_.push(O),null!=O&&(E=!0),o||(h[T.name]--,0!==h[T.name]||t.hasKey(T)||-1!==u.indexOf(T.name)||I.isDisposed||!0===T.sourceLayer.stateful||N.push(I))}}catch(F){C.e(F)}finally{C.f()}E&&((n=n||{}).mask=_[0]);var A=SG(w.apply(S,n)),D=null;w.supportsMasking&&(D=w.computeMask(S,_));for(var M=kY(x),R=Array.isArray(M)?M:[M],P=0;P<R.length;++P){g.hasKey(R[P])||g.add(R[P],A[P],Array.isArray(D)?D[0]:D);var j=u.indexOf(R[P].name);-1!==j&&(c[j]=A[P])}o||(0,EV.dispose)(N)}}return g.disposeMasks(),i?c:c[0]}function xY(e){var t={};for(var n in e)t[n]=e[n].size;return t}function wY(e,t){var n,r=new Set,a=[],o={},i=(0,Et.Z)(t.names());try{for(i.s();!(n=i.n()).done;){var s=n.value;r.add(s)}}catch(m){i.e(m)}finally{i.f()}var u=[],c=[];for(u.push(e);u.length>0;){var l=u[u.length-1];if(r.has(l.name))u.pop();else{var f=c[c.length-1]===u.length-1;if(0===l.inputs.length||f)u.pop(),a.push(l),r.add(l.name),f&&c.pop();else{c.push(u.length-1);var d,p=(0,Et.Z)(l.inputs);try{for(p.s();!(d=p.n()).done;){var h=d.value;null==o[h.name]&&(o[h.name]=new Set),o[h.name].add(l.name),r.has(h.name)||u.push(h)}}catch(m){p.e(m)}finally{p.f()}}}}return{sorted:a,recipientMap:o}}function kY(e){var t;if(1===e.sourceLayer.inboundNodes.length)t=e.sourceLayer.output;else{for(var n=null,r=0;r<e.sourceLayer.inboundNodes.length;++r){var a,o=(0,Et.Z)(e.sourceLayer.inboundNodes[r].outputTensors);try{for(o.s();!(a=o.n()).done;){if(a.value.id===e.id){n=r;break}}}catch(i){o.e(i)}finally{o.f()}}t=e.sourceLayer.getOutputAt(n)}return t}var SY=function(e){(0,nu.Z)(n,e);var t=(0,ru.Z)(n);function n(e){var r;if((0,f.Z)(this,n),(r=t.call(this,{})).containerNodes=new Set,r.name=e.name,null==r.name){var a=r.getClassName().toLowerCase();r.name=nX(a)}if(r.supportsMasking=!1,r.trainable_=!0,Array.isArray(e.inputs)?r.inputs=e.inputs.slice():r.inputs=[e.inputs],Array.isArray(e.outputs)?r.outputs=e.outputs.slice():r.outputs=[e.outputs],AG(r.inputs).length!==r.inputs.length)throw new vG("The list of inputs passed to the model is redundant. All inputs should only appear once. Found: "+"".concat(r.inputs.map((function(e){return e.name}))));AG(r.outputs).length!==r.outputs.length&&console.warn("The list of outputs passed to the model is redundant. All outputs should only appear once. Found: "+"".concat(r.outputs.map((function(e){return e.name})))),r.inputLayers=[],r.inputLayersNodeIndices=[],r.inputLayersTensorIndices=[],r.outputLayers=[],r.outputLayersNodeIndices=[],r.outputLayersTensorIndices=[],r.layers=[],r.internalContainerRefs=[];var o,i=(0,Et.Z)(r.outputs);try{for(i.s();!(o=i.n()).done;){var s=o.value,u=s.sourceLayer,c=s.nodeIndex,l=s.tensorIndex;r.outputLayers.push(u),r.outputLayersNodeIndices.push(c),r.outputLayersTensorIndices.push(l)}}catch(Se){i.e(Se)}finally{i.f()}var d,p=(0,Et.Z)(r.inputs);try{for(p.s();!(d=p.n()).done;){var h=d.value,m=h.sourceLayer,v=h.nodeIndex,g=h.tensorIndex;xG(0===v,"input layer has >1 nodes"),xG(0===g,"input layer has >1 tensors"),r.inputLayers.push(m),r.inputLayersNodeIndices.push(v),r.inputLayersTensorIndices.push(g)}}catch(Se){p.e(Se)}finally{p.f()}r.inputNames=[],r.outputNames=[],r.feedInputShapes=[],r.feedInputNames=[],r.feedOutputNames=[];for(var y=0;y<r.inputLayers.length;y++){var b=r.inputLayers[y];if(!(b instanceof xX))throw new TypeError("Input layers to a LayersModel must be InputLayer objects. "+"Received inputs: ".concat(e.inputs,". ")+"Input ".concat(y," (0-based) originates ")+"from layer type ".concat(b.getClassName(),"."));r.inputNames.push(b.name),r.feedInputShapes.push(b.batchInputShape),r.feedInputNames.push(b.name)}var x,w=(0,Et.Z)(r.outputLayers);try{for(w.s();!(x=w.n()).done;){var k=x.value;r.outputNames.push(k.name)}}catch(Se){w.e(Se)}finally{w.f()}r.internalInputShapes=r.inputs.map((function(e){return e.shape})),r.internalOutputShapes=r.outputs.map((function(e){return e.shape}));var S,_={},N={},E={},C={},T={},I=[],O=function e(t,a,o,i,s,u){null!=i&&null!=s&&null!=u||(i=t.sourceLayer,s=t.nodeIndex,u=t.tensorIndex);var c=i.inboundNodes[s];if(-1!==o.indexOf(c))throw new mG("The tensor ".concat(t.name,' at layer "').concat(i.name,'" ')+"is part of a cycle.");if(-1===a.indexOf(c)){r.containerNodes.add(n.nodeKey(i,s)),i.id in T||(T[i.id]=Object.keys(T).length),-1===o.indexOf(c)&&o.push(c);for(var l=c.inboundLayers.length,f=0;f<l;f++){e(c.inputTensors[f],a,o,c.inboundLayers[f],c.nodeIndices[f],c.tensorIndices[f])}for(a.push(c);o.indexOf(c)>=0;)o.splice(o.indexOf(c),1);I.push(c)}},A=[],D=[],M=(0,Et.Z)(r.outputs);try{for(M.s();!(S=M.n()).done;){O(S.value,A,D)}}catch(Se){M.e(Se)}finally{M.f()}var R,P=I.slice().reverse(),j=(0,Et.Z)(P);try{for(j.s();!(R=j.n()).done;){var F=R.value;N[F.id]=F,F.id in _||(_[F.id]=0);var L=_[F.id],B=null==E[F.outboundLayer.id]?0:E[F.outboundLayer.id];L=Math.max(L,B),E[F.outboundLayer.id]=L,C[F.outboundLayer.id]=F.outboundLayer,_[F.id]=L;for(var z=0;z<F.inboundLayers.length;z++){var Z=F.inboundLayers[z],V=F.nodeIndices[z],U=Z.inboundNodes[V],q=null==_[U.id]?0:_[U.id];_[U.id]=Math.max(L+1,q),N[U.id]=U}}}catch(Se){j.e(Se)}finally{j.f()}var W={};for(var H in _){var G=_[H];G in W||(W[G]=[]),W[G].push(N[H])}var K={};for(var X in E){var Y=E[X];Y in K||(K[Y]=[]),K[Y].push(C[X])}var $=Object.keys(K).map((function(e){return parseInt(e,10)})).sort(OG);r.layers=[];var J,Q=(0,Et.Z)($);try{for(Q.s();!(J=Q.n()).done;){var ee=K[J.value];ee.sort((function(e,t){var n=T[e.id],r=T[t.id];return n<r?-1:n>r?1:0}));var te,ne=(0,Et.Z)(ee);try{for(ne.s();!(te=ne.n()).done;){var re=te.value;re instanceof n&&r.internalContainerRefs.push(re),r.layers.push(re)}}catch(Se){ne.e(Se)}finally{ne.f()}}}catch(Se){Q.e(Se)}finally{Q.f()}r.layersByDepth=K,$=Object.keys(W).map((function(e){return parseInt(e,10)})).sort(OG);var ae,oe=r.inputs.slice(),ie=[],se=(0,Et.Z)($);try{for(se.s();!(ae=se.n()).done;){var ue,ce=ae.value,le=(0,Et.Z)(W[ce]);try{for(le.s();!(ue=le.n()).done;){var fe=ue.value,de=fe.outboundLayer;if(null!=de){var pe,he=(0,Et.Z)(fe.inputTensors);try{for(he.s();!(pe=he.n()).done;){var me=pe.value;if(-1===oe.indexOf(me))throw new mG("Graph disconnected: cannot obtain value for tensor ".concat(me)+' at layer "'.concat(de.name,'". ')+"The following previous layers were accessed without "+"issue: ".concat(ie))}}catch(Se){he.e(Se)}finally{he.f()}var ve,ge=(0,Et.Z)(fe.outputTensors);try{for(ge.s();!(ve=ge.n()).done;){var ye=ve.value;oe.push(ye)}}catch(Se){ge.e(Se)}finally{ge.f()}ie.push(de.name)}}}catch(Se){le.e(Se)}finally{le.f()}}}catch(Se){se.e(Se)}finally{se.f()}r.nodesByDepth=W;var be,xe=r.layers.map((function(e){return e.name})),we=(0,Et.Z)(xe);try{var ke=function(){var e=be.value,t=xe.filter((function(t){return t===e})).length;if(1!==t)throw new mG('The name "'.concat(e,'" is used ').concat(t," times ")+"in the model. All layer names should be unique. Layer names: "+JSON.stringify(xe))};for(we.s();!(be=we.n()).done;)ke()}catch(Se){we.e(Se)}finally{we.f()}return r.outboundNodes=[],r.inboundNodes=[],new mX({outboundLayer:(0,tu.Z)(r),inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:r.inputs,outputTensors:r.outputs,inputMasks:r.inputs.map((function(e){return null})),outputMasks:r.outputs.map((function(e){return null})),inputShapes:r.inputs.map((function(e){return e.shape})),outputShapes:r.outputs.map((function(e){return e.shape}))}),r.built=!0,r._refCount=1,r}return(0,d.Z)(n,[{key:"assertNotDisposed",value:function(){if(0===this._refCount)throw new Error("Container '".concat(this.name,"' is already disposed."))}},{key:"dispose",value:function(){this.assertNotDisposed();var e={refCountAfterDispose:null,numDisposedVariables:0};if(0===--this._refCount){var t,n=(0,Et.Z)(this.layers);try{for(n.s();!(t=n.n()).done;){var r=t.value;e.numDisposedVariables+=r.dispose().numDisposedVariables}}catch(s){n.e(s)}finally{n.f()}var a,o=(0,Et.Z)(this.internalContainerRefs);try{for(o.s();!(a=o.n()).done;){var i=a.value;e.numDisposedVariables+=i.dispose().numDisposedVariables}}catch(s){o.e(s)}finally{o.f()}}return e.refCountAfterDispose=this._refCount,e}},{key:"trainable",get:function(){return this.trainable_},set:function(e){this.layers.forEach((function(t){t._trainableWeights.forEach((function(t){return t.trainable=e}))})),this.trainable_=e}},{key:"trainableWeights",get:function(){if(this._trainableWeights.length>0)throw new vG("Container instance unexpectedly contains _trainableWeights.The trainable weights of a Container are a union of the trainable weights of its consituent Layers. Its own _trainableWeights must remain an empty Array.");if(!this.trainable)return[];var e,t=[],n=(0,Et.Z)(this.layers);try{for(n.s();!(e=n.n()).done;){var r=e.value;t=t.concat(r.trainableWeights)}}catch(a){n.e(a)}finally{n.f()}return t}},{key:"nonTrainableWeights",get:function(){var e,t=[],n=(0,Et.Z)(this.layers);try{for(n.s();!(e=n.n()).done;){var a=e.value;t.push.apply(t,(0,r.Z)(a.nonTrainableWeights))}}catch(c){n.e(c)}finally{n.f()}if(!this.trainable){var o,i=[],s=(0,Et.Z)(this.layers);try{for(s.s();!(o=s.n()).done;){var u=o.value;i.push.apply(i,(0,r.Z)(u.trainableWeights))}}catch(c){s.e(c)}finally{s.f()}return i.concat(t)}return t}},{key:"weights",get:function(){return this.trainableWeights.concat(this.nonTrainableWeights)}},{key:"loadWeights",value:function(e){var t,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r={},a=0,o=(0,Et.Z)(this.layers);try{for(o.s();!(t=o.n()).done;){var i,s=t.value,u=(0,Et.Z)(s.weights);try{for(u.s();!(i=u.n()).done;){var c=i.value;if(null!=r[c.originalName])throw new vG("Duplicate weight name: ".concat(c.originalName));r[c.originalName]=c,a++}}catch(g){u.e(g)}finally{u.f()}}}catch(g){o.e(g)}finally{o.f()}var l=[];for(var f in e){var d=f;if(null==r[f]){var p=f.split("/"),h=p.slice(0,-2).concat([p[p.length-1]]);d=h.join("/")}if(null!=r[d])l.push([r[d],e[f]]);else if(n)throw new vG("Provided weight data has no target variable: ".concat(f));delete r[d]}if(n){var m=[];for(var v in r)m.push(v);if(m.length>0)throw new vG("".concat(m.length," of ").concat(a," weights are not set: ")+"".concat(m))}fX(l)}},{key:"updatedConfig",value:function(){var e=this.getConfig(),t={};return t.className=this.getClassName(),t.config=e,t.kerasVersion="tfjs-layers ".concat(mY),t.backend="TensorFlow.js",t}},{key:"toJSON",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=hY(this.updatedConfig());return t?JSON.stringify(n):n}},{key:"call",value:function(e,t){var n=this;return(0,EV.tidy)((function(){e=SG(e);for(var r=new vY,a=0;a<n.inputs.length;++a)r.add(n.inputs[a],e[a]);return bY(n.outputs,r,t)}))}},{key:"computeMask",value:function(e,t){var n=this;return(0,EV.tidy)((function(){var r;return e=SG(e),r=null==t?bG(null,e.length):SG(t),n.runInternalGraph(e,r)[1]}))}},{key:"computeOutputShape",value:function(e){var t=aX(e);if(t.length!==this.inputLayers.length)throw new vG("Invalid inputShape argument ".concat(e,": ")+"model has ".concat(this.inputLayers.length," tensor inputs."));for(var n={},r=0;r<t.length;r++){var a=this.inputLayers[r],o=t[r];n[a.name+"_0_0"]=o}var i=Object.keys(this.nodesByDepth).map((function(e){return parseInt(e,10)})).sort(OG);if(i.length>1){var s,u=(0,Et.Z)(i);try{for(u.s();!(s=u.n()).done;){var c,l=s.value,f=this.nodesByDepth[l],d=(0,Et.Z)(f);try{for(d.s();!(c=d.n()).done;){var p=c.value,h=p.outboundLayer;if(-1===this.inputLayers.map((function(e){return e.id})).indexOf(h.id)){for(var m=[],v=0;v<p.inboundLayers.length;v++){var g=p.inboundLayers[v],y=p.nodeIndices[v],b=p.tensorIndices[v],x=n["".concat(g.name,"_").concat(y,"_").concat(b)];m.push(x)}for(var w=aX(h.computeOutputShape(kG(m))),k=h.inboundNodes.indexOf(p),S=0;S<w.length;S++){n["".concat(h.name,"_").concat(k,"_").concat(S)]=w[S]}}}}catch(M){d.e(M)}finally{d.f()}}}catch(M){u.e(M)}finally{u.f()}}for(var _=[],N=[],E=0;E<this.outputLayers.length;E++){var C=this.outputLayers[E],T=this.outputLayersNodeIndices[E],I=this.outputLayersTensorIndices[E],O="".concat(C.name,"_").concat(T,"_").concat(I);N.push(O)}for(var A=0;A<N.length;A++){var D=N[A];xG(D in n),_.push(n[D])}return kG(_)}},{key:"runInternalGraph",value:function(e,t){null==t&&(t=bG(null,e.length));for(var n={},r=0;r<this.inputs.length;++r){var o=this.inputs[r],i=e[r],s=t[r];n[o.id]=[i,s]}var u,c=Object.keys(this.nodesByDepth).map((function(e){return parseInt(e,10)})).sort(OG),l=(0,Et.Z)(c);try{for(l.s();!(u=l.n()).done;){var f,d=u.value,p=this.nodesByDepth[d],h=(0,Et.Z)(p);try{for(h.s();!(f=h.n()).done;){var m,v=f.value,g=v.outboundLayer,y=v.inputTensors,b=v.outputTensors,x=new Array,w=(0,Et.Z)(y);try{for(w.s();!(m=w.n()).done;){var k=m.value;k.id in n&&x.push(n[k.id])}}catch(q){w.e(q)}finally{w.f()}if(x.length===y.length){var S={},_=void 0,N=void 0,E=void 0,C=void 0;if(null!=v.callArgs&&(S=v.callArgs),1===x.length){var T=(0,a.Z)(x[0],2),I=T[0],O=T[1];null==S.mask&&(S.mask=O),E=SG(g.call(I,S)),C=SG(g.computeMask(I,O)),_=[I],N=[O]}else _=x.map((function(e){return e[0]})),N=x.map((function(e){return e[1]})),null==S.mask&&(S.mask=N),E=SG(g.call(_,S)),C=SG(g.computeMask(_,N));if(g.activityRegularizer)throw new gG("LayersModel invocation with concrete Tensor value(s) in the presence of activity regularizer(s) is not supported yet.");for(var A=0;A<b.length;++A){var D=b[A],M=E[A],R=C[A];n[D.id]=[M,R]}}}}catch(q){h.e(q)}finally{h.f()}}}catch(q){l.e(q)}finally{l.f()}var P,j=[],F=[],L=[],B=(0,Et.Z)(this.outputs);try{for(B.s();!(P=B.n()).done;){var z=P.value;xG(z.id in n,"Could not compute output ".concat(z.name," : ").concat(z.id));var Z=(0,a.Z)(n[z.id],2),V=Z[0],U=Z[1];L.push(V.shape),j.push(V),F.push(U)}}catch(q){B.e(q)}finally{B.f()}return[j,F,L]}},{key:"buildNodeConversionMap",value:function(e){var t,r,a={},o=(0,Et.Z)(this.layers);try{for(o.s();!(r=o.n()).done;){var i=r.value;t=i instanceof n?1:0;for(var s=0;s<i.inboundNodes.length;s++){var u=n.nodeKey(i,s);this.containerNodes.has(u)&&(a[u]=t,t+=1)}}}catch(c){o.e(c)}finally{o.f()}return a}},{key:"getLayer",value:function(e,t){if(null!=t){if(this.layers.length<=t)throw new vG("Was asked to retrieve layer at index ".concat(t,", but model only ")+"has ".concat(this.layers.length," layer(s)."));return this.layers[t]}if(null==e)throw new vG("Provide either a layer name or layer index");var n,r=(0,Et.Z)(this.layers);try{for(r.s();!(n=r.n()).done;){var a=n.value;if(a.name===e)return a}}catch(o){r.e(o)}finally{r.f()}throw new vG("No such layer: ".concat(e))}},{key:"calculateLosses",value:function(){var e=this;return(0,EV.tidy)((function(){var t,a=[],o=(0,Et.Z)(e.layers);try{for(o.s();!(t=o.n()).done;)for(var i=t.value,s=0;s<i.inboundNodes.length;++s){var u=n.nodeKey(i,s);e.containerNodes.has(u)&&a.push.apply(a,(0,r.Z)(i.calculateLosses()))}}catch(c){o.e(c)}finally{o.f()}return a}))}},{key:"getConfig",value:function(){var e,t={name:this.name},r=this.buildNodeConversionMap(this.layers),a=[],o=(0,Et.Z)(this.layers);try{for(o.s();!(e=o.n()).done;){for(var i=e.value,s=i.getClassName(),u=i.getConfig(),c=[],l=0;l<i.inboundNodes.length;l++){var f=i.inboundNodes[l],d=n.nodeKey(i,l),p={};if(this.containerNodes.has(d)){if(f.callArgs)try{JSON.stringify(f.callArgs),p=f.callArgs}catch(P){console.warn("Layer ".concat(i.name," was passed ")+"non-serializable keyword arguments: "+"".concat(f.callArgs,". They will not be included ")+"in the serialized model (and thus will be missing at deserialization time)."),p={}}if(f.inboundLayers.length>0){for(var h=[],m=0;m<f.inboundLayers.length;m++){var v=f.inboundLayers[m],g=f.nodeIndices[m],y=f.tensorIndices[m],b=r[n.nodeKey(v,g)];null==b&&(b=0),h.push([v.name,b,y,p])}c.push(h)}}}var x={};x.name=i.name,x.className=s,x.config=u,x.inboundNodes=c,a.push(x)}}catch(P){o.e(P)}finally{o.f()}t.layers=a;for(var w=[],k=0;k<this.inputLayers.length;k++){var S=this.inputLayers[k],_=this.inputLayersNodeIndices[k],N=n.nodeKey(S,_);if(this.containerNodes.has(N)){var E=r[N];null!==E&&void 0!==E||(E=0);var C=this.inputLayersTensorIndices[k];w.push([S.name,E,C])}}t.inputLayers=w;for(var T=[],I=0;I<this.outputLayers.length;I++){var O=this.outputLayers[I],A=this.outputLayersNodeIndices[I],D=n.nodeKey(O,A);if(this.containerNodes.has(D)){var M=r[D];null!==M&&void 0!==M||(M=0);var R=this.outputLayersTensorIndices[I];T.push([O.name,M,R])}}return t.outputLayers=T,t}},{key:"stateful",get:function(){if(this._stateful)throw new vG("Container instance unexpectedly has _stateful = true. The statefulness of a Container is determined by the Layers it contains. Its _stateful property must remain the default false.");var e,t=(0,Et.Z)(this.layers);try{for(t.s();!(e=t.n()).done;){if(e.value.stateful)return!0}}catch(n){t.e(n)}finally{t.f()}return!1}},{key:"resetStates",value:function(){var e=this;(0,EV.tidy)((function(){e.layers.forEach((function(e){e.stateful&&e.resetStates()}))}))}}],[{key:"fromConfig",value:function(e,t){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r={},a={};function o(e,t){e.name in a?a[e.name].push(t):a[e.name]=[t]}function i(e,t){var n,a,i=[],s=(0,Et.Z)(t);try{for(s.s();!(a=s.n()).done;){var u=a.value,c=u[0],l=u[1],f=u[2];if(n=null==u[3]?{}:u[3],!(c in r))return void o(e,t);var d=r[c];if(d.inboundNodes.length<=l)return void o(e,t);var p=d.inboundNodes[l];i.push(p.outputTensors[f])}}catch(h){s.e(h)}finally{s.f()}i.length>0&&e.apply(kG(i),n)}function s(e){var a=e.name,i=RX(e,null!=t.customObjects?t.customObjects:{});i.setFastWeightInitDuringBuild(n),r[a]=i,e.inboundNodes.forEach((function(e){if(!(e instanceof Array))throw new vG("Corrupted configuration, expected array for nodeData: ".concat(e));o(i,e)}))}var u,c=t.name,l=t.layers,f=(0,Et.Z)(l);try{for(f.s();!(u=f.n()).done;){var d=u.value;s(d)}}catch(Z){f.e(Z)}finally{f.f()}for(;!DG(a);){var p,h=(0,Et.Z)(l);try{for(h.s();!(p=h.n()).done;){var m=p.value,v=r[m.name];if(v.name in a){var g=a[v.name];delete a[v.name];var y,b=(0,Et.Z)(g);try{for(b.s();!(y=b.n()).done;){var x=y.value;i(v,x)}}catch(Z){b.e(Z)}finally{b.f()}}}}catch(Z){h.e(Z)}finally{h.f()}}var w,k=[],S=[],_=t.inputLayers,N=(0,Et.Z)(_);try{for(N.s();!(w=N.n()).done;){var E=w.value,C=E[0],T=E[1],I=E[2];xG(C in r);var O=r[C],A=O.inboundNodes[T].outputTensors;k.push(A[I])}}catch(Z){N.e(Z)}finally{N.f()}var D,M=t.outputLayers,R=(0,Et.Z)(M);try{for(R.s();!(D=R.n()).done;){var P=D.value,j=P[0],F=P[1],L=P[2];xG(j in r);var B=r[j],z=B.inboundNodes[F].outputTensors;S.push(z[L])}}catch(Z){R.e(Z)}finally{R.f()}return new e({inputs:k,outputs:S,name:c})}}]),n}(gX);function _Y(e,t,n){var r=t.length;if(null==e||Array.isArray(e)&&0===e.length)return t.map((function(e){return null}));if(1===r)return Array.isArray(e)&&1===e.length?e:"object"===typeof e&&t[0]in e?[e[t[0]]]:[e];if(Array.isArray(e)){if(e.length!==r)throw new Error("Provided ".concat(n," is an array of ").concat(e.length," ")+"element(s), but the model has ".concat(r," outputs. ")+"Make sure a set of weights is provided for each model output.");return e}if("object"===typeof e&&Object.keys(e).length>0&&"object"===typeof e[Object.keys(e)[0]]){var a=[];return t.forEach((function(t){t in e?a.push(e[t]):a.push(null)})),a}throw new Error("The model has multiple (".concat(r,") outputs, ")+"so ".concat(n," must be either an array with ")+"".concat(r," elements or an object with ").concat(t," keys. ")+"Provided ".concat(n," not understood: ").concat(JSON.stringify(e)))}function NY(e,t){return _Y(e,t,"classWeight")}function EY(e,t,n,r){return CY.apply(this,arguments)}function CY(){return(CY=(0,o.Z)(l().mark((function e(t,n,r,a){var o,i,s;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==n&&null==a){e.next=2;break}throw new Error("Support sampleWeight is not implemented yet");case 2:if(null==r){e.next=15;break}return o=(0,EV.tidy)((function(){if(1===t.shape.length)return(0,EV.clone)(t);if(2===t.shape.length){if(t.shape[1]>1){return(0,EV.argMax)(t,1)}if(1===t.shape[1])return(0,EV.reshape)(t,[t.shape[0]]);throw new Error("Encountered unexpected last-dimension size (".concat(t.shape[1],") ")+"during handling of class weights. The size is expected to be >= 1.")}throw new Error("Unexpected rank of target (y) tensor (".concat(t.rank,") during ")+"handling of class weights. The rank is expected to be 1 or 2.")})),e.t0=Array,e.next=7,o.data();case 7:return e.t1=e.sent,i=e.t0.from.call(e.t0,e.t1),(0,EV.dispose)(o),s=[],i.forEach((function(e){if(null==r[e])throw new Error("classWeight must contain all classes in the training data. "+"The class ".concat(e," exists in the data but not in ")+"classWeight");s.push(r[e])})),e.abrupt("return",(0,EV.tensor1d)(s,"float32"));case 15:return e.abrupt("return",null);case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function TY(e,t){return(0,EV.mul)(e,t)}function IY(e,t){var n,r,a=t;n=a.xs,r=a.ys,EV.util.assert(null!=n&&null!=r,(function(){return"A Dataset iterator for fitDataset() is expected to generate objects of the form `{xs: xVal, ys: yVal}`, where the two values may be `tf.Tensor`, an array of Tensors, or a map of string to Tensor.  The provided Dataset instead generates "+"".concat(t)}));var o=OY("input",e.inputNames,n),i=OY("output",e.outputNames,r),s=o[0].shape[0];EV.util.assert(o.length===e.inputs.length,(function(){return"LayersModel has ".concat(e.inputs.length," inputs, but the dataset ")+"provides ".concat(o.length," inputs.  (Expected input keys: ")+"".concat(JSON.stringify(e.inputNames),")")})),EV.util.assert(i.length===e.outputs.length,(function(){return"LayersModel has ".concat(e.outputs.length," outputs, but the dataset ")+"provides ".concat(i.length," outputs.  (Expected output keys: ")+"".concat(JSON.stringify(e.outputNames),")")}));for(var u=function(t){EV.util.assert(o[t].shape[0]===s,(function(){return"Batch size mismatch: input "+"".concat(e.inputNames[t]," has ").concat(o[t].shape[0],"; ")+"expected  ".concat(s," based on input ").concat(e.inputNames[0],".")}))},c=0;c<o.length;c++)u(c);for(var l=function(t){EV.util.assert(i[t].shape[0]===s,(function(){return"Batch size mismatch: output "+"".concat(e.outputNames[t]," has ").concat(i[t].shape[0],"; ")+"expected  ".concat(s," based on input ").concat(e.inputNames[0],".")}))},f=0;f<i.length;f++)l(f);return{xs:o,ys:i}}function OY(e,t,n){if(n instanceof EV.Tensor)return[n];if(Array.isArray(n))return EV.util.assert(n.length===t.length,(function(){return"Received an array of ".concat(n.length," Tensors, but expected ").concat(t.length," to match the ").concat(e," keys ").concat(t,".")})),n;var r,a=[],o=(0,Et.Z)(t);try{for(o.s();!(r=o.n()).done;){var i=r.value;if(null==n[i])throw new vG("The feature data generated by the dataset lacks the required "+"".concat(e," key '").concat(i,"'."));a.push(n[i])}}catch(s){o.e(s)}finally{o.f()}return a}function AY(e){if(3===e.length)throw new gG("Validation with sample weights is not implemented yet.");return{xs:e[0],ys:e[1]}}function DY(e,t,n){return MY.apply(this,arguments)}function MY(){return MY=(0,o.Z)(l().mark((function e(t,n,r){var a,o,i,s,u,c,f,d,p,h,m,v,g,y,b,x,w,k,S,_,N,E,C,T,I,O,A,D,M,R,P,j,F;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=null!=r.batchesPerEpoch,EV.util.assert(null!=t.optimizer,(function(){return"You must compile a model before training/testing. Use LayersModel.compile(modelCompileConfig)."})),EV.util.assert(null!=r,(function(){return"For fitDataset(), the 2nd argument (config) is required, but it is not provided in this call."})),EV.util.assert(null!=r.epochs&&r.epochs>0&&Number.isInteger(r.epochs),(function(){return"For fitDataset(), config.epochs is expected to be a positive "+"integer, but got ".concat(r.epochs)})),EV.util.assert(!a||r.batchesPerEpoch>0&&Number.isInteger(r.batchesPerEpoch),(function(){return"For fitDataset(), config.batchesPerEpoch is expected to be a "+"positive integer if specified, but got ".concat(r.batchesPerEpoch)})),EV.util.assert(null==r.validationSplit,(function(){return"`validationSplit` is not supported by `fitDataset()`. Use validationData instead."})),!t.isTraining){e.next=8;break}throw new Error("Cannot start training because another fit() call is ongoing.");case 8:return t.isTraining=!0,e.prev=9,(o=null!=r.validationData)&&(PY(r.validationData)?EV.util.assert(null==r.validationBatches||r.validationBatches>0&&Number.isInteger(r.validationBatches),(function(){return"For fitDataset() with dataset-based validation, config.validationBatches is expected not to be provided, or to be a positive integer, "+"but got ".concat(r.validationBatches)})):(u=AY(r.validationData),i=u.xs,s=u.ys)),c=t.makeTrainFunction(),f=t.getDedupedMetricsNames(),d=o?f.slice().concat(f.map((function(e){return"val_"+e}))):f.slice(),p=IX(r.callbacks,r.yieldEvery),h=null==r.verbose?1:r.verbose,m=AX(p,h,r.epochs,null,null,RY(n,r),null,o,d),v=m.callbackList,g=m.history,v.setModel(t),t.history=g,e.next=22,v.onTrainBegin();case 22:return t.stopTraining_=!1,y=null==r.initialEpoch?0:r.initialEpoch,e.next=26,n.iterator();case 26:b=e.sent;case 27:if(!(y<r.epochs)){e.next=98;break}return x={},e.next=31,v.onEpochBegin(y);case 31:if(w=0,k=0,a){e.next=37;break}return e.next=36,n.iterator();case 36:b=e.sent;case 37:if(a&&!(w<r.batchesPerEpoch)){e.next=91;break}return e.next=40,b.next();case 40:if(S=e.sent,!a||!S.done){e.next=44;break}return console.warn("You provided `batchesPerEpoch` as "+"".concat(r.batchesPerEpoch,", ")+"but your dataset iterator ran out of data after "+"".concat(w," batches; ")+"interrupting training. Make sure that your dataset can generate at least `batchesPerEpoch * epochs` batches (in this case, "+"".concat(r.batchesPerEpoch*r.epochs," batches). ")+"You may need to use the repeat() function when building your dataset."),e.abrupt("break",91);case 44:if(null==S.value){e.next=73;break}return _=IY(t,S.value),N=_.xs,E=_.ys,(C={}).batch=k,C.size=N[0].shape[0],e.next=51,v.onBatchBegin(k,C);case 51:if(T=[],null==r.classWeight){e.next=64;break}I=NY(r.classWeight,t.outputNames),O=0;case 55:if(!(O<I.length)){e.next=64;break}return e.t0=T,e.next=59,EY(E[O],null,I[O]);case 59:e.t1=e.sent,e.t0.push.call(e.t0,e.t1);case 61:++O,e.next=55;break;case 64:for(A=N.concat(E).concat(T),D=c(A),EV.dispose(A),M=0;M<f.length;++M)R=f[M],P=D[M],C[R]=P,EV.keep(P);return e.next=70,v.onBatchEnd(k,C);case 70:SX(C),k++,w++;case 73:if(!(a?w>=r.batchesPerEpoch:S.done)){e.next=87;break}if(!o){e.next=86;break}if(j=void 0,!PY(r.validationData)){e.next=84;break}return e.t2=SG,e.next=80,t.evaluateDataset(r.validationData,{batches:r.validationBatches});case 80:e.t3=e.sent,j=(0,e.t2)(e.t3),e.next=85;break;case 84:j=SG(t.evaluate(i,s,{batchSize:null==r.validationBatchSize?32:r.validationBatchSize,verbose:0}));case 85:for(F=0;F<t.metricsNames.length;++F)x["val_".concat(t.metricsNames[F])]=j[F];case 86:return e.abrupt("break",91);case 87:if(!t.stopTraining_){e.next=89;break}return e.abrupt("break",91);case 89:e.next=37;break;case 91:return e.next=93,v.onEpochEnd(y,x);case 93:if(y++,!t.stopTraining_){e.next=96;break}return e.abrupt("break",98);case 96:e.next=27;break;case 98:return e.next=100,v.onTrainEnd();case 100:return e.next=102,t.history.syncData();case 102:return e.abrupt("return",t.history);case 103:return e.prev=103,t.isTraining=!1,e.finish(103);case 106:case"end":return e.stop()}}),e,null,[[9,,103,106]])}))),MY.apply(this,arguments)}function RY(e,t){var n=null;return null!=t.batchesPerEpoch?n=t.batchesPerEpoch:Number.isFinite(e.size)&&(n=e.size),n}function PY(e){return"function"===typeof e.iterator}function jY(e){return"function"===typeof e.next}function FY(e,t,n){return LY.apply(this,arguments)}function LY(){return LY=(0,o.Z)(l().mark((function e(t,n,r){var a,o,i,s,u,c,f,d,p;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=null!=(r=r||{}).batches,o=t.testFunction,i=[],!(r.verbose>0)){e.next=6;break}throw new gG("Verbose mode is not implemented yet.");case 6:if(EV.util.assert(!a||r.batches>0&&Number.isInteger(r.batches),(function(){return"Test loop expects `batches` to be a positive integer, but "+"received ".concat(JSON.stringify(r.batches))})),!jY(n)){e.next=11;break}e.t0=n,e.next=14;break;case 11:return e.next=13,n.iterator();case 13:e.t0=e.sent;case 14:s=e.t0,u=0,c=0,f=l().mark((function e(){var n;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.next();case 2:if(n=e.sent,i=EV.tidy((function(){return n.value&&function(){var e=IY(t,n.value),r=e.xs,a=e.ys,s=r.concat(a),l=EV.tidy((function(){return o(s)}));if(EV.dispose(s),0===c)for(var f=0;f<l.length;++f)i.push((0,EV.scalar)(0));for(var d=s[0].shape[0],p=function(e){var t=l[e],n=i[e];i[e]=EV.tidy((function(){return EV.add(i[e],EV.mul(d,t))})),c>0&&EV.dispose(n)},h=0;h<l.length;++h)p(h);EV.dispose(l),u+=d,++c}(),i})),!n.done){e.next=7;break}return a&&console.warn("Your dataset iterator ran out of data during evaluateDataset(). Interrupting evalution. Make sure that your dataset can generate at least `batches` "+"batches (in this case, ".concat(r.batches," batches). ")+"You may need to use the repeat() function when building your dataset."),e.abrupt("return","break");case 7:case"end":return e.stop()}}),e)}));case 18:if(a&&!(c<r.batches)){e.next=25;break}return e.delegateYield(f(),"t1",20);case 20:if("break"!==e.t1){e.next=23;break}return e.abrupt("break",25);case 23:e.next=18;break;case 25:for(d=0;d<i.length;++d)p=i[d],i[d]=EV.div(i[d],u),EV.dispose(p);return e.abrupt("return",kG(i));case 27:case"end":return e.stop()}}),e)}))),LY.apply(this,arguments)}function BY(e){EV.util.assert(e>0&&Number.isInteger(e),(function(){return"batchSize is required to be a positive integer, but got ".concat(e)}))}function zY(e,t,n){return null==e?[null]:Array.isArray(e)?e.map((function(e){return vK(e,t,n-t)})):vK(e,t,n-t)}function ZY(e,t){return EV.tidy((function(){return null==e?null:Array.isArray(e)?e.map((function(e){return ZY(e,t)})):_K(e,"int32"===t.dtype?t:EV.cast(t,"int32"))}))}function VY(e,t){for(var n=[],r=0,a=null;r<e;)(a=r+t)>=e&&(a=e),n.push([r,a]),r=a;return n}function UY(e,t,n,r,a,o,i,s,u,c,l,f,d,p,h){return qY.apply(this,arguments)}function qY(){return qY=(0,o.Z)(l().mark((function e(t,n,r,a,o,i,s,u,c,f,d,p,h,m,v){var g,y,b,x,w,k,S,_;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==o&&(o=32),null==i&&(i=1),null==d&&(d=!0),null==h&&(h=0),g=!1,null!=c&&null!=f&&(g=!0),null==v){e.next=10;break}if(g=!0,null!=m){e.next=10;break}throw new vG("Can only use `validationSteps` when doing step-wise training, i.e., `stepsPerEpoch` must be set.");case 10:return null!=(y=t.checkNumSamples(r,o,m,"steps_per_epoch"))&&(b=dK(0,y)),null==s&&(s=1),x=AX(u,s,i,h,y,m,o,g,p),w=x.callbackList,k=x.history,w.setModel(t),t.history=k,e.next=18,w.onTrainBegin();case 18:t.stopTraining_=!1,S=l().mark((function e(i){var s;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.onEpochBegin(i);case 2:if(s={},null==m){e.next=7;break}throw new gG("stepsPerEpoch mode is not implemented yet.");case 7:return e.delegateYield(l().mark((function e(){var i,u,p,h;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("batch"!==d){e.next=4;break}throw new gG("batch shuffling is not implemneted yet");case 4:d&&EV.util.shuffle(b);case 5:i=(0,EV.tensor1d)(b),u=VY(y,o),p=l().mark((function e(d){var p;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return p={},e.next=3,w.onBatchBegin(d,p);case 3:return EV.tidy((function(){var e=u[d][0],l=u[d][1],h=vK(i,e,l-e);p.batch=d,p.size=l-e;for(var m=ZY(r,h),v=n(m),y=0;y<a.length;++y){var b=a[y],x=v[y];p[b]=x,EV.keep(x)}if(d===u.length-1&&g)for(var w=t.testLoop(c,f,o),k=0;k<a.length;++k){var S=a[k],_=w[k];EV.keep(_),s["val_"+S]=_}})),e.next=6,w.onBatchEnd(d,p);case 6:if(SX(p),!t.stopTraining_){e.next=9;break}return e.abrupt("return","break");case 9:case"end":return e.stop()}}),e)})),h=0;case 9:if(!(h<u.length)){e.next=17;break}return e.delegateYield(p(h),"t0",11);case 11:if("break"!==e.t0){e.next=14;break}return e.abrupt("break",17);case 14:++h,e.next=9;break;case 17:i.dispose();case 18:case"end":return e.stop()}}),e)}))(),"t0",8);case 8:return e.next=10,w.onEpochEnd(i,s);case 10:if(!t.stopTraining_){e.next=12;break}return e.abrupt("return","break");case 12:case"end":return e.stop()}}),e)})),_=h;case 21:if(!(_<i)){e.next=29;break}return e.delegateYield(S(_),"t0",23);case 23:if("break"!==e.t0){e.next=26;break}return e.abrupt("break",29);case 26:++_,e.next=21;break;case 29:return e.next=31,w.onTrainEnd();case 31:return e.next=33,t.history.syncData();case 33:return e.abrupt("return",t.history);case 34:case"end":return e.stop()}}),e)}))),qY.apply(this,arguments)}function WY(e,t,n){return HY.apply(this,arguments)}function HY(){return HY=(0,o.Z)(l().mark((function e(t,n,r){var a,o,i,s,u,c,f,d,p,h,m,v,g,y,b,x,w,k,S,_,N,E,C,T,I,O,A=arguments;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=A.length>3&&void 0!==A[3]?A[3]:{},!t.isTraining){e.next=3;break}throw new Error("Cannot start training because another fit() call is ongoing.");case 3:return t.isTraining=!0,e.prev=4,BY(m=null==a.batchSize?32:a.batchSize),v=!1,e.next=10,t.standardizeUserData(n,r,a.sampleWeight,a.classWeight,v,m);case 10:if(g=e.sent,o=g[0],i=g[1],h=g[2],y=!1,!(null!=a.validationData&&a.validationData.length>0)){e.next=36;break}if(y=!0,2!==a.validationData.length){e.next=22;break}c=a.validationData[0],f=a.validationData[1],e.next=27;break;case 22:if(3!==a.validationData.length){e.next=26;break}throw new gG("validationData including sample weights is not supported yet.");case 26:throw new vG("When passing validation data, it must contain 2 (valX, valY) or 3 (valX, valY, valSampleWeight) items; "+"".concat(a.validationData," is invalid."));case 27:return x=!0,e.next=30,t.standardizeUserData(c,f,null,null,x,m);case 30:w=e.sent,d=w[0],p=w[1],b=d.concat(p),e.next=37;break;case 36:null!=a.validationSplit&&a.validationSplit>0&&a.validationSplit<1?(y=!0,k=Math.floor(o[0].shape[0]*(1-a.validationSplit)),S=o[0].shape[0],d=zY(o,k,S),s=o,o=zY(o,0,k),p=zY(i,k,S),u=i,i=zY(i,0,k),b=d.concat(p)):null!=a.validationSteps&&(y=!0);case 37:return _=o.concat(i).concat(h),t.checkTrainableWeightsConsistency(),N=t.makeTrainFunction(),E=t.getDedupedMetricsNames(),y?(t.makeTestFunction(),C=t.testFunction,T=E.slice().concat(E.map((function(e){return"val_"+e})))):(C=null,b=[],T=E.slice()),I=IX(a.callbacks,a.yieldEvery),e.next=45,UY(t,N,_,E,m,a.epochs,a.verbose,I,C,b,a.shuffle,T,a.initialEpoch,null,null);case 45:return O=e.sent,e.abrupt("return",O);case 47:return e.prev=47,t.isTraining=!1,KY(o,n),KY(i,r),KY(s,n),KY(u,r),KY(d,c),KY(p,f),null!=h&&EV.dispose(h),e.finish(47);case 57:case"end":return e.stop()}}),e,null,[[4,,47,57]])}))),HY.apply(this,arguments)}function GY(e){var t=[];e instanceof EV.Tensor&&(e=[e]);for(var n=0;n<e.length;++n){var r=e[n];if(1===r.rank)t.push(hK(r,1));else{if(0===r.rank)throw new Error("Expected tensor to be at least 1D, but received a 0D tensor (scalar).");t.push(r)}}return t}function KY(e,t){if(null!=e){var n=[];if(t instanceof EV.Tensor)n.push(t.id);else if(Array.isArray(t))t.forEach((function(e){return n.push(e.id)}));else if(null!=t)for(var r in t){var a=t[r];n.push(a.id)}var o=[];if(e instanceof EV.Tensor)-1===n.indexOf(e.id)&&o.push(e);else if(Array.isArray(e))e.forEach((function(e){-1===n.indexOf(e.id)&&o.push(e)}));else if(null!=e)for(var i in e){var s=e[i];-1===n.indexOf(s.id)&&o.push(s)}o.forEach((function(e){e.isDisposed||e.dispose()}))}}function XY(e){return Array.isArray(e)}function YY(e){return!function(e){return e instanceof EV.Tensor}(e)&&!XY(e)}function $Y(e,t,n){var r,a=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"";if(null==t||0===t.length){if(null!=e){var i=!1;if(XY(e)&&e.length>0)i=!0;else if(YY(e)){for(var s in e)if(e.hasOwnProperty(s)){i=!0;break}}else i=!0;if(i)throw new vG("Error when checking model ".concat(o," expected no data, ")+"but got ".concat(e))}return[]}if(null==e)return t.map((function(e){return null}));if(YY(e)){e=e,r=[];var u,c=(0,Et.Z)(t);try{for(c.s();!(u=c.n()).done;){var l=u.value;if(null==e[l])throw new vG('No data provided for "'.concat(l,'". Need data for each key in: ')+"".concat(t));r.push(e[l])}}catch(v){c.e(v)}finally{c.f()}}else if(XY(e)){if((e=e).length!==t.length)throw new vG("Error when checking model ".concat(o,": the Array of ")+"Tensors that you are passing to your model is not the size the "+"model expected. Expected to see ".concat(t.length," Tensor(s), but ")+"instead got the following list of Tensor(s): ".concat(e));r=e}else{if(e=e,t.length>1)throw new vG("The model ".concat(o," expects ").concat(t.length," Tensor(s), ")+"but only received one Tensor. Found: Tensor with shape ".concat(e.shape));r=[e]}if(r=GY(r),null!=n)for(var f=0;f<t.length;++f)if(null!=n[f]){var d=r[f];if(d.shape.length!==n[f].length)throw new vG("Error when checking ".concat(o,": expected ").concat(t[f]," ")+"to have ".concat(n[f].length," dimension(s). but got array with ")+"shape ".concat(d.shape));for(var p=0;p<n[f].length;++p)if(0!==p||a){var h=d.shape[p],m=n[f][p];if(null!=m&&m>=0&&h!==m)throw new vG("".concat(o," expected a batch of elements where each ")+"example has shape [".concat(n[f].slice(1,n[f].length),"] ")+"(i.e.,tensor shape [*,".concat(n[f].slice(1,n[f].length),"])")+" but the ".concat(o," received an input with ").concat(d.shape[0])+" examples, each with shape [".concat(d.shape.slice(1,d.shape.length),"]")+" (tensor shape [".concat(d.shape,"])"))}}return r}function JY(e,t,n){var r=AG(e.map((function(e){return e.shape[0]})));r.sort();var a=AG(t.map((function(e){return e.shape[0]})));if(a.sort(),r.length>1)throw new vG("All input Tensors (x) should have the same number of samples. Got array shapes: "+"".concat(JSON.stringify(e.map((function(e){return e.shape})))));if(a.length>1)throw new vG("All target Tensors (y) should have the same number of samples. Got array shapes: "+"".concat(JSON.stringify(t.map((function(e){return e.shape})))));if(r.length>0&&a.length>0&&!EV.util.arraysEqual(r,a))throw new vG("Input Tensors should have the same number of samples as target "+"Tensors. Found ".concat(r[0]," input sample(s) and ").concat(a[0]," target ")+"sample(s).")}function QY(e,t,n){for(var r=[jX,VX,zX],a=0;a<e.length;++a){var o=e[a],i=t[a],s=n[a];if(null!=i){if(i===zX&&1===o.shape[o.shape.length-1])throw new vG("You are passing a target array of shape ".concat(o.shape," while using ")+"a loss 'categorical_crossentropy'. 'categorical_crossentropy'expects targets to be binary matrices (1s and 0s) of shape [samples, classes].");if(-1!==r.indexOf(i))for(var u=o.shape.slice(1),c=s.slice(1),l=0;l<u.length;++l){var f=u[l],d=c[l];if(null!=d&&f!==d)throw new vG("A target Tensor with shape ".concat(o.shape," was passed for an ")+"output of shape ".concat(s,", while using a loss function that ")+"expects targets to have the same shape as the output.")}}}}function e$(e,t,n){var r,a=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"";if(Array.isArray(e)){if(e.length!==t.length)throw new vG("Error when checking model ".concat(o,": the Array of ")+"Tensors that you are passing to your model is not the size the "+"the model expected. Expected to see ".concat(t.length," Tensor(s),")+" but instead got ".concat(e.length," Tensors(s)."));r=e}else{if(t.length>1)throw new vG("The model expects ".concat(t.length," ").concat(o," Tensors, ")+"but only received one Tensor. Found: array with shape "+"".concat(JSON.stringify(e.shape),"."));r=[e]}if(null!=n)for(var i=0;i<t.length;++i)if(null!=n[i]){var s=r[i];if(s.shape.length!==n[i].length)throw new vG("Error when checking ".concat(o,": expected ").concat(t[i]," ")+"to have ".concat(n[i].length," dimension(s), but got array with ")+"shape ".concat(JSON.stringify(s.shape)));for(var u=0;u<n[i].length;++u)if(0!==u||a){var c=s.shape[u],l=n[i][u];if(null!=l&&l!==c)throw new vG("Error when checking ".concat(o,": expected ")+"".concat(t[i]," to have shape ").concat(JSON.stringify(n[i])," but ")+"got array with shape ".concat(JSON.stringify(s.shape),"."))}}}var t$=function(e){(0,nu.Z)(n,e);var t=(0,ru.Z)(n);function n(e){var r;return(0,f.Z)(this,n),(r=t.call(this,e)).isTraining=!1,r}return(0,d.Z)(n,[{key:"summary",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:console.log;if(!this.built)throw new vG("This model has never been called, thus its weights have not been created yet. So no summary can be displayed. Build the model first (e.g., by calling it on some test data).");iY(this,e,t,n)}},{key:"compile",value:function(e){var t=this;if(null==e.loss&&(e.loss=[]),this.loss=e.loss,"string"===typeof e.optimizer)this.optimizer_=function(e){var t={Adagrad:function(){return EV.train.adagrad(.01)},Adadelta:function(){return EV.train.adadelta(1,.95,pG())},Adam:function(){return EV.train.adam(.001,.9,.999,pG())},Adamax:function(){return EV.train.adamax(.002,.9,.999,pG(),0)},RMSProp:function(){return EV.train.rmsprop(.001,.9,0,pG())},SGD:function(){return EV.train.sgd(.01)}};if(t.adagrad=t.Adagrad,t.adadelta=t.Adadelta,t.adam=t.Adam,t.adamax=t.Adamax,t.rmsprop=t.RMSProp,t.sgd=t.SGD,e in t)return t[e]();throw new vG("Unknown Optimizer ".concat(e))}(e.optimizer),this.isOptimizerOwned=!0;else{if(!(e.optimizer instanceof EV.Optimizer))throw new vG("User-defined optimizer must be an instance of tf.Optimizer.");this.optimizer_=e.optimizer,this.isOptimizerOwned=!1}var n=[];if(Array.isArray(e.loss)||"string"===typeof e.loss||"function"===typeof e.loss)if(Array.isArray(e.loss)){if(e.loss.length!==this.outputs.length)throw new vG("When passing an Array as loss, it should have one entry per "+"model output. The model has ".concat(this.outputs.length," output(s), ")+"but you passed loss=".concat(e.loss,"."));var r=e.loss;n=r.map((function(e){return HX(e)}))}else{var a=HX(e.loss);this.outputs.forEach((function(e){n.push(a)}))}else{for(var o in e.loss=e.loss,e.loss)if(-1===this.outputNames.indexOf(o))throw new vG('Unknown entry in loss dictionary: "'.concat(o,'". ')+"Only expected the following keys: ".concat(this.outputNames));var i,s=(0,Et.Z)(this.outputNames);try{for(s.s();!(i=s.n()).done;){var u=i.value;null==e.loss[u]&&console.warn('Output "'.concat(u,'" is missing from loss dictionary. We assume ')+"this was done on purpose, and we will not be expecting data "+"to be passed to ".concat(u," during training")),n.push(HX(e.loss[u]))}}catch(m){s.e(m)}finally{s.f()}}this.lossFunctions=n,this.feedOutputNames=[],this.feedOutputShapes=[],this.feedLossFns=[];for(var c=0;c<this.outputs.length;++c){var l=this.internalOutputShapes[c],f=this.outputNames[c];this.feedOutputNames.push(f),this.feedOutputShapes.push(l),this.feedLossFns.push(this.lossFunctions[c])}var d=[];this.metrics=e.metrics,this.metricsNames=["loss"],this.metricsTensors=[],aK("loss",(function(){for(var e=0;e<t.outputs.length;++e)if(-1===d.indexOf(e)){var n=t.lossFunctions[e];t.outputs.length>1&&(t.metricsTensors.push([n,e]),t.metricsNames.push(t.outputNames[e]+"_loss"))}}));var p=function(e,t){if(null==e||Array.isArray(e)&&0===e.length)return t.map((function(e){return[]}));var n;if("string"===typeof e||"function"===typeof e)n=[e];else{if(!Array.isArray(e)&&"object"!==typeof e)throw new TypeError("Type of metrics argument not understood. Expected an string,"+"function, Array, or Object, found: ".concat(e));n=e}if(Array.isArray(n))return t.map((function(e){return n}));var r,a=[],o=(0,Et.Z)(t);try{for(o.s();!(r=o.n()).done;){var i=r.value,s=n.hasOwnProperty(i)?n[i]:[];Array.isArray(s)||(s=[s]),a.push(s)}}catch(m){o.e(m)}finally{o.f()}return a}(e.metrics,this.outputNames),h=function(e,n,r){t.outputNames.length>1&&(n=t.outputNames[e]+"_"+n),t.metricsNames.push(n),t.metricsTensors.push([r,e])};aK("metric",(function(){for(var e=function(e){if(-1!==d.indexOf(e))return"continue";!function(n){var r,a,o,i,s=(0,Et.Z)(n);try{for(s.s();!(i=s.n()).done;){var u=i.value;if("string"===typeof u&&-1!==["accuracy","acc","crossentropy","ce"].indexOf(u)){var c=t.internalOutputShapes[e];1===c[c.length-1]||t.lossFunctions[e]===VX?-1!==["accuracy","acc"].indexOf(u)?a=GX:-1!==["crossentropy","ce"].indexOf(u)&&(a=YX):t.lossFunctions[e]===ZX?-1!==["accuracy","acc"].indexOf(u)?a=$X:-1!==["crossentropy","ce"].indexOf(u)&&(a=QX):-1!==["accuracy","acc"].indexOf(u)?a=KX:-1!==["crossentropy","ce"].indexOf(u)&&(a=JX);var l=void 0;-1!==["accuracy","acc"].indexOf(u)?l="acc":-1!==["crossentropy","ce"].indexOf(u)&&(l="ce"),o=a,r=""+l}else{var f=tY(u);o=f,r=""+nY(u)}var d=void 0;aK(r,(function(){d=o})),h(e,r,d)}}catch(m){s.e(m)}finally{s.f()}}(p[e])},n=0;n<t.outputs.length;++n)e(n)})),this.collectedTrainableWeights=this.trainableWeights}},{key:"checkTrainableWeightsConsistency",value:function(){null!=this.collectedTrainableWeights&&this.trainableWeights.length!==this.collectedTrainableWeights.length&&console.warn("Discrepancy between trainableweights and collected trainable weights. Did you set `model.trainable` without calling `model.compile()` afterwards?")}},{key:"evaluate",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=null==n.batchSize?32:n.batchSize;BY(r);var a=!0,o=this.standardizeUserDataXY(e,t,a,r);try{var i=o[0].concat(o[1]);this.makeTestFunction();var s=this.testFunction,u=this.testLoop(s,i,r,n.verbose,n.steps);return kG(u)}finally{KY(o[0],e),KY(o[1],t)}}},{key:"evaluateDataset",value:function(){var e=(0,o.Z)(l().mark((function e(t,n){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.makeTestFunction(),e.abrupt("return",FY(this,t,n));case 2:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"checkNumSamples",value:function(e,t,n){var r,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"steps";if(null!=n){if(r=null,null!=t)throw new vG("If ".concat(a," is set, batchSize must be null or undefined.")+"Got batchSize = ".concat(t))}else{if(null==e)throw new vG("Either the input data should have a defined shape, or "+"".concat(a," shoud be specified."));r=Array.isArray(e)?e[0].shape[0]:e.shape[0]}return r}},{key:"execute",value:function(e,t){if(Array.isArray(t)&&0===t.length)throw new vG("`outputs` is an empty Array, which is not allowed.");var n=Array.isArray(t),r=n?t:[t],a=this.retrieveSymbolicTensors(r),o=new vY;if(e instanceof EV.Tensor&&(e=[e]),Array.isArray(e)){if(e.length!==this.inputs.length)throw new vG("The number of inputs provided (".concat(e.length,") ")+"does not match the number of inputs of this model "+"(".concat(this.inputs.length,")."));for(var i=0;i<this.inputs.length;++i)o.add(this.inputs[i],e[i])}else{var s,u=(0,Et.Z)(this.inputs);try{for(u.s();!(s=u.n()).done;){var c=s.value,l=e[c.name];if(null==l)throw new vG("No value is provided for the model's input ".concat(c.name));o.add(c,l)}}catch(d){u.e(d)}finally{u.f()}}var f=bY(a,o);return n?f:f[0]}},{key:"retrieveSymbolicTensors",value:function(e){var t,n=bG(null,e.length),r=e.length,a=(0,Et.Z)(this.layers);try{for(a.s();!(t=a.n()).done;){for(var o=t.value,i=Array.isArray(o.output)?o.output:[o.output],s=i.map((function(e){return e.name})),u=0;u<e.length;++u){var c=s.indexOf(e[u]);if(-1!==c&&(n[u]=i[c],r--),0===r)break}if(0===r)break}}catch(f){a.e(f)}finally{a.f()}if(r>0){var l=[];throw n.forEach((function(t,n){null==t&&l.push(e[n])})),new vG("Cannot find SymbolicTensors for output name(s): "+"".concat(JSON.stringify(l)))}return n}},{key:"predictLoop",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:32,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return EV.tidy((function(){var a=t.checkNumSamples(e);if(r)throw new gG("Verbose predictLoop() is not implemented yet.");for(var o=VY(a,n),i=t.outputs.map((function(e){return[]})),s=function(n){var r=EV.tidy((function(){var r=o[n][0],a=o[n][1],i=zY(e,r,a),s=[];if(Array.isArray(i))for(var u=0;u<i.length;++u)s.push({key:t.inputs[u],value:i[u]});else s.push({key:t.inputs[0],value:i});var c=new vY(s);return bY(t.outputs,c)}));r.forEach((function(e,t){return i[t].push(e)}))},u=0;u<o.length;++u)s(u);return kG(i.map((function(e){return EV.concat(e,0)})))}))}},{key:"predict",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=GY(e);e$(n,this.inputNames,this.feedInputShapes,!1);try{var r=null==t.batchSize?32:t.batchSize;return BY(r),this.predictLoop(n,r)}finally{KY(n,e)}}},{key:"predictOnBatch",value:function(e){e$(e,this.inputNames,this.feedInputShapes,!0);var t=(Array.isArray(e)?e[0]:e).shape[0];return this.predictLoop(e,t)}},{key:"standardizeUserDataXY",value:function(e,t){var n=arguments.length>3?arguments[3]:void 0;if(null==this.optimizer_)throw new mG("You must compile a model before training/testing. Use LayersModel.compile(modelCompileArgs).");for(var r=[],a=0;a<this.feedOutputShapes.length;++a){var o=this.feedOutputShapes[a],i=this.feedLossFns[a];i===ZX?r.push(o.slice(0,o.length-1).concat([1])):r.push(o)}if(JY(e=$Y(e,this.feedInputNames,this.feedInputShapes,!1,"input"),t=$Y(t,this.feedOutputNames,r,!1,"target")),QY(t,this.feedLossFns,this.feedOutputShapes),this.stateful&&null!=n&&n>0&&e[0].shape[0]%n!==0)throw new vG("In a stateful network, you should only pass inputs with a number of samples that is divisible by the batch size "+"".concat(n,". Found: ").concat(e[0].shape[0]," sample(s)."));return[e,t]}},{key:"standardizeUserData",value:function(){var e=(0,o.Z)(l().mark((function e(t,n,r,o){var i,s,u,c,f,d,p,h,m,v=arguments;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=!(v.length>4&&void 0!==v[4])||v[4],s=v.length>5?v[5]:void 0,u=this.standardizeUserDataXY(t,n,i,s),c=(0,a.Z)(u,2),f=c[0],d=c[1],null==r){e.next=5;break}throw new Error("sample weight is not supported yet.");case 5:if(p=null,null==o){e.next=19;break}h=NY(o,this.outputNames),p=[],m=0;case 10:if(!(m<h.length)){e.next=19;break}return e.t0=p,e.next=14,EY(d[m],null,h[m]);case 14:e.t1=e.sent,e.t0.push.call(e.t0,e.t1);case 16:++m,e.next=10;break;case 19:return e.abrupt("return",[f,d,p]);case 20:case"end":return e.stop()}}),e,this)})));return function(t,n,r,a){return e.apply(this,arguments)}}()},{key:"testLoop",value:function(e,t,n){var r=this,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=arguments.length>4?arguments[4]:void 0;return EV.tidy((function(){var i=r.checkNumSamples(t,n,o,"steps"),s=[];if(a>0)throw new gG("Verbose mode is not implemented yet.");if(null!=o)throw new gG("steps mode in testLoop() is not implemented yet");for(var u=VY(i,n),c=(0,EV.tensor1d)(dK(0,i)),l=0;l<u.length;++l){var f=u[l][0],d=u[l][1],p=vK(c,f,d-f),h=ZY(t,p),m=e(h);if(0===l)for(var v=0;v<m.length;++v)s.push((0,EV.scalar)(0));for(var g=0;g<m.length;++g){var y=m[g];s[g]=EV.add(s[g],EV.mul(d-f,y))}}for(var b=0;b<s.length;++b)s[b]=EV.div(s[b],i);return s}))}},{key:"getDedupedMetricsNames",value:function(){for(var e=this.metricsNames,t=[],n=0;n<e.length;++n){var r=e[n],a=r;if(wG(e,r)>1){var o=wG(e.slice(0,n),r);a+="_".concat(o)}t.push(a)}return t}},{key:"makeTrainFunction",value:function(){var e=this;return function(t){var n=[],r=t.slice(0,e.inputs.length),a=t.slice(e.inputs.length,e.inputs.length+e.outputs.length),o=t.slice(e.inputs.length+e.outputs.length,e.inputs.length+2*e.outputs.length),i=[],s=e.collectedTrainableWeights.map((function(e){return e.read()})),u=e.optimizer_.minimize((function(){for(var t=[],s=0;s<e.inputs.length;++s)t.push({key:e.inputs[s],value:r[s]});for(var u,c=new vY(t),l=bY(e.outputs,c,{training:!0}),f=0;f<e.lossFunctions.length;++f){var d=(0,e.lossFunctions[f])(a[f],l[f]);null!=o[f]&&(d=TY(d,o[f]));var p=EV.mean(d);n.push(p),u=0===f?d:EV.add(u,d)}for(var h=0;h<e.metricsTensors.length;++h){var m=void 0;if(e.outputs.length>1&&h<e.outputs.length)m=n[h];else{var v=e.metricsTensors[h][0],g=e.metricsTensors[h][1];m=EV.mean(v(a[g],l[g]))}EV.keep(m),i.push(m)}return u=EV.mean(u),e.calculateLosses().forEach((function(e){u=EV.add(u,e)})),u}),!0,s);return[u].concat(i)}}},{key:"makeTestFunction",value:function(){var e=this;this.testFunction=function(t){return EV.tidy((function(){for(var n,r=[],a=t.slice(0,e.inputs.length),o=t.slice(e.inputs.length,e.inputs.length+e.outputs.length),i=[],s=0;s<e.inputs.length;++s)i.push({key:e.inputs[s],value:a[s]});for(var u=new vY(i),c=bY(e.outputs,u),l=0;l<e.lossFunctions.length;++l){var f=e.lossFunctions[l],d=EV.mean(f(o[l],c[l]));n=0===l?d:EV.add(n,d),r.push(n)}for(var p=0;p<e.metricsTensors.length;++p){var h=e.metricsTensors[p][0],m=e.metricsTensors[p][1],v=EV.mean(h(o[m],c[m]));r.push(v)}return r}))}}},{key:"fit",value:function(){var e=(0,o.Z)(l().mark((function e(t,n){var r,a=arguments;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.length>2&&void 0!==a[2]?a[2]:{},e.abrupt("return",WY(this,t,n,r));case 2:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"fitDataset",value:function(){var e=(0,o.Z)(l().mark((function e(t,n){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",DY(this,t,n));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"trainOnBatch",value:function(){var e=(0,o.Z)(l().mark((function e(t,n){var r,a,o,i,s,u,c,f,d,p;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.standardizeUserData(t,n);case 2:r=e.sent,a=r[0],o=r[1],i=this.makeTrainFunction(),s=i(a.concat(o)),u=[],c=(0,Et.Z)(s),e.prev=9,c.s();case 11:if((f=c.n()).done){e.next=19;break}return d=f.value,e.next=15,d.data();case 15:p=e.sent,u.push(p[0]);case 17:e.next=11;break;case 19:e.next=24;break;case 21:e.prev=21,e.t0=e.catch(9),c.e(e.t0);case 24:return e.prev=24,c.f(),e.finish(24);case 27:return EV.dispose(s),KY(r[0],t),KY(r[1],n),e.abrupt("return",kG(u));case 31:case"end":return e.stop()}}),e,this,[[9,21,24,27]])})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getNamedWeights",value:function(e){for(var t=[],n=null!=e&&e.trainableOnly,r=n?this.trainableWeights:this.weights,a=this.getWeights(n),o=0;o<r.length;++o)n&&!r[o].trainable||t.push({name:r[o].originalName,tensor:a[o]});return t}},{key:"stopTraining",get:function(){return this.stopTraining_},set:function(e){this.stopTraining_=e}},{key:"optimizer",get:function(){return this.optimizer_},set:function(e){this.optimizer_!==e&&(this.optimizer_=e,this.isOptimizerOwned=!1)}},{key:"dispose",value:function(){var e=MX((0,pC.Z)(n.prototype),"dispose",this).call(this);if(0===e.refCountAfterDispose&&null!=this.optimizer&&this.isOptimizerOwned){var t=EV.memory().numTensors;this.optimizer_.dispose(),e.numDisposedVariables+=t-EV.memory().numTensors}return e}},{key:"getLossIdentifiers",value:function(){var e;if("string"===typeof this.loss)e=_G(this.loss);else if(Array.isArray(this.loss)){var t,n=(0,Et.Z)(this.loss);try{for(n.s();!(t=n.n()).done;){if("string"!==typeof t.value)throw new Error("Serialization of non-string loss is not supported.")}}catch(u){n.e(u)}finally{n.f()}e=this.loss.map((function(e){return _G(e)}))}else{var r=Object.keys(this.loss);e={};for(var a=this.loss,o=0,i=r;o<i.length;o++){var s=i[o];if("string"!==typeof a[s])throw new Error("Serialization of non-string loss is not supported.");e[s]=_G(a[s])}}return e}},{key:"getMetricIdentifiers",value:function(){if("string"===typeof this.metrics||"function"===typeof this.metrics)return[_G(nY(this.metrics))];if(Array.isArray(this.metrics))return this.metrics.map((function(e){return _G(nY(e))}));var e={};for(var t in this.metrics)e[t]=_G(nY(this.metrics[t]));return e}},{key:"getTrainingConfig",value:function(){return{loss:this.getLossIdentifiers(),metrics:this.getMetricIdentifiers(),optimizer_config:{class_name:this.optimizer.getClassName(),config:this.optimizer.getConfig()}}}},{key:"loadTrainingConfig",value:function(e){if(null!=e.weighted_metrics)throw new Error("Loading weight_metrics is not supported yet.");if(null!=e.loss_weights)throw new Error("Loading loss_weights is not supported yet.");if(null!=e.sample_weight_mode)throw new Error("Loading sample_weight_mode is not supported yet.");var t,n,r=RX(pY(e.optimizer_config));if("string"===typeof e.loss)t=NG(e.loss);else if(Array.isArray(e.loss))t=e.loss.map((function(e){return NG(e)}));else if(null!=e.loss)for(var a in t={},e.loss)t[a]=NG(e.loss[a]);if(Array.isArray(e.metrics))n=e.metrics.map((function(e){return NG(e)}));else if(null!=e.metrics)for(var o in n={},e.metrics)n[o]=NG(e.metrics[o]);this.compile({loss:t,metrics:n,optimizer:r})}},{key:"save",value:function(){var e=(0,o.Z)(l().mark((function e(t,n){var a,o,i,s,u,c,f,d,p;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("string"!==typeof t){e.next=9;break}if(0!==(a=EV.io.getSaveHandlers(t)).length){e.next=6;break}throw new vG("Cannot find any save handlers for URL '".concat(t,"'"));case 6:if(!(a.length>1)){e.next=8;break}throw new vG("Found more than one (".concat(a.length,") save handlers for ")+"URL '".concat(t,"'"));case 8:t=a[0];case 9:if(null!=t.save){e.next=11;break}throw new vG("LayersModel.save() cannot proceed because the IOHandler provided does not have the `save` attribute defined.");case 11:return e.next=13,EV.io.encodeWeights(this.getNamedWeights(n));case 13:if(o=e.sent,!1,null,i=this.toJSON(null,false),s={modelTopology:i,format:"layers-model",generatedBy:"TensorFlow.js tfjs-layers v".concat(mY),convertedBy:null},!(null!=n&&n.includeOptimizer)||null==this.optimizer){e.next=34;break}return s.trainingConfig=this.getTrainingConfig(),c="optimizer",e.t0=EV.io,e.next=25,this.optimizer.getWeights();case 25:return e.t1=e.sent,e.t2=c,e.next=29,e.t0.encodeWeights.call(e.t0,e.t1,e.t2);case 29:f=e.sent,d=f.data,p=f.specs,(u=o.specs).push.apply(u,(0,r.Z)(p)),o.data=EV.io.concatenateArrayBuffers([o.data,d]);case 34:return null!=this.userDefinedMetadata&&(!0,aY(this.userDefinedMetadata,this.name,true),s.userDefinedMetadata=this.userDefinedMetadata),s.weightData=o.data,s.weightSpecs=o.specs,e.abrupt("return",t.save(s));case 38:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"setUserDefinedMetadata",value:function(e){aY(e,this.name),this.userDefinedMetadata=e}},{key:"getUserDefinedMetadata",value:function(){return this.userDefinedMetadata}}]),n}(SY);t$.className="Model",EV.serialization.registerClass(t$);var n$=function(e){(0,nu.Z)(n,e);var t=(0,ru.Z)(n);function n(){return(0,f.Z)(this,n),t.apply(this,arguments)}return(0,d.Z)(n)}(t$);n$.className="Functional",EV.serialization.registerClass(n$);var r$=function(e){(0,nu.Z)(n,e);var t=(0,ru.Z)(n);function n(e){var r;if((0,f.Z)(this,n),e=e||{},(r=t.call(this,{inputs:[],outputs:[]})).trainable=!0,r.built=!1,r.name=null!=e.name?e.name:nX("sequential_"),null!=e.layers){var a,o=(0,Et.Z)(e.layers);try{for(o.s();!(a=o.n()).done;){var i=a.value;r.add(i)}}catch(s){o.e(s)}finally{o.f()}}return r}return(0,d.Z)(n,[{key:"checkShape",value:function(e){if(e.inboundNodes[0].outputTensors[0].shape.some((function(e){return e<0})))throw new vG("Negative dimension size caused by adding layer "+"".concat(e.name," with input shape [")+"".concat(e.inboundNodes[0].inputTensors[0].shape,"]"))}},{key:"add",value:function(e){var t,r=e instanceof n||e instanceof t$;if(r){if(1!==(t=e).outputs.length)throw new vG("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");if(1!==t.inputs.length)throw new vG("All layers in a Sequential model should have a single input tensor. For multi-input layers, use the functional API.")}if(0===this.outputs.length){if(0===e.inboundNodes.length){if(null==e.batchInputShape)throw new vG("The first layer in a Sequential model must get an `inputShape` or `batchInputShape` argument.");var a=function(e){if(null==e.batchShape&&null==e.shape)throw new Error("Please provide to Input either a `shape` or a `batchShape` argument. Note that `shape` does not include the batch dimension.");if(null!=e.batchShape&&null!=e.shape)throw new vG("Please provide either a `shape` or `batchShape` argument to Input, but not both.");var t=e.batchShape;null!=e.shape&&null==t&&(t=[null].concat(e.shape));var n=e.dtype;return null==n&&(n="float32"),new xX({batchInputShape:t,name:e.name,dtype:n,sparse:e.sparse}).inboundNodes[0].outputTensors[0]}({batchShape:e.batchInputShape,dtype:e.dtype,name:e.name+"_input"});e.apply(a)}if(r)this.outputs=t.outputs,this.inputs=t.inputs;else{if(1!==e.inboundNodes.length)throw new vG("A layer added to a Sequential model must not already be "+"connected somewhere else. LayersModel received layer ".concat(e.name," ")+"which has ".concat(e.inboundNodes.length," pre-existing inbound ")+"connections.");if(1!==e.inboundNodes[0].outputTensors.length)throw new vG("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");this.checkShape(e),this.outputs=[e.inboundNodes[0].outputTensors[0]],this.inputs=yX(this.outputs[0])}this.inboundNodes=[],new mX({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:this.inputs,outputTensors:this.outputs,inputMasks:bG(null,this.inputs.length),outputMasks:[null],inputShapes:this.inputs.map((function(e){return e.shape})),outputShapes:this.outputs[0].shape})}else{var o=e.apply(this.outputs[0]);if(Array.isArray(o))throw new TypeError("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");this.checkShape(e),this.outputs=[o],this.inboundNodes[0].outputTensors=this.outputs,this.inboundNodes[0].outputShapes=[this.outputs[0].shape]}this.layers.push(e),this.built=!1}},{key:"pop",value:function(){if(0===this.layers.length)throw new TypeError("There are no layers in the model.");if(this.layers.pop(),0===this.layers.length)this.outputs=[],this.inboundNodes=[],this.outboundNodes=[];else{var e=this.layers.length-1;this.layers[e].outboundNodes=[],this.outputs=[this.layers[e].output],this.inboundNodes[0].outputTensors=this.outputs,this.inboundNodes[0].outputShapes=[this.outputs[0].shape]}}},{key:"call",value:function(e,t){return null==this.model&&this.build(),this.model.call(e,t)}},{key:"build",value:function(e){if(iX(e),0===this.inputs.length||0===this.outputs.length)throw new TypeError("Sequential model cannot be built: model is empty. Add some layers first.");this.model=new t$({inputs:this.inputs,outputs:this.outputs[0],name:this.name+"_model"}),this.model.trainable=this.trainable,this.supportsMasking=this.model.supportsMasking,this.inputLayers=this.model.inputLayers,this.inputLayersNodeIndices=this.model.inputLayersNodeIndices,this.inputLayersTensorIndices=this.model.inputLayersTensorIndices,this.outputLayers=this.model.outputLayers,this.outputLayersNodeIndices=this.model.outputLayersNodeIndices,this.outputLayersTensorIndices=this.model.outputLayersTensorIndices,this.nodesByDepth=this.model.nodesByDepth,this.containerNodes=this.model.containerNodes,this.outputNames=this.model.outputNames,this.inputNames=this.model.inputNames,this.built=!0}},{key:"countParams",value:function(){return this.built||this.build(),MX((0,pC.Z)(n.prototype),"countParams",this).call(this)}},{key:"summary",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:console.log;this.built||this.build(),MX((0,pC.Z)(n.prototype),"summary",this).call(this,e,t,r)}},{key:"setWeights",value:function(e){null==this.model&&this.build(),this.model.setWeights(e)}},{key:"evaluate",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!this.built)throw new mG("The model needs to be compiled before being used.");return this.model.evaluate(e,t,n)}},{key:"evaluateDataset",value:function(){var e=(0,o.Z)(l().mark((function e(t,n){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.built){e.next=2;break}throw new mG("The model needs to be compiled before being used.");case 2:return e.abrupt("return",this.model.evaluateDataset(t,n));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"predict",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return null==this.model&&this.build(),this.model.predict(e,t)}},{key:"predictOnBatch",value:function(e){return null==this.model&&this.build(),this.model.predictOnBatch(e)}},{key:"compile",value:function(e){this.build(),this.model.compile(e),this.optimizer_=this.model.optimizer,this.isOptimizerOwned=this.model.isOptimizerOwned,this.loss=this.model.loss,this.metrics=this.model.metrics,this.metricsTensors=this.model.metricsTensors,this.metricsNames=this.model.metricsNames}},{key:"optimizer",get:function(){return null==this.model?void 0:this.model.optimizer},set:function(e){this.model.optimizer=e}},{key:"fit",value:function(){var e=(0,o.Z)(l().mark((function e(t,n){var r,a=arguments;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=a.length>2&&void 0!==a[2]?a[2]:{},this.built){e.next=3;break}throw new mG("The model needs to be compiled before being used.");case 3:return e.abrupt("return",this.model.fit(t,n,r));case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"fitDataset",value:function(){var e=(0,o.Z)(l().mark((function e(t,n){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.built){e.next=2;break}throw new mG("The model needs to be compiled before being used.");case 2:return e.abrupt("return",this.model.fitDataset(t,n));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"trainOnBatch",value:function(){var e=(0,o.Z)(l().mark((function e(t,n){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.model.trainOnBatch(t,n));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"stopTraining",get:function(){if(null==this.model)throw new vG("Cannot get the stopTraining property of a sequential model before it is compiled.");return this.model.stopTraining},set:function(e){if(null==this.model)throw new vG("Cannot set the stopTraining property of a sequential model before it is compiled.");this.model.stopTraining=e}},{key:"getConfig",value:function(){var e,t=[],n=(0,Et.Z)(this.layers);try{for(n.s();!(e=n.n()).done;){var r=e.value,a={};a.className=r.getClassName(),a.config=r.getConfig(),t.push(a)}}catch(o){n.e(o)}finally{n.f()}return{name:this.name,layers:t}}}],[{key:"fromConfig",value:function(e,t){var r,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o={};if(t instanceof Array){if(null==t[0].className||"Merge"===t[0].className)throw new vG("Legacy serialization format not supported yet.");r=t}else EV.util.assert(null!=t.layers,(function(){return"When the config data for a Sequential model is not an Array, it must be an Object that contains the 'layers' field."})),r=t.layers,delete t.layers,o=t;var i=new e(o);if(!(i instanceof n))throw new gG("Sequential.fromConfig called on non-Sequential input: ".concat(i));var s,u=(0,Et.Z)(r);try{for(u.s();!(s=u.n()).done;){var c=s.value,l=void 0,f=RX(c,l,a);a&&f.setFastWeightInitDuringBuild(!0),i.add(f)}}catch(d){u.e(d)}finally{u.f()}return i}}]),n}(t$);r$.className="Sequential",EV.serialization.registerClass(r$);var a$=function(e){(0,nu.Z)(n,e);var t=(0,ru.Z)(n);function n(){return(0,f.Z)(this,n),t.apply(this,arguments)}return(0,d.Z)(n,[{key:"getConfig",value:function(){return{}}}]),n}(EV.serialization.Serializable),o$=function(e){(0,nu.Z)(n,e);var t=(0,ru.Z)(n);function n(){return(0,f.Z)(this,n),t.apply(this,arguments)}return(0,d.Z)(n,[{key:"apply",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return TK(e,t)}}]),n}(a$);o$.className="elu",EV.serialization.registerClass(o$);var i$=function(e){(0,nu.Z)(n,e);var t=(0,ru.Z)(n);function n(){return(0,f.Z)(this,n),t.apply(this,arguments)}return(0,d.Z)(n,[{key:"apply",value:function(e){return EV.selu(e)}}]),n}(a$);i$.className="selu",EV.serialization.registerClass(i$);var s$=function(e){(0,nu.Z)(n,e);var t=(0,ru.Z)(n);function n(){return(0,f.Z)(this,n),t.apply(this,arguments)}return(0,d.Z)(n,[{key:"apply",value:function(e){return EV.relu(e)}}]),n}(a$);s$.className="relu",EV.serialization.registerClass(s$);var u$=function(e){(0,nu.Z)(n,e);var t=(0,ru.Z)(n);function n(){return(0,f.Z)(this,n),t.apply(this,arguments)}return(0,d.Z)(n,[{key:"apply",value:function(e){return(0,EV.tidy)((function(){return EV.minimum(6,EV.relu(e))}))}}]),n}(a$);u$.className="relu6",EV.serialization.registerClass(u$);var c$=function(e){(0,nu.Z)(n,e);var t=(0,ru.Z)(n);function n(){return(0,f.Z)(this,n),t.apply(this,arguments)}return(0,d.Z)(n,[{key:"apply",value:function(e){return e}}]),n}(a$);c$.className="linear",EV.serialization.registerClass(c$);var l$=function(e){(0,nu.Z)(n,e);var t=(0,ru.Z)(n);function n(){return(0,f.Z)(this,n),t.apply(this,arguments)}return(0,d.Z)(n,[{key:"apply",value:function(e){return EV.sigmoid(e)}}]),n}(a$);l$.className="sigmoid",EV.serialization.registerClass(l$);var f$=function(e){(0,nu.Z)(n,e);var t=(0,ru.Z)(n);function n(){return(0,f.Z)(this,n),t.apply(this,arguments)}return(0,d.Z)(n,[{key:"apply",value:function(e){return function(e){return(0,EV.tidy)((function(){var t=EV.add(.5,EV.mul(.2,e));return EV.clipByValue(t,0,1)}))}(e)}}]),n}(a$);f$.className="hardSigmoid",EV.serialization.registerClass(f$);var d$=function(e){(0,nu.Z)(n,e);var t=(0,ru.Z)(n);function n(){return(0,f.Z)(this,n),t.apply(this,arguments)}return(0,d.Z)(n,[{key:"apply",value:function(e){return EV.softplus(e)}}]),n}(a$);d$.className="softplus",EV.serialization.registerClass(d$);var p$=function(e){(0,nu.Z)(n,e);var t=(0,ru.Z)(n);function n(){return(0,f.Z)(this,n),t.apply(this,arguments)}return(0,d.Z)(n,[{key:"apply",value:function(e){return function(e){return(0,EV.tidy)((function(){return EV.div(e,EV.add(EV.abs(e),1))}))}(e)}}]),n}(a$);p$.className="softsign",EV.serialization.registerClass(p$);var h$=function(e){(0,nu.Z)(n,e);var t=(0,ru.Z)(n);function n(){return(0,f.Z)(this,n),t.apply(this,arguments)}return(0,d.Z)(n,[{key:"apply",value:function(e){return EV.tanh(e)}}]),n}(a$);h$.className="tanh",EV.serialization.registerClass(h$);var m$=function(e){(0,nu.Z)(n,e);var t=(0,ru.Z)(n);function n(){return(0,f.Z)(this,n),t.apply(this,arguments)}return(0,d.Z)(n,[{key:"apply",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;return EV.softmax(e,t)}}]),n}(a$);m$.className="softmax",EV.serialization.registerClass(m$);var v$=function(e){(0,nu.Z)(n,e);var t=(0,ru.Z)(n);function n(){return(0,f.Z)(this,n),t.apply(this,arguments)}return(0,d.Z)(n,[{key:"apply",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;return EV.logSoftmax(e,t)}}]),n}(a$);v$.className="logSoftmax",EV.serialization.registerClass(v$);var g$=function(e){(0,nu.Z)(n,e);var t=(0,ru.Z)(n);function n(){return(0,f.Z)(this,n),t.apply(this,arguments)}return(0,d.Z)(n,[{key:"apply",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return(0,EV.tidy)((function(){return EV.mul(EV.sigmoid(EV.mul(e,t)),e)}))}}]),n}(a$);g$.className="swish",EV.serialization.registerClass(g$);var y$=function(e){(0,nu.Z)(n,e);var t=(0,ru.Z)(n);function n(){return(0,f.Z)(this,n),t.apply(this,arguments)}return(0,d.Z)(n,[{key:"apply",value:function(e){return(0,EV.tidy)((function(){return EV.mul(e,EV.tanh(EV.softplus(e)))}))}}]),n}(a$);function b$(e){return e.getClassName()}function x$(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return IG(e,EV.serialization.SerializationMap.getMap().classNameMap,t,"activation")}function w$(e){if(null==e){var t={className:"linear",config:{}};return x$(t)}if("string"===typeof e){var n={};return n.className=e,n.config={},x$(n)}return e instanceof a$?e:x$(e)}function k$(e){if(null!=e&&"object"!==typeof e)throw new Error("Argument to L1L2 regularizer's constructor is expected to be an "+"object, but received: ".concat(e))}y$.className="mish",EV.serialization.registerClass(y$);var S$=function(e){(0,nu.Z)(n,e);var t=(0,ru.Z)(n);function n(){return(0,f.Z)(this,n),t.apply(this,arguments)}return(0,d.Z)(n)}(EV.serialization.Serializable),_$=function(e){(0,nu.Z)(n,e);var t=(0,ru.Z)(n);function n(e){var r;return(0,f.Z)(this,n),r=t.call(this),k$(e),r.l1=null==e||null==e.l1?.01:e.l1,r.l2=null==e||null==e.l2?.01:e.l2,r.hasL1=0!==r.l1,r.hasL2=0!==r.l2,r}return(0,d.Z)(n,[{key:"apply",value:function(e){var t=this;return(0,EV.tidy)((function(){var n=(0,EV.zeros)([1]);return t.hasL1&&(n=(0,EV.add)(n,(0,EV.sum)(EV.mul(t.l1,(0,EV.abs)(e))))),t.hasL2&&(n=(0,EV.add)(n,(0,EV.sum)(EV.mul(t.l2,NK(e))))),EV.reshape(n,[])}))}},{key:"getConfig",value:function(){return{l1:this.l1,l2:this.l2}}}],[{key:"fromConfig",value:function(e,t){return new e({l1:t.l1,l2:t.l2})}}]),n}(S$);_$.className="L1L2",EV.serialization.registerClass(_$);var N$={l1l2:"L1L2"};function E$(e){return CG(e)}function C$(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return IG(e,EV.serialization.SerializationMap.getMap().classNameMap,t,"regularizer")}function T$(e){return null==e?null:"string"===typeof e?C$({className:e in N$?N$[e]:e,config:{}}):e instanceof S$?e:C$(e)}var I$=function(e){(0,nu.Z)(n,e);var t=(0,ru.Z)(n);function n(e){var r;return(0,f.Z)(this,n),(r=t.call(this,null==e?{}:e)).supportsMasking=!0,null!=e&&(r.maxValue=e.maxValue),r}return(0,d.Z)(n,[{key:"call",value:function(e,t){e=oX(e);var n=(0,EV.relu)(e);return null!=this.maxValue&&(n=(0,EV.clipByValue)(n,0,this.maxValue)),n}},{key:"computeOutputShape",value:function(e){return e}},{key:"getConfig",value:function(){var e={maxValue:this.maxValue},t=MX((0,pC.Z)(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(gX);I$.className="ReLU",EV.serialization.registerClass(I$);var O$=function(e){(0,nu.Z)(n,e);var t=(0,ru.Z)(n);function n(e){var r;return(0,f.Z)(this,n),(r=t.call(this,null==e?{}:e)).DEFAULT_ALPHA=.3,null==e&&(e={}),r.alpha=null==e.alpha?r.DEFAULT_ALPHA:e.alpha,r}return(0,d.Z)(n,[{key:"call",value:function(e,t){var n=oX(e);return(0,EV.leakyRelu)(n,this.alpha)}},{key:"computeOutputShape",value:function(e){return e}},{key:"getConfig",value:function(){var e={alpha:this.alpha},t=MX((0,pC.Z)(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(gX);O$.className="LeakyReLU",EV.serialization.registerClass(O$);var A$=function(e){(0,nu.Z)(n,e);var t=(0,ru.Z)(n);function n(e){var r;if((0,f.Z)(this,n),(r=t.call(this,null==e?{}:e)).DEFAULT_ALPHA_INITIALIZER="zeros",null==e&&(e={}),r.supportsMasking=!0,r.alphaInitializer=JK(e.alphaInitializer||r.DEFAULT_ALPHA_INITIALIZER),r.alphaRegularizer=T$(e.alphaRegularizer),r.alphaConstraint=GG(e.alphaConstraint),null==e.sharedAxes)r.sharedAxes=null;else if(Array.isArray(e.sharedAxes))r.sharedAxes=e.sharedAxes;else{if("number"!==typeof e.sharedAxes)throw new vG("Expected sharedAxes to be a number or an array of numbers, "+"but got ".concat(e.sharedAxes));r.sharedAxes=[e.sharedAxes]}return r}return(0,d.Z)(n,[{key:"build",value:function(e){var t=(e=iX(e)).slice(1);if(null!=this.sharedAxes){var n,r=(0,Et.Z)(this.sharedAxes);try{for(r.s();!(n=r.n()).done;){t[n.value-1]=1}}catch(i){r.e(i)}finally{r.f()}}this.alpha=this.addWeight("alpha",t,"float32",this.alphaInitializer,this.alphaRegularizer,!0,this.alphaConstraint);var a={};if(null!=this.sharedAxes)for(var o=1;o<e.length;++o)a[o]=e[o];this.inputSpec=[new dX({ndim:e.length,axes:a})],this.built=!0}},{key:"call",value:function(e,t){return e=oX(e),(0,EV.prelu)(e,this.alpha.read())}},{key:"getConfig",value:function(){var e={alphaInitializer:$K(this.alphaInitializer),alphaRegularizer:E$(this.alphaRegularizer),alphaConstraint:WG(this.alphaConstraint),sharedAxes:this.sharedAxes},t=MX((0,pC.Z)(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(gX);A$.className="PReLU",EV.serialization.registerClass(A$);var D$=function(e){(0,nu.Z)(n,e);var t=(0,ru.Z)(n);function n(e){var r;if((0,f.Z)(this,n),(r=t.call(this,null==e?{}:e)).DEFAULT_ALPHA=1,null==e&&(e={}),null!=e.alpha&&e.alpha!==r.DEFAULT_ALPHA)throw new gG("Non-default alpha value (".concat(e.alpha,") is not supported by the ")+"ELU layer yet.");return r.alpha=null==e.alpha?r.DEFAULT_ALPHA:e.alpha,r}return(0,d.Z)(n,[{key:"call",value:function(e,t){var n=oX(e);return(0,EV.elu)(n)}},{key:"computeOutputShape",value:function(e){return e}},{key:"getConfig",value:function(){var e={alpha:this.alpha},t=MX((0,pC.Z)(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(gX);D$.className="ELU",EV.serialization.registerClass(D$);var M$=function(e){(0,nu.Z)(n,e);var t=(0,ru.Z)(n);function n(e){var r;return(0,f.Z)(this,n),(r=t.call(this,null==e?{}:e)).DEFAULT_THETA=1,null==e&&(e={}),r.theta=null==e.theta?r.DEFAULT_THETA:e.theta,r}return(0,d.Z)(n,[{key:"call",value:function(e,t){var n=oX(e);return(0,EV.mul)(n,(0,EV.cast)((0,EV.greater)(n,this.theta),"float32"))}},{key:"computeOutputShape",value:function(e){return e}},{key:"getConfig",value:function(){var e={theta:this.theta},t=MX((0,pC.Z)(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(gX);M$.className="ThresholdedReLU",EV.serialization.registerClass(M$);var R$=function(e){(0,nu.Z)(n,e);var t=(0,ru.Z)(n);function n(e){var r;return(0,f.Z)(this,n),(r=t.call(this,null==e?{}:e)).DEFAULT_AXIS=1,null==e&&(e={}),r.softmax=(new m$).apply,r.axis=null==e.axis?r.DEFAULT_AXIS:e.axis,r}return(0,d.Z)(n,[{key:"call",value:function(e,t){var n=oX(e);return this.softmax(n,this.axis)}},{key:"computeOutputShape",value:function(e){return e}},{key:"getConfig",value:function(){var e={axis:this.axis},t=MX((0,pC.Z)(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(gX);function P$(e,t,n){if("number"===typeof e)return bG(e,t);if(e.length!==t)throw new vG("The ".concat(n," argument must be an integer or tuple of ").concat(t," integers.")+" Received: ".concat(e.length," elements."));for(var r=0;r<t;++r){var a=e[r];if((o=a)!==parseInt(o.toString(),10))throw new vG("The ".concat(n," argument must be an integer or tuple of ").concat(t)+" integers. Received: ".concat(JSON.stringify(e)," including a")+" non-integer number ".concat(a))}return e;var o}function j$(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1;if(null==e)return e;var o,i=t+(t-1)*(a-1);return o="same"===n?e:e-i+1,Math.floor((o+r-1)/r)}function F$(e,t,n,r){if(null==e)return null;if("valid"===r)e=e*t+fK([n-t,0]);else{if("same"!==r)throw new vG("Unsupport padding mode: ".concat(r,"."));e*=t}return e}function L$(e,t){return(0,EV.tidy)((function(){return eK(t),"channelsFirst"===t?EV.transpose(e,[0,2,3,1]):e}))}function B$(e,t){return(0,EV.tidy)((function(){return eK(t),"channelsFirst"===t?EV.transpose(e,[0,2,3,4,1]):e}))}function z$(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"valid",o=arguments.length>5?arguments[5]:void 0,i=arguments.length>6&&void 0!==arguments[6]?arguments[6]:1;return(0,EV.tidy)((function(){if(null==o&&(o="channelsLast"),eK(o),3!==e.shape.length)throw new vG("The input of a conv1dWithBias operation should be 3, but is "+"".concat(e.shape.length," instead."));if(3!==t.shape.length)throw new vG("The kernel for a conv1dWithBias operation should be 3, but is "+"".concat(t.shape.length," instead"));if(null!=n&&1!==n.shape.length)throw new vG("The bias for a conv1dWithBias operation should be 1, but is "+"".concat(t.shape.length," instead"));if("channelsFirst"===o&&(e=EV.transpose(e,[0,2,1])),"causal"===a)throw new gG("The support for CAUSAL padding mode in conv1dWithBias is not implemented yet.");var s=EV.conv1d(e,t,r,"same"===a?"same":"valid","NWC",i);return null!=n&&(s=CK(s,n)),s}))}function Z$(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[1,1],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"valid",o=arguments.length>5?arguments[5]:void 0,i=arguments.length>6?arguments[6]:void 0,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;return(0,EV.tidy)((function(){if(null==o&&(o="channelsLast"),eK(o),3!==e.rank&&4!==e.rank)throw new vG("conv2dWithBiasActivation expects input to be of rank 3 or 4, "+"but received ".concat(e.rank,"."));if(3!==t.rank&&4!==t.rank)throw new vG("conv2dWithBiasActivation expects kernel to be of rank 3 or 4, "+"but received ".concat(e.rank,"."));var u=L$(e,o);if("causal"===a)throw new gG("The support for CAUSAL padding mode in conv1dWithBias is not implemented yet.");return u=EV.fused.conv2d({x:u,filter:t,strides:r,pad:"same"===a?"same":"valid",dilations:i,dataFormat:"NHWC",bias:n,activation:s}),"channelsFirst"===o&&(u=EV.transpose(u,[0,3,1,2])),u}))}function V$(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[1,1,1],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"valid",o=arguments.length>5?arguments[5]:void 0,i=arguments.length>6?arguments[6]:void 0;return(0,EV.tidy)((function(){if(null==o&&(o="channelsLast"),eK(o),4!==e.rank&&5!==e.rank)throw new vG("conv3dWithBias expects input to be of rank 4 or 5, but received "+"".concat(e.rank,"."));if(4!==t.rank&&5!==t.rank)throw new vG("conv3dWithBias expects kernel to be of rank 4 or 5, but received "+"".concat(e.rank,"."));var s=B$(e,o);if("causal"===a)throw new gG("The support for CAUSAL padding mode in conv3dWithBias is not implemented yet.");return s=EV.conv3d(s,t,r,"same"===a?"same":"valid","NDHWC",i),null!=n&&(s=CK(s,n)),"channelsFirst"===o&&(s=EV.transpose(s,[0,4,1,2,3])),s}))}R$.className="Softmax",EV.serialization.registerClass(R$);var U$=function(e){(0,nu.Z)(n,e);var t=(0,ru.Z)(n);function n(e,r){var a;if((0,f.Z)(this,n),(a=t.call(this,r)).bias=null,a.DEFAULT_KERNEL_INITIALIZER="glorotNormal",a.DEFAULT_BIAS_INITIALIZER="zeros",n.verifyArgs(r),a.rank=e,PG(a.rank,"rank"),1!==a.rank&&2!==a.rank&&3!==a.rank)throw new gG("Convolution layer for rank other than 1, 2, or 3 (".concat(a.rank,") is ")+"not implemented yet.");if(a.kernelSize=P$(r.kernelSize,e,"kernelSize"),a.strides=P$(null==r.strides?1:r.strides,e,"strides"),a.padding=null==r.padding?"valid":r.padding,tK(a.padding),a.dataFormat=null==r.dataFormat?"channelsLast":r.dataFormat,eK(a.dataFormat),a.activation=w$(r.activation),a.useBias=null==r.useBias||r.useBias,a.biasInitializer=JK(r.biasInitializer||a.DEFAULT_BIAS_INITIALIZER),a.biasConstraint=GG(r.biasConstraint),a.biasRegularizer=T$(r.biasRegularizer),a.activityRegularizer=T$(r.activityRegularizer),a.dilationRate=P$(null==r.dilationRate?1:r.dilationRate,e,"dilationRate"),1===a.rank&&Array.isArray(a.dilationRate)&&1!==a.dilationRate.length)throw new vG("dilationRate must be a number or an array of a single number for 1D convolution, but received "+"".concat(JSON.stringify(a.dilationRate)));if(2===a.rank){if("number"===typeof a.dilationRate)a.dilationRate=[a.dilationRate,a.dilationRate];else if(2!==a.dilationRate.length)throw new vG("dilationRate must be a number or array of two numbers for 2D "+"convolution, but received ".concat(JSON.stringify(a.dilationRate)))}else if(3===a.rank)if("number"===typeof a.dilationRate)a.dilationRate=[a.dilationRate,a.dilationRate,a.dilationRate];else if(3!==a.dilationRate.length)throw new vG("dilationRate must be a number or array of three numbers for 3D "+"convolution, but received ".concat(JSON.stringify(a.dilationRate)));return a}return(0,d.Z)(n,[{key:"getConfig",value:function(){var e={kernelSize:this.kernelSize,strides:this.strides,padding:this.padding,dataFormat:this.dataFormat,dilationRate:this.dilationRate,activation:b$(this.activation),useBias:this.useBias,biasInitializer:$K(this.biasInitializer),biasRegularizer:E$(this.biasRegularizer),activityRegularizer:E$(this.activityRegularizer),biasConstraint:WG(this.biasConstraint)},t=MX((0,pC.Z)(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}],[{key:"verifyArgs",value:function(e){if(xG("kernelSize"in e,"required key 'kernelSize' not in config"),"number"!==typeof e.kernelSize&&!RG(e.kernelSize,"number",1,3))throw new vG("BaseConv expects config.kernelSize to be number or number[] with "+"length 1, 2, or 3, but received ".concat(JSON.stringify(e.kernelSize),"."))}}]),n}(gX),q$=function(e){(0,nu.Z)(n,e);var t=(0,ru.Z)(n);function n(e,r){var a;return(0,f.Z)(this,n),(a=t.call(this,e,r)).kernel=null,n.verifyArgs(r),a.filters=r.filters,PG(a.filters,"filters"),a.kernelInitializer=JK(r.kernelInitializer||a.DEFAULT_KERNEL_INITIALIZER),a.kernelConstraint=GG(r.kernelConstraint),a.kernelRegularizer=T$(r.kernelRegularizer),a}return(0,d.Z)(n,[{key:"build",value:function(e){e=iX(e);var t="channelsFirst"===this.dataFormat?1:e.length-1;if(null==e[t])throw new vG("The channel dimension of the input should be defined. "+"Found ".concat(e[t]));var n=e[t],r=this.kernelSize.concat([n,this.filters]);this.kernel=this.addWeight("kernel",r,null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[{ndim:this.rank+2,axes:i({},t,n)}],this.built=!0}},{key:"call",value:function(e,t){var n=this;return(0,EV.tidy)((function(){var t;e=oX(e);var r=null==n.bias?null:n.bias.read(),a=FG(n.activation.getClassName());if(null!=a&&2===n.rank)t=Z$(e,n.kernel.read(),r,n.strides,n.padding,n.dataFormat,n.dilationRate,a);else{if(1===n.rank)t=z$(e,n.kernel.read(),r,n.strides[0],n.padding,n.dataFormat,n.dilationRate[0]);else if(2===n.rank)t=Z$(e,n.kernel.read(),r,n.strides,n.padding,n.dataFormat,n.dilationRate);else{if(3!==n.rank)throw new gG("convolutions greater than 3D are not implemented yet.");t=V$(e,n.kernel.read(),r,n.strides,n.padding,n.dataFormat,n.dilationRate)}null!=n.activation&&(t=n.activation.apply(t))}return t}))}},{key:"computeOutputShape",value:function(e){e=iX(e);for(var t=[],n="channelsLast"===this.dataFormat?e.slice(1,e.length-1):e.slice(2),r=0;r<n.length;++r){var a=j$(n[r],this.kernelSize[r],this.padding,this.strides[r],"number"===typeof this.dilationRate?this.dilationRate:this.dilationRate[r]);t.push(a)}var o=[e[0]];return"channelsLast"===this.dataFormat?(o=o.concat(t)).push(this.filters):(o.push(this.filters),o=o.concat(t)),o}},{key:"getConfig",value:function(){var e={filters:this.filters,kernelInitializer:$K(this.kernelInitializer),kernelRegularizer:E$(this.kernelRegularizer),kernelConstraint:WG(this.kernelConstraint)},t=MX((0,pC.Z)(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}],[{key:"verifyArgs",value:function(e){if(!("filters"in e)||"number"!==typeof e.filters||e.filters<1)throw new vG("Convolution layer expected config.filters to be a 'number' > 0 "+"but got ".concat(JSON.stringify(e.filters)))}}]),n}(U$),W$=function(e){(0,nu.Z)(n,e);var t=(0,ru.Z)(n);function n(e){var r;return(0,f.Z)(this,n),r=t.call(this,2,e),n.verifyArgs(e),r}return(0,d.Z)(n,[{key:"getConfig",value:function(){var e=MX((0,pC.Z)(n.prototype),"getConfig",this).call(this);return delete e.rank,e}}],[{key:"verifyArgs",value:function(e){if("number"!==typeof e.kernelSize&&!RG(e.kernelSize,"number",1,2))throw new vG("Conv2D expects config.kernelSize to be number or number[] with "+"length 1 or 2, but received ".concat(JSON.stringify(e.kernelSize),"."))}}]),n}(q$);W$.className="Conv2D",EV.serialization.registerClass(W$);var H$=function(e){(0,nu.Z)(n,e);var t=(0,ru.Z)(n);function n(e){var r;return(0,f.Z)(this,n),r=t.call(this,3,e),n.verifyArgs(e),r}return(0,d.Z)(n,[{key:"getConfig",value:function(){var e=MX((0,pC.Z)(n.prototype),"getConfig",this).call(this);return delete e.rank,e}}],[{key:"verifyArgs",value:function(e){if("number"!==typeof e.kernelSize&&(!Array.isArray(e.kernelSize)||1!==e.kernelSize.length&&3!==e.kernelSize.length))throw new vG("Conv3D expects config.kernelSize to be number or"+" [number, number, number], but received ".concat(JSON.stringify(e.kernelSize),"."))}}]),n}(q$);H$.className="Conv3D",EV.serialization.registerClass(H$);var G$=function(e){(0,nu.Z)(n,e);var t=(0,ru.Z)(n);function n(e){var r;if((0,f.Z)(this,n),(r=t.call(this,e)).inputSpec=[new dX({ndim:4})],"same"!==r.padding&&"valid"!==r.padding)throw new vG("Conv2DTranspose currently supports only padding modes 'same' "+"and 'valid', but received padding mode ".concat(r.padding));return r}return(0,d.Z)(n,[{key:"build",value:function(e){if(4!==(e=iX(e)).length)throw new vG("Input should have rank 4; Received input shape: "+JSON.stringify(e));var t="channelsFirst"===this.dataFormat?1:e.length-1;if(null==e[t])throw new vG("The channel dimension of the inputs should be defined. Found `None`.");var n=e[t],r=this.kernelSize.concat([this.filters,n]);this.kernel=this.addWeight("kernel",r,"float32",this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[new dX({ndim:4,axes:i({},t,n)})],this.built=!0}},{key:"call",value:function(e,t){var n=this;return EV.tidy((function(){var t=oX(e);if(4!==t.shape.length)throw new vG("Conv2DTranspose.call() expects input tensor to be rank-4, but "+"received a tensor of rank-".concat(t.shape.length));var r,a,o=t.shape,i=o[0];"channelsFirst"===n.dataFormat?(r=2,a=3):(r=1,a=2);var s=o[r],u=o[a],c=n.kernelSize[0],l=n.kernelSize[1],f=n.strides[0],d=n.strides[1],p=[i,F$(s,f,c,n.padding),F$(u,d,l,n.padding),n.filters];"channelsLast"!==n.dataFormat&&(t=EV.transpose(t,[0,2,3,1]));var h=EV.conv2dTranspose(t,n.kernel.read(),p,n.strides,n.padding);return"channelsLast"!==n.dataFormat&&(h=EV.transpose(h,[0,3,1,2])),null!=n.bias&&(h=CK(h,n.bias.read(),n.dataFormat)),null!=n.activation&&(h=n.activation.apply(h)),h}))}},{key:"computeOutputShape",value:function(e){var t,n,r,a=(e=iX(e)).slice();"channelsFirst"===this.dataFormat?(t=1,n=2,r=3):(t=3,n=1,r=2);var o=this.kernelSize[0],i=this.kernelSize[1],s=this.strides[0],u=this.strides[1];return a[t]=this.filters,a[n]=F$(a[n],s,o,this.padding),a[r]=F$(a[r],u,i,this.padding),a}},{key:"getConfig",value:function(){var e=MX((0,pC.Z)(n.prototype),"getConfig",this).call(this);return delete e.dilationRate,e}}]),n}(W$);G$.className="Conv2DTranspose",EV.serialization.registerClass(G$);var K$=function(e){(0,nu.Z)(n,e);var t=(0,ru.Z)(n);function n(e){var r;if((0,f.Z)(this,n),(r=t.call(this,e)).inputSpec=[new dX({ndim:5})],"same"!==r.padding&&"valid"!==r.padding)throw new vG("Conv3DTranspose currently supports only padding modes 'same' "+"and 'valid', but received padding mode ".concat(r.padding));return r}return(0,d.Z)(n,[{key:"build",value:function(e){if(5!==(e=iX(e)).length)throw new vG("Input should have rank 5; Received input shape: "+JSON.stringify(e));var t="channelsFirst"===this.dataFormat?1:e.length-1;if(null==e[t])throw new vG("The channel dimension of the inputs should be defined. Found `None`.");var n=e[t],r=this.kernelSize.concat([this.filters,n]);this.kernel=this.addWeight("kernel",r,"float32",this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[new dX({ndim:5,axes:i({},t,n)})],this.built=!0}},{key:"call",value:function(e,t){var n=this;return EV.tidy((function(){var t=oX(e);if(5!==t.shape.length)throw new vG("Conv3DTranspose.call() expects input tensor to be rank-4, but "+"received a tensor of rank-".concat(t.shape.length));var r,a,o,i=t.shape,s=i[0];"channelsFirst"===n.dataFormat?(o=2,r=3,a=4):(o=1,r=2,a=3);var u=i[o],c=i[r],l=i[a],f=n.kernelSize[0],d=n.kernelSize[1],p=n.kernelSize[2],h=n.strides[0],m=n.strides[1],v=n.strides[2],g=[s,F$(u,h,f,n.padding),F$(c,m,d,n.padding),F$(l,v,p,n.padding),n.filters];"channelsLast"!==n.dataFormat&&(t=EV.transpose(t,[0,2,3,4,1]));var y=EV.conv3dTranspose(t,n.kernel.read(),g,n.strides,n.padding);return"channelsLast"!==n.dataFormat&&(y=EV.transpose(y,[0,4,1,2,3])),null!==n.bias&&(y=CK(y,n.bias.read(),n.dataFormat)),null!==n.activation&&(y=n.activation.apply(y)),y}))}},{key:"computeOutputShape",value:function(e){var t,n,r,a,o=(e=iX(e)).slice();"channelsFirst"===this.dataFormat?(t=1,n=2,r=3,a=4):(t=4,n=1,r=2,a=3);var i=this.kernelSize[0],s=this.kernelSize[1],u=this.kernelSize[2],c=this.strides[0],l=this.strides[1],f=this.strides[2];return o[t]=this.filters,o[n]=F$(o[n],c,i,this.padding),o[r]=F$(o[r],l,s,this.padding),o[a]=F$(o[a],f,u,this.padding),o}},{key:"getConfig",value:function(){var e=MX((0,pC.Z)(n.prototype),"getConfig",this).call(this);return delete e.dilationRate,e}}]),n}(H$);K$.className="Conv3DTranspose",EV.serialization.registerClass(K$);var X$=function(e){(0,nu.Z)(n,e);var t=(0,ru.Z)(n);function n(e,r){var a;if((0,f.Z)(this,n),(a=t.call(this,e,r)).DEFAULT_DEPTHWISE_INITIALIZER="glorotUniform",a.DEFAULT_POINTWISE_INITIALIZER="glorotUniform",a.depthwiseKernel=null,a.pointwiseKernel=null,null==r.filters)throw new vG("The `filters` configuration field is required by SeparableConv, but is unspecified.");if(null!=r.kernelInitializer||null!=r.kernelRegularizer||null!=r.kernelConstraint)throw new vG("Fields kernelInitializer, kernelRegularizer and kernelConstraint are invalid for SeparableConv2D. Use depthwiseInitializer, depthwiseRegularizer, depthwiseConstraint, pointwiseInitializer, pointwiseRegularizer and pointwiseConstraint instead.");if(null!=r.padding&&"same"!==r.padding&&"valid"!==r.padding)throw new vG("SeparableConv".concat(a.rank,"D supports only padding modes: ")+"'same' and 'valid', but received ".concat(JSON.stringify(r.padding)));return a.depthMultiplier=null==r.depthMultiplier?1:r.depthMultiplier,a.depthwiseInitializer=JK(r.depthwiseInitializer||a.DEFAULT_DEPTHWISE_INITIALIZER),a.depthwiseRegularizer=T$(r.depthwiseRegularizer),a.depthwiseConstraint=GG(r.depthwiseConstraint),a.pointwiseInitializer=JK(r.depthwiseInitializer||a.DEFAULT_POINTWISE_INITIALIZER),a.pointwiseRegularizer=T$(r.pointwiseRegularizer),a.pointwiseConstraint=GG(r.pointwiseConstraint),a}return(0,d.Z)(n,[{key:"build",value:function(e){if((e=iX(e)).length<this.rank+2)throw new vG("Inputs to SeparableConv".concat(this.rank,"D should have rank ")+"".concat(this.rank+2,", but received input shape: ")+"".concat(JSON.stringify(e)));var t="channelsFirst"===this.dataFormat?1:e.length-1;if(null==e[t]||e[t]<0)throw new vG("The channel dimension of the inputs should be defined, "+"but found ".concat(JSON.stringify(e[t])));for(var n=e[t],r=this.kernelSize.concat([n,this.depthMultiplier]),a=[],o=0;o<this.rank;++o)a.push(1);a.push(n*this.depthMultiplier,this.filters);var s=!0;this.depthwiseKernel=this.addWeight("depthwise_kernel",r,"float32",this.depthwiseInitializer,this.depthwiseRegularizer,s,this.depthwiseConstraint),this.pointwiseKernel=this.addWeight("pointwise_kernel",a,"float32",this.pointwiseInitializer,this.pointwiseRegularizer,s,this.pointwiseConstraint),this.useBias?this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,s,this.biasConstraint):this.bias=null,this.inputSpec=[new dX({ndim:this.rank+2,axes:i({},t,n)})],this.built=!0}},{key:"call",value:function(e,t){var n=this;return(0,EV.tidy)((function(){var t;if(e=oX(e),1===n.rank)throw new gG("1D separable convolution is not implemented yet.");return 2===n.rank&&("channelsFirst"===n.dataFormat&&(e=EV.transpose(e,[0,2,3,1])),t=EV.separableConv2d(e,n.depthwiseKernel.read(),n.pointwiseKernel.read(),n.strides,n.padding,n.dilationRate,"NHWC")),n.useBias&&(t=CK(t,n.bias.read(),n.dataFormat)),null!=n.activation&&(t=n.activation.apply(t)),"channelsFirst"===n.dataFormat&&(t=EV.transpose(t,[0,3,1,2])),t}))}},{key:"getConfig",value:function(){var e=MX((0,pC.Z)(n.prototype),"getConfig",this).call(this);return delete e.rank,delete e.kernelInitializer,delete e.kernelRegularizer,delete e.kernelConstraint,e.depthwiseInitializer=$K(this.depthwiseInitializer),e.pointwiseInitializer=$K(this.pointwiseInitializer),e.depthwiseRegularizer=E$(this.depthwiseRegularizer),e.pointwiseRegularizer=E$(this.pointwiseRegularizer),e.depthwiseConstraint=WG(this.depthwiseConstraint),e.pointwiseConstraint=WG(this.pointwiseConstraint),e}}]),n}(q$);X$.className="SeparableConv";var Y$=function(e){(0,nu.Z)(n,e);var t=(0,ru.Z)(n);function n(e){return(0,f.Z)(this,n),t.call(this,2,e)}return(0,d.Z)(n)}(X$);Y$.className="SeparableConv2D",EV.serialization.registerClass(Y$);var $$=function(e){(0,nu.Z)(n,e);var t=(0,ru.Z)(n);function n(e){var r;return(0,f.Z)(this,n),r=t.call(this,1,e),n.verifyArgs(e),r.inputSpec=[{ndim:3}],r}return(0,d.Z)(n,[{key:"getConfig",value:function(){var e=MX((0,pC.Z)(n.prototype),"getConfig",this).call(this);return delete e.rank,delete e.dataFormat,e}}],[{key:"verifyArgs",value:function(e){if("number"!==typeof e.kernelSize&&!RG(e.kernelSize,"number",1,1))throw new vG("Conv1D expects config.kernelSize to be number or number[] with "+"length 1, but received ".concat(JSON.stringify(e.kernelSize),"."))}}]),n}(q$);$$.className="Conv1D",EV.serialization.registerClass($$);var J$=function(e){(0,nu.Z)(n,e);var t=(0,ru.Z)(n);function n(e){var r;return(0,f.Z)(this,n),r=t.call(this,e),"number"===typeof e.cropping?r.cropping=[[e.cropping,e.cropping],[e.cropping,e.cropping]]:"number"===typeof e.cropping[0]?r.cropping=[[e.cropping[0],e.cropping[0]],[e.cropping[1],e.cropping[1]]]:r.cropping=e.cropping,r.dataFormat=void 0===e.dataFormat?"channelsLast":e.dataFormat,r.inputSpec=[{ndim:4}],r}return(0,d.Z)(n,[{key:"computeOutputShape",value:function(e){return"channelsFirst"===this.dataFormat?[e[0],e[1],e[2]-this.cropping[0][0]-this.cropping[0][1],e[3]-this.cropping[1][0]-this.cropping[1][1]]:[e[0],e[1]-this.cropping[0][0]-this.cropping[0][1],e[2]-this.cropping[1][0]-this.cropping[1][1],e[3]]}},{key:"call",value:function(e,t){var n=this;return(0,EV.tidy)((function(){if(e=oX(e),"channelsLast"===n.dataFormat){var t=yK(e,n.cropping[0][0],e.shape[1]-n.cropping[0][0]-n.cropping[0][1],2);return yK(t,n.cropping[1][0],e.shape[2]-n.cropping[1][1]-n.cropping[1][0],3)}var r=yK(e,n.cropping[0][0],e.shape[2]-n.cropping[0][0]-n.cropping[0][1],3);return yK(r,n.cropping[1][0],e.shape[3]-n.cropping[1][1]-n.cropping[1][0],4)}))}},{key:"getConfig",value:function(){var e={cropping:this.cropping,dataFormat:this.dataFormat},t=MX((0,pC.Z)(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(gX);J$.className="Cropping2D",EV.serialization.registerClass(J$);var Q$=function(e){(0,nu.Z)(n,e);var t=(0,ru.Z)(n);function n(e){var r,a;return(0,f.Z)(this,n),(r=t.call(this,e)).DEFAULT_SIZE=[2,2],r.inputSpec=[{ndim:4}],r.size=null==e.size?r.DEFAULT_SIZE:e.size,r.dataFormat=null==e.dataFormat?"channelsLast":e.dataFormat,eK(r.dataFormat),r.interpolation=null==e.interpolation?"nearest":e.interpolation,a=r.interpolation,MG(XG,"InterpolationFormat",a),r}return(0,d.Z)(n,[{key:"computeOutputShape",value:function(e){if("channelsFirst"===this.dataFormat){var t=null==e[2]?null:this.size[0]*e[2],n=null==e[3]?null:this.size[1]*e[3];return[e[0],e[1],t,n]}var r=null==e[1]?null:this.size[0]*e[1],a=null==e[2]?null:this.size[1]*e[2];return[e[0],r,a,e[3]]}},{key:"call",value:function(e,t){var n=this;return EV.tidy((function(){var t=oX(e),r=t.shape;if("channelsFirst"===n.dataFormat){t=EV.transpose(t,[0,2,3,1]);var a=n.size[0]*r[2],o=n.size[1]*r[3],i="nearest"===n.interpolation?EV.image.resizeNearestNeighbor(t,[a,o]):EV.image.resizeBilinear(t,[a,o]);return EV.transpose(i,[0,3,1,2])}var s=n.size[0]*r[1],u=n.size[1]*r[2];return"nearest"===n.interpolation?EV.image.resizeNearestNeighbor(t,[s,u]):EV.image.resizeBilinear(t,[s,u])}))}},{key:"getConfig",value:function(){var e={size:this.size,dataFormat:this.dataFormat},t=MX((0,pC.Z)(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(gX);Q$.className="UpSampling2D",EV.serialization.registerClass(Q$);var eJ=function(e){(0,nu.Z)(n,e);var t=(0,ru.Z)(n);function n(e){var r;return(0,f.Z)(this,n),(r=t.call(this,2,e)).depthwiseKernel=null,r.depthMultiplier=null==e.depthMultiplier?1:e.depthMultiplier,r.depthwiseInitializer=JK(e.depthwiseInitializer||r.DEFAULT_KERNEL_INITIALIZER),r.depthwiseConstraint=GG(e.depthwiseConstraint),r.depthwiseRegularizer=T$(e.depthwiseRegularizer),r}return(0,d.Z)(n,[{key:"build",value:function(e){if((e=iX(e)).length<4)throw new vG("Inputs to DepthwiseConv2D should have rank 4. "+"Received input shape: ".concat(JSON.stringify(e),"."));var t="channelsFirst"===this.dataFormat?1:3;if(null==e[t]||e[t]<0)throw new vG("The channel dimension of the inputs to DepthwiseConv2D should "+"be defined, but is not (".concat(e[t],")."));var n=e[t],r=[this.kernelSize[0],this.kernelSize[1],n,this.depthMultiplier];this.depthwiseKernel=this.addWeight("depthwise_kernel",r,null,this.depthwiseInitializer,this.depthwiseRegularizer,!0,this.depthwiseConstraint),this.useBias?this.bias=this.addWeight("bias",[n*this.depthMultiplier],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}},{key:"call",value:function(e,t){var n=this;return(0,EV.tidy)((function(){var t=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[1,1],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"valid",a=arguments.length>4?arguments[4]:void 0,o=arguments.length>5?arguments[5]:void 0;return(0,EV.tidy)((function(){null==a&&(a="channelsLast"),eK(a);var i=L$(e,a);if(4!==e.rank)throw new vG("Input for depthwiseConv2d is required to be 4-D, but is instead "+"".concat(e.rank,"-D"));if(4!==t.rank)throw new vG("depthwiseKernel is required to be 4-D, but is instead "+"".concat(t.rank,"-D"));return i=EV.depthwiseConv2d(i,t,n,"same"===r?"same":"valid","NHWC",o),"channelsFirst"===a&&(i=EV.transpose(i,[0,3,1,2])),i}))}(e=oX(e),n.depthwiseKernel.read(),n.strides,n.padding,n.dataFormat,null);return n.useBias&&(t=CK(t,n.bias.read(),n.dataFormat)),null!=n.activation&&(t=n.activation.apply(t)),t}))}},{key:"computeOutputShape",value:function(e){e=iX(e);var t="channelsFirst"===this.dataFormat?e[2]:e[1],n="channelsFirst"===this.dataFormat?e[3]:e[2],r="channelsFirst"===this.dataFormat?e[1]*this.depthMultiplier:e[3]*this.depthMultiplier,a=j$(t,this.kernelSize[0],this.padding,this.strides[0]),o=j$(n,this.kernelSize[1],this.padding,this.strides[1]);return"channelsFirst"===this.dataFormat?[e[0],r,a,o]:[e[0],a,o,r]}},{key:"getConfig",value:function(){var e=MX((0,pC.Z)(n.prototype),"getConfig",this).call(this);return e.depthMultiplier=this.depthMultiplier,e.depthwiseInitializer=$K(this.depthwiseInitializer),e.depthwiseRegularizer=E$(this.depthwiseRegularizer),e.depthwiseConstraint=WG(this.depthwiseRegularizer),e}}]),n}(U$);function tJ(e,t,n,r){if(Array.isArray(e)){if(null!=t||null!=n)throw new vG("When inputs is an array, neither initialState or constants should be provided");null!=r&&(n=e.slice(e.length-r,e.length),e=e.slice(0,e.length-r)),e.length>1&&(t=e.slice(1,e.length)),e=e[0]}function a(e){return null==e||Array.isArray(e)?e:[e]}return{inputs:e,initialState:t=a(t),constants:n=a(n)}}function nJ(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=arguments.length>4?arguments[4]:void 0,o=arguments.length>5?arguments[5]:void 0,i=arguments.length>6&&void 0!==arguments[6]&&arguments[6],s=arguments.length>7&&void 0!==arguments[7]&&arguments[7];return EV.tidy((function(){var u=t.shape.length;if(u<3)throw new vG("Input should be at least 3D, but is ".concat(u,"D."));var c=[1,0].concat(dK(2,u));if(t=EV.transpose(t,c),null!=o)throw new gG("The rnn() functoin of the deeplearn.js backend does not support constants yet.");i&&console.warn("Backend rnn(): the unroll = true option is not applicable to the imperative deeplearn.js backend."),null!=a&&((a=EV.cast(EV.cast(a,"bool"),"float32")).rank===u-1&&(a=EV.expandDims(a,-1)),a=EV.transpose(a,c)),r&&(t=EV.reverse(t,0),null!=a&&(a=EV.reverse(a,0)));var l,f,d=[],p=n,h=t.shape[0],m=EV.unstack(t);null!=a&&(f=EV.unstack(a));for(var v,g=function(t){var n=m[t],r=EV.tidy((function(){return e(n,p)}));if(null==a)l=r[0],p=r[1];else{var o=EV.tidy((function(){var e=f[t],n=EV.sub(EV.onesLike(e),e),a=EV.add(EV.mul(r[0],e),EV.mul(p[0],n)),o=p.map((function(t,a){return EV.add(EV.mul(r[1][a],e),EV.mul(t,n))}));return{output:a,newStates:o}}));l=o.output,p=o.newStates}s&&d.push(l)},y=0;y<h;++y)g(y);if(s){v=EV.stack(d,1)}return[l,v,p]}))}eJ.className="DepthwiseConv2D",EV.serialization.registerClass(eJ);var rJ=function(e){(0,nu.Z)(n,e);var t=(0,ru.Z)(n);function n(e){var r,a;if((0,f.Z)(this,n),r=t.call(this,e),null==e.cell)throw new vG("cell property is missing for the constructor of RNN.");if(null==(a=Array.isArray(e.cell)?new fJ({cells:e.cell}):e.cell).stateSize)throw new vG("The RNN cell should have an attribute `stateSize` (tuple of integers, one integer per RNN state).");return r.cell=a,r.returnSequences=null!=e.returnSequences&&e.returnSequences,r.returnState=null!=e.returnState&&e.returnState,r.goBackwards=null!=e.goBackwards&&e.goBackwards,r._stateful=null!=e.stateful&&e.stateful,r.unroll=null!=e.unroll&&e.unroll,r.supportsMasking=!0,r.inputSpec=[new dX({ndim:3})],r.stateSpec=null,r.states_=null,r.numConstants=null,r.keptStates=[],r}return(0,d.Z)(n,[{key:"getStates",value:function(){return null==this.states_?dK(0,Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1).map((function(e){return null})):this.states_}},{key:"setStates",value:function(e){this.states_=e}},{key:"computeOutputShape",value:function(e){rX(e)&&(e=e[0]),e=e;var t=this.cell.stateSize;Array.isArray(t)||(t=[t]);var n,r=t[0];if(n=this.returnSequences?[e[0],e[1],r]:[e[0],r],this.returnState){var a,o=[],i=(0,Et.Z)(t);try{for(i.s();!(a=i.n()).done;){var s=a.value;o.push([e[0],s])}}catch(u){i.e(u)}finally{i.f()}return[n].concat(o)}return n}},{key:"computeMask",value:function(e,t){var n=this;return EV.tidy((function(){Array.isArray(t)&&(t=t[0]);var e=n.returnSequences?t:null;if(n.returnState){var r=n.states.map((function(e){return null}));return[e].concat(r)}return e}))}},{key:"states",get:function(){if(null==this.states_){for(var e=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1,t=[],n=0;n<e;++n)t.push(null);return t}return this.states_},set:function(e){this.states_=e}},{key:"build",value:function(e){if(null!=this.numConstants)throw new gG("Constants support is not implemented in RNN yet.");rX(e)&&(e=e[0]),e=e;var t=this.stateful?e[0]:null,n=e.slice(2);this.inputSpec[0]=new dX({shape:[t,null].concat((0,r.Z)(n))});var a,o=[e[0]].concat(e.slice(2));if(this.cell.build(o),a=Array.isArray(this.cell.stateSize)?this.cell.stateSize:[this.cell.stateSize],null!=this.stateSpec){if(!EV.util.arraysEqual(this.stateSpec.map((function(e){return e.shape[e.shape.length-1]})),a))throw new vG("An initialState was passed that is not compatible with "+"cell.stateSize. Received stateSpec=".concat(this.stateSpec,"; ")+"However cell.stateSize is ".concat(this.cell.stateSize))}else this.stateSpec=a.map((function(e){return new dX({shape:[null,e]})}));this.stateful&&this.resetStates()}},{key:"resetStates",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];(0,EV.tidy)((function(){if(!t.stateful)throw new hG("Cannot call resetStates() on an RNN Layer that is not stateful.");var r=t.inputSpec[0].shape[0];if(null==r)throw new vG("If an RNN is stateful, it needs to know its batch size. Specify the batch size of your input tensors: \n- If using a Sequential model, specify the batch size by passing a `batchInputShape` option to your first layer.\n- If using the functional API, specify the batch size by passing a `batchShape` option to your Input layer.");if(null==t.states_)Array.isArray(t.cell.stateSize)?t.states_=t.cell.stateSize.map((function(e){return EV.zeros([r,e])})):t.states_=[EV.zeros([r,t.cell.stateSize])];else if(null==e)EV.dispose(t.states_),null!=t.keptStates&&(EV.dispose(t.keptStates),t.keptStates=[]),Array.isArray(t.cell.stateSize)?t.states_=t.cell.stateSize.map((function(e){return EV.zeros([r,e])})):t.states_[0]=EV.zeros([r,t.cell.stateSize]);else{if(Array.isArray(e)||(e=[e]),e.length!==t.states_.length)throw new vG("Layer ".concat(t.name," expects ").concat(t.states_.length," state(s), ")+"but it received ".concat(e.length," state value(s). Input ")+"received: ".concat(e));!0===n?t.keptStates.push(t.states_.slice()):EV.dispose(t.states_);for(var a=0;a<t.states_.length;++a){var o=e[a],i=Array.isArray(t.cell.stateSize)?t.cell.stateSize[a]:t.cell.stateSize,s=[r,i];if(!EV.util.arraysEqual(o.shape,s))throw new vG("State ".concat(a," is incompatible with layer ").concat(t.name,": ")+"expected shape=".concat(s,", received shape=").concat(o.shape));t.states_[a]=o}}t.states_=t.states_.map((function(e){return EV.keep(e.clone())}))}))}},{key:"apply",value:function(e,t){var r=null==t?null:t.initialState,a=null==t?null:t.constants;null==t&&(t={});var o=tJ(e,r,a,this.numConstants);e=o.inputs,r=o.initialState,a=o.constants;var i=[],s=[];if(null!=r){t.initialState=r,i=i.concat(r),this.stateSpec=[];var u,c=(0,Et.Z)(r);try{for(c.s();!(u=c.n()).done;){var l=u.value;this.stateSpec.push(new dX({shape:l.shape}))}}catch(m){c.e(m)}finally{c.f()}s=s.concat(this.stateSpec)}if(null!=a&&(t.constants=a,i=i.concat(a),this.numConstants=a.length),i[0]instanceof pX){var f=[e].concat(i),d=this.inputSpec.concat(s),p=this.inputSpec;this.inputSpec=d;var h=MX((0,pC.Z)(n.prototype),"apply",this).call(this,f,t);return this.inputSpec=p,h}return MX((0,pC.Z)(n.prototype),"apply",this).call(this,e,t)}},{key:"call",value:function(e,t){var n=this;return(0,EV.tidy)((function(){var r=null==t?null:t.mask,a=null==t?null:t.training,o=null==t?null:t.initialState;e=oX(e),null==o&&(o=n.stateful?n.states_:n.getInitialState(e));var i=Array.isArray(n.cell.stateSize)?n.cell.stateSize.length:1;if(o.length!==i)throw new vG("RNN Layer has ".concat(i," state(s) but was passed ")+"".concat(o.length," initial state(s)."));n.unroll&&console.warn("Ignoring unroll = true for RNN layer, due to imperative backend.");var s={training:a},u=nJ((function(e,t){var r=n.cell.call([e].concat(t),s);return[r[0],r.slice(1)]}),e,o,n.goBackwards,r,null,n.unroll,n.returnSequences),c=u[0],l=u[1],f=u[2];n.stateful&&n.resetStates(f,a);var d=n.returnSequences?l:c;return n.returnState?[d].concat(f):d}))}},{key:"getInitialState",value:function(e){var t=this;return(0,EV.tidy)((function(){var n=EV.zeros(e.shape);return n=hK(n=EV.sum(n,[1,2])),Array.isArray(t.cell.stateSize)?t.cell.stateSize.map((function(e){return e>1?wK(n,[1,e]):n})):t.cell.stateSize>1?[wK(n,[1,t.cell.stateSize])]:[n]}))}},{key:"trainableWeights",get:function(){return this.trainable?this.cell.trainableWeights:[]}},{key:"nonTrainableWeights",get:function(){return this.trainable?this.cell.nonTrainableWeights:this.cell.weights}},{key:"setFastWeightInitDuringBuild",value:function(e){MX((0,pC.Z)(n.prototype),"setFastWeightInitDuringBuild",this).call(this,e),null!=this.cell&&this.cell.setFastWeightInitDuringBuild(e)}},{key:"getConfig",value:function(){var e=MX((0,pC.Z)(n.prototype),"getConfig",this).call(this),t={returnSequences:this.returnSequences,returnState:this.returnState,goBackwards:this.goBackwards,stateful:this.stateful,unroll:this.unroll};null!=this.numConstants&&(t.numConstants=this.numConstants);var r=this.cell.getConfig();return this.getClassName()===n.className&&(t.cell={className:this.cell.getClassName(),config:r}),Object.assign({},r,e,t)}}],[{key:"fromConfig",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=t.cell,a=RX(r,n);return new e(Object.assign(t,{cell:a}))}}]),n}(gX);rJ.className="RNN",EV.serialization.registerClass(rJ);var aJ=function(e){(0,nu.Z)(n,e);var t=(0,ru.Z)(n);function n(){return(0,f.Z)(this,n),t.apply(this,arguments)}return(0,d.Z)(n)}(gX),oJ=function(e){(0,nu.Z)(n,e);var t=(0,ru.Z)(n);function n(e){var r;return(0,f.Z)(this,n),(r=t.call(this,e)).DEFAULT_ACTIVATION="tanh",r.DEFAULT_KERNEL_INITIALIZER="glorotNormal",r.DEFAULT_RECURRENT_INITIALIZER="orthogonal",r.DEFAULT_BIAS_INITIALIZER="zeros",r.units=e.units,PG(r.units,"units"),r.activation=w$(null==e.activation?r.DEFAULT_ACTIVATION:e.activation),r.useBias=null==e.useBias||e.useBias,r.kernelInitializer=JK(e.kernelInitializer||r.DEFAULT_KERNEL_INITIALIZER),r.recurrentInitializer=JK(e.recurrentInitializer||r.DEFAULT_RECURRENT_INITIALIZER),r.biasInitializer=JK(e.biasInitializer||r.DEFAULT_BIAS_INITIALIZER),r.kernelRegularizer=T$(e.kernelRegularizer),r.recurrentRegularizer=T$(e.recurrentRegularizer),r.biasRegularizer=T$(e.biasRegularizer),r.kernelConstraint=GG(e.kernelConstraint),r.recurrentConstraint=GG(e.recurrentConstraint),r.biasConstraint=GG(e.biasConstraint),r.dropout=lK([1,fK([0,null==e.dropout?0:e.dropout])]),r.recurrentDropout=lK([1,fK([0,null==e.recurrentDropout?0:e.recurrentDropout])]),r.dropoutFunc=e.dropoutFunc,r.stateSize=r.units,r.dropoutMask=null,r.recurrentDropoutMask=null,r}return(0,d.Z)(n,[{key:"build",value:function(e){e=iX(e),this.kernel=this.addWeight("kernel",[e[e.length-1],this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,this.units],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias?this.bias=this.addWeight("bias",[this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}},{key:"call",value:function(e,t){var n=this;return(0,EV.tidy)((function(){if(2!==(e=e).length)throw new vG("SimpleRNNCell expects 2 input Tensors, got ".concat(e.length,"."));var r=e[1];e=e[0];var a,o=null!=t.training&&t.training;0<n.dropout&&n.dropout<1&&null==n.dropoutMask&&(n.dropoutMask=dJ({ones:function(){return EV.onesLike(e)},rate:n.dropout,training:o,dropoutFunc:n.dropoutFunc})),0<n.recurrentDropout&&n.recurrentDropout<1&&null==n.recurrentDropoutMask&&(n.recurrentDropoutMask=dJ({ones:function(){return EV.onesLike(r)},rate:n.recurrentDropout,training:o,dropoutFunc:n.dropoutFunc}));var i=n.dropoutMask,s=n.recurrentDropoutMask;a=SK(null!=i?EV.mul(e,i):e,n.kernel.read()),null!=n.bias&&(a=CK(a,n.bias.read())),null!=s&&(r=EV.mul(r,s));var u=EV.add(a,SK(r,n.recurrentKernel.read()));return null!=n.activation&&(u=n.activation.apply(u)),[u,u]}))}},{key:"getConfig",value:function(){var e=MX((0,pC.Z)(n.prototype),"getConfig",this).call(this),t={units:this.units,activation:b$(this.activation),useBias:this.useBias,kernelInitializer:$K(this.kernelInitializer),recurrentInitializer:$K(this.recurrentInitializer),biasInitializer:$K(this.biasInitializer),kernelRegularizer:E$(this.kernelRegularizer),recurrentRegularizer:E$(this.recurrentRegularizer),biasRegularizer:E$(this.biasRegularizer),activityRegularizer:E$(this.activityRegularizer),kernelConstraint:WG(this.kernelConstraint),recurrentConstraint:WG(this.recurrentConstraint),biasConstraint:WG(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout};return Object.assign({},e,t)}}]),n}(aJ);oJ.className="SimpleRNNCell",EV.serialization.registerClass(oJ);var iJ=function(e){(0,nu.Z)(n,e);var t=(0,ru.Z)(n);function n(e){return(0,f.Z)(this,n),e.cell=new oJ(e),t.call(this,e)}return(0,d.Z)(n,[{key:"call",value:function(e,t){var r=this;return(0,EV.tidy)((function(){null!=r.cell.dropoutMask&&(EV.dispose(r.cell.dropoutMask),r.cell.dropoutMask=null),null!=r.cell.recurrentDropoutMask&&(EV.dispose(r.cell.recurrentDropoutMask),r.cell.recurrentDropoutMask=null);var a=null==t?null:t.mask,o=null==t?null:t.training,i=null==t?null:t.initialState;return MX((0,pC.Z)(n.prototype),"call",r).call(r,e,{mask:a,training:o,initialState:i})}))}}],[{key:"fromConfig",value:function(e,t){return new e(t)}}]),n}(rJ);iJ.className="SimpleRNN",EV.serialization.registerClass(iJ);var sJ=function(e){(0,nu.Z)(n,e);var t=(0,ru.Z)(n);function n(e){var r;if((0,f.Z)(this,n),(r=t.call(this,e)).DEFAULT_ACTIVATION="tanh",r.DEFAULT_RECURRENT_ACTIVATION="hardSigmoid",r.DEFAULT_KERNEL_INITIALIZER="glorotNormal",r.DEFAULT_RECURRENT_INITIALIZER="orthogonal",r.DEFAULT_BIAS_INITIALIZER="zeros",e.resetAfter)throw new vG("GRUCell does not support reset_after parameter set to true.");return r.units=e.units,PG(r.units,"units"),r.activation=w$(void 0===e.activation?r.DEFAULT_ACTIVATION:e.activation),r.recurrentActivation=w$(void 0===e.recurrentActivation?r.DEFAULT_RECURRENT_ACTIVATION:e.recurrentActivation),r.useBias=null==e.useBias||e.useBias,r.kernelInitializer=JK(e.kernelInitializer||r.DEFAULT_KERNEL_INITIALIZER),r.recurrentInitializer=JK(e.recurrentInitializer||r.DEFAULT_RECURRENT_INITIALIZER),r.biasInitializer=JK(e.biasInitializer||r.DEFAULT_BIAS_INITIALIZER),r.kernelRegularizer=T$(e.kernelRegularizer),r.recurrentRegularizer=T$(e.recurrentRegularizer),r.biasRegularizer=T$(e.biasRegularizer),r.kernelConstraint=GG(e.kernelConstraint),r.recurrentConstraint=GG(e.recurrentConstraint),r.biasConstraint=GG(e.biasConstraint),r.dropout=lK([1,fK([0,null==e.dropout?0:e.dropout])]),r.recurrentDropout=lK([1,fK([0,null==e.recurrentDropout?0:e.recurrentDropout])]),r.dropoutFunc=e.dropoutFunc,r.implementation=e.implementation,r.stateSize=r.units,r.dropoutMask=null,r.recurrentDropoutMask=null,r}return(0,d.Z)(n,[{key:"build",value:function(e){var t=(e=iX(e))[e.length-1];this.kernel=this.addWeight("kernel",[t,3*this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,3*this.units],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias?this.bias=this.addWeight("bias",[3*this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}},{key:"call",value:function(e,t){var n=this;return(0,EV.tidy)((function(){if(2!==(e=e).length)throw new vG("GRUCell expects 2 input Tensors (inputs, h, c), got "+"".concat(e.length,"."));var r=null!=t.training&&t.training,o=e[1];e=e[0],0<n.dropout&&n.dropout<1&&null==n.dropoutMask&&(n.dropoutMask=dJ({ones:function(){return EV.onesLike(e)},rate:n.dropout,training:r,count:3,dropoutFunc:n.dropoutFunc})),0<n.recurrentDropout&&n.recurrentDropout<1&&null==n.recurrentDropoutMask&&(n.recurrentDropoutMask=dJ({ones:function(){return EV.onesLike(o)},rate:n.recurrentDropout,training:r,count:3,dropoutFunc:n.dropoutFunc}));var i,s,u,c=n.dropoutMask,l=n.recurrentDropoutMask;0<n.dropout&&n.dropout<1&&(e=EV.mul(e,c[0]));var f=SK(e,n.kernel.read());n.useBias&&(f=CK(f,n.bias.read())),0<n.recurrentDropout&&n.recurrentDropout<1&&(o=EV.mul(o,l[0]));var d=n.recurrentKernel.read(),p=EV.split(d,[2*n.units,n.units],d.rank-1),h=(0,a.Z)(p,2),m=h[0],v=h[1],g=SK(o,m),y=EV.split(f,3,f.rank-1),b=(0,a.Z)(y,3),x=b[0],w=b[1],k=b[2],S=EV.split(g,2,g.rank-1),_=(0,a.Z)(S,2),N=_[0],E=_[1];i=n.recurrentActivation.apply(EV.add(x,N)),s=n.recurrentActivation.apply(EV.add(w,E));var C=SK(EV.mul(s,o),v);u=n.activation.apply(EV.add(k,C));var T=EV.add(EV.mul(i,o),EV.mul(EV.add(1,EV.neg(i)),u));return[T,T]}))}},{key:"getConfig",value:function(){var e=MX((0,pC.Z)(n.prototype),"getConfig",this).call(this),t={units:this.units,activation:b$(this.activation),recurrentActivation:b$(this.recurrentActivation),useBias:this.useBias,kernelInitializer:$K(this.kernelInitializer),recurrentInitializer:$K(this.recurrentInitializer),biasInitializer:$K(this.biasInitializer),kernelRegularizer:E$(this.kernelRegularizer),recurrentRegularizer:E$(this.recurrentRegularizer),biasRegularizer:E$(this.biasRegularizer),activityRegularizer:E$(this.activityRegularizer),kernelConstraint:WG(this.kernelConstraint),recurrentConstraint:WG(this.recurrentConstraint),biasConstraint:WG(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation,resetAfter:!1};return Object.assign({},e,t)}}]),n}(aJ);sJ.className="GRUCell",EV.serialization.registerClass(sJ);var uJ=function(e){(0,nu.Z)(n,e);var t=(0,ru.Z)(n);function n(e){return(0,f.Z)(this,n),0===e.implementation&&console.warn("`implementation=0` has been deprecated, and now defaults to `implementation=1`. Please update your layer call."),e.cell=new sJ(e),t.call(this,e)}return(0,d.Z)(n,[{key:"call",value:function(e,t){var r=this;return(0,EV.tidy)((function(){null!=r.cell.dropoutMask&&(EV.dispose(r.cell.dropoutMask),r.cell.dropoutMask=null),null!=r.cell.recurrentDropoutMask&&(EV.dispose(r.cell.recurrentDropoutMask),r.cell.recurrentDropoutMask=null);var a=null==t?null:t.mask,o=null==t?null:t.training,i=null==t?null:t.initialState;return MX((0,pC.Z)(n.prototype),"call",r).call(r,e,{mask:a,training:o,initialState:i})}))}}],[{key:"fromConfig",value:function(e,t){return 0===t.implmentation&&(t.implementation=1),new e(t)}}]),n}(rJ);uJ.className="GRU",EV.serialization.registerClass(uJ);var cJ=function(e){(0,nu.Z)(n,e);var t=(0,ru.Z)(n);function n(e){var r;return(0,f.Z)(this,n),(r=t.call(this,e)).DEFAULT_ACTIVATION="tanh",r.DEFAULT_RECURRENT_ACTIVATION="hardSigmoid",r.DEFAULT_KERNEL_INITIALIZER="glorotNormal",r.DEFAULT_RECURRENT_INITIALIZER="orthogonal",r.DEFAULT_BIAS_INITIALIZER="zeros",r.units=e.units,PG(r.units,"units"),r.activation=w$(void 0===e.activation?r.DEFAULT_ACTIVATION:e.activation),r.recurrentActivation=w$(void 0===e.recurrentActivation?r.DEFAULT_RECURRENT_ACTIVATION:e.recurrentActivation),r.useBias=null==e.useBias||e.useBias,r.kernelInitializer=JK(e.kernelInitializer||r.DEFAULT_KERNEL_INITIALIZER),r.recurrentInitializer=JK(e.recurrentInitializer||r.DEFAULT_RECURRENT_INITIALIZER),r.biasInitializer=JK(e.biasInitializer||r.DEFAULT_BIAS_INITIALIZER),r.unitForgetBias=e.unitForgetBias,r.kernelRegularizer=T$(e.kernelRegularizer),r.recurrentRegularizer=T$(e.recurrentRegularizer),r.biasRegularizer=T$(e.biasRegularizer),r.kernelConstraint=GG(e.kernelConstraint),r.recurrentConstraint=GG(e.recurrentConstraint),r.biasConstraint=GG(e.biasConstraint),r.dropout=lK([1,fK([0,null==e.dropout?0:e.dropout])]),r.recurrentDropout=lK([1,fK([0,null==e.recurrentDropout?0:e.recurrentDropout])]),r.dropoutFunc=e.dropoutFunc,r.implementation=e.implementation,r.stateSize=[r.units,r.units],r.dropoutMask=null,r.recurrentDropoutMask=null,r}return(0,d.Z)(n,[{key:"build",value:function(e){var t,n,r=(e=iX(e))[e.length-1];if(this.kernel=this.addWeight("kernel",[r,4*this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,4*this.units],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias){if(this.unitForgetBias){var a=this.biasInitializer,o=this.units;n=new(t=function(e){(0,nu.Z)(n,e);var t=(0,ru.Z)(n);function n(){return(0,f.Z)(this,n),t.apply(this,arguments)}return(0,d.Z)(n,[{key:"apply",value:function(e,t){var n=a.apply([o]),r=(new PK).apply([o]),i=a.apply([2*o]);return xK(xK(n,r),i)}}]),n}(MK),t.className="CustomInit",t)}else n=this.biasInitializer;this.bias=this.addWeight("bias",[4*this.units],null,n,this.biasRegularizer,!0,this.biasConstraint)}else this.bias=null;this.built=!0}},{key:"call",value:function(e,t){var n=this;return(0,EV.tidy)((function(){var r=null!=t.training&&t.training;if(3!==(e=e).length)throw new vG("LSTMCell expects 3 input Tensors (inputs, h, c), got "+"".concat(e.length,"."));var o=e[1],i=e[2];e=e[0],0<n.dropout&&n.dropout<1&&null==n.dropoutMask&&(n.dropoutMask=dJ({ones:function(){return EV.onesLike(e)},rate:n.dropout,training:r,count:4,dropoutFunc:n.dropoutFunc})),0<n.recurrentDropout&&n.recurrentDropout<1&&null==n.recurrentDropoutMask&&(n.recurrentDropoutMask=dJ({ones:function(){return EV.onesLike(o)},rate:n.recurrentDropout,training:r,count:4,dropoutFunc:n.dropoutFunc}));var s,u,c,l,f=n.dropoutMask,d=n.recurrentDropoutMask;0<n.dropout&&n.dropout<1&&(e=EV.mul(e,f[0]));var p=SK(e,n.kernel.read());0<n.recurrentDropout&&n.recurrentDropout<1&&(o=EV.mul(o,d[0])),p=EV.add(p,SK(o,n.recurrentKernel.read())),n.useBias&&(p=CK(p,n.bias.read()));var h=EV.split(p,4,p.rank-1),m=(0,a.Z)(h,4),v=m[0],g=m[1],y=m[2],b=m[3];s=n.recurrentActivation.apply(v),u=n.recurrentActivation.apply(g),c=EV.add(EV.mul(u,i),EV.mul(s,n.activation.apply(y))),l=n.recurrentActivation.apply(b);var x=EV.mul(l,n.activation.apply(c));return[x,x,c]}))}},{key:"getConfig",value:function(){var e=MX((0,pC.Z)(n.prototype),"getConfig",this).call(this),t={units:this.units,activation:b$(this.activation),recurrentActivation:b$(this.recurrentActivation),useBias:this.useBias,kernelInitializer:$K(this.kernelInitializer),recurrentInitializer:$K(this.recurrentInitializer),biasInitializer:$K(this.biasInitializer),unitForgetBias:this.unitForgetBias,kernelRegularizer:E$(this.kernelRegularizer),recurrentRegularizer:E$(this.recurrentRegularizer),biasRegularizer:E$(this.biasRegularizer),activityRegularizer:E$(this.activityRegularizer),kernelConstraint:WG(this.kernelConstraint),recurrentConstraint:WG(this.recurrentConstraint),biasConstraint:WG(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation};return Object.assign({},e,t)}}]),n}(aJ);cJ.className="LSTMCell",EV.serialization.registerClass(cJ);var lJ=function(e){(0,nu.Z)(n,e);var t=(0,ru.Z)(n);function n(e){return(0,f.Z)(this,n),0===e.implementation&&console.warn("`implementation=0` has been deprecated, and now defaults to `implementation=1`. Please update your layer call."),e.cell=new cJ(e),t.call(this,e)}return(0,d.Z)(n,[{key:"call",value:function(e,t){var r=this;return(0,EV.tidy)((function(){null!=r.cell.dropoutMask&&(EV.dispose(r.cell.dropoutMask),r.cell.dropoutMask=null),null!=r.cell.recurrentDropoutMask&&(EV.dispose(r.cell.recurrentDropoutMask),r.cell.recurrentDropoutMask=null);var a=null==t?null:t.mask,o=null==t?null:t.training,i=null==t?null:t.initialState;return MX((0,pC.Z)(n.prototype),"call",r).call(r,e,{mask:a,training:o,initialState:i})}))}}],[{key:"fromConfig",value:function(e,t){return 0===t.implmentation&&(t.implementation=1),new e(t)}}]),n}(rJ);lJ.className="LSTM",EV.serialization.registerClass(lJ);var fJ=function(e){(0,nu.Z)(n,e);var t=(0,ru.Z)(n);function n(e){var r;return(0,f.Z)(this,n),(r=t.call(this,e)).cells=e.cells,r}return(0,d.Z)(n,[{key:"stateSize",get:function(){var e,t=[],n=(0,Et.Z)(this.cells.slice().reverse());try{for(n.s();!(e=n.n()).done;){var a=e.value;Array.isArray(a.stateSize)?t.push.apply(t,(0,r.Z)(a.stateSize)):t.push(a.stateSize)}}catch(o){n.e(o)}finally{n.f()}return t}},{key:"call",value:function(e,t){var n=this;return(0,EV.tidy)((function(){var a,o=(e=e).slice(1),i=[],s=(0,Et.Z)(n.cells.slice().reverse());try{for(s.s();!(a=s.n()).done;){var u=a.value;Array.isArray(u.stateSize)?i.push(o.splice(0,u.stateSize.length)):i.push(o.splice(0,1))}}catch(g){s.e(g)}finally{s.f()}i.reverse();for(var c,l=[],f=0;f<n.cells.length;++f){var d=n.cells[f];o=i[f],c=0===f?[e[0]].concat(o):[c[0]].concat(o),c=d.call(c,t),l.push(c.slice(1))}o=[];var p,h=(0,Et.Z)(l.slice().reverse());try{for(h.s();!(p=h.n()).done;){var m,v=p.value;(m=o).push.apply(m,(0,r.Z)(v))}}catch(g){h.e(g)}finally{h.f()}return[c[0]].concat(o)}))}},{key:"build",value:function(e){var t;rX(e)&&(e=e[0]),e=e,this.cells.forEach((function(n,r){aK("RNNCell_".concat(r),(function(){n.build(e),t=Array.isArray(n.stateSize)?n.stateSize[0]:n.stateSize,e=[e[0],t]}))})),this.built=!0}},{key:"getConfig",value:function(){var e=MX((0,pC.Z)(n.prototype),"getConfig",this).call(this),t={cells:this.cells.map((function(e){return{className:e.getClassName(),config:e.getConfig()}}))};return Object.assign({},e,t)}},{key:"trainableWeights",get:function(){if(!this.trainable)return[];var e,t=[],n=(0,Et.Z)(this.cells);try{for(n.s();!(e=n.n()).done;){var a=e.value;t.push.apply(t,(0,r.Z)(a.trainableWeights))}}catch(o){n.e(o)}finally{n.f()}return t}},{key:"nonTrainableWeights",get:function(){var e,t=[],n=(0,Et.Z)(this.cells);try{for(n.s();!(e=n.n()).done;){var a=e.value;t.push.apply(t,(0,r.Z)(a.nonTrainableWeights))}}catch(c){n.e(c)}finally{n.f()}if(!this.trainable){var o,i=[],s=(0,Et.Z)(this.cells);try{for(s.s();!(o=s.n()).done;){var u=o.value;i.push.apply(i,(0,r.Z)(u.trainableWeights))}}catch(c){s.e(c)}finally{s.f()}return i.concat(t)}return t}},{key:"getWeights",value:function(){var e,t=[],n=(0,Et.Z)(this.cells);try{for(n.s();!(e=n.n()).done;){var a=e.value;t.push.apply(t,(0,r.Z)(a.weights))}}catch(o){n.e(o)}finally{n.f()}return lX(t)}},{key:"setWeights",value:function(e){var t,n=[],r=(0,Et.Z)(this.cells);try{for(r.s();!(t=r.n()).done;)for(var a=t.value,o=a.weights.length,i=e.splice(o),s=0;s<a.weights.length;++s)n.push([a.weights[s],i[s]])}catch(u){r.e(u)}finally{r.f()}fX(n)}}],[{key:"fromConfig",value:function(e,t){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=[],o=(0,Et.Z)(t.cells);try{for(o.s();!(n=o.n()).done;){var i=n.value;a.push(RX(i,r))}}catch(s){o.e(s)}finally{o.f()}return new e({cells:a})}}]),n}(aJ);function dJ(e){var t=e.ones,n=e.rate,r=e.training,a=void 0!==r&&r,o=e.count,i=void 0===o?1:o,s=e.dropoutFunc,u=function(){return null!=s?s(t(),n):IK(t(),n)},c=function(){return OK(u,t,a)};return!i||i<=1?EV.keep(c().clone()):Array(i).fill(void 0).map(c).map((function(e){return EV.keep(e.clone())}))}fJ.className="StackedRNNCells",EV.serialization.registerClass(fJ);var pJ=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n},hJ=function(e){(0,nu.Z)(n,e);var t=(0,ru.Z)(n);function n(e){var r;if((0,f.Z)(this,n),e.unroll)throw new gG("Unrolling is not possible with convolutional RNNs.");if(Array.isArray(e.cell))throw new gG("It is not possible at the moment to stack convolutional cells.");return(r=t.call(this,e)).inputSpec=[new dX({ndim:5})],r}return(0,d.Z)(n,[{key:"call",value:function(e,t){var r=this;return EV.tidy((function(){if(null!=r.cell.dropoutMask&&(EV.dispose(r.cell.dropoutMask),r.cell.dropoutMask=null),null!=r.cell.recurrentDropoutMask&&(EV.dispose(r.cell.recurrentDropoutMask),r.cell.recurrentDropoutMask=null),t&&t.constants)throw new vG("ConvRNN2D cell does not support constants");var a=null==t?null:t.mask,o=null==t?null:t.training,i=null==t?null:t.initialState;return MX((0,pC.Z)(n.prototype),"call",r).call(r,e,{mask:a,training:o,initialState:i})}))}},{key:"computeOutputShape",value:function(e){var t=this.computeSingleOutputShape(e);return this.returnSequences||(t=[t[0]].concat((0,r.Z)(t.slice(2)))),this.returnState&&(t=[t].concat((0,r.Z)(Array(2).fill([e[0]].concat((0,r.Z)(t.slice(-3))))))),t}},{key:"getInitialState",value:function(e){var t=this;return EV.tidy((function(){var n=t.cell.stateSize,a=e.shape,o=t.computeSingleOutputShape(a),i=[o[0]].concat((0,r.Z)(o.slice(2))),s=EV.zeros(i);return Array.isArray(n)?Array(n.length).fill(s):[s]}))}},{key:"resetStates",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];EV.tidy((function(){if(!t.stateful)throw new hG("Cannot call resetStates() on an RNN Layer that is not stateful.");var a=t.inputSpec[0].shape,o=t.computeSingleOutputShape(a),i=[o[0]].concat((0,r.Z)(o.slice(2)));if(null==a[0])throw new vG("If an RNN is stateful, it needs to know its batch size. Specify the batch size of your input tensors: \n- If using a Sequential model, specify the batch size by passing a `batchInputShape` option to your first layer.\n- If using the functional API, specify the batch size by passing a `batchShape` option to your Input layer.");if(null==t.getStates())Array.isArray(t.cell.stateSize)?t.states_=t.cell.stateSize.map((function(){return EV.zeros(i)})):t.states_=[EV.zeros(i)];else if(null==e)EV.dispose(t.states_),null!=t.keptStates&&(EV.dispose(t.keptStates),t.keptStates=[]),Array.isArray(t.cell.stateSize)?t.states_=t.cell.stateSize.map((function(){return EV.zeros(i)})):t.states_[0]=EV.zeros(i);else{if(Array.isArray(e)||(e=[e]),e.length!==t.states_.length)throw new vG("Layer ".concat(t.name," expects ").concat(t.states_.length," state(s), ")+"but it received ".concat(e.length," state value(s). Input ")+"received: ".concat(e));n?t.keptStates.push(t.states_.slice()):EV.dispose(t.states_);for(var s=0;s<t.states_.length;++s){var u=e[s],c=i;if(!EV.util.arraysEqual(u.shape,c))throw new vG("State ".concat(s," is incompatible with layer ").concat(t.name,": ")+"expected shape=".concat(c,", received shape=").concat(u.shape));t.states_[s]=u}}t.states_=t.states_.map((function(e){return EV.keep(e.clone())}))}))}},{key:"computeSingleOutputShape",value:function(e){var t=this.cell,n=t.dataFormat,a=t.filters,o=t.kernelSize,i=t.padding,s=t.strides,u=t.dilationRate,c="channelsFirst"===n,l=e[c?3:2],f=e[c?4:3],d=j$(l,o[0],i,s[0],u[0]),p=j$(f,o[1],i,s[1],u[1]);return[].concat((0,r.Z)(e.slice(0,2)),(0,r.Z)(c?[a,d,p]:[d,p,a]))}}]),n}(rJ);hJ.className="ConvRNN2D";var mJ=function(e){(0,nu.Z)(n,e);var t=(0,ru.Z)(n);function n(e){var r;(0,f.Z)(this,n);var a=e.filters,o=e.kernelSize,i=e.strides,s=e.padding,u=e.dataFormat,c=e.dilationRate;return(r=t.call(this,Object.assign({},e,{units:a}))).filters=a,PG(r.filters,"filters"),r.kernelSize=P$(o,2,"kernelSize"),r.kernelSize.forEach((function(e){return PG(e,"kernelSize")})),r.strides=P$(i||1,2,"strides"),r.strides.forEach((function(e){return PG(e,"strides")})),r.padding=s||"valid",tK(r.padding),r.dataFormat=u||"channelsLast",eK(r.dataFormat),r.dilationRate=P$(c||1,2,"dilationRate"),r.dilationRate.forEach((function(e){return PG(e,"dilationRate")})),r}return(0,d.Z)(n,[{key:"build",value:function(e){var t;e=iX(e);var n="channelsFirst"===this.dataFormat?1:e.length-1;if(null==e[n])throw new vG("The channel dimension of the input should be defined. "+"Found ".concat(e[n]));var r=e[n],a=this.kernelSize.concat([r,4*this.filters]);this.kernel=this.addWeight("kernel",a,null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint);var o=this.kernelSize.concat([this.filters,4*this.filters]);if(this.recurrentKernel=this.addWeight("recurrent_kernel",o,null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias){var i;if(this.unitForgetBias){var s=this.biasInitializer,u=this.filters;i=new(t=function(e){(0,nu.Z)(n,e);var t=(0,ru.Z)(n);function n(){return(0,f.Z)(this,n),t.apply(this,arguments)}return(0,d.Z)(n,[{key:"apply",value:function(e,t){return bK([s.apply([u]),EV.ones([u]),s.apply([2*u])])}}]),n}(MK),t.className="CustomInit",t)}else i=this.biasInitializer;this.bias=this.addWeight("bias",[4*this.filters],null,i,this.biasRegularizer,!0,this.biasConstraint)}this.built=!0}},{key:"call",value:function(e,t){var n=this;return EV.tidy((function(){if(3!==e.length)throw new vG("ConvLSTM2DCell expects 3 input Tensors (inputs, h, c), got "+"".concat(e.length,"."));var r=t.training||!1,o=e[0],i=e[1],s=e[2];0<n.dropout&&n.dropout<1&&null==n.dropoutMask&&(n.dropoutMask=dJ({ones:function(){return EV.onesLike(o)},rate:n.dropout,training:r,count:4,dropoutFunc:n.dropoutFunc}));var u=n.dropoutMask,c=function(e,t,n){return t&&t[n]?EV.mul(t[n],e):e},l=c(o,u,0),f=c(o,u,1),d=c(o,u,2),p=c(o,u,3);0<n.recurrentDropout&&n.recurrentDropout<1&&null==n.recurrentDropoutMask&&(n.recurrentDropoutMask=dJ({ones:function(){return EV.onesLike(i)},rate:n.recurrentDropout,training:r,count:4,dropoutFunc:n.dropoutFunc}));var h=n.recurrentDropoutMask,m=c(i,h,0),v=c(i,h,1),g=c(i,h,2),y=c(i,h,3),b=EV.split(n.kernel.read(),4,3),x=(0,a.Z)(b,4),w=x[0],k=x[1],S=x[2],_=x[3],N=n.useBias?EV.split(n.bias.read(),4):[null,null,null,null],E=(0,a.Z)(N,4),C=E[0],T=E[1],I=E[2],O=E[3];l=n.inputConv(l,w,C,n.padding),f=n.inputConv(f,k,T,n.padding),d=n.inputConv(d,S,I,n.padding),p=n.inputConv(p,_,O,n.padding);var A=EV.split(n.recurrentKernel.read(),4,3),D=(0,a.Z)(A,4),M=D[0],R=D[1],P=D[2],j=D[3];m=n.recurrentConv(m,M),v=n.recurrentConv(v,R),g=n.recurrentConv(g,P),y=n.recurrentConv(y,j);var F=n.recurrentActivation.apply(EV.add(l,m)),L=n.recurrentActivation.apply(EV.add(f,v)),B=EV.add(EV.mul(L,s),EV.mul(F,n.activation.apply(EV.add(d,g)))),z=EV.mul(n.recurrentActivation.apply(EV.add(p,y)),n.activation.apply(B));return[z,z,B]}))}},{key:"getConfig",value:function(){var e=MX((0,pC.Z)(n.prototype),"getConfig",this).call(this),t=(e.units,pJ(e,["units"])),r={filters:this.filters,kernelSize:this.kernelSize,padding:this.padding,dataFormat:this.dataFormat,dilationRate:this.dilationRate,strides:this.strides};return Object.assign({},t,r)}},{key:"inputConv",value:function(e,t,n,r){var a=EV.conv2d(e,t,this.strides,r||"valid","channelsFirst"===this.dataFormat?"NCHW":"NHWC",this.dilationRate);return n?CK(a,n,this.dataFormat):a}},{key:"recurrentConv",value:function(e,t){return EV.conv2d(e,t,1,"same","channelsFirst"===this.dataFormat?"NCHW":"NHWC")}}]),n}(cJ);mJ.className="ConvLSTM2DCell",EV.serialization.registerClass(mJ);var vJ=function(e){(0,nu.Z)(n,e);var t=(0,ru.Z)(n);function n(e){(0,f.Z)(this,n);var r=new mJ(e);return t.call(this,Object.assign({},e,{cell:r}))}return(0,d.Z)(n,null,[{key:"fromConfig",value:function(e,t){return new e(t)}}]),n}(hJ);vJ.className="ConvLSTM2D",EV.serialization.registerClass(vJ);var gJ=function(e){(0,nu.Z)(n,e);var t=(0,ru.Z)(n);function n(e){var r;return(0,f.Z)(this,n),(r=t.call(this,e)).rate=Math.max(Math.min(e.rate,1),0),r.noiseShape=e.noiseShape,r.seed=e.seed,r.supportsMasking=!0,r}return(0,d.Z)(n,[{key:"getNoiseShape",value:function(e){if(null==this.noiseShape)return this.noiseShape;for(var t=e.shape,n=[],r=0;r<this.noiseShape.length;++r)n.push(null==this.noiseShape[r]?t[r]:this.noiseShape[r]);return n}},{key:"call",value:function(e,t){var n=this;return(0,EV.tidy)((function(){n.invokeCallHook(e,t);var r=oX(e);if(0<n.rate&&n.rate<1){var a=null!=t.training&&t.training,o=n.getNoiseShape(r);return OK((function(){return IK(r,n.rate,o,n.seed)}),(function(){return r}),a)}return e}))}},{key:"getConfig",value:function(){var e={rate:this.rate,noiseShape:this.noiseShape,seed:this.seed},t=MX((0,pC.Z)(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}},{key:"dispose",value:function(){return MX((0,pC.Z)(n.prototype),"dispose",this).call(this)}}]),n}(gX);gJ.className="Dropout",EV.serialization.registerClass(gJ);var yJ=function(e){(0,nu.Z)(n,e);var t=(0,ru.Z)(n);function n(e){var r;return(0,f.Z)(this,n),(r=t.call(this,e)).inputSpec=[{ndim:3}],r}return(0,d.Z)(n,[{key:"getNoiseShape",value:function(e){var t=e.shape;return[t[0],1,t[2]]}}]),n}(gJ);yJ.className="SpatialDropout1D",EV.serialization.registerClass(yJ);var bJ=function(e){(0,nu.Z)(n,e);var t=(0,ru.Z)(n);function n(e){var r;if((0,f.Z)(this,n),(r=t.call(this,e)).activation=null,r.useBias=!0,r.kernel=null,r.bias=null,r.DEFAULT_KERNEL_INITIALIZER="glorotNormal",r.DEFAULT_BIAS_INITIALIZER="zeros",null==e.batchInputShape&&null==e.inputShape&&null!=e.inputDim){var a=null;null!=e.batchSize&&(a=e.batchSize),r.batchInputShape=[a,e.inputDim]}return r.units=e.units,PG(r.units,"units"),r.activation=w$(e.activation),null!=e.useBias&&(r.useBias=e.useBias),r.kernelInitializer=JK(e.kernelInitializer||r.DEFAULT_KERNEL_INITIALIZER),r.biasInitializer=JK(e.biasInitializer||r.DEFAULT_BIAS_INITIALIZER),r.kernelConstraint=GG(e.kernelConstraint),r.biasConstraint=GG(e.biasConstraint),r.kernelRegularizer=T$(e.kernelRegularizer),r.biasRegularizer=T$(e.biasRegularizer),r.activityRegularizer=T$(e.activityRegularizer),r.supportsMasking=!0,r.inputSpec=[{minNDim:2}],r}return(0,d.Z)(n,[{key:"build",value:function(e){var t=(e=iX(e))[e.length-1];null==this.kernel&&(this.kernel=this.addWeight("kernel",[t,this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint))),this.inputSpec=[{minNDim:2,axes:i({},-1,t)}],this.built=!0}},{key:"computeOutputShape",value:function(e){var t=(e=iX(e)).slice();return t[t.length-1]=this.units,t}},{key:"call",value:function(e,t){var n=this;return(0,EV.tidy)((function(){n.invokeCallHook(e,t);var r,a=oX(e),o=FG(n.activation.getClassName());return null!=o?r=SK(a,n.kernel.read(),o,n.bias?n.bias.read():null):(r=SK(a,n.kernel.read()),null!=n.bias&&(r=CK(r,n.bias.read())),null!=n.activation&&(r=n.activation.apply(r))),r}))}},{key:"getConfig",value:function(){var e={units:this.units,activation:b$(this.activation),useBias:this.useBias,kernelInitializer:$K(this.kernelInitializer),biasInitializer:$K(this.biasInitializer),kernelRegularizer:E$(this.kernelRegularizer),biasRegularizer:E$(this.biasRegularizer),activityRegularizer:E$(this.activityRegularizer),kernelConstraint:WG(this.kernelConstraint),biasConstraint:WG(this.biasConstraint)},t=MX((0,pC.Z)(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(gX);bJ.className="Dense",EV.serialization.registerClass(bJ);var xJ=function(e){(0,nu.Z)(n,e);var t=(0,ru.Z)(n);function n(e){var r;return(0,f.Z)(this,n),e=e||{},(r=t.call(this,e)).inputSpec=[{minNDim:3}],r.dataFormat=e.dataFormat,r}return(0,d.Z)(n,[{key:"computeOutputShape",value:function(e){e=iX(e);var t,n=(0,Et.Z)(e.slice(1));try{for(n.s();!(t=n.n()).done;){if(null==t.value)throw new vG('The shape of the input to "Flatten" is not fully defined '+"(got ".concat(e.slice(1),"). Make sure to pass a complete ")+'"input_shape" or "batch_input_shape" argument to the first layer in your model.')}}catch(r){n.e(r)}finally{n.f()}return[e[0],cK(e,1)]}},{key:"call",value:function(e,t){var n=this;return(0,EV.tidy)((function(){n.invokeCallHook(e,t);var r=oX(e);if("channelsFirst"===n.dataFormat&&r.rank>1){for(var a=[0],o=2;o<r.rank;++o)a.push(o);a.push(1),r=(0,EV.transpose)(r,a)}return function(e){if(e.rank<=1)throw new vG("batchFlatten requires a minimum rank of 2. Got rank: ".concat(e.rank,"."));var t=[e.shape[0],cK(e.shape,1)];return EV.reshape(e,t)}(r)}))}},{key:"getConfig",value:function(){var e={};null!=this.dataFormat&&(e.dataFormat=this.dataFormat);var t=MX((0,pC.Z)(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(gX);xJ.className="Flatten",EV.serialization.registerClass(xJ);var wJ=function(e){(0,nu.Z)(n,e);var t=(0,ru.Z)(n);function n(e){var r;return(0,f.Z)(this,n),(r=t.call(this,e)).supportsMasking=!0,r.activation=w$(e.activation),r}return(0,d.Z)(n,[{key:"call",value:function(e,t){var n=this;return(0,EV.tidy)((function(){n.invokeCallHook(e,t);var r=oX(e);return n.activation.apply(r)}))}},{key:"getConfig",value:function(){var e={activation:b$(this.activation)},t=MX((0,pC.Z)(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(gX);wJ.className="Activation",EV.serialization.registerClass(wJ);var kJ=function(e){(0,nu.Z)(n,e);var t=(0,ru.Z)(n);function n(e){var r;return(0,f.Z)(this,n),(r=t.call(this,e)).n=e.n,r.inputSpec=[{ndim:2}],r}return(0,d.Z)(n,[{key:"computeOutputShape",value:function(e){return[e[0],this.n,e[1]]}},{key:"call",value:function(e,t){var n=this;return(0,EV.tidy)((function(){return e=oX(e),t=e,r=n.n,(0,EV.tidy)((function(){if(2!==t.shape.length)throw new vG("repeat() expects a rank-2 tensor, but received a "+"rank-".concat(t.shape.length," tensor."));return wK(hK(t,1),[1,r,1])}));var t,r}))}},{key:"getConfig",value:function(){var e={n:this.n},t=MX((0,pC.Z)(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(gX);kJ.className="RepeatVector",EV.serialization.registerClass(kJ);var SJ=function(e){(0,nu.Z)(n,e);var t=(0,ru.Z)(n);function n(e){var r;(0,f.Z)(this,n),(r=t.call(this,e)).targetShape=e.targetShape;for(var a=0;a<r.targetShape.length;++a)r.isUnknown(r.targetShape[a])&&(r.targetShape[a]=null);return r}return(0,d.Z)(n,[{key:"isUnknown",value:function(e){return e<0||null==e}},{key:"fixUnknownDimension",value:function(e,t){for(var n="Total size of new array must be unchanged.",r=t.slice(),a=1,o=null,i=0;i<r.length;++i){var s=r[i];if(this.isUnknown(s)){if(null!==o)throw new vG("Can only specifiy one unknown dimension.");o=i}else a*=s}var u=cK(e);if(null!==o){if(0===a||u%a!==0)throw new vG(n);r[o]=u/a}else if(u!==a)throw new vG(n);return r}},{key:"computeOutputShape",value:function(e){for(var t=!1,n=0;n<e.length;++n)if(this.isUnknown(e[n])){t=!0;break}return t?e.slice(0,1).concat(this.targetShape):e.slice(0,1).concat(this.fixUnknownDimension(e.slice(1),this.targetShape))}},{key:"call",value:function(e,t){var n=this;return(0,EV.tidy)((function(){n.invokeCallHook(e,t);var r=oX(e),a=r.shape,o=a.slice(0,1).concat(n.fixUnknownDimension(a.slice(1),n.targetShape));return(0,EV.reshape)(r,o)}))}},{key:"getConfig",value:function(){var e={targetShape:this.targetShape},t=MX((0,pC.Z)(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(gX);SJ.className="Reshape",EV.serialization.registerClass(SJ);var _J=function(e){(0,nu.Z)(n,e);var t=(0,ru.Z)(n);function n(e){var r;if((0,f.Z)(this,n),r=t.call(this,e),null==e.dims)throw new Error("Required configuration field `dims` is missing during Permute constructor call.");if(!Array.isArray(e.dims))throw new Error("Permute constructor requires `dims` to be an Array, but received "+"".concat(e.dims," instead."));var a=dK(1,e.dims.length+1);if(!EV.util.arraysEqual(e.dims.slice().sort(),a))throw new Error("Invalid permutation `dims`: "+JSON.stringify(e.dims)+" `dims` must contain consecutive integers starting from 1.");return r.dims=e.dims,r.dimsIncludingBatch=[0].concat(r.dims),r.inputSpec=[new dX({ndim:r.dims.length+1})],r}return(0,d.Z)(n,[{key:"computeOutputShape",value:function(e){var t=(e=iX(e)).slice();return this.dims.forEach((function(n,r){t[r+1]=e[n]})),t}},{key:"call",value:function(e,t){return(0,EV.transpose)(oX(e),this.dimsIncludingBatch)}},{key:"getConfig",value:function(){var e={dims:this.dims},t=MX((0,pC.Z)(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(gX);_J.className="Permute",EV.serialization.registerClass(_J);var NJ=function(e){(0,nu.Z)(n,e);var t=(0,ru.Z)(n);function n(e){var r;return(0,f.Z)(this,n),(r=t.call(this,null==e?{}:e)).supportsMasking=!0,r.maskValue=null!=e?null==e.maskValue?0:e.maskValue:0,r}return(0,d.Z)(n,[{key:"computeOutputShape",value:function(e){return e}},{key:"getConfig",value:function(){var e=MX((0,pC.Z)(n.prototype),"getConfig",this).call(this),t={maskValue:this.maskValue};return Object.assign(t,e),t}},{key:"computeMask",value:function(e,t){var n=oX(e);return(0,EV.any)((0,EV.notEqual)(n,this.maskValue),-1)}},{key:"call",value:function(e,t){var n=this;return(0,EV.tidy)((function(){n.invokeCallHook(e,t);var r=oX(e),a=(0,EV.any)((0,EV.notEqual)(r,n.maskValue),-1,!0);return(0,EV.mul)(r,(0,EV.cast)(a,r.dtype))}))}}]),n}(gX);NJ.className="Masking",EV.serialization.registerClass(NJ);var EJ=function(e){(0,nu.Z)(n,e);var t=(0,ru.Z)(n);function n(e){var r;if((0,f.Z)(this,n),(r=t.call(this,e)).embeddings=null,r.DEFAULT_EMBEDDINGS_INITIALIZER="randomUniform",null==e.batchInputShape&&null==e.inputShape){var a=null;null!=e.batchSize&&(a=e.batchSize),null==e.inputLength?r.batchInputShape=[a,null]:r.batchInputShape=[a].concat(SG(e.inputLength))}return r.inputDim=e.inputDim,PG(r.inputDim,"inputDim"),r.outputDim=e.outputDim,PG(r.outputDim,"outputDim"),r.embeddingsInitializer=JK(e.embeddingsInitializer||r.DEFAULT_EMBEDDINGS_INITIALIZER),r.embeddingsRegularizer=T$(e.embeddingsRegularizer),r.activityRegularizer=T$(e.activityRegularizer),r.embeddingsConstraint=GG(e.embeddingsConstraint),r.maskZero=e.maskZero,r.supportsMasking=e.maskZero,r.inputLength=e.inputLength,r}return(0,d.Z)(n,[{key:"build",value:function(e){this.embeddings=this.addWeight("embeddings",[this.inputDim,this.outputDim],this.dtype,this.embeddingsInitializer,this.embeddingsRegularizer,!0,this.embeddingsConstraint),this.built=!0}},{key:"warnOnIncompatibleInputShape",value:function(e){}},{key:"computeMask",value:function(e,t){var n=this;return(0,EV.tidy)((function(){return n.maskZero?(e=oX(e),(0,EV.notEqual)(e,(0,EV.zerosLike)(e))):null}))}},{key:"computeOutputShape",value:function(e){if(e=iX(e),null==this.inputLength)return[].concat((0,r.Z)(e),[this.outputDim]);var t=SG(this.inputLength);if(t.length!==e.length-1)throw new vG('"inputLength" is '.concat(this.inputLength,", but received ")+"input shape has shape ".concat(e));for(var n=0,a=0;a<t.length;++a){var o=t[a],i=e[a+1];if(null!=o&&null!=i&&o!==i)throw new vG('"inputLength" is '.concat(this.inputLength,", but received ")+"input shape has shape ".concat(e));null==o&&(t[n]=i),n++}return[e[0]].concat((0,r.Z)(t),[this.outputDim])}},{key:"call",value:function(e,t){var n=this;return(0,EV.tidy)((function(){n.invokeCallHook(e,t);var r=oX(e);"int32"!==r.dtype&&(r=pK(r,"int32"));var a=_K(n.embeddings.read(),(0,EV.reshape)(r,[r.size]));return(0,EV.reshape)(a,iX(n.computeOutputShape(r.shape)))}))}},{key:"getConfig",value:function(){var e={inputDim:this.inputDim,outputDim:this.outputDim,embeddingsInitializer:$K(this.embeddingsInitializer),embeddingsRegularizer:E$(this.embeddingsRegularizer),activityRegularizer:E$(this.activityRegularizer),embeddingsConstraint:WG(this.embeddingsConstraint),maskZero:this.maskZero,inputLength:this.inputLength},t=MX((0,pC.Z)(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(gX);EJ.className="Embedding",EV.serialization.registerClass(EJ);var CJ=function(e){(0,nu.Z)(n,e);var t=(0,ru.Z)(n);function n(e){var r;return(0,f.Z)(this,n),(r=t.call(this,e||{})).supportsMasking=!0,r}return(0,d.Z)(n,[{key:"mergeFunction",value:function(e){throw new gG}},{key:"computeElementwiseOpOutputShape",value:function(e,t){if(null==e||null==t)return null;if(e.length<t.length)return this.computeElementwiseOpOutputShape(t,e);if(0===t.length)return e;for(var n=e.slice(0,e.length-t.length),r=0;r<t.length;++r){var a=e[e.length-t.length+r],o=t[r];if(null==a||null==o||a<0||o<0)n.push(null);else if(1===a)n.push(o);else if(1===o)n.push(a);else{if(a!==o)throw new vG("Operands could not be broadcast together with shapes "+JSON.stringify(e)+" "+JSON.stringify(t));n.push(a)}}return n}},{key:"build",value:function(e){if(Array.isArray(e)&&!Array.isArray(e[0])&&(e=[iX(e)]),(e=e).length<2)throw new vG("A merge layer should be called on an Array of at least 2 inputs."+" Got ".concat(e.length," input(s)."));var t,n=[],r=(0,Et.Z)(e);try{for(r.s();!(t=r.n()).done;){var a=t.value;null!=a&&null!==a[0]&&n.push(a[0])}}catch(c){r.e(c)}finally{r.f()}if((n=AG(n)).length>1)throw new vG("Can not merge tensors with different batch sizes. "+"Got tensors with shapes: ".concat(JSON.stringify(e),"."));for(var o=null==e[0]?null:e[0].slice(1),i=1;i<e.length;++i){var s=null==e[i]?null:e[i].slice(1);o=this.computeElementwiseOpOutputShape(o,s)}var u=e.map((function(e){return e.length}));-1===e.indexOf(null)&&1===AG(u).length?this.reshapeRequired=!1:this.reshapeRequired=!0}},{key:"call",value:function(e,t){var n=this;return(0,EV.tidy)((function(){if(e=e,n.reshapeRequired){var t=[],r=e.map((function(e){return e.rank}));if(-1===r.indexOf(null)){var a,o=fK(r),i=(0,Et.Z)(e);try{for(i.s();!(a=i.n()).done;){for(var s=a.value,u=s.rank,c=0;c<o-u;++c)s=hK(s,1);t.push(s)}}catch(E){i.e(E)}finally{i.f()}return n.mergeFunction(t)}var l,f=!1,d=(0,Et.Z)(e);try{for(d.s();!(l=d.n()).done;){var p=l.value,h=p.rank;if(null==h){var m=p.shape,v=m[0],g=m.slice(1).concat([v]),y=EV.reshape(p,[v].concat(cK(m.slice(1))));y=EV.transpose(y,[1,0]),y=EV.reshape(y,g),t.push(y),f=!0}else if(h>1){var b=dK(1,h).concat([0]);t.push(EV.transpose(p,b)),f=!0}else t.push(p)}}catch(E){d.e(E)}finally{d.f()}var x=n.mergeFunction(t),w=x.rank;if(f)if(null==w){var k=x.shape,S=k[k.length-1],_=[S].concat(k.slice(0,k.length-1));x=EV.reshape(EV.transpose(EV.reshape(x,[-1,S]),[1,0]),_)}else if(w>1){var N=[w-1].concat(dK(0,w-1));x=EV.transpose(x,N)}return x}return n.mergeFunction(e)}))}},{key:"computeOutputShape",value:function(e){var t;t=null==(e=e)[0]?null:e[0].slice(1);for(var n=1;n<e.length;++n){var r=null==e[n]?null:e[n].slice(1);t=this.computeElementwiseOpOutputShape(t,r)}var a,o=[],i=(0,Et.Z)(e);try{for(i.s();!(a=i.n()).done;){var s=a.value;null!=s&&null!==s[0]&&o.push(s[0])}}catch(u){i.e(u)}finally{i.f()}return t=1===(o=AG(o)).length?o.concat(t):[null].concat(t)}},{key:"computeMask",value:function(e,t){return EV.tidy((function(){if(null==t)return null;if(!Array.isArray(t))throw new vG("`mask` should be an Array");if(!Array.isArray(e))throw new vG("`inputs` should be an Array");if(t.length!==e.length)throw new vG("The Array 'inputs' and 'mask' are expected to have the same length, but have different lengths "+"(".concat(e.length," vs ").concat(t.length,")"));if(t.every((function(e){return null==e})))return null;for(var n=(t=t.map((function(e){return null==e?e:EV.expandDims(e,0)})))[0],r=1;r<t.length-1;++r)n=EV.logicalAnd(n,t[r]);return n}))}}]),n}(gX),TJ=function(e){(0,nu.Z)(n,e);var t=(0,ru.Z)(n);function n(e){return(0,f.Z)(this,n),t.call(this,e)}return(0,d.Z)(n,[{key:"mergeFunction",value:function(e){return(0,EV.tidy)((function(){for(var t=e[0].clone(),n=1;n<e.length;++n)t=EV.add(t,e[n]);return t}))}}]),n}(CJ);TJ.className="Add",EV.serialization.registerClass(TJ);var IJ=function(e){(0,nu.Z)(n,e);var t=(0,ru.Z)(n);function n(e){return(0,f.Z)(this,n),t.call(this,e)}return(0,d.Z)(n,[{key:"mergeFunction",value:function(e){return(0,EV.tidy)((function(){for(var t=e[0].clone(),n=1;n<e.length;++n)t=EV.mul(t,e[n]);return t}))}}]),n}(CJ);IJ.className="Multiply",EV.serialization.registerClass(IJ);var OJ=function(e){(0,nu.Z)(n,e);var t=(0,ru.Z)(n);function n(e){return(0,f.Z)(this,n),t.call(this,e)}return(0,d.Z)(n,[{key:"mergeFunction",value:function(e){return(0,EV.tidy)((function(){for(var t=e[0].clone(),n=1;n<e.length;++n)t=EV.add(t,e[n]);return EV.mul(1/e.length,t)}))}}]),n}(CJ);OJ.className="Average",EV.serialization.registerClass(OJ);var AJ=function(e){(0,nu.Z)(n,e);var t=(0,ru.Z)(n);function n(e){return(0,f.Z)(this,n),t.call(this,e)}return(0,d.Z)(n,[{key:"mergeFunction",value:function(e){return(0,EV.tidy)((function(){for(var t=e[0],n=1;n<e.length;++n)t=EV.maximum(t,e[n]);return t}))}}]),n}(CJ);AJ.className="Maximum",EV.serialization.registerClass(AJ);var DJ=function(e){(0,nu.Z)(n,e);var t=(0,ru.Z)(n);function n(e){return(0,f.Z)(this,n),t.call(this,e)}return(0,d.Z)(n,[{key:"mergeFunction",value:function(e){return(0,EV.tidy)((function(){for(var t=e[0],n=1;n<e.length;++n)t=EV.minimum(t,e[n]);return t}))}}]),n}(CJ);DJ.className="Minimum",EV.serialization.registerClass(DJ);var MJ=function(e){(0,nu.Z)(n,e);var t=(0,ru.Z)(n);function n(e){var r;return(0,f.Z)(this,n),(r=t.call(this,e)).DEFAULT_AXIS=-1,null==e&&(e={}),r.axis=null==e.axis?r.DEFAULT_AXIS:e.axis,r.supportsMasking=!0,r.reshapeRequired=!1,r}return(0,d.Z)(n,[{key:"build",value:function(e){if(!Array.isArray(e)||!Array.isArray(e[0])||1===e.length)throw new vG("A `Concatenate` layer should be called on a list of at least 2 inputs");e=e;var t,n=!0,r=(0,Et.Z)(e);try{for(r.s();!(t=r.n()).done;){if(null!=t.value){n=!1;break}}}catch(f){r.e(f)}finally{r.f()}if(!n){for(var a=[],o=0;o<e.length;++o){var i=e[o].slice();i.splice(this.axis,1);var s,u=!1,c=(0,Et.Z)(a);try{for(c.s();!(s=c.n()).done;){var l=s.value;if(EV.util.arraysEqual(l,i)){u=!0;break}}}catch(f){c.e(f)}finally{c.f()}u||a.push(i)}if(a.length>1)throw new vG("A `Concatenate` layer requires inputs with matching shapes except for the concat axis. Got input shapes: "+JSON.stringify(e))}}},{key:"mergeFunction",value:function(e){var t=this;return(0,EV.tidy)((function(){return bK(e,t.axis)}))}},{key:"computeOutputShape",value:function(e){if(!Array.isArray(e)||!Array.isArray(e[0]))throw new vG("A `Concatenate` layer should be called on a list of inputs.");var t,n=e,r=n[0].slice(),a=this.axis<0?r.length+this.axis:this.axis,o=(0,Et.Z)(n.slice(1));try{for(o.s();!(t=o.n()).done;){var i=t.value;if(null==r[a]||null==i[a]){r[a]=null;break}r[a]+=i[a]}}catch(s){o.e(s)}finally{o.f()}return r}},{key:"computeMask",value:function(e,t){var n=this;if(null==t)return null;if(!Array.isArray(t))throw new vG("`mask` should be an array for Concatenate");if(!Array.isArray(e))throw new vG("`inputs` should be an array for Concatenate");if(t.length!==e.length)throw new vG("Mismatch in the length of mask (".concat(t.length,") ")+"and the legnth of inputs (".concat(e.length,")"));return EV.tidy((function(){var r=!0;if(t.forEach((function(e){null==e||(r=!1)})),r)return null;for(var a=[],o=0;o<e.length;++o)null==t[o]?a.push(EV.cast(EV.onesLike(e[o]),"bool")):t[o].rank<e[o].rank?a.push(EV.expandDims(t[o],-1)):a.push(t[o]);var i=EV.concat(a,n.axis);return EV.all(i,-1,!1)}))}},{key:"getConfig",value:function(){var e={axis:this.axis},t=MX((0,pC.Z)(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(CJ);function RJ(e,t){for(;e<0;)e+=t;return e}MJ.className="Concatenate",EV.serialization.registerClass(MJ);var PJ=function(e){(0,nu.Z)(n,e);var t=(0,ru.Z)(n);function n(e){var r;return(0,f.Z)(this,n),(r=t.call(this,e)).axes=e.axes,r.normalize=null!=e.normalize&&e.normalize,r.supportsMasking=!0,r.reshapeRequired=!1,r}return(0,d.Z)(n,[{key:"build",value:function(e){EV.util.assert(Array.isArray(e)&&2===e.length&&Array.isArray(e[0])&&Array.isArray(e[1]),(function(){return"A `Dot` layer should be called on a list of exactly 2 inputs."}));var t=e[0],n=e[1];if(t.length>3||n.length>3)throw new gG("Dot layer does not support tensors of 4D or higher rank yet.");var r=this.interpretAxes(t,n);if(t[r[0]]!==n[r[1]])throw new vG("Dimension incompatibility: "+"".concat(t[r[0]]," !== ").concat(n[r[1]]))}},{key:"mergeFunction",value:function(e){if(2!==e.length)throw new vG("A `Dot` layer must be called on exactly 2 inputs, "+"but received ".concat(e.length," input(s)."));var t,n=e[0],r=e[1];return t=Array.isArray(this.axes)?this.axes.map((function(t,n){return RJ(t,e[n].shape.length)})):[RJ(this.axes,n.shape.length),RJ(this.axes,r.shape.length)],this.normalize&&(n=PX(n,t[0]),r=PX(r,t[1])),function(e,t,n){if(e.shape.length>3||t.shape.length>3)throw new gG("batchDot is not implemented for tensors of 4D or higher rank yet");if(EV.util.assert(e.shape.length>=2,(function(){return"batchDot requires the rank of x to be >= 2, "+"but got ".concat(e.shape.length)})),EV.util.assert(e.shape.length>=2,(function(){return"batchDot requires the rank of y to be >= 2, "+"but got ".concat(t.shape.length)})),"number"===typeof n&&(n=[n,n]),"complex64"===e.dtype||"complex64"===t.dtype)throw new gG("batchDot is not implemented for complex64-type Tensors yet.");var r=e.shape.length,a=t.shape.length;null==n&&(n=[r-1,a-2]);var o=n;return EV.tidy((function(){var n,i;if(r>a){n=r-a;for(var s=[],u=0;u<n;++u)s.push(1);t=EV.reshape(t,t.shape.concat(s))}else if(a>r){n=a-r;for(var c=[],l=0;l<n;++l)c.push(1);e=EV.reshape(e,e.shape.concat(c))}else n=0;if(2===e.shape.length&&2===t.shape.length)i=o[0]===o[1]?EV.sum(EV.mul(e,t),o[0]):EV.sum(EV.mul(EV.transpose(e,[1,0]),t),o[1]);else{var f=o[0]!==e.shape.length-1,d=o[1]===t.shape.length-1;i=EV.matMul(e,t,f,d)}if(n>0){for(var p,h=[],m=p=r>a?r+a-3:r-1;m<p+n;++m)h.push(m);i=EV.squeeze(i,h)}return 1===i.shape.length&&(i=EV.expandDims(i,1)),i}))}(n,r,t)}},{key:"interpretAxes",value:function(e,t){return Array.isArray(this.axes)?this.axes:[RJ(this.axes,e.length),RJ(this.axes,t.length)]}},{key:"computeOutputShape",value:function(e){EV.util.assert(Array.isArray(e)&&2===e.length&&Array.isArray(e[0])&&Array.isArray(e[1]),(function(){return"A `Dot` layer should be called on a list of exactly 2 inputs."}));var t=e[0].slice(),n=e[1].slice();if(t.length>3||n.length>3)throw new gG("Dot layer does not support tensors of 4D or higher rank yet.");var r=this.interpretAxes(t,n);t.splice(r[0],1),n.splice(r[1],1),n.splice(0,1);var a=t.concat(n);return 1===a.length&&a.push(1),a}},{key:"computeMask",value:function(e,t){return null}},{key:"getConfig",value:function(){var e={axes:this.axes,normalize:this.normalize},t=MX((0,pC.Z)(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(CJ);PJ.className="Dot",EV.serialization.registerClass(PJ);var jJ=function(e){(0,nu.Z)(n,e);var t=(0,ru.Z)(n);function n(e){var r;return(0,f.Z)(this,n),(r=t.call(this,e)).supportsMasking=!0,r.stddev=e.stddev,r}return(0,d.Z)(n,[{key:"computeOutputShape",value:function(e){return e}},{key:"getConfig",value:function(){var e=MX((0,pC.Z)(n.prototype),"getConfig",this).call(this),t={stddev:this.stddev};return Object.assign(t,e),t}},{key:"call",value:function(e,t){var n=this;return(0,EV.tidy)((function(){n.invokeCallHook(e,t);var r=oX(e);return OK((function(){return(0,EV.add)(kK(r.shape,0,n.stddev),r)}),(function(){return r}),t.training||!1)}))}}]),n}(gX);jJ.className="GaussianNoise",EV.serialization.registerClass(jJ);var FJ=function(e){(0,nu.Z)(n,e);var t=(0,ru.Z)(n);function n(e){var r;return(0,f.Z)(this,n),(r=t.call(this,e)).supportsMasking=!0,r.rate=e.rate,r}return(0,d.Z)(n,[{key:"computeOutputShape",value:function(e){return e}},{key:"getConfig",value:function(){var e=MX((0,pC.Z)(n.prototype),"getConfig",this).call(this),t={rate:this.rate};return Object.assign(t,e),t}},{key:"call",value:function(e,t){var n=this;return(0,EV.tidy)((function(){n.invokeCallHook(e,t);var r=oX(e);if(n.rate>0&&n.rate<1){return OK((function(){var e=Math.sqrt(n.rate/(1-n.rate));return(0,EV.mul)(r,kK(r.shape,1,e))}),(function(){return r}),t.training||!1)}return r}))}}]),n}(gX);FJ.className="GaussianDropout",EV.serialization.registerClass(FJ);var LJ=function(e){(0,nu.Z)(n,e);var t=(0,ru.Z)(n);function n(e){var r;return(0,f.Z)(this,n),(r=t.call(this,e)).supportsMasking=!0,r.rate=e.rate,r.noiseShape=e.noiseShape,r}return(0,d.Z)(n,[{key:"_getNoiseShape",value:function(e){return this.noiseShape||oX(e).shape}},{key:"computeOutputShape",value:function(e){return e}},{key:"getConfig",value:function(){var e=MX((0,pC.Z)(n.prototype),"getConfig",this).call(this),t={rate:this.rate};return Object.assign(t,e),t}},{key:"call",value:function(e,t){var n=this;return(0,EV.tidy)((function(){if(n.rate<1&&n.rate>0){var r=n._getNoiseShape(e);return OK((function(){var t=oX(e),a=-1.7580993408473766,o=(0,EV.greaterEqual)((0,EV.randomUniform)(r),n.rate);o=pK(o,"float32");var i=Math.pow((1-n.rate)*(1+n.rate*Math.pow(a,2)),-.5),s=-i*a*n.rate,u=(0,EV.add)((0,EV.mul)(t,o),(0,EV.mul)((0,EV.add)(o,-1),a));return(0,EV.add)((0,EV.mul)(u,i),s)}),(function(){return oX(e)}),t.training||!1)}return e}))}}]),n}(gX);function BJ(e,t,n,r,a){var o,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:.001;if(2===e.rank)o=EV.batchNorm2d(e,t,n,r,a,i);else if(3===e.rank)o=EV.batchNorm3d(e,t,n,r,a,i);else{if(4!==e.rank)throw new gG("batchNormalization is not implemented for array of rank ".concat(e.rank," ")+"yet");o=EV.batchNorm4d(e,t,n,r,a,i)}return o}function zJ(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.001;return(0,EV.tidy)((function(){var o=EV.moments(e,r),i=o.mean,s=o.variance;return[BJ(e,i,s,n,t,a),i,s]}))}function ZJ(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.001;return(0,EV.tidy)((function(){var o,i=EV.moments(e,r),s=i.mean,u=i.variance,c=[],l=(0,Et.Z)(dK(0,e.rank));try{for(l.s();!(o=l.n()).done;){var f=o.value;-1!==r.indexOf(f)?c.push(1):c.push(e.shape[f])}}catch(v){l.e(v)}finally{l.f()}var d=(0,EV.reshape)(s,c),p=(0,EV.reshape)(u,c),h=null==t?null:(0,EV.reshape)(t,c),m=null==n?null:(0,EV.reshape)(n,c);return[BJ(e,d,p,m,h,a),s,u]}))}LJ.className="AlphaDropout",EV.serialization.registerClass(LJ);var VJ=function(e){(0,nu.Z)(n,e);var t=(0,ru.Z)(n);function n(e){var r;return(0,f.Z)(this,n),null==e&&(e={}),(r=t.call(this,e)).supportsMasking=!0,r.axis=null==e.axis?-1:e.axis,r.momentum=null==e.momentum?.99:e.momentum,r.epsilon=null==e.epsilon?.001:e.epsilon,r.center=null==e.center||e.center,r.scale=null==e.scale||e.scale,r.betaInitializer=JK(e.betaInitializer||"zeros"),r.gammaInitializer=JK(e.gammaInitializer||"ones"),r.movingMeanInitializer=JK(e.movingMeanInitializer||"zeros"),r.movingVarianceInitializer=JK(e.movingVarianceInitializer||"ones"),r.betaConstraint=GG(e.betaConstraint),r.gammaConstraint=GG(e.gammaConstraint),r.betaRegularizer=T$(e.betaRegularizer),r.gammaRegularizer=T$(e.gammaRegularizer),r}return(0,d.Z)(n,[{key:"build",value:function(e){e=iX(e);var t=this.axis>=0?this.axis:this.axis+e.length,n=e[t];if(null==n)throw new vG("Axis ".concat(t," of input tensor should have a defined dimension but ")+"the layer received an input with shape "+"".concat(JSON.stringify(e),"."));this.inputSpec=[new dX({ndim:e.length,axes:i({},t,n)})];var r=[n];this.scale&&(this.gamma=this.addWeight("gamma",r,null,this.gammaInitializer,this.gammaRegularizer,!0,this.gammaConstraint)),this.center&&(this.beta=this.addWeight("beta",r,null,this.betaInitializer,this.betaRegularizer,!0,this.betaConstraint)),this.movingMean=this.addWeight("moving_mean",r,null,this.movingMeanInitializer,null,!1),this.movingVariance=this.addWeight("moving_variance",r,null,this.movingVarianceInitializer,null,!1),this.built=!0}},{key:"call",value:function(e,t){var n=this;return(0,EV.tidy)((function(){var r=null!=t.training&&t.training,o=oX(e),i=o.shape,s=i.length,u=dK(0,s),c=n.axis>=0?n.axis:n.axis+s;u.splice(c,1);var l=bG(1,s);l[c]=i[c];var f=u.slice();f.sort();var d=!EV.util.arraysEqual(f,dK(0,s).slice(0,s-1));if(!r)return function(){if(d){var e=(0,EV.reshape)(n.movingMean.read(),l),t=(0,EV.reshape)(n.movingVariance.read(),l),r=n.center?(0,EV.reshape)(n.beta.read(),l):null,a=n.scale?(0,EV.reshape)(n.gamma.read(),l):null;return BJ(o,e,t,r,a,n.epsilon)}return BJ(o,n.movingMean.read(),n.movingVariance.read(),null==n.beta?null:n.beta.read(),null==n.gamma?null:n.gamma.read(),n.epsilon)}();var p=function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.001;return EV.util.arraysEqual(r.slice().sort(),dK(0,e.rank-1))?zJ(e,t,n,r,a):ZJ(e,t,n,r,a)}(o,n.gamma.read(),n.beta.read(),u,n.epsilon),h=(0,a.Z)(p,3),m=h[0],v=h[1],g=h[2],y=function(e,t,n){EV.tidy((function(){var r=1-n,a=e.read(),o=EV.mul(EV.sub(a,t),r);e.write(EV.sub(a,o))}))};return y(n.movingMean,v,n.momentum),y(n.movingVariance,g,n.momentum),m}))}},{key:"getConfig",value:function(){var e={axis:this.axis,momentum:this.momentum,epsilon:this.epsilon,center:this.center,scale:this.scale,betaInitializer:$K(this.betaInitializer),gammaInitializer:$K(this.gammaInitializer),movingMeanInitializer:$K(this.movingMeanInitializer),movingVarianceInitializer:$K(this.movingVarianceInitializer),betaRegularizer:E$(this.betaRegularizer),gammaRegularizer:E$(this.gammaRegularizer),betaConstraint:WG(this.betaConstraint),gammaConstraint:WG(this.gammaConstraint)},t=MX((0,pC.Z)(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(gX);VJ.className="BatchNormalization",EV.serialization.registerClass(VJ);var UJ=function(e){(0,nu.Z)(n,e);var t=(0,ru.Z)(n);function n(e){var r;if((0,f.Z)(this,n),null==e&&(e={}),(r=t.call(this,e)).axis=null==e.axis?-1:e.axis,"number"===typeof r.axis){if(!Number.isInteger(r.axis))throw new Error("Expected axis to be an integer, but received ".concat(r.axis))}else{if(!Array.isArray(r.axis))throw new Error("Expected axis to be an integer or an array of integers, "+"but received ".concat(JSON.stringify(r.axis)));var a,o=(0,Et.Z)(r.axis);try{for(o.s();!(a=o.n()).done;){var i=a.value;if(!Number.isInteger(i))throw new Error("Expected axis to be an array of integers, "+"but received ".concat(JSON.stringify(r.axis)))}}catch(s){o.e(s)}finally{o.f()}}return r.epsilon=null==e.epsilon?.001:e.epsilon,r.center=null==e.center||e.center,r.scale=null==e.scale||e.scale,r.betaInitializer=JK(e.betaInitializer||"zeros"),r.gammaInitializer=JK(e.gammaInitializer||"ones"),r.betaRegularizer=T$(e.betaRegularizer),r.gammaRegularizer=T$(e.gammaRegularizer),r.supportsMasking=!0,r}return(0,d.Z)(n,[{key:"build",value:function(e){var t=(e=iX(e)).length;"number"===typeof this.axis&&(this.axis=[this.axis]);for(var n=0;n<this.axis.length;++n)this.axis[n]<0&&(this.axis[n]+=t);var r,a=(0,Et.Z)(this.axis);try{for(a.s();!(r=a.n()).done;){var o=r.value;if(o<0||o>=t)throw new Error("Invalid axis: ".concat(o))}}catch(s){a.e(s)}finally{a.f()}if(this.axis.length!==AG(this.axis).length)throw new Error("Found duplicate axes in: ".concat(this.axis));var i=this.axis.map((function(t){return e[t]}));this.scale?this.gamma=this.addWeight("gamma",i,"float32",this.gammaInitializer,this.gammaRegularizer,true):this.gamma=null,this.center?this.beta=this.addWeight("beta",i,"float32",this.betaInitializer,this.betaRegularizer,true):this.beta=null,this.built=!0}},{key:"call",value:function(e,t){var n=this,r=oX(e),a=r.shape,o=a.length;return(0,EV.tidy)((function(){var e,t=(0,EV.moments)(r,n.axis,!0),i=t.mean,s=t.variance,u=bG(1,o),c=(0,Et.Z)(n.axis);try{for(c.s();!(e=c.n()).done;){var l=e.value;u[l]=a[l]}}catch(g){c.e(g)}finally{c.f()}for(var f=function(e){return null!=e&&e.shape.length!==o?EV.reshape(e,u):e},d=f(n.gamma.read()),p=f(n.beta.read()),h=[],m=[],v=0;v<o;++v)-1!==n.axis.indexOf(v)?(h.push(a[v]),m.push(1)):(h.push(1),m.push(a[v]));return i=EV.tile(i,h),s=EV.tile(s,h),d=EV.tile(d,m),p=EV.tile(p,m),BJ(r,i,s,p,d,n.epsilon)}))}},{key:"getConfig",value:function(){var e={axis:this.axis,epsilon:this.epsilon,center:this.center,scale:this.scale,betaInitializer:$K(this.betaInitializer),gammaInitializer:$K(this.gammaInitializer),betaRegularizer:E$(this.betaRegularizer),gammaRegularizer:E$(this.gammaRegularizer)},t=MX((0,pC.Z)(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(gX);UJ.className="LayerNormalization",EV.serialization.registerClass(UJ);var qJ=function(e){(0,nu.Z)(n,e);var t=(0,ru.Z)(n);function n(e){var r;if((0,f.Z)(this,n),null==e&&(e={}),(r=t.call(this,e)).dataFormat=null==e.dataFormat?"channelsLast":e.dataFormat,null==e.padding)r.padding=[[1,1],[1,1]];else if("number"===typeof e.padding)r.padding=[[e.padding,e.padding],[e.padding,e.padding]];else{if(e.padding=e.padding,2!==e.padding.length)throw new vG("ZeroPadding2D expects padding to be a length-2 array, but "+"received a length-".concat(e.padding.length," array."));var a,o;if("number"===typeof e.padding[0])a=[e.padding[0],e.padding[0]],o=[e.padding[1],e.padding[1]];else{if(e.padding=e.padding,2!==e.padding[0].length)throw new vG("ZeroPadding2D expects height padding to be a length-2 array, "+"but received a length-".concat(e.padding[0].length," array."));if(a=e.padding[0],2!==e.padding[1].length)throw new vG("ZeroPadding2D expects width padding to be a length-2 array, "+"but received a length-".concat(e.padding[1].length," array."));o=e.padding[1]}r.padding=[a,o]}return r.inputSpec=[new dX({ndim:4})],r}return(0,d.Z)(n,[{key:"computeOutputShape",value:function(e){var t,n;return e=iX(e),"channelsFirst"===this.dataFormat?(t=null!=e[2]&&e[2]>=0?e[2]+this.padding[0][0]+this.padding[0][1]:null,n=null!=e[3]&&e[3]>=0?e[3]+this.padding[1][0]+this.padding[1][1]:null,[e[0],e[1],t,n]):(t=null!=e[1]&&e[1]>=0?e[1]+this.padding[0][0]+this.padding[0][1]:null,n=null!=e[2]&&e[2]>=0?e[2]+this.padding[1][0]+this.padding[1][1]:null,[e[0],t,n,e[3]])}},{key:"call",value:function(e,t){var n=this;return(0,EV.tidy)((function(){return t=oX(e),r=n.padding,a=n.dataFormat,(0,EV.tidy)((function(){if(4!==t.rank)throw new vG("temporalPadding expects input tensor to be 4-D, but received a "+"".concat(t.rank,"-D tensor."));if(null==r&&(r=[[1,1],[1,1]]),2!==r.length||2!==r[0].length||2!==r[1].length)throw new vG("spatial2dPadding expects `padding` to be an Array of two Arrays, each of which is an Array of two integers.");if(null==a&&(a="channelsLast"),"channelsLast"!==a&&"channelsFirst"!==a)throw new vG("Unknown data format: ".concat(a,". ")+"Supported data formats are 'channelsLast' and 'channelsFirst.");var e;return e="channelsFirst"===a?[[0,0],[0,0],r[0],r[1]]:[[0,0],r[0],r[1],[0,0]],EV.pad(t,e)}));var t,r,a}))}},{key:"getConfig",value:function(){var e={padding:this.padding,dataFormat:this.dataFormat},t=MX((0,pC.Z)(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(gX);function WJ(e,t,n,r,a,o){return(0,EV.tidy)((function(){var i;eK(a),nK(o),tK(r),null==n&&(n=[1,1]),null==r&&(r="valid"),null==a&&(a="channelsLast"),null==o&&(o="max"),e=L$(e,a);var s="same"===r?"same":"valid";return i="max"===o?EV.maxPool(e,t,n,s):EV.avgPool(e,t,n,s),"channelsFirst"===a&&(i=EV.transpose(i,[0,3,1,2])),i}))}function HJ(e,t,n,r,a,o){return(0,EV.tidy)((function(){var i;eK(a),nK(o),tK(r),null==n&&(n=[1,1,1]),null==r&&(r="valid"),null==a&&(a="channelsLast"),null==o&&(o="max"),e=B$(e,a);var s="same"===r?"same":"valid";return i="max"===o?EV.maxPool3d(e,t,n,s):EV.avgPool3d(e,t,n,s),"channelsFirst"===a&&(i=EV.transpose(i,[0,4,1,2,3])),i}))}qJ.className="ZeroPadding2D",EV.serialization.registerClass(qJ);var GJ=function(e){(0,nu.Z)(n,e);var t=(0,ru.Z)(n);function n(e){var r;if((0,f.Z)(this,n),null==e.poolSize&&(e.poolSize=2),r=t.call(this,e),"number"===typeof e.poolSize)r.poolSize=[e.poolSize];else{if(!Array.isArray(e.poolSize)||1!==e.poolSize.length||"number"!==typeof e.poolSize[0])throw new vG("poolSize for 1D convolutional layer must be a number or an Array of a single number, but received "+"".concat(JSON.stringify(e.poolSize)));r.poolSize=e.poolSize}if(PG(r.poolSize,"poolSize"),null==e.strides)r.strides=r.poolSize;else if("number"===typeof e.strides)r.strides=[e.strides];else{if(!Array.isArray(e.strides)||1!==e.strides.length||"number"!==typeof e.strides[0])throw new vG("strides for 1D convolutional layer must be a number or an Array of a single number, but received "+"".concat(JSON.stringify(e.strides)));r.strides=e.strides}return PG(r.strides,"strides"),r.padding=null==e.padding?"valid":e.padding,tK(r.padding),r.inputSpec=[new dX({ndim:3})],r}return(0,d.Z)(n,[{key:"computeOutputShape",value:function(e){var t=j$((e=iX(e))[1],this.poolSize[0],this.padding,this.strides[0]);return[e[0],t,e[2]]}},{key:"call",value:function(e,t){var n=this;return(0,EV.tidy)((function(){n.invokeCallHook(e,t),e=hK(oX(e),2);var r=n.poolingFunction(oX(e),[n.poolSize[0],1],[n.strides[0],1],n.padding,"channelsLast");return EV.squeeze(r,[2])}))}},{key:"getConfig",value:function(){var e={poolSize:this.poolSize,padding:this.padding,strides:this.strides},t=MX((0,pC.Z)(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(gX),KJ=function(e){(0,nu.Z)(n,e);var t=(0,ru.Z)(n);function n(e){return(0,f.Z)(this,n),t.call(this,e)}return(0,d.Z)(n,[{key:"poolingFunction",value:function(e,t,n,r,a){return eK(a),tK(r),WJ(e,t,n,r,a,"max")}}]),n}(GJ);KJ.className="MaxPooling1D",EV.serialization.registerClass(KJ);var XJ=function(e){(0,nu.Z)(n,e);var t=(0,ru.Z)(n);function n(e){return(0,f.Z)(this,n),t.call(this,e)}return(0,d.Z)(n,[{key:"poolingFunction",value:function(e,t,n,r,a){return eK(a),tK(r),WJ(e,t,n,r,a,"avg")}}]),n}(GJ);XJ.className="AveragePooling1D",EV.serialization.registerClass(XJ);var YJ=function(e){(0,nu.Z)(n,e);var t=(0,ru.Z)(n);function n(e){var r;if((0,f.Z)(this,n),null==e.poolSize&&(e.poolSize=[2,2]),(r=t.call(this,e)).poolSize=Array.isArray(e.poolSize)?e.poolSize:[e.poolSize,e.poolSize],null==e.strides)r.strides=r.poolSize;else if(Array.isArray(e.strides)){if(2!==e.strides.length)throw new vG("If the strides property of a 2D pooling layer is an Array, it is expected to have a length of 2, but received length "+"".concat(e.strides.length,"."));r.strides=e.strides}else r.strides=[e.strides,e.strides];return PG(r.poolSize,"poolSize"),PG(r.strides,"strides"),r.padding=null==e.padding?"valid":e.padding,r.dataFormat=null==e.dataFormat?"channelsLast":e.dataFormat,eK(r.dataFormat),tK(r.padding),r.inputSpec=[new dX({ndim:4})],r}return(0,d.Z)(n,[{key:"computeOutputShape",value:function(e){e=iX(e);var t="channelsFirst"===this.dataFormat?e[2]:e[1],n="channelsFirst"===this.dataFormat?e[3]:e[2];return t=j$(t,this.poolSize[0],this.padding,this.strides[0]),n=j$(n,this.poolSize[1],this.padding,this.strides[1]),"channelsFirst"===this.dataFormat?[e[0],e[1],t,n]:[e[0],t,n,e[3]]}},{key:"call",value:function(e,t){var n=this;return(0,EV.tidy)((function(){return n.invokeCallHook(e,t),n.poolingFunction(oX(e),n.poolSize,n.strides,n.padding,n.dataFormat)}))}},{key:"getConfig",value:function(){var e={poolSize:this.poolSize,padding:this.padding,strides:this.strides,dataFormat:this.dataFormat},t=MX((0,pC.Z)(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(gX),$J=function(e){(0,nu.Z)(n,e);var t=(0,ru.Z)(n);function n(e){return(0,f.Z)(this,n),t.call(this,e)}return(0,d.Z)(n,[{key:"poolingFunction",value:function(e,t,n,r,a){return eK(a),tK(r),WJ(e,t,n,r,a,"max")}}]),n}(YJ);$J.className="MaxPooling2D",EV.serialization.registerClass($J);var JJ=function(e){(0,nu.Z)(n,e);var t=(0,ru.Z)(n);function n(e){return(0,f.Z)(this,n),t.call(this,e)}return(0,d.Z)(n,[{key:"poolingFunction",value:function(e,t,n,r,a){return eK(a),tK(r),WJ(e,t,n,r,a,"avg")}}]),n}(YJ);JJ.className="AveragePooling2D",EV.serialization.registerClass(JJ);var QJ=function(e){(0,nu.Z)(n,e);var t=(0,ru.Z)(n);function n(e){var r;if((0,f.Z)(this,n),null==e.poolSize&&(e.poolSize=[2,2,2]),(r=t.call(this,e)).poolSize=Array.isArray(e.poolSize)?e.poolSize:[e.poolSize,e.poolSize,e.poolSize],null==e.strides)r.strides=r.poolSize;else if(Array.isArray(e.strides)){if(3!==e.strides.length)throw new vG("If the strides property of a 3D pooling layer is an Array, it is expected to have a length of 3, but received length "+"".concat(e.strides.length,"."));r.strides=e.strides}else r.strides=[e.strides,e.strides,e.strides];return PG(r.poolSize,"poolSize"),PG(r.strides,"strides"),r.padding=null==e.padding?"valid":e.padding,r.dataFormat=null==e.dataFormat?"channelsLast":e.dataFormat,eK(r.dataFormat),tK(r.padding),r.inputSpec=[new dX({ndim:5})],r}return(0,d.Z)(n,[{key:"computeOutputShape",value:function(e){e=iX(e);var t="channelsFirst"===this.dataFormat?e[2]:e[1],n="channelsFirst"===this.dataFormat?e[3]:e[2],r="channelsFirst"===this.dataFormat?e[4]:e[3];return t=j$(t,this.poolSize[0],this.padding,this.strides[0]),n=j$(n,this.poolSize[1],this.padding,this.strides[1]),r=j$(r,this.poolSize[2],this.padding,this.strides[2]),"channelsFirst"===this.dataFormat?[e[0],e[1],t,n,r]:[e[0],t,n,r,e[4]]}},{key:"call",value:function(e,t){var n=this;return(0,EV.tidy)((function(){return n.invokeCallHook(e,t),n.poolingFunction(oX(e),n.poolSize,n.strides,n.padding,n.dataFormat)}))}},{key:"getConfig",value:function(){var e={poolSize:this.poolSize,padding:this.padding,strides:this.strides,dataFormat:this.dataFormat},t=MX((0,pC.Z)(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(gX),eQ=function(e){(0,nu.Z)(n,e);var t=(0,ru.Z)(n);function n(e){return(0,f.Z)(this,n),t.call(this,e)}return(0,d.Z)(n,[{key:"poolingFunction",value:function(e,t,n,r,a){return eK(a),tK(r),HJ(e,t,n,r,a,"max")}}]),n}(QJ);eQ.className="MaxPooling3D",EV.serialization.registerClass(eQ);var tQ=function(e){(0,nu.Z)(n,e);var t=(0,ru.Z)(n);function n(e){return(0,f.Z)(this,n),t.call(this,e)}return(0,d.Z)(n,[{key:"poolingFunction",value:function(e,t,n,r,a){return eK(a),tK(r),HJ(e,t,n,r,a,"avg")}}]),n}(QJ);tQ.className="AveragePooling3D",EV.serialization.registerClass(tQ);var nQ=function(e){(0,nu.Z)(n,e);var t=(0,ru.Z)(n);function n(e){var r;return(0,f.Z)(this,n),(r=t.call(this,e)).inputSpec=[new dX({ndim:3})],r}return(0,d.Z)(n,[{key:"computeOutputShape",value:function(e){return[e[0],e[2]]}},{key:"call",value:function(e,t){throw new gG}}]),n}(gX),rQ=function(e){(0,nu.Z)(n,e);var t=(0,ru.Z)(n);function n(e){return(0,f.Z)(this,n),t.call(this,e||{})}return(0,d.Z)(n,[{key:"call",value:function(e,t){return(0,EV.tidy)((function(){var t=oX(e);return EV.mean(t,1)}))}}]),n}(nQ);rQ.className="GlobalAveragePooling1D",EV.serialization.registerClass(rQ);var aQ=function(e){(0,nu.Z)(n,e);var t=(0,ru.Z)(n);function n(e){return(0,f.Z)(this,n),t.call(this,e||{})}return(0,d.Z)(n,[{key:"call",value:function(e,t){return(0,EV.tidy)((function(){var t=oX(e);return EV.max(t,1)}))}}]),n}(nQ);aQ.className="GlobalMaxPooling1D",EV.serialization.registerClass(aQ);var oQ=function(e){(0,nu.Z)(n,e);var t=(0,ru.Z)(n);function n(e){var r;return(0,f.Z)(this,n),(r=t.call(this,e)).dataFormat=null==e.dataFormat?"channelsLast":e.dataFormat,eK(r.dataFormat),r.inputSpec=[new dX({ndim:4})],r}return(0,d.Z)(n,[{key:"computeOutputShape",value:function(e){return e=e,"channelsLast"===this.dataFormat?[e[0],e[3]]:[e[0],e[1]]}},{key:"call",value:function(e,t){throw new gG}},{key:"getConfig",value:function(){var e={dataFormat:this.dataFormat},t=MX((0,pC.Z)(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(gX),iQ=function(e){(0,nu.Z)(n,e);var t=(0,ru.Z)(n);function n(){return(0,f.Z)(this,n),t.apply(this,arguments)}return(0,d.Z)(n,[{key:"call",value:function(e,t){var n=this;return(0,EV.tidy)((function(){var t=oX(e);return"channelsLast"===n.dataFormat?EV.mean(t,[1,2]):EV.mean(t,[2,3])}))}}]),n}(oQ);iQ.className="GlobalAveragePooling2D",EV.serialization.registerClass(iQ);var sQ=function(e){(0,nu.Z)(n,e);var t=(0,ru.Z)(n);function n(){return(0,f.Z)(this,n),t.apply(this,arguments)}return(0,d.Z)(n,[{key:"call",value:function(e,t){var n=this;return(0,EV.tidy)((function(){var t=oX(e);return"channelsLast"===n.dataFormat?EV.max(t,[1,2]):EV.max(t,[2,3])}))}}]),n}(oQ);sQ.className="GlobalMaxPooling2D",EV.serialization.registerClass(sQ);var uQ=function(e){(0,nu.Z)(n,e);var t=(0,ru.Z)(n);function n(e){var r;return(0,f.Z)(this,n),(r=t.call(this,e)).layer=e.layer,r}return(0,d.Z)(n,[{key:"build",value:function(e){this.built=!0}},{key:"trainable",get:function(){return null!=this.layer&&this.layer.trainable},set:function(e){null!=this.layer&&(this.layer.trainable=e)}},{key:"trainableWeights",get:function(){return this.layer.trainableWeights}},{key:"nonTrainableWeights",get:function(){return this.layer.nonTrainableWeights}},{key:"updates",get:function(){return this.layer._updates}},{key:"losses",get:function(){return this.layer.losses}},{key:"getWeights",value:function(){return this.layer.getWeights()}},{key:"setWeights",value:function(e){this.layer.setWeights(e)}},{key:"getConfig",value:function(){var e={layer:{className:this.layer.getClassName(),config:this.layer.getConfig()}},t=MX((0,pC.Z)(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}},{key:"setFastWeightInitDuringBuild",value:function(e){MX((0,pC.Z)(n.prototype),"setFastWeightInitDuringBuild",this).call(this,e),null!=this.layer&&this.layer.setFastWeightInitDuringBuild(e)}}],[{key:"fromConfig",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=t.layer,a=RX(r,n);delete t.layer;var o={layer:a};return Object.assign(o,t),new e(o)}}]),n}(gX),cQ=function(e){(0,nu.Z)(n,e);var t=(0,ru.Z)(n);function n(e){var r;return(0,f.Z)(this,n),(r=t.call(this,e)).supportsMasking=!0,r}return(0,d.Z)(n,[{key:"build",value:function(e){if((e=iX(e)).length<3)throw new vG("TimeDistributed layer expects an input shape >= 3D, but received "+"input shape ".concat(JSON.stringify(e)));this.inputSpec=[{shape:e}];var t=[e[0]].concat(e.slice(2));this.layer.built||(this.layer.build(t),this.layer.built=!0),MX((0,pC.Z)(n.prototype),"build",this).call(this,e)}},{key:"computeOutputShape",value:function(e){var t=[(e=iX(e))[0]].concat(e.slice(2)),n=this.layer.computeOutputShape(t),r=e[1];return[n[0],r].concat(n.slice(1))}},{key:"call",value:function(e,t){var n=this;return(0,EV.tidy)((function(){return nJ((function(e,r){return[oX(n.layer.call(e,t)),[]]}),e=oX(e),[],!1,null,null,!1,!0)[1]}))}}]),n}(uQ);cQ.className="TimeDistributed",EV.serialization.registerClass(cQ);var lQ=function(e){(0,nu.Z)(n,e);var t=(0,ru.Z)(n);function n(e){var r;(0,f.Z)(this,n),r=t.call(this,e);var a=e.layer.getConfig(),o={};o.className=e.layer.getClassName(),o.config=a,r.forwardLayer=RX(o),a.goBackwards=!0!==a.goBackwards;var i,s={};if(s.className=e.layer.getClassName(),s.config=a,r.backwardLayer=RX(s),r.forwardLayer.name="forward_"+r.forwardLayer.name,r.backwardLayer.name="backward_"+r.backwardLayer.name,r.mergeMode=void 0===e.mergeMode?"concat":e.mergeMode,i=r.mergeMode,MG(JG,"BidirectionalMergeMode",i),e.weights)throw new gG("weights support is not implemented for Bidirectional layer yet.");return r._stateful=e.layer.stateful,r.returnSequences=e.layer.returnSequences,r.returnState=e.layer.returnState,r.supportsMasking=!0,r._trainable=!0,r.inputSpec=e.layer.inputSpec,r.numConstants=null,r}return(0,d.Z)(n,[{key:"trainable",get:function(){return this._trainable},set:function(e){this._trainable=e,null!=this.forwardLayer&&(this.forwardLayer.trainable=e),null!=this.backwardLayer&&(this.backwardLayer.trainable=e)}},{key:"getWeights",value:function(){return this.forwardLayer.getWeights().concat(this.backwardLayer.getWeights())}},{key:"setWeights",value:function(e){var t=e.length,n=Math.floor(t/2);this.forwardLayer.setWeights(e.slice(0,n)),this.backwardLayer.setWeights(e.slice(n))}},{key:"computeOutputShape",value:function(e){var t,n,r,a=this.forwardLayer.computeOutputShape(e);return Array.isArray(a)&&Array.isArray(a[0])||(a=[a]),a=a,this.returnState?(r=a.slice(1),t=a[0]):t=a[0],t=t,"concat"===this.mergeMode?(t[t.length-1]*=2,n=[t]):n=null==this.mergeMode?[t,t.slice()]:[t],this.returnState?null==this.mergeMode?n.concat(r).concat(r.slice()):[t].concat(r).concat(r.slice()):kG(n)}},{key:"apply",value:function(e,t){var a=null==t?null:t.initialState,o=null==t?null:t.constants;null==t&&(t={});var i=tJ(e,a,o,this.numConstants);if(e=i.inputs,a=i.initialState,o=i.constants,Array.isArray(e)&&(a=e.slice(1),e=e[0]),(null==a||0===a.length)&&null==o)return MX((0,pC.Z)(n.prototype),"apply",this).call(this,e,t);var s=[],u=[];if(null!=a){var c=a.length;if(c%2>0)throw new vG("When passing `initialState` to a Bidrectional RNN, the state should be an Array containing the states of the underlying RNNs.");t.initialState=a,s.push.apply(s,(0,r.Z)(a));var l=a.map((function(e){return new dX({shape:e.shape})}));this.forwardLayer.stateSpec=l.slice(0,c/2),this.backwardLayer.stateSpec=l.slice(c/2),u.push.apply(u,(0,r.Z)(l))}if(null!=o)throw new gG("Support for constants in Bidirectional layers is not implemented yet.");for(var f=s[0]instanceof pX,d=0,p=s;d<p.length;d++){if(p[d]instanceof pX!==f)throw new vG("The initial state of a Bidirectional layer cannot be specified as a mix of symbolic and non-symbolic tensors")}if(f){var h=[e].concat(s),m=this.inputSpec.concat(u),v=this.inputSpec;this.inputSpec=m;var g=MX((0,pC.Z)(n.prototype),"apply",this).call(this,h,t);return this.inputSpec=v,g}return MX((0,pC.Z)(n.prototype),"apply",this).call(this,e,t)}},{key:"call",value:function(e,t){var n=this;return(0,EV.tidy)((function(){var r,a,o,i,s=t.initialState;if(null==s)r=n.forwardLayer.call(e,t),a=n.backwardLayer.call(e,t);else{var u=s.slice(0,s.length/2),c=s.slice(s.length/2);r=n.forwardLayer.call(e,Object.assign(t,{initialState:u})),a=n.backwardLayer.call(e,Object.assign(t,{initialState:c}))}return n.returnState&&(Array.isArray(r)&&(o=r.slice(1).concat(a.slice(1))),r=r[0],a=a[0]),n.returnSequences&&(a=EV.reverse(a,1)),"concat"===n.mergeMode?i=bK([r,a]):"sum"===n.mergeMode?i=EV.add(r,a):"ave"===n.mergeMode?i=EV.mul(.5,EV.add(r,a)):"mul"===n.mergeMode?i=EV.mul(r,a):null==n.mergeMode&&(i=[r,a]),n.returnState?null==n.mergeMode?i.concat(o):[i].concat(o):i}))}},{key:"resetStates",value:function(e){this.forwardLayer.resetStates(),this.backwardLayer.resetStates()}},{key:"build",value:function(e){var t=this;aK(this.forwardLayer.name,(function(){t.forwardLayer.build(e)})),aK(this.backwardLayer.name,(function(){t.backwardLayer.build(e)})),this.built=!0}},{key:"computeMask",value:function(e,t){var n;if(Array.isArray(t)&&(t=t[0]),n=this.returnSequences?null==this.mergeMode?[t,t]:t:null==this.mergeMode?[null,null]:null,this.returnState){var r=this.forwardLayer.states.map((function(e){return null}));return Array.isArray(n)?n.concat(r).concat(r):[n].concat(r).concat(r)}return n}},{key:"trainableWeights",get:function(){return this.forwardLayer.trainableWeights.concat(this.backwardLayer.trainableWeights)}},{key:"nonTrainableWeights",get:function(){return this.forwardLayer.nonTrainableWeights.concat(this.backwardLayer.nonTrainableWeights)}},{key:"setFastWeightInitDuringBuild",value:function(e){MX((0,pC.Z)(n.prototype),"setFastWeightInitDuringBuild",this).call(this,e),null!=this.forwardLayer&&this.forwardLayer.setFastWeightInitDuringBuild(e),null!=this.backwardLayer&&this.backwardLayer.setFastWeightInitDuringBuild(e)}},{key:"getConfig",value:function(){var e={mergeMode:this.mergeMode},t=MX((0,pC.Z)(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}],[{key:"fromConfig",value:function(e,t){var n=RX(t.layer);if(delete t.layer,null!=t.numConstants)throw new gG("Deserialization of a Bidirectional layer with numConstants present is not supported yet.");var r=t;return r.layer=n,new e(r)}}]),n}(uQ);lQ.className="Bidirectional",EV.serialization.registerClass(lQ);var fQ=n(2652),dQ=n(6699);function pQ(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Map,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new Set;if(null==e)return null;if("function"===typeof Blob&&e instanceof Blob)return e.slice();if(r.has(e))throw new Error("Circular references are not supported.");if(n.has(e))return n.get(e);var a=t(e);if(a.recurse&&null!==a.value)throw new Error("A deep map function may not return both a value and recurse=true.");if(a.recurse){if(gQ(e)){var o=Array.isArray(e)?[]:{};for(var i in r.add(e),e){var s=e[i],u=pQ(s,t,n,r);o[i]=u}return r.delete(e),e.__proto__&&(o.__proto__=e.__proto__),o}throw new Error("Can't recurse into non-iterable type: ".concat(e))}return n.set(e,a.value),a.value}function hQ(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:vQ;return mQ(e,t)}function mQ(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Set,r=e[0];if(n.has(r))throw new Error("Circular references are not supported.");var a=t(e);if(a.recurse&&null!==a.value)throw new Error("A deep zip function may not return both a value and recurse=true.");if(a.recurse){if(gQ(r)){var o=Array.isArray(r)?[]:{};n.add(r);var i=function(r){var a=mQ(e.map((function(e){return e[r]})),t,n);o[r]=a};for(var s in r)i(s);return n.delete(r),o}throw new Error("Can't recurse into non-iterable type: ".concat(r))}return a.value}function vQ(e){return null===e?null:gQ(e[0])?{value:null,recurse:!0}:{value:e,recurse:!1}}function gQ(e){var t=!1;EV.env().get("IS_BROWSER")?t=e instanceof TextDecoder:t=e instanceof n(4977).StringDecoder;return null!=e&&!ArrayBuffer.isView(e)&&(Array.isArray(e)||"object"===typeof e&&!(e instanceof EV.Tensor)&&!(e instanceof Promise)&&!t)}function yQ(e){return function(e,t){return pQ(e,t)}(e,bQ)}function bQ(e){return e instanceof EV.Tensor?{value:e.clone(),recurse:!1}:gQ(e)?{value:null,recurse:!0}:{value:e,recurse:!1}}var xQ=function(){function e(t){if((0,f.Z)(this,e),this.capacity=t,this.begin=0,this.end=0,null==t)throw new RangeError("Can't create a ring buffer of unknown capacity.");if(t<1)throw new RangeError("Can't create ring buffer of capacity < 1.");this.data=new Array(t),this.doubledCapacity=2*t}return(0,d.Z)(e,[{key:"wrap",value:function(e){for(;e<0;)e+=this.doubledCapacity;return e%this.doubledCapacity}},{key:"get",value:function(e){if(e<0)throw new RangeError("Can't get item at a negative index.");return this.data[e%this.capacity]}},{key:"set",value:function(e,t){if(e<0)throw new RangeError("Can't set item at a negative index.");this.data[e%this.capacity]=t}},{key:"length",value:function(){var e=this.end-this.begin;return e<0&&(e=this.doubledCapacity+e),e}},{key:"isFull",value:function(){return this.length()===this.capacity}},{key:"isEmpty",value:function(){return 0===this.length()}},{key:"push",value:function(e){if(this.isFull())throw new RangeError("Ring buffer is full.");this.set(this.end,e),this.end=this.wrap(this.end+1)}},{key:"pushAll",value:function(e){var t,n=(0,Et.Z)(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;this.push(r)}}catch(a){n.e(a)}finally{n.f()}}},{key:"pop",value:function(){if(this.isEmpty())throw new RangeError("Ring buffer is empty.");this.end=this.wrap(this.end-1);var e=this.get(this.end);return this.set(this.end,void 0),e}},{key:"unshift",value:function(e){if(this.isFull())throw new RangeError("Ring buffer is full.");this.begin=this.wrap(this.begin-1),this.set(this.begin,e)}},{key:"shift",value:function(){if(this.isEmpty())throw new RangeError("Ring buffer is empty.");var e=this.get(this.begin);return this.set(this.begin,void 0),this.begin=this.wrap(this.begin+1),e}},{key:"shuffleExcise",value:function(e){if(this.isEmpty())throw new RangeError("Ring buffer is empty.");var t=this.wrap(this.begin+e),n=this.get(t);return this.set(t,this.pop()),n}}]),e}(),wQ=function(e){(0,nu.Z)(n,e);var t=(0,ru.Z)(n);function n(){return(0,f.Z)(this,n),t.call(this,n.INITIAL_CAPACITY)}return(0,d.Z)(n,[{key:"isFull",value:function(){return!1}},{key:"push",value:function(e){MX((0,pC.Z)(n.prototype),"isFull",this).call(this)&&this.expand(),MX((0,pC.Z)(n.prototype),"push",this).call(this,e)}},{key:"unshift",value:function(e){MX((0,pC.Z)(n.prototype),"isFull",this).call(this)&&this.expand(),MX((0,pC.Z)(n.prototype),"unshift",this).call(this,e)}},{key:"expand",value:function(){for(var e=2*this.capacity,t=new Array(e),n=this.length(),r=0;r<n;r++)t[r]=this.get(this.wrap(this.begin+r));this.data=t,this.capacity=e,this.doubledCapacity=2*this.capacity,this.begin=0,this.end=n}}]),n}(xQ);function kQ(e){return new CQ(e)}function SQ(e,t){return new LQ(e,t)}wQ.INITIAL_CAPACITY=32;var _Q,NQ=function(){function e(){(0,f.Z)(this,e)}return(0,d.Z)(e,[{key:"toArray",value:function(){var e=(0,o.Z)(l().mark((function e(){var t,n;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],e.next=3,this.next();case 3:n=e.sent;case 4:if(n.done){e.next=11;break}return t.push(n.value),e.next=8,this.next();case 8:n=e.sent,e.next=4;break;case 11:return e.abrupt("return",t);case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"toArrayForTest",value:function(){var e=(0,o.Z)(l().mark((function e(){var t,n,r;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.prefetch(100),n=[],e.next=4,t.next();case 4:r=e.sent;case 5:if(r.done){e.next=12;break}return n.push(r.value),e.next=9,t.next();case 9:r=e.sent,e.next=5;break;case 12:return e.abrupt("return",n);case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"resolveFully",value:function(){var e=(0,o.Z)(l().mark((function e(){var t;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.next();case 2:t=e.sent;case 3:if(t.done){e.next=9;break}return e.next=6,this.next();case 6:t=e.sent,e.next=3;break;case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"resolveWhile",value:function(){var e=(0,o.Z)(l().mark((function e(t){var n,r;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.next();case 2:n=e.sent,r=t(n.value);case 4:if(n.done||!r){e.next=11;break}return e.next=7,this.next();case 7:n=e.sent,r=t(n.value),e.next=4;break;case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"handleErrors",value:function(e){return new RQ(this,e)}},{key:"filter",value:function(e){return new DQ(this,e)}},{key:"map",value:function(e){return new MQ(this,e)}},{key:"mapAsync",value:function(e){return new PQ(this,e)}},{key:"serialMapAsync",value:function(e){return new PQ(this,e).serial()}},{key:"flatmap",value:function(e){return new FQ(this,e)}},{key:"forEachAsync",value:function(){var e=(0,o.Z)(l().mark((function e(t){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.map(t).resolveFully());case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"serialForEach",value:function(){var e=(0,o.Z)(l().mark((function e(t){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.serialMapAsync(t).resolveWhile((function(e){return!0===e})));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"rowMajorBatch",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return new AQ(this,e,t)}},{key:"columnMajorBatch",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:vQ,r=this.rowMajorBatch(e,t);return r.map((function(e){return hQ(e,n)}))}},{key:"concatenate",value:function(e,t){return new LQ(new EQ([this,e]),t)}},{key:"take",value:function(e){return e<0||null==e?this:new OQ(this,e)}},{key:"skip",value:function(e){return e<0||null==e?this:new IQ(this,e)}},{key:"prefetch",value:function(e){return new BQ(this,e)}},{key:"shuffle",value:function(e,t){return new zQ(this,e,t)}},{key:"serial",value:function(){return new TQ(this)}}]),e}(),EQ=function(e){(0,nu.Z)(n,e);var t=(0,ru.Z)(n);function n(e){var r;return(0,f.Z)(this,n),(r=t.call(this)).items=e,r.trav=0,r}return(0,d.Z)(n,[{key:"summary",value:function(){return"Array of ".concat(this.items.length," items")}},{key:"next",value:function(){var e=(0,o.Z)(l().mark((function e(){var t;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.trav>=this.items.length)){e.next=2;break}return e.abrupt("return",{value:null,done:!0});case 2:return t=this.items[this.trav],this.trav++,e.abrupt("return",{value:yQ(t),done:!1});case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(NQ),CQ=function(e){(0,nu.Z)(n,e);var t=(0,ru.Z)(n);function n(e){var r;return(0,f.Z)(this,n),(r=t.call(this)).nextFn=e,r}return(0,d.Z)(n,[{key:"summary",value:function(){return"Function call"}},{key:"next",value:function(){var e=(0,o.Z)(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.abrupt("return",this.nextFn());case 4:throw e.prev=4,e.t0=e.catch(0),e.t0.message="Error thrown while iterating through a dataset: ".concat(e.t0.message),e.t0;case 8:case"end":return e.stop()}}),e,this,[[0,4]])})));return function(){return e.apply(this,arguments)}}()}]),n}(NQ),TQ=function(e){(0,nu.Z)(n,e);var t=(0,ru.Z)(n);function n(e){var r;return(0,f.Z)(this,n),(r=t.call(this)).upstream=e,r.lastRead=Promise.resolve({value:null,done:!1}),r}return(0,d.Z)(n,[{key:"summary",value:function(){return"".concat(this.upstream.summary()," -> Serial")}},{key:"next",value:function(){var e=(0,o.Z)(l().mark((function e(){var t=this;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.lastRead=this.lastRead.then((function(){return t.serialNext()})),e.abrupt("return",this.lastRead);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"serialNext",value:function(){var e=(0,o.Z)(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.upstream.next());case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(NQ),IQ=function(e){(0,nu.Z)(n,e);var t=(0,ru.Z)(n);function n(e,r){var a;return(0,f.Z)(this,n),(a=t.call(this)).upstream=e,a.maxCount=r,a.count=0,a.lastRead=Promise.resolve({value:null,done:!1}),a}return(0,d.Z)(n,[{key:"summary",value:function(){return"".concat(this.upstream.summary()," -> Skip")}},{key:"next",value:function(){var e=(0,o.Z)(l().mark((function e(){var t=this;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.lastRead=this.lastRead.then((function(){return t.serialNext()})),e.abrupt("return",this.lastRead);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"serialNext",value:function(){var e=(0,o.Z)(l().mark((function e(){var t;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.count++<this.maxCount)){e.next=9;break}return e.next=3,this.upstream.next();case 3:if(!(t=e.sent).done){e.next=6;break}return e.abrupt("return",t);case 6:EV.dispose(t.value),e.next=0;break;case 9:return e.abrupt("return",this.upstream.next());case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(NQ),OQ=function(e){(0,nu.Z)(n,e);var t=(0,ru.Z)(n);function n(e,r){var a;return(0,f.Z)(this,n),(a=t.call(this)).upstream=e,a.maxCount=r,a.count=0,a}return(0,d.Z)(n,[{key:"summary",value:function(){return"".concat(this.upstream.summary()," -> Take")}},{key:"next",value:function(){var e=(0,o.Z)(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.count++>=this.maxCount)){e.next=2;break}return e.abrupt("return",{value:null,done:!0});case 2:return e.abrupt("return",this.upstream.next());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(NQ),AQ=function(e){(0,nu.Z)(n,e);var t=(0,ru.Z)(n);function n(e,r){var a,o=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return(0,f.Z)(this,n),(a=t.call(this)).upstream=e,a.batchSize=r,a.enableSmallLastBatch=o,a.lastRead=Promise.resolve({value:null,done:!1}),a}return(0,d.Z)(n,[{key:"summary",value:function(){return"".concat(this.upstream.summary()," -> RowMajorBatch")}},{key:"next",value:function(){var e=(0,o.Z)(l().mark((function e(){var t=this;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.lastRead=this.lastRead.then((function(){return t.serialNext()})),e.abrupt("return",this.lastRead);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"serialNext",value:function(){var e=(0,o.Z)(l().mark((function e(){var t,n;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=[];case 1:if(!(t.length<this.batchSize)){e.next=12;break}return e.next=4,this.upstream.next();case 4:if(!(n=e.sent).done){e.next=9;break}if(!(this.enableSmallLastBatch&&t.length>0)){e.next=8;break}return e.abrupt("return",{value:t,done:!1});case 8:return e.abrupt("return",{value:null,done:!0});case 9:t.push(n.value),e.next=1;break;case 12:return e.abrupt("return",{value:t,done:!1});case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(NQ),DQ=function(e){(0,nu.Z)(n,e);var t=(0,ru.Z)(n);function n(e,r){var a;return(0,f.Z)(this,n),(a=t.call(this)).upstream=e,a.predicate=r,a.lastRead=Promise.resolve({value:null,done:!1}),a}return(0,d.Z)(n,[{key:"summary",value:function(){return"".concat(this.upstream.summary()," -> Filter")}},{key:"next",value:function(){var e=(0,o.Z)(l().mark((function e(){var t=this;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.lastRead=this.lastRead.then((function(){return t.serialNext()})),e.abrupt("return",this.lastRead);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"serialNext",value:function(){var e=(0,o.Z)(l().mark((function e(){var t;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=3,this.upstream.next();case 3:if(!(t=e.sent).done&&!this.predicate(t.value)){e.next=6;break}return e.abrupt("return",t);case 6:EV.dispose(t.value),e.next=0;break;case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(NQ),MQ=function(e){(0,nu.Z)(n,e);var t=(0,ru.Z)(n);function n(e,r){var a;return(0,f.Z)(this,n),(a=t.call(this)).upstream=e,a.transform=r,a}return(0,d.Z)(n,[{key:"summary",value:function(){return"".concat(this.upstream.summary()," -> Map")}},{key:"next",value:function(){var e=(0,o.Z)(l().mark((function e(){var t,n,r,a,o,i,s;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.upstream.next();case 2:if(!(t=e.sent).done){e.next=5;break}return e.abrupt("return",{value:null,done:!0});case 5:n=EV.tensor_util.getTensorsInContainer(t.value),r=this.transform(t.value),a=EV.tensor_util.getTensorsInContainer(r),o=(0,Et.Z)(n);try{for(o.s();!(i=o.n()).done;)s=i.value,EV.tensor_util.isTensorInList(s,a)||s.dispose()}catch(u){o.e(u)}finally{o.f()}return e.abrupt("return",{value:r,done:!1});case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(NQ),RQ=function(e){(0,nu.Z)(n,e);var t=(0,ru.Z)(n);function n(e,r){var a;return(0,f.Z)(this,n),(a=t.call(this)).upstream=e,a.handler=r,a.count=0,a.lastRead=Promise.resolve({value:null,done:!1}),a}return(0,d.Z)(n,[{key:"summary",value:function(){return"".concat(this.upstream.summary()," -> handleErrors")}},{key:"next",value:function(){var e=(0,o.Z)(l().mark((function e(){var t=this;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.lastRead=this.lastRead.then((function(){return t.serialNext()})),e.abrupt("return",this.lastRead);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"serialNext",value:function(){var e=(0,o.Z)(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=1,e.next=4,this.upstream.next();case 4:return e.abrupt("return",e.sent);case 7:if(e.prev=7,e.t0=e.catch(1),this.handler(e.t0)){e.next=11;break}return e.abrupt("return",{value:null,done:!0});case 11:e.next=0;break;case 13:case"end":return e.stop()}}),e,this,[[1,7]])})));return function(){return e.apply(this,arguments)}}()}]),n}(NQ),PQ=function(e){(0,nu.Z)(n,e);var t=(0,ru.Z)(n);function n(e,r){var a;return(0,f.Z)(this,n),(a=t.call(this)).upstream=e,a.transform=r,a}return(0,d.Z)(n,[{key:"summary",value:function(){return"".concat(this.upstream.summary()," -> AsyncMap")}},{key:"next",value:function(){var e=(0,o.Z)(l().mark((function e(){var t,n,r,a,o,i,s;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.upstream.next();case 2:if(!(t=e.sent).done){e.next=5;break}return e.abrupt("return",{value:null,done:!0});case 5:return n=EV.tensor_util.getTensorsInContainer(t.value),e.next=8,this.transform(t.value);case 8:r=e.sent,a=EV.tensor_util.getTensorsInContainer(r),o=(0,Et.Z)(n);try{for(o.s();!(i=o.n()).done;)s=i.value,EV.tensor_util.isTensorInList(s,a)||s.dispose()}catch(u){o.e(u)}finally{o.f()}return e.abrupt("return",{value:r,done:!1});case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(NQ),jQ=function(e){(0,nu.Z)(n,e);var t=(0,ru.Z)(n);function n(){var e;return(0,f.Z)(this,n),(e=t.call(this)).outputQueue=new wQ,e.lastRead=Promise.resolve({value:null,done:!1}),e}return(0,d.Z)(n,[{key:"next",value:function(){var e=(0,o.Z)(l().mark((function e(){var t=this;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.lastRead=this.lastRead.then((function(){return t.serialNext()})),e.abrupt("return",this.lastRead);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"serialNext",value:function(){var e=(0,o.Z)(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==this.outputQueue.length()){e.next=7;break}return e.next=3,this.pump();case 3:if(e.sent){e.next=5;break}return e.abrupt("return",{value:null,done:!0});case 5:e.next=0;break;case 7:return e.abrupt("return",{value:this.outputQueue.shift(),done:!1});case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(NQ),FQ=function(e){(0,nu.Z)(n,e);var t=(0,ru.Z)(n);function n(e,r){var a;return(0,f.Z)(this,n),(a=t.call(this)).upstream=e,a.transform=r,a}return(0,d.Z)(n,[{key:"summary",value:function(){return"".concat(this.upstream.summary()," -> Flatmap")}},{key:"pump",value:function(){var e=(0,o.Z)(l().mark((function e(){var t,n,r,a,o,i,s;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.upstream.next();case 2:if(!(t=e.sent).done){e.next=5;break}return e.abrupt("return",!1);case 5:n=EV.tensor_util.getTensorsInContainer(t.value),r=this.transform(t.value),a=EV.tensor_util.getTensorsInContainer(r),this.outputQueue.pushAll(r),o=(0,Et.Z)(n);try{for(o.s();!(i=o.n()).done;)s=i.value,EV.tensor_util.isTensorInList(s,a)||s.dispose()}catch(u){o.e(u)}finally{o.f()}return e.abrupt("return",!0);case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(jQ),LQ=function(e){(0,nu.Z)(n,e);var t=(0,ru.Z)(n);function n(e,r){var a;return(0,f.Z)(this,n),(a=t.call(this)).baseErrorHandler=r,a.lastRead=null,a.iterator=null,a.moreIterators=e,a}return(0,d.Z)(n,[{key:"summary",value:function(){return"".concat("TODO: fill in upstream of chained summaries"," -> Chained")}},{key:"next",value:function(){var e=(0,o.Z)(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.lastRead=this.readFromChain(this.lastRead),e.abrupt("return",this.lastRead);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"readFromChain",value:function(){var e=(0,o.Z)(l().mark((function e(t){var n,r;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t;case 2:if(null!=this.iterator){e.next=10;break}return e.next=5,this.moreIterators.next();case 5:if(!(n=e.sent).done){e.next=8;break}return e.abrupt("return",{value:null,done:!0});case 8:this.iterator=n.value,null!=this.baseErrorHandler&&(this.iterator=this.iterator.handleErrors(this.baseErrorHandler));case 10:return e.next=12,this.iterator.next();case 12:if(!(r=e.sent).done){e.next=16;break}return this.iterator=null,e.abrupt("return",this.readFromChain(t));case 16:return e.abrupt("return",r);case 17:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(NQ);!function(e){e[e.FAIL=0]="FAIL",e[e.SHORTEST=1]="SHORTEST",e[e.LONGEST=2]="LONGEST"}(_Q||(_Q={}));var BQ=function(e){(0,nu.Z)(n,e);var t=(0,ru.Z)(n);function n(e,r){var a;return(0,f.Z)(this,n),(a=t.call(this)).upstream=e,a.bufferSize=r,a.buffer=new xQ(r),a}return(0,d.Z)(n,[{key:"summary",value:function(){return"".concat(this.upstream.summary()," -> Prefetch")}},{key:"refill",value:function(){for(;!this.buffer.isFull();){var e=this.upstream.next();this.buffer.push(e)}}},{key:"next",value:function(){return this.refill(),this.buffer.shift()}}]),n}(NQ),zQ=function(e){(0,nu.Z)(n,e);var t=(0,ru.Z)(n);function n(e,r,a){var o;return(0,f.Z)(this,n),(o=t.call(this,e,r)).upstream=e,o.windowSize=r,o.upstreamExhausted=!1,o.random=dQ.alea(a||EV.util.now().toString()),o.lastRead=Promise.resolve({value:null,done:!1}),o}return(0,d.Z)(n,[{key:"next",value:function(){var e=(0,o.Z)(l().mark((function e(){var t=this;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.lastRead=this.lastRead.then((function(){return t.serialNext()})),e.abrupt("return",this.lastRead);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"randomInt",value:function(e){return Math.floor(this.random()*e)}},{key:"chooseIndex",value:function(){return this.randomInt(this.buffer.length())}},{key:"serialNext",value:function(){var e=(0,o.Z)(l().mark((function e(){var t,n;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.upstreamExhausted||this.refill();case 1:if(this.buffer.isEmpty()){e.next=14;break}return t=this.chooseIndex(),e.next=5,this.buffer.shuffleExcise(t);case 5:if(!(n=e.sent).done){e.next=10;break}this.upstreamExhausted=!0,e.next=12;break;case 10:return this.refill(),e.abrupt("return",n);case 12:e.next=1;break;case 14:return e.abrupt("return",{value:null,done:!0});case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(BQ),ZQ=function(){function e(){(0,f.Z)(this,e),this.size=null}return(0,d.Z)(e,[{key:"batch",value:function(e){var t,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=this;return EV.util.assert(e>0,(function(){return"batchSize needs to be positive, but it is\n      ".concat(e)})),t=this.size===1/0||null==this.size?this.size:n?Math.ceil(this.size/e):Math.floor(this.size/e),VQ((0,o.Z)(l().mark((function t(){return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r.iterator();case 2:return t.abrupt("return",t.sent.columnMajorBatch(e,n,UQ));case 3:case"end":return t.stop()}}),t)}))),t)}},{key:"concatenate",value:function(e){var t,n=this;return t=this.size===1/0||e.size===1/0?1/0:null!=this.size&&null!=e.size?this.size+e.size:null,VQ((0,o.Z)(l().mark((function t(){return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.iterator();case 2:return t.t0=t.sent,t.next=5,e.iterator();case 5:return t.t1=t.sent,t.abrupt("return",t.t0.concatenate.call(t.t0,t.t1));case 7:case"end":return t.stop()}}),t)}))),t)}},{key:"filter",value:function(e){var t,n=this;return t=this.size===1/0?1/0:null,VQ((0,o.Z)(l().mark((function t(){return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.iterator();case 2:return t.abrupt("return",t.sent.filter((function(t){return EV.tidy((function(){return e(t)}))})));case 3:case"end":return t.stop()}}),t)}))),t)}},{key:"forEachAsync",value:function(){var e=(0,o.Z)(l().mark((function e(t){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.iterator();case 2:return e.abrupt("return",e.sent.forEachAsync(t));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"map",value:function(e){var t=this;return VQ((0,o.Z)(l().mark((function n(){return l().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.iterator();case 2:return n.abrupt("return",n.sent.map((function(t){return EV.tidy((function(){return e(t)}))})));case 3:case"end":return n.stop()}}),n)}))),this.size)}},{key:"mapAsync",value:function(e){var t=this;return VQ((0,o.Z)(l().mark((function n(){return l().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.iterator();case 2:return n.abrupt("return",n.sent.mapAsync(e));case 3:case"end":return n.stop()}}),n)}))),this.size)}},{key:"prefetch",value:function(e){if(null==e)throw new RangeError("`Dataset.prefetch()` requires bufferSize to be specified.");var t=this;return VQ((0,o.Z)(l().mark((function n(){return l().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.iterator();case 2:return n.abrupt("return",n.sent.prefetch(e));case 3:case"end":return n.stop()}}),n)}))),this.size)}},{key:"repeat",value:function(e){var t,n=this;return t=null!=this.size&&e>0?this.size*e:0===e?0:null!=this.size&&(void 0===e||e<0)?1/0:null,VQ((0,o.Z)(l().mark((function t(){var r;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=kQ((0,o.Z)(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.iterator();case 2:return e.t0=e.sent,e.abrupt("return",{value:e.t0,done:!1});case 4:case"end":return e.stop()}}),e)})))),t.abrupt("return",SQ(r.take(e)));case 2:case"end":return t.stop()}}),t)}))),t)}},{key:"skip",value:function(e){var t,n=this;return t=null!=this.size&&e>=0&&this.size>=e?this.size-e:null!=this.size&&(this.size<e||void 0===e||e<0)?0:null,VQ((0,o.Z)(l().mark((function t(){return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.iterator();case 2:return t.abrupt("return",t.sent.skip(e));case 3:case"end":return t.stop()}}),t)}))),t)}},{key:"shuffle",value:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(null==e||e<0)throw null==this.size?new RangeError("`Dataset.shuffle()` requires bufferSize to be specified."):new RangeError("`Dataset.shuffle()` requires bufferSize to be specified.  If your data fits in main memory (for regular JS objects), and/or GPU memory (for `tf.Tensor`s), consider setting "+"bufferSize to the dataset size (".concat(this.size," elements)"));var r=this,a=dQ.alea(t||EV.util.now().toString());return VQ((0,o.Z)(l().mark((function t(){var o;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=a.int32(),n&&(o+=a.int32()),t.next=4,r.iterator();case 4:return t.abrupt("return",t.sent.shuffle(e,o.toString()));case 5:case"end":return t.stop()}}),t)}))),this.size)}},{key:"take",value:function(e){var t,n=this;return t=null!=this.size&&this.size>e?e:null!=this.size&&this.size<=e?this.size:null,VQ((0,o.Z)(l().mark((function t(){return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.iterator();case 2:return t.abrupt("return",t.sent.take(e));case 3:case"end":return t.stop()}}),t)}))),t)}},{key:"toArray",value:function(){var e=(0,o.Z)(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.size!==1/0){e.next=2;break}throw new Error("Can not convert infinite data stream to array.");case 2:return e.next=4,this.iterator();case 4:return e.abrupt("return",e.sent.toArray());case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"toArrayForTest",value:function(){var e=(0,o.Z)(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.size!==1/0){e.next=2;break}throw new Error("Can not convert infinite data stream to array.");case 2:return e.next=4,this.iterator();case 4:return e.abrupt("return",e.sent.toArrayForTest());case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function VQ(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return new(function(n){(0,nu.Z)(a,n);var r=(0,ru.Z)(a);function a(){var e;return(0,f.Z)(this,a),(e=r.apply(this,arguments)).size=t,e}return(0,d.Z)(a,[{key:"iterator",value:function(){var t=(0,o.Z)(l().mark((function t(){return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e());case 1:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()}]),a}(ZQ))}function UQ(e){return null===e?null:function(e){return null==e||null===(t=e)||"object"!==typeof t&&"function"!==typeof t||Array.isArray(e)||"object"===typeof e&&e instanceof EV.Tensor||EV.util.isTypedArray(e);var t}(e[0])?{value:function(e){if(0===e.length)throw new Error("Can't make a batch of zero elements.");return e[0]instanceof EV.Tensor?EV.stack(e):EV.tensor(e)}(e),recurse:!1}:{value:null,recurse:!0}}ZQ.MAX_BUFFER_SIZE=1e4;Symbol("out"),Symbol("field"),Symbol("quote"),Symbol("quoteafterquote"),Symbol("quoteinquote");function qQ(e,t){Array.isArray(e)||(e=[e]),e.forEach((function(e){null!=e&&EV.util.assert("complex64"!==e.dtype,(function(){return"".concat(t," does not support complex64 tensors in the CPU backend.")}))}))}var WQ=EV.kernel_impls.whereImpl,HQ=function(e){(0,nu.Z)(n,e);var t=(0,ru.Z)(n);function n(){var e;return(0,f.Z)(this,n),(e=t.call(this)).blockSize=48,e.firstUse=!0,e.data=new EV.DataStorage((0,tu.Z)(e),(0,EV.engine)()),e}return(0,d.Z)(n,[{key:"nextDataId",value:function(){return n.nextDataId++}},{key:"write",value:function(e,t,n){this.firstUse&&(this.firstUse=!1,(0,EV.env)().get("IS_NODE")&&EV.backend_util.warn("\n============================\nHi there \ud83d\udc4b. Looks like you are running TensorFlow.js in Node.js. To speed things up dramatically, install our node backend, which binds to TensorFlow C++, by running npm i @tensorflow/tfjs-node, or npm i @tensorflow/tfjs-node-gpu if you have CUDA. Then call require('@tensorflow/tfjs-node'); (-gpu suffix for CUDA) at the start of your program. Visit https://github.com/tensorflow/tfjs-node for more details.\n============================"));var r={id:this.nextDataId()};return this.data.set(r,{values:e,dtype:n,refCount:1}),r}},{key:"makeTensorInfo",value:function(e,t,n){var r;if("string"===t&&null!=n&&n.length>0&&EV.util.isString(n[0])){var a=n.map((function(e){return EV.util.encodeString(e)}));r=this.write(a,e,t)}else r=this.write(n,e,t);return{dataId:r,shape:e,dtype:t}}},{key:"refCount",value:function(e){return this.data.has(e)?this.data.get(e).refCount:0}},{key:"incRef",value:function(e){this.data.get(e).refCount++}},{key:"decRef",value:function(e){this.data.has(e)&&this.data.get(e).refCount--}},{key:"move",value:function(e,t,n,r,a){this.data.set(e,{values:t,dtype:r,refCount:a})}},{key:"numDataIds",value:function(){return this.data.numDataIds()}},{key:"read",value:function(){var e=(0,o.Z)(l().mark((function e(t){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.readSync(t));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"readSync",value:function(e){var t=this.data.get(e),n=t.dtype,r=t.complexTensorInfos;if("complex64"===n){var a=this.readSync(r.real.dataId),o=this.readSync(r.imag.dataId);return EV.backend_util.mergeRealAndImagArrays(a,o)}return this.data.get(e).values}},{key:"bufferSync",value:function(e){var t=this.readSync(e.dataId),n=t;if("string"===e.dtype)try{n=t.map((function(e){return EV.util.decodeString(e)}))}catch(r){throw new Error("Failed to decode encoded string bytes into utf-8")}return(0,EV.buffer)(e.shape,e.dtype,n)}},{key:"makeOutput",value:function(e,t,n){var r=this.write(e,t,n);return(0,EV.engine)().makeTensorFromDataId(r,t,n,this)}},{key:"disposeData",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.data.has(e)){if(this.data.get(e).refCount--,!t&&this.data.get(e).refCount>0)return!1;var n=this.data.get(e),r=n.complexTensorInfos;null!=r&&(this.disposeData(r.real.dataId,!0),this.disposeData(r.imag.dataId,!0)),this.data.delete(e)}return!0}},{key:"disposeIntermediateTensorInfo",value:function(e){this.disposeData(e.dataId)}},{key:"time",value:function(){var e=(0,o.Z)(l().mark((function e(t){var n,r;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=EV.util.now(),t(),r=EV.util.now()-n,e.abrupt("return",{kernelMs:r});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"memory",value:function(){return{unreliable:!0,reasons:["The reported memory is an upper bound. Due to automatic garbage collection, the true allocated memory may be less."]}}},{key:"where",value:function(e){qQ([e],"where");var t=this.readSync(e.dataId);return WQ(e.shape,t)}},{key:"dispose",value:function(){}},{key:"floatPrecision",value:function(){return 32}},{key:"epsilon",value:function(){return MX((0,pC.Z)(n.prototype),"epsilon",this).call(this)}}]),n}(EV.KernelBackend);HQ.nextDataId=0;function GQ(e,t,n){return function(r){var a=r.inputs,o=r.attrs,i=r.backend,s=a.x;if(qQ(s,e),"string"===s.dtype||"string"===n)throw new Error("unaryKernelFunc does not support string input/output");for(var u=i,c=u.data.get(s.dataId).values,l=EV.util.sizeFromShape(s.shape),f=n||s.dtype,d=EV.util.getArrayFromDType(f,l),p=0;p<l;++p)d[p]=t(c[p],o);return u.makeTensorInfo(s.shape,f,d)}}function KQ(e,t,n){return function(r){var a=r.inputs,o=r.attrs,i=r.backend,s=a.x;if(qQ(s,e),"string"===s.dtype||"string"===n)throw new Error("unaryKernelFunc does not support string input/output");var u=i,c=u.data.get(s.dataId).values,l=n||s.dtype,f=t(c,l,o);return u.makeTensorInfo(s.shape,l,f)}}(0,EV.registerBackend)("cpu",(function(){return new HQ}),1);var XQ=GQ(EV.Elu,(function(e){return e>=0?e:Math.exp(e)-1})),YQ={kernelName:EV.Elu,backendName:"cpu",kernelFunc:XQ};function $Q(e){var t=e.inputs,n=e.backend,r=t.x;return n.incRef(r.dataId),{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}var JQ={kernelName:EV.Identity,backendName:"cpu",kernelFunc:$Q};function QQ(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.alpha;qQ([a],"leakyRelu");for(var i=EV.util.sizeFromShape(a.shape),s=n.data.get(a.dataId).values,u=EV.util.getTypedArrayFromDType("float32",i),c=0;c<s.length;c++)u[c]=s[c]<0?o*s[c]:s[c];return n.makeTensorInfo(a.shape,"float32",u)}var e0={kernelName:EV.LeakyRelu,backendName:"cpu",kernelFunc:QQ};function t0(e){return function(t,n,r,a,o){var i=EV.backend_util.assertAndGetBroadcastShape(t,n),s=i.length,u=EV.util.computeStrides(i),c=EV.util.sizeFromShape(i),l=EV.util.getTypedArrayFromDType(o,c),f=t.length,d=n.length,p=EV.util.computeStrides(t),h=EV.util.computeStrides(n),m=EV.backend_util.getBroadcastDims(t,i),v=EV.backend_util.getBroadcastDims(n,i);if(m.length+v.length===0)for(var g=0;g<l.length;++g)l[g]=e(r[g%r.length],a[g%a.length]);else for(var y=function(t){var n=EV.util.indexToLoc(t,s,u),o=n.slice(-f);m.forEach((function(e){return o[e]=0}));var i=EV.util.locToIndex(o,f,p),c=n.slice(-d);v.forEach((function(e){return c[e]=0}));var g=EV.util.locToIndex(c,d,h);l[t]=e(r[i],a[g])},b=0;b<l.length;++b)y(b);return[l,i]}}var n0=t0((function(e,t){return e<0?t*e:e}));function r0(e){var t=e.inputs,n=e.backend,r=t.x,o=t.alpha;qQ([r,o],"prelu");var i=n.data.get(r.dataId).values,s=n.data.get(o.dataId).values,u=n0(r.shape,o.shape,i,s,"float32"),c=(0,a.Z)(u,2),l=c[0],f=c[1];return n.makeTensorInfo(f,"float32",l)}var a0={kernelName:EV.Prelu,backendName:"cpu",kernelFunc:r0},o0=GQ(EV.Relu,(function(e){return Math.max(0,e)})),i0={kernelName:EV.Relu,backendName:"cpu",kernelFunc:o0},s0=GQ(EV.Relu6,(function(e){return Math.min(Math.max(0,e),6)})),u0={kernelName:EV.Relu6,backendName:"cpu",kernelFunc:s0};function c0(e){return function(t,n,r){for(var a=EV.util.getTypedArrayFromDType(n,t.length),o=0;o<t.length;++o)a[o]=e(t[o],r);return a}}var l0=c0((function(e){return 1/(1+Math.exp(-e))})),f0=GQ(EV.Sigmoid,(function(e){return 1/(1+Math.exp(-e))})),d0={kernelName:EV.Sigmoid,backendName:"cpu",kernelFunc:f0};function p0(e,t,n,r,a){if("linear"===n)return $Q({inputs:{x:t},backend:e});if("relu"===n)return o0({inputs:{x:t},backend:e});if("elu"===n)return XQ({inputs:{x:t},backend:e});if("relu6"===n)return s0({inputs:{x:t},backend:e});if("prelu"===n)return r0({inputs:{x:t,alpha:r},backend:e});if("leakyrelu"===n)return QQ({inputs:{x:t},backend:e,attrs:{alpha:a}});if("sigmoid"===n)return f0({inputs:{x:t},backend:e});throw new Error("Activation ".concat(n," has not been implemented for the CPU backend."))}function h0(e){var t=e.inputs,n=e.backend,r=t.real,a=t.imag,o=n.data.get(r.dataId).values,i=n.data.get(a.dataId).values,s=n.makeTensorInfo(r.shape,"complex64");return n.data.get(s.dataId).complexTensorInfos={real:n.makeTensorInfo(r.shape,"float32",o),imag:n.makeTensorInfo(a.shape,"float32",i)},s}var m0={kernelName:EV.Complex,backendName:"cpu",kernelFunc:h0};function v0(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"float32";if("complex64"===n){var r=v0(e,t,"float32"),a=v0(e,t,"float32");return h0({inputs:{real:r,imag:a},backend:e})}var o=EV.util.makeZerosTypedArray(EV.util.sizeFromShape(t),n);return e.makeTensorInfo(t,n,o)}function g0(e){var t=e.inputs,n=e.backend,r=t.input,a=n.data.get(r.dataId).complexTensorInfos.real,o=n.data.get(a.dataId).values;return n.makeTensorInfo(a.shape,a.dtype,o)}var y0={kernelName:EV.Real,backendName:"cpu",kernelFunc:g0};function b0(e){var t=e.inputs,n=e.backend,r=e.attrs,o=t.x,i=r.dtype;if("complex64"===i){if("complex64"===o.dtype)return $Q({inputs:{x:o},backend:n});var s=v0(n,o.shape,o.dtype),u=b0({inputs:{x:o},backend:n,attrs:{dtype:"float32"}}),c=h0({inputs:{real:u,imag:s},backend:n});return n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(u),c}if("complex64"===o.dtype){var l=g0({inputs:{input:o},backend:n}),f=b0({inputs:{x:l},backend:n,attrs:{dtype:i}});return n.disposeIntermediateTensorInfo(l),f}if(!EV.util.hasEncodingLoss(o.dtype,i)){var d=$Q({inputs:{x:o},backend:n});return{dataId:d.dataId,shape:d.shape,dtype:i}}if("int32"===i){var p=n.data.get(o.dataId).values,h=Int32Array.from(p);return n.makeTensorInfo(o.shape,"int32",h)}if("bool"===i){var m=n.data.get(o.dataId).values,v=EV.util.toTypedArray([0],o.dtype),g=t0((function(e,t){return e!==t?1:0}))(o.shape,[],m,v,"bool"),y=(0,a.Z)(g,2),b=y[0],x=y[1];return n.makeTensorInfo(x,"bool",b)}throw new Error("Error in Cast: failed to cast ".concat(o.dtype," to ").concat(i))}var x0={kernelName:EV.Cast,backendName:"cpu",kernelFunc:b0};function w0(e,t,n,r){return null==n?function(n){var o=n.inputs,i=n.backend,s=o.a,u=o.b,c=i;qQ([s,u],e);var l=c.data.get(s.dataId).values,f=c.data.get(u.dataId).values,d="string"===s.dtype?EV.backend_util.fromUint8ToStringArray(l):l,p="string"===s.dtype?EV.backend_util.fromUint8ToStringArray(f):f,h=r||s.dtype,m=t(s.shape,u.shape,d,p,h),v=(0,a.Z)(m,2),g=v[0],y=v[1];return c.makeTensorInfo(y,h,g)}:function(e){var o=e.inputs,i=e.backend,s=o.a,u=o.b,c=i;if("complex64"===s.dtype||"complex64"===u.dtype){var l=b0({inputs:{x:s},backend:c,attrs:{dtype:"complex64"}}),f=c.data.get(l.dataId),d=f.complexTensorInfos.real,p=f.complexTensorInfos.imag,h=c.data.get(d.dataId).values,m=c.data.get(p.dataId).values,v=b0({inputs:{x:u},backend:c,attrs:{dtype:"complex64"}}),g=c.data.get(v.dataId),y=g.complexTensorInfos.real,b=g.complexTensorInfos.imag,x=c.data.get(y.dataId).values,w=c.data.get(b.dataId).values,k=n(s.shape,u.shape,h,m,x,w),S=(0,a.Z)(k,3),_=S[0],N=S[1],E=S[2],C=c.makeTensorInfo(E,"float32",_),T=c.makeTensorInfo(E,"float32",N),I=h0({inputs:{real:C,imag:T},backend:c});return c.disposeIntermediateTensorInfo(l),c.disposeIntermediateTensorInfo(v),c.disposeIntermediateTensorInfo(C),c.disposeIntermediateTensorInfo(T),I}var O=c.data.get(s.dataId).values,A=c.data.get(u.dataId).values,D=r||s.dtype,M=t(s.shape,u.shape,O,A,D),R=(0,a.Z)(M,2),P=R[0],j=R[1];return c.makeTensorInfo(j,D,P)}}function k0(e){return function(t,n,r,a,o,i){var s=EV.backend_util.assertAndGetBroadcastShape(t,n),u=EV.util.sizeFromShape(s),c=s.length,l=EV.util.computeStrides(s),f=EV.util.getTypedArrayFromDType("float32",u),d=EV.util.getTypedArrayFromDType("float32",u),p=EV.backend_util.getBroadcastDims(t,s),h=EV.backend_util.getBroadcastDims(n,s),m=EV.backend_util.mergeRealAndImagArrays(r,a),v=EV.backend_util.mergeRealAndImagArrays(o,i),g=t.length,y=EV.util.computeStrides(t),b=n.length,x=EV.util.computeStrides(n);if(p.length+h.length===0)for(var w=0;w<f.length;w++){var k=w%m.length,S=w%v.length,_=e(m[2*k],m[2*k+1],v[2*S],v[2*S+1]);f[w]=_.real,d[w]=_.imag}else for(var N=function(t){var n=EV.util.indexToLoc(t,c,l),r=n.slice(-g);p.forEach((function(e){return r[e]=0}));var a=EV.util.locToIndex(r,g,y),o=n.slice(-b);h.forEach((function(e){return o[e]=0}));var i=EV.util.locToIndex(o,b,x),s=e(m[2*a],m[2*a+1],v[2*i],v[2*i+1]);f[t]=s.real,d[t]=s.imag},E=0;E<f.length;E++)N(E);return[f,d,s]}}var S0=t0((function(e,t){return e+t})),_0=k0((function(e,t,n,r){return{real:e+n,imag:t+r}})),N0=w0(EV.Add,S0,_0),E0={kernelName:EV.Add,backendName:"cpu",kernelFunc:N0};function C0(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.shape,i=EV.util.sizeFromShape(a.shape),s=EV.util.inferFromImplicitShape(o,i),u=EV.util.sizeFromShape(s);EV.util.assert(i===u,(function(){return"The new shape (".concat(s,") has ").concat(u," elements and the old ")+"shape (".concat(a.shape,") has ").concat(i," elements. The new shape and old ")+"shape must have the same number of elements."})),n.incRef(a.dataId);var c=n.data.get(a.dataId);if(null!=c.complexTensorInfos){var l=c.complexTensorInfos.real,f=c.complexTensorInfos.imag;l.shape=s,f.shape=s}return{dataId:a.dataId,shape:s,dtype:a.dtype}}var T0={kernelName:EV.Reshape,backendName:"cpu",kernelFunc:C0};function I0(e){var t=e.inputs,n=e.backend,r=e.attrs,o=t.a,i=t.b,s=r.transposeA,u=r.transposeB;qQ([o,i],"matMul");var c=o.shape.length,l=i.shape.length,f=s?o.shape[c-2]:o.shape[c-1],d=u?i.shape[l-1]:i.shape[l-2],p=s?o.shape[c-1]:o.shape[c-2],h=u?i.shape[l-2]:i.shape[l-1],m=o.shape.slice(0,-2),v=i.shape.slice(0,-2),g=EV.util.sizeFromShape(m),y=EV.util.sizeFromShape(v),b=EV.broadcast_util.assertAndGetBroadcastShape(o.shape.slice(0,-2),i.shape.slice(0,-2)).concat([p,h]);EV.util.assert(f===d,(function(){return"Error in matMul: inner shapes (".concat(f,") and (")+"".concat(d,") of Tensors with shapes ").concat(o.shape," and ")+"".concat(i.shape," and transposeA=").concat(s)+" and transposeB=".concat(u," must match.")}));for(var x=u?[y,h,d]:[y,d,h],w=C0({inputs:{x:o},backend:n,attrs:{shape:s?[g,f,p]:[g,p,f]}}),k=C0({inputs:{x:i},backend:n,attrs:{shape:x}}),S=s?w.shape[1]:w.shape[2],_=s?w.shape[2]:w.shape[1],N=u?k.shape[1]:k.shape[2],E=Math.max(g,y),C=n.data.get(w.dataId).values,T=n.data.get(k.dataId).values,I=EV.util.computeStrides(w.shape),O=EV.util.computeStrides(k.shape),A=s?[I[0],1,I[1]]:[I[0],I[1],1],D=(0,a.Z)(A,3),M=D[0],R=D[1],P=D[2],j=u?[1,O[1],O[0]]:[O[1],1,O[0]],F=(0,a.Z)(j,3),L=F[0],B=F[1],z=F[2],Z=_*N,V=(0,EV.buffer)([E,_,N],w.dtype),U=V.values,q=n.blockSize,W=0;W<E;W++)for(var H=0;H<_;H+=q)for(var G=0;G<N;G+=q)for(var K=0;K<S;K+=q)for(var X=Math.min(H+q,_),Y=Math.min(G+q,N),$=Math.min(K+q,S),J=H;J<X;J++)for(var Q=G;Q<Y;Q++){for(var ee=0,te=K;te<$;te++){var ne=Math.min(W,g-1)*M,re=Math.min(W,y-1)*z;ee+=C[ne+J*R+te*P]*T[te*L+Q*B+re]}U[W*Z+(J*N+Q)]+=ee}return n.disposeIntermediateTensorInfo(w),n.disposeIntermediateTensorInfo(k),n.makeTensorInfo(b,V.dtype,V.values)}var O0={kernelName:EV.BatchMatMul,backendName:"cpu",kernelFunc:I0};var A0={kernelName:EV._FusedMatMul,backendName:"cpu",kernelFunc:function(e){var t,n,r,a=e.inputs,o=e.backend,i=e.attrs,s=a.a,u=a.b,c=a.bias,l=a.preluActivationWeights,f=i.transposeA,d=i.transposeB,p=i.activation,h=i.leakyreluAlpha,m=[];t=I0({inputs:{a:s,b:u},attrs:{transposeA:f,transposeB:d},backend:o}),c&&(n=N0({inputs:{a:t,b:c},backend:o}),m.push(t),t=n),p&&(r=p0(o,t,p,l,h),m.push(t),t=r);for(var v=0,g=m;v<g.length;v++){var y=g[v];o.disposeIntermediateTensorInfo(y)}return t}};function D0(e){for(var t=new Float32Array(e.length),n=0;n<e.length;++n)t[n]=Math.abs(e[n]);return t}var M0={kernelName:EV.Abs,backendName:"cpu",kernelFunc:function(e){var t=e.inputs.x,n=e.backend;qQ(t,"abs");var r=new Float32Array(EV.util.sizeFromShape(t.shape));return r=D0(n.data.get(t.dataId).values),n.makeOutput(r,t.shape,t.dtype)}},R0=GQ(EV.Acos,(function(e){return Math.acos(e)})),P0={kernelName:EV.Acos,backendName:"cpu",kernelFunc:R0},j0=GQ(EV.Acosh,(function(e){return Math.acosh(e)})),F0={kernelName:EV.Acosh,backendName:"cpu",kernelFunc:j0};var L0={kernelName:EV.AddN,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t;qQ(t,"addN");for(var a=r.map((function(e){return n.data.get(e.dataId).values})),o=(0,EV.buffer)(r[0].shape,r[0].dtype),i=o.values,s=0;s<r.length;s++)for(var u=a[s],c=0;c<i.length;c++)i[c]+=u[c];return n.makeTensorInfo(o.shape,o.dtype,o.values)}};function B0(e,t,n,r,a){for(var o=t.length,i=EV.util.sizeFromShape(t),s=EV.util.computeStrides(t),u=EV.util.computeStrides(a),c=EV.util.getTypedArrayFromDType(n,EV.util.sizeFromShape(a)),l=0;l<i;++l){for(var f=EV.util.indexToLoc(l,o,s),d=new Array(f.length),p=0;p<d.length;p++)d[p]=f[r[p]];c[EV.util.locToIndex(d,o,u)]=e[l]}return c}function z0(e){var t=e.inputs,n=e.attrs,r=e.backend,a=t.x,o=n.perm;qQ(a,"transpose");for(var i=a.shape.length,s=new Array(i),u=0;u<s.length;u++)s[u]=a.shape[o[u]];var c=B0(r.data.get(a.dataId).values,a.shape,a.dtype,o,s);return{dataId:r.write(c,s,a.dtype),shape:s,dtype:a.dtype}}var Z0={kernelName:EV.Transpose,backendName:"cpu",kernelFunc:z0};var V0={kernelName:EV.All,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,o=t.x,i=r.axis,s=r.keepDims;qQ(o,"all");var u=EV.util.parseAxisParam(i,o.shape),c=u,l=EV.backend_util.getAxesPermutation(c,o.shape.length),f=o;null!=l&&(f=z0({inputs:{x:o},backend:n,attrs:{perm:l}}),c=EV.backend_util.getInnerMostAxes(c.length,o.shape.length)),EV.backend_util.assertAxesAreInnerMostDims("all",c,f.shape.length);for(var d=EV.backend_util.computeOutAndReduceShapes(f.shape,c),p=(0,a.Z)(d,2),h=p[0],m=p[1],v=EV.util.sizeFromShape(m),g=EV.util.makeZerosTypedArray(EV.util.sizeFromShape(h),f.dtype),y=n.data.get(f.dataId).values,b=0;b<g.length;++b){for(var x=b*v,w=y[x],k=0;k<v;++k){var S=y[x+k];w=w&&S}g[b]=w}null!=l&&n.disposeIntermediateTensorInfo(f);var _=n.makeTensorInfo(h,f.dtype,g);if(s){var N=C0({inputs:{x:_},backend:n,attrs:{shape:EV.backend_util.expandShapeToKeepDim(h,u)}});return n.disposeIntermediateTensorInfo(_),N}return _}};var U0={kernelName:EV.Any,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,o=t.x,i=r.axis,s=r.keepDims;qQ(o,"any");var u=EV.util.parseAxisParam(i,o.shape),c=u,l=EV.backend_util.getAxesPermutation(c,o.shape.length),f=o;null!=l&&(f=z0({inputs:{x:o},backend:n,attrs:{perm:l}}),c=EV.backend_util.getInnerMostAxes(c.length,o.shape.length)),EV.backend_util.assertAxesAreInnerMostDims("any",c,f.shape.length);for(var d=EV.backend_util.computeOutAndReduceShapes(f.shape,c),p=(0,a.Z)(d,2),h=p[0],m=p[1],v=EV.util.sizeFromShape(m),g=EV.util.makeZerosTypedArray(EV.util.sizeFromShape(h),f.dtype),y=n.data.get(f.dataId).values,b=0;b<g.length;++b){for(var x=b*v,w=y[x],k=0;k<v;++k){var S=y[x+k];w=w||S}g[b]=w}null!=l&&n.disposeIntermediateTensorInfo(f);var _=n.makeTensorInfo(h,f.dtype,g);if(s){var N=C0({inputs:{x:_},backend:n,attrs:{shape:EV.backend_util.expandShapeToKeepDim(h,u)}});return n.disposeIntermediateTensorInfo(_),N}return _}};var q0={kernelName:EV.ArgMax,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,o=t.x,i=r.axis;qQ(o,"argMax");var s=EV.util.parseAxisParam(i,o.shape),u=EV.backend_util.getAxesPermutation(s,o.shape.length),c=o,l=[];null!=u&&(c=z0({inputs:{x:o},backend:n,attrs:{perm:u}}),l.push(c),s=EV.backend_util.getInnerMostAxes(s.length,c.shape.length)),s=[s[0]],EV.backend_util.assertAxesAreInnerMostDims("argMax",s,c.shape.length);for(var f=EV.backend_util.computeOutAndReduceShapes(c.shape,s),d=(0,a.Z)(f,2),p=d[0],h=d[1],m=EV.util.sizeFromShape(p),v=EV.util.makeZerosTypedArray(m,"int32"),g=EV.util.sizeFromShape(h),y=n.data.get(c.dataId).values,b=0;b<v.length;++b){for(var x=b*g,w=y[x],k=0,S=0;S<g;++S){var _=y[x+S];_>w&&(w=_,k=S)}v[b]=k}return l.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),n.makeTensorInfo(p,"int32",v)}};var W0={kernelName:EV.ArgMin,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,o=t.x,i=r.axis;qQ(o,"argMin");var s=EV.util.parseAxisParam(i,o.shape),u=EV.backend_util.getAxesPermutation(s,o.shape.length),c=o,l=[];null!=u&&(c=z0({inputs:{x:o},backend:n,attrs:{perm:u}}),l.push(c),s=EV.backend_util.getInnerMostAxes(s.length,c.shape.length)),s=[s[0]],EV.backend_util.assertAxesAreInnerMostDims("argMin",s,c.shape.length);for(var f=EV.backend_util.computeOutAndReduceShapes(c.shape,s),d=(0,a.Z)(f,2),p=d[0],h=d[1],m=EV.util.sizeFromShape(p),v=EV.util.makeZerosTypedArray(m,"int32"),g=EV.util.sizeFromShape(h),y=n.data.get(c.dataId).values,b=0;b<v.length;++b){for(var x=b*g,w=y[x],k=0,S=0;S<g;++S){var _=y[x+S];_<w&&(w=_,k=S)}v[b]=k}return l.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),n.makeTensorInfo(p,"int32",v)}},H0=GQ(EV.Asin,(function(e){return Math.asin(e)})),G0={kernelName:EV.Asin,backendName:"cpu",kernelFunc:H0},K0=GQ(EV.Asinh,(function(e){return Math.asinh(e)})),X0={kernelName:EV.Asinh,backendName:"cpu",kernelFunc:K0},Y0=GQ(EV.Atan,(function(e){return Math.atan(e)})),$0={kernelName:EV.Atan,backendName:"cpu",kernelFunc:Y0},J0=t0((function(e,t){return Math.atan2(e,t)})),Q0=w0(EV.Atan2,J0),e1={kernelName:EV.Atan2,backendName:"cpu",kernelFunc:Q0},t1=GQ(EV.Atanh,(function(e){return Math.atanh(e)})),n1={kernelName:EV.Atanh,backendName:"cpu",kernelFunc:t1};function r1(e,t,n,r,a,o){for(var i=a.strideHeight,s=a.strideWidth,u=a.dilationHeight,c=a.dilationWidth,l=a.effectiveFilterHeight,f=a.effectiveFilterWidth,d=a.padInfo.top,p=a.padInfo.left,h="max"===o?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,m=(0,EV.buffer)(a.outShape,n),v=m.values,g=a.outShape[1]*a.outShape[2]*a.outShape[3],y=a.outShape[2]*a.outShape[3],b=a.outShape[3],x=0;x<a.batchSize;++x)for(var w=x*g,k=x*r[0],S=0;S<a.inChannels;++S)for(var _=0;_<a.outHeight;++_)for(var N=_*i-d,E=Math.max(0,N),C=Math.min(a.inHeight,l+N),T=w+_*y,I=0;I<a.outWidth;++I){for(var O=I*s-p,A=Math.max(0,O),D=Math.min(a.inWidth,f+O),M=h,R=0,P=0,j=E;j<C;j+=u){for(var F=k+j*r[1],L=A;L<D;L+=c){var B=e[F+L*r[2]+S];"max"===o&&B>M?M=B:"avg"===o&&(R+=B,P++)}if(isNaN(M))break}v[T+I*b+S]="avg"===o?R/P:M}return m}function a1(e,t,n,r){for(var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=arguments.length>5&&void 0!==arguments[5]&&arguments[5],i=(0,EV.buffer)(r.outShape,"int32"),s=r.strideHeight,u=r.strideWidth,c=r.dilationHeight,l=r.dilationWidth,f=r.effectiveFilterHeight,d=r.effectiveFilterWidth,p=r.padInfo.top,h=r.padInfo.left,m=(0,EV.buffer)(t,n,e),v=0;v<r.batchSize;++v)for(var g=0;g<r.inChannels;++g)for(var y=0;y<r.outHeight;++y){for(var b=y*s-p,x=b;x<0;)x+=c;for(var w=Math.min(r.inHeight,f+b),k=0;k<r.outWidth;++k){for(var S=k*u-h,_=S;_<0;)_+=l;for(var N=Math.min(r.inWidth,d+S),E=Number.NEGATIVE_INFINITY,C=-1,T=x;T<w;T+=c)for(var I=T-b,O=_;O<N;O+=l){var A=O-S,D=m.get(v,T,O,g);D>E&&(E=D,C=a?o?((v*r.inHeight+T)*r.inWidth+O)*r.inChannels+g:(T*r.inWidth+O)*r.inChannels+g:I*d+A)}i.set(C,v,y,k,g)}}return i}function o1(e,t,n,r,a,o){for(var i=a.strideDepth,s=a.strideHeight,u=a.strideWidth,c=a.dilationDepth,l=a.dilationHeight,f=a.dilationWidth,d=a.effectiveFilterDepth,p=a.effectiveFilterHeight,h=a.effectiveFilterWidth,m=a.padInfo.front,v=a.padInfo.top,g=a.padInfo.left,y="max"===o?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,b=(0,EV.buffer)(a.outShape,n),x=b.values,w=a.outShape[1]*a.outShape[2]*a.outShape[3]*a.outShape[4],k=a.outShape[2]*a.outShape[3]*a.outShape[4],S=a.outShape[3]*a.outShape[4],_=a.outShape[4],N=0;N<a.batchSize;++N)for(var E=N*w,C=N*r[0],T=0;T<a.inChannels;++T)for(var I=0;I<a.outDepth;++I){for(var O=I*i-m,A=O;A<0;)A+=c;for(var D=Math.min(a.inDepth,d+O),M=E+I*k,R=0;R<a.outHeight;++R){for(var P=R*s-v,j=P;j<0;)j+=l;for(var F=Math.min(a.inHeight,p+P),L=M+R*S,B=0;B<a.outWidth;++B){for(var z=B*u-g,Z=z;Z<0;)Z+=f;for(var V=Math.min(a.inWidth,h+z),U=L+B*_,q=y,W=0,H=0,G=A;G<D;G+=c){for(var K=C+G*r[1],X=j;X<F;X+=l){for(var Y=K+X*r[2],$=Z;$<V;$+=f){var J=e[Y+$*r[3]+T];if("max"===o&&J>q?q=J:"avg"===o&&(W+=J,H++),isNaN(q))break}if(isNaN(q))break}if(isNaN(q))break}x[U+T]="avg"===o?W/H:q}}}return b}var i1={kernelName:EV.AvgPool,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x;qQ(a,"avgPool");var o=r.filterSize,i=r.strides,s=r.pad,u=r.dimRoundingMode;EV.util.assert(EV.backend_util.eitherStridesOrDilationsAreOne(i,1),(function(){return"Error in avgPool: Either strides or dilations must be 1. "+"Got strides ".concat(i," and dilations '").concat(1,"'")}));var c,l=EV.backend_util.computePool2DInfo(a.shape,o,i,1,s,u);if(1===l.filterWidth&&1===l.filterHeight&&EV.util.arraysEqual(l.inShape,l.outShape))c=$Q({inputs:{x:a},backend:n});else{var f=n.data.get(a.dataId).values,d=EV.util.computeStrides(a.shape),p=r1(f,a.shape,a.dtype,d,l,"avg");c=n.makeTensorInfo(l.outShape,a.dtype,p.values)}return c}};var s1={kernelName:EV.AvgPool3D,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.filterSize,i=r.strides,s=r.pad,u=r.dimRoundingMode,c=r.dataFormat;qQ(a,"avgPool3d");var l=EV.backend_util.computePool3DInfo(a.shape,o,i,1,s,u,c),f=o1(n.data.get(a.dataId).values,a.shape,a.dtype,EV.util.computeStrides(a.shape),l,"avg");return n.makeTensorInfo(f.shape,"float32",f.values)}};var u1={kernelName:EV.AvgPool3DGrad,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,o=t.input,i=r.filterSize,s=r.strides,u=r.pad,c=r.dimRoundingMode;qQ([a,o],"avgPool3DGrad");for(var l=EV.backend_util.computePool3DInfo(o.shape,i,s,1,u,c),f=l.strideDepth,d=l.strideHeight,p=l.strideWidth,h=l.filterDepth,m=l.filterHeight,v=l.filterWidth,g=l.dilationDepth,y=l.dilationHeight,b=l.dilationWidth,x=l.effectiveFilterDepth,w=l.effectiveFilterHeight,k=l.effectiveFilterWidth,S=x-1-l.padInfo.front,_=k-1-l.padInfo.left,N=w-1-l.padInfo.top,E=(0,EV.buffer)(o.shape,"float32"),C=1/(h*m*v),T=n.bufferSync(a),I=0;I<l.batchSize;++I)for(var O=0;O<l.inChannels;++O)for(var A=0;A<l.inDepth;++A)for(var D=0;D<l.inHeight;++D)for(var M=0;M<l.inWidth;++M){for(var R=A-S,P=D-N,j=M-_,F=0,L=0;L<x;L+=g){var B=(R+L)/f;if(!(B<0||B>=l.outDepth||Math.floor(B)!==B))for(var z=0;z<w;z+=y){var Z=(P+z)/d;if(!(Z<0||Z>=l.outHeight||Math.floor(Z)!==Z))for(var V=0;V<k;V+=b){var U=(j+V)/p;if(!(U<0||U>=l.outWidth||Math.floor(U)!==U))F+=T.get(I,B,Z,U,O)}}}E.set(F*C,I,A,D,M,O)}return n.makeTensorInfo(E.shape,E.dtype,E.values)}};var c1={kernelName:EV.AvgPoolGrad,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,o=t.input,i=o;qQ([a,o],"avgPoolGrad");for(var s=r.filterSize,u=r.strides,c=r.pad,l=EV.backend_util.computePool2DInfo(i.shape,s,u,1,c),f=l.strideHeight,d=l.strideWidth,p=l.filterHeight,h=l.filterWidth,m=l.dilationHeight,v=l.dilationWidth,g=l.effectiveFilterHeight,y=l.effectiveFilterWidth,b=y-1-l.padInfo.left,x=g-1-l.padInfo.top,w=(0,EV.buffer)(i.shape,"float32"),k=1/(p*h),S=n.data.get(a.dataId).values,_=(0,EV.buffer)(a.shape,"float32",S),N=0;N<l.batchSize;++N)for(var E=0;E<l.inChannels;++E)for(var C=0;C<l.inHeight;++C)for(var T=0;T<l.inWidth;++T){for(var I=C-x,O=T-b,A=0,D=0;D<g;D+=m){var M=(I+D)/f;if(!(M<0||M>=l.outHeight||Math.floor(M)!==M))for(var R=0;R<y;R+=v){var P=(O+R)/d;if(!(P<0||P>=l.outWidth||Math.floor(P)!==P))A+=_.get(N,M,P,E)}}w.set(A*k,N,C,T,E)}return n.makeTensorInfo(w.shape,w.dtype,w.values)}};var l1={kernelName:EV.FusedBatchNorm,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=t.scale,i=t.offset,s=t.mean,u=t.variance;EV.util.assert(s.shape.length===u.shape.length,(function(){return"Batch normalization gradient requires mean and variance to have equal ranks."})),EV.util.assert(null==i||s.shape.length===i.shape.length,(function(){return"Batch normalization gradient requires mean and offset to have equal ranks."})),EV.util.assert(null==o||s.shape.length===o.shape.length,(function(){return"Batch normalization gradient requires mean and scale to have equal ranks."})),qQ([a,s,u,o,i],"batchNorm");var c=r.varianceEpsilon;null==c&&(c=.001);for(var l=n.data.get(a.dataId).values,f=n.data.get(s.dataId).values,d=n.data.get(u.dataId).values,p=o?n.data.get(o.dataId).values:new Float32Array([1]),h=i?n.data.get(i.dataId).values:new Float32Array([0]),m=new Float32Array(l.length),v=h.length,g=p.length,y=d.length,b=f.length,x=0,w=0,k=0,S=0,_=0;_<l.length;++_)m[_]=h[x++]+(l[_]-f[w++])*p[k++]/Math.sqrt(d[S++]+c),x>=v&&(x=0),w>=b&&(w=0),k>=g&&(k=0),S>=y&&(S=0);return n.makeTensorInfo(a.shape,a.dtype,m)}};function f1(e,t,n,a,o){var i=EV.slice_util.isSliceContinous(a,t,n),s=EV.util.sizeFromShape(n),u=EV.util.computeStrides(a);if(i){var c=EV.slice_util.computeFlatOffset(t,u);return"string"===o?e.slice(c,c+s):e.subarray(c,c+s)}for(var l="string"===o?EV.backend_util.fromUint8ToStringArray(e):e,f=(0,EV.buffer)(a,o,l),d=(0,EV.buffer)(n,o),p=0;p<d.size;++p){var h=d.indexToLoc(p),m=h.map((function(e,n){return e+t[n]}));d.set.apply(d,[f.get.apply(f,(0,r.Z)(m))].concat((0,r.Z)(h)))}return"string"===o?EV.backend_util.fromStringArrayToUint8(d.values):d.values}function d1(e){var t=e.inputs,n=e.backend,r=e.attrs,o=t.x,i=r.begin,s=r.size;qQ(o,"slice");var u=EV.slice_util.parseSliceParams(o,i,s),c=(0,a.Z)(u,2),l=c[0],f=c[1];EV.slice_util.assertParamsValid(o,l,f);var d=f1(n.data.get(o.dataId).values,l,f,o.shape,o.dtype);return n.makeTensorInfo(f,o.dtype,d)}var p1={kernelName:EV.Slice,backendName:"cpu",kernelFunc:d1};var h1={kernelName:EV.BatchToSpaceND,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.blockShape,i=r.crops;qQ([a],"batchToSpaceND");var s=o.reduce((function(e,t){return e*t})),u=EV.backend_util.getReshaped(a.shape,o,s),c=EV.backend_util.getPermuted(u.length,o.length),l=EV.backend_util.getReshapedPermuted(a.shape,o,s),f=EV.backend_util.getSliceBeginCoords(i,o.length),d=EV.backend_util.getSliceSize(l,i,o.length),p=C0({inputs:{x:a},backend:n,attrs:{shape:u}}),h=z0({inputs:{x:p},backend:n,attrs:{perm:c}}),m=C0({inputs:{x:h},backend:n,attrs:{shape:l}}),v=d1({inputs:{x:m},backend:n,attrs:{begin:f,size:d}});return n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(m),v}};function m1(e,t,n,r,a){for(var o=EV.util.sizeFromShape(r),i=EV.util.makeZerosTypedArray(a,n),s=0;s<e.length;s++){var u=e[s];if(u<0)throw new Error("Input x must be non-negative!");u>=a||(i[u]+=o>0?t[s]:1)}return i}function v1(e,t,n){for(var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=e.shape[0],o=e.shape[1],i=(0,EV.buffer)([a,n],t.dtype),s=0;s<a;s++)for(var u=0;u<o;u++){var c=e.get(s,u);if(c<0)throw new Error("Input x must be non-negative!");c>=n||(r?i.set(1,s,c):t.size>0?i.set(i.get(s,c)+t.get(s,u),s,c):i.set(i.get(s,c)+1,s,c))}return i}var g1={kernelName:EV.Bincount,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=t.weights,i=r.size,s=m1(n.data.get(a.dataId).values,n.data.get(o.dataId).values,o.dtype,o.shape,i);return n.makeTensorInfo([i],o.dtype,s)}};var y1={kernelName:EV.BroadcastArgs,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.s0,a=t.s1,o=n.data.get(r.dataId).values,i=n.data.get(a.dataId).values,s=EV.backend_util.assertAndGetBroadcastShape(Array.from(o),Array.from(i));return n.makeTensorInfo([s.length],"int32",Int32Array.from(s))}},b1=c0((function(e){return Math.ceil(e)})),x1=KQ(EV.Ceil,b1),w1={kernelName:EV.Ceil,backendName:"cpu",kernelFunc:x1},k1=GQ(EV.ClipByValue,(function(e,t){var n=t;return e>n.clipValueMax?n.clipValueMax:e<n.clipValueMin?n.clipValueMin:e})),S1={kernelName:EV.ClipByValue,backendName:"cpu",kernelFunc:k1},_1={kernelName:EV.ComplexAbs,backendName:"cpu",kernelFunc:function(e){for(var t=e.inputs.x,n=e.backend,r=new Float32Array(EV.util.sizeFromShape(t.shape)),a=n.data.get(t.dataId),o=a.complexTensorInfos.real,i=a.complexTensorInfos.imag,s=n.data.get(o.dataId).values,u=n.data.get(i.dataId).values,c=0;c<s.length;c++){var l=s[c],f=u[c];r[c]=Math.hypot(l,f)}return n.makeOutput(r,t.shape,"float32")}};function N1(e,t,n,r){var a=EV.util.getArrayFromDType(n,EV.util.sizeFromShape(t));if(r&&"string"!==n){var o=0;e.forEach((function(e){var t=EV.util.sizeFromShape(e.shape);a.set(e.vals,o),o+=t}))}else{var i=0;e.forEach((function(e){for(var r="string"===n?EV.backend_util.fromUint8ToStringArray(e.vals):e.vals,o=0,s=0;s<e.shape[0];++s)for(var u=s*t[1]+i,c=0;c<e.shape[1];++c)a[u+c]=r[o++];i+=e.shape[1]}))}return a}function E1(e){var t=e.inputs,n=e.backend,r=t.input,a=n.data.get(r.dataId).complexTensorInfos.imag,o=n.data.get(a.dataId).values;return n.makeTensorInfo(a.shape,a.dtype,o)}var C1={kernelName:EV.Imag,backendName:"cpu",kernelFunc:E1};function T1(e){var t=e.inputs,n=e.backend,r=e.attrs.axis,a=EV.util.parseAxisParam(r,t[0].shape)[0],o=EV.backend_util.computeOutShape(t.map((function(e){return e.shape})),a);if(0===EV.util.sizeFromShape(o))return n.makeTensorInfo(o,t[0].dtype,[]);var i=t.filter((function(e){return EV.util.sizeFromShape(e.shape)>0}));if(1===i.length)return $Q({inputs:{x:i[0]},backend:n});var s=i.map((function(e){return e.shape}));if(EV.backend_util.assertParamsConsistent(s,a),"complex64"===i[0].dtype){var u=i.map((function(e){return g0({inputs:{input:e},backend:n})})),c=i.map((function(e){return E1({inputs:{input:e},backend:n})})),l=T1({inputs:u,backend:n,attrs:{axis:a}}),f=T1({inputs:c,backend:n,attrs:{axis:a}}),d=h0({inputs:{real:l,imag:f},backend:n});return u.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),c.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),n.disposeIntermediateTensorInfo(l),n.disposeIntermediateTensorInfo(f),d}var p=i.map((function(e){var t=EV.util.sizeFromShape(e.shape.slice(a));return C0({inputs:{x:e},backend:n,attrs:{shape:[-1,t]}})})),h=p.map((function(e){return{vals:n.data.get(e.dataId).values,shape:e.shape}}));o=EV.backend_util.computeOutShape(p.map((function(e){return e.shape})),1);var m=1===p[0].shape[0],v=N1(h,o,t[0].dtype,m),g=EV.backend_util.computeOutShape(i.map((function(e){return e.shape})),a),y=n.makeTensorInfo(g,t[0].dtype,v);return p.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),y}var I1={kernelName:EV.Concat,backendName:"cpu",kernelFunc:T1};function O1(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=t.filter,i=r.strides,s=r.pad,u=r.dataFormat,c=r.dilations,l=r.dimRoundingMode;qQ([a,o],"conv2d");for(var f=EV.backend_util.convertConv2DDataFormat(u),d=EV.backend_util.computeConv2DInfo(a.shape,o.shape,i,c,s,l,!1,f),p=d.filterHeight,h=d.filterWidth,m=d.dilationHeight,v=d.dilationWidth,g=d.padInfo.left,y=d.padInfo.top,b="channelsLast"===d.dataFormat,x=new EV.TensorBuffer(d.outShape,a.dtype),w=EV.util.computeStrides(a.shape),k=EV.util.computeStrides(o.shape),S=w[0],_=b?w[1]:w[2],N=b?w[2]:1,E=b?1:w[1],C=x.strides[0],T=b?x.strides[1]:x.strides[2],I=b?x.strides[2]:1,O=b?1:x.strides[1],A=n.data.get(a.dataId).values,D=n.data.get(o.dataId).values,M=x.values,R=0;R<d.batchSize;++R)for(var P=R*S,j=R*C,F=0;F<d.outHeight;++F)for(var L=j+F*T,B=F*d.strideHeight-y,z=0;z<p;++z){var Z=B+z*m;if(!(Z<0||Z>=d.inHeight))for(var V=z*k[0],U=P+Z*_,q=0;q<d.outWidth;++q)for(var W=L+q*I,H=q*d.strideWidth-g,G=0;G<h;++G){var K=H+G*v;if(!(K<0||K>=d.inWidth))for(var X=U+K*N,Y=V+G*k[1],$=0;$<d.inChannels;++$){for(var J=A[X+$*E],Q=0;Q<d.outChannels;++Q)M[W+Q*O]+=J*D[Y+Q];Y+=d.outChannels}}}return n.makeTensorInfo(x.shape,x.dtype,M)}var A1={kernelName:EV.Conv2D,backendName:"cpu",kernelFunc:O1};var D1={kernelName:EV.Conv2DBackpropFilter,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=t.dy,i=r.strides,s=r.pad,u=r.dataFormat,c=r.dimRoundingMode,l=r.filterShape;qQ([a,o],"conv2dBackpropFilter");for(var f=EV.backend_util.convertConv2DDataFormat(u),d=EV.backend_util.computeConv2DInfo(a.shape,l,i,1,s,c,!1,f),p=d.strideHeight,h=d.strideWidth,m=d.filterHeight,v=d.filterWidth,g="channelsLast"===d.dataFormat,y=new EV.TensorBuffer(d.filterShape,"float32"),b=d.padInfo.left,x=d.padInfo.top,w=n.data.get(a.dataId).values,k=n.data.get(o.dataId).values,S=new EV.TensorBuffer(a.shape,a.dtype,w),_=new EV.TensorBuffer(o.shape,o.dtype,k),N=0;N<m;++N)for(var E=Math.max(0,Math.ceil((x-N)/p)),C=Math.min(d.outHeight,(d.inHeight+x-N)/p),T=0;T<v;++T)for(var I=Math.max(0,Math.ceil((b-T)/h)),O=Math.min(d.outWidth,(d.inWidth+b-T)/h),A=0;A<d.inChannels;++A)for(var D=0;D<d.outChannels;++D){for(var M=0,R=0;R<d.batchSize;++R)for(var P=E;P<C;++P)for(var j=N+P*p-x,F=I;F<O;++F){var L=T+F*h-b;M+=g?S.get(R,j,L,A)*_.get(R,P,F,D):S.get(R,A,j,L)*_.get(R,D,P,F)}y.set(M,N,T,A,D)}return n.makeTensorInfo(y.shape,y.dtype,y.values)}};var M1={kernelName:EV.Conv2DBackpropInput,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,o=t.dy,i=t.filter,s=r.inputShape,u=r.strides,c=r.pad,l=r.dataFormat,f=r.dimRoundingMode;qQ([o,i],"conv2dBackpropInput");var d=EV.util.computeStrides(i.shape),p=EV.util.computeStrides(o.shape),h=EV.backend_util.convertConv2DDataFormat(l),m=EV.backend_util.computeConv2DInfo(s,i.shape,u,1,c,f,!1,h),v=new EV.TensorBuffer(m.inShape,"float32"),g=v.values,y=n.data.get(o.dataId).values,b=n.data.get(i.dataId).values,x=(0,a.Z)(d,3),w=x[0],k=x[1],S=x[2],_=m.batchSize,N=m.filterHeight,E=m.filterWidth,C=m.inChannels,T=m.inHeight,I=m.inWidth,O=m.outChannels,A=m.outHeight,D=m.outWidth,M=m.strideHeight,R=m.strideWidth;h=m.dataFormat;for(var P=N-1-m.padInfo.top,j=E-1-m.padInfo.left,F="channelsLast"===h,L=v.strides[0],B=F?v.strides[1]:v.strides[2],z=F?v.strides[2]:1,Z=F?1:v.strides[1],V=p[0],U=F?p[1]:p[2],q=F?p[2]:1,W=F?1:p[1],H=0;H<_;++H)for(var G=0;G<C;++G)for(var K=0;K<T;++K)for(var X=K-P,Y=Math.max(0,Math.ceil(X/M)),$=Math.min(A,(N+X)/M),J=0;J<I;++J){for(var Q=J-j,ee=Math.max(0,Math.ceil(Q/R)),te=Math.min(D,(E+Q)/R),ne=0,re=Y;re<$;++re)for(var ae=re*M-X,oe=ee;oe<te;++oe)for(var ie=V*H+U*re+q*oe,se=w*(N-1-ae)+k*(E-1-(oe*R-Q))+S*G,ue=0;ue<O;++ue){ne+=y[ie+W*ue]*b[se+ue]}g[L*H+B*K+z*J+Z*G]=ne}return n.makeTensorInfo(v.shape,v.dtype,v.values)}};var R1={kernelName:EV.Conv3D,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=t.filter,i=r.strides,s=r.pad,u=r.dilations;qQ([a,o],"conv3d");for(var c=EV.backend_util.computeConv3DInfo(a.shape,o.shape,i,u,s),l=c.filterDepth,f=c.filterHeight,d=c.filterWidth,p=c.dilationDepth,h=c.dilationHeight,m=c.dilationWidth,v=c.padInfo,g=v.front,y=v.left,b=v.top,x=new EV.TensorBuffer(c.outShape,a.dtype),w=n.data.get(a.dataId).values,k=n.data.get(o.dataId).values,S=x.values,_=EV.util.computeStrides(a.shape),N=EV.util.computeStrides(o.shape),E=0;E<c.batchSize;++E)for(var C=E*_[0],T=E*x.strides[0],I=0;I<c.outDepth;++I)for(var O=T+I*x.strides[1],A=I*c.strideDepth-g,D=0;D<l;++D){var M=A+D*p;if(!(M<0||M>=c.inDepth))for(var R=D*N[0],P=C+M*_[1],j=0;j<c.outHeight;++j)for(var F=O+j*x.strides[2],L=j*c.strideHeight-b,B=0;B<f;++B){var z=L+B*h;if(!(z<0||z>=c.inHeight))for(var Z=R+B*N[1],V=P+z*_[2],U=0;U<c.outWidth;++U)for(var q=F+U*c.outChannels,W=U*c.strideWidth-y,H=0;H<d;++H){var G=W+H*m;if(!(G<0||G>=c.inWidth))for(var K=Z+H*N[2],X=V+G*c.inChannels,Y=K,$=0;$<c.inChannels;++$){for(var J=w[X+$],Q=0;Q<c.outChannels;++Q)S[q+Q]+=J*k[Y+Q];Y+=c.outChannels}}}}return n.makeTensorInfo(x.shape,x.dtype,x.values)}};var P1={kernelName:EV.Conv3DBackpropFilterV2,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,o=t.x,i=t.dy,s=r.strides,u=r.pad,c=r.filterShape;qQ([o,i],"conv3dBackpropFilterV2");for(var l=EV.util.computeStrides(o.shape),f=EV.util.computeStrides(i.shape),d=EV.backend_util.computeConv3DInfo(o.shape,c,s,1,u),p=d.strideDepth,h=d.strideHeight,m=d.strideWidth,v=d.filterDepth,g=d.filterHeight,y=d.filterWidth,b=new EV.TensorBuffer(d.filterShape,"float32"),x=b.values,w=(0,a.Z)(b.strides,4),k=w[0],S=w[1],_=w[2],N=w[3],E=n.data.get(i.dataId).values,C=(0,a.Z)(f,4),T=C[0],I=C[1],O=C[2],A=C[3],D=n.data.get(o.dataId).values,M=(0,a.Z)(l,4),R=M[0],P=M[1],j=M[2],F=M[3],L=d.padInfo.front,B=d.padInfo.left,z=d.padInfo.top,Z=0;Z<v;++Z)for(var V=Math.max(0,Math.ceil((L-Z)/p)),U=Math.min(d.outDepth,(d.inDepth+L-Z)/p),q=Z*k,W=0;W<g;++W)for(var H=Math.max(0,Math.ceil((z-W)/h)),G=Math.min(d.outHeight,(d.inHeight+z-W)/h),K=W*S+q,X=0;X<y;++X)for(var Y=Math.max(0,Math.ceil((B-X)/m)),$=Math.min(d.outWidth,(d.inWidth+B-X)/m),J=X*_+K,Q=0;Q<d.inChannels;++Q)for(var ee=Q*N+J,te=0;te<d.outChannels;++te){for(var ne=0,re=0;re<d.batchSize;++re)for(var ae=re*R,oe=re*T,ie=V;ie<U;++ie)for(var se=(Z+ie*p-L)*P+ae,ue=ie*I+oe,ce=H;ce<G;++ce)for(var le=(W+ce*h-z)*j+se,fe=ce*O+ue,de=Y;de<$;++de){var pe=de*A+fe;ne+=D[(X+de*m-B)*F+le+Q]*E[pe+te]}x[ee+te]=ne}return n.makeTensorInfo(b.shape,b.dtype,b.values)}};var j1={kernelName:EV.Conv3DBackpropInputV2,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,o=t.dy,i=t.filter,s=r.pad,u=r.strides,c=r.inputShape;qQ([o],"conv3dBackpropInputV2");for(var l=EV.util.computeStrides(o.shape),f=EV.util.computeStrides(i.shape),d=EV.backend_util.computeConv3DInfo(c,i.shape,u,1,s),p=new EV.TensorBuffer(d.inShape,"float32"),h=p.values,m=(0,a.Z)(p.strides,4),v=m[0],g=m[1],y=m[2],b=m[3],x=n.data.get(o.dataId).values,w=(0,a.Z)(l,4),k=w[0],S=w[1],_=w[2],N=w[3],E=n.data.get(i.dataId).values,C=(0,a.Z)(f,4),T=C[0],I=C[1],O=C[2],A=C[3],D=d.batchSize,M=d.filterDepth,R=d.filterHeight,P=d.filterWidth,j=d.inChannels,F=d.inDepth,L=d.inHeight,B=d.inWidth,z=d.outChannels,Z=d.outDepth,V=d.outHeight,U=d.outWidth,q=d.strideDepth,W=d.strideHeight,H=d.strideWidth,G=M-1-d.padInfo.front,K=R-1-d.padInfo.top,X=P-1-d.padInfo.left,Y=0;Y<D;++Y)for(var $=0;$<j;++$)for(var J=0;J<F;++J)for(var Q=J-G,ee=Math.max(0,Math.ceil(Q/q)),te=Math.min(Z,(M+Q)/q),ne=0;ne<L;++ne)for(var re=ne-K,ae=Math.max(0,Math.ceil(re/W)),oe=Math.min(V,(R+re)/W),ie=0;ie<B;++ie){for(var se=ie-X,ue=Math.max(0,Math.ceil(se/H)),ce=Math.min(U,(P+se)/H),le=0,fe=ee;fe<te;++fe)for(var de=fe*q-Q,pe=ae;pe<oe;++pe)for(var he=pe*W-re,me=ue;me<ce;++me)for(var ve=k*Y+S*fe+_*pe+N*me,ge=T*(M-1-de)+I*(R-1-he)+O*(P-1-(me*H-se))+A*$,ye=0;ye<z;++ye){le+=x[ve+ye]*E[ge+ye]}h[v*Y+g*J+y*ne+b*ie+$]=le}return n.makeTensorInfo(p.shape,p.dtype,p.values)}},F1=GQ(EV.Cos,(function(e){return Math.cos(e)})),L1={kernelName:EV.Cos,backendName:"cpu",kernelFunc:F1},B1=GQ(EV.Cosh,(function(e){return Math.cosh(e)})),z1={kernelName:EV.Cosh,backendName:"cpu",kernelFunc:B1};var Z1={kernelName:EV.CropAndResize,backendName:"cpu",kernelFunc:function(e){for(var t=e.inputs,n=e.backend,r=e.attrs,o=t.image,i=t.boxes,s=t.boxInd,u=r.cropSize,c=r.method,l=r.extrapolationValue,f=(0,a.Z)(o.shape,4),d=f[0],p=f[1],h=f[2],m=f[3],v=i.shape[0],g=(0,a.Z)(u,2),y=g[0],b=g[1],x=(0,EV.buffer)([v,y,b,m],"float32"),w=n.data.get(i.dataId).values,k=n.data.get(s.dataId).values,S=n.data.get(o.dataId).values,_=EV.util.computeStrides(o.shape),N=EV.util.computeStrides(x.shape),E=0;E<v;E++){var C=4*E,T=w[C],I=w[C+1],O=w[C+2],A=w[C+3],D=k[E];if(!(D>=d))for(var M=y>1?(O-T)*(p-1)/(y-1):0,R=b>1?(A-I)*(h-1)/(b-1):0,P=0;P<y;P++){var j=y>1?T*(p-1)+P*M:.5*(T+O)*(p-1);if(j<0||j>p-1)for(var F=0;F<b;F++)for(var L=0;L<m;L++){var B=L+F*N[2]+P*N[1]+E*N[0];x.values[B]=l}else if("bilinear"===c)for(var z=Math.floor(j),Z=Math.ceil(j),V=j-z,U=0;U<b;U++){var q=b>1?I*(h-1)+U*R:.5*(I+A)*(h-1);if(q<0||q>h-1)for(var W=0;W<m;W++){var H=W+U*N[2]+P*N[1]+E*N[0];x.values[H]=l}else for(var G=Math.floor(q),K=Math.ceil(q),X=q-G,Y=0;Y<m;Y++){var $=Y+G*_[2]+z*_[1]+D*_[0],J=S[$],Q=S[$=Y+K*_[2]+z*_[1]+D*_[0]],ee=S[$=Y+G*_[2]+Z*_[1]+D*_[0]],te=J+(Q-J)*X,ne=ee+(S[$=Y+K*_[2]+Z*_[1]+D*_[0]]-ee)*X;$=Y+U*N[2]+P*N[1]+E*N[0],x.values[$]=te+(ne-te)*V}}else for(var re=0;re<b;++re){var ae=b>1?I*(h-1)+re*R:.5*(I+A)*(h-1);if(ae<0||ae>h-1)for(var oe=0;oe<m;oe++){var ie=oe+re*N[2]+P*N[1]+E*N[0];x.values[ie]=l}else for(var se=Math.round(ae),ue=Math.round(j),ce=0;ce<m;ce++){var le=ce+se*_[2]+ue*_[1]+D*_[0],fe=ce+re*N[2]+P*N[1]+E*N[0];x.values[fe]=S[le]}}}}return n.makeTensorInfo(x.shape,x.dtype,x.values)}};var V1={kernelName:EV.Cumsum,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.axis,i=r.exclusive,s=r.reverse;qQ(a,"cumsum");var u=EV.backend_util.getAxesPermutation([o],a.shape.length),c=a;null!=u&&(c=z0({inputs:{x:a},backend:n,attrs:{perm:u}}));var l=EV.backend_util.getInnerMostAxes(1,a.shape.length)[0];if(l!==c.shape.length-1)throw new Error("backend.cumsum in CPU expects an inner-most "+"axis=".concat(c.shape.length-1," but got axis=").concat(l));for(var f=(0,EV.upcastType)(c.dtype,"int32"),d=EV.util.makeZerosTypedArray(EV.util.sizeFromShape(c.shape),f),p=n.data.get(c.dataId).values,h=c.shape[c.shape.length-1],m=s?function(e,t){return e+h-t-1}:function(e,t){return e+t},v=0;v<p.length;v+=h)for(var g=0;g<h;g++){var y=m(v,g);if(0===g)d[y]=i?0:p[y];else{var b=m(v,g-1);d[y]=i?p[b]+d[b]:p[y]+d[b]}}var x=n.makeTensorInfo(c.shape,f,d);if(null!=u){var w=z0({inputs:{x:x},backend:n,attrs:{perm:EV.backend_util.getUndoAxesPermutation(u)}});return n.disposeIntermediateTensorInfo(x),n.disposeIntermediateTensorInfo(c),w}return x}};var U1={kernelName:EV.DenseBincount,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=t.weights,i=r.size,s=r.binaryOutput;if(1===a.shape.length){var u=m1(n.data.get(a.dataId).values,n.data.get(o.dataId).values,o.dtype,o.shape,i);return n.makeTensorInfo([i],o.dtype,u)}if(2===a.shape.length){var c=v1(n.bufferSync(a),n.bufferSync(o),i,s);return n.makeTensorInfo(c.shape,o.dtype,c.values)}throw new Error("Error in denseBincount: input must be at most rank 2, but got rank"+"".concat(a.shape.length,"."))}};var q1={kernelName:EV.DepthToSpace,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.blockSize,i=r.dataFormat;EV.util.assert("NHWC"===i,(function(){return"Only NHWC dataFormat supported on CPU for depthToSpace. Got ".concat(i)}));for(var s=a.shape[0],u=a.shape[1],c=a.shape[2],l=a.shape[3],f=u*o,d=c*o,p=l/(o*o),h=n.data.get(a.dataId).values,m=new Float32Array(s*f*d*p),v=0,g=0;g<s;++g)for(var y=0;y<f;++y)for(var b=Math.floor(y/o),x=y%o,w=0;w<d;++w)for(var k=Math.floor(w/o),S=(x*o+w%o)*p,_=0;_<p;++_){var N=_+S+l*(k+c*(b+u*g));m[v++]=h[N]}return n.makeTensorInfo([s,f,d,p],a.dtype,m)}};function W1(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=t.filter,i=r.strides,s=r.pad,u=r.dilations,c=r.dimRoundingMode;qQ([a,o],"depthwiseConv2DNative");var l=EV.util.computeStrides(a.shape),f=EV.util.computeStrides(o.shape),d=u;null==d&&(d=[1,1]),EV.util.assert(EV.backend_util.eitherStridesOrDilationsAreOne(i,d),(function(){return"Error in depthwiseConv2d: Either strides or dilations must be "+"1. Got strides ".concat(i," and dilations '").concat(d,"'")}));for(var p=EV.backend_util.computeConv2DInfo(a.shape,o.shape,i,d,s,c,!0),h=p.filterHeight,m=p.filterWidth,v=p.dilationHeight,g=p.dilationWidth,y=p.padInfo,b=y.left,x=y.top,w=p.outChannels/p.inChannels,k=new EV.TensorBuffer(p.outShape,a.dtype),S=n.data.get(a.dataId).values,_=n.data.get(o.dataId).values,N=k.values,E=0;E<p.batchSize;++E)for(var C=E*l[0],T=E*k.strides[0],I=0;I<p.outHeight;++I)for(var O=T+I*k.strides[1],A=I*p.strideHeight-x,D=0;D<h;++D){var M=A+D*v;if(!(M<0||M>=p.inHeight))for(var R=D*f[0],P=C+M*l[1],j=0;j<p.outWidth;++j)for(var F=O+j*k.strides[2],L=j*p.strideWidth-b,B=0;B<m;++B){var z=L+B*g;if(!(z<0||z>=p.inWidth))for(var Z=R+B*f[1],V=P+z*p.inChannels,U=F,q=Z,W=0;W<p.inChannels;++W){for(var H=S[V+W],G=0;G<w;++G)N[U+G]+=H*_[q+G];U+=w,q+=w}}}return n.makeTensorInfo(k.shape,k.dtype,k.values)}var H1={kernelName:EV.DepthwiseConv2dNative,backendName:"cpu",kernelFunc:W1};var G1={kernelName:EV.DepthwiseConv2dNativeBackpropFilter,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=t.dy,i=r.strides,s=r.dilations,u=r.pad,c=r.dimRoundingMode,l=r.filterShape;qQ([a,o],"depthwiseConv2dNativeBackpropFilter");for(var f=EV.backend_util.computeConv2DInfo(a.shape,l,i,s,u,c,!0),d=f.strideHeight,p=f.strideWidth,h=f.filterHeight,m=f.filterWidth,v=new EV.TensorBuffer(f.filterShape,"float32"),g=f.padInfo.left,y=f.padInfo.top,b=f.outChannels/f.inChannels,x=n.data.get(a.dataId).values,w=new EV.TensorBuffer(a.shape,a.dtype,x),k=n.data.get(o.dataId).values,S=new EV.TensorBuffer(o.shape,o.dtype,k),_=0;_<h;++_)for(var N=Math.max(0,Math.ceil((y-_)/d)),E=Math.min(f.outHeight,(f.inHeight+y-_)/d),C=0;C<m;++C)for(var T=Math.max(0,Math.ceil((g-C)/p)),I=Math.min(f.outWidth,(f.inWidth+g-C)/p),O=0;O<f.outChannels;++O){for(var A=Math.trunc(O/b),D=O%b,M=0,R=0;R<f.batchSize;++R)for(var P=N;P<E;++P)for(var j=_+P*d-y,F=T;F<I;++F){var L=C+F*p-g;M+=w.get(R,j,L,A)*S.get(R,P,F,O)}v.set(M,_,C,A,D)}return n.makeTensorInfo(v.shape,v.dtype,v.values)}};var K1={kernelName:EV.DepthwiseConv2dNativeBackpropInput,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,o=t.dy,i=t.filter,s=r.strides,u=r.dilations,c=r.pad,l=r.dimRoundingMode,f=r.inputShape;qQ([o,i],"depthwiseConv2DNativeBackpropInput");for(var d=EV.util.computeStrides(o.shape),p=EV.util.computeStrides(i.shape),h=EV.backend_util.computeConv2DInfo(f,i.shape,s,u,c,l,!0),m=new EV.TensorBuffer(h.inShape,"float32"),v=m.values,g=(0,a.Z)(m.strides,3),y=g[0],b=g[1],x=g[2],w=n.data.get(o.dataId).values,k=(0,a.Z)(d,3),S=k[0],_=k[1],N=k[2],E=n.data.get(i.dataId).values,C=(0,a.Z)(p,3),T=C[0],I=C[1],O=C[2],A=h.batchSize,D=h.filterHeight,M=h.filterWidth,R=h.inChannels,P=h.inHeight,j=h.inWidth,F=h.outChannels,L=h.outHeight,B=h.outWidth,z=h.strideHeight,Z=h.strideWidth,V=D-1-h.padInfo.top,U=M-1-h.padInfo.left,q=F/R,W=0;W<A;++W)for(var H=0;H<R;++H)for(var G=0;G<P;++G)for(var K=G-V,X=Math.max(0,Math.ceil(K/z)),Y=Math.min(L,(D+K)/z),$=0;$<j;++$){for(var J=$-U,Q=Math.max(0,Math.ceil(J/Z)),ee=Math.min(B,(M+J)/Z),te=0,ne=X;ne<Y;++ne)for(var re=ne*z-K,ae=Q;ae<ee;++ae)for(var oe=S*W+_*ne+N*ae,ie=T*(D-1-re)+I*(M-1-(ae*Z-J))+O*H,se=0;se<q;++se){te+=w[oe+(H*q+se)]*E[ie+se]}v[y*W+b*G+x*$+H]=te}return n.makeTensorInfo(m.shape,m.dtype,m.values)}};var X1={kernelName:EV.Diag,backendName:"cpu",kernelFunc:function(e){for(var t=e.inputs,n=e.backend,a=t.x,o=EV.util.sizeFromShape(a.shape),i=n.data.get(a.dataId).values,s=(0,EV.buffer)([o,o],a.dtype),u=s.values,c=0;c<i.length;c++)u[c*o+c]=i[c];var l=[].concat((0,r.Z)(a.shape),(0,r.Z)(a.shape));return n.makeTensorInfo(l,s.dtype,s.values)}},Y1={kernelName:EV.Dilation2D,backendName:"cpu",kernelFunc:function(e){for(var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=t.filter,i=r.strides,s=r.pad,u=r.dilations,c=n,l=c.data.get(a.dataId).values,f=a.shape.length,d=c.data.get(o.dataId).values,p=o.shape.length,h=EV.backend_util.computeDilation2DInfo(a.shape,o.shape,i,s,"NHWC",u),m=h.batchSize,v=h.inHeight,g=h.inWidth,y=h.inChannels,b=h.outHeight,x=h.outWidth,w=h.padInfo,k=h.strideHeight,S=h.strideWidth,_=h.filterHeight,N=h.filterWidth,E=h.dilationHeight,C=h.dilationWidth,T=h.outShape,I=EV.util.sizeFromShape(T),O=T.length,A=EV.util.getArrayFromDType(a.dtype,I),D=0;D<m;++D)for(var M=0;M<b;++M)for(var R=M*k-w.top,P=0;P<x;++P)for(var j=P*S-w.left,F=0;F<y;++F){for(var L=Number.MIN_SAFE_INTEGER,B=0;B<_;++B){var z=R+B*E;if(z>=0&&z<v)for(var Z=0;Z<N;++Z){var V=j+Z*C;if(V>=0&&V<g){var U=EV.util.locToIndex([D,z,V,F],f,EV.util.computeStrides(a.shape)),q=EV.util.locToIndex([B,Z,F],p,EV.util.computeStrides(o.shape)),W=l[U]+d[q];W>L&&(L=W)}}}A[EV.util.locToIndex([D,M,P,F],O,EV.util.computeStrides(T))]=L}return{dataId:c.write(EV.util.toTypedArray(A,a.dtype),T,a.dtype),shape:T,dtype:a.dtype}}},$1={kernelName:EV.Dilation2DBackpropFilter,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=t.filter,i=t.dy,s=r.strides,u=r.pad,c=r.dilations,l=n,f=EV.util.toNestedArray(a.shape,l.data.get(a.dataId).values),d=EV.util.toNestedArray(o.shape,l.data.get(o.dataId).values),p=EV.backend_util.computeDilation2DInfo(a.shape,o.shape,s,u,"NHWC",c),h=p.batchSize,m=p.inHeight,v=p.inWidth,g=p.inChannels,y=p.outHeight,b=p.outWidth,x=p.padInfo,w=p.strideHeight,k=p.strideWidth,S=p.filterHeight,_=p.filterWidth,N=p.dilationHeight,E=p.dilationWidth,C=p.outShape;EV.util.assert(i.rank===C.length,(function(){return"Error in ".concat(EV.Dilation2DBackpropFilter,", dy ")+"must have the same rank as output ".concat(C.length,", but got ")+"".concat(i.rank)}));for(var T=EV.util.toNestedArray(C,l.data.get(i.dataId).values),I=EV.util.makeZerosNestedTypedArray(o.shape,o.dtype),O=0;O<h;++O)for(var A=0;A<y;++A)for(var D=A*w-x.top,M=0;M<b;++M)for(var R=M*k-x.left,P=0;P<g;++P){for(var j=Number.MIN_SAFE_INTEGER,F=0,L=0,B=0;B<S;++B){var z=D+B*N;if(z>=0&&z<m)for(var Z=0;Z<_;++Z){var V=R+Z*E;if(V>=0&&V<v){var U=f[O][z][V][P]+d[B][Z][P];U>j&&(j=U,F=B,L=Z)}}}I[F][L][P]+=T[O][A][M][P]}return{dataId:l.write(EV.util.toTypedArray(I,a.dtype),o.shape,o.dtype),shape:o.shape,dtype:o.dtype}}},J1={kernelName:EV.Dilation2DBackpropInput,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=t.filter,i=t.dy,s=r.strides,u=r.pad,c=r.dilations,l=n,f=EV.util.toNestedArray(a.shape,l.data.get(a.dataId).values),d=EV.util.toNestedArray(o.shape,l.data.get(o.dataId).values),p=EV.backend_util.computeDilation2DInfo(a.shape,o.shape,s,u,"NHWC",c),h=p.batchSize,m=p.inHeight,v=p.inWidth,g=p.inChannels,y=p.outHeight,b=p.outWidth,x=p.padInfo,w=p.strideHeight,k=p.strideWidth,S=p.filterHeight,_=p.filterWidth,N=p.dilationHeight,E=p.dilationWidth,C=p.outShape;EV.util.assert(i.rank===C.length,(function(){return"Error in ".concat(EV.Dilation2DBackpropInput,", dy ")+"must have the same rank as output ".concat(C.length,", but got ")+"".concat(i.rank)}));for(var T=EV.util.toNestedArray(C,l.data.get(i.dataId).values),I=EV.util.makeZerosNestedTypedArray(a.shape,a.dtype),O=0;O<h;++O)for(var A=0;A<y;++A)for(var D=A*w-x.top,M=0;M<b;++M)for(var R=M*k-x.left,P=0;P<g;++P){for(var j=Number.MIN_SAFE_INTEGER,F=D<0?0:D,L=R<0?0:R,B=0;B<S;++B){var z=D+B*N;if(z>=0&&z<m)for(var Z=0;Z<_;++Z){var V=R+Z*E;if(V>=0&&V<v){var U=f[O][z][V][P]+d[B][Z][P];U>j&&(j=U,F=z,L=V)}}}I[O][F][L][P]+=T[O][A][M][P]}return{dataId:l.write(EV.util.toTypedArray(I,a.dtype),a.shape,a.dtype),shape:a.shape,dtype:a.dtype}}},Q1=t0((function(e,t){return e*t})),e2=k0((function(e,t,n,r){return{real:e*n-t*r,imag:e*r+t*n}})),t2=w0(EV.Multiply,Q1,e2),n2={kernelName:EV.Multiply,backendName:"cpu",kernelFunc:t2};function r2(e){var t,n=e.inputs,r=e.backend,o=e.attrs,i=n.x,s=o.axis,u=o.keepDims;qQ(i,"sum");var c=(t="bool"===i.dtype?b0({inputs:{x:i},backend:r,attrs:{dtype:"int32"}}):$Q({inputs:{x:i},backend:r})).shape.length,l=EV.util.parseAxisParam(s,t.shape),f=EV.backend_util.getAxesPermutation(l,c),d=l,p=t;null!=f&&(p=z0({inputs:{x:t},backend:r,attrs:{perm:f}}),d=EV.backend_util.getInnerMostAxes(d.length,c)),EV.backend_util.assertAxesAreInnerMostDims("sum",d,p.shape.length);for(var h=EV.backend_util.computeOutAndReduceShapes(p.shape,d),m=(0,a.Z)(h,2),v=m[0],g=m[1],y=v0(r,v,EV.backend_util.upcastType(p.dtype,"int32")),b=EV.util.sizeFromShape(g),x=r.data.get(y.dataId).values,w=r.data.get(p.dataId).values,k=0;k<x.length;++k){for(var S=k*b,_=0,N=0;N<b;++N)_+=w[S+N];x[k]=_}if(u){var E=y;y=C0({inputs:{x:y},backend:r,attrs:{shape:EV.backend_util.expandShapeToKeepDim(y.shape,l)}}),r.disposeIntermediateTensorInfo(E)}return r.disposeIntermediateTensorInfo(t),null!=f&&r.disposeIntermediateTensorInfo(p),y}var a2={kernelName:EV.Sum,backendName:"cpu",kernelFunc:r2};var o2={kernelName:EV.Einsum,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs.equation,a=t,o=EV.backend_util.decodeEinsumEquation(r,a.length),i=o.allDims,s=o.summedDims,u=o.idDims;EV.backend_util.checkEinsumDimSizes(i.length,u,a);for(var c=EV.backend_util.getEinsumComputePath(s,u),l=c.path,f=c.steps,d=f.length,p=null,h=i.length,m=[],v=0;v<d;++v){var g,y=(0,Et.Z)(f[v]);try{for(y.s();!(g=y.n()).done;){var b=g.value,x=EV.backend_util.getEinsumPermutation(h,u[b]),w=x.permutationIndices,k=x.expandDims,S=void 0;EV.backend_util.isIdentityPermutation(w)?S=a[b]:(S=z0({inputs:{x:a[b]},backend:n,attrs:{perm:w}}),m.push(S));for(var _=S.shape.slice(),N=0;N<k.length;++N)_.splice(k[N],0,1);EV.util.arraysEqual(S.shape,_)||(S=C0({inputs:{x:S},backend:n,attrs:{shape:_}}),m.push(S)),null===p?p=S:(p=t2({inputs:{a:S,b:p},backend:n}),m.push(p))}}catch(I){y.e(I)}finally{y.f()}v<d-1&&(l[v]>=0&&(p=r2({inputs:{x:p},backend:n,attrs:{axis:l[v]-(i.length-h),keepDims:!1}}),m.push(p)),h--)}for(var E=0,C=m;E<C.length;E++){var T=C[E];T!==p&&n.disposeIntermediateTensorInfo(T)}return p}};var i2={kernelName:EV.EluGrad,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.dy,a=t.y;qQ([r,a],"eluGrad");for(var o=new Float32Array(EV.util.sizeFromShape(a.shape)),i=n.data.get(a.dataId).values,s=n.data.get(r.dataId).values,u=0;u<i.length;++u){var c=i[u];o[u]=c>=1?s[u]:s[u]*(c+1)}return n.makeTensorInfo(a.shape,"float32",o)}},s2=t0((function(e,t){return e===t?1:0})),u2=w0(EV.Equal,s2,null,"bool"),c2={kernelName:EV.Equal,backendName:"cpu",kernelFunc:u2},l2=EV.backend_util.ERF_P,f2=EV.backend_util.ERF_A1,d2=EV.backend_util.ERF_A2,p2=EV.backend_util.ERF_A3,h2=EV.backend_util.ERF_A4,m2=EV.backend_util.ERF_A5,v2=GQ(EV.Erf,(function(e){var t=Math.sign(e),n=Math.abs(e),r=1/(1+l2*n);return t*(1-((((m2*r+h2)*r+p2)*r+d2)*r+f2)*r*Math.exp(-n*n))})),g2={kernelName:EV.Erf,backendName:"cpu",kernelFunc:v2},y2=c0((function(e){return Math.exp(e)})),b2=KQ(EV.Exp,y2,"float32"),x2={kernelName:EV.Exp,backendName:"cpu",kernelFunc:b2};function w2(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.input,o=r.dim,i=a.shape.length,s=a.shape.slice(),u=o;return o<0&&(EV.util.assert(-(i+1)<=o,(function(){return"Axis must be in the interval [".concat(-(i+1),", ").concat(i,"]")})),u=i+o+1),s.splice(u,0,1),C0({inputs:{x:a},backend:n,attrs:{shape:s}})}var k2={kernelName:EV.ExpandDims,backendName:"cpu",kernelFunc:w2},S2=c0((function(e){return Math.expm1(e)})),_2=KQ(EV.Expm1,S2),N2={kernelName:EV.Expm1,backendName:"cpu",kernelFunc:_2},E2=t0((function(e,t){return e/t})),C2=w0(EV.RealDiv,E2),T2={kernelName:EV.RealDiv,backendName:"cpu",kernelFunc:C2},I2=t0((function(e,t){return e-t})),O2=k0((function(e,t,n,r){return{real:e-n,imag:t-r}})),A2=w0(EV.Sub,I2,O2),D2={kernelName:EV.Sub,backendName:"cpu",kernelFunc:A2};function M2(e,t,n){for(var r=e.shape,a=r[0],o=r[1],i=n.data.get(e.dataId),s=i.complexTensorInfos.real,u=i.complexTensorInfos.imag,c=[a,o],l=EV.util.sizeFromShape(c),f=EV.util.getTypedArrayFromDType("float32",l),d=EV.util.getTypedArrayFromDType("float32",l),p=0;p<a;p++){for(var h=d1({inputs:{x:s},backend:n,attrs:{begin:[p,0],size:[1,o]}}),m=d1({inputs:{x:u},backend:n,attrs:{begin:[p,0],size:[1,o]}}),v=h0({inputs:{real:h,imag:m},backend:n}),g=R2(v,t,n),y=g.real,b=g.imag,x=EV.backend_util.mergeRealAndImagArrays(y,b),w=0;w<o;w++){var k=EV.backend_util.getComplexWithIndex(x,w);f[p*o+w]=k.real,d[p*o+w]=k.imag}n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(v)}var S=n.makeTensorInfo(c,"float32",f),_=n.makeTensorInfo(c,"float32",d),N=h0({inputs:{real:S,imag:_},backend:n});return n.disposeIntermediateTensorInfo(S),n.disposeIntermediateTensorInfo(_),N}function R2(e,t,n){var r=EV.util.sizeFromShape(e.shape),a=n.data.get(e.dataId),o=n.data.get(a.complexTensorInfos.real.dataId).values,i=n.data.get(a.complexTensorInfos.imag.dataId).values;if(0===((g=r)&g-1)){var s=P2(o,i,r,t,n),u=[e.shape[0],e.shape[1]];if(t){var c=n.makeTensorInfo(u,"float32",s.real),l=n.makeTensorInfo(u,"float32",s.imag),f=n.makeTensorInfo([],"float32",EV.util.createScalarValue(r,"float32")),d=$Q({inputs:{x:f},backend:n}),p=T2.kernelFunc({inputs:{a:c,b:f},backend:n}),h=T2.kernelFunc({inputs:{a:l,b:d},backend:n}),m=n.data.get(p.dataId).values,v=n.data.get(h.dataId).values;return n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(l),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(h),{real:m,imag:v}}return s}var g,y=function(e,t,n){for(var r=new Float32Array(2*t),a=0;a<t;a++){for(var o=0,i=0,s=0;s<t;s++){var u=EV.backend_util.exponent(a*s,t,n),c=EV.backend_util.getComplexWithIndex(e,s);o+=c.real*u.real-c.imag*u.imag,i+=c.real*u.imag+c.imag*u.real}n&&(o/=t,i/=t),EV.backend_util.assignToTypedArray(r,o,i,a)}return r}(EV.backend_util.mergeRealAndImagArrays(o,i),r,t);return EV.backend_util.splitRealAndImagArrays(y)}function P2(e,t,n,r,a){if(1===n)return{real:e,imag:t};var o=EV.backend_util.mergeRealAndImagArrays(e,t),i=n/2,s=EV.backend_util.complexWithEvenIndex(o),u=s.real,c=s.imag,l=[u.length],f=a.makeTensorInfo(l,"float32",u),d=a.makeTensorInfo(l,"float32",c),p=h0({inputs:{real:f,imag:d},backend:a}),h=EV.backend_util.complexWithOddIndex(o),m=h.real,v=h.imag,g=[m.length],y=a.makeTensorInfo(g,"float32",m),b=a.makeTensorInfo(g,"float32",v),x=h0({inputs:{real:y,imag:b},backend:a}),w=P2(u,c,i,r,a),k=w.real,S=w.imag,_=[k.length],N=a.makeTensorInfo(_,"float32",k),E=a.makeTensorInfo(_,"float32",S),C=h0({inputs:{real:N,imag:E},backend:a}),T=P2(m,v,i,r,a),I=T.real,O=T.imag,A=[I.length],D=a.makeTensorInfo(A,"float32",I),M=a.makeTensorInfo(A,"float32",O),R=h0({inputs:{real:D,imag:M},backend:a}),P=EV.backend_util.exponents(n,r),j=[P.real.length],F=a.makeTensorInfo(j,"float32",P.real),L=a.makeTensorInfo(j,"float32",P.imag),B=h0({inputs:{real:F,imag:L},backend:a}),z=t2({inputs:{a:B,b:R},backend:a}),Z=N0({inputs:{a:C,b:z},backend:a}),V=A2({inputs:{a:C,b:z},backend:a}),U=g0({inputs:{input:Z},backend:a}),q=g0({inputs:{input:V},backend:a}),W=E1({inputs:{input:Z},backend:a}),H=E1({inputs:{input:V},backend:a}),G=T1({inputs:[U,q],backend:a,attrs:{axis:0}}),K=T1({inputs:[W,H],backend:a,attrs:{axis:0}}),X=a.data.get(G.dataId).values,Y=a.data.get(K.dataId).values;return a.disposeIntermediateTensorInfo(f),a.disposeIntermediateTensorInfo(d),a.disposeIntermediateTensorInfo(p),a.disposeIntermediateTensorInfo(y),a.disposeIntermediateTensorInfo(b),a.disposeIntermediateTensorInfo(x),a.disposeIntermediateTensorInfo(N),a.disposeIntermediateTensorInfo(E),a.disposeIntermediateTensorInfo(C),a.disposeIntermediateTensorInfo(D),a.disposeIntermediateTensorInfo(M),a.disposeIntermediateTensorInfo(R),a.disposeIntermediateTensorInfo(F),a.disposeIntermediateTensorInfo(L),a.disposeIntermediateTensorInfo(B),a.disposeIntermediateTensorInfo(z),a.disposeIntermediateTensorInfo(Z),a.disposeIntermediateTensorInfo(V),a.disposeIntermediateTensorInfo(U),a.disposeIntermediateTensorInfo(W),a.disposeIntermediateTensorInfo(q),a.disposeIntermediateTensorInfo(H),a.disposeIntermediateTensorInfo(G),a.disposeIntermediateTensorInfo(K),{real:X,imag:Y}}var j2={kernelName:EV.FFT,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.input,a=EV.util.sizeFromShape(r.shape),o=r.shape[r.shape.length-1],i=C0({inputs:{x:r},backend:n,attrs:{shape:[a/o,o]}}),s=M2(i,!1,n),u=C0({inputs:{x:s},backend:n,attrs:{shape:r.shape}});return n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(s),u}};function F2(e){var t=e.backend,n=e.attrs,r=n.shape,a=n.value,o=n.dtype||EV.util.inferDtype(a),i=EV.util.getArrayFromDType(o,EV.util.sizeFromShape(r));return function(e,t,n){e.fill(t)}(i,a),t.makeTensorInfo(r,o,i)}var L2={kernelName:EV.Fill,backendName:"cpu",kernelFunc:F2};var B2={kernelName:EV.FlipLeftRight,backendName:"cpu",kernelFunc:function(e){for(var t=e.inputs,n=(e.attrs,e.backend),r=t.image,o=n,i=EV.util.getTypedArrayFromDType(r.dtype,EV.util.sizeFromShape(r.shape)),s=(0,a.Z)(r.shape,4),u=s[0],c=s[1],l=s[2],f=s[3],d=o.data.get(r.dataId).values,p=0;p<u;p++)for(var h=p*l*c*f,m=0;m<c;m++)for(var v=m*(l*f),g=0;g<l;g++)for(var y=g*f,b=0;b<f;b++){var x=Math.round(l-g-1),w=h+v+y+b,k=d[w];if(x>=0&&x<l)k=d[h+v+x*f+b];i[w]=k}return{dataId:o.write(i,r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}},z2=c0((function(e){return Math.floor(e)})),Z2=KQ(EV.Floor,z2),V2={kernelName:EV.Floor,backendName:"cpu",kernelFunc:Z2},U2=t0((function(e,t){return Math.floor(e/t)})),q2=w0(EV.FloorDiv,U2,null,"int32"),W2={kernelName:EV.FloorDiv,backendName:"cpu",kernelFunc:q2};var H2={kernelName:EV.FusedConv2D,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=t.filter,i=t.bias,s=t.preluActivationWeights,u=r.strides,c=r.pad,l=r.dataFormat,f=r.dilations,d=r.dimRoundingMode,p=r.activation,h=r.leakyreluAlpha,m=O1({inputs:{x:a,filter:o},backend:n,attrs:{strides:u,pad:c,dataFormat:l,dilations:f,dimRoundingMode:d}});if(i){var v=m;m=N0({inputs:{a:m,b:i},backend:n}),n.disposeIntermediateTensorInfo(v)}if(p){var g=m;m=p0(n,m,p,s,h),n.disposeIntermediateTensorInfo(g)}return m}};var G2={kernelName:EV.FusedDepthwiseConv2D,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=t.filter,i=t.bias,s=t.preluActivationWeights,u=r.strides,c=r.pad,l=r.dataFormat,f=r.dilations,d=r.dimRoundingMode,p=r.activation,h=r.leakyreluAlpha,m=W1({inputs:{x:a,filter:o},backend:n,attrs:{strides:u,pad:c,dataFormat:l,dilations:f,dimRoundingMode:d}});if(i){var v=m;m=N0({inputs:{a:m,b:i},backend:n}),n.disposeIntermediateTensorInfo(v)}if(p){var g=m;m=p0(n,m,p,s,h),n.disposeIntermediateTensorInfo(g)}return m}};function K2(e,t,n,a,o,i,s,u,c){for(var l=(0,EV.buffer)([a,i],n),f=0;f<a;f++){for(var d=[],p=0,h=0;h<o;h++){var m=e[f*o+h];p+=m*s[h],d.push(m)}if(p<0||p>=c/i)throw new Error("Invalid indices: ".concat(d," does not index into ").concat(u));for(var v=0;v<i;v++)l.values[f*i+v]=t.get.apply(t,(0,r.Z)(t.indexToLoc(p*i+v)))}return l}var X2={kernelName:EV.GatherNd,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.params,o=t.indices,i=EV.util.sizeFromShape(r.shape),s=o.shape,u=s[s.length-1],c=EV.backend_util.prepareAndValidate(r,o),l=(0,a.Z)(c,4),f=l[0],d=l[1],p=l[2],h=l[3];if(0===d)return n.makeTensorInfo(f,r.dtype,[]);var m=K2(n.data.get(o.dataId).values,n.bufferSync(r),r.dtype,d,u,p,h,r.shape,i);return n.makeTensorInfo(f,r.dtype,m.values)}};function Y2(e,t,n){for(var r=(0,EV.buffer)(n,e.dtype),a=0;a<r.size;++a){var o=r.indexToLoc(a).slice(),i=o[0],s=o[2],u=t.locToIndex([i,s]);o[2]=t.values[u];var c=e.locToIndex(o);0<=c&&c<e.values.length&&(r.values[a]=e.values[c])}return r}var $2={kernelName:EV.GatherV2,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=t.indices,i=r.axis,s=r.batchDims;qQ([a,o],"gatherV2");for(var u=EV.util.parseAxisParam(i,a.shape)[0],c=n.data.get(o.dataId).values,l=a.shape[u],f=function(e){var t=c[e];EV.util.assert(t<=l-1&&t>=0,(function(){return"GatherV2: the index value ".concat(t," is not in [0, ").concat(l-1,"]")}))},d=0;d<c.length;++d)f(d);var p=s;null==s&&(p=0);var h=EV.util.sizeFromShape(o.shape),m=EV.backend_util.segment_util.collectGatherOpShapeInfo(a,o,u,p),v=C0({inputs:{x:a},backend:n,attrs:{shape:[m.batchSize,m.outerSize,m.dimSize,m.sliceSize]}}),g=C0({inputs:{x:o},backend:n,attrs:{shape:[m.batchSize,h/m.batchSize]}}),y=[m.batchSize,m.outerSize,h/m.batchSize,m.sliceSize],b=n.bufferSync(g),x=Y2(n.bufferSync(v),b,y);return n.disposeIntermediateTensorInfo(v),n.disposeIntermediateTensorInfo(g),n.makeTensorInfo(m.outputShape,x.dtype,x.values)}},J2=t0((function(e,t){return e>t?1:0})),Q2=w0(EV.Greater,J2,null,"bool"),e3={kernelName:EV.Greater,backendName:"cpu",kernelFunc:Q2},t3=t0((function(e,t){return e>=t?1:0})),n3=w0(EV.GreaterEqual,t3,null,"bool"),r3={kernelName:EV.GreaterEqual,backendName:"cpu",kernelFunc:n3};var a3={kernelName:EV.IFFT,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.input,a=EV.util.sizeFromShape(r.shape),o=r.shape[r.shape.length-1],i=C0({inputs:{x:r},backend:n,attrs:{shape:[a/o,o]}}),s=M2(i,!0,n),u=C0({inputs:{x:s},backend:n,attrs:{shape:r.shape}});return n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(s),u}},o3=GQ(EV.IsFinite,(function(e){return Number.isFinite(e)?1:0}),"bool"),i3={kernelName:EV.IsFinite,backendName:"cpu",kernelFunc:o3},s3=GQ(EV.IsInf,(function(e){return Math.abs(e)===1/0?1:0}),"bool"),u3={kernelName:EV.IsInf,backendName:"cpu",kernelFunc:s3},c3=GQ(EV.IsNan,(function(e){return Number.isNaN(e)?1:0}),"bool"),l3={kernelName:EV.IsNan,backendName:"cpu",kernelFunc:c3},f3=t0((function(e,t){return e<t?1:0})),d3=w0(EV.Less,f3,null,"bool"),p3={kernelName:EV.Less,backendName:"cpu",kernelFunc:d3},h3=t0((function(e,t){return e<=t?1:0})),m3=w0(EV.LessEqual,h3,null,"bool"),v3={kernelName:EV.LessEqual,backendName:"cpu",kernelFunc:m3};function g3(e,t,n){var r=(t-e)/(n-1),a=EV.util.makeZerosTypedArray(n,"float32");a[0]=e;for(var o=1;o<a.length;o++)a[o]=a[o-1]+r;return a}var y3={kernelName:EV.LinSpace,backendName:"cpu",kernelFunc:function(e){var t=e.backend,n=e.attrs,r=g3(n.start,n.stop,n.num);return t.makeTensorInfo([r.length],"float32",r)}},b3=c0((function(e){return Math.log(e)})),x3=KQ(EV.Log,b3),w3={kernelName:EV.Log,backendName:"cpu",kernelFunc:x3},k3=GQ(EV.Log1p,(function(e){return Math.log1p(e)})),S3={kernelName:EV.Log1p,backendName:"cpu",kernelFunc:k3},_3=t0((function(e,t){return e&&t})),N3=w0(EV.LogicalAnd,_3,null,"bool"),E3={kernelName:EV.LogicalAnd,backendName:"cpu",kernelFunc:N3},C3=GQ(EV.LogicalNot,(function(e){return e?0:1}),"bool"),T3={kernelName:EV.LogicalNot,backendName:"cpu",kernelFunc:C3},I3=t0((function(e,t){return e||t})),O3=w0(EV.LogicalOr,I3,null,"bool"),A3={kernelName:EV.LogicalOr,backendName:"cpu",kernelFunc:O3};var D3={kernelName:EV.LRN,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.depthRadius,i=r.bias,s=r.alpha,u=r.beta;qQ(a,"LRN");var c=a.shape[3],l=c-1,f=n.data.get(a.dataId).values,d=EV.util.sizeFromShape(a.shape),p=new Float32Array(d);function h(e){for(var t=e%c,n=e-t+Math.max(0,t-o),r=e-t+Math.min(t+o,l),a=0;n<=r;n++){var i=f[n];a+=i*i}return a}for(var m=0;m<d;m++){var v=h(m),g=f[m]*Math.pow(i+s*v,-u);p[m]=g}return n.makeTensorInfo(a.shape,a.dtype,p)}};var M3={kernelName:EV.LRNGrad,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=t.y,i=t.dy,s=r.depthRadius,u=r.bias,c=r.alpha,l=r.beta;qQ(i,"LRNGrad");for(var f=EV.util.sizeFromShape(i.shape),d=i.shape[3],p=n.data.get(i.dataId).values,h=n.data.get(a.dataId).values,m=n.data.get(o.dataId).values,v=new Float32Array(f),g=f,y=0;y<g;y++){for(var b=y%d,x=y-b+Math.max(0,b-s),w=y-b+Math.min(d,b+s+1),k=0,S=x;S<w;S++)k+=Math.pow(h[S],2);k=c*k+u;for(var _=x;_<w;_++){var N=-2*c*l*h[_]*m[y]/k;y===_&&(N+=Math.pow(k,-l)),N*=p[y],v[_]+=N}}return n.makeTensorInfo(i.shape,a.dtype,v)}};function R3(e,t,n,r){for(var a=EV.util.getTypedArrayFromDType(r,EV.util.sizeFromShape(n)),o=0;o<a.length;++o){for(var i=o*t,s=e[i],u=0;u<t;++u){var c=e[i+u];(Number.isNaN(c)||c>s)&&(s=c)}a[o]=s}return a}function P3(e){var t=e.inputs,n=e.backend,r=e.attrs,o=t.x,i=r.reductionIndices,s=r.keepDims,u=n,c=o.shape,l=c.length,f=EV.util.parseAxisParam(i,c),d=f,p=EV.backend_util.getAxesPermutation(d,l),h=u.data.get(o.dataId).values;if(null!=p){for(var m=new Array(l),v=0;v<m.length;v++)m[v]=c[p[v]];h=B0(h,c,o.dtype,p,m),d=EV.backend_util.getInnerMostAxes(d.length,l),c=m}qQ(o,"max"),EV.backend_util.assertAxesAreInnerMostDims("max",d,l);var g=EV.backend_util.computeOutAndReduceShapes(c,d),y=(0,a.Z)(g,2),b=y[0],x=y[1],w=R3(h,EV.util.sizeFromShape(x),b,o.dtype),k=u.write(w,b,o.dtype),S=b;s&&(S=EV.backend_util.expandShapeToKeepDim(b,f));return{dataId:k,shape:S,dtype:o.dtype}}var j3={kernelName:EV.Max,backendName:"cpu",kernelFunc:P3},F3=t0((function(e,t){return Math.max(e,t)})),L3=w0(EV.Maximum,F3),B3={kernelName:EV.Maximum,backendName:"cpu",kernelFunc:L3};var z3={kernelName:EV.MaxPool,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x;qQ(a,"maxPool");var o=r.filterSize,i=r.strides,s=r.pad,u=r.dimRoundingMode;EV.util.assert(EV.backend_util.eitherStridesOrDilationsAreOne(i,1),(function(){return"Error in maxPool: Either strides or dilations must be 1. "+"Got strides ".concat(i," and dilations '").concat(1,"'")}));var c,l=EV.backend_util.computePool2DInfo(a.shape,o,i,1,s,u);if(1===l.filterWidth&&1===l.filterHeight&&EV.util.arraysEqual(l.inShape,l.outShape))c=$Q({inputs:{x:a},backend:n});else{var f=n.data.get(a.dataId).values,d=EV.util.computeStrides(a.shape),p=r1(f,a.shape,a.dtype,d,l,"max");c=n.makeTensorInfo(l.outShape,a.dtype,p.values)}return c}};var Z3={kernelName:EV.MaxPool3D,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.filterSize,i=r.strides,s=r.pad,u=r.dimRoundingMode,c=r.dataFormat;qQ(a,"maxPool3d");var l=EV.backend_util.computePool3DInfo(a.shape,o,i,1,s,u,c),f=o1(n.data.get(a.dataId).values,a.shape,a.dtype,EV.util.computeStrides(a.shape),l,"max");return n.makeTensorInfo(f.shape,"float32",f.values)}};var V3={kernelName:EV.MaxPool3DGrad,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,o=t.input,i=r.filterSize,s=r.strides,u=r.pad,c=r.dimRoundingMode;qQ([a,o],"maxPool3DGrad");for(var l=EV.backend_util.computePool3DInfo(o.shape,i,s,1,u,c),f=function(e,t){for(var n=(0,EV.buffer)(t.outShape,"int32"),r=t.strideDepth,a=t.strideHeight,o=t.strideWidth,i=t.dilationDepth,s=t.dilationHeight,u=t.dilationWidth,c=t.effectiveFilterDepth,l=t.effectiveFilterHeight,f=t.effectiveFilterWidth,d=t.padInfo.front,p=t.padInfo.top,h=t.padInfo.left,m=0;m<t.batchSize;++m)for(var v=0;v<t.inChannels;++v)for(var g=0;g<t.outDepth;++g){for(var y=g*r-d,b=y;b<0;)b+=i;for(var x=Math.min(t.inDepth,c+y),w=0;w<t.outHeight;++w){for(var k=w*a-p,S=k;S<0;)S+=s;for(var _=Math.min(t.inHeight,l+k),N=0;N<t.outWidth;++N){for(var E=N*o-h,C=E;C<0;)C+=u;for(var T=Math.min(t.inWidth,f+E),I=Number.NEGATIVE_INFINITY,O=-1,A=b;A<x;A+=i)for(var D=A-y,M=S;M<_;M+=s)for(var R=M-k,P=C;P<T;P+=u){var j=P-E,F=e.get(m,A,M,P,v);F>=I&&(I=F,O=D*l*f+R*l+j)}n.set(O,m,g,w,N,v)}}}return n}(n.bufferSync(o),l),d=l.strideDepth,p=l.strideHeight,h=l.strideWidth,m=l.dilationDepth,v=l.dilationHeight,g=l.dilationWidth,y=l.effectiveFilterDepth,b=l.effectiveFilterHeight,x=l.effectiveFilterWidth,w=y-1-l.padInfo.front,k=x-1-l.padInfo.left,S=b-1-l.padInfo.top,_=(0,EV.buffer)(o.shape,"float32"),N=n.bufferSync(a),E=0;E<l.batchSize;++E)for(var C=0;C<l.inChannels;++C)for(var T=0;T<l.inDepth;++T)for(var I=0;I<l.inHeight;++I)for(var O=0;O<l.inWidth;++O){for(var A=T-w,D=I-S,M=O-k,R=0,P=0;P<y;P+=m){var j=(A+P)/d;if(!(j<0||j>=l.outDepth||Math.floor(j)!==j))for(var F=0;F<b;F+=v){var L=(D+F)/p;if(!(L<0||L>=l.outHeight||Math.floor(L)!==L))for(var B=0;B<x;B+=g){var z=(M+B)/h;if(!(z<0||z>=l.outWidth||Math.floor(z)!==z)){var Z=y*b*x-1-f.get(E,j,L,z,C)===P*b*x+F*x+B?1:0;if(0!==Z)R+=N.get(E,j,L,z,C)*Z}}}}_.set(R,E,T,I,O,C)}return n.makeTensorInfo(_.shape,_.dtype,_.values)}};var U3={kernelName:EV.MaxPoolGrad,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,o=t.input,i=o;qQ([o,t.output],"maxPoolGrad");for(var s=r.filterSize,u=r.strides,c=r.pad,l=r.dimRoundingMode,f=EV.backend_util.computePool2DInfo(i.shape,s,u,1,c,l),d=n.data.get(i.dataId).values,p=(0,EV.buffer)(f.outShape,i.dtype,a1(d,i.shape,i.dtype,f).values),h=f.strideHeight,m=f.strideWidth,v=f.dilationHeight,g=f.dilationWidth,y=f.effectiveFilterHeight,b=f.effectiveFilterWidth,x=b-1-f.padInfo.left,w=y-1-f.padInfo.top,k=(0,EV.buffer)(i.shape,"float32"),S=n.data.get(a.dataId).values,_=(0,EV.buffer)(a.shape,"float32",S),N=0;N<f.batchSize;++N)for(var E=0;E<f.inChannels;++E)for(var C=0;C<f.inHeight;++C)for(var T=0;T<f.inWidth;++T){for(var I=C-w,O=T-x,A=0,D=0;D<y;D+=v){var M=(I+D)/h;if(!(M<0||M>=f.outHeight||Math.floor(M)!==M))for(var R=0;R<b;R+=g){var P=(O+R)/m;if(!(P<0||P>=f.outWidth||Math.floor(P)!==P)){var j=y*b-1-p.get(N,M,P,E)===D*b+R?1:0;if(0!==j)A+=_.get(N,M,P,E)*j}}}k.set(A,N,C,T,E)}return n.makeTensorInfo(k.shape,k.dtype,k.values)}};var q3={kernelName:EV.MaxPoolWithArgmax,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.attrs,r=e.backend,o=t.x,i=n.filterSize,s=n.strides,u=n.pad,c=n.includeBatchInIndex,l=r;qQ(o,"MaxPoolWithArgmax");var f=l.data.get(o.dataId).values,d=EV.backend_util.computePool2DInfo(o.shape,i,s,[1,1],u),p=function(e,t,n,r,a){var o=r1(e,0,n,EV.util.computeStrides(t),a,"max"),i=a1(e,t,n,a,!0,r);return[o.values,i.values]}(f,o.shape,o.dtype,c,d),h=(0,a.Z)(p,2),m=h[0],v=h[1],g=l.write(m,d.outShape,o.dtype),y=l.write(v,d.outShape,o.dtype);return[{dataId:g,shape:d.outShape,dtype:o.dtype},{dataId:y,shape:d.outShape,dtype:"int32"}]}};var W3={kernelName:EV.Mean,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.axis,i=r.keepDims,s=EV.util.parseAxisParam(o,a.shape),u=EV.backend_util.computeOutAndReduceShapes(a.shape,s)[1],c=EV.util.sizeFromShape(u),l=[],f=n.makeTensorInfo([],"float32",new Float32Array([c]));l.push(f);var d=b0({inputs:{x:a},backend:n,attrs:{dtype:"float32"}});l.push(d);var p=C2({inputs:{a:d,b:f},backend:n});l.push(p);var h=r2({inputs:{x:p},backend:n,attrs:{axis:o,keepDims:i}});return l.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),h}};var H3={kernelName:EV.Min,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,o=t.x,i=r.axis,s=r.keepDims;qQ(o,"min");var u=EV.util.parseAxisParam(i,o.shape),c=u,l=EV.backend_util.getAxesPermutation(c,o.shape.length),f=o;null!=l&&(f=z0({inputs:{x:o},backend:n,attrs:{perm:l}}),c=EV.backend_util.getInnerMostAxes(c.length,o.shape.length)),EV.backend_util.assertAxesAreInnerMostDims("min",c,f.shape.length);for(var d=EV.backend_util.computeOutAndReduceShapes(f.shape,c),p=(0,a.Z)(d,2),h=p[0],m=p[1],v=EV.util.sizeFromShape(m),g=EV.util.makeZerosTypedArray(EV.util.sizeFromShape(h),f.dtype),y=n.data.get(f.dataId).values,b=0;b<g.length;++b){for(var x=b*v,w=y[x],k=0;k<v;++k){var S=y[x+k];(Number.isNaN(S)||S<w)&&(w=S)}g[b]=w}null!=l&&n.disposeIntermediateTensorInfo(f);var _=n.makeTensorInfo(h,f.dtype,g);if(s){var N=C0({inputs:{x:_},backend:n,attrs:{shape:EV.backend_util.expandShapeToKeepDim(h,u)}});return n.disposeIntermediateTensorInfo(_),N}return _}},G3=t0((function(e,t){return Math.min(e,t)})),K3=w0(EV.Minimum,G3),X3={kernelName:EV.Minimum,backendName:"cpu",kernelFunc:K3};var Y3={kernelName:EV.MirrorPad,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.paddings,i=r.mode;qQ(a,"mirrorPad");for(var s=o.map((function(e,t){return e[0]+a.shape[t]+e[1]})),u=o.map((function(e){return e[0]})),c=o.map((function(e,t){return e[0]+a.shape[t]})),l="reflect"===i?0:1,f=n.data.get(a.dataId).values,d=a.shape.length,p=EV.util.computeStrides(a.shape),h=EV.util.sizeFromShape(s),m=s.length,v=EV.util.computeStrides(s),g=EV.util.getTypedArrayFromDType(a.dtype,h),y=0;y<h;y++){for(var b=EV.util.indexToLoc(y,m,v),x=0;x<m;x++)b[x]<u[x]?b[x]=2*u[x]-b[x]-l:b[x]>=c[x]&&(b[x]=2*(c[x]-1)-b[x]+l);b=b.map((function(e,t){return e-u[t]}));var w=EV.util.locToIndex(b,d,p);g[y]=f[w]}return{dataId:n.write(g,s,a.dtype),shape:s,dtype:a.dtype}}},$3=t0((function(e,t){var n=e%t;return e<0&&t<0||e>=0&&t>=0?n:(n+t)%t})),J3=w0(EV.Mod,$3),Q3={kernelName:EV.Mod,backendName:"cpu",kernelFunc:J3};function e4(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.logits,o=r.dim,i=a.shape.length,s=o;if(-1===s&&(s=i-1),s!==i-1)throw Error("Softmax along a non-last dimension is not yet supported. "+"Logits was rank ".concat(i," and dim was ").concat(s));var u=EV.util.parseAxisParam([s],a.shape),c=P3({inputs:{x:a},backend:n,attrs:{reductionIndices:u,keepDims:!1}}),l=EV.backend_util.expandShapeToKeepDim(c.shape,u),f=C0({inputs:{x:c},backend:n,attrs:{shape:l}}),d=A2({inputs:{a:a,b:f},backend:n}),p=b2({inputs:{x:d},backend:n}),h=r2({inputs:{x:p},backend:n,attrs:{axis:u,keepDims:!1}}),m=C0({inputs:{x:h},backend:n,attrs:{shape:l}}),v=C2({inputs:{a:p,b:m},backend:n});return n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(m),v}var t4={kernelName:EV.Softmax,backendName:"cpu",kernelFunc:e4};var n4={kernelName:EV.Multinomial,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.logits,o=r.numSamples,i=r.seed,s=r.normalized;qQ(a,"multinomial");for(var u=s?a:e4({inputs:{logits:a},backend:n,attrs:{dim:-1}}),c=u.shape[0],l=u.shape[1],f=n.data.get(u.dataId).values,d=[c,o],p=EV.util.makeZerosTypedArray(EV.util.sizeFromShape(d),"int32"),h=0;h<c;++h){var m=h*l,v=new Float32Array(l-1);v[0]=f[m];for(var g=1;g<v.length;++g)v[g]=v[g-1]+f[m+g];for(var y=dQ.alea(i.toString()),b=h*o,x=0;x<o;++x){var w=y();p[b+x]=v.length;for(var k=0;k<v.length;k++)if(w<v[k]){p[b+x]=k;break}}}return s||n.disposeIntermediateTensorInfo(u),n.makeTensorInfo(d,"int32",p)}};function r4(e,t,n){var r=EV.util.createScalarValue(-1,n);return Q1([],t,r,e,n)}var a4={kernelName:EV.Neg,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.x;qQ(r,"neg");var o=r4(n.data.get(r.dataId).values,r.shape,r.dtype),i=(0,a.Z)(o,2),s=i[0],u=i[1];return n.makeTensorInfo(u,r.dtype,s)}},o4=EV.kernel_impls.nonMaxSuppressionV3Impl;var i4={kernelName:EV.NonMaxSuppressionV3,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.boxes,o=t.scores,i=r.maxOutputSize,s=r.iouThreshold,u=r.scoreThreshold;qQ(a,"NonMaxSuppression");var c=n.data.get(a.dataId).values,l=n.data.get(o.dataId).values,f=o4(c,l,i,s,u).selectedIndices;return n.makeTensorInfo([f.length],"int32",new Int32Array(f))}},s4=EV.kernel_impls.nonMaxSuppressionV4Impl;var u4={kernelName:EV.NonMaxSuppressionV4,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.boxes,o=t.scores,i=r.maxOutputSize,s=r.iouThreshold,u=r.scoreThreshold,c=r.padToMaxOutputSize;qQ(a,"NonMaxSuppressionPadded");var l=n.data.get(a.dataId).values,f=n.data.get(o.dataId).values,d=s4(l,f,i,s,u,c),p=d.selectedIndices,h=d.validOutputs;return[n.makeTensorInfo([p.length],"int32",new Int32Array(p)),n.makeTensorInfo([],"int32",new Int32Array([h]))]}},c4=EV.kernel_impls.nonMaxSuppressionV5Impl;var l4={kernelName:EV.NonMaxSuppressionV5,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.boxes,o=t.scores,i=r.maxOutputSize,s=r.iouThreshold,u=r.scoreThreshold,c=r.softNmsSigma;qQ(a,"NonMaxSuppressionWithScore");var l=n.data.get(a.dataId).values,f=n.data.get(o.dataId).values,d=c4(l,f,i,s,u,c),p=d.selectedIndices,h=d.selectedScores;return[n.makeTensorInfo([p.length],"int32",new Int32Array(p)),n.makeTensorInfo([h.length],"float32",new Float32Array(h))]}},f4=t0((function(e,t){return e!==t?1:0})),d4=w0(EV.NotEqual,f4,null,"bool"),p4={kernelName:EV.NotEqual,backendName:"cpu",kernelFunc:d4};var h4={kernelName:EV.OneHot,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,a=e.attrs,o=t.indices,i=a.depth,s=a.onValue,u=a.offValue;qQ(o,"oneHot");var c=EV.util.sizeFromShape(o.shape),l=new Float32Array(c*i);l.fill(u);for(var f=n.data.get(o.dataId).values,d=0;d<c;++d)f[d]>=0&&f[d]<i&&(l[d*i+f[d]]=s);return n.makeTensorInfo([].concat((0,r.Z)(o.shape),[i]),"int32",l)}};function m4(e){var t=e.inputs,n=e.backend,r=t.x;if("string"===r.dtype)throw new Error("zerosLike is not supported for string tensors");if("complex64"===r.dtype){var a=g0({inputs:{input:r},backend:n}),o=m4({inputs:{x:a},backend:n}),i=E1({inputs:{input:r},backend:n}),s=m4({inputs:{x:i},backend:n}),u=h0({inputs:{real:o,imag:s},backend:n});return n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(s),u}return F2({backend:n,attrs:{shape:r.shape,value:0,dtype:r.dtype}})}var v4={kernelName:EV.ZerosLike,backendName:"cpu",kernelFunc:m4};var g4={kernelName:EV.OnesLike,backendName:"cpu",kernelFunc:function e(t){var n=t.inputs,r=t.backend,a=n.x;if("string"===a.dtype)throw new Error("onesLike is not supported for string tensors");if("complex64"===a.dtype){var o=g0({inputs:{input:a},backend:r}),i=e({inputs:{x:o},backend:r}),s=E1({inputs:{input:a},backend:r}),u=m4({inputs:{x:s},backend:r}),c=h0({inputs:{real:i,imag:u},backend:r});return r.disposeIntermediateTensorInfo(o),r.disposeIntermediateTensorInfo(i),r.disposeIntermediateTensorInfo(s),r.disposeIntermediateTensorInfo(u),c}return F2({backend:r,attrs:{shape:a.shape,value:1,dtype:a.dtype}})}};function y4(e){var t=e.inputs,n=e.backend,r=e.attrs.axis;if(1===t.length)return w2({inputs:{input:t[0]},backend:n,attrs:{dim:r}});var a=t[0].shape,o=t[0].dtype;t.forEach((function(e){EV.util.assertShapesMatch(a,e.shape,"All tensors passed to stack must have matching shapes"),EV.util.assert(o===e.dtype,(function(){return"All tensors passed to stack must have matching dtypes"}))}));var i=[],s=T1({inputs:t.map((function(e){var t=w2({inputs:{input:e},backend:n,attrs:{dim:r}});return i.push(t),t})),backend:n,attrs:{axis:r}});return i.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),s}var b4={kernelName:EV.Pack,backendName:"cpu",kernelFunc:y4};var x4={kernelName:EV.PadV2,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.paddings,i=r.constantValue;qQ(a,"pad");var s=o.map((function(e,t){return e[0]+a.shape[t]+e[1]})),u=o.map((function(e){return e[0]})),c=n.data.get(a.dataId).values,l=EV.util.sizeFromShape(a.shape),f=a.shape.length,d=EV.util.computeStrides(a.shape),p=EV.util.sizeFromShape(s),h=s.length,m=EV.util.computeStrides(s),v=EV.util.getTypedArrayFromDType(a.dtype,p);0!==i&&v.fill(i);for(var g=0;g<l;g++){var y=EV.util.indexToLoc(g,f,d).map((function(e,t){return e+u[t]}));v[EV.util.locToIndex(y,h,m)]=c[g]}return{dataId:n.write(v,s,a.dtype),shape:s,dtype:a.dtype}}},w4=t0((function(e,t){return Math.pow(e,t)})),k4=w0(EV.Pow,w4),S4={kernelName:EV.Pow,backendName:"cpu",kernelFunc:k4};function _4(e,t,n,r){for(var o=EV.backend_util.computeOutAndReduceShapes(e,r),i=(0,a.Z)(o,2),s=i[0],u=i[1],c=(0,EV.upcastType)(t,"int32"),l=EV.util.makeZerosTypedArray(EV.util.sizeFromShape(s),c),f=EV.util.sizeFromShape(u),d=0;d<l.length;++d){for(var p=d*f,h=1,m=0;m<f;++m)h*=n[p+m];l[d]=h}return{outVals:l,outShape:s,outDtype:c}}var N4={kernelName:EV.Prod,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.axis,i=r.keepDims;qQ(a,"prod");var s=a.shape.length,u=EV.util.parseAxisParam(o,a.shape),c=EV.backend_util.getAxesPermutation(u,s),l=u,f=a,d=[];null!=c&&(f=z0({inputs:{x:a},backend:n,attrs:{perm:c}}),d.push(f),l=EV.backend_util.getInnerMostAxes(l.length,s));var p=n.data.get(f.dataId).values,h=_4(f.shape,f.dtype,p,l),m=h.outVals,v=h.outShape,g=h.outDtype,y=v;return i&&(y=EV.backend_util.expandShapeToKeepDim(v,u)),d.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),n.makeTensorInfo(y,g,m)}};function E4(e,t,n,r){if(e===t||e<t&&n<0||t<e&&n>1)return EV.util.makeZerosTypedArray(0,r);var a=Math.abs(Math.ceil((t-e)/n)),o=EV.util.makeZerosTypedArray(a,r);t<e&&1===n&&(n=-1),o[0]=e;for(var i=1;i<o.length;i++)o[i]=o[i-1]+n;return o}var C4={kernelName:EV.Range,backendName:"cpu",kernelFunc:function(e){var t=e.backend,n=e.attrs,r=n.start,a=n.stop,o=n.dtype,i=E4(r,a,n.step,o);return t.makeTensorInfo([i.length],o,i)}},T4=GQ(EV.Reciprocal,(function(e){return 1/e})),I4={kernelName:EV.Reciprocal,backendName:"cpu",kernelFunc:T4};var O4={kernelName:EV.ResizeBilinear,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,o=t.images,i=r.alignCorners,s=r.halfPixelCenters,u=r.size;qQ(o,"resizeBilinear");for(var c=EV.util.computeStrides(o.shape),l=(0,a.Z)(u,2),f=l[0],d=l[1],p=(0,a.Z)(o.shape,4),h=p[0],m=p[1],v=p[2],g=p[3],y=n.data.get(o.dataId).values,b=new Float32Array(EV.util.sizeFromShape([h,f,d,g])),x=[i&&f>1?m-1:m,i&&d>1?v-1:v],w=[i&&f>1?f-1:f,i&&d>1?d-1:d],k=0,S=x[0]/w[0],_=x[1]/w[1],N=0;N<h;N++)for(var E=0;E<f;E++){var C=void 0;C=s?S*(E+.5)-.5:S*E;for(var T=Math.max(0,Math.floor(C)),I=C-T,O=Math.min(m-1,Math.ceil(C)),A=N*c[0]+T*c[1],D=N*c[0]+O*c[1],M=0;M<d;M++){var R=void 0;R=s?_*(M+.5)-.5:_*M;for(var P=Math.max(0,Math.floor(R)),j=R-P,F=Math.min(v-1,Math.ceil(R)),L=A+P*c[2],B=D+P*c[2],z=A+F*c[2],Z=D+F*c[2],V=0;V<g;V++){var U=y[L+V],q=y[B+V],W=U+(y[z+V]-U)*j,H=W+(q+(y[Z+V]-q)*j-W)*I;b[k++]=H}}}return n.makeTensorInfo([h,f,d,g],"float32",b)}};var A4={kernelName:EV.ResizeBilinearGrad,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,o=t.images,i=t.dy,s=r.alignCorners;qQ([i,o],"resizeBilinearGrad");for(var u=EV.util.computeStrides(o.shape),c=(0,a.Z)(o.shape,4),l=c[0],f=c[1],d=c[2],p=c[3],h=(0,a.Z)(i.shape,3),m=h[1],v=h[2],g=new Float32Array(l*f*d*p),y=[s&&m>1?f-1:f,s&&v>1?d-1:d],b=[s&&m>1?m-1:m,s&&v>1?v-1:v],x=y[0]/b[0],w=y[1]/b[1],k=n.data.get(i.dataId).values,S=0,_=0;_<l;_++)for(var N=_*u[0],E=0;E<m;E++)for(var C=E*x,T=Math.floor(C),I=Math.min(Math.ceil(C),f-1),O=N+T*u[1],A=N+I*u[1],D=C-T,M=1-D,R=0;R<v;R++)for(var P=R*w,j=Math.floor(P),F=Math.min(Math.ceil(P),d-1),L=P-j,B=1-L,z=O+j*u[2],Z=O+F*u[2],V=A+j*u[2],U=A+F*u[2],q=M*B,W=M*L,H=D*B,G=D*L,K=0;K<p;K++){var X=k[S++];g[z+K]+=X*q,g[Z+K]+=X*W,g[V+K]+=X*H,g[U+K]+=X*G}return n.makeTensorInfo([l,d,f,p],"float32",g)}};var D4={kernelName:EV.ResizeNearestNeighbor,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,o=t.images,i=r.alignCorners,s=r.halfPixelCenters,u=r.size;qQ(o,"resizeNearestNeighbor");for(var c=EV.util.computeStrides(o.shape),l=(0,a.Z)(u,2),f=l[0],d=l[1],p=(0,a.Z)(o.shape,4),h=p[0],m=p[1],v=p[2],g=p[3],y=n.data.get(o.dataId).values,b=new Float32Array(h*f*d*g),x=[i&&f>1?m-1:m,i&&d>1?v-1:v],w=[i&&f>1?f-1:f,i&&d>1?d-1:d],k=x[0]/w[0],S=x[1]/w[1],_=0,N=0;N<h;N++)for(var E=N*c[0],C=0;C<f;C++){var T=s?k*(C+.5):k*C,I=Math.min(m-1,i?Math.round(T):Math.floor(T));s&&(I=Math.max(0,I));for(var O=E+I*c[1],A=0;A<d;A++){var D=s?S*(A+.5):S*A,M=Math.min(v-1,i?Math.round(D):Math.floor(D));s&&(M=Math.max(0,M));for(var R=O+M*c[2],P=0;P<g;P++){var j=y[R+P];b[_++]=j}}}return n.makeTensorInfo([h,f,d,g],o.dtype,b)}};var M4={kernelName:EV.ResizeNearestNeighborGrad,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,o=t.images,i=t.dy,s=r.alignCorners;qQ([i,o],"resizeNearestNeighborGrad");for(var u=EV.util.computeStrides(o.shape),c=EV.util.computeStrides(i.shape),l=(0,a.Z)(o.shape,4),f=l[0],d=l[1],p=l[2],h=l[3],m=(0,a.Z)(i.shape,3),v=m[1],g=m[2],y=new Float32Array(f*d*p*h),b=n.data.get(i.dataId).values,x=[s&&v>1?d-1:d,s&&g>1?p-1:p],w=[s&&v>1?v-1:v,s&&g>1?g-1:g],k=x[0]/w[0],S=x[1]/w[1],_=1/k,N=1/S,E=2*Math.ceil(_)+2,C=2*Math.ceil(N)+2,T=0;T<f;T++)for(var I=T*u[0],O=0;O<d;O++)for(var A=I+O*u[1],D=Math.floor(O*_),M=Math.floor(D-E/2),R=0;R<p;R++)for(var P=A+R*u[2],j=Math.floor(R*N),F=Math.floor(j-C/2),L=0;L<h;L++){for(var B=0,z=0;z<E;z++){var Z=z+M;if(!(Z<0||Z>=v)){var V=I+Z*c[1],U=Z*k;if(O===Math.min(d-1,s?Math.round(U):Math.floor(U)))for(var q=0;q<C;q++){var W=q+F;if(!(W<0||W>=g)){var H=V+W*c[2],G=W*S;R===Math.min(p-1,s?Math.round(G):Math.floor(G))&&(B+=b[H+L])}}}}y[P+L]=B}return n.makeTensorInfo(o.shape,o.dtype,y)}};var R4={kernelName:EV.Reverse,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,a=e.attrs,o=t.x,i=a.dims;qQ(o,"reverse");var s=o.shape.length,u=EV.util.parseAxisParam(i,o.shape);if(0===s)return $Q({inputs:{x:o},backend:n});for(var c=new EV.TensorBuffer(o.shape,o.dtype),l=n.bufferSync(o),f=function(e){var t=c.indexToLoc(e),n=t.slice();u.forEach((function(e){return n[e]=o.shape[e]-1-n[e]})),c.set.apply(c,[l.get.apply(l,(0,r.Z)(n))].concat((0,r.Z)(t)))},d=0;d<c.size;d++)f(d);return n.makeTensorInfo(c.shape,c.dtype,c.values)}},P4={kernelName:EV.RotateWithOffset,backendName:"cpu",kernelFunc:function(e){for(var t=e.inputs,n=e.attrs,r=e.backend,o=t.image,i=n.radians,s=n.fillValue,u=n.center,c=r,l=EV.util.getTypedArrayFromDType(o.dtype,EV.util.sizeFromShape(o.shape)),f=(0,a.Z)(o.shape,4),d=f[0],p=f[1],h=f[2],m=f[3],v=EV.backend_util.getImageCenter(u,p,h),g=(0,a.Z)(v,2),y=g[0],b=g[1],x=Math.sin(i),w=Math.cos(i),k=c.data.get(o.dataId).values,S=0;S<d;S++)for(var _=S*h*p*m,N=0;N<p;N++)for(var E=N*(h*m),C=0;C<h;C++)for(var T=C*m,I=0;I<m;I++){var O=[d,N,C,I],A=O[2],D=O[1],M=(A-y)*w-(D-b)*x,R=(A-y)*x+(D-b)*w;M=Math.round(M+y),R=Math.round(R+b);var P=s;if("number"!==typeof s&&(P=3===I?255:s[I]),M>=0&&M<h&&R>=0&&R<p)P=k[_+R*(h*m)+M*m+I];l[_+E+T+I]=P}return{dataId:c.write(l,o.shape,o.dtype),shape:o.shape,dtype:o.dtype}}},j4=GQ(EV.Round,(function(e){var t=Math.floor(e);return e-t<.5?Math.floor(e):e-t>.5?Math.ceil(e):t%2===0?t:t+1})),F4={kernelName:EV.Round,backendName:"cpu",kernelFunc:j4},L4=c0((function(e){return 1/Math.sqrt(e)})),B4=KQ(EV.Rsqrt,L4),z4={kernelName:EV.Rsqrt,backendName:"cpu",kernelFunc:B4};function Z4(e,t,n,r,a,o,i,s,u,c){var l=[r/a,a],f=e.values,d=t.values;if(0===r)return(0,EV.buffer)(n,t.dtype);var p=(0,EV.buffer)(l,t.dtype);p.values.fill(u);for(var h=0;h<o;h++){for(var m=[],v=0,g=0;g<i;g++){var y=f[h*i+g];m.push(y),v+=y*s[g]}if(v<0||v>=r/a)throw new Error("Invalid indices: ".concat(m," does not index into ").concat(n));for(var b=0;b<a;b++)c?p.values[v*a+b]+=d[h*a+b]:p.values[v*a+b]=0===t.rank?d[0]:d[h*a+b]}return p}var V4={kernelName:EV.ScatterNd,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.indices,o=t.updates,i=r.shape,s=EV.backend_util.calculateShapes(o,a,i),u=s.sliceRank,c=s.numUpdates,l=s.sliceSize,f=s.strides,d=s.outputSize,p=Z4(n.bufferSync(a),n.bufferSync(o),i,d,l,c,u,f,0,!0);return n.makeTensorInfo(i,p.dtype,p.values)}};var U4={kernelName:EV.Select,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.condition,a=t.t,o=t.e;qQ([r,a,o],"select");for(var i=r.shape.length,s=n.data.get(r.dataId).values,u=n.data.get(a.dataId).values,c=n.data.get(o.dataId).values,l=(0,EV.upcastType)(a.dtype,o.dtype),f=EV.util.makeZerosTypedArray(EV.util.sizeFromShape(a.shape),l),d=0,p=0===i||i>1||1===a.shape.length?1:EV.util.sizeFromShape(a.shape.slice(1)),h=0;h<s.length;h++)for(var m=0;m<p;m++)1===s[h]?f[d++]=u[h]:f[d++]=c[h];return n.makeTensorInfo(a.shape,l,f)}},q4=EV.backend_util.SELU_SCALEALPHA,W4=EV.backend_util.SELU_SCALE,H4=GQ(EV.Selu,(function(e){return e>=0?W4*e:q4*(Math.exp(e)-1)})),G4={kernelName:EV.Selu,backendName:"cpu",kernelFunc:H4},K4=GQ(EV.Sign,(function(e){return e<0?-1:e>0?1:0})),X4={kernelName:EV.Sign,backendName:"cpu",kernelFunc:K4},Y4=GQ(EV.Sin,(function(e){return Math.sin(e)})),$4={kernelName:EV.Sin,backendName:"cpu",kernelFunc:Y4},J4=GQ(EV.Sinh,(function(e){return Math.sinh(e)})),Q4={kernelName:EV.Sinh,backendName:"cpu",kernelFunc:J4},e5=Math.log(1.1920928955078125e-7)+2,t5=GQ(EV.Softplus,(function(e){var t=e>-e5,n=e<e5,r=Math.exp(e);return n?r:t?e:Math.log(1+r)})),n5={kernelName:EV.Softplus,backendName:"cpu",kernelFunc:t5};var r5={kernelName:EV.SpaceToBatchND,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,a=e.attrs,o=t.x,i=a.blockShape,s=a.paddings;qQ([o],"spaceToBatchND");var u=EV.util.sizeFromShape(i),c=[[0,0]];c.push.apply(c,(0,r.Z)(s));for(var l=1+i.length;l<o.shape.length;++l)c.push([0,0]);var f=x4.kernelFunc({inputs:{x:o},backend:n,attrs:{paddings:c,constantValue:0}}),d=EV.backend_util.getReshaped(f.shape,i,u,!1),p=EV.backend_util.getPermuted(d.length,i.length,!1),h=EV.backend_util.getReshapedPermuted(f.shape,i,u,!1),m=C0({inputs:{x:f},backend:n,attrs:{shape:d}}),v=z0({inputs:{x:m},backend:n,attrs:{perm:p}}),g=C0({inputs:{x:v},backend:n,attrs:{shape:h}});return n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(v),g}};function a5(e,t,n,r,a,o,i){var s=t[0],u=o[0],c=new Array(u),l=new Array(s),f=t[1];if(0===u){if(0!==s)throw new Error(EV.backend_util.getSparseFillEmptyRowsIndicesDenseShapeMismatch(s));return[EV.util.getArrayFromDType(n,0),[0,f],EV.util.getArrayFromDType(a,0),c,l]}for(var d=!0,p=0,h=new Array(u).fill(0),m=0;m<s;++m){var v=e[m*f];if(v<0)throw new Error(EV.backend_util.getSparseFillEmptyRowsNegativeIndexErrorMessage(m,v));if(v>=u)throw new Error(EV.backend_util.getSparseFillEmptyRowsOutOfRangeIndexErrorMessage(m,v,u));++h[v],d=d&&v>=p,p=v}for(var g=!0,y=0;y<u;++y){var b=0===h[y];c[y]=b,g=g&&!b,h[y]=Math.max(h[y],1),y>0&&(h[y]+=h[y-1])}if(g&&d){for(var x=e,w=r,k=0;k<s;++k)l[k]=k;return[x,[s,f],w,c,l]}for(var S=h[u-1],_=EV.util.getArrayFromDType(n,S*f),N=EV.util.getArrayFromDType(a,S),E=new Array(u).fill(0),C=0;C<s;++C){var T=e[C*f],I=E[T],O=(0===T?0:h[T-1])+I;E[T]++;for(var A=0;A<f;++A)_[O*f+A]=e[C*f+A];N[O]=r[C],l[C]=O}for(var D=0;D<u;++D){if(0===E[D]){var M=0===D?0:h[D-1];_[M*f+0]=D;for(var R=1;R<f;++R)_[M*f+R]=0;N[M]=i}}return[_,[S,f],N,c,l]}var o5={kernelName:EV.SparseFillEmptyRows,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.indices,o=t.values,i=t.denseShape,s=t.defaultValue;if(1!==i.shape.length)throw new Error("Dense shape must be a vector, saw:\n        ".concat(i.shape));if(2!==r.shape.length)throw new Error("Indices must be a matrix, saw:\n        ".concat(r.shape));if(1!==o.shape.length)throw new Error("Values must be a vector, saw:\n        ".concat(o.shape));if(0!==s.shape.length)throw new Error("Default value must be a scalar, saw:\n        ".concat(s.shape));var u=n.data.get(r.dataId).values,c=n.data.get(o.dataId).values,l=n.data.get(i.dataId).values,f=n.data.get(s.dataId).values[0],d=a5(u,r.shape,r.dtype,c,o.dtype,l,f),p=(0,a.Z)(d,5),h=p[0],m=p[1],v=p[2],g=p[3],y=p[4];return[n.makeTensorInfo(m,r.dtype,h),n.makeTensorInfo([m[0]],o.dtype,v),n.makeTensorInfo([g.length],"bool",new Uint8Array(g.map((function(e){return Number(e)})))),n.makeTensorInfo([y.length],r.dtype,new Int32Array(y))]}};function i5(e,t,n,r,a){for(var o=EV.util.sizeFromShape(r),i=t[0],s=a.length,u=[],c=1,l=-1,f=0;f<s;++f){var d=a[f];if(-1===d){if(-1!==l)throw new Error(EV.backend_util.getSparseReshapeMultipleNegativeOneOutputDimErrorMessage(l,f));l=f,u.push(1)}else{if(d<0)throw new Error(EV.backend_util.getSparseReshapeNegativeOutputDimErrorMessage(f,d));c*=d,u.push(d)}}if(-1!==l){if(c<=0)throw new Error(EV.backend_util.getSparseReshapeEmptyTensorZeroOutputDimErrorMessage());var p=Math.trunc(o/c);if(c*p!==o)throw new Error(EV.backend_util.getSparseReshapeInputOutputMultipleErrorMessage(r,u));u[l]=p}if(EV.util.sizeFromShape(u)!==o)throw new Error(EV.backend_util.getSparseReshapeInputOutputMismatchErrorMessage(r,u));var h=r.length,m=[];if(h>0){m[h-1]=1;for(var v=h-2;v>=0;--v)m[v]=m[v+1]*r[v+1]}var g=[];if(s>0){g[s-1]=1;for(var y=s-2;y>=0;--y)g[y]=g[y+1]*u[y+1]}for(var b=EV.util.getArrayFromDType(n,i*s),x=0;x<i;++x){for(var w=0,k=0;k<h;++k)w+=e[x*h+k]*m[k];for(var S=0;S<s;++S)b[x*s+S]=Math.trunc(w/g[S]),w%=g[S]}return[b,[i,s],u]}var s5={kernelName:EV.SparseReshape,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.inputIndices,o=t.inputShape,i=t.newShape;if(2!==r.shape.length)throw new Error("Input indices should be a matrix but received shape\n        ".concat(r.shape));if(1!==o.shape.length)throw new Error("Input shape should be a vector but received shape\n        ".concat(o.shape));if(1!==i.shape.length)throw new Error("Target shape should be a vector but received shape ".concat(i.shape));var s=Array.from(n.data.get(o.dataId).values),u=n.data.get(r.dataId).values,c=Array.from(n.data.get(i.dataId).values),l=i5(u,r.shape,r.dtype,s,c),f=(0,a.Z)(l,3),d=f[0],p=f[1],h=f[2];return[n.makeTensorInfo(p,r.dtype,d),n.makeTensorInfo([h.length],i.dtype,new Int32Array(h))]}};function u5(e,t,n,r,a){var o=arguments.length>5&&void 0!==arguments[5]&&arguments[5],i=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,s=r.length,u=[t[0],e.length/t[0]],c=u[1],l=s>0?a[s-1]+1:0,f=l;if(f<0)throw new Error(EV.backend_util.getSparseSegmentReductionNegativeSegmentIdsErrorMessage());var d=t.slice();d[0]=f;var p=d.reduce((function(e,t){return e*t}),1),h=EV.util.getArrayFromDType(n,p);if(0===s)return f>0&&h.fill(i),[h,d];if(f<=0)throw new Error(EV.backend_util.getSparseSegmentReductionNegativeSegmentIdsErrorMessage());for(var m=0,v=1,g=0,y=a[m];;){var b=0;if(v<s){if(y===(b=a[v])){++v;continue}if(y>=b)throw new Error(EV.backend_util.getSparseSegmentReductionNonIncreasingSegmentIdsErrorMessage())}if(y<0||y>=f)throw new Error(EV.backend_util.getSparseSegmentReductionSegmentIdOutOfRangeErrorMessage(y,f));y>g&&h.fill(i,g*c,y*c);for(var x=m;x<v;++x){var w=r[x];if(w<0||w>=u[0])throw new Error(EV.backend_util.getSparseSegmentReductionIndicesOutOfRangeErrorMessage(x,r[x],u[0]));for(var k=0;k<c;k++)h[y*c+k]+=e[w*c+k]}if(o)for(var S=0;S<c;S++)h[y*c+S]/=v-m;if(m=v,g=y+1,y=b,++v>s)break}return g<f&&h.fill(i,g*c,f*c),[h,d]}var c5={kernelName:EV.SparseSegmentMean,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.data,o=t.indices,i=t.segmentIds;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==o.shape.length)throw new Error("Indices should be a vector but received shape\n          ".concat(o.shape));if(1!==i.shape.length)throw new Error("Segment ids should be a vector but received shape\n          ".concat(i.shape));if(o.shape[0]!==i.shape[0])throw new Error("segmentIds and indices should have same size.");var s=n.data.get(r.dataId).values,u=n.data.get(o.dataId).values,c=n.data.get(i.dataId).values,l=u5(s,r.shape,r.dtype,u,c,!0),f=(0,a.Z)(l,2),d=f[0],p=f[1];return n.makeTensorInfo(p,r.dtype,d)}};var l5={kernelName:EV.SparseSegmentSum,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.data,o=t.indices,i=t.segmentIds;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==o.shape.length)throw new Error("Indices should be a vector but received shape\n         ".concat(o.shape));if(1!==i.shape.length)throw new Error("Segment ids should be a vector but received shape\n         ".concat(i.shape));if(o.shape[0]!==i.shape[0])throw new Error("segmentIds and indices should have same size.");var s=n.data.get(r.dataId).values,u=n.data.get(o.dataId).values,c=n.data.get(i.dataId).values,l=u5(s,r.shape,r.dtype,u,c),f=(0,a.Z)(l,2),d=f[0],p=f[1];return n.makeTensorInfo(p,r.dtype,d)}};var f5={kernelName:EV.SparseToDense,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.sparseIndices,o=t.sparseValues,i=t.defaultValue,s=r.outputShape,u=EV.backend_util.calculateShapes(o,a,s),c=u.sliceRank,l=u.numUpdates,f=u.sliceSize,d=u.strides,p=u.outputSize,h=Z4(n.bufferSync(a),n.bufferSync(o),s,p,f,l,c,d,n.data.get(i.dataId).values[0],!1);return n.makeTensorInfo(s,h.dtype,h.values)}};var d5={kernelName:EV.SplitV,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,a=e.attrs,o=t.x,i=a.numOrSizeSplits,s=a.axis,u=EV.util.parseAxisParam(s,o.shape)[0],c=EV.backend_util.prepareSplitSize(o,i,u),l=new Array(o.shape.length).fill(0),f=o.shape.slice();return c.map((function(e){var t=(0,r.Z)(f);t[u]=e;var a=d1({inputs:{x:o},backend:n,attrs:{begin:l,size:t}});return l[u]+=e,a}))}},p5=c0((function(e){return Math.sqrt(e)})),h5=GQ(EV.Sqrt,(function(e){return Math.sqrt(e)})),m5={kernelName:EV.Sqrt,backendName:"cpu",kernelFunc:h5},v5={kernelName:EV.Square,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.x,a=n;qQ(r,"square");for(var o=a.data.get(r.dataId).values,i=new Float32Array(o.length),s=0;s<o.length;++s){var u=o[s];i[s]=u*u}return{dataId:a.write(i,r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}},g5=t0((function(e,t){var n=e-t;return n*n})),y5=w0(EV.SquaredDifference,g5),b5={kernelName:EV.SquaredDifference,backendName:"cpu",kernelFunc:y5},x5=GQ(EV.Step,(function(e,t){var n=t;return isNaN(e)?NaN:e>0?1:n.alpha})),w5={kernelName:EV.Step,backendName:"cpu",kernelFunc:x5};function k5(e,t,n,a){for(var o=(0,EV.buffer)(e,t.dtype),i=0;i<o.size;i++){for(var s=o.indexToLoc(i),u=new Array(s.length),c=0;c<u.length;c++)u[c]=s[c]*n[c]+a[c];o.set.apply(o,[t.get.apply(t,u)].concat((0,r.Z)(s)))}return o}var S5={kernelName:EV.StridedSlice,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.begin,i=r.end,s=r.strides,u=r.beginMask,c=r.endMask,l=r.ellipsisMask,f=r.newAxisMask,d=r.shrinkAxisMask;qQ(a,"stridedSlice");var p,h=EV.slice_util.sliceInfo(a.shape,o,i,s,u,c,l,f,d),m=h.finalShapeSparse,v=h.finalShape,g=h.isIdentity,y=h.sliceDim0,b=h.isSimpleSlice,x=h.begin,w=h.end,k=h.strides;if(g)p=C0({inputs:{x:a},backend:n,attrs:{shape:v}});else if(y||b){EV.util.assert(a.shape.length>=1,(function(){return"Input must have rank at least 1, got: ".concat(a.shape.length)}));var S=EV.slice_util.computeOutShape(x,w,k),_=d1({inputs:{x:a},backend:n,attrs:{begin:x,size:S}});p=C0({inputs:{x:_},backend:n,attrs:{shape:v}}),n.disposeIntermediateTensorInfo(_)}else{var N=k5(m,n.bufferSync(a),k,x);p=n.makeTensorInfo(v,N.dtype,N.values)}return p}},_5=function(){function e(t,n,r,a,o,i){(0,f.Z)(this,e),this.separator=EV.util.encodeString(t),this.nGramWidths=n,this.leftPad=EV.util.encodeString(r),this.rightPad=EV.util.encodeString(a),this.padWidth=o,this.preserveShort=i}return(0,d.Z)(e,[{key:"getPadWidth",value:function(e){return Math.min(this.padWidth<0?e-1:this.padWidth,e-1)}},{key:"getNumNGrams",value:function(e,t){var n=this.getPadWidth(t);return Math.max(0,e+2*n-t+1)}},{key:"createNGrams",value:function(e,t,n,r,a,o){for(var i=this,s=function(s){var u=i.getPadWidth(o),c=Math.max(0,u-s),l=Math.max(0,u-(a-(s+1))),f=o-(c+l),d=t+(c>0?0:s-u),p=0;p+=c*i.leftPad.length;for(var h=0;h<f;++h)p+=e[d+h].length;p+=l*i.rightPad.length,p+=(c+l+f-1)*i.separator.length,n[r+s]=new Uint8Array(p);for(var m=n[r+s],v=0,g=function(e){return e.forEach((function(e){return m[v++]=e}))},y=0;y<c;++y)g(i.leftPad),g(i.separator);for(var b=0;b<f-1;++b)g(e[d+b]),g(i.separator);if(f>0){g(e[d+f-1]);for(var x=0;x<l;++x)g(i.separator),g(i.rightPad)}else{for(var w=0;w<l-1;++w)g(i.rightPad),g(i.separator);g(i.rightPad)}},u=0;u<a;++u)s(u)}},{key:"compute",value:function(e,t){var n=this,r=e.length,a=t.length;if(a>0){var o=t[0];if(0!==o)throw new Error("First split value must be 0, got ".concat(o));for(var i=1;i<a;++i){var s=t[i]>=o;if(!(s=s&&t[i]<=r))throw new Error("Invalid split value ".concat(t[i],", must be in [").concat(o,", ").concat(r,"]"));o=t[i]}if(o!==r)throw new Error("Last split value must be data size. Expected ".concat(r,", got ").concat(o))}var u=a-1,c=EV.util.getArrayFromDType("int32",a);if(0===r||0===a){for(var l=new Array(r),f=0;f<=u;++f)c[f]=0;return[l,c]}c[0]=0;for(var d=function(e){var r=t[e]-t[e-1],a=0;n.nGramWidths.forEach((function(e){a+=n.getNumNGrams(r,e)})),n.preserveShort&&r>0&&0===a&&(a=1),c[e]=c[e-1]+a},p=1;p<=u;++p)d(p);for(var h=new Array(c[u]),m=function(r){var a=t[r],o=c[r];if(n.nGramWidths.forEach((function(i){var s=t[r+1]-t[r],u=n.getNumNGrams(s,i);n.createNGrams(e,a,h,o,u,i),o+=u})),n.preserveShort&&o===c[r]){var i=t[r+1]-t[r];if(0===i)return"continue";var s=i+2*n.padWidth;n.createNGrams(e,a,h,o,1,s)}},v=0;v<u;++v)m(v);return[h,c]}}]),e}();function N5(e,t,n,r,a,o,i,s){return new _5(n,r,a,o,i,s).compute(e,t)}var E5={kernelName:EV.StringNGrams,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,o=r.separator,i=r.nGramWidths,s=r.leftPad,u=r.rightPad,c=r.padWidth,l=r.preserveShortSequences,f=t.data,d=t.dataSplits,p=N5(n.data.get(f.dataId).values,n.data.get(d.dataId).values,o,i,s,u,c,l),h=(0,a.Z)(p,2),m=h[0],v=h[1];return[n.makeTensorInfo([m.length],"string",m),n.makeTensorInfo(d.shape,"int32",v)]}};function C5(e,t,n,r){if(e.length)if(0!==t.length)if(1!==t.length){for(var a=0,o=0;o<e.length+1;o++)if(o===e.length||-1!==t.indexOf(e[o])){var i=e.subarray(a,o);n&&0===i.length||r.push(i),a=o+1}}else{for(var s=t[0],u=e.indexOf(s);-1!==u;){var c=e.subarray(0,u);n&&0===c.length||r.push(c),u=(e=e.subarray(u+1)).indexOf(s)}n&&0===e.length||r.push(e)}else for(var l=0;l<e.length;++l)r.push(e.subarray(l,l+1))}function T5(e,t,n){for(var r=e.length,a=[],o=0,i=0,s=new Array(r),u=0;u<r;++u){var c=a.length;C5(e[u],t,n,a);var l=a.length-c;s[u]=l,o+=l,i=Math.max(i,l)}for(var f=EV.util.getArrayFromDType("int32",2*o),d=new Array(o),p=[r,i],h=0,m=0;m<r;++m)for(var v=0;v<s[m];++v)f[2*h]=m,f[2*h+1]=v,d[h]=a[h],++h;return[f,d,p]}var I5={kernelName:EV.StringSplit,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs.skipEmpty,o=t.input,i=t.delimiter;if("string"!==o.dtype)throw new Error("Input must be of datatype string");if(1!==o.shape.length)throw new Error("Input must be a vector, got shape: ".concat(o.shape));if(0!==i.shape.length)throw new Error("Delimiter must be a scalar, got shape: ".concat(i.shape));var s=T5(n.data.get(o.dataId).values,n.data.get(i.dataId).values[0],r),u=(0,a.Z)(s,3),c=u[0],l=u[1],f=u[2],d=l.length;return[n.makeTensorInfo([d,2],"int32",c),n.makeTensorInfo([d],"string",l),n.makeTensorInfo([2],"int32",new Int32Array(f))]}};function O5(e,t){for(var n=EV.util.getArrayFromDType("int32",e.length),r=0;r<e.length;++r)n[r]=EV.util.fingerPrint64(e[r]).modulo(t).getLowBitsUnsigned();return n}var A5={kernelName:EV.StringToHashBucketFast,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs.numBuckets,a=t.input;if("string"!==a.dtype)throw new Error("Input must be of datatype string");if(r<=0)throw new Error("Number of buckets must be at least 1");var o=O5(n.data.get(a.dataId).values,r);return n.makeTensorInfo(a.shape,"int32",o)}},D5=GQ(EV.Tan,(function(e){return Math.tan(e)})),M5={kernelName:EV.Tan,backendName:"cpu",kernelFunc:D5},R5=GQ(EV.Tanh,(function(e){return Math.tanh(e)})),P5={kernelName:EV.Tanh,backendName:"cpu",kernelFunc:R5};function j5(e,t){for(var n=new Array(e.rank),r=0;r<n.length;r++)n[r]=e.shape[r]*t[r];for(var a=(0,EV.buffer)(n,e.dtype),o=0;o<a.values.length;++o){for(var i=a.indexToLoc(o),s=new Array(e.rank),u=0;u<s.length;u++)s[u]=i[u]%e.shape[u];var c=e.locToIndex(s);a.values[o]=e.values[c]}return a}var F5={kernelName:EV.Tile,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.reps;qQ(a,"tile");var i=j5(n.bufferSync(a),o);return n.makeTensorInfo(i.shape,i.dtype,i.values)}},L5=function(e,t){var n=t.value-e.value;return 0===n?e.index-t.index:n};function B5(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.length-1;r>n;){if(r-n>600){var a=r-n+1,o=t-n+1,i=Math.log(a),s=.5*Math.exp(2*i/3),u=.5*Math.sqrt(i*s*(a-s)/a)*Math.sign(o-a/2),c=Math.max(n,Math.floor(t-o*s/a+u)),l=Math.min(r,Math.floor(t+(a-o)*s/a+u));B5(e,t,c,l)}var f=e[t],d=n,p=r;for(EV.util.swap(e,n,t),L5(e[r],f)>0&&EV.util.swap(e,n,r);d<p;){for(EV.util.swap(e,d,p),d++,p--;L5(e[d],f)<0;)d+=1;for(;L5(e[p],f)>0;)p-=1}0===L5(e[n],f)?EV.util.swap(e,n,p):(p+=1,EV.util.swap(e,p,r)),p<=t&&(n=p+1),t<=p&&(r=p-1)}}function z5(e,t,n,r,a){for(var o=t[t.length-1],i=e.length/o,s=o,u=EV.util.getTypedArrayFromDType(n,i*r),c=EV.util.getTypedArrayFromDType("int32",i*r),l=function(t){var n=t*s,o=e.subarray(n,n+s),i=new Array(o.length);o.forEach((function(e,t){return i[t]={value:e,index:t}})),r<i.length&&(B5(i,r),i=i.slice(0,r)),a&&i.sort(L5);for(var l=t*r,f=u.subarray(l,l+r),d=c.subarray(l,l+r),p=0;p<r;p++)f[p]=i[p].value,d[p]=i[p].index},f=0;f<i;f++)l(f);var d=t.slice();return d[d.length-1]=r,[(0,EV.buffer)(d,n,u),(0,EV.buffer)(d,"int32",c)]}var Z5={kernelName:EV.TopK,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,o=t.x,i=r.k,s=r.sorted;qQ(o,"topk");var u=z5(n.data.get(o.dataId).values,o.shape,o.dtype,i,s),c=(0,a.Z)(u,2),l=c[0],f=c[1];return[n.makeTensorInfo(l.shape,l.dtype,l.values),n.makeTensorInfo(f.shape,f.dtype,f.values)]}};var V5={kernelName:EV.Transform,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.attrs,r=e.backend,o=t.image,i=t.transforms,s=n.interpolation,u=n.fillMode,c=n.fillValue,l=n.outputShape,f=(0,a.Z)(o.shape,4),d=f[0],p=f[1],h=f[2],m=f[3],v=null!=l?l:[p,h],g=(0,a.Z)(v,2),y=g[0],b=g[1],x=[d,y,b,m],w=EV.util.computeStrides(o.shape),k=w[0],S=w[1],_=w[2],N=EV.util.getTypedArrayFromDType(o.dtype,EV.util.sizeFromShape(x));N.fill(c);for(var E=r.data.get(o.dataId).values,C=r.data.get(i.dataId).values,T=0;T<d;++T){for(var I=1===i.shape[0]?C:C.subarray(8*T,8*T+8),O=0;O<y;++O)for(var A=0;A<b;++A)for(var D=0;D<m;++D){var M=void 0,R=I[6]*A+I[7]*O+1;if(0!==R){var P=(I[0]*A+I[1]*O+I[2])/R,j=(I[3]*A+I[4]*O+I[5])/R,F=U5(P,h,u),L=U5(j,p,u);switch(s){case"nearest":M=W5(E,p,h,k,S,_,T,L,F,D,c);break;case"bilinear":M=H5(E,p,h,k,S,_,T,L,F,D,c);break;default:throw new Error("Error in Transform: Expect 'nearest' or "+"'bilinear', but got ".concat(s))}N[T*k+O*S+A*_+D]=M}}return r.makeTensorInfo(x,o.dtype,N)}return{dataId:r.write(N,x,o.dtype),shape:o.shape,dtype:o.dtype}}};function U5(e,t,n){switch(n){case"reflect":return function(e,t){var n=e;if(n<0)if(t<=1)n=0;else{var r=2*t;n<r&&(n=r*Math.trunc(-n/r)+n),n=n<-t?n+r:-n-1}else if(n>t-1)if(t<=1)n=0;else{var a=2*t;(n-=a*Math.trunc(n/a))>=t&&(n=a-n-1)}return EV.util.clamp(0,n,t-1)}(e,t);case"wrap":return function(e,t){var n=e;if(n<0)if(t<=1)n=0;else{var r=t-1;n+=t*(Math.trunc(-n/r)+1)}else if(n>t-1)if(t<=1)n=0;else{var a=t-1;n-=t*Math.trunc(n/a)}return EV.util.clamp(0,n,t-1)}(e,t);case"nearest":return function(e,t){return EV.util.clamp(0,e,t-1)}(e,t);default:return function(e,t){return e}(e)}}function q5(e,t,n,r,a,o,i,s,u,c,l){return 0<=s&&s<t&&0<=u&&u<n?e[i*r+s*a+u*o+c]:l}function W5(e,t,n,r,a,o,i,s,u,c,l){return q5(e,t,n,r,a,o,i,Math.round(s),Math.round(u),c,l)}function H5(e,t,n,r,a,o,i,s,u,c,l){var f=Math.floor(s),d=Math.floor(u),p=f+1,h=d+1;return(p-s)*((h-u)*q5(e,t,n,r,a,o,i,f,d,c,l)+(u-d)*q5(e,t,n,r,a,o,i,f,h,c,l))+(s-f)*((h-u)*q5(e,t,n,r,a,o,i,p,d,c,l)+(u-d)*q5(e,t,n,r,a,o,i,p,h,c,l))}function G5(e,t,n,r){for(var a=EV.util.parseAxisParam(t,n)[0],o=[1,n[0],1],i=0;i<a;i++)o[0]*=n[i];o[1]=n[a];for(var s=a+1;s<n.length;s++)o[2]*=n[s];for(var u={},c=new Int32Array(n[a]),l=new EV.TensorBuffer(o,r,e),f=[],d=1===o[0]&&1===o[2],p=0;p<n[a];p++){var h=void 0;if(d)h=e[p].toString();else{for(var m=[],v=0;v<o[0];v++)for(var g=0;g<o[2];g++)m.push(l.get(v,p,g));h=m.join(",")}if(void 0!==u[h])c[p]=u[h];else{var y=Object.keys(u).length;u[h]=y,c[p]=y,f.push(p)}}var b=o.slice();b[1]=Object.keys(u).length;var x=new EV.TensorBuffer(b,r);f.forEach((function(e,t){for(var n=0;n<o[0];n++)for(var r=0;r<o[2];r++)x.set(l.get(n,e,r),n,t,r)}));var w=n.slice();return w[a]=b[1],{outputValues:x.values,outputShape:w,indices:c}}var K5={kernelName:EV.Unique,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.attrs,r=e.backend,a=n.axis,o=t.x;qQ(o,"unique");var i=G5(r.data.get(o.dataId).values,a,o.shape,o.dtype),s=i.outputValues,u=i.outputShape,c=i.indices;return[r.makeTensorInfo(u,o.dtype,s),r.makeTensorInfo([c.length],"int32",c)]}};var X5={kernelName:EV.Unpack,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.value,o=r.axis;o<0&&(o+=a.shape.length);for(var i=a.shape.length,s=a.shape[o],u=new Array(i-1),c=0,l=0;l<i;l++)l!==o&&(u[c++]=a.shape[l]);var f=new Array(i).fill(0),d=a.shape.slice();d[o]=1;for(var p=new Array(s),h=0;h<p.length;h++){f[o]=h;var m=d1({inputs:{x:a},backend:n,attrs:{begin:f,size:d}});p[h]=C0({inputs:{x:m},backend:n,attrs:{shape:u}}),n.disposeIntermediateTensorInfo(m)}return p}};for(var Y5={kernelName:EV.UnsortedSegmentSum,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=t.segmentIds,i=r.numSegments;qQ(a,"unsortedSegmentSum");for(var s=[],u=[],c=a.shape.length-o.shape.length,l=o,f=0;f<c;++f){var d=w2({inputs:{input:l},backend:n,attrs:{dim:f+1}});l=d,u.push(d)}for(var p=0;p<i;++p){var h=EV.util.createScalarValue(p,"int32"),m=n.makeTensorInfo([],"int32",h),v=u2({inputs:{a:m,b:l},backend:n}),g=b0({inputs:{x:v},backend:n,attrs:{dtype:"float32"}}),y=t2({inputs:{a:g,b:a},backend:n}),b=r2({inputs:{x:y},backend:n,attrs:{axis:0,keepDims:!1}});s.push(b),u.push(m),u.push(v),u.push(g),u.push(y),u.push(b)}var x=y4({inputs:s,backend:n,attrs:{axis:0}});return u.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),x}},$5=0,J5=[A0,M0,P0,F0,E0,L0,V0,U0,q0,W0,G0,X0,$0,e1,n1,i1,s1,u1,c1,O0,l1,h1,g1,y1,x0,w1,S1,m0,_1,I1,A1,D1,M1,R1,P1,j1,L1,z1,Z1,V1,U1,q1,H1,G1,K1,X1,Y1,$1,J1,o2,YQ,i2,c2,g2,x2,k2,N2,j2,L2,B2,V2,W2,H2,G2,X2,$2,e3,r3,JQ,a3,C1,i3,u3,l3,e0,p3,v3,y3,w3,S3,E3,T3,A3,D3,M3,j3,B3,z3,Z3,V3,U3,q3,W3,H3,X3,Y3,Q3,n4,n2,a4,i4,u4,l4,p4,h4,g4,b4,x4,S4,a0,N4,C4,y0,T2,I4,i0,u0,T0,O4,A4,D4,M4,R4,P4,F4,z4,V4,U4,G4,d0,X4,$4,Q4,p1,t4,n5,r5,o5,s5,c5,l5,f5,d5,m5,v5,b5,w5,S5,E5,I5,A5,D2,a2,M5,P5,F5,Z5,V5,Z0,K5,X5,Y5,v4];$5<J5.length;$5++){var Q5=J5[$5];(0,EV.registerKernel)(Q5)}var e6,t6,n6,r6={},a6={alpha:!1,antialias:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!1,depth:!1,stencil:!1,failIfMajorPerformanceCaveat:!0};function o6(e,t){if(!(e in r6)){var n=function(e,t){if(1!==e&&2!==e)throw new Error("Cannot get WebGL rendering context, WebGL is disabled.");var n=null==t?function(e){if("undefined"!==typeof OffscreenCanvas&&2===e)return new OffscreenCanvas(300,150);if("undefined"!==typeof document)return document.createElement("canvas");throw new Error("Cannot create a canvas in this context")}(e):t;if(n.addEventListener("webglcontextlost",(function(t){t.preventDefault(),delete r6[e]}),!1),1===e)return n.getContext("webgl",a6)||n.getContext("experimental-webgl",a6);return n.getContext("webgl2",a6)}(e,t);if(null===n)return console.log("Could not get context for WebGL version",e),null;r6[e]=n}var r=r6[e];return null==r||r.isContextLost()?(delete r6[e],o6(e)):(r.disable(r.DEPTH_TEST),r.disable(r.STENCIL_TEST),r.disable(r.BLEND),r.disable(r.DITHER),r.disable(r.POLYGON_OFFSET_FILL),r.disable(r.SAMPLE_COVERAGE),r.enable(r.SCISSOR_TEST),r.enable(r.CULL_FACE),r.cullFace(r.BACK),r6[e])}function i6(e,t){return[t,e]}function s6(e){var t=EV.util.sizeFromShape(e),n=Math.ceil(t/4);return EV.util.sizeToSquarishShape(n)}function u6(e,t){return[Math.max(1,Math.ceil(t/2)),Math.max(1,Math.ceil(e/2))]}function c6(e,t){var n,r,a,o,i,s,u,c,l,f,d=e;return 2===(0,EV.env)().getNumber("WEBGL_VERSION")?(n=d.R32F,r=d.R16F,a=d.RGBA16F,o=d.RGBA32F,i=d.RED,u=4,c=1,l=d.HALF_FLOAT,f=d.FLOAT,s=d.RGBA8):(n=e.RGBA,r=e.RGBA,a=e.RGBA,o=d.RGBA,i=e.RGBA,u=4,c=4,l=null!=t?t.HALF_FLOAT_OES:null,f=e.FLOAT,s=e.RGBA),{internalFormatFloat:n,internalFormatHalfFloat:r,internalFormatPackedHalfFloat:a,internalFormatPackedFloat:o,textureFormatFloat:i,downloadTextureFormat:s,downloadUnpackNumChannels:u,defaultNumChannels:c,textureTypeHalfFloat:l,textureTypeFloat:f}}function l6(e,t){var n=t();return(0,EV.env)().getBool("DEBUG")&&function(e){var t=e.getError();if(t!==e.NO_ERROR)throw new Error("WebGL Error: "+function(e,t){switch(t){case e.NO_ERROR:return"NO_ERROR";case e.INVALID_ENUM:return"INVALID_ENUM";case e.INVALID_VALUE:return"INVALID_VALUE";case e.INVALID_OPERATION:return"INVALID_OPERATION";case e.INVALID_FRAMEBUFFER_OPERATION:return"INVALID_FRAMEBUFFER_OPERATION";case e.OUT_OF_MEMORY:return"OUT_OF_MEMORY";case e.CONTEXT_LOST_WEBGL:return"CONTEXT_LOST_WEBGL";default:return"Unknown error code ".concat(t)}}(e,t))}(e),n}!function(e){e[e.DENSE=0]="DENSE",e[e.SHARED_BATCH=1]="SHARED_BATCH"}(e6||(e6={})),function(e){e[e.RENDER=0]="RENDER",e[e.UPLOAD=1]="UPLOAD",e[e.PIXELS=2]="PIXELS",e[e.DOWNLOAD=3]="DOWNLOAD"}(t6||(t6={})),function(e){e[e.UNPACKED_FLOAT16=0]="UNPACKED_FLOAT16",e[e.UNPACKED_FLOAT32=1]="UNPACKED_FLOAT32",e[e.PACKED_4X1_UNSIGNED_BYTE=2]="PACKED_4X1_UNSIGNED_BYTE",e[e.PACKED_2X2_FLOAT32=3]="PACKED_2X2_FLOAT32",e[e.PACKED_2X2_FLOAT16=4]="PACKED_2X2_FLOAT16"}(n6||(n6={}));function f6(e){return!!((0,EV.env)().getBool("WEBGL_RENDER_FLOAT32_ENABLED")||0===e||5.96e-8<Math.abs(e)&&Math.abs(e)<65504)}function d6(e,t){return N6(e,(function(){return e.getExtension(t)}),'Extension "'+t+'" not supported on this browser.')}function p6(e,t){var n=N6(e,(function(){return e.createShader(e.FRAGMENT_SHADER)}),"Unable to create fragment WebGLShader.");if(l6(e,(function(){return e.shaderSource(n,t)})),l6(e,(function(){return e.compileShader(n)})),!1===e.getShaderParameter(n,e.COMPILE_STATUS))throw function(e,t){var n=v6.exec(t);if(null==n)return console.log("Couldn't parse line number in error: ".concat(t)),void console.log(e);for(var r=+n[1],a=e.split("\n"),o=a.length.toString().length+2,i=a.map((function(e,t){return EV.util.rightPad((t+1).toString(),o)+e})),s=0,u=0;u<i.length;u++)s=Math.max(i[u].length,s);var c=i.slice(0,r-1),l=i.slice(r-1,r),f=i.slice(r);console.log(c.join("\n")),console.log(t.split("\n")[0]),console.log("%c ".concat(EV.util.rightPad(l[0],s)),"border:1px solid red; background-color:#e3d2d2; color:#a61717"),console.log(f.join("\n"))}(t,e.getShaderInfoLog(n)),new Error("Failed to compile fragment shader.");return n}var h6,m6,v6=/ERROR: [0-9]+:([0-9]+):/g;function g6(e,t){if(l6(e,(function(){return e.validateProgram(t)})),!1===e.getProgramParameter(t,e.VALIDATE_STATUS))throw console.log(e.getProgramInfoLog(t)),new Error("Shader program validation failed.")}function y6(e,t,n,r,a,o,i){var s=e.getAttribLocation(t,n);return-1!==s&&(l6(e,(function(){return e.bindBuffer(e.ARRAY_BUFFER,r)})),l6(e,(function(){return e.vertexAttribPointer(s,a,e.FLOAT,!1,o,i)})),l6(e,(function(){return e.enableVertexAttribArray(s)})),!0)}function b6(e,t,n){return N6(e,(function(){return e.getUniformLocation(t,n)}),'uniform "'+n+'" not present in program.')}function x6(e,t,n){return e.getUniformLocation(t,n)}function w6(e,t,n,r){l6(e,(function(){return function(e,t,n){E6(e,n),l6(e,(function(){return e.activeTexture(e.TEXTURE0+n)})),l6(e,(function(){return e.bindTexture(e.TEXTURE_2D,t)}))}(e,t,r)})),l6(e,(function(){return e.uniform1i(n,r)}))}function k6(e,t,n){l6(e,(function(){return e.bindFramebuffer(e.FRAMEBUFFER,n)})),l6(e,(function(){return e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,t,0)}))}function S6(e,t){l6(e,(function(){return e.bindFramebuffer(e.FRAMEBUFFER,t)})),l6(e,(function(){return e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,null,0)}))}function _6(e){var t=e.checkFramebufferStatus(e.FRAMEBUFFER);if(t!==e.FRAMEBUFFER_COMPLETE)throw new Error("Error binding framebuffer: "+function(e,t){switch(t){case e.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_ATTACHMENT";case e.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT";case e.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:return"FRAMEBUFFER_INCOMPLETE_DIMENSIONS";case e.FRAMEBUFFER_UNSUPPORTED:return"FRAMEBUFFER_UNSUPPORTED";default:return"unknown error ".concat(t)}}(e,t))}function N6(e,t,n){var r=l6(e,(function(){return t()}));if(null==r)throw new Error(n);return r}function E6(e,t){var n=e.MAX_COMBINED_TEXTURE_IMAGE_UNITS-1,r=t+e.TEXTURE0;if(r<e.TEXTURE0||r>n){var a="[gl.TEXTURE0, gl.TEXTURE".concat(n,"]");throw new Error("textureUnit must be in ".concat(a,"."))}}function C6(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return EV.util.sizeFromShape(e.slice(0,e.length-t))}function T6(e){if(0===e.length)throw Error("Cannot get rows and columns of an empty shape array.");return[e.length>1?e[e.length-2]:1,e[e.length-1]]}function I6(e){var t=[1,1,1];return 0===e.length||1===e.length&&1===e[0]||(t=[C6(e)].concat((0,r.Z)(T6(e)))),t}function O6(e){return e%2===0}function A6(e,t){if(e=e.slice(-2),t=t.slice(-2),EV.util.arraysEqual(e,t))return!0;if(!e.length||!t.length)return!0;if(0===e[0]||0===e[1]||0===t[0]||0===t[1])return!0;if(e.length!==t.length){var n=e.slice(-1)[0],r=t.slice(-1)[0];if(n===r)return!0;if(O6(n)&&O6(r)&&(1===e[0]||1===t[0]))return!0}return e[1]===t[1]&&O6(e[0])&&O6(t[0])}function D6(e,t){return null!=e.getExtension(t)}function M6(e){try{if(null!=o6(e))return!0}catch(t){return console.log("Error when getting WebGL context: ",t),!1}return!1}function R6(e){if(0===e)return!1;var t=o6(e);if(1!==e){if(D6(t,"EXT_color_buffer_float"))return P6(t);var n="EXT_color_buffer_half_float";if(D6(t,n)){var r=t.getExtension(n);return function(e,t){var n=c6(e,t),r=e.createTexture();e.bindTexture(e.TEXTURE_2D,r);var a=1,o=1;e.texImage2D(e.TEXTURE_2D,0,n.internalFormatHalfFloat,a,o,0,n.textureFormatFloat,n.textureTypeHalfFloat,null);var i=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,i),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,r,0);var s=e.checkFramebufferStatus(e.FRAMEBUFFER)===e.FRAMEBUFFER_COMPLETE;return e.bindTexture(e.TEXTURE_2D,null),e.bindFramebuffer(e.FRAMEBUFFER,null),e.deleteTexture(r),e.deleteFramebuffer(i),s}(t,r)}return!1}return!!D6(t,"OES_texture_float")&&(!!D6(t,"WEBGL_color_buffer_float")&&P6(t))}function P6(e){var t=c6(e),n=e.createTexture();e.bindTexture(e.TEXTURE_2D,n);e.texImage2D(e.TEXTURE_2D,0,t.internalFormatFloat,1,1,0,t.textureFormatFloat,t.textureTypeFloat,null);var r=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,r),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,n,0);var a=e.checkFramebufferStatus(e.FRAMEBUFFER)===e.FRAMEBUFFER_COMPLETE;return e.bindTexture(e.TEXTURE_2D,null),e.bindFramebuffer(e.FRAMEBUFFER,null),e.deleteTexture(n),e.deleteFramebuffer(r),a}function j6(e,t){Array.isArray(e)||(e=[e]),e.forEach((function(e){null!=e&&EV.util.assert("complex64"!==e.dtype,(function(){return"".concat(t," does not support complex64 tensors ")+"in the WebGL backend."}))}))}var F6=(0,EV.env)();function L6(){var e,t,n,r,a,o,i,s,u,c;return 2===(0,EV.env)().getNumber("WEBGL_VERSION")?(e="#version 300 es",t="in",n="out",r="in",a="texture",o="outputColor",i="out vec4 outputColor;",s="\n      bool isnan_custom(float val) {\n        return (val > 0.0 || val < 0.0) ? false : val != 0.0;\n      }\n\n      bvec4 isnan_custom(vec4 val) {\n        return bvec4(isnan_custom(val.x),\n          isnan_custom(val.y), isnan_custom(val.z), isnan_custom(val.w));\n      }\n\n      #define isnan(value) isnan_custom(value)\n    ",u="",c="\n      #define round(value) newRound(value)\n      int newRound(float value) {\n        return int(floor(value + 0.5));\n      }\n\n      ivec4 newRound(vec4 value) {\n        return ivec4(floor(value + vec4(0.5)));\n      }\n    "):(e="",t="attribute",n="varying",r="varying",a="texture2D",o="gl_FragColor",i="",s="\n      #define isnan(value) isnan_custom(value)\n      bool isnan_custom(float val) {\n        return (val > 0. || val < 1. || val == 0.) ? false : true;\n      }\n      bvec4 isnan_custom(vec4 val) {\n        return bvec4(isnan(val.x), isnan(val.y), isnan(val.z), isnan(val.w));\n      }\n    ",u="\n      uniform float INFINITY;\n\n      bool isinf(float val) {\n        return abs(val) == INFINITY;\n      }\n      bvec4 isinf(vec4 val) {\n        return equal(abs(val), vec4(INFINITY));\n      }\n    ",c="\n      int round(float value) {\n        return int(floor(value + 0.5));\n      }\n\n      ivec4 round(vec4 value) {\n        return ivec4(floor(value + vec4(0.5)));\n      }\n    "),{version:e,attribute:t,varyingVs:n,varyingFs:r,texture2D:a,output:o,defineOutput:i,defineSpecialNaN:s,defineSpecialInf:u,defineRound:c}}function B6(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"index",r=EV.util.computeStrides(t);return r.map((function(t,a){var o="int ".concat(e[a]," = ").concat(n," / ").concat(t),i=a===r.length-1?"int ".concat(e[a+1]," = ").concat(n," - ").concat(e[a]," * ").concat(t):"index -= ".concat(e[a]," * ").concat(t);return"".concat(o,"; ").concat(i,";")})).join("")}function z6(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"index",r=EV.util.computeStrides(t);return r.map((function(t,a){var o="int ".concat(e[a]," = ").concat(n," / outShapeStrides[").concat(a,"]"),i=a===r.length-1?"int ".concat(e[a+1]," = ").concat(n," - ").concat(e[a]," * outShapeStrides[").concat(a,"]"):"index -= ".concat(e[a]," * outShapeStrides[").concat(a,"]");return"".concat(o,"; ").concat(i,";")})).join("")}function Z6(e,t){var n=e.length,r=e.map((function(e){return"".concat(t,"[").concat(e,"]")})),a=new Array(n-1);a[n-2]=r[n-1];for(var o=n-3;o>=0;--o)a[o]="(".concat(a[o+1]," * ").concat(r[o+1],")");return a}function V6(e){var t=EV.util.computeStrides(e).map((function(e){return e.toString()}));return"\n  int getFlatIndex(ivec3 coords) {\n    return coords.x * ".concat(t[0]," + coords.y * ").concat(t[1]," + coords.z;\n  }\n")}F6.registerFlag("HAS_WEBGL",(function(){return F6.getNumber("WEBGL_VERSION")>0})),F6.registerFlag("WEBGL_VERSION",(function(){return M6(2)?2:M6(1)?1:0})),F6.registerFlag("WEBGL_CHECK_NUMERICAL_PROBLEMS",(function(){return!1})),F6.registerFlag("WEBGL_BUFFER_SUPPORTED",(function(){return 2===F6.get("WEBGL_VERSION")})),F6.registerFlag("WEBGL_CPU_FORWARD",(function(){return!0})),F6.registerFlag("WEBGL_FORCE_F16_TEXTURES",(function(){return!1})),F6.registerFlag("WEBGL_PACK",(function(){return F6.getBool("HAS_WEBGL")})),F6.registerFlag("WEBGL_PACK_NORMALIZATION",(function(){return F6.getBool("WEBGL_PACK")})),F6.registerFlag("WEBGL_PACK_CLIP",(function(){return F6.getBool("WEBGL_PACK")})),F6.registerFlag("WEBGL_PACK_DEPTHWISECONV",(function(){return F6.getBool("WEBGL_PACK")})),F6.registerFlag("WEBGL_PACK_BINARY_OPERATIONS",(function(){return F6.getBool("WEBGL_PACK")})),F6.registerFlag("WEBGL_PACK_UNARY_OPERATIONS",(function(){return F6.getBool("WEBGL_PACK")})),F6.registerFlag("WEBGL_PACK_ARRAY_OPERATIONS",(function(){return F6.getBool("WEBGL_PACK")})),F6.registerFlag("WEBGL_PACK_IMAGE_OPERATIONS",(function(){return F6.getBool("WEBGL_PACK")})),F6.registerFlag("WEBGL_PACK_REDUCE",(function(){return F6.getBool("WEBGL_PACK")})),F6.registerFlag("WEBGL_LAZILY_UNPACK",(function(){return F6.getBool("WEBGL_PACK")})),F6.registerFlag("WEBGL_CONV_IM2COL",(function(){return F6.getBool("WEBGL_PACK")})),F6.registerFlag("WEBGL_MAX_TEXTURE_SIZE",(function(){return function(e){if(null==h6){var t=o6(e);h6=t.getParameter(t.MAX_TEXTURE_SIZE)}return h6}(F6.getNumber("WEBGL_VERSION"))})),F6.registerFlag("WEBGL_MAX_TEXTURES_IN_SHADER",(function(){return function(e){if(null==m6){var t=o6(e);m6=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS)}return Math.min(16,m6)}(F6.getNumber("WEBGL_VERSION"))})),F6.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION",(function(){var e=F6.getNumber("WEBGL_VERSION");return 0===e?0:function(e){if(0===e)return 0;var t=o6(e);return D6(t,"EXT_disjoint_timer_query_webgl2")&&2===e?2:D6(t,"EXT_disjoint_timer_query")?1:0}(e)})),F6.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE",(function(){return F6.getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0&&!EV.device_util.isMobile()})),F6.registerFlag("WEBGL_RENDER_FLOAT32_CAPABLE",(function(){return function(e){if(0===e)return!1;var t=o6(e);if(1===e){if(!D6(t,"OES_texture_float"))return!1}else if(!D6(t,"EXT_color_buffer_float"))return!1;return P6(t)}(F6.getNumber("WEBGL_VERSION"))})),F6.registerFlag("WEBGL_RENDER_FLOAT32_ENABLED",(function(){return!F6.getBool("WEBGL_FORCE_F16_TEXTURES")&&F6.getBool("WEBGL_RENDER_FLOAT32_CAPABLE")})),F6.registerFlag("WEBGL_DOWNLOAD_FLOAT_ENABLED",(function(){return R6(F6.getNumber("WEBGL_VERSION"))})),F6.registerFlag("WEBGL_FENCE_API_ENABLED",(function(){return 2===(e=F6.getNumber("WEBGL_VERSION"))&&null!=o6(e).fenceSync;var e})),F6.registerFlag("WEBGL_SIZE_UPLOAD_UNIFORM",(function(){return F6.getBool("WEBGL_RENDER_FLOAT32_ENABLED")?4:0})),F6.registerFlag("WEBGL_DELETE_TEXTURE_THRESHOLD",(function(){return-1}),(function(e){if(e<0&&-1!==e)throw new Error("WEBGL_DELETE_TEXTURE_THRESHOLD must be -1 (indicating never "+"delete) or at least 0, but got ".concat(e,"."))})),F6.registerFlag("WEBGL_FLUSH_THRESHOLD",(function(){return EV.device_util.isMobile()?1:-1}),(function(e){if(e<0&&-1!==e)throw new Error("WEBGL_FLUSH_THRESHOLD must be -1 (indicating never "+"manual flush) or at least 0, but got ".concat(e,"."))})),F6.registerFlag("CPU_HANDOFF_SIZE_THRESHOLD",(function(){return 128})),F6.registerFlag("WEBGL_USE_SHAPES_UNIFORMS",(function(){return!1})),F6.registerFlag("TOPK_LAST_DIM_CPU_HANDOFF_SIZE_THRESHOLD",(function(){return 1e5})),F6.registerFlag("TOPK_K_CPU_HANDOFF_THRESHOLD",(function(){return 128}));var U6="\n  const float FLOAT_MAX = 1.70141184e38;\n  const float FLOAT_MIN = 1.17549435e-38;\n\n  lowp vec4 encode_float(highp float v) {\n    if (isnan(v)) {\n      return vec4(255, 255, 255, 255);\n    }\n\n    highp float av = abs(v);\n\n    if(av < FLOAT_MIN) {\n      return vec4(0.0, 0.0, 0.0, 0.0);\n    } else if(v > FLOAT_MAX) {\n      return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;\n    } else if(v < -FLOAT_MAX) {\n      return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;\n    }\n\n    highp vec4 c = vec4(0,0,0,0);\n\n    highp float e = floor(log2(av));\n    highp float m = exp2(fract(log2(av))) - 1.0;\n\n    c[2] = floor(128.0 * m);\n    m -= c[2] / 128.0;\n    c[1] = floor(32768.0 * m);\n    m -= c[1] / 32768.0;\n    c[0] = floor(8388608.0 * m);\n\n    highp float ebias = e + 127.0;\n    c[3] = floor(ebias / 2.0);\n    ebias -= c[3] * 2.0;\n    c[2] += floor(ebias) * 128.0;\n\n    c[3] += 128.0 * step(0.0, -v);\n\n    return c / 255.0;\n  }\n",q6=EV.backend_util.getBroadcastDims;function W6(e,t,n){var r=[];if(e.forEach((function(e){var t=EV.util.sizeFromShape(e.shapeInfo.logicalShape);if(e.shapeInfo.isUniform?r.push("uniform float ".concat(e.name).concat(t>1?"[".concat(t,"]"):"",";")):(r.push("uniform sampler2D ".concat(e.name,";")),r.push("uniform int offset".concat(e.name,";"))),n.enableShapeUniforms){switch(l8(n.packedInputs,e.shapeInfo.logicalShape,e.shapeInfo.texShape).uniformShape.length){case 1:r.push("uniform int ".concat(e.name,"Shape;"));break;case 2:r.push("uniform ivec2 ".concat(e.name,"Shape;"));break;case 3:r.push("uniform ivec3 ".concat(e.name,"Shape;"));break;case 4:r.push("uniform ivec4 ".concat(e.name,"Shape;"))}r.push("uniform ivec2 ".concat(e.name,"TexShape;"))}})),n.enableShapeUniforms){switch(t.logicalShape.length){case 1:r.push("uniform int outShape;");break;case 2:r.push("uniform ivec2 outShape;"),r.push("uniform int outShapeStrides;");break;case 3:r.push("uniform ivec3 outShape;"),r.push("uniform ivec2 outShapeStrides;");break;case 4:r.push("uniform ivec4 outShape;"),r.push("uniform ivec3 outShapeStrides;")}r.push("uniform ivec2 outTexShape;")}n.customUniforms&&n.customUniforms.forEach((function(e){r.push("uniform ".concat(e.type," ").concat(e.name).concat(e.arrayIndex?"[".concat(e.arrayIndex,"]"):"",";"))}));var a,o,i=r.join("\n"),s=e.map((function(e){return function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3?arguments[3]:void 0,a="";a+=n?G6(e,r):H6(e,r);var o=e.shapeInfo.logicalShape,i=t.logicalShape;o.length<=i.length&&(a+=n?s8(e,t):u8(e,t));return a}(e,t,n.packedInputs,n.enableShapeUniforms)})).join("\n"),u=t.texShape,c=L6(),l=function(e){return"\n    float sampleTexture(sampler2D textureSampler, vec2 uv) {\n      return ".concat(e.texture2D,"(textureSampler, uv).r;\n    }\n  ")}(c),f=function(e){return"".concat(e.version,"\n    precision highp float;\n    precision highp int;\n    precision highp sampler2D;\n    ").concat(e.varyingFs," vec2 resultUV;\n    ").concat(e.defineOutput,"\n    const vec2 halfCR = vec2(0.5, 0.5);\n\n    struct ivec5\n    {\n      int x;\n      int y;\n      int z;\n      int w;\n      int u;\n    };\n\n    struct ivec6\n    {\n      int x;\n      int y;\n      int z;\n      int w;\n      int u;\n      int v;\n    };\n\n    uniform float NAN;\n    ").concat(e.defineSpecialNaN,"\n    ").concat(e.defineSpecialInf,"\n    ").concat(e.defineRound,"\n\n    int imod(int x, int y) {\n      return x - y * (x / y);\n    }\n\n    int idiv(int a, int b, float sign) {\n      int res = a / b;\n      int mod = imod(a, b);\n      if (sign < 0. && mod != 0) {\n        res -= 1;\n      }\n      return res;\n    }\n\n    //Based on the work of Dave Hoskins\n    //https://www.shadertoy.com/view/4djSRW\n    #define HASHSCALE1 443.8975\n    float random(float seed){\n      vec2 p = resultUV * seed;\n      vec3 p3  = fract(vec3(p.xyx) * HASHSCALE1);\n      p3 += dot(p3, p3.yzx + 19.19);\n      return fract((p3.x + p3.y) * p3.z);\n    }\n\n    ").concat(K6,"\n    ").concat(X6,"\n    ").concat(Y6,"\n  ")}(c);return t.isPacked?(a=function(e,t,n){switch(e.length){case 0:return"\n    int getOutputCoords() {\n      return 0;\n    }\n  ";case 1:return function(e,t,n){var r=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)];if(1===r[0])return n?"\n      int getOutputCoords() {\n        return 2 * int(resultUV.x * ceil(float(outTexShape[1]) / 2.0));\n      }\n    ":"\n      int getOutputCoords() {\n        return 2 * int(resultUV.x * ".concat(r[1],".0);\n      }\n    ");if(1===r[1])return n?"\n      int getOutputCoords() {\n        return 2 * int(resultUV.y * ceil(float(outTexShape[0]) / 2.0));\n      }\n    ":"\n      int getOutputCoords() {\n        return 2 * int(resultUV.y * ".concat(r[0],".0);\n      }\n    ");if(n)return"\n    int getOutputCoords() {\n      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(packedTexShape[0], packedTexShape[1]));\n      return 2 * (resTexRC.x * packedTexShape[1] + resTexRC.y);\n    }\n  ";return"\n    int getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(".concat(r[0],", ").concat(r[1],"));\n      return 2 * (resTexRC.x * ").concat(r[1]," + resTexRC.y);\n    }\n  ")}(0,t,n);case 2:return function(e,t,n){var r=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)];if(EV.util.arraysEqual(e,t))return n?"\n      ivec2 getOutputCoords() {\n        ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\n        return 2 * ivec2(resultUV.yx * vec2(packedTexShape[0], packedTexShape[1]));\n      }\n    ":"\n      ivec2 getOutputCoords() {\n        return 2 * ivec2(resultUV.yx * vec2(".concat(r[0],", ").concat(r[1],"));\n      }\n    ");var a=Math.ceil(e[1]/2);if(n)return"\n    ivec2 getOutputCoords() {\n      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\n      int texelsInLogicalRow = int(ceil(float(outShape[1]) / 2.0));\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(packedTexShape[0], packedTexShape[1]));\n\n      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;\n      int r = 2 * (index / texelsInLogicalRow);\n      int c = imod(index, texelsInLogicalRow) * 2;\n\n      return ivec2(r, c);\n    }\n  ";return"\n    ivec2 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(".concat(r[0],", ").concat(r[1],"));\n\n      int index = resTexRC.x * ").concat(r[1]," + resTexRC.y;\n      int r = 2 * (index / ").concat(a,");\n      int c = imod(index, ").concat(a,") * 2;\n\n      return ivec2(r, c);\n    }\n  ")}(e,t,n);case 3:return function(e,t,n){if(n)return"\n    ivec3 getOutputCoords() {\n      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\n      int texelsInLogicalRow = int(ceil(float(outShape[2]) / 2.0));\n      int texelsInBatch = texelsInLogicalRow * int(ceil(float(outShape[1]) / 2.0));\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(packedTexShape[0], packedTexShape[1]));\n      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;\n\n      int b = index / texelsInBatch;\n      index -= b * texelsInBatch;\n\n      int r = 2 * (index / texelsInLogicalRow);\n      int c = imod(index, texelsInLogicalRow) * 2;\n\n      return ivec3(b, r, c);\n    }\n  ";var r=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)],a=Math.ceil(e[2]/2),o=a*Math.ceil(e[1]/2);return"\n    ivec3 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(".concat(r[0],", ").concat(r[1],"));\n      int index = resTexRC.x * ").concat(r[1]," + resTexRC.y;\n\n      int b = index / ").concat(o,";\n      index -= b * ").concat(o,";\n\n      int r = 2 * (index / ").concat(a,");\n      int c = imod(index, ").concat(a,") * 2;\n\n      return ivec3(b, r, c);\n    }\n  ")}(e,t,n);default:return function(e,t,n){if(n)return"\n    ivec4 getOutputCoords() {\n      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(packedTexShape[0], packedTexShape[1]));\n      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;\n\n      int texelsInLogicalRow = int(ceil(float(outShape[3]) / 2.0));\n      int texelsInBatch = texelsInLogicalRow * int(ceil(float(outShape[2]) / 2.0));\n      int texelsInBatchN = texelsInBatch * outShape[1];\n\n      int b2 = index / texelsInBatchN;\n      index -= b2 * texelsInBatchN;\n\n      int b = index / texelsInBatch;\n      index -= b * texelsInBatch;\n\n      int r = 2 * (index / texelsInLogicalRow);\n      int c = imod(index, texelsInLogicalRow) * 2;\n\n      return ivec4(b2, b, r, c);\n    }\n  ";for(var r=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)],a=Math.ceil(e[e.length-1]/2),o=a*Math.ceil(e[e.length-2]/2),i=o,s="",u="b, r, c",c=2;c<e.length-1;c++)i*=e[e.length-c-1],s="\n      int b".concat(c," = index / ").concat(i,";\n      index -= b").concat(c," * ").concat(i,";\n    ")+s,u="b".concat(c,", ")+u;return"\n    ivec".concat(e.length," getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(").concat(r[0],", ").concat(r[1],"));\n      int index = resTexRC.x * ").concat(r[1]," + resTexRC.y;\n\n      ").concat(s,"\n\n      int b = index / ").concat(o,";\n      index -= b * ").concat(o,";\n\n      int r = 2 * (index / ").concat(a,");\n      int c = imod(index, ").concat(a,") * 2;\n\n      return ivec").concat(e.length,"(").concat(u,");\n    }\n  ")}(e,t,n)}}(t.logicalShape,u,n.enableShapeUniforms),o=function(e){return"\n    void setOutput(vec4 val) {\n      ".concat(e.output," = val;\n    }\n  ")}(c)):(a=function(e,t,n){switch(e.length){case 0:return"\n    int getOutputCoords() {\n      return 0;\n    }\n  ";case 1:return function(e,t,n){if(1===t[0])return n?"\n      int getOutputCoords() {\n        return int(resultUV.x * float(outTexShape[1]));\n      }\n    ":"\n      int getOutputCoords() {\n        return int(resultUV.x * ".concat(t[1],".0);\n      }\n    ");if(1===t[1])return n?"\n      int getOutputCoords() {\n        return int(resultUV.y * float(outTexShape[0]));\n      }\n    ":"\n      int getOutputCoords() {\n        return int(resultUV.y * ".concat(t[0],".0);\n      }\n    ");if(n)return"\n    int getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(outTexShape[0], outTexShape[1]));\n      return resTexRC.x * outTexShape[1] + resTexRC.y;\n    }\n  ";return"\n    int getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(".concat(t[0],", ").concat(t[1],"));\n      return resTexRC.x * ").concat(t[1]," + resTexRC.y;\n    }\n  ")}(0,t,n);case 2:return function(e,t,n){if(EV.util.arraysEqual(e,t))return n?"\n      ivec2 getOutputCoords() {\n        return ivec2(resultUV.yx * vec2(outTexShape[0], outTexShape[1]));\n      }\n    ":"\n      ivec2 getOutputCoords() {\n        return ivec2(resultUV.yx * vec2(".concat(t[0],", ").concat(t[1],"));\n      }\n    ");if(1===e[1])return n?"\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2(outTexShape[0], outTexShape[1]));\n        int index = resTexRC.x * outTexShape[1] + resTexRC.y;\n        return ivec2(index, 0);\n      }\n    ":"\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2(".concat(t[0],", ").concat(t[1],"));\n        int index = resTexRC.x * ").concat(t[1]," + resTexRC.y;\n        return ivec2(index, 0);\n      }\n    ");if(1===e[0])return n?"\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2(outTexShape[0], outTexShape[1]));\n        int index = resTexRC.x * outTexShape[1] + resTexRC.y;\n        return ivec2(0, index);\n      }\n    ":"\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2(".concat(t[0],", ").concat(t[1],"));\n        int index = resTexRC.x * ").concat(t[1]," + resTexRC.y;\n        return ivec2(0, index);\n      }\n    ");if(n)return"\n    ivec2 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(outTexShape[0], outTexShape[1]));\n      int index = resTexRC.x * outTexShape[1] + resTexRC.y;\n      int r = index / outShape[1];\n      int c = index - r * outShape[1];\n      return ivec2(r, c);\n    }\n  ";return"\n    ivec2 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(".concat(t[0],", ").concat(t[1],"));\n      int index = resTexRC.x * ").concat(t[1]," + resTexRC.y;\n      int r = index / ").concat(e[1],";\n      int c = index - r * ").concat(e[1],";\n      return ivec2(r, c);\n    }\n  ")}(e,t,n);case 3:return function(e,t,n){if(n){var r=z6(["r","c","d"],e);return"\n  ivec3 getOutputCoords() {\n    ivec2 resTexRC = ivec2(resultUV.yx *\n                           vec2(outTexShape[0], outTexShape[1]));\n    int index = resTexRC.x * outTexShape[1] + resTexRC.y;\n    ".concat(r,"\n    return ivec3(r, c, d);\n  }\n")}var a=B6(["r","c","d"],e);return"\n    ivec3 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(".concat(t[0],", ").concat(t[1],"));\n      int index = resTexRC.x * ").concat(t[1]," + resTexRC.y;\n      ").concat(a,"\n      return ivec3(r, c, d);\n    }\n  ")}(e,t,n);case 4:return function(e,t,n){if(n){var r=z6(["r","c","d","d2"],e);return"\n    ivec4 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n        vec2(outTexShape[0], outTexShape[1]));\n      int index = resTexRC.x * outTexShape[1] + resTexRC.y;\n      ".concat(r,"\n      return ivec4(r, c, d, d2);\n    }\n  ")}var a=B6(["r","c","d","d2"],e);return"\n    ivec4 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n        vec2(".concat(t[0],", ").concat(t[1],"));\n      int index = resTexRC.x * ").concat(t[1]," + resTexRC.y;\n      ").concat(a,"\n      return ivec4(r, c, d, d2);\n    }\n  ")}(e,t,n);case 5:return function(e,t){var n=B6(["r","c","d","d2","d3"],e);return"\n    ivec5 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx * vec2(".concat(t[0],",\n                             ").concat(t[1],"));\n\n      int index = resTexRC.x * ").concat(t[1]," + resTexRC.y;\n\n      ").concat(n,"\n\n      ivec5 outShape = ivec5(r, c, d, d2, d3);\n      return outShape;\n    }\n  ")}(e,t);case 6:return function(e,t){var n=B6(["r","c","d","d2","d3","d4"],e);return"\n    ivec6 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n        vec2(".concat(t[0],", ").concat(t[1],"));\n      int index = resTexRC.x * ").concat(t[1]," + resTexRC.y;\n\n      ").concat(n,"\n\n      ivec6 result = ivec6(r, c, d, d2, d3, d4);\n      return result;\n    }\n  ")}(e,t);default:throw new Error("".concat(e.length,"-D output sampling is not yet supported"))}}(t.logicalShape,u,n.enableShapeUniforms),o=function(e){return"\n    void setOutput(float val) {\n      ".concat(e.output," = vec4(val, 0, 0, 0);\n    }\n  ")}(c)),n.packedInputs&&(f+=$6),[f,l,o,i,a,s,n.userCode].join("\n")}function H6(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e.shapeInfo.logicalShape;switch(n.length){case 0:return Q6(e,t);case 1:return e8(e,t);case 2:return t8(e,t);case 3:return n8(e,t);case 4:return r8(e,t);case 5:return a8(e);case 6:return o8(e);default:throw new Error("".concat(n.length,"-D input sampling")+" is not yet supported")}}function G6(e,t){switch(e.shapeInfo.logicalShape.length){case 0:return function(e){var t=e.name,n="get"+t.charAt(0).toUpperCase()+t.slice(1),r=L6();return"\n    vec4 ".concat(n,"() {\n      return ").concat(r.texture2D,"(").concat(t,", halfCR);\n    }\n  ")}(e);case 1:return function(e,t){var n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),a=e.shapeInfo.texShape,o=L6();if(t)return"\n    vec4 ".concat(r,"(int index) {\n      ivec2 packedTexShape = ivec2(ceil(float(").concat(n,"TexShape[0]) / 2.0), ceil(float(").concat(n,"TexShape[1]) / 2.0));\n      vec2 uv = packedUVfrom1D(\n        packedTexShape[0], packedTexShape[1], index);\n      return ").concat(o.texture2D,"(").concat(n,", uv);\n    }\n  ");var i=[Math.ceil(a[0]/2),Math.ceil(a[1]/2)];return"\n    vec4 ".concat(r,"(int index) {\n      vec2 uv = packedUVfrom1D(\n        ").concat(i[0],", ").concat(i[1],", index);\n      return ").concat(o.texture2D,"(").concat(n,", uv);\n    }\n  ")}(e,t);case 2:return function(e,t){var n=e.shapeInfo.logicalShape,r=e.name,a="get"+r.charAt(0).toUpperCase()+r.slice(1),o=e.shapeInfo.texShape,i=o[0],s=o[1],u=L6();if(null!=o&&EV.util.arraysEqual(n,o))return t?"\n      vec4 ".concat(a,"(int row, int col) {\n        vec2 uv = (vec2(col, row) + halfCR) / vec2(").concat(r,"TexShape[1], ").concat(r,"TexShape[0]);\n\n        return ").concat(u.texture2D,"(").concat(r,", uv);\n      }\n    "):"\n      vec4 ".concat(a,"(int row, int col) {\n        vec2 uv = (vec2(col, row) + halfCR) / vec2(").concat(s,".0, ").concat(i,".0);\n\n        return ").concat(u.texture2D,"(").concat(r,", uv);\n      }\n    ");if(t)return"\n    vec4 ".concat(a,"(int row, int col) {\n      ivec2 packedTexShape = ivec2(ceil(float(").concat(r,"TexShape[0]) / 2.0), ceil(float(").concat(r,"TexShape[1]) / 2.0));\n      int valuesPerRow = int(ceil(float(").concat(r,"Shape[1]) / 2.0));\n      vec2 uv = packedUVfrom2D(valuesPerRow, packedTexShape[0], packedTexShape[1], row, col);\n      return ").concat(u.texture2D,"(").concat(r,", uv);\n    }\n  ");var c=[Math.ceil(o[0]/2),Math.ceil(o[1]/2)],l=Math.ceil(n[1]/2);return"\n    vec4 ".concat(a,"(int row, int col) {\n      vec2 uv = packedUVfrom2D(").concat(l,", ").concat(c[0],", ").concat(c[1],", row, col);\n      return ").concat(u.texture2D,"(").concat(r,", uv);\n    }\n  ")}(e,t);case 3:return function(e,t){var n=e.shapeInfo.logicalShape,r=e.name,a="get"+r.charAt(0).toUpperCase()+r.slice(1),o=e.shapeInfo.texShape,i=[Math.ceil(o[0]/2),Math.ceil(o[1]/2)];if(1===n[0]){var s=[1,2],u=f8(e,n.slice(1)),c=["b","row","col"];return"\n        ".concat(G6(u,t),"\n        vec4 ").concat(a,"(int b, int row, int col) {\n          return ").concat(a,"(").concat(d8(c,s),");\n        }\n      ")}var l=L6();if(t)return"\n    vec4 ".concat(a,"(int b, int row, int col) {\n      ivec2 packedTexShape = ivec2(ceil(float(").concat(r,"TexShape[0]) / 2.0), ceil(float(").concat(r,"TexShape[1]) / 2.0));\n      int valuesPerRow = int(ceil(float(").concat(r,"Shape[2]) / 2.0));\n      int texelsInBatch = valuesPerRow * int(ceil(float(").concat(r,"Shape[1]) / 2.0));\n      vec2 uv = packedUVfrom3D(\n        packedTexShape[0], packedTexShape[1], texelsInBatch, valuesPerRow, b, row, col);\n      return ").concat(l.texture2D,"(").concat(r,", uv);\n    }\n  ");var f=i[0],d=i[1],p=Math.ceil(n[2]/2),h=p*Math.ceil(n[1]/2);return"\n    vec4 ".concat(a,"(int b, int row, int col) {\n      vec2 uv = packedUVfrom3D(\n        ").concat(f,", ").concat(d,", ").concat(h,", ").concat(p,", b, row, col);\n      return ").concat(l.texture2D,"(").concat(r,", uv);\n    }\n  ")}(e,t);default:return function(e,t){var n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),a=L6();if(t)return"\n    vec4 ".concat(r,"(int b2, int b, int row, int col) {\n      int valuesPerRow = int(ceil(float(").concat(n,"Shape[3]) / 2.0));\n      int texelsInBatch = valuesPerRow * int(ceil(float(").concat(n,"Shape[2]) / 2.0));\n      int index = b * texelsInBatch + (row / 2) * valuesPerRow + (col / 2);\n      texelsInBatch *= ").concat(n,"Shape[1];\n      index = b2 * texelsInBatch + index;\n      ivec2 packedTexShape = ivec2(ceil(float(").concat(n,"TexShape[0]) / 2.0), ceil(float(").concat(n,"TexShape[1]) / 2.0));\n      int texR = index / packedTexShape[1];\n      int texC = index - texR * packedTexShape[1];\n      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(packedTexShape[1], packedTexShape[0]); return ").concat(a.texture2D,"(").concat(n,", uv);\n    }\n  ");for(var o=e.shapeInfo.logicalShape,i=o.length,s=e.shapeInfo.texShape,u=[Math.ceil(s[0]/2),Math.ceil(s[1]/2)],c=u[0],l=u[1],f=Math.ceil(o[i-1]/2),d=f*Math.ceil(o[i-2]/2),p="int b, int row, int col",h="b * ".concat(d," + (row / 2) * ").concat(f," + (col / 2)"),m=2;m<i-1;m++)p="int b".concat(m,", ")+p,d*=o[i-m-1],h="b".concat(m," * ").concat(d," + ")+h;return"\n    vec4 ".concat(r,"(").concat(p,") {\n      int index = ").concat(h,";\n      int texR = index / ").concat(l,";\n      int texC = index - texR * ").concat(l,";\n      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(").concat(l,", ").concat(c,");\n      return ").concat(a.texture2D,"(").concat(n,", uv);\n    }\n  ")}(e,t)}}var K6="\nvec2 uvFromFlat(int texNumR, int texNumC, int index) {\n  int texR = index / texNumC;\n  int texC = index - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\nvec2 packedUVfrom1D(int texNumR, int texNumC, int index) {\n  int texelIndex = index / 2;\n  int texR = texelIndex / texNumC;\n  int texC = texelIndex - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",X6="\nvec2 packedUVfrom2D(int texelsInLogicalRow, int texNumR,\n  int texNumC, int row, int col) {\n  int texelIndex = (row / 2) * texelsInLogicalRow + (col / 2);\n  int texR = texelIndex / texNumC;\n  int texC = texelIndex - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",Y6="\nvec2 packedUVfrom3D(int texNumR, int texNumC,\n    int texelsInBatch, int texelsInLogicalRow, int b,\n    int row, int col) {\n  int index = b * texelsInBatch + (row / 2) * texelsInLogicalRow + (col / 2);\n  int texR = index / texNumC;\n  int texC = index - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",$6="\n  float getChannel(vec4 frag, vec2 innerDims) {\n    vec2 modCoord = mod(innerDims, 2.);\n    return modCoord.x == 0. ?\n      (modCoord.y == 0. ? frag.r : frag.g) :\n      (modCoord.y == 0. ? frag.b : frag.a);\n  }\n  float getChannel(vec4 frag, int dim) {\n    float modCoord = mod(float(dim), 2.);\n    return modCoord == 0. ? frag.r : frag.g;\n  }\n";function J6(e){return"offset".concat(e)}function Q6(e,t){var n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1);if(e.shapeInfo.isUniform)return"float ".concat(r,"() {return ").concat(n,";}");var o=(0,a.Z)(e.shapeInfo.texShape,2),i=o[0],s=o[1];if(1===i&&1===s)return"\n      float ".concat(r,"() {\n        return sampleTexture(").concat(n,", halfCR);\n      }\n    ");var u=J6(n);if(t)return"\n    float ".concat(r,"() {\n      vec2 uv = uvFromFlat(").concat(n,"TexShape[0], ").concat(n,"TexShape[1], ").concat(u,");\n      return sampleTexture(").concat(n,", uv);\n    }\n  ");var c=(0,a.Z)(e.shapeInfo.texShape,2),l=c[0],f=c[1];return"\n    float ".concat(r,"() {\n      vec2 uv = uvFromFlat(").concat(l,", ").concat(f,", ").concat(u,");\n      return sampleTexture(").concat(n,", uv);\n    }\n  ")}function e8(e,t){var n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1);if(e.shapeInfo.isUniform)return"\n      float ".concat(r,"(int index) {\n        ").concat(i8(e),"\n      }\n    ");var a=e.shapeInfo.texShape,o=a[0],i=a[1];if(1===i&&1===o)return"\n      float ".concat(r,"(int index) {\n        return sampleTexture(").concat(n,", halfCR);\n      }\n    ");var s=J6(n);return 1===i?t?"\n      float ".concat(r,"(int index) {\n        vec2 uv = vec2(0.5, (float(index + ").concat(s,") + 0.5) / float(").concat(n,"TexShape[0]));\n        return sampleTexture(").concat(n,", uv);\n      }\n    "):"\n      float ".concat(r,"(int index) {\n        vec2 uv = vec2(0.5, (float(index + ").concat(s,") + 0.5) / ").concat(o,".0);\n        return sampleTexture(").concat(n,", uv);\n      }\n    "):1===o?t?"\n      float ".concat(r,"(int index) {\n        vec2 uv = vec2((float(index + ").concat(s,") + 0.5) / float(").concat(n,"TexShape[1]), 0.5);\n        return sampleTexture(").concat(n,", uv);\n      }\n    "):"\n      float ".concat(r,"(int index) {\n        vec2 uv = vec2((float(index + ").concat(s,") + 0.5) / ").concat(i,".0, 0.5);\n        return sampleTexture(").concat(n,", uv);\n      }\n    "):t?"\n    float ".concat(r,"(int index) {\n      vec2 uv = uvFromFlat(").concat(n,"TexShape[0], ").concat(n,"TexShape[1], index + ").concat(s,");\n      return sampleTexture(").concat(n,", uv);\n    }\n  "):"\n    float ".concat(r,"(int index) {\n      vec2 uv = uvFromFlat(").concat(o,", ").concat(i,", index + ").concat(s,");\n      return sampleTexture(").concat(n,", uv);\n    }\n  ")}function t8(e,t){var n=e.shapeInfo.logicalShape,r=e.name,a="get"+r.charAt(0).toUpperCase()+r.slice(1),o=e.shapeInfo.texShape;if(null!=o&&EV.util.arraysEqual(n,o)){if(t)return"\n      float ".concat(a,"(int row, int col) {\n        vec2 uv = (vec2(col, row) + halfCR) / vec2(").concat(r,"TexShape[1], ").concat(r,"TexShape[0]);\n        return sampleTexture(").concat(r,", uv);\n      }\n    ");var i=o[0],s=o[1];return"\n    float ".concat(a,"(int row, int col) {\n      vec2 uv = (vec2(col, row) + halfCR) / vec2(").concat(s,".0, ").concat(i,".0);\n      return sampleTexture(").concat(r,", uv);\n    }\n  ")}var u=EV.util.squeezeShape(n),c=u.newShape,l=u.keptDims,f=c;if(f.length<n.length){var d=f8(e,f);return"\n      ".concat(H6(d,t),"\n      float ").concat(a,"(int row, int col) {\n        return ").concat(a,"(").concat(d8(["row","col"],l),");\n      }\n    ")}if(e.shapeInfo.isUniform)return"\n      float ".concat(a,"(int row, int col) {\n        int index = round(dot(vec2(row, col), vec2(").concat(n[1],", 1)));\n        ").concat(i8(e),"\n      }\n    ");var p=o[0],h=o[1],m=J6(r);return 1===h?t?"\n      float ".concat(a,"(int row, int col) {\n        float index = dot(vec3(row, col, ").concat(m,"), vec3(").concat(r,"Shape[1], 1, 1));\n        vec2 uv = vec2(0.5, (index + 0.5) / float(").concat(r,"TexShape[0]));\n        return sampleTexture(").concat(r,", uv);\n      }\n    "):"\n    float ".concat(a,"(int row, int col) {\n      float index = dot(vec3(row, col, ").concat(m,"), vec3(").concat(n[1],", 1, 1));\n      vec2 uv = vec2(0.5, (index + 0.5) / ").concat(p,".0);\n      return sampleTexture(").concat(r,", uv);\n    }\n  "):1===p?t?"\n      float ".concat(a,"(int row, int col) {\n        float index = dot(vec3(row, col, ").concat(m,"), vec3(").concat(r,"Shape[1], 1, 1));\n        vec2 uv = vec2((index + 0.5) / float(").concat(r,"TexShape[1]), 0.5);\n        return sampleTexture(").concat(r,", uv);\n      }\n    "):"\n    float ".concat(a,"(int row, int col) {\n      float index = dot(vec3(row, col, ").concat(m,"), vec3(").concat(n[1],", 1, 1));\n      vec2 uv = vec2((index + 0.5) / ").concat(h,".0, 0.5);\n      return sampleTexture(").concat(r,", uv);\n    }\n  "):t?"\n      float ".concat(a,"(int row, int col) {\n        // Explicitly use integer operations as dot() only works on floats.\n        int index = row * ").concat(r,"Shape[1] + col + ").concat(m,";\n        vec2 uv = uvFromFlat(").concat(r,"TexShape[0], ").concat(r,"TexShape[1], index);\n        return sampleTexture(").concat(r,", uv);\n      }\n    "):"\n  float ".concat(a,"(int row, int col) {\n    // Explicitly use integer operations as dot() only works on floats.\n    int index = row * ").concat(n[1]," + col + ").concat(m,";\n    vec2 uv = uvFromFlat(").concat(p,", ").concat(h,", index);\n    return sampleTexture(").concat(r,", uv);\n  }\n")}function n8(e,t){var n=e.shapeInfo.logicalShape,r=e.name,a="get"+r.charAt(0).toUpperCase()+r.slice(1),o=n[1]*n[2],i=n[2],s=EV.util.squeezeShape(n),u=s.newShape,c=s.keptDims,l=u;if(l.length<n.length){var f=f8(e,l);return"\n        ".concat(H6(f,t),"\n        float ").concat(a,"(int row, int col, int depth) {\n          return ").concat(a,"(").concat(d8(["row","col","depth"],c),");\n        }\n      ")}if(e.shapeInfo.isUniform)return"\n      float ".concat(a,"(int row, int col, int depth) {\n        int index = round(dot(vec3(row, col, depth),\n                          vec3(").concat(o,", ").concat(i,", 1)));\n        ").concat(i8(e),"\n      }\n    ");var d=e.shapeInfo.texShape,p=d[0],h=d[1],m=e.shapeInfo.flatOffset;if(h===o&&null==m)return t?"\n      float ".concat(a,"(int row, int col, int depth) {\n        int stride1 = ").concat(r,"Shape[2];\n        float texR = float(row);\n        float texC = dot(vec2(col, depth), vec2(stride1, 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(").concat(r,"TexShape[1], ").concat(r,"TexShape[0]);\n        return sampleTexture(").concat(r,", uv);\n      }\n    "):"\n        float ".concat(a,"(int row, int col, int depth) {\n          float texR = float(row);\n          float texC = dot(vec2(col, depth), vec2(").concat(i,", 1));\n          vec2 uv = (vec2(texC, texR) + halfCR) /\n                     vec2(").concat(h,".0, ").concat(p,".0);\n          return sampleTexture(").concat(r,", uv);\n        }\n      ");if(h===i&&null==m)return t?"\n      float ".concat(a,"(int row, int col, int depth) {\n        float texR = dot(vec2(row, col), vec2(").concat(r,"Shape[1], 1));\n        float texC = float(depth);\n        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(").concat(r,"TexShape[1], ").concat(r,"TexShape[0]);\n        return sampleTexture(").concat(r,", uv);\n      }\n    "):"\n    float ".concat(a,"(int row, int col, int depth) {\n      float texR = dot(vec2(row, col), vec2(").concat(n[1],", 1));\n      float texC = float(depth);\n      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(").concat(h,".0, ").concat(p,".0);\n      return sampleTexture(").concat(r,", uv);\n    }\n  ");var v=J6(r);return t?"\n    float ".concat(a,"(int row, int col, int depth) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int stride0 = ").concat(r,"Shape[1] * ").concat(r,"Shape[2];\n      int stride1 = ").concat(r,"Shape[2];\n      int index = row * ").concat(o," + col * ").concat(i," + depth + ").concat(v,";\n      vec2 uv = uvFromFlat(").concat(r,"TexShape[0], ").concat(r,"TexShape[1], index);\n      return sampleTexture(").concat(r,", uv);\n    }\n    "):"\n      float ".concat(a,"(int row, int col, int depth) {\n        // Explicitly use integer operations as dot() only works on floats.\n        int index = row * ").concat(o," + col * ").concat(i," + depth + ").concat(v,";\n        vec2 uv = uvFromFlat(").concat(p,", ").concat(h,", index);\n        return sampleTexture(").concat(r,", uv);\n      }\n  ")}function r8(e,t){var n=e.shapeInfo.logicalShape,r=e.name,a="get"+r.charAt(0).toUpperCase()+r.slice(1),o=n[3],i=n[2]*o,s=n[1]*i,u=EV.util.squeezeShape(n),c=u.newShape,l=u.keptDims;if(c.length<n.length){var f=f8(e,c);return"\n      ".concat(H6(f,t),"\n      float ").concat(a,"(int row, int col, int depth, int depth2) {\n        return ").concat(a,"(").concat(d8(["row","col","depth","depth2"],l),");\n      }\n    ")}if(e.shapeInfo.isUniform)return"\n      float ".concat(a,"(int row, int col, int depth, int depth2) {\n        int index = round(dot(vec4(row, col, depth, depth2),\n                          vec4(").concat(s,", ").concat(i,", ").concat(o,", 1)));\n        ").concat(i8(e),"\n      }\n    ");var d=e.shapeInfo.flatOffset,p=e.shapeInfo.texShape,h=p[0],m=p[1],v="int stride2 = ".concat(r,"Shape[3];"),g="int stride1 = ".concat(r,"Shape[2] * stride2;"),y="int stride0 = ".concat(r,"Shape[1] * stride1;");if(m===s&&null==d)return t?"\n      float ".concat(a,"(int row, int col, int depth, int depth2) {\n        ").concat(v,"\n        ").concat(g,"\n        float texR = float(row);\n        float texC =\n            dot(vec3(col, depth, depth2),\n                vec3(stride1, stride2, 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(").concat(r,"TexShape[1], ").concat(r,"TexShape[0]);\n        return sampleTexture(").concat(r,", uv);\n      }\n    "):"\n      float ".concat(a,"(int row, int col, int depth, int depth2) {\n        float texR = float(row);\n        float texC =\n            dot(vec3(col, depth, depth2),\n                vec3(").concat(i,", ").concat(o,", 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(").concat(m,".0, ").concat(h,".0);\n        return sampleTexture(").concat(r,", uv);\n      }\n    ");if(m===o&&null==d)return t?"\n      float ".concat(a,"(int row, int col, int depth, int depth2) {\n        float texR = dot(vec3(row, col, depth),\n                         vec3(").concat(r,"Shape[1] * ").concat(r,"Shape[2], ").concat(r,"Shape[2], 1));\n        float texC = float(depth2);\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2(").concat(r,"TexShape[1], ").concat(r,"TexShape[0]);\n        return sampleTexture(").concat(r,", uv);\n      }\n    "):"\n      float ".concat(a,"(int row, int col, int depth, int depth2) {\n        float texR = dot(vec3(row, col, depth),\n                         vec3(").concat(n[1]*n[2],", ").concat(n[2],", 1));\n        float texC = float(depth2);\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2(").concat(m,".0, ").concat(h,".0);\n        return sampleTexture(").concat(r,", uv);\n      }\n    ");var b=J6(r);return t?"\n    float ".concat(a,"(int row, int col, int depth, int depth2) {\n      // Explicitly use integer operations as dot() only works on floats.\n      ").concat(v,"\n      ").concat(g,"\n      ").concat(y,"\n      int index = row * stride0 + col * stride1 +\n          depth * stride2 + depth2;\n      vec2 uv = uvFromFlat(").concat(r,"TexShape[0], ").concat(r,"TexShape[1], index + ").concat(b,");\n      return sampleTexture(").concat(r,", uv);\n    }\n  "):"\n    float ".concat(a,"(int row, int col, int depth, int depth2) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * ").concat(s," + col * ").concat(i," +\n          depth * ").concat(o," + depth2;\n      vec2 uv = uvFromFlat(").concat(h,", ").concat(m,", index + ").concat(b,");\n      return sampleTexture(").concat(r,", uv);\n    }\n  ")}function a8(e){var t=e.shapeInfo.logicalShape,n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),a=t[4],o=t[3]*a,i=t[2]*o,s=t[1]*i,u=EV.util.squeezeShape(t),c=u.newShape,l=u.keptDims;if(c.length<t.length){var f=f8(e,c);return"\n      ".concat(H6(f),"\n      float ").concat(r,"(int row, int col, int depth, int depth2, int depth3) {\n        return ").concat(r,"(").concat(d8(["row","col","depth","depth2","depth3"],l),");\n      }\n    ")}if(e.shapeInfo.isUniform)return"\n      float ".concat(r,"(int row, int col, int depth, int depth2, int depth3) {\n        float index = dot(\n          vec4(row, col, depth, depth2),\n          vec4(").concat(s,", ").concat(i,", ").concat(o,", ").concat(a,")) +\n          depth3;\n        ").concat(i8(e),"\n      }\n    ");var d=e.shapeInfo.flatOffset,p=e.shapeInfo.texShape,h=p[0],m=p[1];if(m===s&&null==d)return"\n      float ".concat(r,"(int row, int col, int depth, int depth2, int depth3) {\n        int texR = row;\n        float texC = dot(vec4(col, depth, depth2, depth3),\n                         vec4(").concat(i,", ").concat(o,", ").concat(a,", 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(").concat(m,".0, ").concat(h,".0);\n        return sampleTexture(").concat(n,", uv);\n      }\n    ");if(m===a&&null==d)return"\n      float ".concat(r,"(int row, int col, int depth, int depth2, int depth3) {\n        float texR = dot(\n          vec4(row, col, depth, depth2),\n          vec4(").concat(t[1]*t[2]*t[3],",\n               ").concat(t[2]*t[3],", ").concat(t[3],", 1));\n        int texC = depth3;\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2(").concat(m,".0, ").concat(h,".0);\n        return sampleTexture(").concat(n,", uv);\n      }\n    ");var v=J6(n);return"\n    float ".concat(r,"(int row, int col, int depth, int depth2, int depth3) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * ").concat(s," + col * ").concat(i," + depth * ").concat(o," +\n          depth2 * ").concat(a," + depth3 + ").concat(v,";\n      vec2 uv = uvFromFlat(").concat(h,", ").concat(m,", index);\n      return sampleTexture(").concat(n,", uv);\n    }\n  ")}function o8(e){var t=e.shapeInfo.logicalShape,n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),a=EV.util.squeezeShape(t),o=a.newShape,i=a.keptDims;if(o.length<t.length){var s=f8(e,o);return"\n      ".concat(H6(s),"\n      float ").concat(r,"(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        return ").concat(r,"(").concat(d8(["row","col","depth","depth2","depth3","depth4"],i),");\n      }\n    ")}var u=t[5],c=t[4]*u,l=t[3]*c,f=t[2]*l,d=t[1]*f;if(e.shapeInfo.isUniform)return"\n      float ".concat(r,"(int row, int col, int depth,\n                  int depth2, int depth3, int depth4) {\n        int index = round(dot(\n          vec4(row, col, depth, depth2),\n          vec4(").concat(d,", ").concat(f,", ").concat(l,", ").concat(c,")) +\n          dot(\n            vec2(depth3, depth4),\n            vec2(").concat(u,", 1)));\n        ").concat(i8(e),"\n      }\n    ");var p=e.shapeInfo.flatOffset,h=e.shapeInfo.texShape,m=h[0],v=h[1];if(v===d&&null==p)return"\n      float ".concat(r,"(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        int texR = row;\n        float texC = dot(vec4(col, depth, depth2, depth3),\n          vec4(").concat(f,", ").concat(l,", ").concat(c,", ").concat(u,")) +\n               float(depth4);\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(").concat(v,".0, ").concat(m,".0);\n        return sampleTexture(").concat(n,", uv);\n      }\n    ");if(v===u&&null==p)return"\n      float ".concat(r,"(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        float texR = dot(vec4(row, col, depth, depth2),\n          vec4(").concat(t[1]*t[2]*t[3]*t[4],",\n               ").concat(t[2]*t[3]*t[4],",\n               ").concat(t[3]*t[4],",\n               ").concat(t[4],")) + float(depth3);\n        int texC = depth4;\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2(").concat(v,".0, ").concat(m,".0);\n        return sampleTexture(").concat(n,", uv);\n      }\n    ");var g=J6(n);return"\n    float ".concat(r,"(int row, int col, int depth,\n                  int depth2, int depth3, int depth4) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * ").concat(d," + col * ").concat(f," + depth * ").concat(l," +\n          depth2 * ").concat(c," + depth3 * ").concat(u," + depth4 + ").concat(g,";\n      vec2 uv = uvFromFlat(").concat(m,", ").concat(v,", index);\n      return sampleTexture(").concat(n,", uv);\n    }\n  ")}function i8(e){var t=e.name,n=EV.util.sizeFromShape(e.shapeInfo.logicalShape);return n<2?"return ".concat(t,";"):"\n    for (int i = 0; i < ".concat(n,"; i++) {\n      if (i == index) {\n        return ").concat(t,"[i];\n      }\n    }\n  ")}function s8(e,t){var n,r=e.name,a=r.charAt(0).toUpperCase()+r.slice(1),o="get"+a+"AtOutCoords",i=e.shapeInfo.logicalShape.length,s=t.logicalShape.length,u=q6(e.shapeInfo.logicalShape,t.logicalShape),c=c8(s),l=s-i,f=["x","y","z","w","u","v"];n=0===i?"":s<2&&u.length>=1?"coords = 0;":u.map((function(e){return"coords.".concat(f[e+l]," = 0;")})).join("\n");var d="";d=s<2&&i>0?"coords":e.shapeInfo.logicalShape.map((function(e,t){return"coords.".concat(f[t+l])})).join(", ");var p="return outputValue;",h=1===EV.util.sizeFromShape(e.shapeInfo.logicalShape),m=1===EV.util.sizeFromShape(t.logicalShape);if(1!==i||h||m){if(h&&!m)p=1===s?"\n        return vec4(outputValue.x, outputValue.x, 0., 0.);\n      ":"\n        return vec4(outputValue.x);\n      ";else if(u.length){var v=i-2,g=i-1;u.indexOf(v)>-1&&u.indexOf(g)>-1?p="return vec4(outputValue.x);":u.indexOf(v)>-1?p="return vec4(outputValue.x, outputValue.y, outputValue.x, outputValue.y);":u.indexOf(g)>-1&&(p="return vec4(outputValue.xx, outputValue.zz);")}}else p="\n      return vec4(outputValue.xy, outputValue.xy);\n    ";return"\n    vec4 ".concat(o,"() {\n      ").concat(c," coords = getOutputCoords();\n      ").concat(n,"\n      vec4 outputValue = get").concat(a,"(").concat(d,");\n      ").concat(p,"\n    }\n  ")}function u8(e,t){var n=e.name,r=n.charAt(0).toUpperCase()+n.slice(1),a="get"+r+"AtOutCoords",o=t.texShape,i=e.shapeInfo.texShape,s=e.shapeInfo.logicalShape.length,u=t.logicalShape.length;if(!e.shapeInfo.isUniform&&s===u&&null==e.shapeInfo.flatOffset&&EV.util.arraysEqual(i,o))return"\n      float ".concat(a,"() {\n        return sampleTexture(").concat(n,", resultUV);\n      }\n    ");var c,l=c8(u),f=q6(e.shapeInfo.logicalShape,t.logicalShape),d=u-s,p=["x","y","z","w","u","v"];c=0===s?"":u<2&&f.length>=1?"coords = 0;":f.map((function(e){return"coords.".concat(p[e+d]," = 0;")})).join("\n");var h="";return h=u<2&&s>0?"coords":e.shapeInfo.logicalShape.map((function(e,t){return"coords.".concat(p[t+d])})).join(", "),"\n    float ".concat(a,"() {\n      ").concat(l," coords = getOutputCoords();\n      ").concat(c,"\n      return get").concat(r,"(").concat(h,");\n    }\n  ")}function c8(e){if(e<=1)return"int";if(2===e)return"ivec2";if(3===e)return"ivec3";if(4===e)return"ivec4";if(5===e)return"ivec5";if(6===e)return"ivec6";throw Error("GPU for rank ".concat(e," is not yet supported"))}function l8(e,t,n){var r=EV.util.squeezeShape(t),a=r.newShape,o=r.keptDims,i=t.length,s=e&&3===i&&1===t[0],u=s?t.slice(1):a,c=!e&&i>1&&!EV.util.arraysEqual(t,n)&&a.length<i||s;return{useSqueezeShape:c,uniformShape:c?u:t,keptDims:o}}function f8(e,t){var n=JSON.parse(JSON.stringify(e));return n.shapeInfo.logicalShape=t,n}function d8(e,t){return t.map((function(t){return e[t]})).join(", ")}function p8(e,t,n,r){var a=n.map((function(e,n){var r={logicalShape:e.shape,texShape:e.isUniform?null:e.texData.texShape,isUniform:e.isUniform,isPacked:!e.isUniform&&e.texData.isPacked,flatOffset:null};return null!=e.texData&&null!=e.texData.slice&&e.texData.slice.flatOffset>0&&(r.flatOffset=e.texData.slice.flatOffset),{name:t.variableNames[n],shapeInfo:r}})),o=a.map((function(e){return e.shapeInfo})),i={logicalShape:r.shape,texShape:r.texData.texShape,isUniform:!1,isPacked:r.texData.isPacked,flatOffset:null},s=W6(a,i,t),u=p6(e.gl,s),c=e.createProgram(u),l=null,f=e.getUniformLocation(c,"NAN",!1);1===(0,EV.env)().getNumber("WEBGL_VERSION")&&(l=e.getUniformLocation(c,"INFINITY",!1));for(var d,p,h,m=!1,v={},g={},y={},b=0;b<t.variableNames.length;b++){var x=t.variableNames[b];v[x]=e.getUniformLocation(c,x,m),v["offset".concat(x)]=e.getUniformLocation(c,"offset".concat(x),m),t.enableShapeUniforms&&(g["".concat(x,"Shape")]=e.getUniformLocation(c,"".concat(x,"Shape"),m),y["".concat(x,"TexShape")]=e.getUniformLocation(c,"".concat(x,"TexShape"),m))}t.enableShapeUniforms&&(d=e.getUniformLocation(c,"outShape",m),h=e.getUniformLocation(c,"outShapeStrides",m),p=e.getUniformLocation(c,"outTexShape",m));var w=[];return t.customUniforms&&t.customUniforms.forEach((function(t,n){w[n]=e.getUniformLocation(c,t.name,m)})),{program:t,fragmentShader:u,source:s,webGLProgram:c,uniformLocations:v,customUniformLocations:w,inShapeInfos:o,outShapeInfo:i,infLoc:l,nanLoc:f,inShapesLocations:g,inTexShapesLocations:y,outShapeLocation:d,outShapeStridesLocation:h,outTexShapeLocation:p}}function h8(e,t){if(e.length!==t.length)throw Error("Binary was compiled with ".concat(e.length," inputs, but ")+"was executed with ".concat(t.length," inputs"));e.forEach((function(e,n){var r=e.logicalShape,a=t[n],o=a.shape;if(!EV.util.arraysEqual(r,o))throw Error("Binary was compiled with different shapes than "+"the current args. Shapes ".concat(r," and ").concat(o," must match"));if(!e.isUniform||!a.isUniform){var i=e.texShape,s=a.isUniform?null:a.texData.texShape;if(!EV.util.arraysEqual(i,s))throw Error("Binary was compiled with different texture shapes than the"+" current args. Shape ".concat(i," and ").concat(s," must match"))}}))}function m8(e,t,n,r,a){t.program.enableShapeUniforms||(h8(t.inShapeInfos,n),h8([t.outShapeInfo],[r]));var o=r.texData.texture,i=r.texData.texShape;r.texData.isPacked?e.setOutputPackedMatrixTexture(o.texture,i[0],i[1]):e.setOutputMatrixTexture(o.texture,i[0],i[1]),e.setProgram(t.webGLProgram),1===(0,EV.env)().getNumber("WEBGL_VERSION")&&null!==t.infLoc&&e.gl.uniform1f(t.infLoc,1/0),null!==t.nanLoc&&e.gl.uniform1f(t.nanLoc,NaN),n.forEach((function(n,r){var a=t.program.variableNames[r],o=t.uniformLocations[a],i=t.uniformLocations["offset".concat(a)],s=t.inShapesLocations["".concat(a,"Shape")],u=t.inTexShapesLocations["".concat(a,"TexShape")];if(s){var c=l8(t.program.packedInputs,n.shape,n.texData.texShape).uniformShape;switch(c.length){case 1:e.gl.uniform1iv(s,new Int32Array(c));break;case 2:e.gl.uniform2iv(s,new Int32Array(c));break;case 3:e.gl.uniform3iv(s,new Int32Array(c));break;case 4:e.gl.uniform4iv(s,new Int32Array(c))}}if(u&&e.gl.uniform2i(u,n.texData.texShape[0],n.texData.texShape[1]),null!=o)if(n.isUniform)if(EV.util.sizeFromShape(n.shape)<2)e.gl.uniform1f(o,n.uniformValues[0]);else{var l=n.uniformValues;l instanceof Float32Array||(l=new Float32Array(l)),e.gl.uniform1fv(o,l)}else null!=n.texData.slice&&null!=i&&e.gl.uniform1i(i,n.texData.slice.flatOffset),e.setInputMatrixTexture(n.texData.texture.texture,o,r)}));var s=t.outShapeLocation;if(s)switch(r.shape.length){case 1:e.gl.uniform1iv(s,new Int32Array(r.shape));break;case 2:e.gl.uniform2iv(s,new Int32Array(r.shape));break;case 3:e.gl.uniform3iv(s,new Int32Array(r.shape));break;case 4:e.gl.uniform4iv(s,new Int32Array(r.shape))}if(t.outShapeStridesLocation){var u=EV.util.computeStrides(r.shape);switch(r.shape.length){case 2:e.gl.uniform1iv(t.outShapeStridesLocation,new Int32Array(u));break;case 3:e.gl.uniform2iv(t.outShapeStridesLocation,new Int32Array(u));break;case 4:e.gl.uniform3iv(t.outShapeStridesLocation,new Int32Array(u))}}t.outTexShapeLocation&&e.gl.uniform2i(t.outTexShapeLocation,r.texData.texShape[0],r.texData.texShape[1]),t.program.customUniforms&&a&&t.program.customUniforms.forEach((function(n,r){var o=t.customUniformLocations[r],i=a[r];if("float"===n.type)e.gl.uniform1fv(o,i);else if("vec2"===n.type)e.gl.uniform2fv(o,i);else if("vec3"===n.type)e.gl.uniform3fv(o,i);else if("vec4"===n.type)e.gl.uniform4fv(o,i);else if("int"===n.type)e.gl.uniform1iv(o,i);else if("ivec2"===n.type)e.gl.uniform2iv(o,i);else if("ivec3"===n.type)e.gl.uniform3iv(o,i);else{if("ivec4"!==n.type)throw Error("uniform type ".concat(n.type," is not supported yet."));e.gl.uniform4iv(o,i)}})),e.executeProgram()}function v8(e,t,n){var r="";t.concat(n).forEach((function(t){var a=null!=t.texData&&null!=t.texData.slice&&t.texData.slice.flatOffset>0;if(e.enableShapeUniforms&&!t.isUniform){var o=t.texData.texShape,i=l8(e.packedInputs,t.shape,o),s=i.useSqueezeShape,u=i.uniformShape,c=i.keptDims,l="",f="",d="";if(1===u.length&&e.packedInputs){var p=[Math.ceil(o[0]/2),Math.ceil(o[1]/2)];l="".concat(p[0]>1,"_").concat(p[1]>1)}else if(2!==u.length||e.packedInputs){if(u.length>2&&!e.packedInputs){var h=EV.util.computeStrides(u);d="".concat(h[0]===o[1],"_").concat(h[h.length-1]===o[1])}}else f="".concat(u[0]>1,"_").concat(u[1]>1);var m=t.shape.length,v=2===u.length&&EV.util.arraysEqual(t.shape,o),g=1===EV.util.sizeFromShape(t.shape),y=EV.backend_util.getBroadcastDims(t.shape,n.shape),b=!e.packedInputs&&m===n.shape.length&&EV.util.arraysEqual(o,n.texData.texShape),x=e.packedInputs||u.length>2?"":"".concat(o[0]>1,"_").concat(o[1]>1);r+="".concat(m,"_").concat(b,"_").concat(s?c:"","_").concat(u.length,"_").concat(g,"_").concat(y,"_").concat(v,"_").concat(l,"_").concat(f,"_").concat(d,"_").concat(x,"_").concat(a)}else{var w=t.isUniform?"uniform":t.texData.texShape;r+="".concat(t.shape,"_").concat(w,"_").concat(a)}}));var a=e.userCode,o=e.constructor.name;return o+="_"+r+"_"+a+"".concat((0,EV.env)().getNumber("WEBGL_VERSION"))}function g8(e){return(0,EV.env)().getBool("WEBGL_USE_SHAPES_UNIFORMS")&&e<=4}var y8=(0,d.Z)((function e(t){(0,f.Z)(this,e),this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outPackingScheme=e6.DENSE,this.customUniforms=[{name:"texShape",type:"ivec2"}];var n=L6();this.outputShape=t,this.enableShapeUniforms=g8(this.outputShape.length),this.userCode="\n      ivec3 outCoordsFromFlatIndex(int index) {\n        ".concat(this.enableShapeUniforms?z6(["r","c","d"],t):B6(["r","c","d"],t),"\n        return ivec3(r, c, d);\n      }\n\n      void main() {\n        ivec2 resTexRC = ivec2(resultUV.yx * vec2(texShape[0], texShape[1]));\n        int index = 4 * (resTexRC.x * texShape[1] + resTexRC.y);\n\n        vec4 result = vec4(0.);\n\n        for (int i=0; i<4; i++) {\n          int flatIndex = index + i;\n          ivec3 rc = outCoordsFromFlatIndex(flatIndex);\n          result[i] = getA(rc.x, rc.y, rc.z);\n        }\n\n        ").concat(n.output," = result;\n      }\n    ")})),b8=(0,d.Z)((function e(t){(0,f.Z)(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outPackingScheme=e6.DENSE,this.customUniforms=[{name:"texShape",type:"ivec2"}];var n=L6();this.outputShape=t,this.enableShapeUniforms=g8(this.outputShape.length),this.userCode="\n      ivec3 outCoordsFromFlatIndex(int index) {\n        ".concat(this.enableShapeUniforms?z6(["r","c","d"],t):B6(["r","c","d"],t),"\n        return ivec3(r, c, d);\n      }\n\n      void main() {\n        ivec2 resTexRC = ivec2(resultUV.yx * vec2(texShape[0], texShape[1]));\n        int index = 4 * (resTexRC.x * texShape[1] + resTexRC.y);\n\n        vec4 result = vec4(0.);\n\n        for (int i=0; i<4; i++) {\n          int flatIndex = index + i;\n          ivec3 rc = outCoordsFromFlatIndex(flatIndex);\n          result[i] = getChannel(getA(rc.x, rc.y, rc.z), vec2(rc.y, rc.z));\n        }\n\n        ").concat(n.output," = result;\n      }\n    ")})),x8=(0,d.Z)((function e(t){(0,f.Z)(this,e),this.variableNames=["A"],this.outTexUsage=t6.DOWNLOAD;var n=L6();this.outputShape=t,this.userCode="\n      ".concat(U6,"\n\n      void main() {\n        float x = getAAtOutCoords();\n        ").concat(n.output," = encode_float(x);\n      }\n    ")})),w8=(0,d.Z)((function e(t){(0,f.Z)(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outTexUsage=t6.DOWNLOAD;var n=L6();this.outputShape=t,this.userCode="\n      ".concat(U6,"\n\n      void main() {\n        ivec3 coords = getOutputCoords();\n        float x = getChannel(getAAtOutCoords(), vec2(coords.y, coords.z));\n        ").concat(n.output," = encode_float(x);\n      }\n    ")})),k8=(0,d.Z)((function e(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];(0,f.Z)(this,e),this.variableNames=["A"],this.customUniforms=[{name:"texShape",type:"ivec2"}];var r=L6();this.outputShape=t,this.enableShapeUniforms=g8(this.outputShape.length);var a="result";n&&(a="floor(result * 255. + 0.5)"),this.userCode="\n      ".concat(this.enableShapeUniforms?"\n  int getFlatIndex(ivec3 coords) {\n    return coords.x * outShapeStrides[0] + coords.y * outShapeStrides[1] + coords.z;\n  }\n":V6(t),"\n\n      void main() {\n        ivec3 coords = getOutputCoords();\n\n        int flatIndex = getFlatIndex(coords);\n        int offset = imod(flatIndex, 4);\n\n        flatIndex = idiv(flatIndex, 4, 1.);\n\n        int r = flatIndex / texShape[1];\n        int c = imod(flatIndex, texShape[1]);\n        vec2 uv = (vec2(c, r) + halfCR) / vec2(texShape[1], texShape[0]);\n        vec4 values = ").concat(r.texture2D,"(A, uv);\n\n        float result;\n\n        if(offset == 0) {\n          result = values[0];\n        } else if(offset == 1) {\n          result = values[1];\n        } else if(offset == 2) {\n          result = values[2];\n        } else {\n          result = values[3];\n        }\n\n        ").concat(r.output," = vec4(").concat(a,", 0., 0., 0.);\n      }\n    ")})),S8=(0,d.Z)((function e(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];(0,f.Z)(this,e),this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.customUniforms=[{name:"texShape",type:"ivec2"}];var r=L6();this.outputShape=t,this.enableShapeUniforms=g8(this.outputShape.length);var a="",o="result";n&&(o="floor(result * 255. + 0.5)");for(var i=0;i<=1;i++)for(var s=0;s<=1;s++){var u=2*i+s;a+="\n          localCoords = coords;\n          if(localCoords[2] + ".concat(s," < ").concat(this.enableShapeUniforms?"outShape[2]":"".concat(t[2]),") {\n          localCoords[2] += ").concat(s,";\n          if (localCoords[1] + ").concat(i," < ").concat(this.enableShapeUniforms?"outShape[1]":"".concat(t[1]),") {\n            localCoords[1] += ").concat(i,";\n\n            flatIndex = getFlatIndex(localCoords);\n            offset = imod(flatIndex, 4);\n\n            flatIndex = idiv(flatIndex, 4, 1.);\n\n            int r = flatIndex / texShape[1];\n            int c = imod(flatIndex, texShape[1]);\n            vec2 uv = (vec2(c, r) + halfCR) / vec2(texShape[1], texShape[0]);\n            values = ").concat(r.texture2D,"(A, uv);\n\n            if (offset == 0) {\n              result[").concat(u,"] = values[0];\n            } else if (offset == 1) {\n              result[").concat(u,"] = values[1];\n            } else if (offset == 2) {\n              result[").concat(u,"] = values[2];\n            } else {\n              result[").concat(u,"] = values[3];\n            }\n          }\n        }\n        ")}this.userCode="\n        ".concat(this.enableShapeUniforms?"\n  int getFlatIndex(ivec3 coords) {\n    return coords.x * outShapeStrides[0] + coords.y * outShapeStrides[1] + coords.z;\n  }\n":V6(t),"\n\n        void main() {\n          ivec3 coords = getOutputCoords();\n\n          vec4 result = vec4(0.);\n          int flatIndex, r, c, offset;\n          ivec3 localCoords;\n          vec2 uv;\n          vec4 values;\n\n          ").concat(a,"\n\n          ").concat(r.output," = ").concat(o,";\n        }\n    ")}));function _8(e){var t=L6();return function(e,t){var n=N6(e,(function(){return e.createShader(e.VERTEX_SHADER)}),"Unable to create vertex WebGLShader.");if(l6(e,(function(){return e.shaderSource(n,t)})),l6(e,(function(){return e.compileShader(n)})),!1===e.getShaderParameter(n,e.COMPILE_STATUS))throw console.log(e.getShaderInfoLog(n)),new Error("Failed to compile vertex shader.");return n}(e,"".concat(t.version,"\n    precision highp float;\n    ").concat(t.attribute," vec3 clipSpacePos;\n    ").concat(t.attribute," vec2 uv;\n    ").concat(t.varyingVs," vec2 resultUV;\n\n    void main() {\n      gl_Position = vec4(clipSpacePos, 1);\n      resultUV = uv;\n    }"))}function N8(e){return function(e,t){var n=N6(e,(function(){return e.createBuffer()}),"Unable to create WebGLBuffer");return l6(e,(function(){return e.bindBuffer(e.ARRAY_BUFFER,n)})),l6(e,(function(){return e.bufferData(e.ARRAY_BUFFER,t,e.STATIC_DRAW)})),n}(e,new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0]))}function E8(e){return function(e,t){var n=N6(e,(function(){return e.createBuffer()}),"Unable to create WebGLBuffer");return l6(e,(function(){return e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,n)})),l6(e,(function(){return e.bufferData(e.ELEMENT_ARRAY_BUFFER,t,e.STATIC_DRAW)})),n}(e,new Uint16Array([0,1,2,2,1,3]))}function C8(e,t,n,r,a,o){!function(e,t){var n=(0,EV.env)().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(e<=0||t<=0){var r="[".concat(e,"x").concat(t,"]");throw new Error("Requested texture size "+r+" is invalid.")}if(e>n||t>n){var a="[".concat(e,"x").concat(t,"]"),o="[".concat(n,"x").concat(n,"]");throw new Error("Requested texture size "+a+" greater than WebGL maximum on this browser / GPU "+o+".")}}(t,n);var i=function(e){return N6(e,(function(){return e.createTexture()}),"Unable to create WebGLTexture.")}(e),s=e.TEXTURE_2D;return l6(e,(function(){return e.bindTexture(s,i)})),l6(e,(function(){return e.texParameteri(s,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE)})),l6(e,(function(){return e.texParameteri(s,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE)})),l6(e,(function(){return e.texParameteri(s,e.TEXTURE_MIN_FILTER,e.NEAREST)})),l6(e,(function(){return e.texParameteri(s,e.TEXTURE_MAG_FILTER,e.NEAREST)})),1===(0,EV.env)().getNumber("WEBGL_VERSION")?l6(e,(function(){return e.texImage2D(s,0,r,t,n,0,a,o,null)})):l6(e,(function(){return e.texStorage2D(s,1,r,t,n)})),l6(e,(function(){return e.bindTexture(e.TEXTURE_2D,null)})),{texture:i,texShape:[n,t]}}function T8(e){return e.internalFormatFloat}function I8(e){return e.internalFormatHalfFloat}function O8(e){return e.downloadTextureFormat}function A8(e){return e.internalFormatPackedFloat}function D8(e){return e.internalFormatPackedHalfFloat}function M8(e,t,n,r,o,i,s,u){var c=e,l=new Float32Array(function(e,t){var n=u6(e,t),r=(0,a.Z)(n,2);return r[0]*r[1]*4}(i,s));return c.bindBuffer(c.PIXEL_PACK_BUFFER,t),c.getBufferSubData(c.PIXEL_PACK_BUFFER,0,l),c.bindBuffer(c.PIXEL_PACK_BUFFER,null),l}var R8=function(){function e(t){(0,f.Z)(this,e),this.outputTexture=null,this.program=null,this.disposed=!1,this.vertexAttrsAreBound=!1,this.itemsToPoll=[];var n=(0,EV.env)().getNumber("WEBGL_VERSION");null!=t?(this.gl=t,function(e,t){r6[e]=t}(n,t)):this.gl=o6(n);var r="WEBGL_color_buffer_float",a="EXT_color_buffer_half_float";if(1===(0,EV.env)().getNumber("WEBGL_VERSION")){var o="OES_texture_half_float";if(this.textureFloatExtension=d6(this.gl,"OES_texture_float"),D6(this.gl,o))this.textureHalfFloatExtension=d6(this.gl,o);else if((0,EV.env)().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support half float textures, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.");if(this.colorBufferFloatExtension=this.gl.getExtension(r),D6(this.gl,a))this.colorBufferHalfFloatExtension=d6(this.gl,a);else if((0,EV.env)().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support color renderable half floats, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.")}else if(r="EXT_color_buffer_float",D6(this.gl,r))this.colorBufferFloatExtension=this.gl.getExtension(r);else{if(!D6(this.gl,a))throw new Error("GL context does not support color renderable floats");this.colorBufferHalfFloatExtension=this.gl.getExtension(a)}this.vertexBuffer=N8(this.gl),this.indexBuffer=E8(this.gl),this.framebuffer=function(e){return N6(e,(function(){return e.createFramebuffer()}),"Unable to create WebGLFramebuffer.")}(this.gl),this.textureConfig=c6(this.gl,this.textureHalfFloatExtension)}return(0,d.Z)(e,[{key:"debug",get:function(){return(0,EV.env)().getBool("DEBUG")}},{key:"dispose",value:function(){var e=this;if(!this.disposed){null!=this.program&&console.warn("Disposing a GPGPUContext that still has a bound WebGLProgram. This is probably a resource leak, delete the program with GPGPUContext.deleteProgram before disposing."),null!=this.outputTexture&&console.warn("Disposing a GPGPUContext that still has a bound output matrix texture.  This is probably a resource leak, delete the output matrix texture with GPGPUContext.deleteMatrixTexture before disposing.");var t=this.gl;l6(t,(function(){return t.finish()})),l6(t,(function(){return t.bindFramebuffer(t.FRAMEBUFFER,null)})),l6(t,(function(){return t.deleteFramebuffer(e.framebuffer)})),l6(t,(function(){return t.bindBuffer(t.ARRAY_BUFFER,null)})),l6(t,(function(){return t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,null)})),l6(t,(function(){return t.deleteBuffer(e.indexBuffer)})),this.disposed=!0}}},{key:"createFloat32MatrixTexture",value:function(e,t){return this.throwIfDisposed(),function(e,t,n,r){var o=i6(t,n),i=(0,a.Z)(o,2);return C8(e,i[0],i[1],T8(r),r.textureFormatFloat,e.FLOAT)}(this.gl,e,t,this.textureConfig)}},{key:"createFloat16MatrixTexture",value:function(e,t){return this.throwIfDisposed(),function(e,t,n,r){var o=i6(t,n),i=(0,a.Z)(o,2);return C8(e,i[0],i[1],I8(r),r.textureFormatFloat,r.textureTypeHalfFloat)}(this.gl,e,t,this.textureConfig)}},{key:"createUnsignedBytesMatrixTexture",value:function(e,t){return this.throwIfDisposed(),function(e,t,n,r){var o=i6(t,n),i=(0,a.Z)(o,2);return C8(e,i[0],i[1],O8(r),e.RGBA,e.UNSIGNED_BYTE)}(this.gl,e,t,this.textureConfig)}},{key:"uploadPixelDataToTexture",value:function(e,t){this.throwIfDisposed(),function(e,t,n){l6(e,(function(){return e.bindTexture(e.TEXTURE_2D,t)})),n.data instanceof Uint8Array?2===(0,EV.env)().getNumber("WEBGL_VERSION")?l6(e,(function(){return e.texSubImage2D(e.TEXTURE_2D,0,0,0,n.width,n.height,e.RGBA,e.UNSIGNED_BYTE,n.data)})):l6(e,(function(){return e.texImage2D(e.TEXTURE_2D,0,e.RGBA,n.width,n.height,0,e.RGBA,e.UNSIGNED_BYTE,n.data)})):2===(0,EV.env)().getNumber("WEBGL_VERSION")?l6(e,(function(){return e.texSubImage2D(e.TEXTURE_2D,0,0,0,e.RGBA,e.UNSIGNED_BYTE,n)})):l6(e,(function(){return e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,n)})),l6(e,(function(){return e.bindTexture(e.TEXTURE_2D,null)}))}(this.gl,e,t)}},{key:"uploadDenseMatrixToTexture",value:function(e,t,n,r){this.throwIfDisposed(),function(e,t,n,r,a,o){var i,s,u;l6(e,(function(){return e.bindTexture(e.TEXTURE_2D,t)})),a instanceof Uint8Array?(i=new Uint8Array(n*r*4),s=e.UNSIGNED_BYTE,u=e.RGBA):(i=new Float32Array(n*r*4),s=e.FLOAT,u=o.internalFormatPackedFloat),i.set(a),2===(0,EV.env)().getNumber("WEBGL_VERSION")?l6(e,(function(){return e.texSubImage2D(e.TEXTURE_2D,0,0,0,n,r,e.RGBA,s,i)})):l6(e,(function(){return e.texImage2D(e.TEXTURE_2D,0,u,n,r,0,e.RGBA,s,i)})),l6(e,(function(){return e.bindTexture(e.TEXTURE_2D,null)}))}(this.gl,e,t,n,r,this.textureConfig)}},{key:"createFloat16PackedMatrixTexture",value:function(e,t){return this.throwIfDisposed(),function(e,t,n,r){var o=u6(t,n),i=(0,a.Z)(o,2);return C8(e,i[0],i[1],D8(r),e.RGBA,r.textureTypeHalfFloat)}(this.gl,e,t,this.textureConfig)}},{key:"createPackedMatrixTexture",value:function(e,t){return this.throwIfDisposed(),function(e,t,n,r){var o=u6(t,n),i=(0,a.Z)(o,2);return C8(e,i[0],i[1],A8(r),e.RGBA,e.FLOAT)}(this.gl,e,t,this.textureConfig)}},{key:"deleteMatrixTexture",value:function(e){var t=this;this.throwIfDisposed(),this.outputTexture===e&&(S6(this.gl,this.framebuffer),this.outputTexture=null),l6(this.gl,(function(){return t.gl.deleteTexture(e)}))}},{key:"downloadByteEncodedFloatMatrixFromOutputTexture",value:function(e,t,n){var r=this;return this.downloadMatrixDriver(e,(function(){return function(e,t,n,r){var o=i6(t,n),i=(0,a.Z)(o,2),s=i[0],u=i[1],c=new Uint8Array(t*n*4);return l6(e,(function(){return e.readPixels(0,0,s,u,r.downloadTextureFormat,e.UNSIGNED_BYTE,c)})),new Float32Array(c.buffer)}(r.gl,t,n,r.textureConfig)}))}},{key:"downloadPackedMatrixFromBuffer",value:function(e,t,n,r,a,o){return M8(this.gl,e,0,0,0,a,o,this.textureConfig)}},{key:"downloadFloat32MatrixFromBuffer",value:function(e,t){return function(e,t,n){var r=e,a=new Float32Array(n);return r.bindBuffer(r.PIXEL_PACK_BUFFER,t),r.getBufferSubData(r.PIXEL_PACK_BUFFER,0,a),r.bindBuffer(r.PIXEL_PACK_BUFFER,null),a}(this.gl,e,t)}},{key:"createBufferFromTexture",value:function(e,t,n){this.bindTextureToFrameBuffer(e);var r=function(e,t,n,r){var a=e.createBuffer();l6(e,(function(){return e.bindBuffer(e.PIXEL_PACK_BUFFER,a)}));var o=16*t*n;return l6(e,(function(){return e.bufferData(e.PIXEL_PACK_BUFFER,o,e.STREAM_READ)})),l6(e,(function(){return e.readPixels(0,0,n,t,e.RGBA,e.FLOAT,0)})),l6(e,(function(){return e.bindBuffer(e.PIXEL_PACK_BUFFER,null)})),a}(this.gl,t,n,this.textureConfig);return this.unbindTextureToFrameBuffer(),r}},{key:"createAndWaitForFence",value:function(){var e=this.createFence(this.gl);return this.pollFence(e)}},{key:"createFence",value:function(e){var t,n,r=this;if((0,EV.env)().getBool("WEBGL_FENCE_API_ENABLED")){var a=e,o=a.fenceSync(a.SYNC_GPU_COMMANDS_COMPLETE,0);e.flush(),n=function(){var e=a.clientWaitSync(o,0,0);return e===a.ALREADY_SIGNALED||e===a.CONDITION_SATISFIED},t=o}else(0,EV.env)().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?(t=this.beginQuery(),this.endQuery(),n=function(){return r.isQueryAvailable(t,(0,EV.env)().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))}):n=function(){return!0};return{query:t,isFencePassed:n}}},{key:"downloadMatrixFromPackedTexture",value:function(e,t,n){var r=this;return this.downloadMatrixDriver(e,(function(){return function(e,t,n){var r=new Float32Array(t*n*4);return l6(e,(function(){return e.readPixels(0,0,n,t,e.RGBA,e.FLOAT,r)})),r}(r.gl,t,n)}))}},{key:"createProgram",value:function(e){var t=this;this.throwIfDisposed();var n=this.gl;null==this.vertexShader&&(this.vertexShader=_8(n));var r=function(e){return N6(e,(function(){return e.createProgram()}),"Unable to create WebGLProgram.")}(n);return l6(n,(function(){return n.attachShader(r,t.vertexShader)})),l6(n,(function(){return n.attachShader(r,e)})),function(e,t){if(l6(e,(function(){return e.linkProgram(t)})),!1===e.getProgramParameter(t,e.LINK_STATUS))throw console.log(e.getProgramInfoLog(t)),new Error("Failed to link vertex and fragment shaders.")}(n,r),this.debug&&g6(n,r),this.vertexAttrsAreBound||(this.setProgram(r),this.vertexAttrsAreBound=function(e,t,n){return l6(e,(function(){return e.bindBuffer(e.ARRAY_BUFFER,n)})),y6(e,t,"clipSpacePos",n,3,20,0)&&y6(e,t,"uv",n,2,20,12)}(n,this.program,this.vertexBuffer)),r}},{key:"deleteProgram",value:function(e){var t=this;this.throwIfDisposed(),e===this.program&&(this.program=null),null!=e&&l6(this.gl,(function(){return t.gl.deleteProgram(e)}))}},{key:"setProgram",value:function(e){var t=this;this.throwIfDisposed(),this.program=e,null!=this.program&&this.debug&&g6(this.gl,this.program),l6(this.gl,(function(){return t.gl.useProgram(e)}))}},{key:"getUniformLocation",value:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return this.throwIfDisposed(),n?b6(this.gl,e,t):x6(this.gl,e,t)}},{key:"getAttributeLocation",value:function(e,t){var n=this;return this.throwIfDisposed(),l6(this.gl,(function(){return n.gl.getAttribLocation(e,t)}))}},{key:"getUniformLocationNoThrow",value:function(e,t){return this.throwIfDisposed(),this.gl.getUniformLocation(e,t)}},{key:"setInputMatrixTexture",value:function(e,t,n){this.throwIfDisposed(),this.throwIfNoProgram(),w6(this.gl,e,t,n)}},{key:"setOutputMatrixTexture",value:function(e,t,n){this.setOutputMatrixTextureDriver(e,n,t)}},{key:"setOutputPackedMatrixTexture",value:function(e,t,n){this.throwIfDisposed();var r=u6(t,n),o=(0,a.Z)(r,2),i=o[0],s=o[1];this.setOutputMatrixTextureDriver(e,i,s)}},{key:"setOutputMatrixWriteRegion",value:function(e,t,n,r){this.setOutputMatrixWriteRegionDriver(n,e,r,t)}},{key:"setOutputPackedMatrixWriteRegion",value:function(e,t,n,r){throw new Error("setOutputPackedMatrixWriteRegion not implemented.")}},{key:"debugValidate",value:function(){null!=this.program&&g6(this.gl,this.program),_6(this.gl)}},{key:"executeProgram",value:function(){this.throwIfDisposed(),this.throwIfNoProgram();var e=this.gl;this.debug&&this.debugValidate(),l6(e,(function(){return e.drawElements(e.TRIANGLES,6,e.UNSIGNED_SHORT,0)}))}},{key:"blockUntilAllProgramsCompleted",value:function(){var e=this;this.throwIfDisposed(),l6(this.gl,(function(){return e.gl.finish()}))}},{key:"getQueryTimerExtension",value:function(){return null==this.disjointQueryTimerExtension&&(this.disjointQueryTimerExtension=d6(this.gl,2===(0,EV.env)().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")?"EXT_disjoint_timer_query_webgl2":"EXT_disjoint_timer_query")),this.disjointQueryTimerExtension}},{key:"getQueryTimerExtensionWebGL2",value:function(){return this.getQueryTimerExtension()}},{key:"getQueryTimerExtensionWebGL1",value:function(){return this.getQueryTimerExtension()}},{key:"beginQuery",value:function(){if(2===(0,EV.env)().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")){var e=this.gl,t=this.getQueryTimerExtensionWebGL2(),n=e.createQuery();return e.beginQuery(t.TIME_ELAPSED_EXT,n),n}var r=this.getQueryTimerExtensionWebGL1(),a=r.createQueryEXT();return r.beginQueryEXT(r.TIME_ELAPSED_EXT,a),a}},{key:"endQuery",value:function(){if(2!==(0,EV.env)().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")){var e=this.getQueryTimerExtensionWebGL1();e.endQueryEXT(e.TIME_ELAPSED_EXT)}else{var t=this.gl,n=this.getQueryTimerExtensionWebGL2();t.endQuery(n.TIME_ELAPSED_EXT)}}},{key:"waitForQueryAndGetTime",value:function(){var e=(0,o.Z)(l().mark((function e(t){var n=this;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,EV.util.repeatedTry((function(){return n.disposed||n.isQueryAvailable(t,(0,EV.env)().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))}));case 2:return e.abrupt("return",this.getQueryTime(t,(0,EV.env)().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getQueryTime",value:function(e,t){if(0===t)return null;if(2===t){var n=this.gl;return n.getQueryParameter(e,n.QUERY_RESULT)/1e6}var r=this.getQueryTimerExtensionWebGL1();return r.getQueryObjectEXT(e,r.QUERY_RESULT_EXT)/1e6}},{key:"isQueryAvailable",value:function(e,t){if(0===t)return!0;if(2===t){var n=this.gl,r=this.getQueryTimerExtensionWebGL2(),a=n.getQueryParameter(e,n.QUERY_RESULT_AVAILABLE);return null==this.disjoint&&(this.disjoint=this.gl.getParameter(r.GPU_DISJOINT_EXT)),a&&!this.disjoint}var o=this.getQueryTimerExtensionWebGL1(),i=o.getQueryObjectEXT(e,o.QUERY_RESULT_AVAILABLE_EXT);return null==this.disjoint&&(this.disjoint=this.gl.getParameter(o.GPU_DISJOINT_EXT)),i&&!this.disjoint}},{key:"pollFence",value:function(e){var t=this;return new Promise((function(n){t.addItemToPoll((function(){return e.isFencePassed()}),(function(){return n()}))}))}},{key:"pollItems",value:function(){for(var e=function(e){for(var t=0;t<e.length;++t){if(!e[t]())break}return t-1}(this.itemsToPoll.map((function(e){return e.isDoneFn}))),t=0;t<=e;++t){(0,this.itemsToPoll[t].resolveFn)()}this.itemsToPoll=this.itemsToPoll.slice(e+1)}},{key:"addItemToPoll",value:function(e,t){var n=this;this.itemsToPoll.push({isDoneFn:e,resolveFn:t}),this.itemsToPoll.length>1||EV.util.repeatedTry((function(){return n.pollItems(),0===n.itemsToPoll.length}))}},{key:"bindTextureToFrameBuffer",value:function(e){this.throwIfDisposed(),k6(this.gl,e,this.framebuffer),this.debug&&_6(this.gl)}},{key:"unbindTextureToFrameBuffer",value:function(){null!=this.outputTexture?(k6(this.gl,this.outputTexture,this.framebuffer),this.debug&&_6(this.gl)):S6(this.gl,this.framebuffer)}},{key:"downloadMatrixDriver",value:function(e,t){this.bindTextureToFrameBuffer(e);var n=t();return this.unbindTextureToFrameBuffer(),n}},{key:"setOutputMatrixTextureDriver",value:function(e,t,n){this.throwIfDisposed();var r=this.gl;k6(r,e,this.framebuffer),this.debug&&_6(r),this.outputTexture=e,l6(r,(function(){return r.viewport(0,0,t,n)})),l6(r,(function(){return r.scissor(0,0,t,n)}))}},{key:"setOutputMatrixWriteRegionDriver",value:function(e,t,n,r){var a=this;this.throwIfDisposed(),l6(this.gl,(function(){return a.gl.scissor(e,t,n,r)}))}},{key:"throwIfDisposed",value:function(){if(this.disposed)throw new Error("Attempted to use disposed GPGPUContext.")}},{key:"throwIfNoProgram",value:function(){if(null==this.program)throw new Error("No GPU program is currently set.")}}]),e}();var P8=S0,j8=m1,F8=v1,L8=b1,B8=N1,z8=s2,Z8=y2,V8=S2,U8=z2,q8=K2,W8=Y2,H8=J2,G8=t3,K8=f3,X8=h3,Y8=g3,$8=b3,J8=R3,Q8=F3,e9=G3,t9=Q1,n9=r4,r9=f4,a9=_4,o9=E4,i9=L4,s9=l0,u9=D0,c9=f1,l9=a5,f9=i5,d9=u5,p9=p5,h9=k5,m9=N5,v9=T5,g9=O5,y9=I2,b9=j5,x9=z5,w9=B0,k9=G5;function S9(e,t){return["x","y","z","w","u","v"].slice(0,t).map((function(t){return"".concat(e,".").concat(t)}))}function _9(e,t){return 1===t?[e]:S9(e,t)}var N9=function(){function e(t){if((0,f.Z)(this,e),this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outputShape=t,this.rank=t.length,this.enableShapeUniforms=g8(this.outputShape.length),0===this.rank)this.userCode="\n        void main() {\n          setOutput(vec4(getA(), 0., 0., 0.));\n        }\n      ";else{var n=_9("rc",this.rank),r=c8(this.rank),a=this.getOutOfBoundsCondition(n),o=this.getSetup(n),i=this.getOutput(n);this.userCode="\n        void main() {\n          ".concat(r," rc = getOutputCoords();\n\n          if(").concat(a,") {\n            setOutput(vec4(0));\n          } else {\n            ").concat(o,"\n\n            setOutput(vec4(").concat(i,"));\n          }\n        }\n      ")}}return(0,d.Z)(e,[{key:"getSourceCoordsArr",value:function(e){for(var t=[],n=0;n<=1;n++)for(var r=0;r<=1;r++){for(var a="".concat(0===n?"r":"rp1",", ").concat(0===r?"c":"cp1"),o=2;o<this.rank;o++)a="".concat(e[e.length-1-o],",")+a;t.push(a)}return t}},{key:"getOutOfBoundsCondition",value:function(e){if(1===this.rank)return"rc > ".concat(this.enableShapeUniforms?"outShape":this.outputShape[0]);for(var t="",n=this.rank-2;n<this.rank;n++)t+="".concat(e[n]," >= ").concat(this.enableShapeUniforms?"outShape[".concat(n,"]"):this.outputShape[n]),n<this.rank-1&&(t+="||");return t}},{key:"getSetup",value:function(e){if(1===this.rank)return"";var t=e.slice(-2),n=this.enableShapeUniforms?"outShape[".concat(this.rank," - 1]"):this.outputShape[this.rank-1],r=this.enableShapeUniforms?"outShape[".concat(this.rank," - 2]"):this.outputShape[this.rank-2];return"\n      int r = ".concat(t[0],";\n      int c = ").concat(t[1],";\n      int rp1 = r + 1;\n      int cp1 = c + 1;\n\n      bool cEdge = cp1 >= ").concat(n,";\n      bool rEdge = rp1 >= ").concat(r,";\n    ")}},{key:"getOutput",value:function(e){var t=this.getSourceCoordsArr(e);if(1===this.rank){var n=this.enableShapeUniforms?"outShape":this.outputShape[0];return"getA(rc), (rc + 1 >= ".concat(n," ? 0. : getA(rc + 1)), 0, 0")}return"getA(".concat(t[0],"),\n            cEdge ? 0. : getA(").concat(t[1],"),\n            rEdge ? 0. : getA(").concat(t[2],"),\n            rEdge || cEdge ? 0. : getA(").concat(t[3],")")}}]),e}(),E9=(0,d.Z)((function e(t,n){(0,f.Z)(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"inputShape",type:"ivec3"}],this.outputShape=t,this.enableShapeUniforms=g8(this.outputShape.length);for(var r="",a=0;a<4;a++){var o="thisRC = rc;";a%2===1&&(o+="thisRC.z += 1;"),a>1&&(o+="thisRC.y += 1;"),r+="\n        ".concat(o,"\n        ").concat(a>0?"if(thisRC.y < rows && thisRC.z < cols){":"","\n          int flatIndex = getFlatIndex(thisRC);\n\n          ivec3 inputRC = inputCoordsFromReshapedOutCoords(flatIndex);\n          vec2 inputRCInnerDims = vec2(float(inputRC.y),float(inputRC.z));\n\n          result[").concat(a,"] =\n            getChannel(getA(inputRC.x, inputRC.y, inputRC.z), inputRCInnerDims);\n        ").concat(a>0?"}":"","\n      ")}this.userCode="\n      ".concat(function(e,t){var n=t?function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"index",r=e.map((function(e,t){return t})),a=Z6(r,t);return a.map((function(t,r){var o="int ".concat(e[r]," = ").concat(n," / ").concat(a[r]),i=r===a.length-1?"int ".concat(e[r+1]," = ").concat(n," - ").concat(e[r]," * ").concat(a[r]):"index -= ".concat(e[r]," * ").concat(a[r]);return"".concat(o,"; ").concat(i,";")})).join("")}(["r","c","d"],"inputShape"):B6(["r","c","d"],e);return"\n    ivec3 inputCoordsFromReshapedOutCoords(int index) {\n      ".concat(n,"\n      return ivec3(r, c, d);\n    }\n  ")}(n,this.enableShapeUniforms),"\n      ").concat(this.enableShapeUniforms?"\n  int getFlatIndex(ivec3 coords) {\n    return coords.x * outShapeStrides[0] + coords.y * outShapeStrides[1] + coords.z;\n  }\n":V6(t),"\n\n      void main() {\n        ivec3 rc = getOutputCoords();\n\n        vec4 result = vec4(0.);\n\n        ivec3 thisRC;\n        int rows = ").concat(this.enableShapeUniforms?"outShape[1]":t[1],";\n        int cols = ").concat(this.enableShapeUniforms?"outShape[2]":t[2],";\n\n        ").concat(r,"\n\n        setOutput(result);\n      }\n    ")}));var C9=function(){function e(t){(0,f.Z)(this,e),this.gpgpu=t,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0,this.freeTextures={},this.logEnabled=!1,this.usedTextures={}}return(0,d.Z)(e,[{key:"acquireTexture",value:function(e,t,n){var r=I9(t,n),a=O9(e,r,n);a in this.freeTextures||(this.freeTextures[a]=[]),a in this.usedTextures||(this.usedTextures[a]=[]);var o,i=T9(e,r,this.gpgpu.gl,this.gpgpu.textureConfig,n);if(this.freeTextures[a].length>0){this.numFreeTextures--,this.numUsedTextures++,this._numBytesFree-=i,this.log();var s=this.freeTextures[a].shift();return this.usedTextures[a].push(s),s}return r===n6.PACKED_2X2_FLOAT32?o=this.gpgpu.createPackedMatrixTexture(e[0],e[1]):r===n6.PACKED_2X2_FLOAT16?o=this.gpgpu.createFloat16PackedMatrixTexture(e[0],e[1]):r===n6.UNPACKED_FLOAT32?o=this.gpgpu.createFloat32MatrixTexture(e[0],e[1]):r===n6.UNPACKED_FLOAT16?o=this.gpgpu.createFloat16MatrixTexture(e[0],e[1]):r===n6.PACKED_4X1_UNSIGNED_BYTE&&(o=this.gpgpu.createUnsignedBytesMatrixTexture(e[0],e[1])),this.usedTextures[a].push(o),this.numUsedTextures++,this._numBytesAllocated+=i,this.log(),o}},{key:"releaseTexture",value:function(e,t,n,r){if(null!=this.freeTextures){var a=I9(n,r),o=O9(t,a,r);o in this.freeTextures||(this.freeTextures[o]=[]);var i=T9(t,a,this.gpgpu.gl,this.gpgpu.textureConfig,r),s=(0,EV.env)().get("WEBGL_DELETE_TEXTURE_THRESHOLD");-1!==s&&this._numBytesAllocated>s?(this.gpgpu.deleteMatrixTexture(e.texture),this._numBytesAllocated-=i):(this.freeTextures[o].push(e),this.numFreeTextures++,this._numBytesFree+=i),this.numUsedTextures--;var u=this.usedTextures[o],c=u.indexOf(e);if(c<0)throw new Error("Cannot release a texture that was never provided by this texture manager");u.splice(c,1),this.log()}}},{key:"log",value:function(){if(this.logEnabled){var e=this.numFreeTextures+this.numUsedTextures;console.log("Free/Used","".concat(this.numFreeTextures," / ").concat(this.numUsedTextures),"(".concat(e,")"));var t=this._numBytesFree/this._numBytesAllocated;console.log("Bytes allocated: ".concat(this._numBytesAllocated)),console.log("Bytes unused: ".concat(this._numBytesFree," (").concat(Math.round(100*t),"%)"))}}},{key:"numBytesAllocated",get:function(){return this._numBytesAllocated}},{key:"numBytesFree",get:function(){return this._numBytesFree}},{key:"getNumUsedTextures",value:function(){return this.numUsedTextures}},{key:"getNumFreeTextures",value:function(){return this.numFreeTextures}},{key:"dispose",value:function(){var e=this;if(null!=this.freeTextures){for(var t in this.freeTextures)this.freeTextures[t].forEach((function(t){e.gpgpu.deleteMatrixTexture(t.texture)}));for(var n in this.usedTextures)this.usedTextures[n].forEach((function(t){e.gpgpu.deleteMatrixTexture(t.texture)}));this.freeTextures=null,this.usedTextures=null,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0}}}]),e}();function T9(e,t,n,r,o){var i,s=function(e,t){switch(e){case n6.PACKED_2X2_FLOAT32:return A8(t);case n6.PACKED_2X2_FLOAT16:return D8(t);case n6.UNPACKED_FLOAT32:return T8(t);case n6.UNPACKED_FLOAT16:return I8(t);case n6.PACKED_4X1_UNSIGNED_BYTE:return O8(t);default:throw new Error("Unknown physical texture type ".concat(e))}}(t,r);if(o){var u=u6(e[0],e[1]),c=(0,a.Z)(u,2);i=c[0]*c[1]}else{var l=i6(e[0],e[1]),f=(0,a.Z)(l,2);i=f[0]*f[1]}var d=function(e,t){var n=e;if(t===n.R32F)return 4;if(t===n.R16F)return 2;if(t===n.RGBA32F)return 16;if(t===e.RGBA)return 16;if(t===n.RGBA16F)return 8;if(t===n.RGBA8)return 4;throw new Error("Unknown internal format ".concat(t))}(n,s);return i*d}function I9(e,t){if(e===t6.UPLOAD)return n6.PACKED_2X2_FLOAT32;if(e===t6.RENDER||null==e)return function(e){return(0,EV.env)().getBool("WEBGL_RENDER_FLOAT32_ENABLED")?e?n6.PACKED_2X2_FLOAT32:n6.UNPACKED_FLOAT32:e?n6.PACKED_2X2_FLOAT16:n6.UNPACKED_FLOAT16}(t);if(e===t6.DOWNLOAD||e===t6.PIXELS)return n6.PACKED_4X1_UNSIGNED_BYTE;throw new Error("Unknown logical texture type ".concat(e))}function O9(e,t,n){return"".concat(e[0],"_").concat(e[1],"_").concat(t,"_").concat(n)}var A9=(0,d.Z)((function e(t,n){(0,f.Z)(this,e),this.variableNames=["A"],this.outputShape=t,this.enableShapeUniforms=g8(this.outputShape.length),this.userCode="\n      float unaryOperation(float x) {\n        ".concat(n,"\n      }\n\n      void main() {\n        float x = getAAtOutCoords();\n        float y = unaryOperation(x);\n\n        setOutput(y);\n      }\n    ")})),D9="if (isnan(x)) return x;",M9="return x;",R9="return abs(x);";var P9="return (x >= 0.0) ? x : (exp(x) - 1.0);",j9=D9+"\n  return (x < 0.0) ? 0.0 : x;\n",F9=D9+"\n  return (x < 0.0) ? 0.0 : min(6.0, x);\n",L9="return x;",B9="return 1.0 / (1.0 + exp(-1.0 * x));",z9="return x;",Z9="\n  vec4 result;\n\n  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);\n  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);\n  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);\n  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);\n\n  return result;\n",V9="\n  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n",U9="\n  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n",q9="return 1.0 / (1.0 + exp(-1.0 * x));",W9=(0,d.Z)((function e(t,n){(0,f.Z)(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t,this.enableShapeUniforms=g8(this.outputShape.length),this.userCode="\n      vec4 unaryOperation(vec4 x) {\n        ".concat(n,"\n      }\n\n      void main() {\n        vec4 x = getAAtOutCoords();\n        vec4 y = unaryOperation(x);\n\n        setOutput(y);\n      }\n    ")})),H9=(0,d.Z)((function e(t){(0,f.Z)(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outputShape=t,this.enableShapeUniforms=g8(this.outputShape.length);var n=t.length,r=_9("rc",n),a=c8(n),o=function(e,t){if(1===e)return"rc";for(var n="",r=0;r<e;r++)n+=t[r],r<e-1&&(n+=",");return n}(n,r),i=r.slice(-2),s=n<=1?"rc":"vec2(".concat(i.join(","),")");this.userCode="\n      void main() {\n        ".concat(a," rc = getOutputCoords();\n        vec4 packedInput = getA(").concat(o,");\n\n        setOutput(getChannel(packedInput, ").concat(s,"));\n      }\n    ")})),G9=EV.kernel_impls.whereImpl,K9={};var X9=(0,EV.env)().getNumber("CPU_HANDOFF_SIZE_THRESHOLD");var Y9=function(e){(0,nu.Z)(n,e);var t=(0,ru.Z)(n);function n(e){var r,a,o;if((0,f.Z)(this,n),(r=t.call(this)).pendingRead=new WeakMap,r.pendingDisposal=new WeakSet,r.dataRefCount=new WeakMap,r.numBytesInGPU=0,r.uploadWaitMs=0,r.downloadWaitMs=0,r.lastGlFlushTime=0,r.warnedAboutMemory=!1,r.pendingDeletes=0,r.disposed=!1,!(0,EV.env)().getBool("HAS_WEBGL"))throw new Error("WebGL is not supported on this device");if(null!=e){if(e instanceof R8)a=e;else{var i=o6((0,EV.env)().getNumber("WEBGL_VERSION"),e);a=new R8(i)}r.binaryCache={},r.gpgpuCreatedLocally=!1}else{var s=o6((0,EV.env)().getNumber("WEBGL_VERSION"));a=new R8(s),r.binaryCache=((o=(0,EV.env)().getNumber("WEBGL_VERSION"))in K9||(K9[o]={}),K9[o]),r.gpgpuCreatedLocally=!0}return r.gpgpu=a,r.canvas=r.gpgpu.gl.canvas,r.textureManager=new C9(r.gpgpu),r.numMBBeforeWarning=null==(0,EV.env)().global.screen?1024:(0,EV.env)().global.screen.height*(0,EV.env)().global.screen.width*window.devicePixelRatio*600/1024/1024,r.texData=new EV.DataStorage((0,tu.Z)(r),(0,EV.engine)()),r}return(0,d.Z)(n,[{key:"nextDataId",value:function(){return n.nextDataId++}},{key:"numDataIds",value:function(){return this.texData.numDataIds()-this.pendingDeletes}},{key:"write",value:function(e,t,n){if(((0,EV.env)().getBool("WEBGL_CHECK_NUMERICAL_PROBLEMS")||(0,EV.env)().getBool("DEBUG"))&&this.checkNumericalProblems(e),"complex64"===n&&null!=e)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");var r={id:this.nextDataId()};return this.texData.set(r,{shape:t,dtype:n,values:e,usage:t6.UPLOAD,refCount:1}),r}},{key:"refCount",value:function(e){return this.texData.has(e)?this.texData.get(e).refCount:0}},{key:"incRef",value:function(e){this.texData.get(e).refCount++}},{key:"decRef",value:function(e){this.texData.has(e)&&this.texData.get(e).refCount--}},{key:"move",value:function(e,t,n,r,a){if((0,EV.env)().getBool("DEBUG")&&this.checkNumericalProblems(t),"complex64"===r)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");this.texData.set(e,{shape:n,dtype:r,values:t,usage:t6.UPLOAD,refCount:a})}},{key:"disposeIntermediateTensorInfo",value:function(e){this.disposeData(e.dataId)}},{key:"readSync",value:function(e){var t=this.texData.get(e),n=t.values,r=t.dtype,a=t.complexTensorInfos,o=t.slice,i=t.shape,s=t.isPacked;if(null!=o){var u;u=s?new W9(i,L9):new A9(i,L9);var c=this.runWebGLProgram(u,[{dataId:e,shape:i,dtype:r}],r),l=this.readSync(c.dataId);return this.disposeIntermediateTensorInfo(c),l}if(null!=n)return this.convertAndCacheOnCPU(e);if("string"===r)return n;var f,d,p=null!=this.activeTimers;if(p&&(f=EV.util.now()),"complex64"===r){var h=this.readSync(a.real.dataId),m=this.readSync(a.imag.dataId);d=EV.backend_util.mergeRealAndImagArrays(h,m)}else d=this.getValuesFromTexture(e);return p&&(this.downloadWaitMs+=EV.util.now()-f),this.convertAndCacheOnCPU(e,d)}},{key:"read",value:function(){var e=(0,o.Z)(l().mark((function e(t){var n,a,o,i,s,u,c,f,d,p,h,m,v,g,y,b,x,w,k,S,_,N,E;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.pendingRead.has(t)){e.next=3;break}return n=this.pendingRead.get(t),e.abrupt("return",new Promise((function(e){return n.push(e)})));case 3:if(a=this.texData.get(t),o=a.values,i=a.shape,s=a.slice,u=a.dtype,c=a.complexTensorInfos,f=a.isPacked,null==s){e.next=11;break}return d=f?new W9(i,L9):new A9(i,L9),p=this.runWebGLProgram(d,[{dataId:t,shape:i,dtype:u}],u),h=this.read(p.dataId),this.disposeIntermediateTensorInfo(p),e.abrupt("return",h);case 11:if(null==o){e.next=13;break}return e.abrupt("return",this.convertAndCacheOnCPU(t));case 13:if(!(0,EV.env)().getBool("DEBUG")){e.next=16;break}if((0,EV.env)().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")||2!==(0,EV.env)().getNumber("WEBGL_VERSION")){e.next=16;break}throw new Error("tensor.data() with WEBGL_DOWNLOAD_FLOAT_ENABLED=false and WEBGL_VERSION=2 not yet supported.");case 16:if(m=null,"complex64"!==u&&(0,EV.env)().get("WEBGL_BUFFER_SUPPORTED")&&(v=this.decode(t),y=this.texData.get(v.dataId),m=(g=this.gpgpu).createBufferFromTexture.apply(g,[y.texture.texture].concat((0,r.Z)(s6(i))))),this.pendingRead.set(t,[]),"complex64"===u){e.next=22;break}return e.next=22,this.gpgpu.createAndWaitForFence();case 22:if("complex64"!==u){e.next=31;break}return e.next=25,Promise.all([this.read(c.real.dataId),this.read(c.imag.dataId)]);case 25:x=e.sent,w=x[0],k=x[1],b=EV.backend_util.mergeRealAndImagArrays(w,k),e.next=32;break;case 31:null==m?b=this.getValuesFromTexture(t):(S=EV.util.sizeFromShape(i),b=this.gpgpu.downloadFloat32MatrixFromBuffer(m,S));case 32:return null!=v&&this.disposeIntermediateTensorInfo(v),null!=m&&l6(_=this.gpgpu.gl,(function(){return _.deleteBuffer(m)})),N=this.convertAndCacheOnCPU(t,b),E=this.pendingRead.get(t),this.pendingRead.delete(t),E.forEach((function(e){return e(N)})),this.pendingDisposal.has(t)&&(this.pendingDisposal.delete(t),this.disposeData(t)&&(0,EV.engine)().removeDataId(t,this),this.pendingDeletes--),e.abrupt("return",N);case 40:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"readToGPU",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.texData.get(e),r=n.values,a=n.shape,o=n.slice,i=n.dtype,s=n.isPacked,u=n.texture;if("complex64"===i)throw new Error("Does not support reading texture for complex64 dtype.");if(null!=o){var c;c=s?new W9(a,L9):new A9(a,L9);var l=this.runWebGLProgram(c,[{dataId:e,shape:a,dtype:i}],i),f=this.readToGPU(l,t);return this.disposeIntermediateTensorInfo(l),f}if(null==u)throw null!=r?new Error("Data is not on GPU but on CPU."):new Error("There is no data on GPU or CPU.");var d=this.decode(e,t.customTexShape),p=(0,EV.engine)().makeTensorFromDataId(d.dataId,d.shape,d.dtype),h=this.texData.get(d.dataId);return Object.assign({tensorRef:p},h.texture)}},{key:"bufferSync",value:function(e){var t=this.readSync(e.dataId),n=t;if("string"===e.dtype)try{n=t.map((function(e){return EV.util.decodeString(e)}))}catch(r){throw new Error("Failed to decode encoded string bytes into utf-8")}return(0,EV.buffer)(e.shape,e.dtype,n)}},{key:"checkNumericalProblems",value:function(e){if(null!=e)for(var t=0;t<e.length;t++){var n=e[t];if(!f6(n)){if((0,EV.env)().getBool("WEBGL_RENDER_FLOAT32_CAPABLE"))throw Error("The value ".concat(n," cannot be represented with your ")+"current settings. Consider enabling float32 rendering: 'tf.env().set('WEBGL_RENDER_FLOAT32_ENABLED', true);'");throw Error("The value ".concat(n," cannot be represented on this device."))}}}},{key:"getValuesFromTexture",value:function(e){var t=this.texData.get(e),n=t.shape,a=t.dtype,o=t.isPacked,i=EV.util.sizeFromShape(n);if((0,EV.env)().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")){var s,u=this.decode(e),c=this.texData.get(u.dataId),l=(s=this.gpgpu).downloadMatrixFromPackedTexture.apply(s,[c.texture.texture].concat((0,r.Z)(s6(n)))).subarray(0,i);return this.disposeIntermediateTensorInfo(u),l}var f=(0,EV.env)().getBool("WEBGL_PACK")&&!0===o,d=f?I6(n):n,p=f?new w8(d):new x8(d),h=this.runWebGLProgram(p,[{shape:d,dtype:a,dataId:e}],"float32"),m=this.texData.get(h.dataId),v=this.gpgpu.downloadByteEncodedFloatMatrixFromOutputTexture(m.texture.texture,m.texShape[0],m.texShape[1]).subarray(0,i);return this.disposeIntermediateTensorInfo(h),v}},{key:"timerAvailable",value:function(){return(0,EV.env)().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0}},{key:"time",value:function(e){var t=this,n=this.activeTimers,r=[],a=!1;null==this.programTimersStack?(this.programTimersStack=r,a=!0):this.activeTimers.push(r),this.activeTimers=r,e();var i=EV.util.flatten(this.activeTimers.map((function(e){return e.query}))).filter((function(e){return null!=e})),s=EV.util.flatten(this.activeTimers.map((function(e){return e.name}))).filter((function(e){return null!=e}));this.activeTimers=n,a&&(this.programTimersStack=null);var u={uploadWaitMs:this.uploadWaitMs,downloadWaitMs:this.downloadWaitMs,kernelMs:null,wallMs:null};return(0,o.Z)(l().mark((function e(){var n;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!((0,EV.env)().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0)){e.next=8;break}return e.next=3,Promise.all(i);case 3:n=e.sent,u.kernelMs=EV.util.sum(n),u.getExtraProfileInfo=function(){return n.map((function(e,t){return{name:s[t],ms:e}})).map((function(e){return"".concat(e.name,": ").concat(e.ms)})).join(", ")},e.next=9;break;case 8:u.kernelMs={error:"WebGL query timers are not supported in this environment."};case 9:return t.uploadWaitMs=0,t.downloadWaitMs=0,e.abrupt("return",u);case 12:case"end":return e.stop()}}),e)})))()}},{key:"memory",value:function(){return{unreliable:!1,numBytesInGPU:this.numBytesInGPU,numBytesInGPUAllocated:this.textureManager.numBytesAllocated,numBytesInGPUFree:this.textureManager.numBytesFree}}},{key:"startTimer",value:function(){return(0,EV.env)().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?this.gpgpu.beginQuery():{startMs:EV.util.now(),endMs:null}}},{key:"endTimer",value:function(e){return(0,EV.env)().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?(this.gpgpu.endQuery(),e):(e.endMs=EV.util.now(),e)}},{key:"getQueryTime",value:function(){var e=(0,o.Z)(l().mark((function e(t){var n;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!((0,EV.env)().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0)){e.next=2;break}return e.abrupt("return",this.gpgpu.waitForQueryAndGetTime(t));case 2:return n=t,e.abrupt("return",n.endMs-n.startMs);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"disposeData",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.pendingDisposal.has(e))return!1;if(!this.texData.has(e))return!0;if(t?this.texData.get(e).refCount=0:this.texData.get(e).refCount--,!t&&this.texData.get(e).refCount>0)return!1;if(this.pendingRead.has(e))return this.pendingDisposal.add(e),this.pendingDeletes++,!1;this.releaseGPUData(e);var n=this.texData.get(e),r=n.complexTensorInfos;return null!=r&&(this.disposeData(r.real.dataId,t),this.disposeData(r.imag.dataId,t)),this.texData.delete(e),!0}},{key:"releaseGPUData",value:function(e){var t=this.texData.get(e),n=t.texture,r=t.dtype,a=t.texShape,o=t.usage,i=t.isPacked,s=t.slice,u=s&&s.origDataId||e,c=this.dataRefCount.get(u);c>1?this.dataRefCount.set(u,c-1):(this.dataRefCount.delete(u),null!=n&&(this.numBytesInGPU-=this.computeBytes(a,r),this.textureManager.releaseTexture(n,a,o,i)));var l=this.texData.get(e);l.texture=null,l.texShape=null,l.isPacked=!1,l.slice=null}},{key:"getTexture",value:function(e){return this.uploadToGPU(e),this.texData.get(e).texture.texture}},{key:"getDataInfo",value:function(e){return this.texData.get(e)}},{key:"shouldExecuteOnCPU",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:X9;return(0,EV.env)().getBool("WEBGL_CPU_FORWARD")&&e.every((function(e){return null==t.texData.get(e.dataId).texture&&EV.util.sizeFromShape(e.shape)<n}))}},{key:"getGPGPUContext",value:function(){return this.gpgpu}},{key:"where",value:function(e){EV.backend_util.warn("tf.where() in webgl locks the UI thread. Call tf.whereAsync() instead");var t=e.dataSync();return G9(e.shape,t)}},{key:"packedUnaryOp",value:function(e,t,n){var r=new W9(e.shape,t),a=this.compileAndRun(r,[e],n);return(0,EV.engine)().makeTensorFromDataId(a.dataId,a.shape,a.dtype)}},{key:"abs",value:function(e){if(this.shouldExecuteOnCPU([e])&&"complex64"!==e.dtype){var t=u9(this.texData.get(e.dataId).values);return this.makeOutput(e.shape,e.dtype,t)}if((0,EV.env)().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,R9,e.dtype);var n=new A9(e.shape,R9),r=this.compileAndRun(n,[e]);return(0,EV.engine)().makeTensorFromDataId(r.dataId,r.shape,r.dtype)}},{key:"makeTensorInfo",value:function(e,t,n){var r;if("string"===t&&null!=n&&n.length>0&&EV.util.isString(n[0])){var a=n.map((function(e){return EV.util.encodeString(e)}));r=this.write(a,e,t)}else r=this.write(n,e,t);return this.texData.get(r).usage=null,{dataId:r,shape:e,dtype:t}}},{key:"makeOutput",value:function(e,t,n){var r=this.makeTensorInfo(e,t,n).dataId;return(0,EV.engine)().makeTensorFromDataId(r,e,t,this)}},{key:"unpackTensor",value:function(e){var t=new H9(e.shape);return this.runWebGLProgram(t,[e],e.dtype)}},{key:"packTensor",value:function(e){var t=new N9(e.shape);return this.runWebGLProgram(t,[e],e.dtype,null,!0)}},{key:"packedReshape",value:function(e,t){var n=[C6(e.shape)].concat((0,r.Z)(T6(e.shape))),a={dtype:e.dtype,shape:n,dataId:e.dataId},o=[C6(t)].concat((0,r.Z)(T6(t))),i=new E9(o,n),s=[n],u=this.runWebGLProgram(i,[a],e.dtype,s,!0);return{dataId:u.dataId,shape:t,dtype:u.dtype}}},{key:"decode",value:function(e,t){var n=this.texData.get(e),r=n.isPacked,a=n.shape,o=n.dtype;if(null!=t){var i=EV.util.sizeFromShape(a),s=t[0]*t[1]*4;EV.util.assert(i<=s,(function(){return"customTexShape is too small. Row * Column * 4 should be equal or larger than the size of the tensor data."}))}var u,c=I6(a);u=r?new b8(c):new y8(c);var l=[null!=t?t:s6(c)];return{dtype:o,shape:a,dataId:this.runWebGLProgram(u,[{shape:c,dtype:o,dataId:e}],o,l,!0,t).dataId}}},{key:"runWebGLProgram",value:function(e,t,n,r){var a=this,o=arguments.length>4&&void 0!==arguments[4]&&arguments[4],i=arguments.length>5?arguments[5]:void 0,s=this.makeTensorInfo(e.outputShape,n),u=this.texData.get(s.dataId);if(e.packedOutput&&(u.isPacked=!0),e.outPackingScheme===e6.DENSE){var c=null!=i?i:s6(e.outputShape);u.texShape=c.map((function(e){return 2*e}))}if(null!=e.outTexUsage&&(u.usage=e.outTexUsage),0===EV.util.sizeFromShape(s.shape))return u.values=EV.util.getTypedArrayFromDType(s.dtype,0),s;var l=[],f=t.map((function(t){if("complex64"===t.dtype)throw new Error("GPGPUProgram does not support complex64 input. For complex64 dtypes, please separate the program into real and imaginary parts.");var n=a.texData.get(t.dataId);if(null==n.texture){if(!e.packedInputs&&EV.util.sizeFromShape(t.shape)<=(0,EV.env)().getNumber("WEBGL_SIZE_UPLOAD_UNIFORM"))return{shape:t.shape,texData:null,isUniform:!0,uniformValues:n.values};e.packedInputs&&(n.isPacked=!0,n.shape=t.shape)}if(a.uploadToGPU(t.dataId),!!n.isPacked!==!!e.packedInputs)t=n.isPacked?a.unpackTensor(t):a.packTensor(t),l.push(t),n=a.texData.get(t.dataId);else if(n.isPacked&&!A6(n.shape,t.shape)){var r=t,o=t.shape;t.shape=n.shape,t=a.packedReshape(t,o),l.push(t),n=a.texData.get(t.dataId),r.shape=o}return{shape:t.shape,texData:n,isUniform:!1}}));this.uploadToGPU(s.dataId);var d,p={shape:s.shape,texData:u,isUniform:!1},h=v8(e,f,p),m=this.getAndSaveBinary(h,(function(){return p8(a.gpgpu,e,f,p)})),v=null!=this.activeTimers;v&&(d=this.startTimer()),m8(this.gpgpu,m,f,p,r),l.forEach((function(e){return a.disposeIntermediateTensorInfo(e)})),v&&(d=this.endTimer(d),this.activeTimers.push({name:e.constructor.name,query:this.getQueryTime(d)}));var g=(0,EV.env)().get("WEBGL_FLUSH_THRESHOLD");if(g>0){var y=EV.util.now();y-this.lastGlFlushTime>g&&(this.gpgpu.gl.flush(),this.lastGlFlushTime=y)}if(!(0,EV.env)().getBool("WEBGL_LAZILY_UNPACK")&&u.isPacked&&!1===o){var b=this.unpackTensor(s);return this.disposeIntermediateTensorInfo(s),b}return s}},{key:"compileAndRun",value:function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];n=n||t[0].dtype;var o=this.runWebGLProgram(e,t,n,r,a);return o}},{key:"getAndSaveBinary",value:function(e,t){return e in this.binaryCache||(this.binaryCache[e]=t()),this.binaryCache[e]}},{key:"getTextureManager",value:function(){return this.textureManager}},{key:"dispose",value:function(){var e=this;if(!this.disposed){if(!(0,EV.env)().getBool("IS_TEST"))Object.keys(this.binaryCache).forEach((function(t){e.gpgpu.deleteProgram(e.binaryCache[t].webGLProgram),delete e.binaryCache[t]}));this.textureManager.dispose(),null!=this.canvas&&"undefined"!==typeof HTMLCanvasElement&&this.canvas instanceof HTMLCanvasElement?this.canvas.remove():this.canvas=null,this.gpgpuCreatedLocally&&(this.gpgpu.program=null,this.gpgpu.dispose()),this.disposed=!0}}},{key:"floatPrecision",value:function(){var e=this;return null==this.floatPrecisionValue&&(this.floatPrecisionValue=(0,EV.tidy)((function(){if(!(0,EV.env)().get("WEBGL_RENDER_FLOAT32_ENABLED")){var t=(0,EV.env)().getBool("DEBUG");(0,EV.env)().set("DEBUG",!1);var n=e.abs((0,EV.scalar)(1e-8)).dataSync()[0];if((0,EV.env)().set("DEBUG",t),n>0)return 32}return 16}))),this.floatPrecisionValue}},{key:"epsilon",value:function(){return 32===this.floatPrecision()?1e-7:1e-4}},{key:"uploadToGPU",value:function(e){var t=this.texData.get(e),n=t.shape,r=t.dtype,o=t.values,i=t.texture,s=t.usage,u=t.isPacked;if(null==i){var c,l=null!=this.activeTimers;l&&(c=EV.util.now());var f=t.texShape;if(null==f&&(f=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=(0,EV.env)().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(t&&(n*=2,e=e.map((function(t,n){return n>=e.length-2?EV.util.nearestLargerEven(e[n]):e[n]})),1===e.length&&(e=[2,e[0]])),2!==e.length){var r=EV.util.squeezeShape(e);e=r.newShape}var o=EV.util.sizeFromShape(e);if(e.length<=1&&o<=n)return[1,o];if(2===e.length&&e[0]<=n&&e[1]<=n)return e;if(3===e.length&&e[0]*e[1]<=n&&e[2]<=n)return[e[0]*e[1],e[2]];if(3===e.length&&e[0]<=n&&e[1]*e[2]<=n)return[e[0],e[1]*e[2]];if(4===e.length&&e[0]*e[1]*e[2]<=n&&e[3]<=n)return[e[0]*e[1]*e[2],e[3]];if(4===e.length&&e[0]<=n&&e[1]*e[2]*e[3]<=n)return[e[0],e[1]*e[2]*e[3]];if(t){var i=C6(e),s=2,u=2;if(e.length){var c=T6(e),l=(0,a.Z)(c,2);s=l[0],u=l[1]}return o=i*(s/2)*(u/2),EV.util.sizeToSquarishShape(o).map((function(e){return 2*e}))}return EV.util.sizeToSquarishShape(o)}(n,u),t.texShape=f),null!=o){var d,p=I6(n),h=f[1],m=f[0],v=o instanceof Uint8Array||o instanceof Uint8ClampedArray;if(u||!v){var g=u6(f[0],f[1]),y=(0,a.Z)(g,2);h=y[0],m=y[1]}d=u?new S8(p,v):new k8(p,v);var b=v?[m,h]:f,x=this.makeTensorInfo(b,r),w=this.texData.get(x.dataId);w.usage=v?t6.PIXELS:t6.UPLOAD,w.texShape=b,this.gpgpu.uploadDenseMatrixToTexture(this.getTexture(x.dataId),h,m,o);var k=[[m,h]],S=this.runWebGLProgram(d,[x],r,k,!0),_=this.texData.get(S.dataId);t.texture=_.texture,t.texShape=_.texShape,t.isPacked=_.isPacked,t.usage=_.usage,this.disposeIntermediateTensorInfo(x),this.texData.delete(S.dataId),t.values=null,l&&(this.uploadWaitMs+=EV.util.now()-c)}else{var N=this.acquireTexture(f,s,r,u);t.texture=N}}}},{key:"convertAndCacheOnCPU",value:function(e,t){var n=this.texData.get(e),r=n.dtype;return this.releaseGPUData(e),null!=t&&(n.values=function(e,t){if("float32"===t||"complex64"===t)return e;if("int32"===t||"bool"===t){for(var n="int32"===t?new Int32Array(e.length):new Uint8Array(e.length),r=0;r<n.length;++r)n[r]=Math.round(e[r]);return n}throw new Error("Unknown dtype ".concat(t))}(t,r)),n.values}},{key:"acquireTexture",value:function(e,t,n,r){if(this.numBytesInGPU+=this.computeBytes(e,n),!this.warnedAboutMemory&&this.numBytesInGPU>1024*this.numMBBeforeWarning*1024){var a=(this.numBytesInGPU/1024/1024).toFixed(2);this.warnedAboutMemory=!0,console.warn("High memory usage in GPU: ".concat(a," MB, ")+"most likely due to a memory leak")}return this.textureManager.acquireTexture(e,t,r)}},{key:"computeBytes",value:function(e,t){return e[0]*e[1]*EV.util.bytesPerElement(t)}}]),n}(EV.KernelBackend);Y9.nextDataId=0;EV.device_util.isBrowser()&&(0,EV.registerBackend)("webgl",(function(){return new Y9}),2);var $9=(0,d.Z)((function e(t,n,r){(0,f.Z)(this,e),this.variableNames=["A","B"],this.outputShape=EV.backend_util.assertAndGetBroadcastShape(n,r),this.enableShapeUniforms=g8(this.outputShape.length),this.userCode="\n      float binaryOperation(float a, float b) {\n        ".concat(t,"\n      }\n\n      void main() {\n        float a = getAAtOutCoords();\n        float b = getBAtOutCoords();\n        setOutput(binaryOperation(a, b));\n      }\n    ")})),J9=(0,d.Z)((function e(t,n,r){var a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];(0,f.Z)(this,e),this.variableNames=["A","B"],this.supportsBroadcasting=!0,this.packedInputs=!0,this.packedOutput=!0,this.outputShape=EV.backend_util.assertAndGetBroadcastShape(n,r);var o=this.outputShape.length;this.enableShapeUniforms=g8(o);var i="";if(a)if(0===o||1===EV.util.sizeFromShape(this.outputShape))i="\n          result.y = 0.;\n          result.z = 0.;\n          result.w = 0.;\n        ";else{var s=c8(o);if(i="\n          ".concat(s," coords = getOutputCoords();\n        "),1===o)this.enableShapeUniforms?i+="\n            result.y = (coords + 1) >= outShape ? 0. : result.y;\n            result.z = 0.;\n            result.w = 0.;\n          ":i+="\n            result.y = (coords + 1) >= ".concat(this.outputShape[0]," ? 0. : result.y;\n            result.z = 0.;\n            result.w = 0.;\n          ");else{var u=_9("coords",o);this.enableShapeUniforms?i+="\n            bool nextRowOutOfBounds =\n              (".concat(u[o-2]," + 1) >= outShape[").concat(o," - 2];\n            bool nextColOutOfBounds =\n              (").concat(u[o-1]," + 1) >= outShape[").concat(o," - 1];\n            result.y = nextColOutOfBounds ? 0. : result.y;\n            result.z = nextRowOutOfBounds ? 0. : result.z;\n            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;\n          "):i+="\n            bool nextRowOutOfBounds =\n              (".concat(u[o-2]," + 1) >= ").concat(this.outputShape[o-2],";\n            bool nextColOutOfBounds =\n              (").concat(u[o-1]," + 1) >= ").concat(this.outputShape[o-1],";\n            result.y = nextColOutOfBounds ? 0. : result.y;\n            result.z = nextRowOutOfBounds ? 0. : result.z;\n            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;\n          ")}}this.userCode="\n      vec4 binaryOperation(vec4 a, vec4 b) {\n        ".concat(t,"\n      }\n\n      void main() {\n        vec4 a = getAAtOutCoords();\n        vec4 b = getBAtOutCoords();\n\n        vec4 result = binaryOperation(a, b);\n        ").concat(i,"\n\n        setOutput(result);\n      }\n    ")}));function Q9(e){var t=e.inputs,n=e.backend,r=t.x;return n.incRef(r.dataId),{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}var e7={kernelName:EV.Identity,backendName:"webgl",kernelFunc:Q9};function t7(e){var t=e.inputs,n=e.backend,r=t.real,a=t.imag,o=n.makeTensorInfo(r.shape,"complex64"),i=n.texData.get(o.dataId),s=Q9({inputs:{x:r},backend:n}),u=Q9({inputs:{x:a},backend:n});return i.complexTensorInfos={real:s,imag:u},o}var n7={kernelName:EV.Complex,backendName:"webgl",kernelFunc:t7},r7="return (a < 0.) ? b * a : a;",a7="\n  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));\n  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);\n";var o7={kernelName:EV.LeakyRelu,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.alpha,i=n.makeTensorInfo([],"float32",EV.util.createScalarValue(o,"float32")),s=(0,EV.env)().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new J9(a7,a.shape,i.shape):new $9(r7,a.shape,i.shape),u=n.runWebGLProgram(s,[a,i],"float32");return n.disposeIntermediateTensorInfo(i),u}},i7="return (a < 0.) ? b * a : a;",s7="\n  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));\n  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);\n";var u7={kernelName:EV.Prelu,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.x,a=t.alpha,o=(0,EV.env)().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new J9(s7,r.shape,a.shape):new $9(i7,r.shape,a.shape);return n.runWebGLProgram(o,[r,a],"float32")}};function c7(e){var t=e.opSnippet,n=e.packedOpSnippet,r=e.cpuKernelImpl,a=e.dtype;return function(e){var o,i=e.inputs,s=e.backend,u=i.x,c=s,l=a||u.dtype;if(c.shouldExecuteOnCPU([u])&&null!=r){var f=c.texData.get(u.dataId),d=r(f.values,l);return c.makeTensorInfo(u.shape,l,d)}return o=(0,EV.env)().getBool("WEBGL_PACK_UNARY_OPERATIONS")&&null!=n?new W9(u.shape,n):new A9(u.shape,t),c.runWebGLProgram(o,[u],l)}}function l7(e){var t=e.opSnippet,n=e.packedOpSnippet,r=e.checkOutOfBounds,o=void 0!==r&&r,i=e.supportsComplex,s=void 0!==i&&i,u=e.cpuKernelImpl,c=e.dtype;return function(e){var r=e.inputs,i=e.backend,l=r.a,f=r.b,d=i;if(s&&"complex64"===l.dtype){var p=d.texData.get(l.dataId),h=d.texData.get(f.dataId),m=[[p.complexTensorInfos.real,h.complexTensorInfos.real],[p.complexTensorInfos.imag,h.complexTensorInfos.imag]].map((function(e){var n=(0,a.Z)(e,2),r=n[0],o=n[1],i={dataId:r.dataId,dtype:r.dtype,shape:l.shape},s={dataId:o.dataId,dtype:o.dtype,shape:f.shape},u=new $9(t,l.shape,f.shape);return d.runWebGLProgram(u,[i,s],(0,EV.upcastType)(r.dtype,o.dtype))})),v=(0,a.Z)(m,2),g=v[0],y=v[1],b=t7({inputs:{real:g,imag:y},backend:d});return d.disposeIntermediateTensorInfo(g),d.disposeIntermediateTensorInfo(y),b}var x,w=c||(0,EV.upcastType)(l.dtype,f.dtype);if(("string"===l.dtype||"string"===f.dtype||d.shouldExecuteOnCPU([l,f]))&&null!=u){var k=d.texData.get(l.dataId).values,S=d.texData.get(f.dataId).values,_="string"===l.dtype?EV.backend_util.fromUint8ToStringArray(k):k,N="string"===l.dtype?EV.backend_util.fromUint8ToStringArray(S):S,E=u(l.shape,f.shape,_,N,w),C=(0,a.Z)(E,2),T=C[0],I=C[1],O=d.makeTensorInfo(I,w);return d.texData.get(O.dataId).values=T,O}return x=(0,EV.env)().getBool("WEBGL_PACK_BINARY_OPERATIONS")&&null!=n?new J9(n,l.shape,f.shape,o):new $9(t,l.shape,f.shape),d.runWebGLProgram(x,[l,f],w)}}function f7(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if("linear"===e)return t?z9:M9;if("relu"===e)return t?V9:j9;if("elu"===e)return t?Z9:P9;if("relu6"===e)return t?U9:F9;if("prelu"===e)return t?s7:i7;if("leakyrelu"===e)return t?a7:r7;if("sigmoid"===e)return t?q9:B9;throw new Error("Activation ".concat(e," has not been implemented for the WebGL backend."))}var d7=(0,d.Z)((function e(t,n,r){var a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=arguments.length>4&&void 0!==arguments[4]&&arguments[4],i=arguments.length>5&&void 0!==arguments[5]&&arguments[5],s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,u=arguments.length>7&&void 0!==arguments[7]&&arguments[7],c=arguments.length>8&&void 0!==arguments[8]&&arguments[8];(0,f.Z)(this,e),this.variableNames=["matrixA","matrixB"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=r,this.enableShapeUniforms=g8(this.outputShape.length);var l=a?t[1]:t[2],d=Math.ceil(l/2),p=a?"i * 2, rc.y":"rc.y, i * 2",h=o?"rc.z, i * 2":"i * 2, rc.z",m=a?["a.xxyy","a.zzww"]:["a.xxzz","a.yyww"],v=o?["b.xzxz","b.ywyw"]:["b.xyxy","b.zwzw"],g="",y="";s&&(g=u?"vec4 activation(vec4 a) {\n          vec4 b = getPreluActivationWeightsAtOutCoords();\n          ".concat(s,"\n        }"):c?"vec4 activation(vec4 a) {\n          vec4 b = getLeakyreluAlphaAtOutCoords();\n          ".concat(s,"\n        }"):"vec4 activation(vec4 x) {\n          ".concat(s,"\n        }"),y="result = activation(result);");var b=i?"result += getBiasAtOutCoords();":"";i&&this.variableNames.push("bias"),u&&this.variableNames.push("preluActivationWeights"),c&&this.variableNames.push("leakyreluAlpha");var x="rc.x",w="rc.x";t[0]<n[0]?x="int(min(float(rc.x), ".concat(t[0]-1,".))"):n[0]<t[0]&&(w="int(min(float(rc.x), ".concat(n[0]-1,".))")),this.userCode="\n      ".concat(g,"\n      // Don't use uniform for sharedDimensionPacked for performance.\n      const float sharedDimension = ").concat(d,".0;\n\n      vec4 dot2x2ARowBCol(ivec3 rc) {\n        vec4 result = vec4(0);\n        for (int i = 0; i < ").concat(d,"; i++) {\n          int batchA = ").concat(x,";\n          int batchB = ").concat(w,";\n          vec4 a = getMatrixA(batchA, ").concat(p,");\n          vec4 b = getMatrixB(batchB, ").concat(h,");\n\n          // These swizzled products need to be separately added.\n          // See: https://github.com/tensorflow/tfjs/issues/1735\n          result += (").concat(m[0]," * ").concat(v[0],");\n          result += (").concat(m[1]," * ").concat(v[1],");\n        }\n        return result;\n      }\n\n      void main() {\n        ivec3 rc = getOutputCoords();\n        vec4 result = dot2x2ARowBCol(rc);\n\n        ").concat(b,"\n\n        ").concat(y,"\n\n        setOutput(result);\n      }\n    ")})),p7="return areal * breal - aimag * bimag;",h7="return areal * bimag + aimag * breal;",m7=(0,d.Z)((function e(t,n,r){(0,f.Z)(this,e),this.variableNames=["AReal","AImag","BReal","BImag"],this.outputShape=EV.backend_util.assertAndGetBroadcastShape(n,r),this.userCode="\n      float binaryOpComplex(\n          float areal, float aimag, float breal, float bimag) {\n        ".concat(t,"\n      }\n\n      void main() {\n        float areal = getARealAtOutCoords();\n        float aimag = getAImagAtOutCoords();\n        float breal = getBRealAtOutCoords();\n        float bimag = getBImagAtOutCoords();\n        setOutput(binaryOpComplex(areal, aimag, breal, bimag));\n      }\n    ")})),v7="return a * b;";function g7(e){var t,n=e.inputs,r=e.backend,o=n.a,i=n.b,s=EV.backend_util.upcastType(o.dtype,i.dtype);if("complex64"===o.dtype){var u=r.texData.get(o.dataId),c=r.texData.get(i.dataId),l=new m7(p7,o.shape,i.shape),f=new m7(h7,o.shape,i.shape),d=[{dataId:u.complexTensorInfos.real.dataId,dtype:u.complexTensorInfos.real.dtype,shape:o.shape},{dataId:u.complexTensorInfos.imag.dataId,dtype:u.complexTensorInfos.imag.dtype,shape:o.shape},{dataId:c.complexTensorInfos.real.dataId,dtype:c.complexTensorInfos.real.dtype,shape:i.shape},{dataId:c.complexTensorInfos.imag.dataId,dtype:c.complexTensorInfos.imag.dtype,shape:i.shape}],p=r.runWebGLProgram(l,d,"float32"),h=r.runWebGLProgram(f,d,"float32"),m=t7({inputs:{real:p,imag:h},backend:r});return r.disposeIntermediateTensorInfo(p),r.disposeIntermediateTensorInfo(h),m}if(r.shouldExecuteOnCPU([o,i])){var v=r.texData.get(o.dataId),g=r.texData.get(i.dataId),y=t9(o.shape,i.shape,v.values,g.values,s),b=(0,a.Z)(y,2),x=b[0],w=b[1],k=r.makeTensorInfo(w,s);return r.texData.get(k.dataId).values=x,k}return t=(0,EV.env)().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new J9(v7,o.shape,i.shape):new $9(v7,o.shape,i.shape),r.runWebGLProgram(t,[o,i],s)}var y7={kernelName:EV.Multiply,backendName:"webgl",kernelFunc:g7};function b7(e){var t=e.inputs,n=e.backend,a=e.attrs,o=t.x,i=a.shape,s=n,u=EV.util.sizeFromShape(o.shape),c=EV.util.inferFromImplicitShape(i,u),l=EV.util.sizeFromShape(c);EV.util.assert(u===l,(function(){return"The new shape (".concat(c,") has ").concat(l," elements and the old ")+"shape (".concat(o.shape,") has ").concat(u," elements. The new shape and old ")+"shape must have the same number of elements."}));var f=s.texData.get(o.dataId);return!f.isPacked||A6(o.shape,c)||null!==f.texture&&A6(f.shape,c)?(s.incRef(o.dataId),{dataId:o.dataId,shape:c,dtype:o.dtype}):function(e,t,n){var a=[C6(e.shape)].concat((0,r.Z)(T6(e.shape))),o={dtype:e.dtype,shape:a,dataId:e.dataId},i=[C6(t)].concat((0,r.Z)(T6(t))),s=new E9(i,a),u=[a],c=n.runWebGLProgram(s,[o],e.dtype,u,!0);return{dataId:c.dataId,shape:t,dtype:c.dtype}}(o,c,s)}var x7={kernelName:EV.Reshape,backendName:"webgl",kernelFunc:b7},w7=(0,d.Z)((function e(t,n){(0,f.Z)(this,e),this.variableNames=["x"];var r=t.windowSize,a=t.batchSize,o=t.inSize,i=t.outSize;this.outputShape=[a,i];var s=4*Math.floor(r/4),u=r%4,c="sumValue += dot(values, ones);";if(null!=n){var l=1/n;c="sumValue += dot(values * ".concat(EV.util.isInt(l)?l.toPrecision(2):l,", ones);")}var d="";o%r>0&&(d="\n        if (inIdx < 0 || inIdx >= ".concat(o,") {\n          return 0.0;\n        }\n      ")),this.userCode="\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float getValue(int batch, int inIdx) {\n        ".concat(d,"\n        return getX(batch, inIdx);\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * ").concat(r,";\n\n        float sumValue = 0.0;\n\n        for (int i = 0; i < ").concat(s,"; i += 4) {\n          int inIdx = inOffset + i;\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            getValue(batch, inIdx + 3)\n          );\n\n          ").concat(c,"\n        }\n\n        int inIdx = inOffset + ").concat(s,";\n        if (").concat(1===u,") {\n          vec4 values = vec4(getValue(batch, inIdx), 0.0, 0.0, 0.0);\n\n          ").concat(c,"\n        } else if (").concat(2===u,") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1), 0.0, 0.0);\n\n          ").concat(c,"\n        } else if (").concat(3===u,") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2), 0.0);\n\n          ").concat(c,"\n        }\n        setOutput(sumValue);\n      }\n    ")})),k7=(0,d.Z)((function e(t,n){(0,f.Z)(this,e),this.variableNames=["x"];var r=t.windowSize,a=t.batchSize,o=t.inSize,i=t.outSize;this.outputShape=[a,i];var s="0.0",u="";"prod"===n?s="1.0":"min"===n?(s="1.0 / 1e-20",u="min"):"max"===n&&(s="-1.0 / 1e-20",u="max");var c="".concat(n,"(").concat(n,"(").concat(n,"(")+"minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";"sum"===n?c="sumValue":"prod"===n?c="prodValue":"all"===n?c="allValue":"any"===n&&(c="anyValue");var l=4*Math.floor(r/4),d=r%4,p="\n      if (".concat("sum"===n,") {\n        sumValue += dot(values, ones);\n      } else if (").concat("prod"===n,") {\n        vec2 tmp = vec2(values[0], values[1]) * vec2(values[2], values[3]);\n        prodValue *= tmp[0] * tmp[1];\n      } else {\n        minMaxValue = ").concat(u,"(values, minMaxValue);\n        if (").concat("min"===n," || ").concat("max"===n,") {\n          minMaxValue = ").concat(u,"(values, minMaxValue);\n          bvec4 isNaN = isnan(values);\n          if (isNaN.r || isNaN.g || isNaN.b || isNaN.a) {\n            minMaxValue = vec4(NAN);\n          }\n        }\n      }\n    "),h="vec4";"all"===n?(s="1.0",p="\n        bool reducedAllValue = all(values);\n        float floatedReducedAllValue = float(reducedAllValue);\n        allValue = float(allValue >= 1.0 && floatedReducedAllValue >= 1.0);\n      ",h="bvec4"):"any"===n&&(s="0.0",p="\n        bool reducedAnyValue = any(values);\n        float floatedReducedAnyValue = float(reducedAnyValue);\n        anyValue = float(anyValue >= 1.0 || floatedReducedAnyValue >= 1.0);\n      ",h="bvec4");var m="";o%r>0&&(m="\n        if (inIdx < 0 || inIdx >= ".concat(o,") {\n          return initializationValue;\n        }\n      ")),this.userCode="\n      const float initializationValue = ".concat(s,";\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float getValue(int batch, int inIdx) {\n        ").concat(m,"\n        return getX(batch, inIdx);\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * ").concat(r,";\n\n        vec4 minMaxValue = vec4(").concat(s,");\n        float prodValue = 1.0;\n        float sumValue = 0.0;\n        float allValue = 1.0;\n        float anyValue = 0.0;\n\n        for (int i = 0; i < ").concat(l,"; i += 4) {\n          int inIdx = inOffset + i;\n          ").concat(h," values = ").concat(h,"(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            getValue(batch, inIdx + 3)\n          );\n\n          ").concat(p,"\n        }\n\n        int inIdx = inOffset + ").concat(l,";\n        if (").concat(1===d,") {\n          ").concat(h," values = ").concat(h,"(\n            getValue(batch, inIdx),\n            initializationValue,\n            initializationValue,\n            initializationValue\n          );\n\n          ").concat(p,"\n        } else if (").concat(2===d,") {\n          ").concat(h," values = ").concat(h,"(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            initializationValue,\n            initializationValue\n          );\n\n          ").concat(p,"\n        } else if (").concat(3===d,") {\n          ").concat(h," values = ").concat(h,"(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            initializationValue\n          );\n\n          ").concat(p,"\n        }\n        setOutput(").concat(c,");\n      }\n    ")}));function S7(e,t,n,r){for(var a=function(e){for(var t=[];0===t.length||1!==t[t.length-1].outSize;){var n=t.length?t[t.length-1].outSize:e[1],r=EV.backend_util.computeOptimalWindowSize(n);t.push({inSize:n,windowSize:r,outSize:Math.ceil(n/r)})}return t}(e.shape),o=e,i=0;i<a.length;i++){var s,u=a[i],c=u.inSize,l=u.windowSize,f=u.outSize,d=void 0;d="mean"===n?0===i?new w7({windowSize:l,inSize:c,batchSize:e.shape[0],outSize:f},c):new w7({windowSize:l,inSize:c,batchSize:e.shape[0],outSize:f}):new k7({windowSize:l,inSize:c,batchSize:e.shape[0],outSize:f},n),s=o,o=r.runWebGLProgram(d,[o],t),s.dataId!==e.dataId&&r.disposeIntermediateTensorInfo(s)}return o}var _7=(0,d.Z)((function e(t,n){(0,f.Z)(this,e),this.variableNames=["A"];for(var r=new Array(t.length),a=0;a<r.length;a++)r[a]=t[n[a]];this.outputShape=r,this.rank=r.length;var o=c8(this.rank),i=function(e){var t=e.length;if(t>6)throw Error("Transpose for rank ".concat(t," is not yet supported"));for(var n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u","resRC.v"],r=new Array(t),a=0;a<e.length;a++)r[e[a]]=n[a];return r.join()}(n);this.userCode="\n    void main() {\n      ".concat(o," resRC = getOutputCoords();\n      setOutput(getA(").concat(i,"));\n    }\n    ")}));var N7=(0,d.Z)((function e(t,n){(0,f.Z)(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0;for(var r=new Array(t.length),a=0;a<r.length;a++)r[a]=t[n[a]];if(this.outputShape=r,this.rank=r.length,this.rank>6)throw Error("Packed transpose for rank ".concat(this.rank," is not yet supported."));for(var o=c8(this.rank),i=S9("rc",this.rank),s=new Array(this.rank),u=0;u<n.length;u++)s[n[u]]=i[u];var c="vec2(".concat(s.slice(-2).join(),")"),l="++".concat(i[this.rank-1]," < ").concat(r[this.rank-1]),d="getChannel(getA(".concat(s.join(),"), ").concat(c,")");this.userCode="\n    void main() {\n      ".concat(o," rc = getOutputCoords();\n      vec4 result = vec4(0.);\n      result[0] = ").concat(d,";\n      if(").concat(l,") {\n        result[1] = ").concat(d,";\n      }\n      --").concat(i[this.rank-1],";\n      if(++").concat(i[this.rank-2]," < ").concat(r[this.rank-2],") {\n        result[2] = ").concat(d,";\n        if(").concat(l,") {\n          result[3] = ").concat(d,";\n        }\n      }\n      setOutput(result);\n    }\n    ")}));function E7(e,t,n){var r=(0,EV.env)().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new N7(e.shape,t):new _7(e.shape,t);return n.runWebGLProgram(r,[e],e.dtype)}function C7(e){var t=e.inputs,n=e.backend,r=e.attrs;return function(e,t,n,r){var o=t,i=e.shape.length,s=EV.util.parseAxisParam(o,e.shape),u=s,c=EV.backend_util.getAxesPermutation(u,i),l=null!=c,f=e;l&&(f=E7(e,c,r),u=EV.backend_util.getInnerMostAxes(u.length,i)),EV.backend_util.assertAxesAreInnerMostDims("sum",u,i);var d=EV.backend_util.computeOutAndReduceShapes(f.shape,u),p=(0,a.Z)(d,2),h=p[0],m=p[1],v=h;n&&(v=EV.backend_util.expandShapeToKeepDim(h,s));var g=EV.util.sizeFromShape(m),y=b7({inputs:{x:f},attrs:{shape:[EV.util.sizeFromShape(e.shape)/g,g]},backend:r}),b=S7(y,(0,EV.sumOutType)(e.dtype),"sum",r),x=b7({inputs:{x:b},attrs:{shape:v},backend:r});return r.disposeIntermediateTensorInfo(y),r.disposeIntermediateTensorInfo(b),l&&r.disposeIntermediateTensorInfo(f),x}(t.x,r.axis,r.keepDims,n)}var T7={kernelName:EV.Sum,backendName:"webgl",kernelFunc:C7};function I7(e){for(var t,n=e.inputs,r=e.backend,a=e.attrs,o=n.x,i=a.perm,s=r,u=o.shape.length,c=new Array(u),l=0;l<c.length;l++)c[l]=o.shape[i[l]];if(s.shouldExecuteOnCPU([o])){var f=s.texData.get(o.dataId).values,d=w9(f,o.shape,o.dtype,i,c);t=s.makeTensorInfo(c,o.dtype),s.texData.get(t.dataId).values=d}else t=E7(o,i,s);return t}var O7={kernelName:EV.Transpose,backendName:"webgl",kernelFunc:I7};function A7(e){var t=e.a,n=e.b,r=e.transposeA,a=e.transposeB,o=e.backend,i=e.bias,s=void 0===i?null:i,u=e.preluActivationWeights,c=void 0===u?null:u,l=e.leakyreluAlpha,f=void 0===l?0:l,d=e.activation,p=void 0===d?null:d,h=t.shape.length,m=n.shape.length,v=r?t.shape[h-2]:t.shape[h-1],g=a?n.shape[m-1]:n.shape[m-2],y=r?t.shape[h-1]:t.shape[h-2],b=a?n.shape[m-2]:n.shape[m-1],x=t.shape.slice(0,-2),w=n.shape.slice(0,-2),k=EV.util.sizeFromShape(x),S=EV.util.sizeFromShape(w),_=EV.broadcast_util.assertAndGetBroadcastShape(t.shape.slice(0,-2),n.shape.slice(0,-2)).concat([y,b]);EV.util.assert(v===g,(function(){return"Error in matMul: inner shapes (".concat(v,") and (")+"".concat(g,") of Tensors with shapes ").concat(t.shape," and ")+"".concat(n.shape," and transposeA=").concat(r)+" and transposeB=".concat(a," must match.")}));var N,E=r?[k,v,y]:[k,y,v],C=a?[S,b,g]:[S,g,b],T=b7({inputs:{x:t},backend:o,attrs:{shape:E}}),I=b7({inputs:{x:n},backend:o,attrs:{shape:C}}),O=[T,I],A=Math.max(k,S),D=r?T.shape[1]:T.shape[2],M=null!=s,R=null!=c,P="leakyrelu"===p,j=null!=p?f7(p,!0):null;if((1===y||1===b)&&D>1e3&&!1===(M||R||P||null!=j)){var F=T,L=I;r&&(F=I7({inputs:{x:T},backend:o,attrs:{perm:[0,2,1]}}),O.push(F)),a&&(L=I7({inputs:{x:I},backend:o,attrs:{perm:[0,2,1]}}),O.push(L));var B=1===b,z=F;1!==b&&(z=b7({inputs:{x:F},backend:o,attrs:{shape:[A,D,1]}}),O.push(z));var Z=1===b?2:1,V=L;B&&(V=b7({inputs:{x:L},backend:o,attrs:{shape:[A,1,D]}}),O.push(V));var U=g7({inputs:{a:z,b:V},backend:o});N=C7({inputs:{x:U},backend:o,attrs:{axis:Z,keepDims:!0}}),O.push(U)}else{var q=(0,EV.upcastType)(t.dtype,n.dtype),W=new d7(E,C,[A,y,b],r,a,M,j,R,P),H=[T,I];if(null!=s&&H.push(s),R&&H.push(c),P){var G=o.makeTensorInfo([],"float32",EV.util.createScalarValue(f,"float32"));H.push(G),O.push(G)}N=o.runWebGLProgram(W,H,q)}var K=b7({inputs:{x:N},backend:o,attrs:{shape:_}});O.push(N);for(var X=0,Y=O;X<Y.length;X++){var $=Y[X];o.disposeIntermediateTensorInfo($)}return K}var D7={kernelName:EV._FusedMatMul,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.a,o=t.b,i=t.bias,s=t.preluActivationWeights,u=r.transposeA,c=r.transposeB,l=r.activation;return A7({a:a,b:o,transposeA:u,transposeB:c,backend:n,bias:i,preluActivationWeights:s,leakyreluAlpha:r.leakyreluAlpha,activation:l})}},M7="return abs(x);";var R7={kernelName:EV.Abs,backendName:"webgl",kernelFunc:function(e){var t,n=e.inputs,r=e.backend,a=n.x;if(r.shouldExecuteOnCPU([a])&&"complex64"!==a.dtype){var o=r.texData.get(a.dataId),i=u9(o.values);return r.makeTensorInfo(a.shape,a.dtype,i)}return t=(0,EV.env)().getBool("WEBGL_PACK_UNARY_OPERATIONS")?new W9(a.shape,M7):new A9(a.shape,M7),r.runWebGLProgram(t,[a],a.dtype)}},P7=c7({opSnippet:"if (isnan(x)) return x;\n  if (abs(x) > 1.) {\n    return NAN;\n  }\n  return acos(x);\n"}),j7={kernelName:EV.Acos,backendName:"webgl",kernelFunc:P7},F7=c7({opSnippet:"if (isnan(x)) return x;\n  if (x < 1.0) return NAN;\nreturn log(x + sqrt(x * x - 1.0));"}),L7={kernelName:EV.Acosh,backendName:"webgl",kernelFunc:F7},B7="return a + b;",z7=l7({opSnippet:B7,packedOpSnippet:B7,supportsComplex:!0,cpuKernelImpl:P8}),Z7={kernelName:EV.Add,backendName:"webgl",kernelFunc:z7},V7=(0,d.Z)((function e(t,n){(0,f.Z)(this,e),this.outputShape=[],this.outputShape=t,this.variableNames=n.map((function(e,t){return"T".concat(t)}));var r=[];this.variableNames.forEach((function(e){r.push("float v".concat(e," = get").concat(e,"AtOutCoords();"))}));var a=this.variableNames.map((function(e){return"v".concat(e)})).join(" + ");this.userCode="\n      void main() {\n        ".concat(r.join("\n        "),"\n\n        float result = ").concat(a,";\n        setOutput(result);\n      }\n    ")})),U7=(0,d.Z)((function e(t,n){(0,f.Z)(this,e),this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t,this.variableNames=n.map((function(e,t){return"T".concat(t)}));var r=[];this.variableNames.forEach((function(e){r.push("vec4 v".concat(e," = get").concat(e,"AtOutCoords();"))}));var a=this.variableNames.map((function(e){return"v".concat(e)})).join(" + ");this.userCode="\n      void main() {\n        ".concat(r.join("\n        "),"\n\n        vec4 result = ").concat(a,";\n        setOutput(result);\n      }\n    ")}));var q7={kernelName:EV.AddN,backendName:"webgl",kernelFunc:function e(t){var n=t.inputs,r=t.backend,a=n;if(1===a.length)return Q9({inputs:{x:a[0]},backend:r});if(a.length>(0,EV.env)().get("WEBGL_MAX_TEXTURES_IN_SHADER")){var o=Math.floor(a.length/2),i=e({inputs:a.slice(0,o),backend:r}),s=e({inputs:a.slice(o),backend:r});return e({inputs:[i,s],backend:r})}var u=a.map((function(e){return e.dtype})).reduce((function(e,t){return(0,EV.upcastType)(e,t)})),c=a.map((function(e){return e.shape})),l=(0,EV.env)().getBool("WEBGL_PACK")?new U7(a[0].shape,c):new V7(a[0].shape,c);return r.runWebGLProgram(l,a,u)}};var W7={kernelName:EV.All,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,o=t.x,i=r.axis,s=r.keepDims,u=o.shape.length,c=EV.util.parseAxisParam(i,o.shape),l=c,f=EV.backend_util.getAxesPermutation(l,u),d=o;null!=f&&(d=I7({inputs:{x:o},backend:n,attrs:{perm:f}}),l=EV.backend_util.getInnerMostAxes(l.length,u)),EV.backend_util.assertAxesAreInnerMostDims("all",l,u);var p,h=EV.backend_util.computeOutAndReduceShapes(d.shape,l),m=(0,a.Z)(h,2),v=m[0],g=m[1],y=b7({inputs:{x:d},backend:n,attrs:{shape:[-1,EV.util.sizeFromShape(g)]}}),b=S7(y,y.dtype,"all",n);return p=b7(s?{inputs:{x:b},backend:n,attrs:{shape:EV.backend_util.expandShapeToKeepDim(v,c)}}:{inputs:{x:b},backend:n,attrs:{shape:v}}),n.disposeIntermediateTensorInfo(y),n.disposeIntermediateTensorInfo(b),null!=f&&n.disposeIntermediateTensorInfo(d),p}};var H7={kernelName:EV.Any,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,o=t.x,i=r.axis,s=r.keepDims,u=o.shape.length,c=EV.util.parseAxisParam(i,o.shape),l=c,f=EV.backend_util.getAxesPermutation(l,u),d=o;null!=f&&(d=I7({inputs:{x:o},backend:n,attrs:{perm:f}}),l=EV.backend_util.getInnerMostAxes(l.length,u)),EV.backend_util.assertAxesAreInnerMostDims("any",l,u);var p,h=EV.backend_util.computeOutAndReduceShapes(d.shape,l),m=(0,a.Z)(h,2),v=m[0],g=m[1],y=b7({inputs:{x:d},backend:n,attrs:{shape:[-1,EV.util.sizeFromShape(g)]}}),b=S7(y,y.dtype,"any",n);return p=b7(s?{inputs:{x:b},backend:n,attrs:{shape:EV.backend_util.expandShapeToKeepDim(v,c)}}:{inputs:{x:b},backend:n,attrs:{shape:v}}),n.disposeIntermediateTensorInfo(y),n.disposeIntermediateTensorInfo(b),null!=f&&n.disposeIntermediateTensorInfo(d),p}},G7=(0,d.Z)((function e(t,n,r){(0,f.Z)(this,e),this.variableNames=["A"];var a=t.windowSize,o=t.batchSize,i=t.outSize;r||this.variableNames.push("bestIndicesA"),this.outputShape=[o,i];var s="max"===n?">":"<",u=r?"inOffset + i;":"round(getBestIndicesA(batch, inOffset + i));";this.userCode="\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * ".concat(a,";\n\n        int bestIndex = inOffset;\n        float bestValue = getA(batch, bestIndex);\n\n        for (int i = 0; i < ").concat(a,"; i++) {\n          int inIdx = ").concat(u,";\n          float candidate = getA(batch, inIdx);\n          if (candidate ").concat(s," bestValue) {\n            bestValue = candidate;\n            bestIndex = inIdx;\n          }\n        }\n        setOutput(float(bestIndex));\n      }\n    ")})),K7=(0,d.Z)((function e(t,n,r,a){(0,f.Z)(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,EV.util.assert(t.length>2,(function(){return"Packed arg".concat(r.charAt(0).toUpperCase()+r.slice(1)," supports only inputs with rank above 2.")}));var o=t[t.length-1],i=Math.ceil(o/n);this.outputShape=t.slice(0,-1),i>1&&this.outputShape.push(i),a||this.variableNames.push("bestIndicesA");var s,u,c=this.outputShape,l=c.length,d=c8(l),p=_9("coords",l);if(1===i){var h=c8(u=l+1);s="\n        ".concat(h," sourceLocR = ").concat(h,"(").concat(p.join(),", 0);\n        ++").concat(p[l-1],";\n        ").concat(h," sourceLocG = ").concat(h,"(").concat(p.join(),", 0);\n        ++").concat(p[l-2],";\n        ").concat(h," sourceLocA = ").concat(h,"(").concat(p.join(),", 0);\n        --").concat(p[l-1],";\n        ").concat(h," sourceLocB = ").concat(h,"(").concat(p.join(),", 0);\n        --").concat(p[l-2],";")}else u=l,s="\n        ".concat(d," sourceLocR = coords;\n        ++").concat(p[l-1],";\n        ").concat(d," sourceLocG = coords;\n        ++").concat(p[l-2],";\n        ").concat(d," sourceLocA = coords;\n        --").concat(p[l-1],";\n        ").concat(d," sourceLocB = coords;\n        --").concat(p[l-2],";");var m=["x","y","z","w","u","v"].slice(0,u),v="."+m[u-1],g=m.map((function(e){return"int "+e})),y=_9("sourceLocR",u-1).concat("inIdx.r"),b=_9("sourceLocG",u-1).concat("inIdx.g"),x=_9("sourceLocB",u-1).concat("inIdx.b"),w=_9("sourceLocA",u-1).concat("inIdx.a"),k="max"===r?"greaterThan":"lessThan",S=a?"":"\n          inIdx = round(vec4(getBestIndicesAChannel(".concat(y.join(),"),\n                             getBestIndicesAChannel(").concat(b.join(),"),\n                             getBestIndicesAChannel(").concat(x.join(),"),\n                             getBestIndicesAChannel(").concat(w.join(),")));"),_="vec4(\n            getAChannel(".concat(y.join(),"),\n            hasNextCol ? getAChannel(").concat(b.join(),") : 0.,\n            hasNextRow ? getAChannel(").concat(x.join(),") : 0.,\n            hasNextRow && hasNextCol ? getAChannel(").concat(w.join(),") : 0.)"),N=a?"":"\n      float getBestIndicesAChannel(".concat(g.join(),") {\n        return getChannel(getBestIndicesA(").concat(m.join(),"),\n                                          vec2(").concat(m.slice(-2).join(),"));\n      }");this.userCode="\n      float getAChannel(".concat(g.join(),") {\n        return getChannel(getA(").concat(m.join(),"),\n                               vec2(").concat(m.slice(-2).join(),"));\n      }\n      ").concat(N,"\n      void main() {\n        ").concat(d," coords = getOutputCoords();\n        bool hasNextCol = ").concat(p[l-1]," < ").concat(c[l-1]-1,";\n        bool hasNextRow = ").concat(p[l-2]," < ").concat(c[l-2]-1,";\n        ").concat(s,"\n        ivec4 srcIdx = ivec4(sourceLocR").concat(v,", sourceLocG").concat(v,",\n          sourceLocB").concat(v,", sourceLocA").concat(v,") * ").concat(n,";\n        ivec4 inIdx = srcIdx;\n        vec4 bestIndex = vec4(inIdx);\n        vec4 bestValue = ").concat(_,";\n\n        for (int i = 0; i < ").concat(n,"; i++) {\n          inIdx = srcIdx;\n          ").concat(S,"\n          vec4 candidate = ").concat(_,";\n          bvec4 nan = isnan(candidate);\n          bvec4 replace = bvec4(\n            vec4(").concat(k,"(candidate, bestValue)) * (vec4(1.0) - vec4(nan)));\n\n          bestValue = vec4(replace.x  ? candidate.x : bestValue.x,\n                           replace.y  ? candidate.y : bestValue.y,\n                           replace.z  ? candidate.z : bestValue.z,\n                           replace.w  ? candidate.w : bestValue.w);\n          bestIndex = mix(bestIndex, vec4(inIdx), vec4(replace));\n          srcIdx++;\n        }\n        setOutput(bestIndex);\n      }\n    ")}));function X7(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,a=t.shape[0],o=t.shape[1];null!=r&&(a=r.shape[0],o=r.shape[1]);var i=EV.backend_util.computeOptimalWindowSize(o),s={windowSize:i,inSize:o,batchSize:a,outSize:Math.ceil(o/i)},u=new G7(s,n,null==r),c=[t];null!=r&&c.push(r);var l=e.runWebGLProgram(u,c,"int32");if(1===l.shape[1])return l;var f=X7(e,t,n,l);return e.disposeIntermediateTensorInfo(l),f}function Y7(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,a=null!=r?r.shape:t.shape,o=a[a.length-1],i=EV.backend_util.computeOptimalWindowSize(o),s=new K7(a,i,n,null==r),u=null==r?[t]:[t,r],c=e.runWebGLProgram(s,u,"int32");if(c.shape.length===t.shape.length){var l=Y7(e,t,n,c);return e.disposeIntermediateTensorInfo(c),l}return c}function $7(e,t,n,r){var o=[n];if(EV.backend_util.assertAxesAreInnerMostDims("arg"+r.charAt(0).toUpperCase()+r.slice(1),o,t.shape.length),!(0,EV.env)().getBool("WEBGL_PACK_REDUCE")||t.shape.length<=2){var i=[],s=e.texData.get(t.dataId),u=t;null!==s&&s.isPacked&&(u=e.unpackTensor(t),i.push(u));var c=EV.backend_util.computeOutAndReduceShapes(u.shape,o),l=(0,a.Z)(c,2),f=l[0],d=l[1],p=EV.util.sizeFromShape(d),h=b7({inputs:{x:u},backend:e,attrs:{shape:[-1,p]}});i.push(h);var m=X7(e,h,r);i.push(m);var v=b7({inputs:{x:m},backend:e,attrs:{shape:f}});return i.forEach((function(t){return e.disposeIntermediateTensorInfo(t)})),v}return Y7(e,t,r)}var J7={kernelName:EV.ArgMax,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.axis,i=EV.util.parseAxisParam(o,a.shape),s=EV.backend_util.getAxesPermutation(i,a.shape.length),u=a,c=[];null!=s&&(u=I7({inputs:{x:a},backend:n,attrs:{perm:s}}),c.push(u),i=EV.backend_util.getInnerMostAxes(i.length,u.shape.length)),EV.backend_util.assertAxesAreInnerMostDims("argMax",[i[0]],u.shape.length);var l=$7(n,u,i[0],"max");return c.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),l}};var Q7={kernelName:EV.ArgMin,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.axis,i=EV.util.parseAxisParam(o,a.shape),s=EV.backend_util.getAxesPermutation(i,a.shape.length),u=a,c=[];null!=s&&(u=I7({inputs:{x:a},backend:n,attrs:{perm:s}}),c.push(u),i=EV.backend_util.getInnerMostAxes(i.length,u.shape.length)),EV.backend_util.assertAxesAreInnerMostDims("argMin",[i[0]],u.shape.length);var l=$7(n,u,i[0],"min");return c.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),l}},eee=c7({opSnippet:"if (isnan(x)) return x;\n  if (abs(x) > 1.) {\n    return NAN;\n  }\n  return asin(x);\n"}),tee={kernelName:EV.Asin,backendName:"webgl",kernelFunc:eee},nee=c7({opSnippet:"if (isnan(x)) return x;return log(x + sqrt(x * x + 1.0));"}),ree={kernelName:EV.Asinh,backendName:"webgl",kernelFunc:nee},aee=c7({opSnippet:"if (isnan(x)) return x;\n  return atan(x);\n"}),oee={kernelName:EV.Atan,backendName:"webgl",kernelFunc:aee},iee=l7({opSnippet:"\n  if (isnan(a)) return a;\n  if (isnan(b)) return b;\n\n  return atan(a, b);\n",packedOpSnippet:"\n  vec4 result = atan(a, b);\n  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));\n  \n  result.r = isNaN.r > 0. ? NAN : result.r;\n  result.g = isNaN.g > 0. ? NAN : result.g;\n  result.b = isNaN.b > 0. ? NAN : result.b;\n  result.a = isNaN.a > 0. ? NAN : result.a;\n\n  return result;\n"}),see={kernelName:EV.Atan2,backendName:"webgl",kernelFunc:iee},uee=c7({opSnippet:"if (isnan(x)) return x;\n  if ((x < -1.0) || (x > 1.0)) return NAN;\nreturn (log(1.0 + x) - log(1.0 - x)) / 2.0;"}),cee={kernelName:EV.Atanh,backendName:"webgl",kernelFunc:uee},lee=(0,d.Z)((function e(t,n,r){var a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if((0,f.Z)(this,e),this.variableNames=["x"],"avg"===n&&r)throw new Error("Cannot compute positions for average pool.");var i=t.filterWidth,s=t.strideHeight,u=t.strideWidth,c=t.dilationHeight,l=t.dilationWidth,d=t.effectiveFilterHeight,p=t.effectiveFilterWidth,h=t.padInfo.top,m=t.padInfo.left;this.outputShape=t.outShape;var v="avg"===n,g="((batch  * ".concat(t.inHeight," + xR) * ").concat(t.inWidth," + xC) * ").concat(t.inChannels," + d"),y="(xR * ".concat(t.inWidth," + xC) * ").concat(t.inChannels," + d"),b="0.0";if(v||(b="-1.0 / 1e-20"),r){var x=">=";this.userCode="\n        const ivec2 strides = ivec2(".concat(s,", ").concat(u,");\n        const ivec2 pads = ivec2(").concat(h,", ").concat(m,");\n\n        void main() {\n          ivec4 coords = getOutputCoords();\n          int batch = coords[0];\n          int d = coords[3];\n\n          ivec2 xRCCorner = coords.yz * strides - pads;\n          int xRCorner = xRCCorner.x;\n          int xCCorner = xRCCorner.y;\n\n          // max/min x(?, ?, d) to get y(yR, yC, d).\n          // ? = to be determined\n          float minMaxValue = 0.0;\n          float minMaxValueFound = 0.0;\n          int minMaxPosition = 0;\n          float avgValue = 0.0;\n\n          for (int wR = 0; wR < ").concat(d,";\n              wR += ").concat(c,") {\n            int xR = xRCorner + wR;\n\n            if (xR < 0 || xR >= ").concat(t.inHeight,") {\n              continue;\n            }\n\n            for (int wC = 0; wC < ").concat(p,";\n                wC += ").concat(l,") {\n              int xC = xCCorner + wC;\n\n              if (xC < 0 || xC >= ").concat(t.inWidth,") {\n                continue;\n              }\n\n              float value = getX(batch, xR, xC, d);\n\n              // If a min / max value has already been found, use it. If not,\n              // use the current value.\n              float currMinMaxValue = mix(\n                  value, minMaxValue, minMaxValueFound);\n              if (value ").concat(x," currMinMaxValue) {\n                minMaxValue = value;\n                minMaxValueFound = 1.0;\n                minMaxPosition = ").concat(a?o?g:y:"wR * ".concat(p," + wC"),";\n              }\n            }\n          }\n          setOutput(float(minMaxPosition));\n        }\n      ")}else{var w="max",k="".concat(n,"(").concat(n,"(").concat(n,"(")+"minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";"avg"===n&&(k="avgValue / count");var S=4*Math.floor(i/4),_=i%4,N="\n      if (".concat(v,") {\n        avgValue += dot(values, ones);\n      } else {\n        minMaxValue = ").concat(w,"(values, minMaxValue);\n      }\n    ");this.userCode="\n      const ivec2 strides = ivec2(".concat(s,", ").concat(u,");\n      const ivec2 pads = ivec2(").concat(h,", ").concat(m,");\n      const float initializationValue = ").concat(b,";\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float count = 0.0;\n\n      float getValue(int batch, int xR, int xC, int d) {\n        if (xC < 0 || xC >= ").concat(t.inWidth,") {\n          return initializationValue;\n        }\n        count += 1.0;\n        return getX(batch, xR, xC, d);\n      }\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d = coords[3];\n\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // max/min x(?, ?, d) to get y(yR, yC, d).\n        // ? = to be determined\n        vec4 minMaxValue = vec4(").concat(b,");\n        float avgValue = 0.0;\n        count = 0.0;\n\n        for (int wR = 0; wR < ").concat(d,";\n            wR += ").concat(c,") {\n          int xR = xRCorner + wR;\n\n          if (xR < 0 || xR >= ").concat(t.inHeight,") {\n            continue;\n          }\n\n          for (int wC = 0; wC < ").concat(S,"; wC += 4) {\n            int xC = xCCorner + wC * ").concat(l,";\n\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + ").concat(l,", d),\n              getValue(batch, xR, xC + 2 * ").concat(l,", d),\n              getValue(batch, xR, xC + 3 * ").concat(l,", d)\n            );\n\n            ").concat(N,"\n          }\n\n          int xC = xCCorner + ").concat(S,";\n          if (").concat(1===_,") {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              initializationValue,\n              initializationValue,\n              initializationValue\n            );\n\n            ").concat(N,"\n          } else if (").concat(2===_,") {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + ").concat(l,", d),\n              initializationValue,\n              initializationValue\n            );\n\n            ").concat(N,"\n          } else if (").concat(3===_,") {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + ").concat(l,", d),\n              getValue(batch, xR, xC + 2 * ").concat(l,", d),\n              initializationValue\n            );\n\n            ").concat(N,"\n          }\n        }\n        setOutput(").concat(k,");\n      }\n    ")}})),fee=(0,d.Z)((function e(t,n,r){var a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if((0,f.Z)(this,e),this.variableNames=["x"],"avg"===n&&r)throw new Error("Cannot compute positions for average pool.");var i=t.filterWidth,s=t.strideDepth,u=t.strideHeight,c=t.strideWidth,l=t.dilationDepth,d=t.dilationHeight,p=t.dilationWidth,h=t.effectiveFilterDepth,m=t.effectiveFilterHeight,v=t.effectiveFilterWidth,g=t.padInfo.front,y=t.padInfo.top,b=t.padInfo.left;this.outputShape=t.outShape;var x="avg"===n,w="0.0";if(x||(w="-1.0 / 1e-20"),r){var k=">=";this.userCode="\n        const ivec3 strides =\n            ivec3(".concat(s,", ").concat(u,", ").concat(c,");\n        const ivec3 pads = ivec3(").concat(g,", ").concat(y,", ").concat(b,");\n\n        void main() {\n          ivec5 coords = getOutputCoords();\n          int batch = coords.x;\n          int ch = coords.u;\n\n          ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\n          int xDCorner = xCorner.x;\n          int xRCorner = xCorner.y;\n          int xCCorner = xCorner.z;\n\n          // max/min x(?, ?, ?, ch) to get y(yD, yR, yC, ch).\n          // ? = to be determined\n          float minMaxValue = 0.0;\n          float minMaxValueFound = 0.0;\n          int minMaxPosition = 0;\n\n          for (int wD = 0; wD < ").concat(h,";\n              wD += ").concat(l,") {\n            int xD = xDCorner + wD;\n\n            if (xD < 0 || xD >= ").concat(t.inDepth,") {\n              continue;\n            }\n\n            for (int wR = 0; wR < ").concat(m,";\n                wR += ").concat(d,") {\n              int xR = xRCorner + wR;\n\n              if (xR < 0 || xR >= ").concat(t.inHeight,") {\n                continue;\n              }\n\n              for (int wC = 0; wC < ").concat(v,";\n                  wC += ").concat(p,") {\n                int xC = xCCorner + wC;\n\n                if (xC < 0 || xC >= ").concat(t.inWidth,") {\n                  continue;\n                }\n\n                float value = getX(batch, xD, xR, xC, ch);\n\n                // If a min / max value has already been found, use it. If not,\n                // use the current value.\n                float currMinMaxValue = mix(\n                    value, minMaxValue, minMaxValueFound);\n                if (value ").concat(k," currMinMaxValue) {\n                  minMaxValue = value;\n                  minMaxValueFound = 1.0;\n                  minMaxPosition = ").concat(a?o?"(((batch * ".concat(t.inDepth," + xD) * ").concat(t.inHeight," + xR) * ").concat(t.inWidth," + xC) * ").concat(t.inChannels," + ch"):"((xD * ".concat(t.inHeight," + xR) * ").concat(t.inWidth," + xC) * ").concat(t.inChannels," + ch"):"wD * ".concat(m," * ").concat(v," +\n                      wR * ").concat(v," + wC"),";\n                }\n              }\n            }\n          }\n          setOutput(float(minMaxPosition));\n        }\n      ")}else{var S="max",_="".concat(n,"(").concat(n,"(").concat(n,"(")+"minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";"avg"===n&&(_="avgValue / count");var N=4*Math.floor(i/4),E=i%4,C="\n      if (".concat(x,") {\n        avgValue += dot(values, ones);\n      } else {\n        minMaxValue = ").concat(S,"(values, minMaxValue);\n      }\n    ");this.userCode="\n      const ivec3 strides =\n        ivec3(".concat(s,", ").concat(u,", ").concat(c,");\n      const ivec3 pads = ivec3(").concat(g,", ").concat(y,", ").concat(b,");\n      const float initializationValue = ").concat(w,";\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float count = 0.0;\n\n      float getValue(int batch, int xD, int xR, int xC, int ch) {\n        if (xC < 0 || xC >= ").concat(t.inWidth,") {\n          return initializationValue;\n        }\n        count += 1.0;\n        return getX(batch, xD, xR, xC, ch);\n      }\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int ch = coords.u;\n\n        ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\n        int xDCorner = xCorner.x;\n        int xRCorner = xCorner.y;\n        int xCCorner = xCorner.z;\n\n        // max/min x(?, ?, ?, d) to get y(yD, yR, yC, ch).\n        // ? = to be determined\n        vec4 minMaxValue = vec4(").concat(w,");\n        float avgValue = 0.0;\n        count = 0.0;\n\n        for (int wD = 0; wD < ").concat(h,";\n            wD += ").concat(l,") {\n          int xD = xDCorner + wD;\n\n          if (xD < 0 || xD >= ").concat(t.inDepth,") {\n            continue;\n          }\n\n          for (int wR = 0; wR < ").concat(m,";\n            wR += ").concat(d,") {\n            int xR = xRCorner + wR;\n\n            if (xR < 0 || xR >= ").concat(t.inHeight,") {\n              continue;\n            }\n\n            for (int wC = 0; wC < ").concat(N,"; wC += 4) {\n              int xC = xCCorner + wC * ").concat(p,";\n\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                getValue(batch, xD, xR, xC + ").concat(p,", ch),\n                getValue(batch, xD, xR, xC + 2 * ").concat(p,", ch),\n                getValue(batch, xD, xR, xC + 3 * ").concat(p,", ch)\n              );\n\n              ").concat(C,"\n            }\n\n            int xC = xCCorner + ").concat(N,";\n            if (").concat(1===E,") {\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                initializationValue,\n                initializationValue,\n                initializationValue\n              );\n\n              ").concat(C,"\n            } else if (").concat(2===E,") {\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                getValue(batch, xD, xR, xC + ").concat(p,", ch),\n                initializationValue,\n                initializationValue\n              );\n\n              ").concat(C,"\n            } else if (").concat(3===E,") {\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                getValue(batch, xD, xR, xC + ").concat(p,", ch),\n                getValue(batch, xD, xR, xC + 2 * ").concat(p,", ch),\n                initializationValue\n              );\n\n              ").concat(C,"\n            }\n          }\n          setOutput(").concat(_,");\n        }\n      }\n    ")}}));var dee={kernelName:EV.AvgPool,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x;j6(a,"avgPool");var o=r.filterSize,i=r.strides,s=r.pad,u=r.dimRoundingMode;EV.util.assert(EV.backend_util.eitherStridesOrDilationsAreOne(i,1),(function(){return"Error in avgPool: Either strides or dilations must be 1. "+"Got strides ".concat(i," and dilations '").concat(1,"'")}));var c=EV.backend_util.computePool2DInfo(a.shape,o,i,1,s,u);if(1===c.filterWidth&&1===c.filterHeight&&EV.util.arraysEqual(c.inShape,c.outShape))return Q9({inputs:{x:a},backend:n});var l=new lee(c,"avg",!1);return n.runWebGLProgram(l,[a],"float32")}};var pee={kernelName:EV.AvgPool3D,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.filterSize,i=r.strides,s=r.pad,u=r.dimRoundingMode,c=r.dataFormat,l=EV.backend_util.computePool3DInfo(a.shape,o,i,[1,1,1],s,u,c),f=new fee(l,"avg",!1);return n.runWebGLProgram(f,[a],"float32")}},hee=(0,d.Z)((function e(t){(0,f.Z)(this,e),this.variableNames=["dy"],this.outputShape=t.inShape;var n=t.filterHeight,r=t.filterWidth,a=t.strideHeight,o=t.strideWidth,i=t.dilationHeight,s=t.dilationWidth,u=t.effectiveFilterHeight,c=t.effectiveFilterWidth,l=u-1-t.padInfo.top,d=c-1-t.padInfo.left,p=1/(n*r);this.userCode="\n      const ivec2 pads = ivec2(".concat(l,", ").concat(d,");\n      const float avgMultiplier = float(").concat(p,");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n\n        ivec2 dyRCCorner = coords.yz - pads;\n        int dyRCorner = dyRCCorner.x;\n        int dyCCorner = dyRCCorner.y;\n\n        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < ").concat(u,";\n            wR += ").concat(i,") {\n          float dyR = float(dyRCorner + wR) / ").concat(a,".0;\n\n          if (dyR < 0.0 || dyR >= ").concat(t.outHeight,".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          for (int wC = 0; wC < ").concat(c,";\n            wC+= ").concat(s,") {\n            float dyC = float(dyCCorner + wC) / ").concat(o,".0;\n\n            if (dyC < 0.0 || dyC >= ").concat(t.outWidth,".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            float dyValue = getDy(b, idyR, idyC, d);\n\n            dotProd += dyValue * avgMultiplier;\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")})),mee=(0,d.Z)((function e(t){(0,f.Z)(this,e),this.variableNames=["dy"],this.outputShape=t.inShape;var n=t.filterDepth,r=t.filterHeight,a=t.filterWidth,o=t.strideDepth,i=t.strideHeight,s=t.strideWidth,u=t.dilationDepth,c=t.dilationHeight,l=t.dilationWidth,d=t.effectiveFilterDepth,p=t.effectiveFilterHeight,h=t.effectiveFilterWidth,m=d-1-t.padInfo.front,v=p-1-t.padInfo.top,g=h-1-t.padInfo.left,y=1/(n*r*a);this.userCode="\n      const ivec3 pads = ivec3(".concat(m,", ").concat(v,", ").concat(g,");\n      const float avgMultiplier = float(").concat(y,");\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int ch = coords.u;\n\n        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;\n        int dyDCorner = dyCorner.x;\n        int dyRCorner = dyCorner.y;\n        int dyCCorner = dyCorner.z;\n\n        // Convolve dy(?, ?, ?, d) with pos mask(:, :, :, ch) to get\n        // dx(xD, xR, xC, ch).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int wD = 0; wD < ").concat(d,";\n            wD += ").concat(u,") {\n          float dyD = float(dyDCorner + wD) / ").concat(o,".0;\n\n          if (dyD < 0.0 || dyD >= ").concat(t.outDepth,".0 || fract(dyD) > 0.0) {\n            continue;\n          }\n          int idyD = int(dyD);\n\n          for (int wR = 0; wR < ").concat(p,";\n              wR += ").concat(c,") {\n            float dyR = float(dyRCorner + wR) / ").concat(i,".0;\n\n            if (dyR < 0.0 || dyR >= ").concat(t.outHeight,".0 ||\n                fract(dyR) > 0.0) {\n              continue;\n            }\n            int idyR = int(dyR);\n\n            for (int wC = 0; wC < ").concat(h,";\n                wC += ").concat(l,") {\n              float dyC = float(dyCCorner + wC) / ").concat(s,".0;\n\n              if (dyC < 0.0 || dyC >= ").concat(t.outWidth,".0 ||\n                  fract(dyC) > 0.0) {\n                continue;\n              }\n              int idyC = int(dyC);\n\n              float dyValue = getDy(batch, idyD, idyR, idyC, ch);\n\n              dotProd += dyValue * avgMultiplier;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")}));var vee={kernelName:EV.AvgPool3DGrad,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,o=t.input,i=r.filterSize,s=r.strides,u=r.pad,c=r.dimRoundingMode,l=EV.backend_util.computePool3DInfo(o.shape,i,s,[1,1,1],u,c),f=new mee(l);return n.runWebGLProgram(f,[a],o.dtype)}};var gee={kernelName:EV.AvgPoolGrad,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,o=t.input,i=o;j6([a,o],"avgPoolGrad");var s=r.filterSize,u=r.strides,c=r.pad,l=EV.backend_util.computePool2DInfo(i.shape,s,u,1,c),f=new hee(l);return n.runWebGLProgram(f,[a],i.dtype)}};var yee={kernelName:EV.BatchMatMul,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs;return A7({a:t.a,b:t.b,transposeA:r.transposeA,transposeB:r.transposeB,backend:n})}},bee=(0,d.Z)((function e(t,n,r,a,o,i){(0,f.Z)(this,e),this.outputShape=[],this.variableNames=["x","mean","variance"],EV.backend_util.assertAndGetBroadcastShape(t,n),EV.backend_util.assertAndGetBroadcastShape(t,r);var s="0.0";null!=a&&(EV.backend_util.assertAndGetBroadcastShape(t,a),this.variableNames.push("offset"),s="getOffsetAtOutCoords()");var u="1.0";null!=o&&(EV.backend_util.assertAndGetBroadcastShape(t,o),this.variableNames.push("scale"),u="getScaleAtOutCoords()"),this.outputShape=t,this.userCode="\n      void main() {\n        float x = getXAtOutCoords();\n        float mean = getMeanAtOutCoords();\n        float variance = getVarianceAtOutCoords();\n        float offset = ".concat(s,";\n        float scale = ").concat(u,";\n        float inv = scale * inversesqrt(variance + float(").concat(i,"));\n        setOutput(dot(vec3(x, -mean, offset), vec3(inv, inv, 1)));\n      }\n    ")})),xee=(0,d.Z)((function e(t,n,r,a,o,i){(0,f.Z)(this,e),this.packedInputs=!0,this.packedOutput=!0,this.variableNames=["x","mean","variance"],EV.backend_util.assertAndGetBroadcastShape(t,n),EV.backend_util.assertAndGetBroadcastShape(t,r);var s="vec4(0.0)";null!=a&&(EV.backend_util.assertAndGetBroadcastShape(t,a),this.variableNames.push("offset"),s="getOffsetAtOutCoords()");var u="vec4(1.0)";null!=o&&(EV.backend_util.assertAndGetBroadcastShape(t,o),this.variableNames.push("scale"),u="getScaleAtOutCoords()"),this.outputShape=t,this.userCode="\n      void main() {\n        vec4 offset = ".concat(s,";\n        vec4 scale = ").concat(u,";\n\n        vec4 x = getXAtOutCoords();\n        vec4 mean = getMeanAtOutCoords();\n        vec4 variance = getVarianceAtOutCoords();\n\n        vec4 inv = scale * inversesqrt(variance + vec4(").concat(i,"));\n\n        setOutput((x - mean) * inv + offset);\n      }\n    ")})),wee={kernelName:EV.FusedBatchNorm,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=t.mean,i=t.variance,s=t.offset,u=t.scale;EV.util.assert(o.shape.length===i.shape.length,(function(){return"Batch normalization gradient requires mean and variance to have equal ranks."})),EV.util.assert(null==s||o.shape.length===s.shape.length,(function(){return"Batch normalization gradient requires mean and offset to have equal ranks."})),EV.util.assert(null==u||o.shape.length===u.shape.length,(function(){return"Batch normalization gradient requires mean and scale to have equal ranks."}));var c=r.varianceEpsilon;null==c&&(c=.001);var l=[a,o,i],f=null;null!=s&&(f=s.shape,l.push(s));var d=null;null!=u&&(d=u.shape,l.push(u));var p=(0,EV.env)().getBool("WEBGL_PACK_NORMALIZATION")?new xee(a.shape,o.shape,i.shape,f,d,c):new bee(a.shape,o.shape,i.shape,f,d,c);return n.runWebGLProgram(p,l,l[0].dtype)}},kee=(0,d.Z)((function e(t){(0,f.Z)(this,e),this.variableNames=["source"],this.outputShape=t,this.rank=t.length;var n=c8(this.rank);this.customUniforms=[{name:"start",arrayIndex:this.rank,type:"int"}];var r,a=function(e){if(1===e)return"sourceLoc";if(e<=6)return See.slice(0,e).map((function(e){return"sourceLoc."+e})).join(",");throw Error("Slicing for rank ".concat(e," is not yet supported"))}(this.rank),o=t.map((function(e,t){return"sourceLoc.".concat(See[t]," = start[").concat(t,"] + coords.").concat(See[t],";")}));r="\n        ".concat(n," sourceLoc;\n        ").concat(n," coords = getOutputCoords();\n        ").concat(o.join("\n"),"\n      "),this.userCode="\n      void main() {\n        ".concat(r,"\n        setOutput(getSource(").concat(a,"));\n      }\n    ")})),See=["x","y","z","w","u","v"];var _ee=(0,d.Z)((function e(t){(0,f.Z)(this,e),this.variableNames=["source"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t,this.rank=t.length,this.customUniforms=[{name:"start",arrayIndex:this.rank,type:"int"}];var n=c8(this.rank),r=_9("coords",this.rank),a=_9("sourceLoc",this.rank),o=1===this.rank?"sourceLoc":"vec2(".concat(a.slice(-2).join(),")"),i="getChannel(getSource(".concat(a.join(),"), ").concat(o,")"),s="\n      result.x = ".concat(i,";\n      if (++").concat(r[this.rank-1]," < ").concat(t[this.rank-1],") {\n        ++").concat(a[this.rank-1],";\n        result.y = ").concat(i,";\n        --").concat(a[this.rank-1],";\n      }\n    "),u=1===this.rank?"":"\n      --".concat(r[this.rank-1],";\n      if (++").concat(r[this.rank-2]," < ").concat(t[this.rank-2],") {\n        ++").concat(a[this.rank-2],";\n        result.z = ").concat(i,";\n        if (++").concat(r[this.rank-1]," < ").concat(t[this.rank-1],") {\n          ++").concat(a[this.rank-1],";\n          result.w = ").concat(i,";\n        }\n      }\n    "),c=this.rank<=4?"sourceLoc = coords +\n            ".concat(n,"(").concat(t.map((function(e,t){return"start[".concat(t,"]")})).join(),");"):t.map((function(e,t){return"".concat(a[t]," = ").concat(r[t]," + start[").concat(t,"];")})).join("\n");this.userCode="\n      void main() {\n        ".concat(n," coords = getOutputCoords();\n        ").concat(n," sourceLoc;\n        ").concat(c,"\n        vec4 result = vec4(0.);\n        ").concat(s,"\n        ").concat(u,"\n        setOutput(result);\n      }\n    ")}));function Nee(e){var t=e.inputs,n=e.backend,r=e.attrs,o=t.x,i=r.begin,s=r.size,u=EV.slice_util.parseSliceParams(o,i,s),c=(0,a.Z)(u,2),l=c[0],f=c[1];if(EV.slice_util.assertParamsValid(o,l,f),0===EV.util.sizeFromShape(f))return n.makeTensorInfo(f,o.dtype,[]);if(n.shouldExecuteOnCPU([o])||"string"===o.dtype){var d=n.texData.get(o.dataId),p=c9(d.values,l,f,o.shape,o.dtype);return n.makeTensorInfo(f,o.dtype,p)}var h=n.texData.get(o.dataId).isPacked,m=EV.slice_util.isSliceContinous(o.shape,l,f);if(h||!m){var v=(0,EV.env)().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new _ee(f):new kee(f),g=[l];return n.runWebGLProgram(v,[o],o.dtype,g)}return n.uploadToGPU(o.dataId),function(e,t,n,r){var a=r.texData.get(e.dataId),o=r.makeTensorInfo(n,e.dtype),i=r.texData.get(o.dataId);Object.assign(i,a),i.refCount=1,i.shape=n,i.dtype=e.dtype;var s=EV.slice_util.computeFlatOffset(t,EV.util.computeStrides(e.shape));a.slice&&(s+=a.slice.flatOffset),i.slice={flatOffset:s,origDataId:a.slice&&a.slice.origDataId||e.dataId};var u=r.dataRefCount.get(i.slice.origDataId)||1;return r.dataRefCount.set(i.slice.origDataId,u+1),o}(o,l,f,n)}var Eee={kernelName:EV.Slice,backendName:"webgl",kernelFunc:Nee},Cee={kernelName:EV.BatchToSpaceND,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.blockShape,i=r.crops;EV.util.assert(a.shape.length<=4,(function(){return"batchToSpaceND for rank > 4 with a WebGL backend not implemented yet"}));var s=o.reduce((function(e,t){return e*t})),u=EV.backend_util.getReshaped(a.shape,o,s),c=EV.backend_util.getPermuted(u.length,o.length),l=EV.backend_util.getReshapedPermuted(a.shape,o,s),f=EV.backend_util.getSliceBeginCoords(i,o.length),d=EV.backend_util.getSliceSize(l,i,o.length),p=[],h=b7({inputs:{x:a},backend:n,attrs:{shape:u}}),m=I7({inputs:{x:h},backend:n,attrs:{perm:c}}),v=b7({inputs:{x:m},backend:n,attrs:{shape:l}}),g=Nee({inputs:{x:v},backend:n,attrs:{begin:f,size:d}});return p.push(h),p.push(m),p.push(v),p.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),g}};var Tee={kernelName:EV.Bincount,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=t.weights,i=r.size,s=n.readSync(a.dataId),u=n.readSync(o.dataId),c=j8(s,u,o.dtype,o.shape,i);return n.makeTensorInfo([i],o.dtype,c)}};var Iee={kernelName:EV.BroadcastArgs,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.s0,a=t.s1,o=n.readSync(r.dataId),i=n.readSync(a.dataId),s=EV.backend_util.assertAndGetBroadcastShape(Array.from(o),Array.from(i));return n.makeTensorInfo([s.length],"int32",Int32Array.from(s))}},Oee=l7({opSnippet:"return float(a != b);",cpuKernelImpl:r9,dtype:"bool"}),Aee={kernelName:EV.NotEqual,backendName:"webgl",kernelFunc:Oee};function Dee(e){var t=e.inputs,n=e.backend,r=t.input;return Q9({inputs:{x:n.texData.get(r.dataId).complexTensorInfos.real},backend:n})}var Mee={kernelName:EV.Real,backendName:"webgl",kernelFunc:Dee};var Ree={kernelName:EV.Cast,backendName:"webgl",kernelFunc:function e(t){var n=t.inputs,r=t.backend,a=t.attrs,o=n.x,i=a.dtype;if("complex64"===i){if("complex64"===o.dtype)return Q9({inputs:{x:o},backend:r});var s=EV.zeros(o.shape),u=e({inputs:{x:o},backend:r,attrs:{dtype:"float32"}}),c=t7({inputs:{real:u,imag:s},backend:r});return s.dispose(),r.disposeIntermediateTensorInfo(u),c}if("complex64"===o.dtype){var l=Dee({inputs:{input:o},backend:r}),f=e({inputs:{x:l},backend:r,attrs:{dtype:i}});return r.disposeIntermediateTensorInfo(l),f}if(!EV.util.hasEncodingLoss(o.dtype,i)){var d=Q9({inputs:{x:o},backend:r});return{dataId:d.dataId,shape:d.shape,dtype:i}}if("int32"===i)return function(e,t){var n=new A9(e.shape,"return float(int(x));"),r=t.runWebGLProgram(n,[e],"int32");return{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}(o,r);if("bool"===i){var p=r.makeTensorInfo([],"bool",EV.util.getTypedArrayFromDType("bool",1)),h=Oee({inputs:{a:o,b:p},backend:r});return r.disposeIntermediateTensorInfo(p),h}throw new Error("Error in Cast: failed to cast ".concat(o.dtype," to ").concat(i))}},Pee="return ceil(x);",jee=c7({opSnippet:Pee,packedOpSnippet:Pee,cpuKernelImpl:L8}),Fee={kernelName:EV.Ceil,backendName:"webgl",kernelFunc:jee},Lee=(0,d.Z)((function e(t){(0,f.Z)(this,e),this.variableNames=["A"],this.customUniforms=[{name:"minVal",type:"float"},{name:"maxVal",type:"float"}],this.outputShape=t,this.userCode="\n\n      void main() {\n        float value = getAAtOutCoords();\n        if (isnan(value)) {\n          setOutput(value);\n          return;\n        }\n\n        setOutput(clamp(value, minVal, maxVal));\n      }\n    "})),Bee=(0,d.Z)((function e(t){(0,f.Z)(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"minVal",type:"float"},{name:"maxVal",type:"float"}],this.outputShape=t,this.userCode="\n      void main() {\n        vec4 value = getAAtOutCoords();\n\n        if (any(isnan(value))) {\n          setOutput(value);\n          return;\n        }\n\n        setOutput(clamp(value, vec4(minVal), vec4(maxVal)));\n      }\n    "}));var zee={kernelName:EV.ClipByValue,backendName:"webgl",kernelFunc:function(e){var t,n=e.inputs,r=e.backend,a=e.attrs,o=n.x,i=a.clipValueMin,s=a.clipValueMax;t=(0,EV.env)().getBool("WEBGL_PACK_CLIP")?new Bee(o.shape):new Lee(o.shape);var u=[[i],[s]];return r.runWebGLProgram(t,[o],o.dtype,u)}},Zee=(0,d.Z)((function e(t){(0,f.Z)(this,e),this.variableNames=["real","imag"],this.outputShape=t,this.userCode="\n      void main() {\n        float re = abs(getRealAtOutCoords());\n        float im = abs(getImagAtOutCoords());\n        float mx = max(re, im);\n\n        // sadly the length function in glsl is not underflow-safe\n        // (at least not on Intel GPUs). So the safe solution is\n        // to ensure underflow-safety in all cases.\n        setOutput(\n          mx == 0.0 ? 0.0 : mx * length(vec2(1, min(re, im)/mx))\n        );\n      }\n    "}));function Vee(e,t){return{dataId:t.dataId,dtype:t.dtype,shape:e.shape}}var Uee={kernelName:EV.ComplexAbs,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.x,a=n.texData.get(r.dataId),o=new Zee(r.shape),i=[Vee(r,a.complexTensorInfos.real),Vee(r,a.complexTensorInfos.imag)];return n.runWebGLProgram(o,i,i[0].dtype)}},qee=(0,d.Z)((function e(t){(0,f.Z)(this,e),this.outputShape=[],this.outputShape=EV.backend_util.computeOutShape(t,1),this.variableNames=t.map((function(e,t){return"T".concat(t)}));var n=new Array(t.length-1);n[0]=t[0][1];for(var r=1;r<n.length;r++)n[r]=n[r-1]+t[r][1];for(var a=["if (yC < ".concat(n[0],") setOutput(getT0(yR, yC));")],o=1;o<n.length;o++){var i=n[o-1];a.push("else if (yC < ".concat(n[o],") ")+"setOutput(getT".concat(o,"(yR, yC-").concat(i,"));"))}var s=n.length,u=n[n.length-1];a.push("else setOutput(getT".concat(s,"(yR, yC-").concat(u,"));")),this.userCode="\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int yR = coords.x;\n        int yC = coords.y;\n\n        ".concat(a.join("\n        "),"\n      }\n    ")})),Wee=(0,d.Z)((function e(t,n){(0,f.Z)(this,e),this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[],this.outputShape=EV.backend_util.computeOutShape(t,n);var r=this.outputShape,a=r.length,o=c8(a),i=_9("coords",a),s=["x","y","z","w","u","v"].slice(0,a);this.variableNames=t.map((function(e,t){return"T".concat(t)}));var u=new Array(t.length-1);u[0]=t[0][n];for(var c=1;c<u.length;c++)u[c]=u[c-1]+t[c][n];for(var l=s[n],d=s.slice(-2),p=s.join(),h="if (".concat(l," < ").concat(u[0],") {\n        return getChannel(\n            getT0(").concat(p,"), vec2(").concat(d.join(),"));\n        }"),m=1;m<u.length;m++){var v=u[m-1];h+="\n        if (".concat(l," < ").concat(u[m],"  && ").concat(l," >= ").concat(u[m-1],") {\n          return getChannel(\n            getT").concat(m,"(").concat(Hee(s,l,v),"),\n            vec2(").concat(Hee(d,l,v),"));\n        }")}var g=u.length,y=u[u.length-1];h+="\n        return getChannel(\n          getT".concat(g,"(").concat(Hee(s,l,y),"),\n          vec2(").concat(Hee(d,l,y),"));"),this.userCode="\n      float getValue(".concat(s.map((function(e){return"int "+e})),") {\n        ").concat(h,"\n      }\n\n      void main() {\n        ").concat(o," coords = getOutputCoords();\n        vec4 result = vec4(getValue(").concat(i,"), 0., 0., 0.);\n\n        ").concat(i[a-1]," = ").concat(i[a-1]," + 1;\n        if (").concat(i[a-1]," < ").concat(r[a-1],") {\n          result.g = getValue(").concat(i,");\n        }\n\n        ").concat(i[a-2]," = ").concat(i[a-2]," + 1;\n        if (").concat(i[a-2]," < ").concat(r[a-2],") {\n          result.a = getValue(").concat(i,");\n        }\n\n        ").concat(i[a-1]," = ").concat(i[a-1]," - 1;\n        if (").concat(i[a-2]," < ").concat(r[a-2]," &&\n            ").concat(i[a-1]," < ").concat(r[a-1],") {\n          result.b = getValue(").concat(i,");\n        }\n        setOutput(result);\n      }\n    ")}));function Hee(e,t,n){var r=e.indexOf(t),a=e.map((function(e,t){return t===r?"".concat(e," - ").concat(n):e}));return a.join()}function Gee(e){var t=e.inputs,n=e.backend,r=t.input;return Q9({inputs:{x:n.texData.get(r.dataId).complexTensorInfos.imag},backend:n})}var Kee={kernelName:EV.Imag,backendName:"webgl",kernelFunc:Gee};function Xee(e,t,n){var r=e[0].dtype;if("complex64"===r){var a=e.map((function(e){return Dee({inputs:{input:e},backend:n})})),o=e.map((function(e){return Gee({inputs:{input:e},backend:n})})),i=Xee(a,t,n),s=Xee(o,t,n),u=t7({inputs:{real:i,imag:s},backend:n});return a.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),o.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(s),u}var c=n.shouldExecuteOnCPU(e);if("string"===r&&(c=!0),c){var l=e.map((function(e){var r=EV.util.sizeFromShape(e.shape.slice(t));return b7({inputs:{x:e},backend:n,attrs:{shape:[-1,r]}})})),f=l.map((function(e){return{vals:n.readSync(e.dataId),shape:e.shape}})),d=EV.backend_util.computeOutShape(l.map((function(e){return e.shape})),1),p=1===l[0].shape[0],h=B8(f,d,r,p),m=EV.backend_util.computeOutShape(e.map((function(e){return e.shape})),t),v=n.makeTensorInfo(m,r,h);return l.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),v}if(e.length>(0,EV.env)().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER")){var g=Math.floor(e.length/2),y=Xee(e.slice(0,g),t,n),b=Xee(e.slice(g),t,n),x=Xee([y,b],t,n);return n.disposeIntermediateTensorInfo(y),n.disposeIntermediateTensorInfo(b),x}if((0,EV.env)().getBool("WEBGL_PACK_ARRAY_OPERATIONS")&&e[0].shape.length>1){var w=new Wee(e.map((function(e){return e.shape})),t);return n.runWebGLProgram(w,e,r)}var k=function(e,t,n){var r=EV.backend_util.computeOutShape(e.map((function(e){return e.shape})),t);return{tensors2D:e.map((function(e){return b7({inputs:{x:e},attrs:{shape:[-1,EV.util.sizeFromShape(e.shape.slice(t))]},backend:n})})),outShape:r}}(e,t,n),S=k.tensors2D,_=k.outShape,N=new qee(S.map((function(e){return e.shape}))),E=n.runWebGLProgram(N,S,r);S.forEach((function(e){return n.disposeIntermediateTensorInfo(e)}));var C=b7({inputs:{x:E},attrs:{shape:_},backend:n});return n.disposeIntermediateTensorInfo(E),C}function Yee(e){var t=e.inputs,n=e.backend,r=e.attrs.axis,a=EV.util.parseAxisParam(r,t[0].shape)[0],o=EV.backend_util.computeOutShape(t.map((function(e){return e.shape})),a);if(0===EV.util.sizeFromShape(o))return n.makeTensorInfo(o,t[0].dtype,[]);var i=t.filter((function(e){return EV.util.sizeFromShape(e.shape)>0}));if(1===i.length)return Q9({inputs:{x:i[0]},backend:n});var s=i.map((function(e){return e.shape}));return EV.backend_util.assertParamsConsistent(s,a),Xee(i,a,n)}var $ee={kernelName:EV.Concat,backendName:"webgl",kernelFunc:Yee},Jee=(0,d.Z)((function e(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];(0,f.Z)(this,e),this.variableNames=["x","W"],this.outputShape=t.outShape;var i=t.padInfo.top,s=t.padInfo.left,u=t.strideHeight,c=t.strideWidth,l=t.dilationHeight,d=t.dilationWidth,p=t.filterHeight,h=t.filterWidth,m=4*Math.floor(t.inChannels/4),v=t.inChannels%4,g="channelsLast"===t.dataFormat,y=g?1:2,b=g?2:3,x=g?3:1,w="",k="";r&&(w=a?"float activation(float a) {\n          float b = getPreluActivationWeightsAtOutCoords();\n          ".concat(r,"\n        }"):o?"float activation(float a) {\n          float b = getLeakyreluAlphaAtOutCoords();\n          ".concat(r,"\n        }"):"\n          float activation(float x) {\n            ".concat(r,"\n          }\n        "),k="result = activation(result);");var S=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),a&&this.variableNames.push("preluActivationWeights"),o&&this.variableNames.push("leakyreluAlpha"),this.userCode="\n      ".concat(w,"\n\n      const ivec2 strides = ivec2(").concat(u,", ").concat(c,");\n      const ivec2 pads = ivec2(").concat(i,", ").concat(s,");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d2 = coords[").concat(x,"];\n\n        ivec2 xRCCorner =\n            ivec2(coords[").concat(y,"], coords[").concat(b,"]) * strides - pads;\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // Convolve x(?, ?, d1) with w(:, :, d1, d2) to get y(yR, yC, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < ").concat(p,"; wR++) {\n          int xR = xRCorner + wR * ").concat(l,";\n\n          if (xR < 0 || xR >= ").concat(t.inHeight,") {\n            continue;\n          }\n\n          for (int wC = 0; wC < ").concat(h,"; wC++) {\n            int xC = xCCorner + wC * ").concat(d,";\n\n            if (xC < 0 || xC >= ").concat(t.inWidth,") {\n              continue;\n            }\n\n            for (int d1 = 0; d1 < ").concat(m,"; d1 += 4) {\n              vec4 wValues = vec4(\n                getW(wR, wC, d1, d2),\n                getW(wR, wC, d1 + 1, d2),\n                getW(wR, wC, d1 + 2, d2),\n                getW(wR, wC, d1 + 3, d2)\n              );\n\n              if (").concat(g,") {\n                vec4 xValues = vec4(\n                  getX(batch, xR, xC, d1),\n                  getX(batch, xR, xC, d1 + 1),\n                  getX(batch, xR, xC, d1 + 2),\n                  getX(batch, xR, xC, d1 + 3)\n                );\n                dotProd += dot(xValues, wValues);\n              } else {\n                vec4 xValues = vec4(\n                  getX(batch, d1, xR, xC),\n                  getX(batch, d1 + 1, xR, xC),\n                  getX(batch, d1 + 2, xR, xC),\n                  getX(batch, d1 + 3, xR, xC)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n            }\n\n            if (").concat(1===v,") {\n\n              if (").concat(g,") {\n                dotProd +=\n                    getX(batch, xR, xC, ").concat(m,") *\n                    getW(wR, wC, ").concat(m,", d2);\n              } else {\n                dotProd +=\n                    getX(batch, ").concat(m,", xR, xC) *\n                    getW(wR, wC, ").concat(m,", d2);\n              }\n\n            } else if (").concat(2===v,") {\n              vec2 wValues = vec2(\n                getW(wR, wC, ").concat(m,", d2),\n                getW(wR, wC, ").concat(m," + 1, d2)\n              );\n\n              if (").concat(g,") {\n                vec2 xValues = vec2(\n                  getX(batch, xR, xC, ").concat(m,"),\n                  getX(batch, xR, xC, ").concat(m," + 1)\n                );\n                dotProd += dot(xValues, wValues);\n              } else {\n                vec2 xValues = vec2(\n                  getX(batch, ").concat(m,", xR, xC),\n                  getX(batch, ").concat(m," + 1, xR, xC)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n\n            } else if (").concat(3===v,") {\n              vec3 wValues = vec3(\n                getW(wR, wC, ").concat(m,", d2),\n                getW(wR, wC, ").concat(m," + 1, d2),\n                getW(wR, wC, ").concat(m," + 2, d2)\n              );\n\n              if (").concat(g,") {\n                vec3 xValues = vec3(\n                  getX(batch, xR, xC, ").concat(m,"),\n                  getX(batch, xR, xC, ").concat(m," + 1),\n                  getX(batch, xR, xC, ").concat(m," + 2)\n                );\n                dotProd += dot(xValues, wValues);\n              } else {\n                vec3 xValues = vec3(\n                  getX(batch, ").concat(m,", xR, xC),\n                  getX(batch, ").concat(m," + 1, xR, xC),\n                  getX(batch, ").concat(m," + 2, xR, xC)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n\n            }\n          }\n        }\n\n        float result = dotProd;\n        ").concat(S,"\n        ").concat(k,"\n        setOutput(result);\n      }\n    ")})),Qee=(0,d.Z)((function e(t){(0,f.Z)(this,e),this.variableNames=["x","W"],this.outputShape=t.outShape;var n=t.padInfo.front,r=t.padInfo.top,a=t.padInfo.left,o=t.strideDepth,i=t.strideHeight,s=t.strideWidth,u=t.dilationDepth,c=t.dilationHeight,l=t.dilationWidth,d=t.filterDepth,p=t.filterHeight,h=t.filterWidth,m=4*Math.floor(t.inChannels/4),v=t.inChannels%4;this.userCode="\n      const ivec3 strides = ivec3(".concat(o,", ").concat(i,", ").concat(s,");\n      const ivec3 pads = ivec3(").concat(n,", ").concat(r,", ").concat(a,");\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int d2 = coords.u;\n\n        ivec3 xFRCCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\n        int xFCorner = xFRCCorner.x;\n        int xRCorner = xFRCCorner.y;\n        int xCCorner = xFRCCorner.z;\n\n        // Convolve x(?, ?, ?, d1) with w(:, :, :, d1, d2) to get\n        // y(yF, yR, yC, d2). ? = to be determined. : = across all\n        // values in that axis.\n        float dotProd = 0.0;\n        for (int wF = 0; wF < ").concat(d,"; wF++) {\n          int xF = xFCorner + wF * ").concat(u,";\n\n          if (xF < 0 || xF >= ").concat(t.inDepth,") {\n            continue;\n          }\n\n          for (int wR = 0; wR < ").concat(p,"; wR++) {\n            int xR = xRCorner + wR * ").concat(c,";\n\n            if (xR < 0 || xR >= ").concat(t.inHeight,") {\n              continue;\n            }\n\n            for (int wC = 0; wC < ").concat(h,"; wC++) {\n              int xC = xCCorner + wC * ").concat(l,";\n\n              if (xC < 0 || xC >= ").concat(t.inWidth,") {\n                continue;\n              }\n\n              for (int d1 = 0; d1 < ").concat(m,"; d1 += 4) {\n                vec4 xValues = vec4(\n                  getX(batch, xF, xR, xC, d1),\n                  getX(batch, xF, xR, xC, d1 + 1),\n                  getX(batch, xF, xR, xC, d1 + 2),\n                  getX(batch, xF, xR, xC, d1 + 3)\n                );\n                vec4 wValues = vec4(\n                  getW(wF, wR, wC, d1, d2),\n                  getW(wF, wR, wC, d1 + 1, d2),\n                  getW(wF, wR, wC, d1 + 2, d2),\n                  getW(wF, wR, wC, d1 + 3, d2)\n                );\n\n                dotProd += dot(xValues, wValues);\n              }\n\n              if (").concat(1===v,") {\n                dotProd +=\n                  getX(batch, xF, xR, xC, ").concat(m,") *\n                  getW(wF, wR, wC, ").concat(m,", d2);\n              } else if (").concat(2===v,") {\n                vec2 xValues = vec2(\n                  getX(batch, xF, xR, xC, ").concat(m,"),\n                  getX(batch, xF, xR, xC, ").concat(m," + 1)\n                );\n                vec2 wValues = vec2(\n                  getW(wF, wR, wC, ").concat(m,", d2),\n                  getW(wF, wR, wC, ").concat(m," + 1, d2)\n                );\n                dotProd += dot(xValues, wValues);\n              } else if (").concat(3===v,") {\n                vec3 xValues = vec3(\n                  getX(batch, xF, xR, xC, ").concat(m,"),\n                  getX(batch, xF, xR, xC, ").concat(m," + 1),\n                  getX(batch, xF, xR, xC, ").concat(m," + 2)\n                );\n                vec3 wValues = vec3(\n                  getW(wF, wR, wC, ").concat(m,", d2),\n                  getW(wF, wR, wC, ").concat(m," + 1, d2),\n                  getW(wF, wR, wC, ").concat(m," + 2, d2)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")})),ete=(0,d.Z)((function e(t,n){(0,f.Z)(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"inputShape",type:"ivec3"},{name:"pad",type:"ivec2"},{name:"stride",type:"ivec2"},{name:"dilation",type:"ivec2"},{name:"inChannels",type:"int"},{name:"itemsPerBlockRow",type:"int"},{name:"outWidth",type:"int"}],this.outputShape=t,this.enableShapeUniforms=g8(this.outputShape.length);for(var r=n.dataFormat,a=L6(),o="channelsLast"===r,i=o?0:1,s=o?1:2,u=this.enableShapeUniforms?"if(blockIndex < outShape[1] && pos < outShape[0]) {":"if(blockIndex < ".concat(t[1]," && pos < ").concat(t[0],") {"),c="",l=0;l<=1;l++)for(var d=0;d<=1;d++)c+="\n          blockIndex = rc.y + ".concat(d,";\n          pos = rc.x + ").concat(l,";\n\n          ").concat(u,"\n            offsetY = int(blockIndex / outWidth) * stride[0] - pad[0];\n            d0 = offsetY + dilation[0] * (pos / itemsPerBlockRow);\n\n            if(d0 < inputShape[").concat(i,"] && d0 >= 0) {\n              // Use custom imod instead mod. On Intel GPU, mod may generate\n              // unexpected value.\n              // https://github.com/tensorflow/tfjs/issues/5447\n              offsetX = imod(blockIndex, outWidth) * stride[1] - pad[1];\n              d1 = offsetX + dilation[1] * (imod(pos, itemsPerBlockRow) /\n                  inChannels);\n\n              if(d1 < inputShape[").concat(s,"] && d1 >= 0) {\n\n                ch = imod(pos, inChannels);\n\n                if (").concat(o,") {\n                  innerDims = vec2(d1, ch);\n                  result[").concat(2*l+d,"] = getChannel(\n                    getA(d0, int(innerDims.x),\n                    int(innerDims.y)), innerDims);\n                } else {\n                  innerDims = vec2(d0, d1);\n                  result[").concat(2*l+d,"] = getChannel(\n                    getA(ch, int(innerDims.x),\n                    int(innerDims.y)), innerDims);\n                }\n              }\n            }\n          }\n        ");this.userCode="\n      void main() {\n        ivec2 rc = getOutputCoords();\n\n        vec4 result = vec4(0);\n\n        int blockIndex, pos, offsetY, d0, offsetX, d1, ch;\n        vec2 innerDims;\n\n        ".concat(c,"\n\n        ").concat(a.output," = result;\n      }\n    ")}));function tte(e){var t,n=e.x,r=e.filter,a=e.convInfo,o=e.backend,i=e.bias,s=void 0===i?null:i,u=e.preluActivationWeights,c=void 0===u?null:u,l=e.leakyreluAlpha,f=void 0===l?0:l,d=e.activation,p=void 0===d?null:d,h=n.shape,m=o.texData.get(n.dataId),v=a.inChannels,g=h[0]*h[1]*h[2],y=a.outChannels,b="channelsLast"===a.dataFormat,x=[];if(!((1===g||1===y)&&v>1e3)&&m.isPacked&&b&&null!=m.texture&&h[2]%2!==0&&EV.util.arraysEqual(m.shape.slice(-3),h.slice(-3))){var w=h[0]*h[1]*(h[2]+1),k={dataId:n.dataId,shape:[1,w,a.inChannels],dtype:n.dtype},S=m.shape;m.shape=m.shape.slice(),m.shape[m.shape.length-2]++,EV.util.assert(A6(m.shape,k.shape),(function(){return"packed reshape ".concat(m.shape," to ").concat(k.shape," isn't free")}));var _=b7({inputs:{x:r},backend:o,attrs:{shape:[1,a.inChannels,a.outChannels]}});x.push(_);var N=A7({a:k,b:_,backend:o,transposeA:false,transposeB:false,bias:s,activation:p,preluActivationWeights:c,leakyreluAlpha:f}),E=o.texData.get(N.dataId);EV.util.assert(E.isPacked,(function(){return"batchMatMul result is expected to be packed"})),m.shape=S,E.shape=a.outShape,(t=Q9({inputs:{x:N},backend:o})).shape=a.outShape,x.push(N)}else{var C=b7({inputs:{x:n},backend:o,attrs:{shape:[1,b?h[0]*h[1]*h[2]:h[0]*h[2]*h[3],a.inChannels]}}),T=b7({inputs:{x:r},backend:o,attrs:{shape:[1,a.inChannels,a.outChannels]}}),I=A7({a:C,b:T,transposeA:false,transposeB:false,backend:o,bias:s,activation:p,preluActivationWeights:c,leakyreluAlpha:f});t=b7({inputs:{x:I},backend:o,attrs:{shape:a.outShape}}),x.push(C),x.push(T),x.push(I)}for(var O=0,A=x;O<A.length;O++){var D=A[O];o.disposeIntermediateTensorInfo(D)}return t}function nte(e){var t=e.x,n=e.filter,r=e.convInfo,a=e.backend,o=e.bias,i=void 0===o?null:o,s=e.preluActivationWeights,u=void 0===s?null:s,c=e.leakyreluAlpha,l=void 0===c?0:c,f=e.activation,d=void 0===f?null:f,p=r.filterWidth,h=r.filterHeight,m=r.inChannels,v=r.outWidth,g=r.outHeight,y="channelsLast"===r.dataFormat,b=p*h*m,x=g*v,w=[b,x],k=[],S=b7({inputs:{x:t},backend:a,attrs:{shape:t.shape.slice(1)}}),_=b7({inputs:{x:n},backend:a,attrs:{shape:[1,b,EV.util.sizeFromShape(n.shape)/b]}});k.push(S),k.push(_);var N=new ete(w,r),E=[S.shape,[r.padInfo.top,r.padInfo.left],[r.strideHeight,r.strideWidth],[r.dilationHeight,r.dilationWidth],[r.inChannels],[r.filterWidth*r.inChannels],[r.outWidth]],C=a.runWebGLProgram(N,[S],"float32",E),T=b7({inputs:{x:C},backend:a,attrs:{shape:[1,w[0],w[1]]}});k.push(C),k.push(T);var I=null!=i,O=null!=u,A="leakyrelu"===d,D=d?f7(d,!0):null,M=new d7(T.shape,_.shape,[1,x,r.outChannels],!0,!1,I,D,O,A),R=[T,_];if(i&&R.push(i),O&&R.push(u),A){var P=a.makeTensorInfo([],"float32",EV.util.createScalarValue(l,"float32"));R.push(P),k.push(P)}var j=a.runWebGLProgram(M,R,"float32"),F=b7({inputs:{x:j},backend:a,attrs:{shape:y?[1,g,v,r.outChannels]:[1,r.outChannels,g,v]}});k.push(j);for(var L=0,B=k;L<B.length;L++){var z=B[L];a.disposeIntermediateTensorInfo(z)}return F}var rte={kernelName:EV.Conv2D,backendName:"webgl",kernelFunc:function(e){var t,n=e.inputs,r=e.backend,a=e.attrs,o=n.x,i=n.filter,s=a.strides,u=a.pad,c=a.dataFormat,l=a.dilations,f=a.dimRoundingMode,d=EV.backend_util.convertConv2DDataFormat(c),p=EV.backend_util.computeConv2DInfo(o.shape,i.shape,s,l,u,f,!1,d);if(1!==p.filterHeight||1!==p.filterWidth||1!==p.dilationHeight||1!==p.dilationWidth||1!==p.strideHeight||1!==p.strideWidth||"SAME"!==p.padInfo.type&&"VALID"!==p.padInfo.type)if((0,EV.env)().getBool("WEBGL_CONV_IM2COL")&&1===o.shape[0])t=nte({x:o,filter:i,convInfo:p,backend:r});else{var h=new Jee(p);t=r.runWebGLProgram(h,[o,i],"float32")}else t=tte({x:o,filter:i,convInfo:p,backend:r});var m=b7({inputs:{x:t},backend:r,attrs:{shape:p.outShape}});return r.disposeIntermediateTensorInfo(t),m}},ate=(0,d.Z)((function e(t){(0,f.Z)(this,e),this.variableNames=["x","dy"],this.outputShape=t.filterShape;var n=t.strideHeight,r=t.strideWidth,a=t.padInfo.top,o=t.padInfo.left,i="channelsLast"===t.dataFormat;this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int wR = coords.x;\n        int wC = coords.y;\n        int d1 = coords.z;\n        int d2 = coords.w;\n\n        // Convolve x(?, ?, d1) with dy(:, :, d2) to get dw(wR, wC, d1, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int b = 0; b < ".concat(t.batchSize,"; b++) {\n          for (int yR = 0; yR < ").concat(t.outHeight,"; yR++) {\n            int xR = wR + yR * ").concat(n," - ").concat(a,";\n\n            if (xR < 0 || xR >= ").concat(t.inHeight,") {\n              continue;\n            }\n\n            for (int yC = 0; yC < ").concat(t.outWidth,"; yC++) {\n              int xC = wC + yC * ").concat(r," - ").concat(o,";\n\n              if (xC < 0 || xC >= ").concat(t.inWidth,") {\n                continue;\n              }\n\n              if (").concat(i,") {\n                float dyValue = getDy(b, yR, yC, d2);\n                float xValue = getX(b, xR, xC, d1);\n                dotProd += (xValue * dyValue);\n              } else {\n                float dyValue = getDy(b, d2, yR, yC);\n                float xValue = getX(b, d1, xR, xC);\n                dotProd += (xValue * dyValue);\n              }\n\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")})),ote=(0,d.Z)((function e(t){(0,f.Z)(this,e),this.variableNames=["dy","W"],this.outputShape=t.inShape;var n=t.filterHeight,r=t.filterWidth,a=t.strideHeight,o=t.strideWidth,i="channelsLast"===t.dataFormat,s=n-1-t.padInfo.top,u=r-1-t.padInfo.left,c=i?1:2,l=i?2:3,d=i?3:1;this.userCode="\n      const ivec2 pads = ivec2(".concat(s,", ").concat(u,");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d1 = coords[").concat(d,"];\n\n        ivec2 dyCorner = ivec2(coords[").concat(c,"], coords[").concat(l,"]) - pads;\n        int dyRCorner = dyCorner.x;\n        int dyCCorner = dyCorner.y;\n\n        // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < ").concat(n,"; wR++) {\n          float dyR = float(dyRCorner + wR) / ").concat(a,".0;\n\n          if (dyR < 0.0 || dyR >= ").concat(t.outHeight,".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          int wRPerm = ").concat(n," - 1 - wR;\n\n          for (int wC = 0; wC < ").concat(r,"; wC++) {\n            float dyC = float(dyCCorner + wC) / ").concat(o,".0;\n\n            if (dyC < 0.0 || dyC >= ").concat(t.outWidth,".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            int wCPerm = ").concat(r," - 1 - wC;\n\n            for (int d2 = 0; d2 < ").concat(t.outChannels,"; d2++) {\n\n              if (").concat(i,") {\n                float xValue = getDy(batch, idyR, idyC, d2);\n                float wValue = getW(wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              } else {\n                float xValue = getDy(batch, d2, idyR, idyC);\n                float wValue = getW(wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              }\n\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")})),ite=(0,d.Z)((function e(t){(0,f.Z)(this,e),this.variableNames=["x","dy"],this.outputShape=t.filterShape;var n=t.strideDepth,r=t.strideHeight,a=t.strideWidth,o=t.padInfo.front,i=t.padInfo.top,s=t.padInfo.left;this.userCode="\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int wF = coords.x;\n        int wR = coords.y;\n        int wC = coords.z;\n        int d1 = coords.w;\n        int d2 = coords.u;\n\n        float dotProd = 0.0;\n\n        for (int b = 0; b < ".concat(t.batchSize,"; b++) {\n          for (int yF = 0; yF < ").concat(t.outDepth,"; yF++) {\n            int xF = wF + yF * ").concat(n," - ").concat(o,";\n\n            if (xF < 0 || xF >= ").concat(t.inDepth,") {\n              continue;\n            }\n\n            for (int yR = 0; yR < ").concat(t.outHeight,"; yR++) {\n              int xR = wR + yR * ").concat(r," - ").concat(i,";\n\n              if (xR < 0 || xR >= ").concat(t.inHeight,") {\n                continue;\n              }\n\n              for (int yC = 0; yC < ").concat(t.outWidth,"; yC++) {\n                int xC = wC + yC * ").concat(a," - ").concat(s,";\n\n                if (xC < 0 || xC >= ").concat(t.inWidth,") {\n                  continue;\n                }\n\n                float dyValue = getDy(b, yF, yR, yC, d2);\n                float xValue = getX(b, xF, xR, xC, d1);\n                dotProd += (xValue * dyValue);\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")})),ste=(0,d.Z)((function e(t){(0,f.Z)(this,e),this.variableNames=["dy","W"],this.outputShape=t.inShape;var n=t.filterDepth,r=t.filterHeight,a=t.filterWidth,o=t.strideDepth,i=t.strideHeight,s=t.strideWidth,u=n-1-t.padInfo.front,c=r-1-t.padInfo.top,l=a-1-t.padInfo.left;this.userCode="\n      const ivec3 pads = ivec3(".concat(u,", ").concat(c,", ").concat(l,");\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int d1 = coords.u;\n\n\n        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;\n        int dyFCorner = dyCorner.x;\n        int dyRCorner = dyCorner.y;\n        int dyCCorner = dyCorner.z;\n\n        float dotProd = 0.0;\n        for (int wF = 0; wF < ").concat(n,"; wF++) {\n          float dyF = float(dyFCorner + wF) / ").concat(o,".0;\n\n          if (dyF < 0.0 || dyF >= ").concat(t.outDepth,".0 || fract(dyF) > 0.0) {\n            continue;\n          }\n          int idyF = int(dyF);\n\n          int wFPerm = ").concat(n," - 1 - wF;\n\n          for (int wR = 0; wR < ").concat(r,"; wR++) {\n            float dyR = float(dyRCorner + wR) / ").concat(i,".0;\n\n            if (dyR < 0.0 || dyR >= ").concat(t.outHeight,".0 ||\n              fract(dyR) > 0.0) {\n              continue;\n            }\n            int idyR = int(dyR);\n\n            int wRPerm = ").concat(r," - 1 - wR;\n\n            for (int wC = 0; wC < ").concat(a,"; wC++) {\n              float dyC = float(dyCCorner + wC) / ").concat(s,".0;\n\n              if (dyC < 0.0 || dyC >= ").concat(t.outWidth,".0 ||\n                  fract(dyC) > 0.0) {\n                continue;\n              }\n              int idyC = int(dyC);\n\n              int wCPerm = ").concat(a," - 1 - wC;\n\n              for (int d2 = 0; d2 < ").concat(t.outChannels,"; d2++) {\n                float xValue = getDy(batch, idyF, idyR, idyC, d2);\n                float wValue = getW(wFPerm, wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")}));var ute={kernelName:EV.Conv2DBackpropFilter,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=t.dy,i=r.strides,s=r.pad,u=r.dataFormat,c=r.dimRoundingMode,l=r.filterShape,f=EV.backend_util.convertConv2DDataFormat(u),d=EV.backend_util.computeConv2DInfo(a.shape,l,i,1,s,c,!1,f),p=new ate(d);return n.runWebGLProgram(p,[a,o],"float32")}};var cte={kernelName:EV.Conv2DBackpropInput,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,o=t.filter,i=r.inputShape,s=r.strides,u=r.pad,c=r.dataFormat,l=r.dimRoundingMode,f=EV.backend_util.convertConv2DDataFormat(c),d=EV.backend_util.computeConv2DInfo(i,o.shape,s,1,u,l,!1,f),p=new ote(d);return n.runWebGLProgram(p,[a,o],"float32")}};var lte={kernelName:EV.Conv3D,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=t.filter,i=r.strides,s=r.pad,u=r.dilations,c=EV.backend_util.computeConv3DInfo(a.shape,o.shape,i,u,s),l=new Qee(c);return n.runWebGLProgram(l,[a,o],"float32")}};var fte={kernelName:EV.Conv3DBackpropFilterV2,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=t.dy,i=r.strides,s=r.pad,u=r.filterShape,c=EV.backend_util.computeConv3DInfo(a.shape,u,i,1,s),l=new ite(c);return n.runWebGLProgram(l,[a,o],"float32")}};var dte={kernelName:EV.Conv3DBackpropInputV2,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,o=t.filter,i=r.pad,s=r.strides,u=r.inputShape,c=EV.backend_util.computeConv3DInfo(u,o.shape,s,1,i),l=new ste(c);return n.runWebGLProgram(l,[a,o],"float32")}},pte=c7({opSnippet:"if (isnan(x)) return x;\n  return cos(x);\n"}),hte={kernelName:EV.Cos,backendName:"webgl",kernelFunc:pte},mte=c7({opSnippet:"\n  float e2x = exp(-x);\n  return (e2x + 1.0 / e2x) / 2.0;\n"}),vte={kernelName:EV.Cosh,backendName:"webgl",kernelFunc:mte},gte=(0,d.Z)((function e(t,n,r,o,i){(0,f.Z)(this,e),this.variableNames=["Image","Boxes","BoxInd"],this.outputShape=[];var s=(0,a.Z)(t,4),u=s[0],c=s[1],l=s[2],d=s[3],p=(0,a.Z)(n,1)[0],h=(0,a.Z)(r,2),m=h[0],v=h[1];this.outputShape=[p,m,v,d];var g="bilinear"===o?1:0,y="".concat(c-1,".0"),b="".concat(l-1,".0"),x=m>1?["".concat((c-1)/(m-1)),"(y2-y1) * height_ratio","y1*".concat(y," + float(y)*(height_scale)")]:["0.0","0.0","0.5 * (y1+y2) * ".concat(y)],w=(0,a.Z)(x,3),k=w[0],S=w[1],_=w[2],N=v>1?["".concat((l-1)/(v-1)),"(x2-x1) * width_ratio","x1*".concat(b," + float(x)*(width_scale)")]:["0.0","0.0","0.5 * (x1+x2) * ".concat(b)],E=(0,a.Z)(N,3),C=E[0],T=E[1],I=E[2];this.userCode="\n      const float height_ratio = float(".concat(k,");\n      const float width_ratio = float(").concat(C,");\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int y = coords[1];\n        int x = coords[2];\n        int d = coords[3];\n\n        // get box vals\n        float y1 = getBoxes(b,0);\n        float x1 = getBoxes(b,1);\n        float y2 = getBoxes(b,2);\n        float x2 = getBoxes(b,3);\n\n        // get image in batch index\n        int bInd = round(getBoxInd(b));\n        if(bInd < 0 || bInd >= ").concat(u,") {\n          return;\n        }\n\n        float height_scale = ").concat(S,";\n        float width_scale = ").concat(T,";\n\n        float in_y = ").concat(_,";\n        if( in_y < 0.0 || in_y > ").concat(y," ) {\n          setOutput(float(").concat(i,"));\n          return;\n        }\n        float in_x = ").concat(I,";\n        if( in_x < 0.0 || in_x > ").concat(b," ) {\n          setOutput(float(").concat(i,"));\n          return;\n        }\n\n        vec2 sourceFracIndexCR = vec2(in_x,in_y);\n        if(").concat(g," == 1) {\n          // Compute the four integer indices.\n          ivec2 sourceFloorCR = ivec2(sourceFracIndexCR);\n          ivec2 sourceCeilCR = ivec2(ceil(sourceFracIndexCR));\n\n          float topLeft = getImage(b, sourceFloorCR.y, sourceFloorCR.x, d);\n          float bottomLeft = getImage(b, sourceCeilCR.y, sourceFloorCR.x, d);\n          float topRight = getImage(b, sourceFloorCR.y, sourceCeilCR.x, d);\n          float bottomRight = getImage(b, sourceCeilCR.y, sourceCeilCR.x, d);\n\n          vec2 fracCR = sourceFracIndexCR - vec2(sourceFloorCR);\n\n          float top = topLeft + (topRight - topLeft) * fracCR.x;\n          float bottom = bottomLeft + (bottomRight - bottomLeft) * fracCR.x;\n          float newValue = top + (bottom - top) * fracCR.y;\n          setOutput(newValue);\n        } else {\n          // Compute the coordinators of nearest neighbor point.\n          ivec2 sourceNearestCR = ivec2(floor(\n            sourceFracIndexCR + vec2(0.5,0.5)));\n          float newValue = getImage(b, sourceNearestCR.y, sourceNearestCR.x, d);\n          setOutput(newValue);\n        }\n      }\n    ")})),yte={kernelName:EV.CropAndResize,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.image,o=t.boxes,i=t.boxInd,s=r.cropSize,u=r.method,c=r.extrapolationValue,l=new gte(a.shape,o.shape,s,u,c);return n.runWebGLProgram(l,[a,o,i],"float32")}},bte=(0,d.Z)((function e(t,n,r){(0,f.Z)(this,e),this.variableNames=["x"],this.customUniforms=[{name:"index",type:"float"}],this.outputShape=t;var a=t.length,o=n?"0.0":"getX(".concat(xte(a,"coords"),")"),i=t[t.length-1],s="",u="";n?(s=r?"end != ".concat(i-1):"end != 0",u=r?"end + 1":"end - 1"):(s=r?"end + pow2 < ".concat(i):"end >= pow2",u=r?"end + pow2":"end - pow2"),this.userCode="\n      void main() {\n        ".concat(c8(a)," coords = getOutputCoords();\n        int end = ").concat(wte(a,"coords"),";\n        float val = ").concat(o,";\n        int pow2 = int(pow(2.0, index));\n        if (").concat(s,") {\n          int idx = ").concat(u,";\n          ").concat(wte(a,"coords")," = idx;\n          val += getX(").concat(xte(a,"coords"),");\n        }\n        setOutput(val);\n      }\n    ")}));function xte(e,t){if(1===e)return"".concat(t);if(2===e)return"".concat(t,".x, ").concat(t,".y");if(3===e)return"".concat(t,".x, ").concat(t,".y, ").concat(t,".z");if(4===e)return"".concat(t,".x, ").concat(t,".y, ").concat(t,".z, ").concat(t,".w");throw Error("Cumulative sum for rank ".concat(e," is not yet supported"))}function wte(e,t){if(1===e)return"".concat(t);if(2===e)return"".concat(t,".y");if(3===e)return"".concat(t,".z");if(4===e)return"".concat(t,".w");throw Error("Cumulative sum for rank ".concat(e," is not yet supported"))}var kte={kernelName:EV.Cumsum,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.axis,i=r.exclusive,s=r.reverse,u=a.shape.length,c=EV.backend_util.getAxesPermutation([o],u),l=a;null!=c&&(l=I7({inputs:{x:a},backend:n,attrs:{perm:c}}));var f=EV.backend_util.getInnerMostAxes(1,u)[0];if(f!==u-1)throw new Error("WebGL cumsum shader expects an inner-most axis=".concat(a.shape.length-1," ")+"but got axis=".concat(o));for(var d=l.shape[f],p=Q9({inputs:{x:l},backend:n}),h=0;h<=Math.ceil(Math.log2(d))-1;h++){var m=new bte(l.shape,!1,s),v=[[h]],g=p;p=n.runWebGLProgram(m,[p],p.dtype,v),n.disposeIntermediateTensorInfo(g)}if(i){var y=new bte(l.shape,i,s),b=p;p=n.runWebGLProgram(y,[p],p.dtype),n.disposeIntermediateTensorInfo(b)}if(null!=c){var x=I7({inputs:{x:p},backend:n,attrs:{perm:EV.backend_util.getUndoAxesPermutation(c)}});return n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(l),x}return p}};var Ste={kernelName:EV.DenseBincount,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=t.weights,i=r.size,s=r.binaryOutput;if(1===a.shape.length){var u=n.readSync(a.dataId),c=n.readSync(o.dataId),l=j8(u,c,o.dtype,o.shape,i);return n.makeTensorInfo([i],o.dtype,l)}if(2===a.shape.length){var f=n.bufferSync(a),d=n.bufferSync(o),p=F8(f,d,i,s);return n.makeTensorInfo(p.shape,o.dtype,p.values)}throw new Error("Error in denseBincount: input must be at most rank 2, but got rank"+"".concat(a.shape.length,"."))}},_te=function(){function e(t,n,r){(0,f.Z)(this,e),this.variableNames=["x"],this.outputShape=[],this.outputShape=t,this.blockSize=n,this.dataFormat=r,this.userCode="\n    void main() {\n      ivec4 coords = getOutputCoords();\n      int b = coords[0];\n      int h = ".concat(this.getHeightCoordString(),";\n      int w = ").concat(this.getWidthCoordString(),";\n      int d = ").concat(this.getDepthCoordString(),";\n\n      int in_h = h / ").concat(n,";\n      int offset_h = imod(h, ").concat(n,");\n      int in_w = w / ").concat(n,";\n      int offset_w = imod(w, ").concat(n,");\n      int offset_d = (offset_h * ").concat(n," + offset_w) *\n        ").concat(this.getOutputDepthSize(),";\n      int in_d = d + offset_d;\n\n      float result = ").concat(this.getInputSamplingString(),";\n      setOutput(result);\n    }\n  ")}return(0,d.Z)(e,[{key:"getHeightCoordString",value:function(){return"NHWC"===this.dataFormat?"coords[1]":"coords[2]"}},{key:"getWidthCoordString",value:function(){return"NHWC"===this.dataFormat?"coords[2]":"coords[3]"}},{key:"getDepthCoordString",value:function(){return"NHWC"===this.dataFormat?"coords[3]":"coords[1]"}},{key:"getOutputDepthSize",value:function(){return"NHWC"===this.dataFormat?this.outputShape[3]:this.outputShape[1]}},{key:"getInputSamplingString",value:function(){return"NHWC"===this.dataFormat?"getX(b, in_h, in_w, in_d)":"getX(b, in_d, in_h, in_w)"}}]),e}();var Nte={kernelName:EV.DepthToSpace,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.blockSize,i=r.dataFormat,s=a.shape[0],u=("NHWC"===i?a.shape[1]:a.shape[2])*o,c=("NHWC"===i?a.shape[2]:a.shape[3])*o,l=("NHWC"===i?a.shape[3]:a.shape[1])/(o*o),f=new _te("NHWC"===i?[s,u,c,l]:[s,l,u,c],o,i);return n.runWebGLProgram(f,[a],a.dtype)}},Ete=(0,d.Z)((function e(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];(0,f.Z)(this,e),this.variableNames=["x","W"],this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=t.outShape,this.enableShapeUniforms=g8(this.outputShape.length);var i=t.filterHeight,s=t.filterWidth,u=t.outChannels/t.inChannels,c="",l="";r&&(c=a?"float activation(float a) {\n          float b = getPreluActivationWeightsAtOutCoords();\n          ".concat(r,"\n        }"):o?"float activation(float a) {\n          float b = getLeakyreluAlphaAtOutCoords();\n          ".concat(r,"\n        }"):"\n          float activation(float x) {\n            ".concat(r,"\n          }\n        "),l="result = activation(result);");var d=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),a&&this.variableNames.push("preluActivationWeights"),o&&this.variableNames.push("leakyreluAlpha"),this.userCode="\n      ".concat(c,"\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords.x;\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int d2 = coords.w;\n        int d1 = d2 / ").concat(u,";\n        int q = d2 - d1 * ").concat(u,";\n\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // Convolve x(?, ?, d1) with w(:, :, d1, q) to get y(yR, yC, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        // TO DO(dsmilkov): Flatten the two for loops and vec4 the operations.\n        for (int wR = 0; wR < ").concat(i,"; wR++) {\n          int xR = xRCorner + wR * dilations[0];\n\n          if (xR < 0 || xR >= inDims[0]) {\n            continue;\n          }\n\n          for (int wC = 0; wC < ").concat(s,"; wC++) {\n            int xC = xCCorner + wC * dilations[1];\n\n            if (xC < 0 || xC >= inDims[1]) {\n              continue;\n            }\n\n            float xVal = getX(batch, xR, xC, d1);\n            float wVal = getW(wR, wC, d1, q);\n            dotProd += xVal * wVal;\n          }\n        }\n\n        float result = dotProd;\n        ").concat(d,"\n        ").concat(l,"\n        setOutput(result);\n      }\n    ")})),Cte=(0,d.Z)((function e(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];(0,f.Z)(this,e),this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=t.outShape,this.enableShapeUniforms=g8(this.outputShape.length);for(var i=t.outChannels/t.inChannels,s=t.padInfo.left,u=t.strideWidth,c=t.dilationWidth,l=t.filterHeight,d=t.filterWidth,p=d,h="\n      int xR; int xC; int xCOffset;\n      vec4 wTexel; vec4 previous; vec4 final;",m=0;m<d;m++)h+="\n          vec4 xTexelC".concat(2*m,";\n          int xTexelC").concat(2*m,"Ready;\n          vec4 xTexelC").concat(2*m+1,";\n          int xTexelC").concat(2*m+1,"Ready;\n          vec4 xC").concat(m,";");h+="\n    for (int r = 0; r < ".concat(l,"; r++) {\n      ");for(var v=0;v<d;v++)h+="\n          xTexelC".concat(2*v," = vec4(0.0);\n          xTexelC").concat(2*v,"Ready = 0;\n          xTexelC").concat(2*v+1," = vec4(0.0);\n          xTexelC").concat(2*v+1,"Ready = 0;\n          xC").concat(v," = vec4(0.0);");h+="\n        xR = xRCorner + r * dilations[0];\n        if (xR >=0 && xR < inDims[0]) {\n      ";for(var g=0;g<(p+1)/2;g++){var y=2*g;if(h+="\n          xC = xCCorner + ".concat(y*c,";\n          "),1===u){if(y<d&&(s%2===1?(h+="\n                xCOffset = xC + 1;\n                if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC".concat(y,"Ready == 0) {\n                  xTexelC").concat(y," = getX(batch, xR, xCOffset, d1);\n\n                  // Need to manually clear unused channels in case\n                  // we're reading from recycled texture.\n                  if (xCOffset + 1 >= inDims[1]) {\n                    xTexelC").concat(y,".zw = vec2(0.0);\n                  }\n                  xTexelC").concat(y,"Ready = 1;\n                }\n              "),h+=1===c&&y>0?"\n                xC".concat(y," = vec4(xTexelC").concat(y-2,".zw, xTexelC").concat(y,".xy);\n                "):"\n                  xCOffset = xC + 1 - 2;\n\n                  if (xCOffset >= 0 && xCOffset < inDims[1]) {\n                    previous = getX(batch, xR, xCOffset, d1);\n\n                    // Need to manually clear unused channels in case\n                    // we're reading from recycled texture.\n                    if (xCOffset + 1 >= inDims[1]) {\n                      previous.zw = vec2(0.0);\n                    }\n\n                    xC".concat(y," = vec4(previous.zw, xTexelC").concat(y,".xy);\n                  } else {\n                    xC").concat(y," = vec4(0.0, 0.0, xTexelC").concat(y,".xy);\n                  }\n                  ")):h+="\n                if (xC >= 0 && xC < inDims[1] && xTexelC".concat(y,"Ready == 0) {\n                  xTexelC").concat(y," = getX(batch, xR, xC, d1);\n                  if (xC + 1 >= inDims[1]) {\n                    xTexelC").concat(y,".zw = vec2(0.0);\n                  }\n                  xTexelC").concat(y,"Ready = 1;\n                }\n\n                xC").concat(y," = xTexelC").concat(y,";\n                "),y+1<d)){var b=s%2===0?EV.util.nearestLargerEven(c):c;c%2===0&&s%2===1||c%2!==0&&s%2!==1?(h+="\n                  xCOffset = xC + imod(pads[1], 2) + ".concat(b,";\n\n                  if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC").concat(y+1,"Ready == 0) {\n                    xTexelC").concat(y+1," = getX(batch, xR, xCOffset, d1);\n\n                    // Need to manually clear unused channels in case\n                    // we're reading from recycled texture.\n                    if (xCOffset + 1 >= inDims[1]) {\n                      xTexelC").concat(y+1,".zw = vec2(0.0);\n                    }\n                    xTexelC").concat(y+1,"Ready = 1;\n                  }\n                  "),c>1&&(h+="\n                    xCOffset -= 2;\n                    if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC".concat(y,"Ready == 0) {\n                      xTexelC").concat(y," = getX(batch, xR, xCOffset, d1);\n                      xTexelC").concat(y,"Ready = 1;\n                    }\n                    ")),h+="\n                  xC".concat(y+1," = vec4(xTexelC").concat(y,".zw, xTexelC").concat(y+1,".xy);\n                  ")):h+=1===b?"\n                    xC".concat(y+1," = xTexelC").concat(y,";\n                    "):"\n                    xCOffset = xC + ".concat(b,";\n\n                    if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC").concat(y+1,"Ready == 0) {\n                      xTexelC").concat(y+1," = getX(batch, xR, xCOffset, d1);\n                      if (xCOffset + 1 >= inDims[1]) {\n                        xTexelC").concat(y+1,".zw = vec2(0.0);\n                      }\n                      xTexelC").concat(y+1,"Ready = 1;\n                    }\n\n                    xC").concat(y+1," = xTexelC").concat(y+1,";\n                    ")}}else y<d&&(s%2===1?(h+="\n                xCOffset = xC + 1 - strides[1];\n                if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC".concat(y,"Ready == 0) {\n                  xTexelC").concat(y," = getX(batch, xR, xCOffset, d1);\n                  // Need to manually clear unused channels in case\n                  // we're reading from recycled texture.\n                  if (xCOffset + 1 >= inDims[1]) {\n                    xTexelC").concat(y,".zw = vec2(0.0);\n                  }\n                  xTexelC").concat(y,"Ready = 1;\n                }\n\n                if(xC + 1 >= 0 && xC + 1 < inDims[1] && xTexelC").concat(y+1,"Ready == 0) {\n                  xTexelC").concat(y+1," = getX(batch, xR, xC + 1, d1);\n                  // Need to manually clear unused channels in case\n                  // we're reading from recycled texture.\n                  if (xC + 2 >= inDims[1]) {\n                    xTexelC").concat(y+1,".zw = vec2(0.0);\n                  }\n                  xTexelC").concat(y+1,"Ready = 1;\n                }\n\n                xC").concat(y," = vec4(xTexelC").concat(y,".zw, xTexelC").concat(y+1,".zw);\n              "),y+1<d&&(h+="\n                  final = vec4(0.0);\n                  xCOffset = xC + 1 + strides[1];\n                  if(xCOffset >= 0 && xCOffset < inDims[1]) {\n                    final = getX(batch, xR, xCOffset, d1);\n                  }\n                  xC".concat(y+1," = vec4(xTexelC").concat(y+1,".xy, final.xy);\n                "))):(h+="\n                if(xC >= 0 && xC < inDims[1] && xTexelC".concat(y,"Ready == 0) {\n                  xTexelC").concat(y," = getX(batch, xR, xC, d1);\n                  if (xC + 1 >= inDims[1]) {\n                    xTexelC").concat(y,".zw = vec2(0.0);\n                  }\n                  xTexelC").concat(y,"Ready = 1;\n                }\n\n                xCOffset = xC + strides[1];\n                if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC").concat(y+1,"Ready == 0) {\n                  xTexelC").concat(y+1," = getX(batch, xR, xCOffset, d1);\n                  if (xCOffset + 1 >= inDims[1]) {\n                    xTexelC").concat(y+1,".zw = vec2(0.);\n                  }\n                  xTexelC").concat(y+1,"Ready = 1;\n                }\n\n                xC").concat(y," = vec4(\n                  xTexelC").concat(y,".xy, xTexelC").concat(y+1,".xy);\n              "),y+1<d&&(h+="\n                  xC".concat(y+1," = vec4(xTexelC").concat(y,".zw, xTexelC").concat(y+1,".zw);\n                "))));y<d&&(h+="\n            wTexel = getW(r, ".concat(y,", d1, q);\n            dotProd += xC").concat(y," * vec4(wTexel.xz, wTexel.xz);\n          "),y+1<d&&(h+="\n              wTexel = getW(r, ".concat(y+1,", d1, q);\n              dotProd += xC").concat(y+1," * vec4(wTexel.xz, wTexel.xz);\n            ")))}h+="\n    }\n  ",h+="\n      }\n    ";var x="",w="";r&&(x=a?"vec4 activation(vec4 a) {\n          vec4 b = getPreluActivationWeightsAtOutCoords();\n          ".concat(r,"\n        }"):o?"vec4 activation(vec4 a) {\n          vec4 b = getLeakyreluAlphaAtOutCoords();\n          ".concat(r,"\n        }"):"vec4 activation(vec4 x) {\n          ".concat(r,"\n        }"),w="result = activation(result);");var k=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),a&&this.variableNames.push("preluActivationWeights"),o&&this.variableNames.push("leakyreluAlpha"),this.userCode="\n      ".concat(x,"\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords.x;\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int d2 = coords.w;\n        int d1 = d2 / ").concat(i,";\n        int q = d2 - d1 * ").concat(i,";\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        //intialize dotProd with a small epsilon seems to reduce GPU accuracy loss.\n        vec4 dotProd = vec4(0.000000000000001);\n\n        ").concat(h,"\n\n        vec4 result = dotProd - vec4(0.000000000000001);\n        ").concat(k,"\n        ").concat(w,"\n        setOutput(result);\n      }\n    ")}));var Tte={kernelName:EV.DepthwiseConv2dNative,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=t.filter,i=r.strides,s=r.pad,u=r.dilations,c=r.dimRoundingMode,l=u;null==l&&(l=[1,1]),EV.util.assert(EV.backend_util.eitherStridesOrDilationsAreOne(i,l),(function(){return"Error in depthwiseConv2d: Either strides or dilations must be "+"1. Got strides ".concat(i," and dilations '").concat(l,"'")}));var f,d=EV.backend_util.computeConv2DInfo(a.shape,o.shape,i,l,s,c,!0);f=(0,EV.env)().getBool("WEBGL_PACK_DEPTHWISECONV")&&d.strideWidth<=2&&d.outChannels/d.inChannels===1?new Cte(d):new Ete(d);var p=[[d.padInfo.top,d.padInfo.left],[d.strideHeight,d.strideWidth],[d.dilationHeight,d.dilationWidth],[d.inHeight,d.inWidth]];return n.runWebGLProgram(f,[a,o],"float32",p)}},Ite=(0,d.Z)((function e(t){(0,f.Z)(this,e),this.variableNames=["x","dy"],this.outputShape=t.filterShape;var n=t.strideHeight,r=t.strideWidth,a=t.padInfo.top,o=t.padInfo.left,i=t.outChannels/t.inChannels;this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int wR = coords.x;\n        int wC = coords.y;\n        int d1 = coords.z;\n        int dm = coords.w;\n        int d2 = d1 * ".concat(i," + dm;\n\n        float dotProd = 0.0;\n\n        // TO DO: Vec4 over the batch size\n        for (int b = 0; b < ").concat(t.batchSize,"; b++) {\n          for (int yR = 0; yR < ").concat(t.outHeight,"; yR++) {\n            int xR = wR + yR * ").concat(n," - ").concat(a,";\n\n            if (xR < 0 || xR >= ").concat(t.inHeight,") {\n              continue;\n            }\n\n            for (int yC = 0; yC < ").concat(t.outWidth,"; yC++) {\n              int xC = wC + yC * ").concat(r," - ").concat(o,";\n\n              if (xC < 0 || xC >= ").concat(t.inWidth,") {\n                continue;\n              }\n\n              float dyValue = getDy(b, yR, yC, d2);\n              float xValue = getX(b, xR, xC, d1);\n              dotProd += (xValue * dyValue);\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")})),Ote=(0,d.Z)((function e(t){(0,f.Z)(this,e),this.variableNames=["dy","W"],this.outputShape=t.inShape;var n=t.filterHeight,r=t.filterWidth,a=t.strideHeight,o=t.strideWidth,i=n-1-t.padInfo.top,s=r-1-t.padInfo.left,u=t.outChannels/t.inChannels;this.userCode="\n      const ivec2 pads = ivec2(".concat(i,", ").concat(s,");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d1 = coords[3];\n        ivec2 dyCorner = coords.yz - pads;\n        int dyRCorner = dyCorner.x;\n        int dyCCorner = dyCorner.y;\n\n        float dotProd = 0.0;\n\n        for (int wR = 0; wR < ").concat(n,"; wR++) {\n          float dyR = float(dyRCorner + wR) / ").concat(a,".0;\n\n          if (dyR < 0.0 || dyR >= ").concat(t.outHeight,".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          int wRPerm = ").concat(n," - 1 - wR;\n\n          for (int wC = 0; wC < ").concat(r,"; wC++) {\n            float dyC = float(dyCCorner + wC) / ").concat(o,".0;\n\n            if (dyC < 0.0 || dyC >= ").concat(t.outWidth,".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            int wCPerm = ").concat(r," - 1 - wC;\n\n            // TO DO: Vec4 over the channelMul\n            for (int dm = 0; dm < ").concat(u,"; dm++) {\n              int d2 = d1 * ").concat(u," + dm;\n              float xValue = getDy(batch, idyR, idyC, d2);\n              float wValue = getW(wRPerm, wCPerm, d1, dm);\n              dotProd += xValue * wValue;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")}));var Ate={kernelName:EV.DepthwiseConv2dNativeBackpropFilter,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=t.dy,i=r.strides,s=r.dilations,u=r.pad,c=r.dimRoundingMode,l=r.filterShape,f=EV.backend_util.computeConv2DInfo(a.shape,l,i,s,u,c,!0),d=new Ite(f);return n.runWebGLProgram(d,[a,o],"float32")}};var Dte={kernelName:EV.DepthwiseConv2dNativeBackpropInput,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,o=t.filter,i=r.strides,s=r.dilations,u=r.pad,c=r.dimRoundingMode,l=r.inputShape,f=EV.backend_util.computeConv2DInfo(l,o.shape,i,s,u,c,!0),d=new Ote(f);return n.runWebGLProgram(d,[a,o],"float32")}},Mte=(0,d.Z)((function e(t){(0,f.Z)(this,e),this.variableNames=["X"],this.outputShape=[t,t],this.userCode="\n      void main() {\n          ivec2 coords = getOutputCoords();\n          float val = coords[0] == coords[1] ? getX(coords[0]) : 0.0;\n          setOutput(val);\n      }\n    "}));var Rte={kernelName:EV.Diag,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,a=t.x,o=[].concat((0,r.Z)(a.shape),(0,r.Z)(a.shape)),i=EV.util.sizeFromShape(a.shape),s=b7({inputs:{x:a},backend:n,attrs:{shape:[i]}}),u=new Mte(i),c=n.runWebGLProgram(u,[s],s.dtype),l=b7({inputs:{x:c},backend:n,attrs:{shape:o}});return n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(c),l}},Pte=(0,d.Z)((function e(t){(0,f.Z)(this,e),this.variableNames=["x","W"],this.outputShape=t.outShape;var n=t.inHeight,r=t.inWidth,a=t.padInfo,o=t.strideHeight,i=t.strideWidth,s=t.filterHeight,u=t.filterWidth,c=t.dilationHeight,l=t.dilationWidth,d=a.top,p=a.left;this.userCode="\n      const ivec2 strides = ivec2(".concat(o,", ").concat(i,");\n      const ivec2 pads = ivec2(").concat(d,", ").concat(p,");\n      const float neg_infinity = -3.4e38;\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords.x;\n        int d1 = coords.w;\n        ivec2 outTopLeftCorner =\n            coords.yz * strides - pads;\n        int hBeg = outTopLeftCorner.x;\n        int wBeg = outTopLeftCorner.y;\n\n        float curVal = neg_infinity;\n        for (int h = 0; h < ").concat(s,"; h++) {\n          int hIn = hBeg + h * ").concat(c,";\n\n          if (hIn >= 0 && hIn < ").concat(n,") {\n            for (int w = 0; w < ").concat(u,"; w++) {\n              int wIn = wBeg + w * ").concat(l,";\n\n              if (wIn >= 0 && wIn < ").concat(r,") {\n                float xVal = getX(batch, hIn, wIn, d1);\n                float wVal = getW(h, w, d1);\n\n                float val = xVal + wVal;\n                if (val > curVal) {\n                  curVal = val;\n                }\n              }\n            }\n          }\n        }\n\n        float result = curVal;\n        setOutput(result);\n      }\n    ")}));var jte={kernelName:EV.Dilation2D,backendName:"webgl",kernelFunc:function(e){var t,n=e.inputs,r=e.backend,a=e.attrs,o=n.x,i=n.filter,s=a.strides,u=a.pad,c=a.dilations,l=EV.backend_util.computeDilation2DInfo(o.shape,i.shape,s,u,"NHWC",c),f=new Pte(l),d=b7({inputs:{x:t=r.runWebGLProgram(f,[o,i],"float32")},backend:r,attrs:{shape:l.outShape}});return r.disposeIntermediateTensorInfo(t),d}};var Fte={kernelName:EV.Einsum,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs.equation,a=t,o=EV.backend_util.decodeEinsumEquation(r,a.length),i=o.allDims,s=o.summedDims,u=o.idDims;EV.backend_util.checkEinsumDimSizes(i.length,u,a);for(var c=EV.backend_util.getEinsumComputePath(s,u),l=c.path,f=c.steps,d=f.length,p=null,h=i.length,m=[],v=0;v<d;++v){var g,y=(0,Et.Z)(f[v]);try{for(y.s();!(g=y.n()).done;){var b=g.value,x=EV.backend_util.getEinsumPermutation(h,u[b]),w=x.permutationIndices,k=x.expandDims,S=void 0;EV.backend_util.isIdentityPermutation(w)?S=a[b]:(S=I7({inputs:{x:a[b]},backend:n,attrs:{perm:w}}),m.push(S));for(var _=S.shape.slice(),N=0;N<k.length;++N)_.splice(k[N],0,1);EV.util.arraysEqual(S.shape,_)||(S=b7({inputs:{x:S},backend:n,attrs:{shape:_}}),m.push(S)),null===p?p=S:(p=g7({inputs:{a:S,b:p},backend:n}),m.push(p))}}catch(I){y.e(I)}finally{y.f()}v<d-1&&(l[v]>=0&&(p=C7({inputs:{x:p},backend:n,attrs:{axis:l[v]-(i.length-h),keepDims:!1}}),m.push(p)),h--)}for(var E=0,C=m;E<C.length;E++){var T=C[E];T!==p&&n.disposeIntermediateTensorInfo(T)}return p}},Lte=c7({opSnippet:"return (x >= 0.0) ? x : (exp(x) - 1.0);",packedOpSnippet:"\n  vec4 result;\n\n  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);\n  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);\n  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);\n  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);\n\n  return result;\n"}),Bte={kernelName:EV.Elu,backendName:"webgl",kernelFunc:Lte},zte={kernelName:EV.EluGrad,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.dy,a=t.y,o=(0,EV.env)().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new J9("\n  vec4 bGTEZero = vec4(greaterThanEqual(b, vec4(0.)));\n  return (bGTEZero * a) + ((vec4(1.0) - bGTEZero) * (a * (b + vec4(1.0))));\n",r.shape,a.shape):new $9("return (b >= 1.0) ? a : a * (b + 1.0);",r.shape,a.shape);return n.runWebGLProgram(o,[r,a],r.dtype)}},Zte=l7({opSnippet:"return float(a == b);",packedOpSnippet:"\n  return vec4(equal(a, b));\n",dtype:"bool",cpuKernelImpl:z8}),Vte={kernelName:EV.Equal,backendName:"webgl",kernelFunc:Zte},Ute=c7({opSnippet:'\n  // Error function is calculated approximately with elementary function.\n  // See "Handbook of Mathematical Functions with Formulas,\n  // Graphs, and Mathematical Tables", Abramowitz and Stegun.\n  float p = '.concat(EV.backend_util.ERF_P,";\n  float a1 = ").concat(EV.backend_util.ERF_A1,";\n  float a2 = ").concat(EV.backend_util.ERF_A2,";\n  float a3 = ").concat(EV.backend_util.ERF_A3,";\n  float a4 = ").concat(EV.backend_util.ERF_A4,";\n  float a5 = ").concat(EV.backend_util.ERF_A5,";\n\n  float sign = sign(x);\n  x = abs(x);\n  float t = 1.0 / (1.0 + p * x);\n  return sign * (1.0 - (((((a5*t + a4)*t) + a3)*t + a2)*t + a1)*t*exp(-x*x));\n")}),qte={kernelName:EV.Erf,backendName:"webgl",kernelFunc:Ute},Wte=c7({opSnippet:"if (isnan(x)) return x;\n  return exp(x);\n",packedOpSnippet:"\n  vec4 result = exp(x);\n  bvec4 isNaN = isnan(x);\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n",cpuKernelImpl:Z8,dtype:"float32"}),Hte={kernelName:EV.Exp,backendName:"webgl",kernelFunc:Wte};function Gte(e){var t=e.inputs,n=e.attrs,r=e.backend,a=n.dim,o=t.input,i=o.shape.length,s=o.shape.slice(),u=a;return a<0&&(EV.util.assert(-(i+1)<=a,(function(){return"Axis must be in the interval [".concat(-(i+1),", ").concat(i,"]")})),u=i+a+1),s.splice(u,0,1),b7({inputs:{x:o},backend:r,attrs:{shape:s}})}var Kte={kernelName:EV.ExpandDims,backendName:"webgl",kernelFunc:Gte},Xte="return exp(x) - 1.0;",Yte=c7({opSnippet:Xte,packedOpSnippet:Xte,cpuKernelImpl:V8}),$te={kernelName:EV.Expm1,backendName:"webgl",kernelFunc:Yte},Jte=(0,d.Z)((function e(t,n,r){(0,f.Z)(this,e),this.variableNames=["real","imag"];var a=n[1];this.outputShape=n;var o,i=r?"2.0 * ".concat(Math.PI):"-2.0 * ".concat(Math.PI),s=r?"".concat(a,".0"):"1.0";if("real"===t)o="return real * expR - imag * expI;";else{if("imag"!==t)throw new Error('FFT component must be either "real" or "imag", got '.concat(t,"."));o="return real * expI + imag * expR;"}this.userCode="\n      const float exponentMultiplier = ".concat(i,";\n\n      float unaryOpComplex(float real, float expR, float imag, float expI) {\n        ").concat(o,"\n      }\n\n      float mulMatDFT(int batch, int index) {\n        float indexRatio = float(index) / float(").concat(a,");\n        float exponentMultiplierTimesIndexRatio =\n            exponentMultiplier * indexRatio;\n\n        float result = 0.0;\n\n        for (int i = 0; i < ").concat(a,"; i++) {\n          // x = (-2|2 * PI / N) * index * i;\n          float x = exponentMultiplierTimesIndexRatio * float(i);\n          float expR = cos(x);\n          float expI = sin(x);\n          float real = getReal(batch, i);\n          float imag = getImag(batch, i);\n\n          result +=\n              unaryOpComplex(real, expR, imag, expI) / ").concat(s,";\n        }\n\n        return result;\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        setOutput(mulMatDFT(coords[0], coords[1]));\n      }\n    ")}));function Qte(e,t,n){var r=n.texData.get(e.dataId),a=EV.util.sizeFromShape(e.shape),o=e.shape[e.shape.length-1],i=b7({inputs:{x:e},backend:n,attrs:{shape:[a/o,o]}}),s=i.shape,u=new Jte("real",s,t),c=new Jte("imag",s,t),l=[{dataId:r.complexTensorInfos.real.dataId,dtype:r.complexTensorInfos.real.dtype,shape:s},{dataId:r.complexTensorInfos.imag.dataId,dtype:r.complexTensorInfos.imag.dtype,shape:s}],f=n.runWebGLProgram(u,l,"float32"),d=n.runWebGLProgram(c,l,"float32"),p=t7({inputs:{real:f,imag:d},backend:n});n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(d);var h=b7({inputs:{x:p},backend:n,attrs:{shape:e.shape}});return n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(p),h}var ene={kernelName:EV.FFT,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend;return Qte(t.input,!1,n)}},tne=(0,d.Z)((function e(t,n){(0,f.Z)(this,e),this.outputShape=[],this.customUniforms=[{name:"value",type:"float"}],this.variableNames=["x"],this.outputShape=t,this.userCode="\n      void main() {\n        // Input can be obtained from uniform value.\n        setOutput(value);\n      }\n    "}));function nne(e){var t=e.backend,n=e.attrs,r=n.shape,a=n.value,o=n.dtype;if("string"===(o=o||EV.util.inferDtype(a))){var i=EV.util.getArrayFromDType(o,EV.util.sizeFromShape(r));return i.fill(a),t.makeTensorInfo(r,o,i)}var s=new tne(r,a),u=[[a]];return t.runWebGLProgram(s,[],o,u)}var rne,ane={kernelName:EV.Fill,backendName:"webgl",kernelFunc:nne},one=(0,d.Z)((function e(t){(0,f.Z)(this,e),this.variableNames=["Image"],this.outputShape=[];var n=t[2];this.outputShape=t,this.userCode="\n        void main() {\n          ivec4 coords = getOutputCoords();\n          int x = coords[2];\n\n          int coordX = ".concat(n," - x - 1;\n          float outputValue;\n          if(coordX >= 0 && coordX < ").concat(n,") {\n            outputValue = getImage(coords[0], coords[1], coordX, coords[3]);\n          } else {\n            outputValue = getImage(coords[0], coords[1], coords[2], coords[3]);\n          }\n          setOutput(outputValue);\n        }\n    ")})),ine={kernelName:EV.FlipLeftRight,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.image,a=n,o=new one(r.shape);return a.runWebGLProgram(o,[r],r.dtype)}},sne="return floor(x);",une=c7({opSnippet:sne,packedOpSnippet:sne,cpuKernelImpl:U8}),cne={kernelName:EV.Floor,backendName:"webgl",kernelFunc:une},lne=l7({opSnippet:"\n  float s = sign(a) * sign(b);\n  int ia = round(a);\n  int ib = round(b);\n  if (ib != 0) {\n    // Windows (D3D) wants guaranteed non-zero int division at compile-time.\n    return float(idiv(ia, ib, s));\n  } else {\n    return NAN;\n  }\n",packedOpSnippet:"\n  ivec4 ia = round(a);\n  ivec4 ib = round(b);\n  bvec4 cond = notEqual(ib, ivec4(0));\n  ivec4 result = ivec4(0);\n  vec4 s = sign(a) * sign(b);\n\n  // Windows (D3D) wants guaranteed non-zero int division at compile-time.\n  if (cond[0]) {\n    result[0] = idiv(ia[0], ib[0], s[0]);\n  }\n  if (cond[1]) {\n    result[1] = idiv(ia[1], ib[1], s[1]);\n  }\n  if (cond[2]) {\n    result[2] = idiv(ia[2], ib[2], s[2]);\n  }\n  if (cond[3]) {\n    result[3] = idiv(ia[3], ib[3], s[3]);\n  }\n  return vec4(result);\n",dtype:"int32"}),fne={kernelName:EV.FloorDiv,backendName:"webgl",kernelFunc:lne},dne=(0,d.Z)((function e(t){(0,f.Z)(this,e),this.variableNames=["A"];var n=L6(),r=(0,a.Z)(t,2),o=r[0],i=r[1];this.outputShape=t,this.userCode="\n      void main() {\n        ivec3 coords = getOutputCoords();\n        int texR = coords[0];\n        int texC = coords[1];\n        int depth = coords[2];\n        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(".concat(i,".0, ").concat(o,".0);\n\n        vec4 values = ").concat(n.texture2D,"(A, uv);\n        float value;\n        if (depth == 0) {\n          value = values.r;\n        } else if (depth == 1) {\n          value = values.g;\n        } else if (depth == 2) {\n          value = values.b;\n        } else if (depth == 3) {\n          value = values.a;\n        }\n\n        setOutput(floor(value * 255.0 + 0.5));\n      }\n    ")})),pne=(0,d.Z)((function e(t){(0,f.Z)(this,e),this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;var n=L6(),r=(0,a.Z)(t,2),o=r[0],i=r[1];this.outputShape=t,this.userCode="\n      void main() {\n        ivec3 coords = getOutputCoords();\n        int texR = coords[0];\n        int texC = coords[1];\n        int depth = coords[2];\n\n        vec4 result = vec4(0.);\n\n        for(int row=0; row<=1; row++) {\n          for(int col=0; col<=1; col++) {\n            texC = coords[1] + row;\n            depth = coords[2] + col;\n\n            vec2 uv = (vec2(texC, texR) + halfCR) /\n                       vec2(".concat(i,".0, ").concat(o,".0);\n            vec4 values = ").concat(n.texture2D,"(A, uv);\n            float value;\n            if (depth == 0) {\n              value = values.r;\n            } else if (depth == 1) {\n              value = values.g;\n            } else if (depth == 2) {\n              value = values.b;\n            } else if (depth == 3) {\n              value = values.a;\n            }\n\n            result[row * 2 + col] = floor(value * 255.0 + 0.5);\n          }\n        }\n\n        ").concat(n.output," = result;\n      }\n    ")})),hne={kernelName:EV.FromPixels,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,o=t.pixels,i=r.numChannels,s="undefined"!==typeof HTMLVideoElement&&o instanceof HTMLVideoElement,u="undefined"!==typeof HTMLImageElement&&o instanceof HTMLImageElement,c=s?[o.videoWidth,o.videoHeight]:[o.width,o.height],l=(0,a.Z)(c,2),f=l[0],d=l[1],p=[d,f],h=[d,f,i];(u||s)&&(null==rne&&(rne=document.createElement("canvas").getContext("2d")),rne.canvas.width=f,rne.canvas.height=d,rne.drawImage(o,0,0,f,d),o=rne.canvas);var m=n.makeTensorInfo(p,"int32");n.texData.get(m.dataId).usage=t6.PIXELS,n.gpgpu.uploadPixelDataToTexture(n.getTexture(m.dataId),o);var v=(0,EV.env)().getBool("WEBGL_PACK")?new pne(h):new dne(h),g=n.runWebGLProgram(v,[m],"int32");return n.disposeData(m.dataId),g}};var mne={kernelName:EV.FusedConv2D,backendName:"webgl",kernelFunc:function(e){var t,n=e.inputs,r=e.backend,a=e.attrs,o=n.x,i=n.filter,s=n.bias,u=n.preluActivationWeights,c=a.strides,l=a.pad,f=a.dataFormat,d=a.dilations,p=a.dimRoundingMode,h=a.activation,m=a.leakyreluAlpha,v=EV.backend_util.convertConv2DDataFormat(f),g=EV.backend_util.computeConv2DInfo(o.shape,i.shape,c,d,l,p,!1,v),y=[];if(1!==g.filterHeight||1!==g.filterWidth||1!==g.dilationHeight||1!==g.dilationWidth||1!==g.strideHeight||1!==g.strideWidth||"SAME"!==g.padInfo.type&&"VALID"!==g.padInfo.type)if((0,EV.env)().getBool("WEBGL_CONV_IM2COL")&&1===o.shape[0])t=nte({x:o,filter:i,convInfo:g,backend:r,bias:s,activation:h,preluActivationWeights:u,leakyreluAlpha:m});else{var b=null!=s,x=null!=u,w="leakyrelu"===h,k=h?f7(h,!1):null,S=new Jee(g,b,k,x,w),_=[o,i];if(s&&_.push(s),u&&_.push(u),w){var N=r.makeTensorInfo([],"float32",EV.util.createScalarValue(m,"float32"));_.push(N),y.push(N)}t=r.runWebGLProgram(S,_,"float32")}else t=tte({x:o,filter:i,convInfo:g,backend:r,bias:s,activation:h,preluActivationWeights:u,leakyreluAlpha:m});var E=b7({inputs:{x:t},backend:r,attrs:{shape:g.outShape}});return y.push(t),y.forEach((function(e){return r.disposeIntermediateTensorInfo(e)})),E}};var vne={kernelName:EV.FusedDepthwiseConv2D,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=t.filter,i=t.bias,s=t.preluActivationWeights,u=r.strides,c=r.pad,l=r.dilations,f=r.dimRoundingMode,d=r.activation,p=r.leakyreluAlpha,h=[],m=l;null==m&&(m=[1,1]),EV.util.assert(EV.backend_util.eitherStridesOrDilationsAreOne(u,m),(function(){return"Error in depthwiseConv2d: Either strides or dilations must be "+"1. Got strides ".concat(u," and dilations '").concat(m,"'")}));var v,g=EV.backend_util.computeConv2DInfo(a.shape,o.shape,u,m,c,f,!0),y=(0,EV.env)().getBool("WEBGL_PACK_DEPTHWISECONV")&&g.strideWidth<=2&&g.outChannels/g.inChannels===1,b=d?f7(d,y):null,x=[a,o],w=null!=i,k=null!=s,S="leakyrelu"===d;if(w&&x.push(i),k&&x.push(s),S){var _=n.makeTensorInfo([],"float32",EV.util.createScalarValue(p,"float32"));x.push(_),h.push(_)}v=y?new Cte(g,w,b,k,S):new Ete(g,w,b,k,S);var N=[[g.padInfo.top,g.padInfo.left],[g.strideHeight,g.strideWidth],[g.dilationHeight,g.dilationWidth],[g.inHeight,g.inWidth]],E=n.runWebGLProgram(v,x,"float32",N);return h.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),E}},gne=(0,d.Z)((function e(t,n,r){(0,f.Z)(this,e),this.sliceDim=t,this.strides=n,this.variableNames=["x","indices"],this.outputShape=r;var a=c8(n.length),o=c8(r.length),i=this.sliceDim>1?"strides[j]":"strides";this.userCode="\n        ".concat(a," strides = ").concat(a,"(").concat(this.strides,");\n         void main() {\n          ").concat(o," coords = getOutputCoords();\n          int flattenIndex = 0;\n          for (int j = 0; j < ").concat(this.sliceDim,"; j++) {\n            int index = round(getIndices(coords[0], j));\n            flattenIndex += index * ").concat(i,";\n          }\n          setOutput(getX(flattenIndex, coords[1]));\n        }\n      ")}));var yne={kernelName:EV.GatherNd,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.params,o=t.indices,i=o.shape,s=i[i.length-1],u=EV.util.sizeFromShape(r.shape),c=EV.backend_util.prepareAndValidate(r,o),l=(0,a.Z)(c,4),f=l[0],d=l[1],p=l[2],h=l[3],m=b7({inputs:{x:o},backend:n,attrs:{shape:[d,s]}}),v=b7({inputs:{x:r},backend:n,attrs:{shape:[EV.util.sizeFromShape(r.shape)/p,p]}});if(n.shouldExecuteOnCPU([r,o])||"string"===r.dtype){var g=n.readSync(o.dataId),y=n.bufferSync(r),b=q8(g,y,r.dtype,d,s,p,h,r.shape,u);return n.makeTensorInfo(f,r.dtype,b.values)}var x=new gne(s,h,[d,p]),w=n.runWebGLProgram(x,[v,m],v.dtype),k=b7({inputs:{x:w},backend:n,attrs:{shape:f}});return n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(v),n.disposeIntermediateTensorInfo(w),k}},bne=(0,d.Z)((function e(t,n){(0,f.Z)(this,e),this.variableNames=["A","indices"],this.outputShape=n,this.rank=n.length;var r=c8(this.rank),a=function(e,t){for(var n=["resRC.x","resRC.y","resRC.z","resRC.w"],r=[],a=0;a<e.length;a++)2===a?r.push("index"):r.push("".concat(n[a]));return r.join()}(t);this.userCode="\n      void main() {\n        ".concat(r," resRC = getOutputCoords();\n        int index = int(getIndices(resRC.x, resRC.z));\n        float inBounds = (index >= 0) && (index < ").concat(t[2],") ? 1.0 : 0.0;\n        setOutput(inBounds * getA(").concat(a,"));\n      }\n    ")}));function xne(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=t.indices,i=r.axis,s=r.batchDims,u=EV.util.parseAxisParam(i,a.shape)[0];(0,EV.env)().get("DEBUG")&&function(){for(var e=n.readSync(o.dataId),t=a.shape[u],r=function(n){var r=e[n];EV.util.assert(r<=t-1&&r>=0,(function(){return"GatherV2: the index value ".concat(r," is not in [0, ").concat(t-1,"]")}))},i=0;i<e.length;++i)r(i)}();var c=EV.backend_util.segment_util.collectGatherOpShapeInfo(a,o,u,s),l=EV.util.sizeFromShape(o.shape),f=[],d=b7({inputs:{x:a},backend:n,attrs:{shape:[c.batchSize,c.outerSize,c.dimSize,c.sliceSize]}}),p=b7({inputs:{x:o},backend:n,attrs:{shape:[c.batchSize,l/c.batchSize]}});f.push(d),f.push(p);var h=[c.batchSize,c.outerSize,l/c.batchSize,c.sliceSize];if(n.shouldExecuteOnCPU([a,o])||"string"===a.dtype){var m=n.bufferSync(p),v=n.bufferSync(d),g=W8(v,m,h);return f.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),n.makeTensorInfo(c.outputShape,g.dtype,g.values)}var y=new bne(d.shape,h),b=n.runWebGLProgram(y,[d,p],d.dtype);f.push(b);var x=b7({inputs:{x:b},backend:n,attrs:{shape:c.outputShape}});return f.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),x}var wne={kernelName:EV.GatherV2,backendName:"webgl",kernelFunc:xne},kne=l7({opSnippet:"return float(a > b);",packedOpSnippet:"\n  return vec4(greaterThan(a, b));\n",cpuKernelImpl:H8,dtype:"bool"}),Sne={kernelName:EV.Greater,backendName:"webgl",kernelFunc:kne},_ne=l7({opSnippet:"return float(a >= b);",packedOpSnippet:"\n  return vec4(greaterThanEqual(a, b));\n",dtype:"bool",cpuKernelImpl:G8}),Nne={kernelName:EV.GreaterEqual,backendName:"webgl",kernelFunc:_ne};var Ene={kernelName:EV.IFFT,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend;return Qte(t.input,!0,n)}},Cne=c7({opSnippet:"return float(!isnan(x) && !isinf(x));",dtype:"bool"}),Tne={kernelName:EV.IsFinite,backendName:"webgl",kernelFunc:Cne},Ine=c7({opSnippet:"return float(isinf(x));",dtype:"bool"}),One={kernelName:EV.IsInf,backendName:"webgl",kernelFunc:Ine},Ane=c7({opSnippet:"return float(isnan(x));",dtype:"bool"}),Dne={kernelName:EV.IsNan,backendName:"webgl",kernelFunc:Ane},Mne=l7({opSnippet:"return float(a < b);",packedOpSnippet:"\n  return vec4(lessThan(a, b));\n",cpuKernelImpl:K8,dtype:"bool"}),Rne={kernelName:EV.Less,backendName:"webgl",kernelFunc:Mne},Pne=l7({opSnippet:"return float(a <= b);",packedOpSnippet:"\n  return vec4(lessThanEqual(a, b));\n",cpuKernelImpl:X8,dtype:"bool"}),jne={kernelName:EV.LessEqual,backendName:"webgl",kernelFunc:Pne};var Fne={kernelName:EV.LinSpace,backendName:"webgl",kernelFunc:function(e){var t=e.backend,n=e.attrs,r=n.start,a=n.stop,o=n.num,i=Y8(r,a,o);return t.makeTensorInfo([i.length],"float32",i)}},Lne=c7({opSnippet:"if (isnan(x)) return x;\n  return x < 0.0 ? 0./0. : log(x);\n",packedOpSnippet:"\n  vec4 result = log(x);\n  bvec4 isNaN = isnan(x);\n  result.r = isNaN.r ? x.r : (x.r < 0.0 ? 0./0. : result.r);\n  result.g = isNaN.g ? x.g : (x.g < 0.0 ? 0./0. : result.g);\n  result.b = isNaN.b ? x.b : (x.b < 0.0 ? 0./0. : result.b);\n  result.a = isNaN.a ? x.a : (x.a < 0.0 ? 0./0. : result.a);\n  return result;\n",cpuKernelImpl:$8}),Bne={kernelName:EV.Log,backendName:"webgl",kernelFunc:Lne},zne=c7({opSnippet:"if (isnan(x)) return x;\n  return log(1.0 + x);\n"}),Zne={kernelName:EV.Log1p,backendName:"webgl",kernelFunc:zne},Vne=l7({opSnippet:"return float(a >= 1.0 && b >= 1.0);",packedOpSnippet:"\n  return vec4(\n    vec4(greaterThanEqual(a, vec4(1.0))) *\n    vec4(greaterThanEqual(b, vec4(1.0))));\n",dtype:"bool"}),Une={kernelName:EV.LogicalAnd,backendName:"webgl",kernelFunc:Vne},qne=c7({opSnippet:"return float(!(x >= 1.0));"}),Wne={kernelName:EV.LogicalNot,backendName:"webgl",kernelFunc:qne},Hne=l7({opSnippet:"return float(a >= 1.0 || b >= 1.0);",packedOpSnippet:"\n  return min(\n    vec4(greaterThanEqual(a, vec4(1.0))) +\n    vec4(greaterThanEqual(b, vec4(1.0))),\n    vec4(1.0));\n",dtype:"bool"}),Gne={kernelName:EV.LogicalOr,backendName:"webgl",kernelFunc:Hne},Kne=(0,d.Z)((function e(t,n,r,a,o){(0,f.Z)(this,e),this.variableNames=["x"],this.outputShape=[];var i,s=n,u=t[3]-1;this.outputShape=t;var c="float(".concat(r,") + float(").concat(a,") * sum");i=.5===o?"inversesqrt(".concat(c,")"):1===o?"1.0/(".concat(c,")"):"exp(log(".concat(c,") * float(-").concat(o,"));"),this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int r = coords[1];\n        int c = coords[2];\n        int d = coords[3];\n        float x = getX(b, r, c, d);\n        float sum = 0.0;\n        for (int j = -".concat(s,"; j <= ").concat(s,"; j++) {\n          int idx = d + j;\n          if (idx >= 0 && idx <=  ").concat(u,") {\n            float z = getX(b, r, c, idx);\n            sum += z * z;\n          }\n        }\n        float val = x * ").concat(i,";\n        setOutput(val);\n      }\n    ")})),Xne=(0,d.Z)((function e(t,n,r,a,o){(0,f.Z)(this,e),this.variableNames=["x"],this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0;var i,s=n,u=t[3]-1;this.outputShape=t;var c="float(".concat(r,") + float(").concat(a,") * sum");i=.5===o?"inversesqrt(".concat(c,")"):1===o?"1.0/(".concat(c,")"):"exp(log(".concat(c,") * float(-").concat(o,"));"),this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords.x;\n        int r = coords.y;\n        int c = coords.z;\n        int d = coords.w;\n\n        bool hasNextCol = d < ".concat(this.outputShape[3],";\n        bool hasNextRow = c < ").concat(this.outputShape[2],";\n\n        vec4 sum = vec4(0.);\n        vec4 xFragAtOutputCoords = getX(b, r, c, d);\n\n        vec4 xAtOutputCoords = vec4(\n          getChannel(xFragAtOutputCoords, vec2(c, d)),\n          hasNextCol ?\n            getChannel(xFragAtOutputCoords, vec2(c, d + 1)) : 0.0,\n          hasNextRow ?\n            getChannel(xFragAtOutputCoords , vec2(c + 1, d)) : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getChannel(xFragAtOutputCoords, vec2(c + 1, d + 1)) : 0.0\n        );\n\n        int firstChannel = d - ").concat(s,";\n        vec2 cache = vec2(0.);\n        if(firstChannel >= 0){\n          vec4 firstChannelFrag = getX(b, r, c, firstChannel);\n          cache.x = getChannel(firstChannelFrag, vec2(c, firstChannel));\n            if(hasNextRow){\n              cache.y = getChannel(firstChannelFrag, vec2(c + 1, firstChannel));\n            }\n        }\n\n        ivec2 depth = ivec2(d, d + 1);\n        for (int j = - ").concat(s,"; j <= ").concat(s,"; j++) {\n          ivec2 idx = depth + j;\n          bvec2 aboveLowerBound = greaterThanEqual(idx, ivec2(0));\n          bvec2 belowUpperBound = lessThanEqual(idx, ivec2(").concat(u,"));\n\n          bool depthInRange = aboveLowerBound.x && belowUpperBound.x;\n          bool depthPlusOneInRange = aboveLowerBound.y && belowUpperBound.y;\n\n          if(depthInRange || depthPlusOneInRange){\n            vec4 z = vec4(0.);\n            vec4 xFragAtCurrentDepth;\n            z.xz = cache.xy;\n            if(depthPlusOneInRange && hasNextCol){\n              xFragAtCurrentDepth = idx.y != d ?\n                getX(b, r, c, idx.y) : xFragAtOutputCoords;\n              z.y = getChannel(xFragAtCurrentDepth, vec2(c, idx.y));\n              if(hasNextRow){\n                z.w = getChannel(xFragAtCurrentDepth, vec2(c + 1, idx.y));\n              }\n            }\n            cache.xy = z.yw;\n            sum += z * z;\n          }\n        }\n        vec4 result = xAtOutputCoords * ").concat(i,";\n        setOutput(result);\n      }\n    ")})),Yne={kernelName:EV.LRN,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.depthRadius,i=r.bias,s=r.alpha,u=r.beta,c=(0,EV.env)().getBool("WEBGL_PACK_NORMALIZATION")?new Xne(a.shape,o,i,s,u):new Kne(a.shape,o,i,s,u);return n.runWebGLProgram(c,[a],a.dtype)}},$ne=(0,d.Z)((function e(t,n,r,a,o){(0,f.Z)(this,e),this.variableNames=["inputImage","outputImage","dy"],this.outputShape=[],this.outputShape=t,this.depth=t[3],this.depthRadius=n,this.bias=r,this.alpha=a,this.beta=o,this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int r = coords[1];\n        int c = coords[2];\n\n        float result = 0.0;\n        for (int d = 0; d < ".concat(this.depth,"; ++d) {\n          int depthBegin = int(max(0.0, float(d - ").concat(n,")));\n          int depthEnd = int(min(float(").concat(this.depth,"),\n              float(d + ").concat(n," + 1)));\n\n          const int MIN_DEPTH_BEGIN = 0;\n          const int MAX_DEPTH_END = ").concat(this.depth,";\n\n          float norm = 0.0;\n          for (int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k) {\n            if (k < depthBegin){\n              continue;\n            }\n            else if (k >= depthBegin && k < depthEnd) {\n              norm += getInputImage(b, r, c, k) * getInputImage(b, r, c, k);\n            }\n            else {\n              break;\n            }\n          }\n\n          norm = float(").concat(a,") * norm + float(").concat(r,");\n\n          for(int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k){\n            if (k < depthBegin){\n              continue;\n            }\n            else if (k >= depthBegin && k < depthEnd){\n              float dyi = -2.0 * float(").concat(a,")\n                * float(").concat(o,")\n                * getInputImage(b ,r ,c, k) * getOutputImage(b, r, c, d)\n                / norm;\n              if (k == d) {\n                dyi += pow(norm, -1.0 * ").concat(o,");\n              }\n              if (k == coords[3]) {\n                dyi *= getDy(b, r, c, d);\n                result += dyi;\n              }\n            }\n            else {\n              break;\n            }\n          }\n      }\n      setOutput(result);\n      }\n    ")})),Jne={kernelName:EV.LRNGrad,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=t.y,i=t.dy,s=r.depthRadius,u=r.bias,c=r.alpha,l=r.beta,f=new $ne(a.shape,s,u,c,l);return n.runWebGLProgram(f,[a,o,i],a.dtype)}};function Qne(e){var t=e.inputs,n=e.backend,r=e.attrs,o=t.x,i=r.reductionIndices,s=r.keepDims,u=o.shape.length,c=EV.util.parseAxisParam(i,o.shape),l=c,f=EV.backend_util.getAxesPermutation(l,u),d=null!=f,p=n.shouldExecuteOnCPU([o]),h=o;if(d){if(p){for(var m=n.texData.get(h.dataId).values,v=new Array(u),g=0;g<v.length;g++)v[g]=o.shape[f[g]];var y=w9(m,o.shape,o.dtype,f,v);h=n.makeTensorInfo(v,o.dtype),n.texData.get(h.dataId).values=y}else h=E7(o,f,n);l=EV.backend_util.getInnerMostAxes(l.length,u)}EV.backend_util.assertAxesAreInnerMostDims("max",l,u);var b,x=EV.backend_util.computeOutAndReduceShapes(h.shape,l),w=(0,a.Z)(x,2),k=w[0],S=w[1],_=k;if(s&&(_=EV.backend_util.expandShapeToKeepDim(k,c)),p){var N=n.texData.get(h.dataId).values,E=J8(N,EV.util.sizeFromShape(S),_,o.dtype);b=n.makeTensorInfo(_,o.dtype),n.texData.get(b.dataId).values=E}else b=function(e,t,n,r){var a=EV.util.sizeFromShape(t),o=b7({inputs:{x:e},attrs:{shape:[EV.util.sizeFromShape(e.shape)/a,a]},backend:r}),i=S7(o,e.dtype,"max",r),s=b7({inputs:{x:i},attrs:{shape:n},backend:r});return r.disposeIntermediateTensorInfo(o),r.disposeIntermediateTensorInfo(i),s}(h,S,_,n);return d&&n.disposeIntermediateTensorInfo(h),b}var ere={kernelName:EV.Max,backendName:"webgl",kernelFunc:Qne},tre=l7({opSnippet:"\n  if (isnan(a)) return a;\n  if (isnan(b)) return b;\n\n  return max(a, b);\n",packedOpSnippet:"\n  vec4 result = vec4(max(a, b));\n  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));\n  \n  result.r = isNaN.r > 0. ? NAN : result.r;\n  result.g = isNaN.g > 0. ? NAN : result.g;\n  result.b = isNaN.b > 0. ? NAN : result.b;\n  result.a = isNaN.a > 0. ? NAN : result.a;\n\n  return result;\n",cpuKernelImpl:Q8}),nre={kernelName:EV.Maximum,backendName:"webgl",kernelFunc:tre};var rre={kernelName:EV.MaxPool,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x;j6(a,"maxPool");var o=r.filterSize,i=r.strides,s=r.pad,u=r.dimRoundingMode;EV.util.assert(EV.backend_util.eitherStridesOrDilationsAreOne(i,1),(function(){return"Error in maxPool: Either strides or dilations must be 1. "+"Got strides ".concat(i," and dilations '").concat(1,"'")}));var c=EV.backend_util.computePool2DInfo(a.shape,o,i,1,s,u);if(1===c.filterWidth&&1===c.filterHeight&&EV.util.arraysEqual(c.inShape,c.outShape))return Q9({inputs:{x:a},backend:n});var l=new lee(c,"max",!1);return n.runWebGLProgram(l,[a],a.dtype)}};var are={kernelName:EV.MaxPool3D,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.filterSize,i=r.strides,s=r.pad,u=r.dataFormat,c=r.dimRoundingMode,l=EV.backend_util.computePool3DInfo(a.shape,o,i,[1,1,1],s,c,u),f=new fee(l,"max",!1);return n.runWebGLProgram(f,[a],a.dtype)}},ore=(0,d.Z)((function e(t){(0,f.Z)(this,e),this.variableNames=["dy","maxPos"],this.outputShape=t.inShape;var n=t.strideHeight,r=t.strideWidth,a=t.dilationHeight,o=t.effectiveFilterHeight,i=t.effectiveFilterWidth,s=o-1-t.padInfo.top,u=i-1-t.padInfo.left,c=o*i-1;this.userCode="\n      const ivec2 pads = ivec2(".concat(s,", ").concat(u,");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n\n        ivec2 dyRCCorner = coords.yz - pads;\n        int dyRCorner = dyRCCorner.x;\n        int dyCCorner = dyRCCorner.y;\n\n        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < ").concat(o,";\n          wR += ").concat(a,") {\n          float dyR = float(dyRCorner + wR) / ").concat(n,".0;\n\n          if (dyR < 0.0 || dyR >= ").concat(t.outHeight,".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          for (int wC = 0; wC < ").concat(i,"; wC++) {\n            float dyC = float(dyCCorner + wC) / ").concat(r,".0;\n\n            if (dyC < 0.0 || dyC >= ").concat(t.outWidth,".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            float dyValue = getDy(b, idyR, idyC, d);\n            int maxPosValue = ").concat(c," - int(getMaxPos(b, idyR, idyC, d));\n\n            // Get the current value, check it against the value from the\n            // position matrix.\n            int curPosValue = wR * ").concat(i," + wC;\n            float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);\n\n            dotProd += dyValue * mask;\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")})),ire=(0,d.Z)((function e(t){(0,f.Z)(this,e),this.variableNames=["dy","maxPos"],this.outputShape=t.inShape;var n=t.strideDepth,r=t.strideHeight,a=t.strideWidth,o=t.dilationDepth,i=t.dilationHeight,s=t.dilationWidth,u=t.effectiveFilterDepth,c=t.effectiveFilterHeight,l=t.effectiveFilterWidth,d=u-1-t.padInfo.front,p=c-1-t.padInfo.top,h=l-1-t.padInfo.left,m=u*c*l-1;this.userCode="\n      const ivec3 pads = ivec3(".concat(d,", ").concat(p,", ").concat(h,");\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int ch = coords.u;\n\n        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;\n        int dyDCorner = dyCorner.x;\n        int dyRCorner = dyCorner.y;\n        int dyCCorner = dyCorner.z;\n\n        // Convolve dy(?, ?, ?, ch) with pos mask(:, :, :, d) to get\n        // dx(xD, xR, xC, ch).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int wD = 0; wD < ").concat(u,";\n           wD += ").concat(o,") {\n          float dyD = float(dyDCorner + wD) / ").concat(n,".0;\n\n          if (dyD < 0.0 || dyD >= ").concat(t.outDepth,".0 || fract(dyD) > 0.0) {\n            continue;\n          }\n          int idyD = int(dyD);\n\n          for (int wR = 0; wR < ").concat(c,";\n              wR += ").concat(i,") {\n            float dyR = float(dyRCorner + wR) / ").concat(r,".0;\n\n            if (dyR < 0.0 || dyR >= ").concat(t.outHeight,".0 ||\n                fract(dyR) > 0.0) {\n              continue;\n            }\n            int idyR = int(dyR);\n\n            for (int wC = 0; wC < ").concat(l,";\n                wC += ").concat(s,") {\n              float dyC = float(dyCCorner + wC) / ").concat(a,".0;\n\n              if (dyC < 0.0 || dyC >= ").concat(t.outWidth,".0 ||\n                  fract(dyC) > 0.0) {\n                continue;\n              }\n              int idyC = int(dyC);\n\n              float dyValue = getDy(batch, idyD, idyR, idyC, ch);\n              int maxPosValue = ").concat(m," -\n                  int(getMaxPos(batch, idyD, idyR, idyC, ch));\n\n              // Get the current value, check it against the value from the\n              // position matrix.\n              int curPosValue =\n                  wD * ").concat(c," * ").concat(l," +\n                  wR * ").concat(l," + wC;\n              float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);\n\n              dotProd += dyValue * mask;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")}));var sre={kernelName:EV.MaxPool3DGrad,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,o=t.input,i=r.filterSize,s=r.strides,u=r.pad,c=r.dimRoundingMode,l=EV.backend_util.computePool3DInfo(o.shape,i,s,[1,1,1],u,c),f=new fee(l,"max",!0),d=n.runWebGLProgram(f,[o],o.dtype),p=new ire(l),h=n.runWebGLProgram(p,[a,d],o.dtype);return n.disposeIntermediateTensorInfo(d),h}};var ure={kernelName:EV.MaxPoolGrad,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,o=t.input,i=o;j6([o,t.output],"maxPoolGrad");var s=r.filterSize,u=r.strides,c=r.pad,l=r.dimRoundingMode,f=EV.backend_util.computePool2DInfo(i.shape,s,u,1,c,l),d=new lee(f,"max",!0),p=n.runWebGLProgram(d,[i],i.dtype),h=new ore(f),m=n.runWebGLProgram(h,[a,p],i.dtype);return n.disposeIntermediateTensorInfo(p),m}};var cre={kernelName:EV.MaxPoolWithArgmax,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.attrs,r=e.backend,o=t.x,i=n.filterSize,s=n.strides,u=n.pad,c=n.includeBatchInIndex,l=r;EV.util.assert(4===o.shape.length,(function(){return"Error in maxPool: input must be rank 4 but got rank ".concat(o.shape.length,".")}));var f=[1,1];EV.util.assert(EV.backend_util.eitherStridesOrDilationsAreOne(s,f),(function(){return"Error in maxPool: Either strides or dilations must be 1. "+"Got strides ".concat(s," and dilations '").concat(f,"'")}));var d=EV.backend_util.computePool2DInfo(o.shape,i,s,f,u),p=function(e,t,n,r){var a=new lee(n,"max",!1),o=r.runWebGLProgram(a,[e],"float32");return a=new lee(n,"max",!0,!0,t),[o,r.runWebGLProgram(a,[e],"float32")]}(o,c,d,l),h=(0,a.Z)(p,2);return[h[0],h[1]]}};var lre={kernelName:EV.Mean,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.attrs,r=e.backend,o=t.x,i=n.keepDims,s=n.axis,u=r,c=o.shape.length,l=EV.util.parseAxisParam(s,o.shape),f=l,d=EV.backend_util.getAxesPermutation(f,c),p=null!=d,h=u.shouldExecuteOnCPU([o]),m=[],v=o;if(p){if(h){for(var g=u.texData.get(v.dataId).values,y=new Array(c),b=0;b<y.length;b++)y[b]=o.shape[d[b]];var x=w9(g,o.shape,o.dtype,d,y);v=u.makeTensorInfo(y,o.dtype),u.texData.get(v.dataId).values=x}else v=E7(o,d,u);m.push(v),f=EV.backend_util.getInnerMostAxes(f.length,c)}EV.backend_util.assertAxesAreInnerMostDims("sum",f,c);var w=EV.backend_util.computeOutAndReduceShapes(v.shape,f),k=(0,a.Z)(w,2),S=k[0],_=k[1],N=S;i&&(N=EV.backend_util.expandShapeToKeepDim(S,l));for(var E=function(e,t,n,r){var a=EV.util.sizeFromShape(t),o=b7({inputs:{x:e},attrs:{shape:[EV.util.sizeFromShape(e.shape)/a,a]},backend:r}),i=S7(o,"float32","mean",r),s=b7({inputs:{x:i},attrs:{shape:n},backend:r});return r.disposeIntermediateTensorInfo(o),r.disposeIntermediateTensorInfo(i),s}(v,_,N,u),C=0,T=m;C<T.length;C++){var I=T[C];u.disposeIntermediateTensorInfo(I)}return E}};var fre={kernelName:EV.Min,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,o=t.x,i=r.axis,s=r.keepDims,u=o.shape.length,c=EV.util.parseAxisParam(i,o.shape),l=c,f=EV.backend_util.getAxesPermutation(l,u),d=o;null!=f&&(d=I7({inputs:{x:o},backend:n,attrs:{perm:f}}),l=EV.backend_util.getInnerMostAxes(l.length,o.shape.length)),EV.backend_util.assertAxesAreInnerMostDims("min",l,u);var p,h=EV.backend_util.computeOutAndReduceShapes(d.shape,l),m=(0,a.Z)(h,2),v=m[0],g=m[1],y=b7({inputs:{x:d},backend:n,attrs:{shape:[-1,EV.util.sizeFromShape(g)]}}),b=S7(y,y.dtype,"min",n);return p=b7(s?{inputs:{x:b},backend:n,attrs:{shape:EV.backend_util.expandShapeToKeepDim(v,c)}}:{inputs:{x:b},backend:n,attrs:{shape:v}}),n.disposeIntermediateTensorInfo(y),n.disposeIntermediateTensorInfo(b),null!=f&&n.disposeIntermediateTensorInfo(d),p}},dre=l7({opSnippet:"\n  if (isnan(a)) return a;\n  if (isnan(b)) return b;\n\n  return min(a, b);\n",packedOpSnippet:"\n  vec4 result = vec4(min(a, b));\n  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));\n  \n  result.r = isNaN.r > 0. ? NAN : result.r;\n  result.g = isNaN.g > 0. ? NAN : result.g;\n  result.b = isNaN.b > 0. ? NAN : result.b;\n  result.a = isNaN.a > 0. ? NAN : result.a;\n\n  return result;\n",cpuKernelImpl:e9}),pre={kernelName:EV.Minimum,backendName:"webgl",kernelFunc:dre},hre=(0,d.Z)((function e(t,n,r){(0,f.Z)(this,e),this.variableNames=["x"],this.outputShape=n.map((function(e,n){return e[0]+t[n]+e[1]}));var a=t.length,o=c8(a),i=n.map((function(e){return e[0]})).join(","),s=n.map((function(e,n){return e[0]+t[n]})).join(","),u=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,a),c="reflect"===r?0:1;this.userCode=1!==a?"\n      ".concat(o," start = ").concat(o,"(").concat(i,");\n      ").concat(o," end = ").concat(o,"(").concat(s,");\n\n      void main() {\n        ").concat(o," outC = getOutputCoords();\n        for (int i = 0; i < ").concat(a,"; i++) {\n          if (outC[i] < start[i]) {\n            outC[i] = start[i] * 2 - outC[i] - ").concat(c,";\n          } else if(outC[i] >= end[i]) {\n            outC[i] = (end[i] - 1) * 2 - outC[i] + ").concat(c,";\n          }\n        }\n        ").concat(o," coords = outC - start;\n        setOutput(getX(").concat(u,"));\n      }\n    "):"\n        int start = ".concat(i,";\n        int end = ").concat(s,";\n\n        void main() {\n          int outC = getOutputCoords();\n          if (outC < start) {\n            outC = start * 2 - outC - ").concat(c,";\n          } else if(outC >= end) {\n            outC = (end - 1) * 2 - outC + ").concat(c,";\n          }\n          setOutput(getX(outC - start));\n        }\n      ")})),mre=(0,d.Z)((function e(t,n,r){(0,f.Z)(this,e),this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=n.map((function(e,n){return e[0]+t[n]+e[1]}));var a=t.length,o=c8(a),i=n.map((function(e){return e[0]})).join(","),s=n.map((function(e,n){return e[0]+t[n]})).join(","),u=_9("rc",a),c=_9("source",a),l="".concat(u[a-1]," < ").concat(this.outputShape[a-1]),d=1===a?"source":"vec2(".concat(c.slice(-2).join(),")"),p="reflect"===r?0:1,h="";if(1===a){var m="\n        ".concat(o," source = rc;\n        if (source < start) {\n          source = start * 2 - source - ").concat(p,";\n        } else if (source >= end) {\n          source = (end - 1) * 2 - source + ").concat(p,";\n        }\n        source -= start;\n      ");h="\n        ".concat(o," rc = outputLoc;\n        ").concat(m,"\n        result[0] = getChannel(getX(").concat(c.join(),"), ").concat(d,");\n        ").concat(u[a-1]," += 1;\n        if(").concat(l,") {\n          ").concat(m,"\n          result[1] = getChannel(getX(").concat(c.join(),"), ").concat(d,");\n        }\n      ")}else{var v="\n        ".concat(o," source = rc;\n        ").concat(o," lt = ").concat(o,"(lessThan(source, start));\n        ").concat(o," gte = ").concat(o,"(greaterThanEqual(source, end));\n        ").concat(o," orig = 1 - (lt + gte);\n        source = orig * source +\n                lt * (start * 2 - source - ").concat(p,") +\n                gte * ((end - 1) * 2 - source + ").concat(p,");\n        source -= start;\n      ");h="\n        ".concat(o," rc = outputLoc;\n        ").concat(v,"\n        result[0] = getChannel(getX(").concat(c.join(),"), ").concat(d,");\n        ").concat(u[a-1]," += 1;\n        if(").concat(l,") {\n          ").concat(v,"\n          result[1] = getChannel(getX(").concat(c.join(),"), ").concat(d,");\n        }\n        rc = outputLoc;\n        ").concat(u[a-2]," += 1;\n        if(").concat(u[a-2]," < ").concat(this.outputShape[a-2],") {\n          ").concat(v,"\n          result[2] = getChannel(getX(").concat(c.join(),"), ").concat(d,");\n          ").concat(u[a-1]," += 1;\n          if(").concat(l,") {\n            ").concat(v,"\n            result[3] = getChannel(getX(").concat(c.join(),"), ").concat(d,");\n          }\n        }\n      ")}this.userCode="\n      const ".concat(o," start = ").concat(o,"(").concat(i,");\n      const ").concat(o," end = ").concat(o,"(").concat(s,");\n\n      void main() {\n        ").concat(o," outputLoc = getOutputCoords();\n        vec4 result = vec4(0.);\n        ").concat(h,"\n        setOutput(result);\n      }\n    ")})),vre={kernelName:EV.MirrorPad,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.paddings,i=r.mode,s=(0,EV.env)().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new mre(a.shape,o,i):new hre(a.shape,o,i);return n.runWebGLProgram(s,[a],a.dtype)}},gre=l7({opSnippet:"if (b == 0.0) return NAN;\n  return mod(a, b);",packedOpSnippet:"\n  vec4 result = mod(a, b);\n  vec4 isNaN = vec4(equal(b, vec4(0.0)));\n  \n  result.r = isNaN.r > 0. ? NAN : result.r;\n  result.g = isNaN.g > 0. ? NAN : result.g;\n  result.b = isNaN.b > 0. ? NAN : result.b;\n  result.a = isNaN.a > 0. ? NAN : result.a;\n\n  return result;\n"}),yre={kernelName:EV.Mod,backendName:"webgl",kernelFunc:gre},bre=(0,d.Z)((function e(t,n,r){(0,f.Z)(this,e),this.variableNames=["probs"],this.customUniforms=[{name:"seed",type:"float"}],this.outputShape=[t,r],this.userCode="\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n\n        float r = random(seed);\n        float cdf = 0.0;\n\n        for (int i = 0; i < ".concat(n-1,"; i++) {\n          cdf += getProbs(batch, i);\n\n          if (r < cdf) {\n            setOutput(float(i));\n            return;\n          }\n        }\n\n        // If no other event happened, last event happened.\n        setOutput(float(").concat(n-1,"));\n      }\n    ")})),xre=l7({opSnippet:"\nif (a == b) {\n  return 1.0;\n};\nreturn a / b;",packedOpSnippet:"\n  // vec4 one = vec4(equal(a, b));\n  // return one + (vec4(1.0) - one) * a / b;\n  vec4 result = a / b;\n  if(a.x == b.x) {\n    result.x = 1.;\n  }\n  if(a.y == b.y) {\n    result.y = 1.;\n  }\n  if(a.z == b.z) {\n    result.z = 1.;\n  }\n  if(a.w == b.w) {\n    result.w = 1.;\n  }\n\n  return result;\n",checkOutOfBounds:!0}),wre={kernelName:EV.RealDiv,backendName:"webgl",kernelFunc:xre},kre="return a - b;",Sre=l7({opSnippet:kre,packedOpSnippet:kre,supportsComplex:!0,cpuKernelImpl:y9}),_re={kernelName:EV.Sub,backendName:"webgl",kernelFunc:Sre};function Nre(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.logits,o=r.dim,i=EV.util.parseAxisParam([o],a.shape),s=Qne({inputs:{x:a},backend:n,attrs:{reductionIndices:i,keepDims:!1}}),u=EV.backend_util.expandShapeToKeepDim(s.shape,i),c=b7({inputs:{x:s},backend:n,attrs:{shape:u}}),l=Sre({inputs:{a:a,b:c},backend:n}),f=Wte({inputs:{x:l},backend:n}),d=C7({inputs:{x:f},backend:n,attrs:{axis:i,keepDims:!1}}),p=b7({inputs:{x:d},backend:n,attrs:{shape:u}}),h=xre({inputs:{a:f,b:p},backend:n});return n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(l),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(p),h}var Ere={kernelName:EV.Softmax,backendName:"webgl",kernelFunc:Nre};var Cre={kernelName:EV.Multinomial,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.logits,o=r.numSamples,i=r.seed,s=r.normalized,u=s?a:Nre({inputs:{logits:a},backend:n,attrs:{dim:a.shape.length-1}}),c=u.shape[0],l=u.shape[1],f=new bre(c,l,o),d=[[i]],p=n.runWebGLProgram(f,[u],"int32",d);return s||n.disposeIntermediateTensorInfo(u),p}};var Tre={kernelName:EV.Neg,backendName:"webgl",kernelFunc:function(e){var t,n=e.inputs,r=e.backend,o=n.x;if(r.shouldExecuteOnCPU([o])){var i=r.texData.get(o.dataId),s=n9(i.values,o.shape,o.dtype),u=(0,a.Z)(s,2),c=u[0],l=u[1];return r.makeTensorInfo(l,o.dtype,c)}return t=(0,EV.env)().getBool("WEBGL_PACK_UNARY_OPERATIONS")?new W9(o.shape,"\n  vec4 result = -x;\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n"):new A9(o.shape,"if (isnan(x)) return x;\n  return -x;\n"),r.runWebGLProgram(t,[o],o.dtype)}},Ire=EV.kernel_impls.nonMaxSuppressionV3Impl;var Ore={kernelName:EV.NonMaxSuppressionV3,backendName:"webgl",kernelFunc:function(e){EV.backend_util.warn("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");var t=e.inputs,n=e.backend,r=e.attrs,a=t.boxes,o=t.scores,i=r.maxOutputSize,s=r.iouThreshold,u=r.scoreThreshold,c=n.readSync(a.dataId),l=n.readSync(o.dataId),f=Ire(c,l,i,s,u).selectedIndices;return n.makeTensorInfo([f.length],"int32",new Int32Array(f))}},Are=EV.kernel_impls.nonMaxSuppressionV4Impl;var Dre={kernelName:EV.NonMaxSuppressionV4,backendName:"webgl",kernelFunc:function(e){EV.backend_util.warn("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");var t=e.inputs,n=e.backend,r=e.attrs,a=t.boxes,o=t.scores,i=r.maxOutputSize,s=r.iouThreshold,u=r.scoreThreshold,c=r.padToMaxOutputSize,l=n.readSync(a.dataId),f=n.readSync(o.dataId),d=Are(l,f,i,s,u,c),p=d.selectedIndices,h=d.validOutputs;return[n.makeTensorInfo([p.length],"int32",new Int32Array(p)),n.makeTensorInfo([],"int32",new Int32Array([h]))]}},Mre=EV.kernel_impls.nonMaxSuppressionV5Impl;var Rre={kernelName:EV.NonMaxSuppressionV5,backendName:"webgl",kernelFunc:function(e){EV.backend_util.warn("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");var t=e.inputs,n=e.backend,r=e.attrs,a=t.boxes,o=t.scores,i=r.maxOutputSize,s=r.iouThreshold,u=r.scoreThreshold,c=r.softNmsSigma,l=n.readSync(a.dataId),f=n.readSync(o.dataId),d=Mre(l,f,i,s,u,c),p=d.selectedIndices,h=d.selectedScores;return[n.makeTensorInfo([p.length],"int32",new Int32Array(p)),n.makeTensorInfo([h.length],"float32",new Float32Array(h))]}},Pre=(0,d.Z)((function e(t,n,r,a){(0,f.Z)(this,e),this.variableNames=["indices"],this.outputShape=[t,n],this.userCode="\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int index = round(getIndices(coords.x));\n        setOutput(mix(float(".concat(a,"), float(").concat(r,"),\n                      float(index == coords.y)));\n      }\n    ")})),jre={kernelName:EV.OneHot,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,a=e.attrs,o=t.indices,i=a.depth,s=a.onValue,u=a.offValue,c=EV.util.sizeFromShape(o.shape),l=new Pre(c,i,s,u),f=b7({inputs:{x:o},backend:n,attrs:{shape:[c]}}),d=n.runWebGLProgram(l,[f],o.dtype);n.disposeIntermediateTensorInfo(f);var p=b7({inputs:{x:d},backend:n,attrs:{shape:[].concat((0,r.Z)(o.shape),[i])}});return n.disposeIntermediateTensorInfo(d),p}};function Fre(e){var t=e.inputs,n=e.backend,r=t.x;if("complex64"===r.dtype){var a=Dee({inputs:{input:r},backend:n}),o=Fre({inputs:{x:a},backend:n}),i=Gee({inputs:{input:r},backend:n}),s=Fre({inputs:{x:i},backend:n}),u=t7({inputs:{real:o,imag:s},backend:n});return n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(s),u}return nne({attrs:{shape:r.shape,dtype:r.dtype,value:"string"===r.dtype?"":0},backend:n})}var Lre={kernelName:EV.ZerosLike,backendName:"webgl",kernelFunc:Fre};var Bre={kernelName:EV.OnesLike,backendName:"webgl",kernelFunc:function e(t){var n=t.inputs,r=t.backend,a=n.x;if("string"===a.dtype)throw new Error("onesLike is not supported under string dtype");if("complex64"===a.dtype){var o=Dee({inputs:{input:a},backend:r}),i=e({inputs:{x:o},backend:r}),s=Gee({inputs:{input:a},backend:r}),u=Fre({inputs:{x:s},backend:r}),c=t7({inputs:{real:i,imag:u},backend:r});return r.disposeIntermediateTensorInfo(o),r.disposeIntermediateTensorInfo(i),r.disposeIntermediateTensorInfo(s),r.disposeIntermediateTensorInfo(u),c}return nne({attrs:{shape:a.shape,dtype:a.dtype,value:1},backend:r})}};var zre={kernelName:EV.Pack,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs.axis;if(1===t.length)return Gte({inputs:{input:t[0]},backend:n,attrs:{dim:r}});var a=t[0].shape,o=t[0].dtype;t.forEach((function(e){EV.util.assertShapesMatch(a,e.shape,"All tensors passed to stack must have matching shapes"),EV.util.assert(o===e.dtype,(function(){return"All tensors passed to stack must have matching dtypes"}))}));var i=[],s=Yee({inputs:t.map((function(e){var t=Gte({inputs:{input:e},backend:n,attrs:{dim:r}});return i.push(t),t})),backend:n,attrs:{axis:r}});return i.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),s}},Zre=(0,d.Z)((function e(t,n,r){(0,f.Z)(this,e),this.variableNames=["x"],this.customUniforms=[{name:"value",type:"float"}],this.outputShape=n.map((function(e,n){return e[0]+t[n]+e[1]}));var a=t.length,o=c8(a),i=n.map((function(e){return e[0]})).join(","),s=n.map((function(e,n){return e[0]+t[n]})).join(","),u=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,a);this.userCode=1!==a?"\n      ".concat(o," start = ").concat(o,"(").concat(i,");\n      ").concat(o," end = ").concat(o,"(").concat(s,");\n\n      void main() {\n        ").concat(o," outC = getOutputCoords();\n        if (any(lessThan(outC, start)) || any(greaterThanEqual(outC, end))) {\n          setOutput(value);\n        } else {\n          ").concat(o," coords = outC - start;\n          setOutput(getX(").concat(u,"));\n        }\n      }\n    "):"\n        int start = ".concat(i,";\n        int end = ").concat(s,";\n\n        void main() {\n          int outC = getOutputCoords();\n          if (outC < start || outC >= end) {\n            setOutput(value);\n          } else {\n            setOutput(getX(outC - start));\n          }\n        }\n      ")})),Vre=(0,d.Z)((function e(t,n,r){(0,f.Z)(this,e),this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"value",type:"float"}],this.outputShape=n.map((function(e,n){return e[0]+t[n]+e[1]}));for(var a=t.length,o=c8(a),i=n.map((function(e){return e[0]})).join(","),s=n.map((function(e,n){return e[0]+t[n]})).join(","),u=_9("rc",a),c=_9("source",a),l="".concat(u[a-1]," < ").concat(this.outputShape[a-1]),d=1===a?"source":"vec2(".concat(c.slice(-2).join(),")"),p=["".concat(o," rc = outputLoc;"),"".concat(u[a-1]," += 1;\n       if(").concat(l,") {\n      "),1===a?"":"}\n       rc = outputLoc;\n       ".concat(u[a-2]," += 1;\n       if(").concat(u[a-2]," < ").concat(this.outputShape[a-2],") {"),1===a?"":"  ".concat(u[a-1]," += 1;\n         if(").concat(l,") {")],h=1===a?"rc < start || rc >= end":"any(lessThan(rc, start)) || any(greaterThanEqual(rc, end))",m="",v=0,g=1===a?2:4;v<g;v++)m+="\n        ".concat(p[v],"\n        if (").concat(h,") {\n          result[").concat(v,"] = float(value);\n        } else {\n          ").concat(o," source = rc - start;\n          result[").concat(v,"] = getChannel(getX(").concat(c.join(),"), ").concat(d,");\n        }\n      ");m+=1===a?"} ":"}}",this.userCode="\n      const ".concat(o," start = ").concat(o,"(").concat(i,");\n      const ").concat(o," end = ").concat(o,"(").concat(s,");\n\n      void main() {\n        ").concat(o," outputLoc = getOutputCoords();\n        vec4 result = vec4(0.);\n        ").concat(m,"\n        setOutput(result);\n      }\n    ")})),Ure=function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.paddings,i=r.constantValue;if(0===EV.util.sizeFromShape(a.shape)){var s=o.map((function(e,t){return e[0]+a.shape[t]+e[1]}));return nne({backend:n,attrs:{shape:s,value:i,dtype:a.dtype}})}var u=(0,EV.env)().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new Vre(a.shape,o,i):new Zre(a.shape,o,i),c=[[i]];return n.runWebGLProgram(u,[a],a.dtype,c)},qre={kernelName:EV.PadV2,backendName:"webgl",kernelFunc:Ure},Wre=l7({opSnippet:"\n  if(a < 0.0 && floor(b) < b){\n    return NAN;\n  }\n  if (b == 0.0) {\n    return 1.0;\n  }\n  return (round(mod(b, 2.0)) != 1) ?\n      pow(abs(a), b) : sign(a) * pow(abs(a), b);\n",packedOpSnippet:"\n  // isModRound1 has 1 for components with round(mod(b, 2.0)) == 1, 0 otherwise.\n  vec4 isModRound1 = vec4(equal(round(mod(b, 2.0)), ivec4(1)));\n  vec4 multiplier = sign(a) * isModRound1 + (vec4(1.0) - isModRound1);\n  vec4 result = multiplier * pow(abs(a), b);\n\n  // Ensure that a^0 = 1, including 0^0 = 1 as this correspond to TF and JS\n  bvec4 isExpZero = equal(b, vec4(0.0));\n  result.r = isExpZero.r ? 1.0 : result.r;\n  result.g = isExpZero.g ? 1.0 : result.g;\n  result.b = isExpZero.b ? 1.0 : result.b;\n  result.a = isExpZero.a ? 1.0 : result.a;\n\n  vec4 isNaN = vec4(lessThan(a, vec4(0.0))) * vec4(lessThan(floor(b), b));\n  \n  result.r = isNaN.r > 0. ? NAN : result.r;\n  result.g = isNaN.g > 0. ? NAN : result.g;\n  result.b = isNaN.b > 0. ? NAN : result.b;\n  result.a = isNaN.a > 0. ? NAN : result.a;\n\n  return result;\n"}),Hre={kernelName:EV.Pow,backendName:"webgl",kernelFunc:Wre};var Gre={kernelName:EV.Prod,backendName:"webgl",kernelFunc:function(e){var t,n=e.inputs,r=e.backend,o=e.attrs,i=n.x,s=o.axis,u=o.keepDims,c=i.shape.length,l=[],f=EV.util.parseAxisParam(s,i.shape),d=f,p=EV.backend_util.getAxesPermutation(d,c),h=i;if(null!=p&&(h=I7({inputs:{x:i},backend:r,attrs:{perm:p}}),d=EV.backend_util.getInnerMostAxes(d.length,c),l.push(h)),EV.backend_util.assertAxesAreInnerMostDims("prod",d,c),r.shouldExecuteOnCPU([h])){var m=r.texData.get(h.dataId).values,v=a9(h.shape,h.dtype,m,d),g=v.outVals,y=v.outShape,b=v.outDtype;t=r.makeTensorInfo(y,b,g)}else{var x=EV.backend_util.computeOutAndReduceShapes(h.shape,d),w=(0,a.Z)(x,2),k=w[0],S=w[1],_=EV.util.sizeFromShape(S),N=b7({inputs:{x:h},backend:r,attrs:{shape:[-1,_]}}),E=S7(N,(0,EV.sumOutType)(i.dtype),"prod",r);t=b7({inputs:{x:E},backend:r,attrs:{shape:k}}),l.push(N),l.push(E)}if(u){l.push(t);var C=EV.backend_util.expandShapeToKeepDim(t.shape,f);t=b7({inputs:{x:t},backend:r,attrs:{shape:C}})}return l.forEach((function(e){return r.disposeIntermediateTensorInfo(e)})),t}},Kre=function(e){var t=e.backend,n=e.attrs,r=n.start,a=n.stop,o=n.step,i=n.dtype,s=o9(r,a,o,i);return t.makeTensorInfo([s.length],i,s)},Xre={kernelName:EV.Range,backendName:"webgl",kernelFunc:Kre},Yre=c7({opSnippet:"return 1.0 / x;"}),$re={kernelName:EV.Reciprocal,backendName:"webgl",kernelFunc:Yre},Jre=c7({opSnippet:"if (isnan(x)) return x;\n  return (x < 0.0) ? 0.0 : x;\n",packedOpSnippet:"\n  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n"}),Qre={kernelName:EV.Relu,backendName:"webgl",kernelFunc:Jre},eae=c7({opSnippet:"if (isnan(x)) return x;\n  return (x < 0.0) ? 0.0 : min(6.0, x);\n",packedOpSnippet:"\n  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n"}),tae={kernelName:EV.Relu6,backendName:"webgl",kernelFunc:eae},nae=(0,d.Z)((function e(t,n,r,o,i){(0,f.Z)(this,e),this.variableNames=["A"],this.outputShape=[];var s=(0,a.Z)(t,4),u=s[0],c=s[1],l=s[2],d=s[3];this.outputShape=[u,n,r,d];var p,h=[o&&n>1?c-1:c,o&&r>1?l-1:l],m=[o&&n>1?n-1:n,o&&r>1?r-1:r];p=i?"(vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC - vec2(0.5)":"vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode="\n      const vec2 effectiveInputOverOutputRatioRC = vec2(\n          ".concat(h[0]/m[0],",\n          ").concat(h[1]/m[1],");\n      const vec2 inputShapeRC = vec2(").concat(c,".0, ").concat(l,".0);\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        ivec2 yRC = coords.yz;\n\n        // Fractional source index.\n        vec2 sourceFracIndexRC = ").concat(p,";\n\n        // Compute the four integer indices.\n        ivec2 sourceFloorRC = ivec2(max(sourceFracIndexRC, vec2(0.0)));\n        ivec2 sourceCeilRC = ivec2(\n          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));\n\n        float topLeft = getA(b, sourceFloorRC.x, sourceFloorRC.y, d);\n        float bottomLeft = getA(b, sourceCeilRC.x, sourceFloorRC.y, d);\n        float topRight = getA(b, sourceFloorRC.x, sourceCeilRC.y, d);\n        float bottomRight = getA(b, sourceCeilRC.x, sourceCeilRC.y, d);\n\n        vec2 fracRC = sourceFracIndexRC - vec2(sourceFloorRC);\n\n        float top = topLeft + (topRight - topLeft) * fracRC.y;\n        float bottom = bottomLeft + (bottomRight - bottomLeft) * fracRC.y;\n        float newValue = top + (bottom - top) * fracRC.x;\n\n        setOutput(newValue);\n      }\n    ")})),rae=(0,d.Z)((function e(t,n,r,o,i){(0,f.Z)(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];var s=(0,a.Z)(t,4),u=s[0],c=s[1],l=s[2],d=s[3];this.outputShape=[u,n,r,d];var p,h=[o&&n>1?c-1:c,o&&r>1?l-1:l],m=[o&&n>1?n-1:n,o&&r>1?r-1:r];p=i?"(vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC - vec3(0.5)":"vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode="\n      const vec3 effectiveInputOverOutputRatioRC = vec3(\n          ".concat(h[0]/m[0],",\n          ").concat(h[1]/m[1],",\n          ").concat(h[1]/m[1],");\n      const vec3 inputShapeRC = vec3(").concat(c,".0, ").concat(l,".0,\n                                     ").concat(l,".0);\n\n      float getAValue(int b, int r, int c, int d) {\n        return getChannel(getA(b, r, c, d), vec2(c, d));\n      }\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        // Calculate values for next column in yRC.z.\n        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);\n\n        // Fractional source index.\n        vec3 sourceFracIndexRC = ").concat(p,";\n\n        // Compute the four integer indices.\n        ivec3 sourceFloorRC = ivec3(max(sourceFracIndexRC, vec3(0.0)));\n        ivec3 sourceCeilRC = ivec3(\n          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));\n\n        // Should we calculate next column and row elements in 2x2 packed cell.\n        bool hasNextCol = d < ").concat(d-1,";\n        bool hasNextRow = coords.z < ").concat(r-1,";\n\n        // In parallel, construct four corners for all four components in\n        // packed 2x2 cell.\n        vec4 topLeft = vec4(\n          getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d),\n          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d + 1) : 0.0);\n\n        vec4 bottomLeft = vec4(\n          getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d),\n          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d + 1) : 0.0);\n\n        vec4 topRight = vec4(\n          getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d),\n          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d + 1) : 0.0);\n\n        vec4 bottomRight = vec4(\n          getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d),\n          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d + 1) : 0.0);\n\n        vec3 fracRC = sourceFracIndexRC - vec3(sourceFloorRC);\n\n        vec4 top = mix(topLeft, topRight, fracRC.yyzz);\n        vec4 bottom = mix(bottomLeft, bottomRight, fracRC.yyzz);\n        vec4 newValue = mix(top, bottom, fracRC.x);\n\n        setOutput(newValue);\n      }\n    ")}));var aae={kernelName:EV.ResizeBilinear,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,o=t.images,i=r.alignCorners,s=r.halfPixelCenters,u=r.size,c=(0,a.Z)(u,2),l=c[0],f=c[1],d=(0,EV.env)().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new rae(o.shape,l,f,i,s):new nae(o.shape,l,f,i,s);return n.runWebGLProgram(d,[o],"float32")}},oae=(0,d.Z)((function e(t,n,r){(0,f.Z)(this,e),this.variableNames=["dy"],this.outputShape=[],this.outputShape=n;var o=(0,a.Z)(n,3),i=o[1],s=o[2],u=(0,a.Z)(t,3),c=u[1],l=u[2],d=[r&&c>1?i-1:i,r&&l>1?s-1:s],p=[r&&c>1?c-1:c,r&&l>1?l-1:l],h=d[0]/p[0],m=d[1]/p[1],v=1/h,g=1/m,y=2*Math.ceil(v)+2,b=2*Math.ceil(g)+2;this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        int r = coords[1];\n        int c = coords[2];\n\n        float accumulator = 0.0;\n\n        const float heightScale = float(".concat(h,");\n        const float widthScale = float(").concat(m,");\n\n        const float invHeightScale = float(").concat(v,");\n        const float invWidthScale = float(").concat(g,");\n\n        const int winHeight = int(").concat(y,");\n        const int winWidth = int(").concat(b,");\n\n        // Compute bounds for where in dy we will look\n        float startRLerp = floor(float(r) * invHeightScale);\n        int startDyR = int(startRLerp - float(winHeight / 2));\n\n        float startCLerp = floor(float(c) * invWidthScale);\n        int startDyC = int(startCLerp - float(winWidth / 2));\n\n        // Loop over dy\n        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {\n          int dyR = dyROffset + startDyR;\n\n          // Guard against the window exceeding the bounds of dy\n          if (dyR < 0 || dyR >= ").concat(c,") {\n            continue;\n          }\n\n          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {\n            int dyC = dyCOffset + startDyC;\n\n            // Guard against the window exceeding the bounds of dy\n            if (dyC < 0 || dyC >= ").concat(l,") {\n              continue;\n            }\n\n            float dxR = float(dyR) * heightScale;\n            int topDxRIndex = int(floor(dxR));\n            int bottomDxRIndex = int(min(ceil(dxR), ").concat(i-1,".0));\n            float dxRLerp = dxR - float(topDxRIndex);\n            float inverseDxRLerp = 1.0 - dxRLerp;\n\n            float dxC = float(dyC) * widthScale;\n            int leftDxCIndex = int(floor(dxC));\n            int rightDxCIndex = int(min(ceil(dxC), ").concat(s-1,".0));\n            float dxCLerp = dxC - float(leftDxCIndex);\n            float inverseDxCLerp = 1.0 - dxCLerp;\n\n            if (r == topDxRIndex && c == leftDxCIndex) {\n              // topLeft\n              accumulator +=\n                getDy(b, dyR, dyC, d) * inverseDxRLerp * inverseDxCLerp;\n            }\n\n            if (r == topDxRIndex && c == rightDxCIndex) {\n              // topRight\n              accumulator += getDy(b, dyR, dyC, d) * inverseDxRLerp * dxCLerp;\n            }\n\n            if (r == bottomDxRIndex && c == leftDxCIndex) {\n              // bottomLeft\n              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * inverseDxCLerp;\n            }\n\n            if (r == bottomDxRIndex && c == rightDxCIndex) {\n              // bottomRight\n              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * dxCLerp;\n            }\n          }\n        }\n        // End loop over dy\n\n        setOutput(accumulator);\n      }\n    ")}));var iae={kernelName:EV.ResizeBilinearGrad,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.images,o=t.dy,i=r.alignCorners,s=new oae(o.shape,a.shape,i);return n.runWebGLProgram(s,[o],o.dtype)}},sae=(0,d.Z)((function e(t,n,r,o,i){(0,f.Z)(this,e),this.variableNames=["A"],this.outputShape=[];var s=(0,a.Z)(t,4),u=s[0],c=s[1],l=s[2],d=s[3];this.outputShape=[u,n,r,d];var p,h=[o&&n>1?c-1:c,o&&r>1?l-1:l],m=[o&&n>1?n-1:n,o&&r>1?r-1:r],v=o?"0.5":"0.0";p=i?"max((vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC, vec2(0.0))":"vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode="\n      const vec2 effectiveInputOverOutputRatioRC = vec2(\n          ".concat(h[0]/m[0],",\n          ").concat(h[1]/m[1],");\n      const vec2 inputShapeRC = vec2(").concat(c,".0, ").concat(l,".0);\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        ivec2 yRC = coords.yz;\n\n        // Fractional source index.\n        vec2 sourceFracIndexRC = ").concat(p,";\n\n        // Compute the coordinators of nearest neighbor point.\n        ivec2 sourceNearestRC = ivec2(\n          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ").concat(v,")));\n        float newValue = getA(b, sourceNearestRC.x, sourceNearestRC.y, d);\n\n        setOutput(newValue);\n      }\n    ")})),uae=(0,d.Z)((function e(t,n,r,o,i){(0,f.Z)(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];var s=(0,a.Z)(t,4),u=s[0],c=s[1],l=s[2],d=s[3];this.outputShape=[u,n,r,d];var p,h=[o&&n>1?c-1:c,o&&r>1?l-1:l],m=[o&&n>1?n-1:n,o&&r>1?r-1:r],v=o?"0.5":"0.0";p=i?"max((vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC, vec3(0.0))":"vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode="\n      const vec3 effectiveInputOverOutputRatioRC = vec3(\n          ".concat(h[0]/m[0],",\n          ").concat(h[1]/m[1],",\n          ").concat(h[1]/m[1],");\n      const vec3 inputShapeRC = vec3(").concat(c,".0, ").concat(l,".0,\n                                     ").concat(l,".0);\n\n      float getAValue(int b, int r, int c, int d) {\n        return getChannel(getA(b, r, c, d), vec2(c, d));\n      }\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        // Calculate values for next column in yRC.z.\n        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);\n\n        // Fractional source index.\n        vec3 sourceFracIndexRC = ").concat(p,";\n\n        // Compute the coordinators of nearest neighbor point.\n        ivec3 sourceNearestRC = ivec3(\n          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ").concat(v,")));\n\n        // Should we calculate next column and row elements in 2x2 packed cell.\n        bool hasNextCol = d < ").concat(d-1,";\n        bool hasNextRow = coords.z < ").concat(r-1,";\n\n        vec4 newValue = vec4(\n          getAValue(b, sourceNearestRC.x, sourceNearestRC.y, d),\n          hasNextCol ? getAValue(b, sourceNearestRC.x, sourceNearestRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceNearestRC.x, sourceNearestRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceNearestRC.x, sourceNearestRC.z, d + 1) : 0.0);\n\n        setOutput(newValue);\n      }\n    ")}));var cae={kernelName:EV.ResizeNearestNeighbor,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,o=t.images,i=r.alignCorners,s=r.halfPixelCenters,u=r.size,c=(0,a.Z)(u,2),l=c[0],f=c[1],d=(0,EV.env)().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new uae(o.shape,l,f,i,s):new sae(o.shape,l,f,i,s);return n.runWebGLProgram(d,[o],o.dtype)}},lae=(0,d.Z)((function e(t,n,r){(0,f.Z)(this,e),this.variableNames=["dy"],this.outputShape=[],this.outputShape=n;var o=(0,a.Z)(n,3),i=o[1],s=o[2],u=(0,a.Z)(t,3),c=u[1],l=u[2],d=[r&&c>1?i-1:i,r&&l>1?s-1:s],p=[r&&c>1?c-1:c,r&&l>1?l-1:l],h=d[0]/p[0],m=d[1]/p[1],v=1/h,g=1/m,y=2*Math.ceil(v)+2,b=2*Math.ceil(g)+2;this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        int r = coords[1];\n        int c = coords[2];\n\n        float accumulator = 0.0;\n\n        const float heightScale = float(".concat(h,");\n        const float widthScale = float(").concat(m,");\n\n        const float invHeightScale = float(").concat(v,");\n        const float invWidthScale = float(").concat(g,");\n\n        const int winHeight = int(").concat(y,");\n        const int winWidth = int(").concat(b,");\n\n        // Compute bounds for where in dy we will look\n        float startRLerp = floor(float(r) * invHeightScale);\n        int startDyR = int(floor(startRLerp - float(winHeight / 2)));\n\n        float startCLerp = floor(float(c) * invWidthScale);\n        int startDyC = int(floor(startCLerp - float(winWidth / 2)));\n\n        // Loop over dy\n        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {\n          int dyR = dyROffset + startDyR;\n\n          // Guard against the window exceeding the bounds of dy\n          if (dyR < 0 || dyR >= ").concat(c,") {\n            continue;\n          }\n\n          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {\n            int dyC = dyCOffset + startDyC;\n\n            // Guard against the window exceeding the bounds of dy\n            if (dyC < 0 || dyC >= ").concat(l,") {\n              continue;\n            }\n\n            float sourceFracRow =\n              float(").concat(d[0],") *\n                (float(dyR) / float(").concat(p[0],"));\n\n            float sourceFracCol =\n                float(").concat(d[1],") *\n                  (float(dyC) / float(").concat(p[1],"));\n\n            int sourceNearestRow = int(min(\n                float(int(").concat(i,") - 1),\n                ").concat(r," ? float(round(sourceFracRow)) :\n                                  float(floor(sourceFracRow))));\n\n            int sourceNearestCol = int(min(\n                float(int(").concat(s,") - 1),\n                ").concat(r," ? float(round(sourceFracCol)) :\n                                  float(floor(sourceFracCol))));\n\n            if (r == sourceNearestRow && c == sourceNearestCol) {\n              accumulator += getDy(b, dyR, dyC, d);\n            }\n          }\n        }\n        // End loop over dy\n\n        setOutput(accumulator);\n      }\n    ")}));var fae={kernelName:EV.ResizeNearestNeighborGrad,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.images,o=t.dy,i=r.alignCorners,s=new lae(o.shape,a.shape,i);return n.runWebGLProgram(s,[o],o.dtype)}},dae=(0,d.Z)((function e(t,n){(0,f.Z)(this,e),this.variableNames=["x"];var r=t.length;if(r>4)throw new Error("WebGL backend: Reverse of rank-".concat(r," tensor is not yet supported"));if(this.outputShape=t,1!==r){var a=t.map((function(e,r){return function(e){return-1!==n.indexOf(e)&&1!==t[e]?"".concat(t[e]," - coords[").concat(e,"] - 1"):"coords[".concat(e,"]")}(r)})).join(","),o=c8(r);this.userCode="\n      void main() {\n        ".concat(o," coords = getOutputCoords();\n        setOutput(getX(").concat(a,"));\n      }\n    ")}else this.userCode="\n        void main() {\n          int coord = getOutputCoords();\n          setOutput(getX(".concat(t[0]," - coord - 1));\n        }\n      ")})),pae=(0,d.Z)((function e(t,n){(0,f.Z)(this,e),this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0;var r=t.length;if(r>4)throw new Error("WebGL backend: Reverse of rank-".concat(r," tensor is not yet supported"));this.outputShape=t;var a=_9("rc",r),o="".concat(a[r-1]," + 1 < ").concat(this.outputShape[r-1]),i="".concat(a[r-2]," + 1 < ").concat(this.outputShape[r-2]),s=c8(r);function u(e){var r=t.map((function(r,a){return function(e,r){return-1!==n.indexOf(e)&&1!==t[e]?"".concat(t[e]," - ").concat(r[e]," - 1"):"".concat(r[e])}(a,e)})),a=r.join(","),o=r.slice(-2).join(",");return"getChannel(getX(".concat(a,"), vec2(").concat(o,"))")}this.userCode=1===r?"\n        void main(){\n          int rc = getOutputCoords();\n          vec4 result = vec4(0.);\n          result.r = getChannel(getX(".concat(t[0]," - rc - 1),\n            ").concat(t[0]," - rc - 1);\n          if(").concat(o,"){\n              result.g = getChannel(getX(").concat(t[0]," - (rc  + 1) - 1),\n                ").concat(t[0]," - (rc  + 1) - 1);\n          }\n          setOutput(result);\n        }\n      "):"\n        void main() {\n          ".concat(s," rc = getOutputCoords();\n          vec4 result = vec4(0.);\n          result.r = ").concat(function(e){return u(e)}(a.slice()),";\n          if(").concat(o,"){\n            result.g = ").concat(function(e){return e[r-1]="("+e[r-1]+" + 1)",u(e)}(a.slice()),";\n          }\n          if(").concat(i,") {\n            result.b = ").concat(function(e){return e[r-2]="("+e[r-2]+" + 1)",u(e)}(a.slice()),";\n            if(").concat(o,") {\n              result.a = ").concat(function(e){return e[r-1]="("+e[r-1]+" + 1)",e[r-2]="("+e[r-2]+" + 1)",u(e)}(a.slice()),";\n            }\n          }\n          setOutput(result);\n        }\n    ")}));var hae={kernelName:EV.Reverse,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.dims,i=a.shape.length,s=EV.util.parseAxisParam(o,a.shape);if(0===i)return Q9({inputs:{x:a},backend:n});var u=(0,EV.env)().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new pae(a.shape,s):new dae(a.shape,s);return n.runWebGLProgram(u,[a],a.dtype)}},mae=(0,d.Z)((function e(t,n){(0,f.Z)(this,e),this.variableNames=["Image"],this.outputShape=[],this.customUniforms=[{name:"params",type:"vec4"}];var r=t[1],a=t[2];this.outputShape=t;var o="";o="number"===typeof n?"float outputValue = ".concat(n.toFixed(2),";"):"\n        vec3 fill = vec3(".concat(n.join(","),");\n        float outputValue = fill[coords[3]];"),this.userCode="\n        void main() {\n          ivec4 coords = getOutputCoords();\n          int x = coords[2];\n          int y = coords[1];\n          float coordXFloat = (float(x) - params[0]) * params[3] -\n            (float(y) - params[1]) * params[2];\n          float coordYFloat = (float(x) - params[0]) * params[2] +\n            (float(y) - params[1]) * params[3];\n          int coordX = int(round(coordXFloat + params[0]));\n          int coordY = int(round(coordYFloat + params[1]));\n          ".concat(o,"\n          if(coordX >= 0 && coordX < ").concat(a," && coordY >= 0 && coordY < ").concat(r,") {\n            outputValue = getImage(coords[0], coordY, coordX, coords[3]);\n          }\n          setOutput(outputValue);\n        }\n    ")})),vae={kernelName:EV.RotateWithOffset,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.attrs,r=e.backend,o=t.image,i=n.radians,s=n.fillValue,u=n.center,c=r,l=new mae(o.shape,s),f=EV.backend_util.getImageCenter(u,o.shape[1],o.shape[2]),d=(0,a.Z)(f,2),p=[[d[0],d[1],Math.sin(i),Math.cos(i)]];return c.runWebGLProgram(l,[o],o.dtype,p)}},gae=c7({opSnippet:"\n  // OpenGL ES does not support round function.\n  // The algorithm is based on banker's rounding.\n  float base = floor(x);\n  if ((x - base) < 0.5) {\n    return floor(x);\n  } else if ((x - base) > 0.5) {\n    return ceil(x);\n  } else {\n    if (mod(base, 2.0) == 0.0) {\n      return base;\n    } else {\n      return base + 1.0;\n    }\n  }\n"}),yae={kernelName:EV.Round,backendName:"webgl",kernelFunc:gae},bae=c7({opSnippet:"return inversesqrt(x);",cpuKernelImpl:i9}),xae={kernelName:EV.Rsqrt,backendName:"webgl",kernelFunc:bae},wae=(0,d.Z)((function e(t,n,r,a,o,i){(0,f.Z)(this,e),this.variableNames=["updates","indices","defaultValue"],this.outputShape=i;var s=c8(o.length),u=c8(i.length),c="";1===r?c="i":2===r&&(c="i, j");var l="getIndices(".concat(c,")"),d="";1===a?d="i":2===a&&(d="i, coords[1]");var p="getUpdates(".concat(d,")"),h=n>1?"strides[j]":"strides";this.userCode="\n        ".concat(s," strides = ").concat(s,"(").concat(o,");\n\n        void main() {\n          ").concat(u," coords = getOutputCoords();\n          float sum = 0.0;\n          bool found = false;\n          for (int i = 0; i < ").concat(t,"; i++) {\n            int flattenedIndex = 0;\n            for (int j = 0; j < ").concat(n,"; j++) {\n              int index = round(").concat(l,");\n              flattenedIndex += index * ").concat(h,";\n            }\n            if (flattenedIndex == coords[0]) {\n              sum += ").concat(p,";\n              found = true;\n            }\n          }\n          setOutput(mix(getDefaultValue(), sum, float(found)));\n        }\n      ")}));var kae={kernelName:EV.ScatterNd,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.indices,o=t.updates,i=r.shape,s=EV.backend_util.calculateShapes(o,a,i),u=s.sliceRank,c=s.numUpdates,l=s.sliceSize,f=s.strides,d=s.outputSize,p=[d/l,l];if(0===d)return n.makeTensorInfo(i,a.dtype);var h=b7({inputs:{x:a},backend:n,attrs:{shape:[c,u]}}),m=b7({inputs:{x:o},backend:n,attrs:{shape:[c,l]}}),v=n.makeTensorInfo([],"float32",new Float32Array([0])),g=new wae(c,u,h.shape.length,m.shape.length,f,p),y=n.runWebGLProgram(g,[m,h,v],m.dtype),b=b7({inputs:{x:y},backend:n,attrs:{shape:i}});return n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(y),n.disposeIntermediateTensorInfo(v),b}},Sae=(0,d.Z)((function e(t,n,r){var a,o;if((0,f.Z)(this,e),this.variableNames=["c","a","b"],this.outputShape=n,r>4)throw Error("Where for rank ".concat(r," is not yet supported"));if(1===r)o="resRC",a="resRC";else{for(var i=["resRC.x","resRC.y","resRC.z","resRC.w"],s=[],u=[],c=0;c<n.length;c++)u.push("".concat(i[c])),c<t&&s.push("".concat(i[c]));a=s.join(),o=u.join()}var l=c8(r);this.userCode="\n      void main() {\n        ".concat(l," resRC = getOutputCoords();\n        float cVal = getC(").concat(a,");\n        if (cVal >= 1.0) {\n          setOutput(getA(").concat(o,"));\n        } else {\n          setOutput(getB(").concat(o,"));\n        }\n      }\n    ")}));var _ae={kernelName:EV.Select,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.condition,a=t.t,o=t.e,i=new Sae(r.shape.length,a.shape,a.shape.length);return n.runWebGLProgram(i,[r,a,o],(0,EV.upcastType)(a.dtype,o.dtype))}},Nae=c7({opSnippet:"\n  // Stable and Attracting Fixed Point (0, 1) for Normalized Weights.\n  // see: https://arxiv.org/abs/1706.02515\n  float scaleAlpha = ".concat(EV.backend_util.SELU_SCALEALPHA,";\n  float scale = ").concat(EV.backend_util.SELU_SCALE,";\n  return (x >= 0.0) ? scale * x : scaleAlpha * (exp(x) - 1.0);\n")}),Eae={kernelName:EV.Selu,backendName:"webgl",kernelFunc:Nae},Cae=c7({opSnippet:"if (isnan(x)) return x;\n  return 1.0 / (1.0 + exp(-1.0 * x));\n",packedOpSnippet:"\n  vec4 result = 1.0 / (1.0 + exp(-1.0 * x));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n",cpuKernelImpl:s9}),Tae={kernelName:EV.Sigmoid,backendName:"webgl",kernelFunc:Cae},Iae=c7({opSnippet:"\n  if (isnan(x)) { return 0.0; }\n  return sign(x);\n"}),Oae={kernelName:EV.Sign,backendName:"webgl",kernelFunc:Iae},Aae=c7({opSnippet:"if (isnan(x)) return x;\n  return sin(x);\n"}),Dae={kernelName:EV.Sin,backendName:"webgl",kernelFunc:Aae},Mae=c7({opSnippet:"\n  float e2x = exp(x);\n  return (e2x - 1.0 / e2x) / 2.0;\n"}),Rae={kernelName:EV.Sinh,backendName:"webgl",kernelFunc:Mae},Pae=c7({opSnippet:"\n  float epsilon = 1.1920928955078125e-7;\n  float threshold = log(epsilon) + 2.0;\n\n  bool too_large = x > -threshold;\n  bool too_small = x < threshold;\n\n  float result;\n  float exp_x = exp(x);\n\n  if (too_large){\n    result = x;\n  }\n  else if (too_small){\n    result = exp_x;\n  }\n  else{\n    result = log(exp_x + 1.0);\n  }\n  return result;\n"}),jae={kernelName:EV.Softplus,backendName:"webgl",kernelFunc:Pae},Fae={kernelName:EV.SpaceToBatchND,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,a=e.attrs,o=t.x,i=a.blockShape,s=a.paddings;EV.util.assert(o.shape.length<=4,(function(){return"spaceToBatchND for rank > 4 with a WebGL backend not implemented yet"}));var u=i.reduce((function(e,t){return e*t})),c=[[0,0]];c.push.apply(c,(0,r.Z)(s));for(var l=1+i.length;l<o.shape.length;++l)c.push([0,0]);var f=[],d=Ure({inputs:{x:o},backend:n,attrs:{paddings:c,constantValue:0}}),p=EV.backend_util.getReshaped(d.shape,i,u,!1),h=EV.backend_util.getPermuted(p.length,i.length,!1),m=EV.backend_util.getReshapedPermuted(d.shape,i,u,!1),v=b7({inputs:{x:d},backend:n,attrs:{shape:p}}),g=I7({inputs:{x:v},backend:n,attrs:{perm:h}}),y=b7({inputs:{x:g},backend:n,attrs:{shape:m}});return f.push(d),f.push(v),f.push(g),f.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),y}};var Lae={kernelName:EV.SparseFillEmptyRows,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.indices,o=t.values,i=t.denseShape,s=t.defaultValue;if(1!==i.shape.length)throw new Error("Dense shape must be a vector, saw:\n         ".concat(i.shape));if(2!==r.shape.length)throw new Error("Indices must be a matrix, saw:\n         ".concat(r.shape));if(1!==o.shape.length)throw new Error("Values must be a vector, saw:\n         ".concat(o.shape));if(0!==s.shape.length)throw new Error("Default value must be a scalar, saw:\n        ".concat(s.shape));var u=n.readSync(r.dataId),c=n.readSync(o.dataId),l=n.readSync(i.dataId),f=n.readSync(s.dataId)[0],d=l9(u,r.shape,r.dtype,c,o.dtype,l,f),p=(0,a.Z)(d,5),h=p[0],m=p[1],v=p[2],g=p[3],y=p[4];return[n.makeTensorInfo(m,r.dtype,h),n.makeTensorInfo([m[0]],o.dtype,v),n.makeTensorInfo([g.length],"bool",new Uint8Array(g.map((function(e){return Number(e)})))),n.makeTensorInfo([y.length],r.dtype,new Int32Array(y))]}};var Bae={kernelName:EV.SparseReshape,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.inputIndices,o=t.inputShape,i=t.newShape;if(2!==r.shape.length)throw new Error("Input indices should be a matrix but received shape ".concat(r.shape));if(1!==o.shape.length)throw new Error("Input shape should be a vector but received shape ".concat(o.shape));if(1!==i.shape.length)throw new Error("Target shape should be a vector but received shape ".concat(i.shape));var s=Array.from(n.readSync(o.dataId)),u=n.readSync(r.dataId),c=Array.from(n.readSync(i.dataId)),l=f9(u,r.shape,r.dtype,s,c),f=(0,a.Z)(l,3),d=f[0],p=f[1],h=f[2];return[n.makeTensorInfo(p,r.dtype,d),n.makeTensorInfo([h.length],i.dtype,new Int32Array(h))]}};var zae={kernelName:EV.SparseSegmentMean,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.data,o=t.indices,i=t.segmentIds;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==o.shape.length)throw new Error("Indices should be a vector but received shape\n              ".concat(o.shape));if(1!==i.shape.length)throw new Error("Segment ids should be a vector but received shape\n              ".concat(i.shape));var s=n.readSync(r.dataId),u=n.readSync(o.dataId),c=n.readSync(i.dataId),l=d9(s,r.shape,r.dtype,u,c,!0),f=(0,a.Z)(l,2),d=f[0],p=f[1];return n.makeTensorInfo(p,r.dtype,d)}};var Zae={kernelName:EV.SparseSegmentSum,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.data,o=t.indices,i=t.segmentIds;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==o.shape.length)throw new Error("Indices should be a vector but received shape\n             ".concat(o.shape));if(1!==i.shape.length)throw new Error("Segment ids should be a vector but received shape\n             ".concat(i.shape));var s=n.readSync(r.dataId),u=n.readSync(o.dataId),c=n.readSync(i.dataId),l=d9(s,r.shape,r.dtype,u,c),f=(0,a.Z)(l,2),d=f[0],p=f[1];return n.makeTensorInfo(p,r.dtype,d)}};var Vae={kernelName:EV.SparseToDense,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.sparseIndices,o=t.sparseValues,i=t.defaultValue,s=r.outputShape,u=EV.backend_util.calculateShapes(o,a,s),c=u.sliceRank,l=u.numUpdates,f=u.strides,d=u.outputSize,p=new wae(l,c,a.shape.length,o.shape.length,f,[d,1],!1),h=n.runWebGLProgram(p,[o,a,i],o.dtype),m=b7({inputs:{x:h},backend:n,attrs:{shape:s}});return n.disposeIntermediateTensorInfo(h),m}};var Uae={kernelName:EV.SplitV,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,a=e.attrs,o=t.x,i=a.numOrSizeSplits,s=a.axis,u=EV.util.parseAxisParam(s,o.shape)[0],c=EV.backend_util.prepareSplitSize(o,i,u),l=o.shape.length,f=new Array(l).fill(0),d=o.shape.slice();return c.map((function(e){var t=(0,r.Z)(d);t[u]=e;var a=Nee({inputs:{x:o},backend:n,attrs:{begin:f,size:t}});return f[u]+=e,a}))}},qae="return sqrt(x);",Wae=c7({opSnippet:qae,packedOpSnippet:qae,cpuKernelImpl:p9}),Hae={kernelName:EV.Sqrt,backendName:"webgl",kernelFunc:Wae},Gae=c7({opSnippet:"return x * x;"}),Kae={kernelName:EV.Square,backendName:"webgl",kernelFunc:Gae},Xae="return (a - b) * (a - b);",Yae=l7({opSnippet:Xae,packedOpSnippet:Xae}),$ae={kernelName:EV.SquaredDifference,backendName:"webgl",kernelFunc:Yae};var Jae={kernelName:EV.Step,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.attrs,r=e.backend,a=t.x,o=D9+"\n    return x > 0.0 ? 1.0 : float(".concat(n.alpha,");\n  "),i=new A9(a.shape,o);return r.runWebGLProgram(i,[a],a.dtype)}},Qae=(0,d.Z)((function e(t,n,r){(0,f.Z)(this,e),this.variableNames=["x"],this.outputShape=r;var a=r.length,o=c8(r.length),i=c8(r.length),s="";if(1===a)s="coords * strides + begin";else{var u=0;s=r.map((function(e,t){return u++,1===r.length?"coords * strides[".concat(t,"] + begin[").concat(t,"]"):"coords[".concat(u-1,"] * strides[").concat(t,"] + begin[").concat(t,"]")})).join(",")}this.userCode="\n      ".concat(o," begin = ").concat(o,"(").concat(t,");\n      ").concat(o," strides = ").concat(o,"(").concat(n,");\n\n      void main() {\n        ").concat(i," coords = getOutputCoords();\n        setOutput(getX(").concat(s,"));\n      }\n    ")}));var eoe={kernelName:EV.StridedSlice,backendName:"webgl",kernelFunc:function(e){var t,n=e.inputs,r=e.backend,a=e.attrs,o=n.x,i=a.begin,s=a.end,u=a.strides,c=a.beginMask,l=a.endMask,f=a.ellipsisMask,d=a.newAxisMask,p=a.shrinkAxisMask,h=EV.slice_util.sliceInfo(o.shape,i,s,u,c,l,f,d,p),m=h.finalShapeSparse,v=h.finalShape,g=h.isIdentity,y=h.sliceDim0,b=h.isSimpleSlice,x=h.begin,w=h.end,k=h.strides;if(g)t=b7({inputs:{x:o},backend:r,attrs:{shape:v}});else if(y||b){EV.util.assert(o.shape.length>=1,(function(){return"Input must have rank at least 1, got: ".concat(o.shape.length)}));var S=EV.slice_util.computeOutShape(x,w,k),_=Nee({inputs:{x:o},backend:r,attrs:{begin:x,size:S}});t=b7({inputs:{x:_},backend:r,attrs:{shape:v}}),r.disposeIntermediateTensorInfo(_)}else{if(r.shouldExecuteOnCPU([o])){var N=r.readSync(o.dataId),E=(0,EV.buffer)(o.shape,o.dtype,N),C=h9(m,E,k,x);t=r.makeTensorInfo(v,o.dtype,C.values)}else{var T=new Qae(x,k,m);t=r.runWebGLProgram(T,[o],o.dtype)}}var I=b7({inputs:{x:t},backend:r,attrs:{shape:v}});return r.disposeIntermediateTensorInfo(t),I}};var toe={kernelName:EV.StringNGrams,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,o=r.separator,i=r.nGramWidths,s=r.leftPad,u=r.rightPad,c=r.padWidth,l=r.preserveShortSequences,f=t.data,d=t.dataSplits,p=n.readSync(f.dataId),h=n.readSync(d.dataId),m=m9(p,h,o,i,s,u,c,l),v=(0,a.Z)(m,2),g=v[0],y=v[1];return[n.makeTensorInfo([g.length],"string",g),n.makeTensorInfo(d.shape,"int32",y)]}};var noe={kernelName:EV.StringSplit,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs.skipEmpty,o=t.input,i=t.delimiter;if("string"!==o.dtype)throw new Error("Input must be of datatype string");if(1!==o.shape.length)throw new Error("Input must be a vector, got shape: ".concat(o.shape));if(0!==i.shape.length)throw new Error("Delimiter must be a scalar, got shape: ".concat(i.shape));var s=n.readSync(o.dataId),u=n.readSync(i.dataId)[0],c=v9(s,u,r),l=(0,a.Z)(c,3),f=l[0],d=l[1],p=l[2],h=d.length;return[n.makeTensorInfo([h,2],"int32",f),n.makeTensorInfo([h],"string",d),n.makeTensorInfo([2],"int32",new Int32Array(p))]}};var roe={kernelName:EV.StringToHashBucketFast,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs.numBuckets,a=t.input;if("string"!==a.dtype)throw new Error("Input must be of datatype string");if(r<=0)throw new Error("Number of buckets must be at least 1");var o=n.readSync(a.dataId),i=g9(o,r);return n.makeTensorInfo(a.shape,"int32",i)}},aoe=c7({opSnippet:"return tan(x);"}),ooe={kernelName:EV.Tan,backendName:"webgl",kernelFunc:aoe},ioe=c7({opSnippet:"\n  float e2x = exp(-2.0 * abs(x));\n  return sign(x) * (1.0 - e2x) / (1.0 + e2x);\n"}),soe={kernelName:EV.Tanh,backendName:"webgl",kernelFunc:ioe},uoe=(0,d.Z)((function e(t,n){(0,f.Z)(this,e),this.variableNames=["A"];for(var r=new Array(t.length),a=0;a<r.length;a++)r[a]=t[a]*n[a];this.outputShape=r,this.rank=r.length;var o=c8(this.rank),i=function(e){var t=e.length;if(t>5)throw Error("Tile for rank ".concat(t," is not yet supported"));if(1===t)return"imod(resRC, ".concat(e[0],")");for(var n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u"],r=[],a=0;a<e.length;a++)r.push("imod(".concat(n[a],", ").concat(e[a],")"));return r.join()}(t);this.userCode="\n      void main() {\n        ".concat(o," resRC = getOutputCoords();\n        setOutput(getA(").concat(i,"));\n      }\n    ")}));function coe(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.reps;if("string"===a.dtype||a.shape.length>5){var i=n.readSync(a.dataId),s="string"===a.dtype?i.map((function(e){return EV.util.decodeString(e)})):i,u=(0,EV.buffer)(a.shape,a.dtype,s),c=b9(u,o);return n.makeTensorInfo(c.shape,c.dtype,c.values)}var l=new uoe(a.shape,o);return n.runWebGLProgram(l,[a],a.dtype)}var loe={kernelName:EV.Tile,backendName:"webgl",kernelFunc:coe},foe=(0,d.Z)((function e(t){(0,f.Z)(this,e),this.variableNames=["x","indices"],this.customUniforms=[{name:"n",type:"int"},{name:"firstPass",type:"int"},{name:"negativeInf",type:"float"},{name:"dir",type:"int"},{name:"inc",type:"int"}],this.outputShape=t,this.userCode="\n       void main() {\n         ivec2 coords = getOutputCoords();\n         int batch = coords[0];\n         int elemIdx = coords[1];\n\n         // We compare elements pair-wise within a group of size 2 * inc.\n         // The comparing rule for each group alternates between ascending\n         // and descending. Within each group, we compare each pair at\n         // positions i and i+inc. To decide whether an element at position i\n         // is x0 or x1, we mod it by 2 * inc, if the result is smaller than\n         // inc, it is in the first half of the group, we denote it as x0,\n         // otherwise we denote it as x1.\n         // For example, as shown in the Bitonic top K paper referenced above,\n         // Figure5(a) shows that element[1] is in the\n         // second half of the group when group size is 2, but it is in the\n         // first half of the group when group size is 4.\n\n         bool isFirstInPair = imod(elemIdx, 2 * inc) < inc;\n         int i = isFirstInPair ? elemIdx : elemIdx - inc;\n\n         int i0 = firstPass == 1 ? i : int(getIndices(batch, i));\n         int i1 = firstPass == 1 ? i + inc : int(getIndices(batch, i + inc));\n         float x0 = i0 < n ? getX(batch, i0) : negativeInf;\n         float x1 = i1 < n ? getX(batch, i1) : negativeInf;\n\n         // Denotes which direction indices are in (ascending or descending).\n         bool reverse = imod(elemIdx, 2 * dir) >= dir;\n         bool isGreater = x0 > x1 || (x0 == x1 && i1 > i0);\n         if (reverse == isGreater) { // Elements in opposite order of direction\n           int iTemp = i0;\n           i0 = i1;\n           i1 = iTemp;\n         }\n         if (isFirstInPair) {\n            setOutput(float(i0));\n         } else {\n            setOutput(float(i1));\n         }\n       }\n     "})),doe=(0,d.Z)((function e(t){(0,f.Z)(this,e),this.variableNames=["x","indices"],this.customUniforms=[{name:"n",type:"int"},{name:"firstPass",type:"int"},{name:"k",type:"int"}],this.outputShape=t,this.userCode="\n    void main() {\n         // Takes max of indices (0, k), (1, k + 1), (2, k + 2) ...\n         ivec2 coords = getOutputCoords();\n         int batch = coords[0];\n         int elemIdx = coords[1];\n\n         // The output size is half of the previous size.\n         // If the previous sequence is | | | | _ _ _ _  | | | |  _ _ _ _ (k=4),\n         // we only need to output the indices at positions |, the indices at\n         // positions _ can be thrown away, see Figure5(b) After Phase 2\n         // (Merge phase) in the Bitonic Top K paper referenced above.\n         // For example, the paper shows we only need to output the orange bars.\n         // The output sequence should look like this | | | | | | | |.\n         // Because the sequence is halved, to map the output index back\n         // to the previous sequence to find the corresponding value,\n         // we need to double the index. When we double the index,\n         // we basically interpolate a position, so 2i looks like\n         // | _ | _ | _ | _ | _ | _ | _. We move the | to the first k position\n         // of each 2k positions by - elemIdx % k. E.g. for output at\n         // index 4,5,6,7, we want to get the corresponding element at\n         // original index 8,9,10,11, for output at index 8,9,10,11,\n         // we want to get the corresponding element at original index\n         // 16,17,18,19, so on and so forth.\n\n         int i = elemIdx < k ? elemIdx : (elemIdx * 2 - imod(elemIdx, k));\n         int i0 = firstPass == 1 ? i : int(getIndices(batch, i));\n         int i1 = firstPass == 1 ? i + k : int(getIndices(batch, i + k));\n\n         float x0 = getX(batch, i0);\n         float x1 = i1 < n ? getX(batch, i1) : x0;\n\n         setOutput(x0 >= x1 ? float(i0) : float(i1));\n       }\n     "}));function poe(e,t){null!==t&&e.disposeIntermediateTensorInfo(t)}function hoe(e){for(var t=1;t<e;)t*=2;return t}var moe={kernelName:EV.TopK,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,o=t.x,i=r.k,s=r.sorted,u=(0,EV.env)().getNumber("TOPK_LAST_DIM_CPU_HANDOFF_SIZE_THRESHOLD"),c=(0,EV.env)().getNumber("TOPK_K_CPU_HANDOFF_THRESHOLD"),l=o.shape,f=l[l.length-1];if(n.shouldExecuteOnCPU([o])||f<u||i>c){var d=n.readSync(o.dataId),p=x9(d,l,o.dtype,i,s),h=(0,a.Z)(p,2),m=h[0],v=h[1];return[n.makeTensorInfo(m.shape,m.dtype,m.values),n.makeTensorInfo(v.shape,v.dtype,v.values)]}if(0===i)return l[l.length-1]=0,[n.makeTensorInfo(l,o.dtype,[]),n.makeTensorInfo(l,"int32",[])];if(1===f)return[o,nne({attrs:{shape:l,dtype:"int32",value:0},backend:n})];var g=n.texData.get(o.dataId),y=null!==g&&g.isPacked,b=y?n.unpackTensor(o):o,x=EV.util.sizeFromShape(l)/f,w=b7({inputs:{x:b},attrs:{shape:[x,f]},backend:n});y&&poe(n,b);for(var k=hoe(i),S=hoe(f),_=null,N=function(){return null===_?[w,w]:[w,_]},E=function(e,t,r){var a=N(),o=new foe(r),i=[[f],[null===_?1:0],[Number.NEGATIVE_INFINITY],[e],[t]],s=_;_=n.runWebGLProgram(o,a,"int32",i),poe(n,s)},C=1;C<k;C*=2)for(var T=2*C,I=C;I>=1;I/=2)E(T,I,[x,S]);for(var O=S;O>k;O/=2){var A=N(),D=new doe([x,O/2]),M=[[f],[null===_?1:0],[k]],R=_;_=n.runWebGLProgram(D,A,"int32",M),poe(n,R);for(var P=k/2,j=2*P,F=P;F>=1;F/=2)E(j,F,_.shape)}var L=_;_=Nee({inputs:{x:_},backend:n,attrs:{begin:0,size:[x,i]}}),poe(n,L);var B=xne({inputs:{x:w,indices:_},backend:n,attrs:{axis:1,batchDims:1}});poe(n,w);var z=l.slice(0,-1);z.push(i),L=_,_=b7({inputs:{x:_},attrs:{shape:z},backend:n}),poe(n,L);var Z=B;return B=b7({inputs:{x:B},attrs:{shape:z},backend:n}),poe(n,Z),[B,_]}},voe=(0,d.Z)((function e(t,n,r,a,o,i){(0,f.Z)(this,e),this.variableNames=["Image","Transforms"],this.outputShape=i;var s,u="nearest"===r?1:2;switch(a){case"constant":default:s=1;break;case"reflect":s=2;break;case"wrap":s=3;break;case"nearest":s=4}this.userCode="\n            float mapCoord(float outCoord, float len) {\n              float inCoord = outCoord;\n              if(".concat(s," == 2) {\n                if (inCoord < 0.0) {\n                  if (len <= 1.0) {\n                    inCoord = 0.0;\n                  } else {\n                    float sz2 = 2.0 * len;\n                    if (inCoord < sz2) {\n                      inCoord = sz2 * float(int(float(-inCoord / sz2))) +\n                      inCoord;\n                    }\n                    inCoord = inCoord < -len ? inCoord + sz2 : -inCoord - 1.0;\n                  }\n                } else if (inCoord > len - 1.0) {\n                  if (len <= 1.0) {\n                    inCoord = 0.0;\n                  } else {\n                    float sz2 = 2.0 * len;\n                    inCoord -= sz2 * float(int(float(inCoord / sz2)));\n                    if (inCoord >= len) {\n                      inCoord = sz2 - inCoord - 1.0;\n                    }\n                  }\n                }\n                return clamp(inCoord, 0.0, len - 1.0);\n              } else if (").concat(s," == 3) {\n                if (inCoord < 0.0) {\n                  if (len <= 1.0) {\n                    inCoord = 0.0;\n                  } else {\n                    float sz = len - 1.0;\n                    inCoord += len * (float(int(float(-inCoord / sz))) + 1.0);\n                  }\n                } else if (inCoord > len - 1.0) {\n                  if (len <= 1.0) {\n                    inCoord = 0.0;\n                  } else {\n                    float sz = len - 1.0;\n                    inCoord -= len * float(int(float(inCoord / sz)));\n                  }\n                }\n                return clamp(inCoord, 0.0, len - 1.0);\n              } else if (").concat(s," == 4) {\n                return clamp(outCoord, 0.0, len - 1.0);\n              } else {\n                return outCoord;\n              }\n            }\n\n            float readWithFillValue(int batch, int coordY, int coordX,\n              int channel) {\n              float outputValue;\n              if (0 <= coordY && coordY < ").concat(t," && 0 <= coordX && coordX < ").concat(n,") {\n                  outputValue = getImage(batch, coordY, coordX, channel);\n              } else {\n                outputValue = float(").concat(o,");\n              }\n              return outputValue;\n            }\n\n            void main() {\n              ivec4 coords = getOutputCoords();\n              float outputValue;\n              int batch = coords[0];\n              int x = coords[2];\n              int y = coords[1];\n              int channel = coords[3];\n              float xf = float(x);\n              float yf = float(y);\n              float a1 = getTransforms(batch, 0);\n              float a2 = getTransforms(batch, 1);\n              float a3 = getTransforms(batch, 2);\n              float b1 = getTransforms(batch, 3);\n              float b2 = getTransforms(batch, 4);\n              float b3 = getTransforms(batch, 5);\n              float c1 = getTransforms(batch, 6);\n              float c2 = getTransforms(batch, 7);\n              float projection = c1 * xf + c2 * yf + 1.0;\n              if (projection == 0.0) {\n                outputValue = float(").concat(o,");\n              } else {\n                float inX = (a1 * xf + a2 * yf + a3) / projection;\n                float inY = (b1 * xf + b2 * yf + b3) / projection;\n                float mapX = mapCoord(inX, float(").concat(n,"));\n                float mapY = mapCoord(inY, float(").concat(t,"));\n\n                if (").concat(u," == 1) {\n                  int coordY = int(round(mapY));\n                  int coordX = int(round(mapX));\n                  outputValue = readWithFillValue(batch, coordY, coordX,\n                    channel);\n                } else {\n                  float yFloor = floor(mapY);\n                  float xFloor = floor(mapX);\n                  float yCeil = yFloor + 1.0;\n                  float xCeil = xFloor + 1.0;\n                  float valueYFloor = (xCeil - mapX) *\n                  readWithFillValue(batch, int(yFloor), int(xFloor), channel) +\n                  (mapX - xFloor) *\n                  readWithFillValue(batch, int(yFloor), int(xCeil), channel);\n                  float valueYCeil = (xCeil - mapX) *\n                  readWithFillValue(batch, int(yCeil), int(xFloor), channel) +\n                  (mapX - xFloor) *\n                  readWithFillValue(batch, int(yCeil), int(xCeil), channel);\n                  outputValue = (yCeil - mapY) * valueYFloor +\n                  (mapY - yFloor) * valueYCeil;\n                }\n              }\n              setOutput(outputValue);\n            }\n        ")}));var goe={kernelName:EV.Transform,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,o=t.image,i=t.transforms,s=r.interpolation,u=r.fillMode,c=r.fillValue,l=r.outputShape,f=(0,a.Z)(o.shape,4),d=f[0],p=f[1],h=f[2],m=f[3],v=null!=l?l:[p,h],g=(0,a.Z)(v,2),y=g[0],b=g[1],x=new voe(p,h,s,u,c,[d,y,b,m]);return n.runWebGLProgram(x,[o,i],"float32")}};var yoe={kernelName:EV.Unique,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.attrs,r=e.backend,a=n.axis,o=t.x;j6(o,"unique"),console.warn("WARNING: ","UI might be locked temporarily as data is being downloaded");var i=r.readSync(o.dataId),s=k9(i,a,o.shape,o.dtype),u=s.outputValues,c=s.outputShape,l=s.indices;return[r.makeTensorInfo(c,o.dtype,u),r.makeTensorInfo([l.length],"int32",l)]}};var boe={kernelName:EV.Unpack,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.value,o=r.axis;o<0&&(o+=a.shape.length);for(var i=a,s=i.shape.length,u=a.shape[o],c=new Array(s-1),l=0,f=0;f<s;f++)f!==o&&(c[l++]=i.shape[f]);var d=[],p=new Array(s).fill(0),h=i.shape.slice();h[o]=1;for(var m=new Array(u),v=0;v<m.length;v++){p[o]=v;var g=Nee({inputs:{x:i},backend:n,attrs:{begin:p,size:h}}),y=b7({inputs:{x:g},backend:n,attrs:{shape:c}});m[v]=y,d.push(g)}return d.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),m}},xoe=(0,d.Z)((function e(t,n){(0,f.Z)(this,e),this.variableNames=["x","segmentIds"];var r=t.windowSize,a=t.batchSize,o=t.inSize,i=t.numSegments,s=i*Math.ceil(o/r);this.outputShape=[a,s];var u=4*Math.floor(r/4),c=r%4,l="\n        sumValue += dot(values, segFilter);\n    ",d="";o%r>0&&(d="\n        if (inIdx < 0 || inIdx >= ".concat(o,") {\n          return initializationValue;\n        }\n      "));var p="";o%r>0&&(p="\n        if (inIdx < 0 || inIdx >= ".concat(o,") {\n          return -1.0;\n        }\n      ")),this.userCode="\n      const float initializationValue = ".concat("0.0",";\n\n      float getValue(int batch, int inIdx) {\n        ").concat(d,"\n        return getX(batch, inIdx);\n      }\n\n      float getSegmentIdAtIndex(int inIdx) {\n        ").concat(p,"\n        return getSegmentIds(inIdx);\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = int(floor(float(outIdx) / float(\n          ").concat(i,")) * float(").concat(r,"));\n        int currentSeg = int(mod(float(outIdx), float(").concat(i,")));\n\n        float sumValue = 0.0;\n\n        for (int i = 0; i < ").concat(u,"; i += 4) {\n          int inIdx = inOffset + i;\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            getValue(batch, inIdx + 3)\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 3)) == currentSeg ? 1 : 0\n          );\n\n          ").concat(l,"\n        }\n\n        int inIdx = inOffset + ").concat(u,";\n        if (").concat(1===c,") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            initializationValue,\n            initializationValue,\n            initializationValue\n          );\n\n          int inIdxSeg = int(getSegmentIdAtIndex(inIdx));\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            0,\n            0,\n            0\n          );\n\n          ").concat(l,"\n        } else if (").concat(2===c,") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            initializationValue,\n            initializationValue\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n              0,\n              0\n          );\n\n          ").concat(l,"\n        } else if (").concat(3===c,") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            initializationValue\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,\n            0\n          );\n\n          ").concat(l,"\n        }\n        setOutput(").concat("sumValue",");\n      }\n    ")}));for(var woe={kernelName:EV.UnsortedSegmentSum,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=t.segmentIds,i=r.numSegments,s=a.shape.length,u=[],c=0,l=EV.backend_util.getAxesPermutation([c],s),f=a;null!=l&&(f=I7({inputs:{x:a},backend:n,attrs:{perm:l}}),u.push(f),c=EV.backend_util.getInnerMostAxes(1,s)[0]);var d=EV.backend_util.segment_util.computeOutShape(f.shape,c,i),p=EV.util.sizeFromShape([f.shape[c]]),h=b7({inputs:{x:f},backend:n,attrs:{shape:[-1,p]}});u.push(h);var m=function e(t,r,a,o,i){var s=t.shape[0],c=t.shape[1],l=EV.backend_util.segment_util.segOpComputeOptimalWindowSize(c,i),f=new xoe({windowSize:l,inSize:c,batchSize:s,numSegments:i},r),d=n.compileAndRun(f,[t,a],o);if(u.push(d),d.shape[1]===i)return d;var p=Kre({backend:n,attrs:{start:0,stop:i,step:1,dtype:"float32"}}),h=coe({inputs:{x:p},backend:n,attrs:{reps:[c/l]}});return u.push(p),u.push(h),e(d,r,h,o,i)}(h,"unsortedSegmentSum",o,(0,EV.sumOutType)(a.dtype),i),v=b7({inputs:{x:m},backend:n,attrs:{shape:d}}),g=v;if(null!=l){u.push(v);var y=EV.backend_util.getUndoAxesPermutation(l);g=I7({inputs:{x:g},backend:n,attrs:{perm:y}})}return u.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),g}},koe=0,Soe=[D7,R7,j7,L7,Z7,q7,W7,H7,J7,Q7,tee,ree,oee,see,cee,dee,pee,vee,gee,yee,wee,Cee,Tee,Iee,Ree,Fee,zee,n7,Uee,$ee,rte,ute,cte,lte,fte,dte,hte,vte,yte,kte,Ste,Nte,Tte,Ate,Dte,Rte,jte,Fte,Bte,zte,Vte,qte,Hte,Kte,$te,ene,ane,ine,cne,fne,hne,mne,vne,yne,wne,Sne,Nne,e7,Ene,Kee,Tne,One,Dne,o7,Rne,jne,Fne,Bne,Zne,Une,Wne,Gne,Yne,Jne,ere,nre,rre,are,sre,ure,cre,lre,fre,pre,vre,yre,Cre,y7,Tre,Ore,Dre,Rre,Aee,jre,Bre,zre,qre,Hre,u7,Gre,Xre,Mee,wre,$re,Qre,tae,x7,aae,iae,cae,fae,hae,vae,yae,xae,kae,_ae,Eae,Tae,Oae,Dae,Rae,Eee,Ere,jae,Fae,Lae,Bae,zae,Zae,Vae,Uae,Hae,Kae,$ae,Jae,eoe,toe,noe,roe,_re,T7,ooe,soe,loe,moe,goe,O7,yoe,boe,woe,Lre];koe<Soe.length;koe++){var _oe=Soe[koe];(0,EV.registerKernel)(_oe)}EV.version_core,fQ.version_converter,n(3175);var Noe=function(t){var n=t.isHidden,r=(0,e.useState)(0),i=(0,a.Z)(r,2),s=(i[0],i[1]),u=(0,e.useRef)(null),c=(0,e.useState)(""),f=(0,a.Z)(c,2),d=f[0],p=f[1],h=(0,e.useState)(!0),m=(0,a.Z)(h,2),v=m[0],g=m[1],y=(0,e.useState)(""),b=(0,a.Z)(y,2),x=b[0],w=b[1],k=(0,e.useState)(!1),S=(0,a.Z)(k,2),_=S[0],N=S[1],E=((0,mt.useMediaQuery)({query:"(max-width: 1024px)"}),function(){var t=(0,e.useState)({width:void 0,height:void 0}),n=(0,a.Z)(t,2),r=n[0],o=n[1];return(0,e.useEffect)((function(){function e(){o({width:window.innerWidth,height:window.innerHeight})}return window.addEventListener("resize",e),e(),function(){return window.removeEventListener("resize",e)}}),[]),r}()),C=(0,e.useState)(),T=(0,a.Z)(C,2),I=T[0],O=T[1];function A(){return(A=(0,o.Z)(l().mark((function e(){var t;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,NV.load({base:"mobilenet_v2"});case 3:t=e.sent,O(t),console.log("set loaded Model"),g(!1),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0),console.log("failed load model");case 13:case"end":return e.stop()}}),e,null,[[0,9]])})))).apply(this,arguments)}(0,e.useEffect)((function(){n||EV.ready().then((function(){!function(){A.apply(this,arguments)}()}))}),[n]),(0,e.useEffect)((function(){u.current&&s(u.current.offsetWidth)}),[E]);function D(){return M.apply(this,arguments)}function M(){return M=(0,o.Z)(l().mark((function e(){var t,n,r,a;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return document.getElementById("objectDetectionCanvas").innerHTML="",e.next=3,I.detect(document.getElementById("objectDetectionImg"));case 3:if((t=e.sent).length>0)for(console.log(t),n=0;n<t.length;n++)(r=document.createElement("p")).setAttribute("class","identifier"),r.innerText=t[n].class+" - with "+Math.round(100*parseFloat(t[n].score))+"% confidence.",r.style="left: "+t[n].bbox[0]+"px;top: "+t[n].bbox[1]+"px; width: "+(t[n].bbox[2]-10)+"px;",(a=document.createElement("div")).setAttribute("class","highlighter"),a.style="left: "+t[n].bbox[0]+"px;top: "+t[n].bbox[1]+"px;width: "+t[n].bbox[2]+"px;height: "+t[n].bbox[3]+"px;",document.getElementById("objectDetectionCanvas").appendChild(a),document.getElementById("objectDetectionCanvas").appendChild(r);g(!1);case 6:case"end":return e.stop()}}),e)}))),M.apply(this,arguments)}var R=function(){var e=(0,o.Z)(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:v||""===d||(g(!0),D());case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,re.jsxs)(re.Fragment,{children:[(0,re.jsx)(Ps,{modal:!0,isHidden:!_,preSearchText:x,setSrc:function(e){N(!1),p(e)},setShowLibrary:N}),(0,re.jsxs)("div",{className:"min-h-screen flex-col items-center justify-center bg-gray-900 py-20 lg:py-12 px-4 sm:px-6 lg:px-52 space-y-4 lg:space-y-8 ".concat(n?"hidden":"flex"),children:[(0,re.jsxs)("div",{className:"w-full flex flex-col space-x-0 lg:flex-row lg:space-x-6 space-y-4 lg:space-y-0 md:flex-row md:space-x-6 md:space-y-0 items-center justify-center",children:[(0,re.jsxs)("div",{className:"flex flex-row items-center mt-3 md:mt-0 lg:space-x-4 space-x-2",children:[(0,re.jsx)("input",{id:"searchText",onChange:function(e){var t=e.target.value;e.persist(),w(t)},value:x,name:"searchText",type:"text",required:!0,className:"resize-none appearance-none relative block h-9 md:w-96 w-full px-3 py-2 border border-gray-300 placeholder-gray-300 text-gray-900 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 focus:z-10 sm:text-sm",placeholder:"Description de l'image"}),(0,re.jsx)("div",{onClick:function(){""!==x&&N(!_)},className:"rounded-md select-none font-medium py-1 px-2 text-center text-sm text-white shadow align-middle bg-blue-600 hover:bg-blue-500 cursor-pointer border-2 border-blue-600 hover:border-blue-500 flex items-center justify-center",children:"Chercher"})]}),""!==d&&(0,re.jsx)("div",{onClick:R,className:"rounded-md select-none font-medium py-1 px-2 text-center text-sm text-white shadow align-middle bg-blue-600 hover:bg-blue-500 cursor-pointer border-2 border-blue-600 hover:border-blue-500 flex items-center justify-center",children:v?(0,re.jsx)(Os,{className:"h-5 w-5 text-white"}):"Analyser"})]}),!n&&(0,re.jsx)("div",{className:"flex flex-col lg:flex-row w-full pointer-events-none",children:(0,re.jsx)("div",{className:"w-full overflow-hidden shadow lg:px-28 w-full",children:(0,re.jsx)(re.Fragment,{children:(0,re.jsx)(js,{src:d,onChange:p,alt:"image",id:"img-1",imgClassName:"object-contain",imgId:"objectDetectionImg",disabled:!0,useCanvas:!0,canvasId:"objectDetectionCanvas",modalLibrary:!0,controlsOnly:!1,preSearchText:x})})})})]})]})},Eoe=[{img:"https://images.unsplash.com/photo-1523755130311-9eadea3a0861?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=3800&q=80",textColor:"gray-900",textShadow:"0 0px 2px rgba(255,255,255,0.70)",maxNameCol:6},{img:"https://images.unsplash.com/photo-1523757956233-94a86ff74ea5?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=3800&q=80",textColor:"gray-900",textShadow:"0 0px 2px rgba(255,255,255,0.70)",maxNameCol:3},{img:"https://images.unsplash.com/photo-1486427944299-d1955d23e34d?ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&ixlib=rb-1.2.1&auto=format&fit=crop&w=3800&q=80",textColor:"gray-900",textShadow:"0 0px 2px rgba(255,255,255,0.70)",maxNameCol:3},{img:"https://images.unsplash.com/photo-1513151233558-d860c5398176?ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&ixlib=rb-1.2.1&auto=format&fit=crop&w=3500&q=80",textColor:"white",textShadow:"0px 0px 2px rgba(0,0,0,0.9)",maxNameCol:6},{img:"https://images.unsplash.com/photo-1559456751-057ed03f3143?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=5000&q=80",textColor:"white",textShadow:"0px 0px 2px rgba(0,0,0,0.9)",maxNameCol:6},{img:"https://images.unsplash.com/photo-1530103862676-de8c9debad1d?ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&ixlib=rb-1.2.1&auto=format&fit=crop&w=6400&q=80",textColor:"white",textShadow:"0px 0px 2px rgba(0,0,0,0.9)",maxNameCol:6},{img:"https://images.unsplash.com/photo-1519306980079-d14db7cebf33?ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&ixlib=rb-1.2.1&auto=format&fit=crop&w=3800&q=80",textColor:"white",textShadow:"0px 0px 2px rgba(0,0,0,0.9)",maxNameCol:6},{img:"https://images.unsplash.com/photo-1498673394965-85cb14905c89?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=3800&q=80",textColor:"white",textShadow:"0px 0px 2px rgba(0,0,0,0.9)",maxNameCol:6}],Coe=["Joyeux anniversaire!","Bonne f\xeate!","Bon anniversaire!","Nos f\xeat\xe9s de la journ\xe9e!"],Toe=function(t){var n=t.isHidden,r=(0,e.useState)("2021-09-20"),i=(0,a.Z)(r,2),s=i[0],u=i[1],c=(0,e.useState)([]),f=(0,a.Z)(c,2),d=f[0],p=f[1],h=(0,e.useState)(0),m=(0,a.Z)(h,2),v=m[0],g=m[1],y=(0,e.useState)(0),b=(0,a.Z)(y,2),x=b[0],w=b[1],k=(0,e.useState)(!0),S=(0,a.Z)(k,2),_=S[0],N=S[1],E=(0,e.useState)(0),T=(0,a.Z)(E,2),I=T[0],O=T[1],A=(0,e.useRef)(),D=function(){var e=v+1,t=x+1;g(Eoe.length>e?e:0),w(Coe.length>t?t:0)},M=function(e,t){e.preventDefault(),t||D(),N(t)};(0,e.useEffect)((function(){if(!n){var e={select:{nom:1,prenom:1,date:1},from:"Fetes",where:{$and:[{$eq:[{$month:"$date"},{$month:s}]},{$eq:[{$dayOfMonth:"$date"},{$dayOfMonth:s}]}]},orderBy:[{nom:1},{prenom:1}]};Tt.DataSources.query("TestData",!1,e).then((function(e){p(e.data)}))}}),[n]),(0,e.useEffect)((function(){A.current&&O(A.current.offsetWidth)}),[A]);var R=function(e){var t=I;return(0===I||A.current&&A.current.offsetWidth!==I)&&(t=A.current.offsetWidth,O(t)),t/1920*e},P=function(){var e=(0,o.Z)(l().mark((function e(){var t,n,r,a;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(t=document.createElement("div")).classList.add("overflow-hidden"),t.classList.add("fixed"),n=document.createElement("div"),r=j(),n.innerHTML=oe.renderToStaticMarkup(r),document.body.appendChild(t),t.appendChild(n),e.next=10,ht(n);case 10:a=e.sent,(0,ae.saveAs)(a,"thumb.png"),document.body.removeChild(t);case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),j=function(){return(0,re.jsxs)("div",{className:"aspect-w-16 aspect-h-9 bg-gray-50 overflow-hidden",style:{width:"1920px",height:"1080px"},ref:A,children:[(0,re.jsx)("div",{className:"overflow-hidden",children:(0,re.jsx)("img",{src:Eoe[v].img,alt:"ThumbBg",className:"select-none w-full h-full object-center object-cover"})}),A.current&&(0,re.jsx)("div",{className:"pointer-events-none flex w-full h-full items-start justify-start",style:{padding:"48px"},children:(0,re.jsxs)("div",{className:"flex-col items-center justify-center rounded-lg",style:{padding:"48px 60px"},children:[(0,re.jsx)("h2",{className:"text-left w-full font-permanentmarker text-".concat(Eoe[v].textColor," select-none"),style:{textShadow:Eoe[v].textShadow,fontSize:"108px",lineHeight:"108px"},children:Coe[x]}),(0,re.jsx)("div",{className:"grid grid-rows-".concat(d.length>Eoe[v].maxNameCol?Math.ceil(d.length/2):d.length," grid-flow-col"),style:{marginTop:"60px",columnGap:"120px",rowGap:"36px"},children:d.map((function(e,t){return(0,re.jsxs)("div",{className:"text-left font-indieflower tracking-widest text-".concat(Eoe[v].textColor," select-none"),style:{textShadow:Eoe[v].textShadow,fontSize:"66px",lineHeight:"66px",letterSpacing:"6px"},children:[(0,re.jsx)("span",{className:"font-bold",children:"".concat(e.prenom)})," ",(0,re.jsx)("span",{className:"font-bold",children:"".concat(e.nom)})]},"nom_".concat(t))}))})]})})]})};return(0,re.jsxs)("div",{className:"min-h-screen flex-col items-start justify-start bg-gray-50 py-20 lg:py-12 px-4 sm:px-6 lg:px-52 space-y-10 lg:space-y-8 ".concat(n?"hidden":"flex"),children:[(0,re.jsxs)("div",{className:"w-full flex space-y-4 lg:space-y-0 flex-col lg:flex-row items-center lg:justify-between",children:[(0,re.jsx)("h2",{className:"ml-2 text-left text-3xl font-extrabold text-gray-900 select-none",children:"F\xeates automatis\xe9es"}),(0,re.jsxs)("div",{className:"flex flex-row space-x-4 h-full items-center",children:[(0,re.jsx)("input",{id:"date",type:"date",value:s,onKeyDown:function(e){"Enter"===e.key&&(e.preventDefault(),function(){var e={select:{nom:1,prenom:1,date:1},from:"Fetes",where:{$and:[{$eq:[{$month:"$date"},{$month:s}]},{$eq:[{$dayOfMonth:"$date"},{$dayOfMonth:s}]}]},orderBy:[{nom:1},{prenom:1}]};console.log(Tt.DataSources.find("TestData")),Tt.DataSources.query("TestData",!1,e).then((function(e){D(),N(!1),p(e.data)}))}())},onChange:function(e){return u(e.target.value)},className:"h-8 form-input appearance-none relative block max-h-20 px-3 py-2 border border-gray-300 placeholder-gray-400 text-gray-900 rounded-md focus:placeholder-transparent focus:outline-none focus:ring-blue-500 focus:border-blue-500 focus:z-10 sm:text-sm"}),(0,re.jsx)(C,{onClick:P,className:"text-blue-600 hover:text-blue-500 cursor-pointer h-7 w-7"})]})]}),(0,re.jsx)("div",{className:"lg:px-28 w-full",children:!n&&(0,re.jsx)("div",{className:"w-full overflow-hidden rounded-md shadow",children:(0,re.jsxs)("div",{className:"w-full aspect-w-16 aspect-h-9 bg-gray-100 overflow-hidden",ref:A,children:[(0,re.jsx)("div",{className:"overflow-hidden",children:(0,re.jsx)("img",{src:Eoe[v].img,alt:"ThumbBg",onLoad:function(e){M(e,!0)},onAnimationStart:function(e){return M(e,!0)},onAnimationEnd:function(e){return M(e,!1)},className:"".concat(_?"zoom-in-zoom-out":"zoom-ended"," select-none rounded-md w-full h-full object-center object-cover")})}),A.current&&(0,re.jsx)("div",{className:"pointer-events-none flex w-full h-full items-start justify-start",style:{padding:"".concat(R(48),"px")},children:(0,re.jsxs)("div",{className:"flex-col items-center justify-center rounded-lg",style:{padding:"".concat(R(48),"px ").concat(R(60),"px")},children:[(0,re.jsx)("h2",{className:"text-left w-full font-permanentmarker text-".concat(Eoe[v].textColor," select-none"),style:{textShadow:Eoe[v].textShadow,fontSize:"".concat(R(108),"px"),lineHeight:"".concat(R(108),"px")},children:Coe[x]}),(0,re.jsx)("div",{className:"grid grid-rows-".concat(d.length>Eoe[v].maxNameCol?Math.ceil(d.length/2):d.length," grid-flow-col"),style:{marginTop:"".concat(R(60),"px"),columnGap:"".concat(R(120),"px"),rowGap:"".concat(R(36),"px")},children:d.map((function(e,t){return(0,re.jsxs)("div",{className:"text-left font-indieflower text-".concat(Eoe[v].textColor," select-none"),style:{textShadow:Eoe[v].textShadow,fontSize:"".concat(R(66),"px"),lineHeight:"".concat(R(66),"px"),letterSpacing:"".concat(R(6),"px")},children:[(0,re.jsx)("span",{className:"font-bold",children:"".concat(e.prenom)})," ",(0,re.jsx)("span",{className:"font-bold",children:"".concat(e.nom)})]},"nom_".concat(t))}))})]})})]})})})]})},Ioe="GOOGLESHEET",Ooe="API",Aoe="AIzaSyBprXnSGfHX1HJ4KQv6xYHtfwK_-tWHIYY";function Doe(){this.id=0,this.name="",this.properties={},this.fetchQuery="",this.type="",this.dataRefreshRate=6e4,this.valid=!1,this.dataLoaded=!1,this.fieldNames=[],this.idFieldName="",this.ressources=[],this.dataSets=[],this.intervalPopulateDynamicFields=void 0,this.intervalUpdateData=void 0,this.data=null,this.formatedData=null,this.dataRefIndex={},this.dynamicFields=[]}function Moe(e){var t=e.headers.get("content-type");if(t.includes("application/json"))return function(e){return e.json().then((function(t){return e.ok?t:Promise.reject(Object.assign({},t,{status:e.status,statusText:e.statusText}))}))}(e);if(t.includes("text/html"))return function(e){return e.text().then((function(t){return e.ok?t:Promise.reject({status:e.status,statusText:e.statusText,err:t})}))}(e);throw new Error("Sorry, content-type ".concat(t," not supported"))}Doe.prototype.load=function(){var e=(0,o.Z)(l().mark((function e(t){var n,r,a,o=this;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=[],r=[],t.indexOf("https://docs.google.com/spreadsheets/")>-1?this.type=Ioe:this.type=Ooe,e.t0=this.type,e.next=e.t0===Ioe?6:e.t0===Ooe?11:13;break;case 6:return a=t.substring(t.indexOf("/d/")+3,t.lastIndexOf("/")),this.properties.spreadsheetId=a,this.fetchQuery="https://sheets.googleapis.com/v4/spreadsheets/".concat(a),n.push(fetch(this.fetchQuery+"?alt=json&key="+Aoe).then(Moe).then((function(e){return o.name=e.properties.title,e.sheets.forEach((function(e,t){o.dataSets.push({name:e.properties.title,id:e.properties.sheetId,data:[],columns:[]}),r.push(fetch(o.fetchQuery+"/values/"+e.properties.title+"?alt=json&key="+Aoe).then(Moe).then((function(e){return e.values.length>0&&(o.dataSets[t].columns=e.values[0].map((function(e,t){return{id:t+1,name:e,title:e,index:t}}))),e.values.splice(0,1),e.values.forEach((function(e,n){var r={};o.dataSets[t].columns.forEach((function(t,n){r[t.name]=e[n]?e[n]:""})),o.dataSets[t].data.push(r)})),!0})).catch((function(e){return!0})))})),o.valid=!0,!0})).catch((function(e){return!1}))),e.abrupt("break",15);case 11:case 13:return this.fetchQuery=t,e.abrupt("break",15);case 15:return e.next=17,Promise.all(n).then((function(e){return e.forEach((function(e){e||!1})),Promise.all(r).then((function(e){var t=!0;return e.forEach((function(e){e||(t=!1)})),t}))}));case 17:return e.abrupt("return",e.sent);case 18:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),Doe.prototype.init=function(e,t,n,r){this.name=e,this.fetchQuery=t,this.type=n,this.dataRefreshRate=r,this.loadData()},Doe.prototype.getType=function(){this.url.indexOf("https://docs.google.com/spreadsheets/")>-1?this.type=Ioe:this.type=Ooe},Doe.prototype.getFetchQuery=function(){if(this.type===Ioe){var e=this.url.substring(this.url.indexOf("/d/")+3,this.url.lastIndexOf("/"));this.fetchQuery="https://spreadsheets.google.com/feeds/list/".concat(e,"/3/public/values?alt=json")}else this.fetchQuery=this.url},Doe.prototype.setData=function(e){if(this.dataLoaded=!!e,"GOOGLESHEET"===this.type)this.data=e.values;else this.data=e;this.postProcessData()},Doe.prototype.getData=function(){return this.data},Doe.prototype.getName=function(){return this.name},Doe.prototype.setId=function(e){this.id=e},Doe.prototype.getId=function(){return this.id},Doe.prototype.asyncLoadData=(0,o.Z)(l().mark((function e(){var t,n=this;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(this.fetchQuery);case 2:return t=e.sent,e.t0=Moe,e.next=6,t;case 6:e.t1=e.sent,(0,e.t0)(e.t1).then((function(e){return n.setData(e)})).catch((function(e){}));case 8:case"end":return e.stop()}}),e,this)}))),Doe.prototype.loadData=function(){var e=this;fetch(this.fetchQuery).then(Moe).then((function(t){e.setData(t),e.valid=!0})).catch((function(t){console.log(t);var n=e;setTimeout((function(){n.loadData()}),1e3)}))},Doe.prototype.addDynamicField=function(e,t,n){-1===this.dynamicFields.findIndex((function(e){return e.elementId===n}))&&this.dynamicFields.push({column:e,id:t,elementId:n})},Doe.prototype.postProcessData=function(){if(0===this.fieldNames.length&&this.retreiveFieldNames(this.data[0]),this.formatDataToModel(this.data,this.fieldNames),!this.intervalUpdateData){var e=this;this.intervalUpdateData=setInterval((function(){e.asyncLoadData()}),this.dataRefreshRate)}},Doe.prototype.retreiveFieldNames=function(e){if("GOOGLESHEET"===this.type)this.fieldNames=e,this.idFieldName=e[0],this.data=this.data.splice(1,this.data.length-1)},Doe.prototype.formatDataToModel=function(e,t){var n=this,r=[];if("GOOGLESHEET"===this.type)e.forEach((function(e,a){var o={};t.forEach((function(t,n){o[t]=e[n]})),n.dataRefIndex[e[0]]=a,r.push(o)}));this.formatedData=r},Doe.prototype.getElementByProperty=function(e,t,n){return this[e].find((function(e){return e[t]===n}))},Doe.prototype.queryDataSet=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=this.getElementByProperty("dataSets","id",e);return 0===t.length&&(t=n.columns),this.queryObjectsArray(n.data,t)},Doe.prototype.queryObjectsArray=function(e,t){var n=[],r=[],a="";return e.forEach((function(e){r=[],a="",t.forEach((function(t){a=e[t.name],r.push(a)})),n.push(r)})),n};var Roe=Doe;function Poe(){this.dataSources=[],this.dynamicFieldsToUpdate=[]}Poe.prototype.init=function(){},Poe.prototype.find=function(e){var t=null;for(var n in this.dataSources)this.dataSources[n]&&this.dataSources[n].getId()===e&&(t=this.dataSources[n]);return t},Poe.prototype.getDataSources=function(){return this.dataSources},Poe.prototype.add=function(e){e.setId(this.dataSources.length+1),this.dataSources.push(e)},Poe.prototype.remove=function(e){var t=0;for(var n in this.dataSources){if(this.dataSources[n]&&this.dataSources[n].getId()===e)break;t+=1}t>0&&this.dataSources.splice(t,1)},Poe.prototype.addDynamicFieldToUpdate=function(e){this.dynamicFieldsToUpdate.push(e)},Poe.prototype.updateDynamicFields=function(){if(this.dynamicFieldsToUpdate.length>0)for(var e=0;e>this.dynamicFieldsToUpdate.length;e++)this.dynamicFieldsToUpdate[e].dataSource.populateDynamicField(this.dynamicFieldsToUpdate[e].column,this.dynamicFieldsToUpdate[e].id,this.dynamicFieldsToUpdate[e].elementId)};var joe=function(e){var t=e.className;return(0,re.jsxs)("svg",{className:"animate-spin ".concat(t),xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,re.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,re.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})},Foe=new Poe,Loe=function(t){var n=t.isHidden,i=(0,e.useState)("https://docs.google.com/spreadsheets/d/1gwYEvp4q0Zp2-b1DJcO1k3NoBO-BS5pZa6FwmyiXH1w/edit?usp=sharing"),s=(0,a.Z)(i,2),c=s[0],f=s[1],d=(0,e.useState)([]),p=(0,a.Z)(d,2),h=p[0],m=p[1],v=(0,e.useState)([]),g=(0,a.Z)(v,2),y=g[0],b=g[1],x=(0,e.useState)(0),w=(0,a.Z)(x,2),k=w[0],S=w[1],_=(0,e.useRef)(),N=(0,e.useState)(10),E=(0,a.Z)(N,2),C=E[0],I=E[1],O=(0,e.useState)(1),A=(0,a.Z)(O,2),D=A[0],M=A[1],R=(0,e.useState)(100),P=(0,a.Z)(R,2),j=P[0],F=P[1],L=(0,e.useState)(0),B=(0,a.Z)(L,2),z=(B[0],B[1],(0,e.useState)(0)),Z=(0,a.Z)(z,2),V=Z[0],U=Z[1],q=(0,e.useState)((0,re.jsx)(re.Fragment,{})),W=(0,a.Z)(q,2),H=W[0],G=W[1],K=(0,e.useState)([]),X=(0,a.Z)(K,2),Y=X[0],$=X[1],J=(0,e.useState)(!1),Q=(0,a.Z)(J,2),ee=Q[0],ne=Q[1],ae=(0,e.useState)(!0),oe=(0,a.Z)(ae,2),ie=oe[0];oe[1];(0,e.useEffect)((function(){Tt.init({GOOGLESHEET_API_KEY:"AIzaSyBprXnSGfHX1HJ4KQv6xYHtfwK_-tWHIYY"}),Tt.DataSources.create("TestData","https://docs.google.com/spreadsheets/d/1gwYEvp4q0Zp2-b1DJcO1k3NoBO-BS5pZa6FwmyiXH1w/edit?usp=sharing",function(){var e=(0,o.Z)(l().mark((function e(t,n){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}())}),[]);var se=function(){Tt.DataSources.create("TestData2",c,function(){var e=(0,o.Z)(l().mark((function e(t,n){var r,a,o;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Tt.DataSources.find("TestData2"),a={select:{nom:1,prenom:1,equipe:1,pause:1,debut:1,fin:1},from:"Simons",where:{equipe:9},orderBy:[{nom:1},{prenom:1}],limit:200,skip:0},e.next=4,Tt.DataSources.query("TestData2",!0,a);case 4:o=e.sent,console.log('FcmBd.DataSources.find("TestData")',r),console.log('FcmBd.DataSources.query("TestData")',o);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());var e=new Roe;e.load(c).then((function(t){t&&(Foe.add(e),console.log(e),m(Foe.getDataSources()),f(""),ne(!1))}))},ue=function(e,t){var n=e.target,a="checkbox"===n.type?n.checked:n.value,o=n.name;e.persist();var i=(0,r.Z)(Y);i[t][o]=a,$(i)},ce=function(e,t,n,a){e.persist();var o=(0,r.Z)(Y);o[a][t]=n,$(o)};(0,e.useEffect)((function(){var e=[];if(y&&y.length>0){for(var t=k/16*9,n=le(1.25*C),r=le(1.5*D),a=le(25),o=le(D),i=le(C),s=Math.floor((t-n-0-0-2*a-2*r)/(2*o+i+1)),u=function(t){var n=Y.filter((function(e){return!0===e.display})),r=h[y[0]].queryDataSet(y[1],Y.filter((function(e){return!0===e.display}))).slice(s*t,s*t+s);if(r.length>0){var a=(0,re.jsxs)("div",{className:"table rounded-sm overflow-hidden",style:{width:"".concat(j,"%"),marginLeft:"".concat(0===t?0:le(10),"px")},children:[(0,re.jsx)("div",{className:"table-header-group bg-gray-200 bg-opacity-90",children:(0,re.jsx)("div",{className:"table-row",children:n.map((function(e){return(0,re.jsx)("div",{className:"table-cell align-middle font-medium select-none leading-none truncate",style:{padding:"".concat(le(1.5*D),"px ").concat(le(3*D),"px ").concat(le(1.5*D),"px ").concat(le(3*D),"px"),fontSize:"".concat(le(1.25*C),"px"),lineHeight:"".concat(le(1.25*C),"px"),width:e.width>0?"".concat(e.width,"%"):"auto",textAlign:e.textAlign},children:e.title})}))})}),(0,re.jsx)("div",{className:"table-row-group bg-white bg-opacity-90",style:{padding:"".concat(le(D),"px 0")},children:r.map((function(e){return(0,re.jsx)("div",{className:"table-row",children:e.map((function(e,t){return(0,re.jsx)("div",{className:"table-cell align-middle select-none leading-none truncate border-t border-gray-300",style:{padding:"".concat(le(D),"px ").concat(le(3*D),"px ").concat(le(D),"px ").concat(le(3*D),"px"),fontSize:"".concat(le(C),"px"),lineHeight:"".concat(le(C),"px"),textAlign:n[t].textAlign},children:e})}))})}))})]});e.push(a)}},c=0;c<1;c++)u(c);U(s)}G(e)}),[k,C,D,h,y,Y,j]),(0,e.useEffect)((function(){S(_.current.offsetWidth)}),[_]);var le=function(e){var t=k;return 0===k&&(t=_.current.offsetWidth,S(t)),t/672*e};return(0,re.jsxs)("div",{className:"min-h-screen flex-col lg:flex-row items-start justify-center bg-gray-50 py-20 lg:py-12 px-4 sm:px-6 lg:px-8 space-y-20 lg:space-y-0 lg:space-x-40 ".concat(n?"hidden":"flex"),children:[(0,re.jsxs)("div",{className:"max-w-2xl w-full space-y-3",children:[(0,re.jsx)("div",{className:"flex flex-col items-start justify-start",children:(0,re.jsx)("h2",{className:"ml-2 text-left text-3xl font-extrabold text-gray-900 select-none",children:"Source de donn\xe9es"})}),(0,re.jsx)("div",{className:"flex flex-col items-center justify-center space-y-4 w-full",children:(0,re.jsxs)("div",{className:"flex flex-row item-center justify-center align-middle space-x-2 bg-gray-100 p-2 rounded-md w-full",children:[(0,re.jsx)("div",{className:"w-full flex flex-col",children:(0,re.jsx)("input",{id:"texte",onChange:function(e){var t=e.target.value;e.persist(),f(t)},value:c,name:"dataSourceUrl",type:"text",required:!0,className:"resize-none appearance-none relative block h-9 w-full px-3 py-2 border border-gray-300 placeholder-gray-300 text-gray-900 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 focus:z-10 sm:text-sm",placeholder:"Entrez l'url de la source de donn\xe9es",onKeyDown:function(e){"Enter"===e.key&&(e.preventDefault(),ne(!0),se())}})}),(0,re.jsx)("div",{onClick:function(e){if(e.preventDefault(),c)ne(!0),se();else{ne(!0);Tt.DataSources.query("TestData",!1,{select:{nom:1,prenom:1,equipe:1,pause:1,debut:1,fin:1},from:"Simons",where:{$and:[{pause:"A"},{equipe:121}]},orderBy:[{nom:1},{prenom:1}],limit:200,skip:0}).then((function(e){console.log('FcmBd.DataSources.query("TestData")',e),ne(!1)}))}},className:"rounded-md select-none h-9 w-9 font-medium text-center text-sm text-white align-middle border-2 flex items-center justify-center ".concat(ie?"cursor-pointer shadow bg-blue-600 hover:bg-blue-500 border-blue-600 hover:border-blue-500":"pointer-event-none bg-gray-100 border-gray-100"),children:ee?(0,re.jsx)(joe,{className:"h-5 w-5 text-white"}):ie?(0,re.jsx)(T,{className:"h-6 w-6 text-white"}):(0,re.jsx)(te,{className:"h-6 w-6 text-gray-300"})})]})}),(0,re.jsx)("div",{className:"flex flex-row space-x-2 items-start justify-start",children:h.map((function(e,t){return(0,re.jsx)("div",{className:"cursor-pointer flex flex-row items-center py-3 px-4 space-x-4 justify-center rounded-md border shadow-sm ".concat("text-gray-900 bg-gray-100 hover:bg-gray-100 border-gray-100 hover:border-gray-100"),children:(0,re.jsxs)("div",{className:"flex flex-col items-start justify-start space-y-1",children:[(0,re.jsx)("div",{className:"leading-none font-medium",children:e.name}),(0,re.jsx)("div",{className:"leading-none font-light text-xs",children:e.type}),(0,re.jsx)("div",{className:"flex flex-row items-start justify-start space-x-2 pt-2",children:e.dataSets.map((function(e,n){return(0,re.jsx)("div",{onClick:function(){return function(e,t){b([e,t]);var n=h[e].getElementByProperty("dataSets","id",t).columns.map((function(e){return u(u({},e),{},{filters:{},format:"",width:0,textAlign:"left",textDescriptions:{},display:!0})}));$(n)}(t,e.id)},className:"cursor-pointer flex flex-row items-center justify-center py-0.5 px-2 rounded-sm border bg-transparent ".concat(y.length>0&&y[0]===t&&y[1]===e.id?"text-white bg-blue-500 border-blue-500":"text-gray-600 border-gray-300 hover:border-blue-500 hover:text-blue-500"),children:(0,re.jsx)("div",{className:"text-xs",children:e.name})},n)}))})]})},t)}))}),Y.length>0&&(0,re.jsx)("div",{className:"flex flex-col item-start justify-start space-y-2 bg-gray-100 p-2 rounded-md w-full",children:(0,re.jsxs)("div",{className:"table w-full rounded-sm",children:[(0,re.jsx)("div",{className:"table-header-group",children:(0,re.jsxs)("div",{className:"table-row",children:[(0,re.jsx)("div",{className:"table-cell text-xs font-medium py-1 px-2"}),(0,re.jsx)("div",{className:"table-cell text-xs font-medium py-1 px-2",children:"Titre"}),(0,re.jsx)("div",{className:"table-cell text-xs font-medium py-1 px-2 text-center",children:"Afficher"}),(0,re.jsx)("div",{className:"table-cell text-xs font-medium py-1 px-2",children:"Alignement"}),(0,re.jsx)("div",{className:"table-cell text-xs font-medium py-1 px-2",children:"Largeur"})]})}),(0,re.jsx)("div",{className:"table-row-group",children:Y.map((function(e,t){return(0,re.jsxs)("div",{className:"table-row",children:[(0,re.jsx)("div",{className:"table-cell text-xs py-1 px-1 text-center align-middle",children:t+1}),(0,re.jsx)("div",{className:"table-cell py-1 px-2 align-middle",children:(0,re.jsx)("input",{id:"title-".concat(t),onChange:function(e){return ue(e,t)},value:e.title,name:"title",type:"text",autoComplete:"off",className:"resize-none appearance-none relative block h-6 w-full px-2 py-1 border border-gray-300 placeholder-gray-300 text-gray-900 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 focus:z-10 sm:text-sm",placeholder:"Titre"})}),(0,re.jsx)("div",{className:"table-cell py-1 px-2 text-center align-middle",children:(0,re.jsx)("input",{type:"checkbox",id:"display-".concat(t),name:"display",checked:e.display,onChange:function(e){return ue(e,t)},className:"appearance-none cursor-pointer checked:bg-blue-500 checked:border-transparent"})}),(0,re.jsx)("div",{className:"table-cell py-1 px-2 align-middle",children:(0,re.jsxs)("div",{className:"flex flex-row space-x-1",children:[(0,re.jsx)("div",{onClick:function(e){return ce(e,"textAlign","left",t)},className:"cursor-pointer",children:(0,re.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 ".concat("left"===e.textAlign&&"text-blue-500"),fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,re.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M 4 6 h 16 M 4 12 h 8 m -8 6 h 12"})})}),(0,re.jsx)("div",{onClick:function(e){return ce(e,"textAlign","center",t)},className:"cursor-pointer",children:(0,re.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 ".concat("center"===e.textAlign&&"text-blue-500"),fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,re.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M 4 6 h 16 M 8 12 h 8 m -10 6 h 12"})})}),(0,re.jsx)("div",{onClick:function(e){return ce(e,"textAlign","right",t)},className:"cursor-pointer",children:(0,re.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 ".concat("right"===e.textAlign&&"text-blue-500"),fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,re.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M 4 6 h 16 M 12 12 h 8 m -12 6 h 12"})})})]})}),(0,re.jsx)("div",{className:"table-cell py-1 px-2 align-middle",children:(0,re.jsxs)("div",{className:"flex flex-row",children:[(0,re.jsx)("input",{type:"range",className:"cursor-pointer",id:"width-".concat(t),step:1,name:"width",min:"0",max:100,onChange:function(e){return ue(e,t)},defaultValue:0}),(0,re.jsx)("div",{className:"text-xs px-2",children:e.width})]})})]},e.name)}))})]})})]}),(0,re.jsx)("div",{className:"max-w-2xl w-full space-y-3",ref:_,children:y&&y.length>0&&(0,re.jsxs)(re.Fragment,{children:[(0,re.jsxs)("div",{className:"w-full aspect-w-16 aspect-h-9 bg-gray-100 rounded-md shadow overflow-hidden",children:[(0,re.jsx)("div",{className:"w-full h-full gradientBackground"}),(0,re.jsx)("div",{className:"flex flex-row w-full h-full items-start justify-start",style:{padding:"".concat(le(25),"px ").concat(le(25),"px ").concat(le(25),"px ").concat(le(25),"px")},children:H})]}),(0,re.jsx)("div",{className:"flex flex-row flex-wrap item-center justify-start align-middle w-full mt-2",children:(0,re.jsx)("div",{children:"".concat(V,"/").concat(h[y[0]].queryDataSet(y[1],Y.filter((function(e){return!0===e.display}))).length)})}),(0,re.jsx)("div",{className:"flex flex-row flex-wrap item-center justify-start align-middle w-full mt-2",children:(0,re.jsxs)("div",{className:"flex flex-col lg:flex-row flex-wrap item-center justify-start align-middle w-full mt-4",children:[(0,re.jsxs)("div",{className:"flex flex-row",children:[(0,re.jsx)("div",{className:"select-none rounded-md m-1 py-0.5 text-center text-xs flex items-center font-medium justify-center align-middle border-2 text-gray-600 bg-gray-50 border-gray-50",children:"Taille du texte :"}),(0,re.jsx)("div",{className:"select-none rounded-md m-1 pl-2 pr-1 py-0.5 text-center text-xs flex items-center font-medium justify-center align-middle border-2 text-gray-600 bg-gray-50 border-gray-50",children:(0,re.jsx)("input",{type:"range",id:"fontSize",step:.1,name:"fontSize",min:"4",max:"25",onChange:function(e){return I(parseFloat(e.target.value))},defaultValue:10})}),(0,re.jsx)("div",{className:"select-none w-4 rounded-md m-1 pr-2 py-0.5 text-center text-xs flex items-center font-medium justify-center align-middle border-2 text-gray-600 bg-gray-50 border-gray-50",children:C})]}),(0,re.jsxs)("div",{className:"flex flex-row",children:[(0,re.jsx)("div",{className:"select-none rounded-md m-1 py-0.5 text-center text-xs flex items-center font-medium justify-center align-middle border-2 text-gray-600 bg-gray-50 border-gray-50",children:"Largeur du tableau :"}),(0,re.jsx)("div",{className:"select-none rounded-md m-1 pl-2 pr-1 py-0.5 text-center text-xs flex items-center font-medium justify-center align-middle border-2 text-gray-600 bg-gray-50 border-gray-50",children:(0,re.jsx)("input",{type:"range",id:"padding",step:1,name:"padding",min:"0",max:"100",onChange:function(e){return F(parseInt(e.target.value))},defaultValue:100})}),(0,re.jsx)("div",{className:"select-none w-4 rounded-md m-1 pr-2 py-0.5 text-center text-xs flex items-center font-medium justify-center align-middle border-2 text-gray-600 bg-gray-50 border-gray-50",children:j})]}),(0,re.jsxs)("div",{className:"flex flex-row",children:[(0,re.jsx)("div",{className:"select-none rounded-md m-1 py-0.5 text-center text-xs flex items-center font-medium justify-center align-middle border-2 text-gray-600 bg-gray-50 border-gray-50",children:"Espacement :"}),(0,re.jsx)("div",{className:"select-none rounded-md m-1 pl-2 pr-1 py-0.5 text-center text-xs flex items-center font-medium justify-center align-middle border-2 text-gray-600 bg-gray-50 border-gray-50",children:(0,re.jsx)("input",{type:"range",id:"padding",step:.1,name:"padding",min:"1",max:"10",onChange:function(e){return M(parseFloat(e.target.value))},defaultValue:1})}),(0,re.jsx)("div",{className:"select-none w-4 rounded-md m-1 pr-2 py-0.5 text-center text-xs flex items-center font-medium justify-center align-middle border-2 text-gray-600 bg-gray-50 border-gray-50",children:D})]})]})})]})})]})},Boe=function(e){var t=e.className;return(0,re.jsxs)("svg",{className:"animate-spin ".concat(t),xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,re.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,re.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})},zoe=function(t){var n=t.list,r=t.onChange,o=(0,e.useState)(""),i=(0,a.Z)(o,2),s=i[0],u=i[1];return(0,re.jsx)("div",{className:"w-72",children:(0,re.jsx)(ji,{value:s,onChange:function(e){r(e),u(e)},children:(0,re.jsxs)("div",{className:"relative",children:[(0,re.jsxs)(ji.Button,{className:"relative border border-gray-200 w-full py-2 pl-3 pr-10 text-left bg-white rounded-lg cursor-default focus:outline-none focus-visible:ring-2 focus-visible:ring-opacity-75 focus-visible:ring-white focus-visible:ring-offset-orange-300 focus-visible:ring-offset-2 focus-visible:border-indigo-500 sm:text-sm",children:[(0,re.jsx)("span",{className:"block truncate",children:s||"Choisir"}),(0,re.jsx)("span",{className:"absolute inset-y-0 right-0 flex items-center pr-2 pointer-events-none",children:(0,re.jsx)(rs,{className:"w-5 h-5 text-gray-400","aria-hidden":"true"})})]}),(0,re.jsx)(ts,{as:e.Fragment,leave:"transition ease-in duration-100",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:(0,re.jsx)(ji.Options,{className:"absolute w-full py-1 mt-1 overflow-auto text-base bg-white rounded-md shadow-lg max-h-60 ring-1 ring-black ring-opacity-5 focus:outline-none z-10 sm:text-sm",children:n.map((function(e,t){return(0,re.jsx)(ji.Option,{className:function(e){var t=e.active;return"".concat(t?"text-blue-900 bg-blue-100":"text-gray-900","\n                            cursor-default select-none relative py-2 pl-10 pr-4")},value:e,children:function(t){var n=t.selected;t.active;return(0,re.jsxs)(re.Fragment,{children:[(0,re.jsx)("span",{className:"".concat(n?"font-medium":"font-normal"," block truncate"),children:e}),n?(0,re.jsx)("span",{className:"".concat("text-blue-600","\n                                    absolute inset-y-0 left-0 flex items-center pl-3"),children:(0,re.jsx)(ns,{className:"w-5 h-5","aria-hidden":"true"})}):null]})}},t)}))})})]})})})},Zoe=function(t){var n=t.isHidden,r=(0,e.useState)(),o=(0,a.Z)(r,2),i=o[0],s=o[1],u=(0,e.useState)(),c=(0,a.Z)(u,2),l=c[0],f=c[1],d=(0,e.useState)(),p=(0,a.Z)(d,2),h=p[0],m=p[1],v=(0,e.useState)(),g=(0,a.Z)(v,2),y=g[0],b=g[1],x=(0,e.useState)(),w=(0,a.Z)(x,2),k=w[0],S=w[1],_=(0,e.useState)(),N=(0,a.Z)(_,2),E=N[0],C=N[1],T=(0,e.useState)(),I=(0,a.Z)(T,2),O=I[0],A=I[1],D=(0,e.useState)(),M=(0,a.Z)(D,2),R=M[0],P=M[1],j=(0,e.useState)(),F=(0,a.Z)(j,2),L=F[0],B=F[1],z=(0,e.useState)(!1),Z=(0,a.Z)(z,2),V=Z[0];Z[1];(0,e.useEffect)((function(){if(l){var e={};Tt.DataSources.list(i,l).forEach((function(t){e[t]=1}));var t=JSON.stringify(e).replaceAll(",",", ").replaceAll(":",": ").replaceAll("{","{ ").replaceAll("}"," }");m(t);var n=U(l,t);P(n),Tt.DataSources.query(i,!1,n).then((function(e){return B(e)}))}}),[i,l]);var U=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,i={};return e&&(i.from=e),q(t)&&(i.select=JSON.parse(t)),q(n)&&(i.where=JSON.parse(n)),q(r)&&(i.orderBy=JSON.parse(r)),""!==a&&void 0!==a&&(i.limit=parseFloat(a)),""!==o&&void 0!==o&&(i.skip=parseFloat(o)),i},q=function(e){try{JSON.parse(e)}catch(t){return!1}return!0};return(0,re.jsxs)("div",{className:"min-h-screen flex-col lg:flex-row items-start justify-center bg-gray-100 py-20 lg:py-12 px-4 sm:px-6 lg:px-8 space-y-20 lg:space-y-0 lg:space-x-20 ".concat(n?"hidden":"flex"),children:[(0,re.jsxs)("div",{className:"max-w-xl w-full space-y-7",children:[(0,re.jsx)("div",{className:"flex flex-col items-start justify-start",children:(0,re.jsx)("h2",{className:"ml-2 text-left text-3xl font-extrabold text-gray-900 select-none",children:"Concepteur de tableau"})}),(0,re.jsx)("div",{className:"flex flex-col items-center justify-center space-y-4 w-full",children:(0,re.jsxs)("div",{className:"bg-white shadow overflow-hidden sm:rounded-lg w-full",children:[(0,re.jsxs)("div",{className:"px-4 py-5 sm:px-6",children:[(0,re.jsx)("h3",{className:"select-none text-lg leading-6 font-medium text-gray-900",children:"Nouveau tableau"}),(0,re.jsx)("p",{className:"select-none mt-1 max-w-2xl text-sm text-gray-500",children:"D\xe9finissez les donn\xe9es \xe0 afficher."})]}),(0,re.jsx)("div",{className:"border-t border-gray-200",children:(0,re.jsxs)("dl",{children:[(0,re.jsxs)("div",{className:"bg-white px-4 py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6",children:[(0,re.jsx)("dt",{className:"select-none text-sm font-medium text-gray-500",children:"Source"}),(0,re.jsx)("dd",{className:"select-none mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2",children:(0,re.jsxs)("div",{className:"flex flex-col space-y-1 w-full",children:[(0,re.jsx)(zoe,{list:Tt.DataSources.list(),onChange:s}),i&&(0,re.jsx)(zoe,{list:Tt.DataSources.list(i),onChange:f})]})})]}),(0,re.jsxs)("div",{className:"bg-white px-4 py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6",children:[(0,re.jsx)("dt",{className:"select-none text-sm font-medium text-gray-500",children:"Colonnes"}),(0,re.jsx)("dd",{className:"select-none mt-1 text-xs text-gray-900 sm:mt-0 sm:col-span-2",children:(0,re.jsx)("textarea",{id:"columns",onChange:function(e){var t=e.target.value;e.persist(),m(t)},value:h,name:"columns",type:"textarea",required:!0,className:"resize-none select-all appearance-none relative block w-full h-16 max-h-16 px-3 py-2 border border-gray-300 placeholder-gray-400 text-gray-900 rounded-md focus:placeholder-transparent focus:outline-none focus:ring-blue-500 focus:border-blue-500 focus:z-10 sm:text-xs",placeholder:"Colonnes \xe0 afficher"})})]}),(0,re.jsxs)("div",{className:"bg-white px-4 py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6",children:[(0,re.jsx)("dt",{className:"select-none text-sm font-medium text-gray-500",children:"Filtres"}),(0,re.jsx)("dd",{className:"select-none mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2",children:(0,re.jsx)("textarea",{id:"where",onChange:function(e){var t=e.target.value;e.persist(),b(t)},value:y,name:"where",type:"textarea",required:!0,className:"resize-none select-all appearance-none relative block w-full h-16 max-h-16 px-3 py-2 border border-gray-300 placeholder-gray-400 text-gray-900 rounded-md focus:placeholder-transparent focus:outline-none focus:ring-blue-500 focus:border-blue-500 focus:z-10 sm:text-xs",placeholder:"Condition d'affichage"})})]}),(0,re.jsxs)("div",{className:"bg-white px-4 py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6",children:[(0,re.jsx)("dt",{className:"select-none text-sm font-medium text-gray-500",children:"Tri"}),(0,re.jsx)("dd",{className:"select-none mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2",children:(0,re.jsx)("textarea",{id:"orderBy",onChange:function(e){var t=e.target.value;e.persist(),S(t)},value:k,name:"orderBy",type:"textarea",required:!0,className:"resize-none select-all appearance-none relative block w-full h-16 max-h-16 px-3 py-2 border border-gray-300 placeholder-gray-400 text-gray-900 rounded-md focus:placeholder-transparent focus:outline-none focus:ring-blue-500 focus:border-blue-500 focus:z-10 sm:text-xs",placeholder:"Tri"})})]}),(0,re.jsxs)("div",{className:"bg-white px-4 py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6",children:[(0,re.jsx)("dt",{className:"select-none text-sm font-medium text-gray-500",children:"Limite"}),(0,re.jsx)("dd",{className:"select-none mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2",children:(0,re.jsx)("input",{id:"limit",onChange:function(e){var t=e.target.value;e.persist(),C(t)},value:E,name:"limit",type:"number",required:!0,className:"resize-none appearance-none relative block h-9 w-full px-3 py-2 border border-gray-300 placeholder-gray-300 text-gray-900 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 focus:z-10 sm:text-sm",placeholder:"Nombre maximum de lignes retourn\xe9es"})})]}),(0,re.jsxs)("div",{className:"bg-white px-4 py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6",children:[(0,re.jsx)("dt",{className:"select-none text-sm font-medium text-gray-500",children:"Saut"}),(0,re.jsx)("dd",{className:"select-none mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2",children:(0,re.jsx)("input",{id:"skip",onChange:function(e){var t=e.target.value;e.persist(),A(t)},value:O,name:"skip",type:"number",required:!0,className:"resize-none appearance-none relative block h-9 w-full px-3 py-2 border border-gray-300 placeholder-gray-300 text-gray-900 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 focus:z-10 sm:text-sm",placeholder:"Ligne de d\xe9part"})})]}),(0,re.jsx)("div",{className:"px-4 py-5 sm:px-6 justify-end flex border-t border-gray-200",children:(0,re.jsx)("div",{onClick:function(e){var t=U(l,h,y,k,E,O);P(t),Tt.DataSources.query(i,!1,t).then((function(e){return B(e)}))},className:"w-1/5 rounded-md select-none font-medium py-1 px-2 text-center text-sm text-white shadow align-middle bg-blue-600 hover:bg-blue-500 cursor-pointer border-2 border-blue-600 hover:border-blue-500 flex items-center justify-center",children:V?(0,re.jsx)(Boe,{className:"h-5 w-5 text-white"}):"Ex\xe9cuter"})})]})})]})})]}),(0,re.jsx)("div",{className:"max-w-5xl overscroll-auto w-full space-y-3",children:R&&L&&(0,re.jsxs)(re.Fragment,{children:[(0,re.jsx)("div",{className:"",children:(0,re.jsxs)("div",{className:"flex flex-row items-start justify-start space-x-2",children:[(0,re.jsxs)("div",{className:"px-5 py-2 bg-white shadow sm:rounded-lg",children:[(0,re.jsx)("h3",{className:"select-none text-xs text-gray-500",children:"Nb. rang\xe9es"}),(0,re.jsx)("p",{className:"select-none text-sm font-medium text-gray-900",children:"".concat(L.returnedNbRows,"/").concat(L.datasetNbRows)})]}),(0,re.jsxs)("div",{className:"px-5 py-2 bg-white shadow sm:rounded-lg",children:[(0,re.jsx)("h3",{className:"select-none text-xs text-gray-500",children:"Dur\xe9e"}),(0,re.jsx)("p",{className:"select-none text-sm font-medium text-gray-900",children:"".concat(L.duration,"s")})]})]})}),(0,re.jsxs)("div",{className:"table rounded-lg overflow-hidden w-full shadow",children:[(0,re.jsx)("div",{className:"table-header-group bg-gray-900 bg-opacity-90",children:(0,re.jsx)("div",{className:"table-row",children:Object.keys(R.select).map((function(e){return(0,re.jsx)("div",{className:"py-2 px-2 table-cell text-sm align-middle text-white font-medium select-none leading-none truncate",children:e},"".concat(e,"_header"))}))})}),L&&L.data&&L.data.length>0&&(0,re.jsx)("div",{className:"table-row-group bg-white bg-opacity-90",children:L.data.map((function(e,t){return(0,re.jsx)("div",{className:"table-row",children:Object.keys(R.select).map((function(t,n){return(0,re.jsx)("div",{className:"py-1 px-2 table-cell text-xs align-middle select-none leading-none truncate border-t border-gray-300",children:e[t]},"".concat(t,"_").concat(n+1))}))},"row_".concat(t))}))})]})]})})]})};var Voe=function(){var t=(0,e.useState)("CreationTool"),n=(0,a.Z)(t,2),o=n[0],i=n[1],s=(0,e.useState)(!1),u=(0,a.Z)(s,2),c=u[0],l=u[1],f=(0,e.useState)([]),d=(0,a.Z)(f,2),p=d[0],h=d[1],m=(0,e.useState)(!1),v=(0,a.Z)(m,2),g=v[0],y=v[1],b=(0,mt.useMediaQuery)({query:"(max-width: 760px)"}),x=function(e,t){var n=e.target.value;e.persist(),g&&y(!1);var a=(0,r.Z)(p);if(a.push(n),6===a.length){var o=10*parseInt(a[0])+parseInt(a[1])+(10*parseInt(a[2])+parseInt(a[3]))+(10*parseInt(a[4])+parseInt(a[5]))===150;o?l(o):(a=[],y(!0))}var i=document.querySelector("input[name=password-".concat(parseInt(a.length)+1,"]"));null!==i&&i.focus(),h(a)},w=function(e,t){if(e.preventDefault(),e.stopPropagation(),t!==p.length+1){var n=document.querySelector("input[name=password-".concat(p.length+1,"]"));null!==n&&n.focus()}},k=function(e,t){if("Backspace"===e.key){e.preventDefault();var n=(0,r.Z)(p);n.length>0&&n.splice(n.length-1,1);var a=document.querySelector("input[name=password-".concat(n.length+1,"]"));null!==a&&a.focus(),h(n)}};return(0,re.jsx)(re.Fragment,{children:c?"LayoutToolV2"===o?(0,re.jsxs)("div",{className:"w-full flex flex-col sm:flex-row flex-wrap sm:flex-nowrap max-h-screen flex-grow ",children:[(0,re.jsx)("div",{className:"z-50 flex-shrink flex-grow-0 bg-gray-100 shadow-md shadow-gray-900/50",children:(0,re.jsx)("div",{className:"sticky top-0 w-full h-full",children:(0,re.jsxs)("div",{className:"flex flex-row lg:flex-col lg:max-w-min lg:min-h-screen p-3 lg:p-4 lg:pt-7 space-x-4 lg:space-x-0 lg:space-y-4 rounded-br-md bg-white shadow lg:bg-transparent lg:shadow-none",children:[(0,re.jsx)(V,{onClick:function(){return i("CreationTool")},className:"h-6 w-6 text-".concat("CreationTool"===o?"blue-600":"gray-400"," hover:text-blue-500 cursor-pointer")}),(0,re.jsx)(D,{onClick:function(){return i("CreationFromDataTool")},className:"h-6 w-6 text-".concat("CreationFromDataTool"===o?"blue-600":"gray-400"," hover:text-blue-500 cursor-pointer")}),(0,re.jsx)($,{onClick:function(){return i("LayoutToolV2")},className:"h-6 w-6 text-".concat("LayoutToolV2"===o?"blue-600":"gray-400"," hover:text-blue-500 cursor-pointer")}),(0,re.jsx)(H,{onClick:function(){return i("ObjectDetectionTool")},className:"h-6 w-6 text-".concat("ObjectDetectionTool"===o?"blue-600":"gray-400"," hover:text-blue-500 cursor-pointer")}),(0,re.jsx)(E,{onClick:function(){return i("BirthdayTool")},className:"h-6 w-6 text-".concat("BirthdayTool"===o?"blue-600":"gray-400"," hover:text-blue-500 cursor-pointer")}),(0,re.jsx)(R,{onClick:function(){return i("DataSourceTool")},className:"h-6 w-6 text-".concat("DataSourceTool"===o?"blue-600":"gray-400"," hover:text-blue-500 cursor-pointer")}),(0,re.jsx)(Y,{onClick:function(){return i("VisualQueryBuilderTool")},className:"h-6 w-6 text-".concat("VisualQueryBuilderTool"===o?"blue-600":"gray-400"," hover:text-blue-500 cursor-pointer")})]})})}),"LayoutToolV2"===o&&(0,re.jsx)(_V,{isHidden:"LayoutToolV2"!==o})]}):(0,re.jsxs)(re.Fragment,{children:[(0,re.jsxs)("div",{className:"z-50 absolute top-0 left-0 flex flex-row lg:flex-col lg:max-w-min lg:min-h-screen p-3 lg:p-4 lg:pt-7 space-x-4 lg:space-x-0 lg:space-y-4 rounded-br-md bg-white shadow lg:bg-transparent lg:shadow-none",children:[(0,re.jsx)(V,{onClick:function(){return i("CreationTool")},className:"h-6 w-6 text-".concat("CreationTool"===o?"blue-600":"gray-400"," hover:text-blue-500 cursor-pointer")}),(0,re.jsx)(D,{onClick:function(){return i("CreationFromDataTool")},className:"h-6 w-6 text-".concat("CreationFromDataTool"===o?"blue-600":"gray-400"," hover:text-blue-500 cursor-pointer")}),(0,re.jsx)($,{onClick:function(){return i("LayoutToolV2")},className:"h-6 w-6 text-".concat("LayoutToolV2"===o?"blue-600":"gray-400"," hover:text-blue-500 cursor-pointer")}),(0,re.jsx)(H,{onClick:function(){return i("ObjectDetectionTool")},className:"h-6 w-6 text-".concat("ObjectDetectionTool"===o?"blue-600":"gray-400"," hover:text-blue-500 cursor-pointer")}),(0,re.jsx)(E,{onClick:function(){return i("BirthdayTool")},className:"h-6 w-6 text-".concat("BirthdayTool"===o?"blue-600":"gray-400"," hover:text-blue-500 cursor-pointer")}),(0,re.jsx)(R,{onClick:function(){return i("DataSourceTool")},className:"h-6 w-6 text-".concat("DataSourceTool"===o?"blue-600":"gray-400"," hover:text-blue-500 cursor-pointer")}),(0,re.jsx)(Y,{onClick:function(){return i("VisualQueryBuilderTool")},className:"h-6 w-6 text-".concat("VisualQueryBuilderTool"===o?"blue-600":"gray-400"," hover:text-blue-500 cursor-pointer")})]}),(0,re.jsx)(Nt,{isHidden:"CreationTool"!==o}),"CreationFromDataTool"===o&&(0,re.jsx)(Is,{isHidden:"CreationFromDataTool"!==o}),"LayoutTool"===o&&(0,re.jsx)($P,{isHidden:"LayoutTool"!==o}),"ObjectDetectionTool"===o&&(0,re.jsx)(Noe,{isHidden:"ObjectDetectionTool"!==o}),(0,re.jsx)(Toe,{isHidden:"BirthdayTool"!==o}),(0,re.jsx)(Loe,{isHidden:"DataSourceTool"!==o}),(0,re.jsx)(Zoe,{isHidden:"VisualQueryBuilderTool"!==o})]}):(0,re.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:(0,re.jsxs)("div",{className:"max-w-2xl w-full space-y-4",children:[(0,re.jsxs)("div",{className:"flex flex-col items-center justify-center",children:[(0,re.jsx)("h3",{className:"text-center text-xl font-medium text-gray-900",children:"Netsign.tv"}),(0,re.jsx)("h2",{className:"mt-1 text-center text-3xl font-extrabold text-gray-900",children:"Cr\xe9ation simplifi\xe9e"}),(0,re.jsx)("p",{className:"mt-3 text-center text-sm text-blue-500",children:"Entrez le code d'acc\xe8s"})]}),(0,re.jsxs)("div",{className:"flex flex-col items-center justify-center space-y-4",children:[(0,re.jsxs)("div",{className:"flex flex-row item-center justify-center align-middle space-x-2 bg-gray-100 p-2 rounded-md ".concat(g&&"shake"),children:[(0,re.jsx)("input",{id:"password-1",name:"password-1",type:"password",pattern:"[0-9]*",inputMode:"numeric",onChange:function(e){return x(e)},value:p[0]?p[0]:"",autoFocus:!b,onClick:function(e){return w(e,1)},onKeyDown:function(e){return k(e)},required:!0,className:"appearance-none relative block text-center w-8 px-1 lg:px-3 py-2 border border-gray-300 placeholder-gray-300 text-gray-900 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 focus:z-10 sm:text-sm",placeholder:""}),(0,re.jsx)("input",{id:"password-2",name:"password-2",type:"password",pattern:"[0-9]*",inputMode:"numeric",onChange:function(e){return x(e)},value:p[1]?p[1]:"",onClick:function(e){return w(e,2)},onKeyDown:function(e){return k(e)},required:!0,className:"appearance-none relative block text-center w-8 px-1 lg:px-3 py-2 border border-gray-300 placeholder-gray-300 text-gray-900 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 focus:z-10 sm:text-sm",placeholder:""}),(0,re.jsx)("input",{id:"password-3",name:"password-3",type:"password",pattern:"[0-9]*",inputMode:"numeric",onChange:function(e){return x(e)},value:p[2]?p[2]:"",onClick:function(e){return w(e,3)},onKeyDown:function(e){return k(e)},required:!0,className:"appearance-none relative block text-center w-8 px-1 lg:px-3 py-2 border border-gray-300 placeholder-gray-300 text-gray-900 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 focus:z-10 sm:text-sm",placeholder:""}),(0,re.jsx)("input",{id:"password-4",name:"password-4",type:"password",pattern:"[0-9]*",inputMode:"numeric",onChange:function(e){return x(e)},value:p[3]?p[3]:"",onClick:function(e){return w(e,4)},onKeyDown:function(e){return k(e)},required:!0,className:"appearance-none relative block text-center w-8 px-1 lg:px-3 py-2 border border-gray-300 placeholder-gray-300 text-gray-900 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 focus:z-10 sm:text-sm",placeholder:""}),(0,re.jsx)("input",{id:"password-5",name:"password-5",type:"password",pattern:"[0-9]*",inputMode:"numeric",onChange:function(e){return x(e)},value:p[4]?p[4]:"",onClick:function(e){return w(e,5)},onKeyDown:function(e){return k(e)},required:!0,className:"appearance-none relative block text-center w-8 px-1 lg:px-3 py-2 border border-gray-300 placeholder-gray-300 text-gray-900 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 focus:z-10 sm:text-sm",placeholder:""}),(0,re.jsx)("input",{id:"password-6",name:"password-6",type:"password",pattern:"[0-9]*",inputMode:"numeric",onChange:function(e){return x(e)},value:p[5]?p[5]:"",onClick:function(e){return w(e,6)},onKeyDown:function(e){return k(e)},required:!0,className:"appearance-none relative block text-center w-8 px-1 lg:px-3 py-2 border border-gray-300 placeholder-gray-300 text-gray-900 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 focus:z-10 sm:text-sm",placeholder:""})]}),(0,re.jsx)("div",{className:"flex flex-col items-center justify-center",children:(0,re.jsx)("p",{className:"text-center text-xs text-gray-300",children:"v 1.5.0"})})]})]})})})},Uoe=function(e){e&&e instanceof Function&&n.e(787).then(n.bind(n,787)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,o=t.getLCP,i=t.getTTFB;n(e),r(e),a(e),o(e),i(e)}))};t.render((0,re.jsx)(e.StrictMode,{children:(0,re.jsx)(kP,{children:(0,re.jsx)(Voe,{})})}),document.getElementById("root")),Uoe()}()}();
//# sourceMappingURL=main.373f7a2c.js.map